(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-84a4d64a"],{"0009":function(t,e,i){"use strict";var s=i("cc68"),n=i.n(s);n.a},"0010":function(t,e,i){"use strict";var s=i("01b1"),n=i.n(s);n.a},"0061":function(t,e,i){"use strict";var s=i("49d9"),n=i.n(s);n.a},"00be":function(t,e,i){},"00db":function(t,e,i){},"00dc":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGIAAABQCAYAAADiF6CoAAALOklEQVR4Xu2da2wc1RXH/2dmZ9f7imOI7d21TY1EcSBECGHAIkBrlSKBADWBkEKE+FJAVUvVqkL9UKk4/YTaSn2oagsVJCWNaZTwDqQ82pRXk7QWJCEoaUElVWyX+Bl77bV353Gqu7aT8Xq9OzM7+7A0I1mKMvee1+/ee+65M5olrNDrwIEDvsjq1bdITLdqqg6WpP0+0t/s7OxUV6JLtJKMfu21TwKxWOp2AHcw0SYwR4X9qroQe5oC8AIb+quxWONLF1988exK8a/mQfT19YVk2b/RYOMOgO4EEMwN7nkQi+5kwLwPsvzq6mhoz9q1a5O1DKUmQRw69Mkqvz+12QDuIOBWAP5CQVwGhLmLDuAtkmhfaor/1N3dOVJrUGoGxOHDJy6U/ZktxLiTmW8mItlqsCyAOCeKiJjBfyfml5n13q6urn6resrZrqog+vr64kS+rwP0NZLoBmaWnDhrB8RS+XSURF5hqber66pPnOh3o0/FQRw8+GF7ICBvAXgTiK5h5pJtKA3EojB+CsZeXTJ2b7j22iNuBNiqjJKDYEXR0aNHO1SVtxDR3SCst9LHThsXQZxXSzTIbOyGgedef/3Vgz09PYYdm+y2LRuIDz44fiWTvhnM9wD0RbuG2WlfFhBmAxjjDDwrEb2cSk3+pbu7W7Njn5W2roEQS8yxY8eu1QzcBSax9FxkxQA32pQdxGIjUwQ8yxLvHxse3nfbbbel3fChJBAiufYdOXITsbRRArYw0OyGUXZlVBiE2TyVgT0S+HVZpr2dnZ0pu7YvtHcMYnR06quTybO/n5pOXphJZyJODXCjXxVBZM1XFGUiGAor0WjkqbaW2Hec+OQIxOjo2a/qBl4hQkDsy3Vdn5meSsrTMym1GlCqAUIEPxwO+4PhsCZLUuTc7o/xy7bW2HftwrANYnw8eZOqaX8moiVHDVkohj4zNZWUU6nKQakUCJ/imwyHI0ooFNJlWQ4vt/WWJHq0Jd78MzswbIEYHZ3oMpjfBFB0KSo3lEwmg8HBQfT390M3DLQkEojF4wj4C56G2InN/LIzF/xgkeAvEUzY2paI9VpVaBnE8PDZq0H4K4BVVoWfS0QuzZSJiUn095/GwMAAzgwNgZkXmUJEaFyzBolEAolEC+rrbZs6H3z/ZDgSUoLBwiO/UByIyJCAWxOJ5jesxMsSiDNnxq+UZDoAoMGK0CIGsqZrs6npKWm6yPKl6zqGhoayo75/YADJpL0D1HA4gpZEPAumqakJsrz88ZWilB78PH7PwuAvtbXF/1EsbkVBjIwkL2PobwNoLCbM7n2xfOVCmZmZyY747N/gIDTNndrJ5/MhFoshIcDEEwgGgxDBD4WC/nA4rEkF1ny7fuW0H5Ugb2hpafxXwQFa6ObQ0MQlJOFtgBMlGlO0u4CSnEpmDh865Dt+/GPxb1/RTg4aRMJR9fJ1l1Hn1Z1qOBKuc+Osq5gZBJzSVPn69vbG/y3XdtkZMTY2dpFuSO8A+EIxRWW4zwMD/dqJkyelj12AEolE1bVrO6SOjg49Ho8rAIquBGXw6VhAkTY0NTWJp4h5cnue/xwaGoqR5BcQynpGZNFZR1DMwY/FYn6RyKt9MfB+W6L5y0S0ZL1dYt3ExMQFqop3GLyu2obn0c8DAwPaiZMn8s6UueCvlTo6LtVrJfhLhz691Bpv2iiWYvO9RSCGh4ejIL/ICVfVIIRck+ahnCRNU0ksOzUb/CWW48m21tjDeUGcPn06GAytOsDM160ACOdMDAT8mE2nkU67cghaQdf5sbaW+I8XFGZnBDPLIyNnD4DoxgpaUrIqxedDoM6PdEZFKpWCqDtW0kUSPdAab35G2JwFMTx29mEY+N1KckKSJASDAYgkLECIKnt6enpJtV3jPs22JpqjInnPgRg9+xAYT9S40YvMC4XqIGCIS4AQl5gRYmZU6pImRxA9+ALSF63D7GXXO1E70ppobhbHIQtLkzIyOvErAA8CsPwaixPNbvSpqwvA5ztv5gIIIVscBpY7X/hG+hF9fy9Cx/4GMjSwJGP07h/YhMEf+iTf9+LxRnFqsbiwGR0dXWUY8kMAHgbhEjeC5rYMv1+B+DNfZhDi/8UxiVtHI2Y9ysC/swCCJw9CvB1lvizCmGHiHZKhP9na2rroLZFlq5zh4fFuSPQgGPfUyiwRh3YiL+ReuSDczheB/xxB9L09qPvsaMFxVQDGIRCe1tIzO5d7H7douTlX4LGYIQ8xo93tEW5VnkjKIi/kq5BzQbiZL5TPP0Pj049CUq29z3wOxuUbJmHwdl0znmhvT5wo5mdREAsCxOHY2NjkLQz+BjM2VnqWBIN1kOX8LwLmA+FmvvCf+ghrerdZh0ES6w3NNyuPvyKe31i6LIMwS/s8mWzya/SUYei35z6csaTVZiNRtCnK8oexy4FwM1/YhQGgh57s22bVVUcgsg6m1cfY4B6xZVRVrWzF1ELRVsihQiDczBc2YVQOBJh7FgJkGJwFInYrbs0Sc9HmFISb+ULICvz3I6zZtQ1UPGdUB8T5XDJXWLkxS8xFWykg3MgXYpOgKEr2L/jWM6h7Y3uxVae6IMzWlTJLcou2UkE4zRc+2QfFr2Sfdy/s2JTD+xDa89OVA8LpLMlXtLkBwmq+MI/+hWMUs37f8fcQ3vHDpSYRvwumPwL4CYCfVyxZm3NEseFhNZcsV7S5AaJYvsg3+vPplU8dR+TX31pyS1t/Q4/yyC+28TfXN8CoW09P/FM85bR0lbRrcgKi0CwhiRAK5i/a3AIh5Ig3A2dn5wq0YqM/n14a6ceqx7dCveJGqB3XIHDoFUBNY/r723vqG+otb1nNsqsGIjeXMBvZ01Qnz5YLbV+XA2gYRnZ350jnzBRCux9H6v4eQJ6vb2amQKFIT300vHJBWJq7BRo5AVGqTujaeQjzwojggSg5sC4I8EDMPxhyIZYlifBAeCDOH3GUNJRK7FyVHJHHZm9GeDPCmxGLagFv11Qbn2jyliZvafKWJm9pMkXA2zWZntCVuAMtqbsHwgOxaAB5ydpL1l6y9pK1l6znIiDeayrlCV1J2Tmns5esvWTtJWtzBLwZ4c0Ib0Z4M2I+Al6yXrrd8Ao6r6DzCrqqF3TptPojg9nRy1Ru1hBCVu3smqTH6qPBc18TsOOn4zf90mltk8HGc3aUlattrYCQie6KRkPPO/HTMQihbHY2820GHgFwqRPlbvWpARDHQfjN6mj4t059KgnEgtJkOn2FzLifgK0AtTg1xmm/KoE4BaA3w9qOpvr6kn/uwBUQ5gBmMpkuzcB9YGwlwgVOg2unXwVBDBF4l6HTzoaG8Id2bCzW1nUQCwrFd8PT6fTNzNhMknwvM4eLGeP0fjlBMHOSJNopQ9odidS9m/vBK6c25/YrGwizImZWMhn9TsPQxY93bBaf03bLgXLsmogozcy9BvBCQzS0P9+n39y0X8iqCIgcKMFZVb2HDd5EIPFTZo5+zsYs06UZYRDRXhBeXBUOPi9guB3sQvIqDsJszNjYWH0oEtnKBu4G0O3U8VJAELCfCS/WR0K7iGjaqQ2l9qsqCLPxySQ3yUr6AUDaQsDVdhyzC4JA70PCXg4H/7CaaNyOrnK1rRkQZgfHZ2ba6yTfA2C+F0BHMeetgGDgIyLsVmexvbExPFhMZqXv1ySIxTMlvU7xS/czixqFW/MFaHkQ9BkR98LQdtTX139a6eDa0VfzIMzOpDKZ6yQD9zFhKxgXLtwzgyDgDEC7DN3Y2dAQqehPmNkJfFW2r6UYmK/vXI2ifYWZN4NwXzqj6kS0k5h2R6N175Vrr++2H2Z5K2pGLAdFfDF1JQbf7M//AStLHKtL46CbAAAAAElFTkSuQmCC"},"0132":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"font-search-panel-wrap"},[t.isCompanyDomain?i("div",{attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"tags-group flex"},t._l(t.tags,(function(e,s){return i("div",{key:s,class:"tags-group__tags fo-14 "+(s===t.fontTagsFlag&&"tags-group--active"),on:{click:function(e){return t.changeTags(s)}}},[t._v(" "+t._s(e)+" ")])})),0)]):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.fontTagsFlag,expression:"fontTagsFlag === 0"}]},[i("div",{staticClass:"header"},[i("a-input",{staticClass:"mb-10",attrs:{size:"small",clearable:"",placeholder:"请输入内容"},on:{input:t.handleSearch},model:{value:t.form.keyword,callback:function(e){t.$set(t.form,"keyword",e)},expression:"form.keyword"}},[i("a-icon",{attrs:{slot:"prefix",type:"search"},slot:"prefix"})],1),i("a-button-group",{staticClass:"w100p mt-5",attrs:{size:"small"}},t._l(t.$data.$langs,(function(e,s){return i("a-button",{key:s,staticClass:"tab-button",attrs:{size:"small",type:t.form.lang===e.code?"primary":"default"},on:{click:function(i){return t.onChangeLang(e.code)}}},[t._v(t._s(e.title))])})),1)],1),i("scrollbar",{attrs:{"max-height":458},on:{reachBottom:t.onReachBottom}},[i("div",{staticClass:"px-20 mt-10"},[i("p",{staticClass:"instruction"},[t._v("当前使用字体")]),i("div",{staticClass:"font-menu-item"},[t._v(" "+t._s(t.curDesign.example)+" ")]),i("p",{staticClass:"instruction"},[t._v("免费商用")])]),i("div",{staticClass:"pl-20 pr-10"},[t._l(t.cur_font_family_list,(function(e,s){return i("div",{key:s,staticClass:"font-menu-item",on:{click:function(i){return t.onChooseFont(e)}}},[i("div",{staticClass:"font-menu-item-name",style:{fontFamily:"f"+e.id}},[t._v(" "+t._s(e.font_name)+" "),i("span")]),i("div",{staticClass:"font-menu-item-btn"},[t.curDesign.style.fontFamily===t.getFontFamily(e.id)?i("i",{staticClass:"iconfont"},[t._v("  ")]):"loading"===t.font_loading_map[e.id]?i("i",{staticClass:"el-icon-loading"}):"loaded"===t.font_loading_map[e.id]?i("i"):i("span",{staticClass:"iconfont"},[t._v("  ")])])])})),t.curLangRes.list.length&&t.curLangRes.isEnd?i("div",{staticClass:"text-center mt-20 c-999 f-12"},[t._v(" 没有更多了 ")]):t._e(),!t.curLangRes.list.length&&t.curLangRes.isEnd?i("div",{staticClass:"text-center mt-20 c-999 f-12"},[t._v(" 无结果，换个关键词搜索吧 ")]):t._e()],2)])],1),1===t.fontTagsFlag?i("div",{staticClass:"brand-font"},[i("div",{staticClass:"brand-color-select"},[i("a-select",{staticClass:"brand-color-select-model",staticStyle:{width:"100%"},attrs:{"dropdown-class-name":"brand-color-select-model"},model:{value:t.selectBrandName,callback:function(e){t.selectBrandName=e},expression:"selectBrandName"}},[i("i",{attrs:{slot:"suffixIcon"},slot:"suffixIcon"},[i("svg",{attrs:{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("title",[t._v("-mockplus-")]),i("g",{attrs:{id:"企业版",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[i("g",{attrs:{id:"企业版-品牌vi管理-02详情-弹窗添加字体",transform:"translate(-423.000000, -298.000000)",fill:"#6A6E88"}},[i("g",{attrs:{id:"编组-6",transform:"translate(15.000000, 176.000000)"}},[i("g",{attrs:{id:"-mockplus-",transform:"translate(24.000000, 110.000000)"}},[i("g",{attrs:{id:"-mockplus-",transform:"translate(384.000000, 12.000000)"}},[i("g",{attrs:{id:"箭头备份",transform:"translate(2.000000, 5.000000)"}},[i("path",{attrs:{id:"路径-30",d:"M2.77323505,0 L9.22676495,0 C9.7790497,-1.94329436e-16 10.226765,0.44771525 10.226765,1 C10.226765,1.25019167 10.1329798,1.4912948 9.96391909,1.67572463 L6.73715414,5.19583185 C6.36396173,5.60295084 5.73139436,5.63045377 5.32427537,5.25726136 C5.30291867,5.23768439 5.28242283,5.21718855 5.26284586,5.19583185 L2.03608091,1.67572463 C1.6628885,1.26860564 1.69039143,0.636038267 2.09751042,0.26284586 C2.28194025,0.0937851863 2.52304338,-3.98129746e-16 2.77323505,0 Z"}})])])])])])])])]),t._l(t.brandFontList,(function(e,s){return i("a-select-option",{key:s,on:{click:function(i){return t.handleSelectBrandFont(e.id)}}},[t._v(" "+t._s(e.name)+" ")])}))],2)],1),i("div",t._l(t.brandFontItem,(function(e,s){return i("div",{key:s,staticClass:"font-menu-item",on:{click:function(i){return t._setBrandFontData(e)}}},[i("div",{staticClass:"font-menu-item-name",style:{fontFamily:"f"+e.id}},[t._v(" "+t._s(e.example)+" "),i("span")])])})),0)]):t._e()])},n=[],a=(i("ddb0"),i("5530")),r=i("5880"),o=i("27d6"),l=i.n(o),c=i("8ed8"),h={data(){return{form:{lang:"cn",keyword:""},$langs:[{title:"中文",code:"cn"},{title:"英文",code:"en"}],cn:{current:1,pageSize:20,isEnd:!1,list:[]},en:{current:1,pageSize:20,isEnd:!1,list:[]},loading:!1,font_loading_map:{},tags:["字体","品牌"],brandFontList:[],selectBrandName:"",brandFontItem:[]}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["element_craft_list"])),Object(r["mapGetters"])("editor-v2",["curDesign"])),Object(r["mapState"])("enterprise",["fontTagsFlag","isCompanyDomain"])),{},{avaliable_element_craft_list(){return[{id:0,name:"无"},...this.element_craft_list]},cur_font_family_list(){return this[this.form.lang].list},curLangRes(){return this[this.form.lang]}}),mounted(){this.ajaxFontList(),this.isCompanyDomain&&this.getBrandFontList()},methods:{onChangeLang(t){this.form.lang=t,this.ajaxFontList()},handleSearch(){this.ajaxFontList()},onReachBottom(){const t=this[this.form.lang];t.isEnd||this.ajaxFontList(!0)},getFontFamily(t){return"f"+t},injectThumbStyle(t){const e=t.map(t=>({fontFamily:"f"+t.id,src:t.mini_file_path}));Object(c["a"])(e,"ownThumbFontStyle")},ajaxFontList(t=!1){this.loading=!0;const{lang:e,keyword:i}=this.form,s=this[e];t||(s.current=1);const{current:n,pageSize:a}=s,r=Object.assign({lang:e,keyword:i},{current:n,pageSize:a});this.$http.get("/api/v2/materials/fonts/search",r).then(e=>{const i=e.data;s.list=t?s.list.concat(i):i,!i||i.length<a?s.isEnd=!0:s.isEnd=!1,this.injectThumbStyle(i),s.current=n+1,this.loading=!1}).catch(()=>{this.loading=!1})},onChooseFont(t){const e=t.id;if("loading"===this.font_loading_map[e]);else if("loaded"===this.font_loading_map[e])this._setFontData(t);else{const i="f"+e;Object(c["a"])([{fontFamily:i,src:t.file_path}]),l.a.load({custom:{families:[i]},loading:()=>{this.font_loading_map[e]="loading"},fontinactive:(i,s)=>{this.font_loading_map[e]="unloaded",this._setFontData(t)},active:async()=>{this.font_loading_map[e]="loaded",this._setFontData(t)}})}},_setFontData(t){const{type:e}=this.curDesign;"table"===e||(this.curDesign.style.fontFamily="f"+t.id,this.curDesign.id=t.id,this.curDesign.src=t.file_path,this.curDesign.example=t.example,this.curDesign.thumb=t.thumb_path)},getBrandFontList(){this.$http.get("/api/enterprise/enterprise/brand",{}).then(t=>{200===t.code?(this.brandFontList=t.data,this.brandFontList.length>0?(this.selectBrandName=this.brandFontList[0].name,this.handleSelectBrandFont(this.brandFontList[0].id)):this.selectBrandName=""):this.brandFontList=[]})},handleSelectBrandFont(t){this.$http.get("/api/enterprise/enterprise/brand/font",{brandId:t}).then(t=>{200===t.code?(this.brandFontItem=JSON.parse(JSON.stringify(t.data)),this.handleFontReload()):this.brandFontItem=[]})},changeTags(t){this.$store.commit("enterprise/set_fontTagsFlag",t),1===t&&this.isCompanyDomain&&this.getBrandFontList()},handleFontReload(){const t=[];this.brandFontItem.length>0&&(this.brandFontItem.forEach(e=>{t.push({fontFamily:"f"+e.id,src:e.miniFilePath?e.miniFilePath:e.filePath})}),Object(c["a"])(t))},_setBrandFontData(t){Object(c["a"])([{fontFamily:"f"+t.id,src:t.filePath}]);const{type:e}=this.curDesign;"table"===e||(this.curDesign.style.fontFamily="f"+t.id,this.curDesign.id=t.id,this.curDesign.src=t.filePath,this.curDesign.example=t.example,this.curDesign.thumb=t.thumb_path)}}},d=h,u=(i("aef7"),i("2877")),p=Object(u["a"])(d,s,n,!1,null,"4bba0bac",null);e["default"]=p.exports},"0193":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAAEEfUpiAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAABkElEQVRYCe1WS07DMBC1U47QDVyGPSxZcYVWtGIDOUJgg1oUbtFl2XMZ2HACpMbkRX3WND/baaOAlGxmYs88j994xlaqr2+2SAyxIyqUlQGNGelCy7d1XMzxv5DScL5Ivu/uny8bDThRWZMTkBUEOUldy3U56AyQhpBn8kfqs2XyOYmi29YgX18ePloNgHiEgVHnQCj4ni+ftsaYKwy0fbXbr3MAd3X81dk691DnBHCmsRNAvvEvUAzwbgAirKMBGo+KWORARSHkFfdDDg4mB/lpLOpyNFrr93T1eF0e9ybR56Ra8N5Pol0pV7y3QCekT9ZJEIDNfX6UcR4IWpEuDtCP6BQUAZ2kHAFaOr8kijrTuMsyhTSm63gaRCLbmMpbOpwJ/L+lfQjI+jjFlnwvMZsDNKxTLFxgaLX1xbIMuBzKDPnu0IVrGXAZ9jUffC2GBoLay3bZho9XUB5NohuWVO8B7BeasgWnq/hCbmLwFIwBjAwMzkDvZWj7wL4R4B7u1AdwV9j3aUCvZx+Qtf+n9F9zdI13TtsOLQAAAABJRU5ErkJggg=="},"0198":function(t,e,i){"use strict";var s=i("72e5"),n=i.n(s);n.a},"01b1":function(t,e,i){},"01b2":function(t,e,i){"use strict";var s=i("14ff"),n=i.n(s);n.a},"024c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAlklEQVQ4T6WTOw7CQAxE33RcILdICSVNSg6ckoYSSm7BBegGWUqi7MpCCG+59jx5/BHFp6KeDWD7BhyAi6RXBrY9ADPwlnSOnD3gDhyBJzD1kEV8BUbgIenUA4K+JjSQTtzEmh5kiYuVFNxUsHpOIBGKslNr6RQ6SABScVpBfJYAJQulJn4b1U9jtF1epNoq/3tU5Wv8AHo8bBEoDA0sAAAAAElFTkSuQmCC"},"0258":function(t,e,i){},"02aa":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("vue-context",{ref:"menu",staticClass:"no-select",attrs:{"sub-menu-offset":-4},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.data;return[n?[n&&n.design&&n.design.type?s("div",{staticClass:"px-20 py-10 c-999"},[t._v(" "+t._s("group"===n.design.type?"选中整个组":"选中单个元素")+" ")]):t._e(),t._l(t.menus,(function(e,i){return["general"!=e.menuType||e.subMenus?"general"==e.menuType&&e.subMenus?s("li",{key:i,staticClass:"v-context__sub"},[s("a",{class:{disabled:e.disabled}},[e.icon?s("img",{staticClass:"icon",attrs:{src:e.icon,alt:""}}):t._e(),s("span",[t._v(t._s(e.label))])]),s("ul",{staticClass:"v-context-sub"},t._l(e.subMenus,(function(e,i){return s("li",{key:i,on:{click:function(i){return t.handleClick(e)}}},[s("a",{class:{disabled:e.disabled}},[e.icon?s("img",{staticClass:"icon",attrs:{src:e.icon,alt:""}}):t._e(),s("span",[t._v(t._s(e.label))]),e.shortcut?s("span",{staticClass:"shortcut"},[t._v(t._s(e.shortcut))]):t._e()])])})),0)]):"divider"===e.menuType?s("div",{key:i,staticClass:"divider"}):"label"===e.menuType?s("span",{key:i,staticClass:"sub-text"},[t._v(t._s(e.label))]):t._e():s("li",{key:i,on:{click:function(i){return t.handleClick(e)}}},[s("a",{class:{disabled:e.disabled}},[e.icon?s("img",{staticClass:"icon",attrs:{src:e.icon,alt:""}}):t._e(),e.bigIcon?s("div",{staticClass:"icon",staticStyle:{"font-size":"16px"},style:{backgroundImage:"url("+e.bigIcon+")"}}):t._e(),e.bigIconText?s("div",[t._v("Aa")]):t._e(),s("span",{class:e.textClass||""},[t._v(t._s(e.label))]),e.shortcut?s("span",{staticClass:"shortcut"},[t._v(t._s(e.shortcut))]):t._e()])])]})),t.showExtraMenus&&t.sameLayerDesigns.length>0?s("div",{staticClass:"layers"},[s("div",{staticClass:"divider"}),s("span",{staticClass:"sub-text"},[t._v(" 选择重叠的图层： ")]),t._l(t.sameLayerDesigns,(function(e){return s("li",{key:e.uuid,on:{click:function(i){return t.handleClickPotentialDesign(e)}}},["img"===e.type?s("a",[s("div",[e.src.endsWith("svg")&&e.can_set_color?s("div",{staticClass:"icon",style:{backgroundImage:"url("+t.imageThumbs[e.uuid]+")"}}):s("div",{staticClass:"icon",style:{backgroundImage:"url("+e.src+")"}}),s("div",{staticClass:"detail"},[t._v("图片")])])]):t._e(),"font"===e.type?s("a",[s("div",{staticClass:"icon"},[t._v("Aa")]),s("div",{staticClass:"detail",domProps:{innerHTML:t._s(e.value)}})]):t._e(),"barcode"===e.type?s("a",[s("div",{staticClass:"icon"},[s("img",{attrs:{src:i("4b3a")}})]),s("div",{staticClass:"detail"},[t._v("条形码")])]):t._e(),"qrcode"===e.type?s("a",[s("div",{staticClass:"icon",staticStyle:{"font-size":"16px"}},[s("img",{attrs:{src:i("ebed")}})]),s("div",{staticClass:"detail"},[t._v("二维码")])]):t._e(),"table"===e.type?s("a",[s("div",{staticClass:"icon"},[s("img",{attrs:{src:i("f469")}})]),s("div",{staticClass:"detail"},[t._v("表格")])]):"group"===e.type?s("a",[s("div",{staticClass:"icon"},[s("a-icon",{attrs:{type:"folder"}})],1),s("div",{staticClass:"detail"},[t._v("组合")])]):t._e()])}))],2):t._e()]:t._e()]}}])})],1)},n=[],a=(i("ddb0"),i("5530")),r=i("899b"),o=i("87a0"),l=i("5880"),c=i("3063"),h=i("f168"),d={mixins:[h["a"]],data(){return{design:null,imageThumbs:{},hotKey:c["a"].isMacOs?"⌘":"Ctrl",menus:[],showExtraMenus:!1,sameLayerDesigns:[]}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(l["mapState"])("editor-v2",["is_outside","project_data"])),Object(l["mapState"])("editor",["potentialDesigns"])),Object(l["mapState"])("table",["rows","columns","editable","selected"])),{},{isInside(){return!this.is_outside},designs(){return this.isInside?this.project_data.inside_design_data:this.project_data.design_data},isTable(){var t;return"table"===(null===(t=this.design)||void 0===t?void 0:t.type)},disableColumns(){return!this.columns.find(t=>t.focus)},disableRows(){return!this.rows.find(t=>t.focus)},disableMerge(){return this.selected.length<=1||!!this.selected.find(([t,e])=>this.design.table.cells[t][e].merge)},disableSplit(){if(1!==this.selected.length)return!0;const[[t,e]]=this.selected;return!this.design.table.cells[t][e].merge},disable(){return t=>"delete"===t.action&&1===this["row"===t.type?"rows":"columns"].length||("merge"===t.type?this.disableMerge:"split"===t.type?this.disableSplit:("row"===t.type||"column"===t.type)&&("row"===t.type?this.disableRows:this.disableColumns))}}),components:{VueContext:r["a"]},methods:{open(t,e,i){this.sameLayerDesigns=i||[],this.show(t,e)},handleClickPotentialDesign(t){this.$store.commit("editor-v2/singleSelectDesign",t.uuid)},show(t,e){this.design=e,this.design?this.isTable&&this.editable?(this.showExtraMenus=!1,this.menus=[{menuType:"general",actionGroup:"table",label:(this.disableSplit?"合并":"拆分")+"单元格",type:this.disableSplit?"merge":"split",action:this.disableSplit?"merge":"split",disabled:this.disableSplit&&this.disableMerge,icon:i("7e01")},{menuType:"divider"},{menuType:"general",actionGroup:"table",label:"向上插入行",type:"row",action:"decrease",disabled:this.disableRows},{menuType:"general",actionGroup:"table",label:"向下插入行",type:"row",action:"increase",disabled:this.disableRows},{menuType:"general",actionGroup:"table",label:"向左插入列",type:"column",action:"decrease",disabled:this.disableColumns},{menuType:"general",actionGroup:"table",label:"向右插入列",type:"column",action:"increase",disabled:this.disableColumns},{menuType:"divider"},{menuType:"general",actionGroup:"table",label:"删除行",type:"row",action:"delete",disabled:this.disableRows},{menuType:"general",actionGroup:"table",label:"删除列",type:"column",action:"delete",disabled:this.disableColumns}]):(this.showExtraMenus=!0,this.menus=[{label:"复制",icon:i("2384"),shortcut:this.hotKey+" + C",action:o["a"].COPY,actionGroup:"shortcut",menuType:"general"},{label:"粘贴",icon:i("fb09"),shortcut:this.hotKey+" + V",action:o["a"].PASTE,actionParams:{followMouse:!0},actionGroup:"shortcut",menuType:"general"},{label:"剪切",icon:i("e345"),shortcut:this.hotKey+" + X ",action:o["a"].CUT,actionGroup:"shortcut",menuType:"general"},{label:this.design.locked?"解锁":"锁定",icon:this.design.locked?i("4028"):i("be18"),shortcut:this.hotKey+" + L",action:this.design.locked?o["a"].UNLOCK:o["a"].LOCK,actionGroup:"shortcut",menuType:"general"},{menuType:"divider"},{label:"图层顺序",icon:i("f3a4"),menuType:"general",subMenus:[{label:"移到顶层",actionGroup:"shortcut",action:o["a"].TOP,disabled:this.designs[this.designs.length-1].uuid===this.design.uuid},{label:"上移一层",actionGroup:"shortcut",action:o["a"].MOVE_UP},{label:"下移一层",actionGroup:"shortcut",action:o["a"].MOVE_DOWN},{label:"移到底层",actionGroup:"shortcut",action:o["a"].DOWN,disabled:this.designs[0].uuid===this.design.uuid}]}]):this.menus=[{label:"粘贴",icon:i("fb09"),shortcut:this.hotKey+" + V",actionParams:{followMouse:!0},action:o["a"].PASTE,actionGroup:"shortcut",menuType:"general"}],this.$refs.menu.open(t,{design:this.design,actions:o["a"]})},handleClick(t){if("shortcut"===t.actionGroup)this.$bus.$emit("shortcut",Object(a["a"])({action:t.action,designs:[this.design],name:"zzzz"},t.actionParams||{}));else if("table"===t.actionGroup){if(this.disable(t))return;const e=this["row"===t.type?"rows":"columns"].findIndex(t=>t.focus);this.$bus.$emit("table-event"+this.design.uuid,{index:e,target:t})}}}},u=d,p=(i("cde0"),i("2877")),f=Object(p["a"])(u,s,n,!1,null,"7556e81e",null);e["default"]=f.exports},"02c4":function(t,e,i){},"031a":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{class:["setting-panel-wrap",{hide:!t.showPanel}],on:{mousemove:function(e){t.showTip=!0},mouseout:function(e){t.showTip=!1}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showTip||!t.showPanel,expression:"showTip || !showPanel"}],staticClass:"btn-draw",on:{click:t.onSwitchShow}},[t.showPanel?s("img",{attrs:{src:i("4284")}}):s("img",{attrs:{src:i("a178")}})]),s("div",{staticClass:"tabs-wrap"},t._l(t.tabs,(function(e,i){return s("div",{key:i,class:["tab",{active:t.curComponentName===e.componentName}],on:{click:function(i){t.curComponentName=e.componentName}}},[t._v(" "+t._s(e.title)+" ")])})),0),s("perfect-scrollbar",{staticClass:"content-wrap"},[s(t.curComponentName,{directives:[{name:"show",rawName:"v-show",value:!t.show_project_edit_panel,expression:"!show_project_edit_panel"}],tag:"component"})],1),s("div",{staticClass:"setting-project-size-modify-panel",class:[{hide:!t.show_project_edit_panel}]},[s("setting-project-size-modify",{on:{close:t.onCloseProjectSizeModifyPanel}})],1)],1)},n=[],a=i("5530"),r=i("5880"),o=i("149a"),l=i("4c50"),c=i("c371"),h=i("47fc"),d=i("4db8"),u=i("2e69"),p=i("8a49"),f=i("cadb"),m=i("be3e"),g=i("fd75"),v={components:{settingImage:c["default"],settingFont:h["default"],settingGroup:d["default"],settingMultiSelection:u["default"],SettingFace:p["default"],SettingTable:f["default"],SettingQrcode:m["default"],SettingBarcode:g["default"],settingProjectBasicInfo:o["default"],settingProjectSizeModify:l["default"]},data(){return{showPanel:!0,showTip:!1,curComponentName:""}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["project_data","knife_data","cur_face_name","show_project_edit_panel"])),Object(r["mapGetters"])("editor-v2",["curDesigns","curSelectedSingleDesignType","isCup"])),{},{tabs(){let t="";t=this.cur_face_name?"face":"project";const e=this.getComponentByType(t);let i="";if(this.curDesigns.length>1?i="multiSelection":1===this.curDesigns.length&&(i=this.curDesigns[0].type),i){const t=this.getComponentByType(i);return[e,t]}return[e]}}),mounted(){this.curComponentName="settingProjectBasicInfo"},methods:{onSwitchShow(){this.showPanel=!this.showPanel,this.$store.commit("editor-v2/set_right_side_always_wide",this.showPanel)},onCloseProjectSizeModifyPanel(){this.$store.commit("editor-v2/set_show_project_edit_panel",!1),this.$store.commit("editor-v2/set_show_axis_remark",!1)},getComponentByType(t){const e={project:{title:"画布",componentName:"settingProjectBasicInfo"},face:{title:this.cur_face_name+"面",componentName:"settingFace"},img:{title:"图片",componentName:"settingImage"},font:{title:"字体",componentName:"settingFont"},group:{title:"组合",componentName:"settingGroup"},table:{title:"表格",componentName:"settingTable"},qrcode:{title:"二维码",componentName:"settingQrcode"},barcode:{title:"条形码",componentName:"settingBarcode"},multiSelection:{title:"多选",componentName:"settingMultiSelection"}};return e[t]||{}}},watch:{cur_face_name(t){this.curComponentName=t?this.getComponentByType("face").componentName:this.getComponentByType("project").componentName},curSelectedSingleDesignType(t){this.curComponentName=this.getComponentByType(t).componentName},"curDesigns.length"(t){if(t)if(1===t){const t=this.curDesigns[0].type;this.curComponentName=this.getComponentByType(t).componentName}else t>1&&(this.curComponentName=this.getComponentByType("multiSelection").componentName);else this.curComponentName=this.getComponentByType("project").componentName}}},b=v,y=(i("0198"),i("2877")),_=Object(y["a"])(b,s,n,!1,null,"4b13209d",null);e["default"]=_.exports},"033d":function(t,e,i){},"036c":function(t,e,i){"use strict";var s=i("e936"),n=i.n(s);n.a},"0391":function(t,e,i){},"04a8":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.show?s("div",{staticClass:"check-browser-is-chrome-modal-wrap"},[s("div",{staticClass:"content"},[s("img",{staticClass:"header",attrs:{src:i("adaed")}}),s("img",{staticClass:"pointer btn-close",attrs:{src:i("c844")},on:{click:t.onClose}}),s("div",{staticClass:"title"},[t._v("当前浏览器兼容性较差")]),s("div",{staticClass:"desc"},[t._v(" 当前浏览器可能导致某些功能无法使用，建议使用基于 Chromium 内核的浏览器 或 包小盒客户端。 ")]),t._m(0),s("div",{staticClass:"pointer bottom-tip",on:{click:t.onCloseForever}},[t._v("不再提醒")])])]):t._e()},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bottom-btn-wrap"},[i("a",{staticClass:"pointer bottom-btn btn-chrome",attrs:{target:"_blank",href:"https://support.baoxiaohe.com/archives/81/"}},[t._v(" 下载谷歌浏览器 ")]),i("a",{staticClass:"pointer bottom-btn btn-client",attrs:{target:"_blank",href:"https://support.baoxiaohe.com/client.html"}},[t._v(" 下载包小盒客户端 ")])])}],a=i("6116"),r={data(){return{show:!1}},mounted(){if(!a["t"].isChrome){const t=localStorage.getItem("dialog.checkchrome.expired_ts");t?parseInt(t)+864e5<Date.now()&&(this.show=!0):this.show=!0}},methods:{onCloseForever(){this._closeDialog(!0)},onClose(){this._closeDialog()},_closeDialog(t=!1){if(this.show=!1,t){const t=new Date;t.setFullYear(2121),localStorage.setItem("dialog.checkchrome.expired_ts",t.getTime())}else localStorage.setItem("dialog.checkchrome.expired_ts",Date.now())}}},o=r,l=(i("bd9e"),i("2877")),c=Object(l["a"])(o,s,n,!1,null,"0dc3ac37",null);e["default"]=c.exports},"04b4":function(t,e,i){"use strict";var s=i("858f"),n=i.n(s);n.a},"04d3":function(t,e,i){"use strict";i.r(e);var s=i("750b");i("8175");e["default"]=Object(s["b"])({setup(t,e){return()=>{var t,i;return Object(s["c"])("a-button",{attrs:{block:!0,size:"large"},class:"color-btn",on:{click:t=>{e.emit("click",t)}}},[null===(t=(i=e.slots).default)||void 0===t?void 0:t.call(i)])}}})},"04d9":function(t,e,i){"use strict";var s=i("337b"),n=i.n(s);n.a},"04df":function(t,e,i){"use strict";i("ddb0");var s=i("5530"),n=i("95c0"),a=(i("1276"),i("c64e")),r=i.n(a),o=i("ed08"),l=i("365c");function c(){let t=r()();return t}function h(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function d(t){t&&t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function u(t){let e=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],i="",s=t;i+=e[s%26],s=Math.floor(s/26);while(s>0)i+=e[s%26-1],s=Math.floor(s/26);return i.split("").reverse().join("")}const p=t=>Object.keys(t).reduce((e,i)=>(Object(o["p"])(t[i])||(e[i]=t[i]),e),{}),f=(...t)=>{var e,i,n;const a=t.reduce((t,e)=>Object(s["a"])(Object(s["a"])({},t),e),{}),r=null!==(e=a.borderWidth)&&void 0!==e?e:1;return p({text:a.value,fontSize:a.fontSize*l["DPI"],fontFamily:a.fontFamily,fontSrc:a.fontSrc,fontWeight:a.fontWeight,fontStyle:a.fontStyle,textFill:a.color,stroke:a.borderColor,fill:a.background||"rgba(255,255,255,0)",textAlign:a.textAlign||"center",textPosition:a.textAlign||"inside",textOffset:a.textOffset||[0,0],verticalAlign:a.verticalAlign||"middle",cellWidth:a.cellWidth+r,cellHeight:a.cellHeight+r,xPlace:a.xPlace,yPlace:a.yPlace,merge:a.merge||!1,mergeConfig:a.mergeConfig||{},row:null!==(i=a.row)&&void 0!==i?i:1,span:null!==(n=a.span)&&void 0!==n?n:1,lineWidth:r})},m={upArrow:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABuklEQVRoQ+3Xu4rVUBjF8d8gKgheGu18BJlyYHTES2Ohj2DlC2gxMI0whSDYaGdpJwha2CiC+AqCNgoWdt5A1EYYROSDE4jhmJOZb0eJ7ECak73Pt/5rrWzIkolfSxPXrwL86wRrAjWBpAO1QkkD09trAgssPIY13MWXtN1z/mDMBC7gPvbgNU7hfWmIsQDO4eFMfKP5DVbxqSTEGABn8LgjvtH8CidLQpQGCPGPsLfH5YA4js8lkigJcAJPF4hvNL+cvRNpiFIAIf4J9rVc3UTccf3EDWy0ngdEnFBfM0mUAJgn/grutI7OANiF6x2I5zidgcgCrOBZx/kQfwsH5wCE2UUhMgBRl7c43KpAIz5++hNAPLuJy619YcLZnVQpC/AOB2aD2+IXAXQhtnAI37cLkQGIWRdxCfdwuzO8L4FmabzY67iGq9sVH+uzAH0zhwDsRPNveypAj4U1gSH9qhWqFRrSk541tUK1QrVCSQdqhZIG1lPof67QfnybAf7A7mRb5m4fs0Ix8AOO4AWWpwhwFOfxAB+nCDCG5r/2RTa6+LG/iSvAEAfGPoWGaEitqQAp+wpsnnwCvwCy1lwxNkQzpAAAAABJRU5ErkJggg==",rightArrow:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABcklEQVRoQ+2YTUoEMRCFvwEFFyK4cCOiVxBlNiKuXagXEDycKw8hgojXkFEQ0bUHkBpaaHDMTJJHfqCyTirvq1ep7mRC52PSuX4coLaD7oA7kJkBL6HMBGYvdwciU7gHnAN3wHfk2oXTSzqwBnwB28ALcAJ85kKUBFgH3oGdQbQEoiSA6Z4CD8CmCqI0gByiBoAUohaADKImwH8QZ8NhX6lB1QZYBPE2tFjrWEtHCwBZEK0A/ELcA1tD2ldyoiUA030IPMZAhACOgKulRaifcAxcjMIGnQgBzIADvb6kiE+Adac/IwTwCuwnbadf9AycxgLsAjfAhl5PMKKV7qWihArrnm8nPcSlAaLFm8BW2miS+FYAksW3AGAXnPHX125p3fzMSW5ntc6ARHytEpKJrwEgFV8aYPwuZHt396wyfheSiC/tgO1nT4vXwC3wofjU1+pCCu3zGA4gS2ViIHcgMXGyZe6ALJWJgdyBxMTJlnXvwA8QdVAx3rcJfAAAAABJRU5ErkJggg==",downArrow:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACCklEQVRoQ+2ZsUoDQRCGZy4kryAiWFhEsrtFaosIWgm+gZ0ognZ2PoSNqJVWPoMWgoUiKQTBYhOSCCkDQiBEwUA4GDlI4AiXu927PSEwqQK52/2/mW82R4Kw4C9c8PzAAPM6qJSqENEbAPRHo1G12+0O8+h2bh2QUp4j4ukk9IHW+nbRAK4Q8TgITUQnjUbjmgEiKpCnQtwBE+W4A/OqJKVkhVghkwqwQlmqBJDfwxwPsWFn+HuAh9hQlXmXsUKsECuUsQKsUMYC8inECv2TQiilvEDEdd/3z1qt1nvSvmmeRoUQR57nXRKR9n2/1m63f5L2MZoBIcSO53kPkx+pvolos9lsfsQtbguglNonohtEnGba1VrfOwGoVCrLhULhFQDWTCFsAGbDE9HnYDCo9nq9XycAwSLlcnmlWCzWEXHVBMIUIKLyXQDY0Fp/JYUPPjdSaLqQDYQJQNbw1gDTTpRKpZcknZIAXIRPBRDcpJRaAoB6HEQcgBBiDxHvQgNrpU1YLSuFwjcmQcwDcBk+dQemIHEQUQCuw2cGiNMJEQ/Df3AQ0dCVNk4UStIJEYMvutrkyH0CgC0Xzs8eralnYHahWZ1izvDUAxu1pjOAKJ0iNnQa3skMWHTCefhcAEKdeAaA9QlgLuFzAwhBPAbvx+PxdqfT6Zs829he43QGbDd3cT0DuKhiljX+AOZNFk86C5VQAAAAAElFTkSuQmCC",leftArrow:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAB0UlEQVRoQ+3XP6hPcRzG8ddNkjJcGQw2M6PlRiQyK6PRYjTehZgYlMVotBikpJBMBgwG/xY7SUJEJvrWufXrdq57zvc51723vmf+Pp/P836e7+/0O3M2+TO3yf1rAOvdYGugNRAm0K5QGGAsbw3EEYYDWgNhgLE8bWAvDuEWfsVuKgYkAAfwEPO4g5MV+2NJLUAx/xg7OgfvsSd2UzGgBmC5+bL2NG5W7I8lYwH6zJ/DtdhJ5YAxABvOfGEeCrCABzN3vmgv4FJlcJPJhgAU84+wfWbrZSxO5iIYtBpAn/ly38u93xDPvwAu4vwyl+V1+e4/O/+Eq3jat3clgN34MOI3stZMb7BvDMAufMSWtXY2cP5r7B8DUM6exfWZFv7gJb4OXDrVsc+4gudjAcr547iHrZ34N47hyVTu0jmrvYX6IH7iKJ6ly6fQDwHog/jRNbHuEEMBVoI4jBdTJFk7YwzAEsRdbOsWfus+aF7VGkh1YwHKviO4PwPxBQfxNjVTo68B6IMoX2YnagykmlqAJYjb2IkbOJOaqdEnAGVf+Yd6qvsm/l5jINWkAOn+WN8A4gjDAa2BMMBY3hqIIwwHtAbCAGN5ayCOMBzQGggDjOV/AZVbOTEZHY7IAAAAAElFTkSuQmCC",filter:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAC9klEQVRYR+2WS2gTURSG/zOTpGlTaxJipaGtiQ8EBV9QdVGU0oWKIoqgCFYRFdoR1y5EFB8bkboQk/oG25UI4gMRbBfiA7X1sVBEBJOmtVLQTmqiqTH3Hplo1aapSWwxC3tXM8M5///NmXPPHUKeF+XZH+MA4xUYUgGvX78EYN3fNiYDDCYtqNmbvL6+OyCqTtGKC6aVIc3eOvg8FeA2gCUAdzPobM4gDClBLSHN/sbj09eAMM/QYLBbAe1I6hGvDtQ7r6UHOB2djET8EUCVgrkupDlbcoZISShv5EKTNXyfCPOYcSCoOfb9HjKsCStOhqepgjuIYBNQa0INJfdGA+Hx6VeIsBqMloDmqEvVSrsLvP7+hQxxG0yx2ukFrQvKLGtdNtUU+8r8Lpro1mN8+kh1wcFUsaPPeRbHRaNJxfxwTAavvYx16ANSY+abQZdjFdaTyArACPI09S8Hy+uuIkVtWDQBxZahrG8/ivddUbniWLWlw4g//CSxuayIztksimrcv+j9iuZnn4zLR2y1Lw1upYF0lfzjHKj09W1SiZrdJSoMCLMyVEIy8OGzGLBbVbNZRdLYWK8/JHD+cRRC8isU0uLgVkd4pM+YcRBN8fftUUCHZk4yYcv8YigZMkJhgZPtESQE9whRUNW1y9bzpx7KCGAke336GRC2VZVbsG520Yh63f0Cp9ojiAuOgE1VAa3kVaYGzgoA+1nxlIYvG928bIYVNVOtw3R7oxL+hx8xkEBcSK4N7XTezWSeHAvZBCVjLrLF+15vM6bbxjk2zC0z/0zti0mceBBB9AtLAtYGNMfVbHWzBwDgOssTir/o7UQ0M52BlLS9c6c9pwmaE4BhWnH8k9tkij8FUPo7BIOPBBucu7N988G4nAGSTenXf5wZv+wkKSs76yfeGAcYr8D/UYHKpsgslRP+739P39c/3QWDpp4T4Q0g2UhE7rwAGCCTL7CtMKrvJUVpC9Tbb/2THsjVZNTH8Vgapmr91SgeS6C8A3wDaS4vMOrG7VAAAAAASUVORK5CYII="};var g=m;class v extends n["Group"]{constructor(t){let e={cursor:"default",z:1},i=t.xPlace,s=t.yPlace,n={shape:{x:1,y:1,r:t.borderRadius,width:t.cellWidth,height:t.cellHeight},style:{truncate:{outerWidth:t.cellWidth},stroke:t.stroke||"transparent",fill:t.fill||"rgba(0,0,0,0)",fontSize:t.fontSize,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStyle:t.fontStyle,textFill:t.textFill,textAlign:t.textAlign,textPosition:t.textAlign,textOffset:[0,0]},z:1},a=Object.assign({},e,n);super({position:[i,s]}),this.data=Object.assign({},t,{xPlace:i,yPlace:s,name:u(t.x)+(t.y+1)}),this.handlers={},this.type="cell",this.img=null,this.ltIcon=null,this.rtIcon=null,this.lbIcon=null,this.rbIcon=null,this.cell=null,this.init(a),this.setText(t.text,!0),this.setTextAlign(t.textAlign,t.verticalAlign)}init(t){this.cell=new n["Rect"](t),this.cell.type="cellborder",this.add(this.cell),!this.data.merge||0!==this.data.row&&0!==this.data.span?this.show():this.hide()}addEvent(t,e){"undefined"===typeof this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e)}emit(t,e){if(e.target||(e.target=this),this.handlers[t]instanceof Array){const i=this.handlers[t];i.forEach(t=>{t(e)})}}removeEvent(t,e){if(this.handlers[t]instanceof Array){const n=this.handlers[t];for(var i=0,s=n.length;i<s;i++)if(n[i]===e)break;n.splice(i,1)}}selectCell(){let t="rgba(255, 97, 13,0.1)",e="#fff",i=n["color"].lerp(.8,[t,e],!0);this.cell.attr({style:{fill:i.color}})}unSelectCell(){this.cell.attr({style:{fill:this.data.fill}})}setText(t="",e){this.cell.attr({style:{text:t}}),this.data.text=t,e||this.emit("change",{data:this.data})}setFontFamily(t,e){this.cell.attr({style:{fontFamily:t}}),this.data.fontFamily=t,e||this.emit("change",{data:this.data})}setFontSize(t,e){this.cell.attr({style:{fontSize:t}}),this.data.fontSize=t,e||this.emit("change",{data:this.data})}setFontWeight(t,e){this.cell.attr({style:{fontWeight:t}}),this.data.fontWeight=t,e||this.emit("change",{data:this.data})}setFontItalic(t,e){this.cell.attr({style:{fontStyle:t}}),this.data.fontStyle=t,e||this.emit("change",{data:this.data})}setTextFill(t,e){this.cell.attr({style:{textFill:t}}),this.data.textFill=t,e||this.emit("change",{data:this.data})}setFill(t,e){this.cell.attr({style:{fill:t}}),this.data.fill=t,e||this.emit("change",{data:this.data})}setBorder(t,e,i){!0===e||"true"==e?(this.cell.attr({style:{stroke:t}}),this.cell.attr({z:1}),this.data.border=!0):(this.cell.attr({style:{stroke:"transparent"}}),this.cell.attr({z:1}),this.data.border=!1),i||this.emit("change",{data:this.data})}setTextAlign(t,e,i){const s=(this.data.cellHeight-this.data.fontSize)/2,n="top"===e?10-s:"bottom"===e?s:0;"left"==t?this.cell.attr({style:{textAlign:"left",textPosition:"left",textOffset:[10,n]}}):"right"==t?this.cell.attr({style:{textAlign:"right",textPosition:"right",textOffset:[-10,n]}}):"center"==t&&this.cell.attr({style:{textAlign:"center",textPosition:"inside",textOffset:[0,n]}}),this.data.textAlign=t,i||this.emit("change",{data:this.data})}setData(t){this.data=Object.assign({},this.data,t),!this.data.merge||0!==this.data.row&&0!==this.data.span?this.show():this.hide(),this.cell.attr({shape:{x:1,y:1,r:this.data.borderRadius,width:this.data.cellWidth,height:this.data.cellHeight},style:{truncate:{outerWidth:this.data.cellWidth},stroke:this.data.stroke||"transparent",fill:this.data.fill||"rgba(0,0,0,0)",fontSize:this.data.fontSize,fontFamily:this.data.fontFamily,fontWeight:this.data.fontWeight,fontStyle:this.data.fontStyle,textFill:this.data.textFill,textAlign:this.data.textAlign,textPosition:this.data.textAlign,textOffset:[0,0]}}),this.emit("change",{data:this.data}),this.setText(this.data.text,!0),this.setTextAlign(this.data.textAlign,this.data.verticalAlign)}setLTIcon(t,e){t?"none"==t?this.ltIcon&&(this.remove(this.ltIcon),this.ltIcon=null):(this.ltIcon&&this.remove(this.ltIcon),this.ltIcon=new n["Image"]({style:{image:g[t],x:0,y:0,width:15,height:15},z:3}),this.add(this.ltIcon)):this.ltIcon&&(this.remove(this.ltIcon),this.ltIcon=null),this.data.ltIcon=t,e||this.emit("change",{data:this.data})}setLBIcon(t,e){t?"none"==t?this.lbIcon&&(this.remove(this.lbIcon),this.lbIcon=null):(this.lbIcon&&this.remove(this.lbIcon),this.lbIcon=new n["Image"]({style:{image:g[t],x:0,y:this.data.cellHeight-15,width:15,height:15},z:3}),this.add(this.lbIcon)):this.lbIcon&&(this.remove(this.lbIcon),this.lbIcon=null),this.data.lbIcon=t,e||this.emit("change",{data:this.data})}setRTIcon(t,e){t?"none"==t?this.rtIcon&&(this.remove(this.rtIcon),this.rtIcon=null):(this.rtIcon&&this.remove(this.rtIcon),this.rtIcon=new n["Image"]({style:{image:g[t],x:this.data.cellWidth-15,y:0,width:15,height:15},z:3}),this.add(this.rtIcon)):this.rtIcon&&(this.remove(this.rtIcon),this.rtIcon=null),this.data.rtIcon=t,e||this.emit("change",{data:this.data})}setRBIcon(t,e){t?"none"==t?this.rbIcon&&(this.remove(this.rbIcon),this.rbIcon=null):(this.rbIcon&&this.remove(this.rbIcon),this.rbIcon=new n["Image"]({style:{image:g[t],x:this.data.cellWidth-15,y:this.data.cellHeight-15,width:15,height:15},z:3}),this.add(this.rbIcon)):this.rbIcon&&(this.remove(this.rbIcon),this.rbIcon=null),this.data.rbIcon=t,e||this.emit("change",{data:this.data})}addImage(t,e){this.data.imgUrl=t,this.img&&(this.remove(this.img),this.img=null),this.setText(""),this.img=new n["Image"]({style:{image:t,x:0,y:0,width:this.data.cellWidth,height:this.data.cellHeight},z:2}),this.add(this.img),e||this.emit("change",{data:this.data})}removeImage(t){this.img&&(this.remove(this.img),this.img=null,this.data.imgUrl=""),t||this.emit("change",{data:this.data})}clear(){let t={fontFamily:"微软雅黑",fontSize:14,fontStyle:"normal",fontWeight:"normal",textFill:"#000000",fill:"rgba(0,0,0,0)",border:!1,textAlign:"center",cellWidth:this.data.cellWidth,cellHeight:this.data.cellHeight,merge:this.data.merge,row:this.data.row,span:this.data.span,mergeConfig:this.data.mergeConfig,text:"",xPlace:this.data.xPlace,yPlace:this.data.yPlace,imgUrl:"",x:this.data.x,y:this.data.y};this.data=t,this.setData(t),this.emit("change",{data:this.data})}clearFormat(){let t={fontFamily:"微软雅黑",fontSize:14,fontStyle:"normal",fontWeight:"normal",textFill:"#000000",fill:"rgba(0,0,0,0)",border:!1,textAlign:"center"};this.setData(t),this.emit("change",{data:this.data})}}var b=v;class y extends n["Rect"]{constructor(t,e,i=[0,0,0,0],s=1){let n={cursor:"default",style:{fill:"none",stroke:"#FF610D",lineWidth:s+1,opacity:e},z:10},a={shape:{}};if(1==t.length)a.shape={x:t[0].data.xPlace,y:t[0].data.yPlace,width:t[0].data.cellWidth,height:t[0].data.cellHeight};else{let e=t[0].data.xPlace,i=t[0].data.yPlace,s=t[t.length-1].data.xPlace+t[t.length-1].data.cellWidth-e,n=t[t.length-1].data.yPlace+t[t.length-1].data.cellHeight-i;a.shape.x=e,a.shape.y=i,a.shape.width=s,a.shape.height=n}a.shape.r=i;let r=Object.assign({},n,a);super(r)}change(t,e,i=[0,0,0,0],s=1){let n={};if(1==t.length)n={x:t[0].data.xPlace,y:t[0].data.yPlace,width:t[0].data.cellWidth,height:t[0].data.cellHeight};else{let e=t[0].data.xPlace,i=t[0].data.yPlace,s=t[t.length-1].data.xPlace+t[t.length-1].data.cellWidth-e,a=t[t.length-1].data.yPlace+t[t.length-1].data.cellHeight-i;n.x=e,n.y=i,n.width=s,n.height=a}n.r=i,this.attr({shape:n,style:{opacity:e,lineWidth:s+1}})}}var _=y;class x extends n["Rect"]{constructor(t){let e={cursor:"default",style:{stroke:"#FF610D",lineWidth:"2",fill:"none",lineDash:[5]},z:3},i={shape:{}};if(1==t.length)i.shape={x:t[0].data.xPlace,y:t[0].data.yPlace,width:t[0].data.cellWidth,height:t[0].data.cellHeight};else{let e=t[0].data.xPlace,s=t[0].data.yPlace,n=t[t.length-1].data.xPlace+t[t.length-1].data.cellWidth-e,a=t[t.length-1].data.yPlace+t[t.length-1].data.cellHeight-s;i.shape.x=e,i.shape.y=s,i.shape.width=n,i.shape.height=a}let s=Object.assign({},e,i);super(s)}change(t){let e={};if(1==t.length)e={x:t[0].data.xPlace,y:t[0].data.yPlace,width:t[0].data.cellWidth,height:t[0].data.cellHeight};else{let i=t[0].data.xPlace,s=t[0].data.yPlace,n=t[t.length-1].data.xPlace+t[t.length-1].data.cellWidth-i,a=t[t.length-1].data.yPlace+t[t.length-1].data.cellHeight-s;e.x=i,e.y=s,e.width=n,e.height=a}this.attr("shape",e)}}var w=x,C=i("61ab"),k=i("3ef4"),S=i("1645"),A=i("27d6"),O=i.n(A);class j{constructor(){this.handlers={}}on(t,e){"undefined"===typeof this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e)}emit(t,e){if(e.target||(e.target=this),this.handlers[t]instanceof Array){const i=this.handlers[t];i.forEach(t=>{t(e)})}}off(t,e){if(this.handlers[t]instanceof Array){const n=this.handlers[t];for(var i=0,s=n.length;i<s;i++)if(n[i]===e)break;n.splice(i,1)}}}var M=j;class I extends M{constructor(t){super(),this.editEle=null,this.editFlag=!1,this.init(t)}init(t){this.editEle=document.createElement("div"),this.editEle.id="excel_edit_div",this.editEle.style.cssText=`\n      position:absolute;\n      z-index:100;\n      background:#fff;\n      outline-color:transparent;\n      text-indent:2px;\n      display:none;\n      border:none;\n      outline: none;\n      margin-left:1px;\n      margin-top:1px;\n      font-size: 14px;\n      line-height:${t.style.height}\n        `,this.editEle.setAttribute("contenteditable","true"),t.appendChild(this.editEle)}setPosition(t,e,i,s,n,a,r){this.editEle.style.minWidth=t-2+"px",this.editEle.style.height=e-2+"px",this.editEle.style.top=s+"px",this.editEle.style.left=i+"px",this.editEle.style.lineHeight=a+"px",this.editEle.style.fontSize=r+"px",this.editEle.textContent=n,this.showEdit(),this.editEle.focus()}hideEdit(){if(!this.editFlag)return!1;this.emit("update",{type:"text",text:this.editEle.textContent||" "}),this.editEle.style.display="none",this.editFlag=!1,this.clearInput()}showEdit(){this.editEle.style.display="block",this.editFlag=!0}clearInput(){this.editEle.innerHTML=" "}}var T=I,E=i("e3e2"),D=i("a7fd");class L extends M{constructor(t,e,i=!1,n=!1){super();const a=C["a"];this.currentObj=Object(s["a"])(Object(s["a"])({},a),t),this.canvas=null,this.table=null,this.cells=new Array,this.activeCell=null,this.selectCells=[],this.copyCells=[],this.selectedCell=null,this.copyedCell=null,this.tableHeader=null,this.tableHeaderCell=[],this.tableIndex=null,this.tableIndexCell=[],this.selectAllCell=null,this.edit=null,this.changeWidthLine=null,this.uploadFile=null,this.toolBar=null,this.outline=null,this.borderList={},this.editable=i,this.setDesignData(e),this.resetMergeCells(),this.textConfig={fontFamily:"微软雅黑",fontSize:14,fontStyle:"normal",fontWeight:"normal",textFill:"#000000",fill:"rgba(0,0,0,0)",border:!1,textAlign:"center"},this.layout=e.table,this.rect=[],this.isActive=!1,this.init(n)}loadFonts(){return new Promise(t=>{const e={};this._designData.table.cells.forEach(t=>{t.forEach(t=>{t&&t.fontFamily&&(e[t.fontFamily]=t)})}),S["a"].injectFontFamilies(Object.keys(e).map(t=>({fontFamily:t,src:e[t].fontSrc}))),O.a.load({custom:{families:Object.keys(e),timeout:1e4},active:()=>{t()},inactive:()=>{t()}})})}get row(){return this.layout.row}get column(){return this.layout.column}get _cellStyles(){return this._designData.table.cells}get _lineWidth(){return this._designData.table.borderWidth||1}get _outerBorder(){return this._designData.style.borderWidth*l["DPI"]||1}get _previewStyle(){return this._designData.table.previewStyle||{}}get xstart(){return 0}get xend(){return this._cellStyles.length-1}get ystart(){return 0}get yend(){return this._cellStyles[0].length-1}get getTopLeftBorderRadius(){return this.getPlaceBorderRadius((t,e)=>t===this.xstart&&e===this.ystart)}get getBottomLeftBorderRadius(){return this.getPlaceBorderRadius((t,e)=>t===this.xstart&&e===this.yend)}get getTopRightBorderRadius(){return this.getPlaceBorderRadius((t,e)=>t===this.xend&&e===this.ystart)}get getBottomRightBorderRadius(){return this.getPlaceBorderRadius((t,e)=>t===this.xend&&e===this.yend)}getPlaceBorderRadius(t){return(e,i)=>t(e,i)?this._borderRadius:0}get _defaultStyle(){const t=this._designData.table.defaultStyle;return t}get _borders(){return this._designData.table.borders||[]}set _borders(t){this._designData.table.borders=t}get _borderRadius(){return this._style.borderRadius||0}getXPlace(t,e){let i=this._lineWidth/2-1;return this._cellStyles.forEach((s,n)=>{var a;t>n&&(i+=s[e].merge&&(null===(a=s[e].mergeConfig)||void 0===a?void 0:a.oldWidth)?s[e].mergeConfig.oldWidth:s[e].cellWidth,i+=1)}),i}getYPlace(t,e){let i=this._lineWidth/2-1;return this._cellStyles.forEach((s,n)=>{n===t&&s.forEach((t,s)=>{var n;e>s&&(i+=t.merge&&(null===(n=t.mergeConfig)||void 0===n?void 0:n.oldHeight)?t.mergeConfig.oldHeight:t.cellHeight,i+=1)})}),i}drawBorderByPreviewStyle(t=!1){!t&&this._designData.table.lines&&Object.keys(this._designData.table.lines).length||(this.lineContainer.resetLines().drawLines(),"first"===this._previewStyle.row?this.lineContainer.setFirstHorizontalLine():"all"===this._previewStyle.row&&this.lineContainer.setHorizontalLines(),"first"===this._previewStyle.column?this.lineContainer.setFirstVerticalLine():"all"===this._previewStyle.column&&this.lineContainer.setVerticalLines(),this.lineContainer.setOutline().drawLines())}resetBorder(){return this._borders=[],Object.keys(this.borderList).forEach(t=>{this.canvas.remove(this.borderList[t])}),this.borderList={},this}getBorderRadius(t,e){return[this.getTopLeftBorderRadius,this.getTopRightBorderRadius,this.getBottomRightBorderRadius,this.getBottomLeftBorderRadius].map(i=>i(t,e))}getSelectedCellIndexes(){return[Math.min(...this.selectCells.map(t=>t.data.x)),Math.max(...this.selectCells.map(t=>t.data.x)),Math.min(...this.selectCells.map(t=>t.data.y)),Math.max(...this.selectCells.map(t=>t.data.y))]}getBorderRadiusByScope(t,e,i,s){return[this.getTopLeftBorderRadius(t,i),this.getTopRightBorderRadius(e,i),this.getBottomRightBorderRadius(e,s),this.getBottomLeftBorderRadius(t,s)]}getTargetStyle(t,e){return Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({},{x:t,y:e,row:1,span:1,merge:!1,text:"",id:`${t},${e}`}),this.textConfig),this.getCellStyle(t,e)),{},{xPlace:this.getXPlace(t,e),yPlace:this.getYPlace(t,e),borderRadius:this.getBorderRadius(t,e)})}testLine(){const t=50,e=new zrender.CompoundPath({style:{stroke:"teal",fill:"none",lineWidth:this._lineWidth},z:3,shape:{paths:[new zrender.Arc({shape:{cx:t+this._lineWidth/2,cy:t+this._lineWidth/2,r:t,startAngle:5*Math.PI/4,endAngle:3*Math.PI/2,clockwise:!0}}),new zrender.Line({shape:{x1:t+this._lineWidth/2,y1:this._lineWidth/2,x2:100,y2:this._lineWidth/2}})]}});this.canvas.add(e)}testLine2(){const t=50,e=new zrender.CompoundPath({style:{stroke:"teal",fill:"none",lineWidth:this._lineWidth},z:3,shape:{paths:[new zrender.Arc({shape:{cx:t+this._lineWidth/2,cy:t+this._lineWidth/2,r:t,startAngle:5*Math.PI/4,endAngle:Math.PI,clockwise:!1}}),new zrender.Line({shape:{x1:this._lineWidth/2,y1:t+this._lineWidth/2,x2:this._lineWidth/2,y2:100}})]}});this.canvas.add(e)}getCellStyle(t,e){return f(this._defaultStyle,this._cellStyles[t][e])}setDesignData(t){this._designData=t,this._style=Object(s["a"])(Object(s["a"])({},t.style),{},{top:t.style.top*l["DPI"],left:t.style.left*l["DPI"],width:t.style.width*l["DPI"],height:t.style.height*l["DPI"]})}async init(t){await this.loadFonts();const e=document.getElementById(this.currentObj.id);if(this.parent=e,!e)throw new Error("没有找到id为"+this.currentObj.id+"的元素!");const i=document.createElement("div");i.id=c(),i.style.width="100%",i.style.height=e.clientHeight+"px",e.appendChild(i),this.canvas=zrender.init(i,{renderer:"canvas",devicePixelRatio:4}),this.lineContainer=new k["a"](this.canvas,this._designData),this.initCellsStyle(),this.initCells(),this.initEdit(i),this.drawBorderByPreviewStyle(t),this.initEvents()}resetMergeCells(){const t=[];this._designData.table.cells.forEach(e=>{e.forEach(e=>{e.mergeConfig?t.push(e.mergeConfig):e.merge&&(e.merge=!1,delete e.row,delete e.span)})}),t.forEach(t=>{for(let s=t.xstart;s<=t.xend;s++)for(let n=t.ystart;n<=t.yend;n++){var e,i;const t=null===(e=this._designData.table.cells)||void 0===e||null===(i=e[s])||void 0===i?void 0:i[n];t&&!t.mergeConfig&&(t.merge=!0,t.row=0,t.span=0)}})}cancelSelectCell(){var t;null===(t=this.selectCells)||void 0===t||t.forEach(t=>{null===t||void 0===t||t.unSelectCell()})}initCellsStyle(){this._cellStyles.forEach(t=>{t.forEach(t=>{t.cellWidth||(t.cellWidth=(this._style.width-this._lineWidth)/this.column-1),t.cellHeight||(t.cellHeight=(this._style.height-this._lineWidth)/this.row-1)})})}setEditable(t){if(this.editable=t,t){if(this.activeCell){const{data:t}=this.activeCell;E["a"].commit("table/"+D["d"],[[t.x,t.y]])}}else this.edit.hideEdit(),this.cancelSelectCell(),this.selectedCell&&this.selectedCell.change(this.selectCells,0)}updateSelectState(){if(!this.editable)return;this.selectCells.forEach(t=>{t.selectCell()});const t=this.getBorderRadiusByScope(...this.getSelectedCellIndexes());this.selectedCell?this.selectedCell.change(this.selectCells,1,t,this._lineWidth):(this.selectedCell=new _(this.selectCells,1,t,this._lineWidth),this.canvas.add(this.selectedCell)),this.changeHeaderAndIndexState(this.selectCells)}initCells(){this.table=new zrender.Group,this.canvas.add(this.table);const t=[];for(let e=0;e<this.column;e++){this.cells[e]=new Array;for(let i=0;i<this.row;i++){t.push([e,i]);const s=this.getTargetStyle(e,i);this.cells[e][i]=new b(s),this.cells[e][i].addEvent("change",t=>{this.emit("changeCell",t)}),this.table.add(this.cells[e][i])}}E["a"].commit("table/"+D["d"],t),this.table.on("mousedown",t=>{const e=this.editable?1:0;if(0!=t.event.button)return!1;this.isActive=!0,this.emit("clickCell",{data:t.target.parent.data}),this.edit.hideEdit(),this.cancelSelectCell(),this.selectCells=[t.target.parent],this.activeCell=t.target.parent;const{x:i,y:s}=t.target.parent.data,n=this.getBorderRadius(i,s);this.selectedCell?this.selectedCell.change(this.selectCells,e,n,this._lineWidth):(this.selectedCell=new _(this.selectCells,e,n,this._lineWidth),this.canvas.add(this.selectedCell));let a=this.table.position[0],r=this.table.position[1];this.selectedCell.attr("position",[a,r]),this.changeHeaderAndIndexState(this.selectCells),this.table.on("mousemove",this.handleTableMouseMove,this)}),this.table.on("dblclick",t=>{this.isActive=!1;let e=t.target.parent.data.cellWidth,i=t.target.parent.data.cellHeight,s=this.table.position[0],n=this.table.position[1],a=t.target.parent.data.xPlace+s,r=t.target.parent.data.yPlace+n,o=t.target.parent.data.text;this.edit.setPosition(e,i,a,r,o,i,t.target.parent.data.fontSize)})}selectAll(){this.setSelect(0,0,this.column-1,this.row-1)}setSelectEditor(){const{data:t}=this.activeCell;this.edit.setPosition(t.cellWidth,t.cellHeight,t.xPlace,t.yPlace,t.text,t.height,t.fontSize)}setSelect(t,e,i,s){i||(i=t),s||(s=e),this.cancelSelectCell(),this.selectCells=this.countSelect(t,i,e,s),this.updateSelectState()}handleTableMouseMove(t){const e=t.target.parent.data.x,i=t.target.parent.data.y,s=this.activeCell.data.x,n=this.activeCell.data.y;if(s==e&&n==i)return!1;let a,r,o,l;e>s?(a=s,o=e):(a=e,o=s),i>n?(r=n,l=i):(r=i,l=n),this.cancelSelectCell(),this.selectCells=this.countSelect(a,o,r,l),this.updateSelectState()}countSelect(t,e,i,s){let n=t,a=e,r=i,o=s,l=this,c=[];function h(){for(let s=n;s<=a;s++)for(let c=r;c<=o;c++){var t,e,i;if(1==(null===(t=l.cells)||void 0===t||null===(e=t[s])||void 0===e||null===(i=e[c])||void 0===i?void 0:i.data.merge)&&l.cells[s][c].data.mergeConfig){let t=!1;l.cells&&l.cells[s]&&l.cells[s][c]&&(l.cells[s][c].data.mergeConfig.xstart<n&&(n=l.cells[s][c].data.mergeConfig.xstart,t=!0),l.cells[s][c].data.mergeConfig.xend>a&&(a=l.cells[s][c].data.mergeConfig.xend,t=!0),l.cells[s][c].data.mergeConfig.ystart<r&&(r=l.cells[s][c].data.mergeConfig.ystart,t=!0),l.cells[s][c].data.mergeConfig.yend>o&&(o=l.cells[s][c].data.mergeConfig.yend,t=!0),t&&h())}}}h();for(let p=n;p<=a;p++)for(let t=r;t<=o;t++){var d,u;(null===(d=this.cells)||void 0===d||null===(u=d[p])||void 0===u?void 0:u[t])&&c.push(this.cells[p][t])}return c}keydownMethod(t){if(!this.editable)return;d(t);const e=t.keyCode||t.which;if(!this.activeCell)return!1;let i=this.activeCell.data.x,s=this.activeCell.data.y;switch(e){case 38:if(!this.isActive)return!1;if(h(t),s>0){var n;if(s-=1,this.edit.hideEdit(),this.activeCell=null===(n=this.cells[i])||void 0===n?void 0:n[s],!this.activeCell)return;this.cancelSelectCell(),this.selectCells=[this.activeCell],this.selectedCell.change(this.selectCells,1,this.getBorderRadius(i,s),this._lineWidth),this.emit("moveCell",{data:this.cells[i][s].data}),this.changeHeaderAndIndexState(this.selectCells)}break;case 40:if(!this.isActive)return!1;if(h(t),s<this.currentObj.row-1){var a;if(s+=1,this.edit.hideEdit(),this.activeCell=null===(a=this.cells[i])||void 0===a?void 0:a[s],!this.activeCell)return;this.cancelSelectCell(),this.selectCells=[this.activeCell],this.selectedCell.change(this.selectCells,1,this.getBorderRadius(i,s),this._lineWidth),this.emit("moveCell",{data:this.cells[i][s].data}),this.changeHeaderAndIndexState(this.selectCells)}break;case 37:if(!this.isActive)return!1;if(h(t),i>0){var r;if(i-=1,this.edit.hideEdit(),this.activeCell=null===(r=this.cells[i])||void 0===r?void 0:r[s],!this.activeCell)return;this.cancelSelectCell(),this.selectCells=[this.activeCell],this.selectedCell.change(this.selectCells,1,this.getBorderRadius(i,s),this._lineWidth),this.emit("moveCell",{data:this.cells[i][s].data}),this.changeHeaderAndIndexState(this.selectCells)}break;case 39:if(!this.isActive)return!1;if(h(t),i<this.currentObj.span-1){var o;if(i+=1,this.edit.hideEdit(),this.activeCell=null===(o=this.cells[i])||void 0===o?void 0:o[s],!this.activeCell)return;this.cancelSelectCell(),this.selectCells=[this.activeCell],this.selectedCell.change(this.selectCells,1,this.getBorderRadius(i,s),this._lineWidth),this.emit("moveCell",{data:this.cells[i][s].data}),this.changeHeaderAndIndexState(this.selectCells)}break;case 13:this.edit.hideEdit(),this.cancelSelectCell(),this.selectCells=[this.activeCell],this.selectedCell&&(this.selectedCell.change(this.selectCells,0),this.emit("moveCell",{data:this.cells[i][s].data}));break;case 8:case 46:this.edit.editFlag||this.selectCells.forEach(t=>{this._designData.table.cells[t.data.x][t.data.y].value=" ",t.setText(" ")}),this.cancelSelectCell(),this.selectCells=[this.activeCell],this.selectedCell&&(this.selectedCell.change(this.selectCells,0),this.emit("moveCell",{data:this.cells[i][s].data}));break;case 67:(t.ctrlKey||t.metaKey)&&this.setCopyCell();break;case 86:(t.ctrlKey||t.metaKey)&&this.pasteCopyCell();break}}removeMethods(t){t.target!=this.edit.editEle&&this.edit.hideEdit(),this.handleTableMouseMove&&this.table.off("mousemove",this.handleTableMouseMove),this.handleHeaderMouseMove&&this.canvas&&this.canvas.off("mousemove",this.handleHeaderMouseMove),this.handleIndexMouseMove&&this.canvas&&this.canvas.off("mousemove",this.handleIndexMouseMove),this.isActive=!1;let e=t.composedPath();for(let i=0;i<e.length;i++)if(e[i].id==this.currentObj.id){this.isActive=!0;break}for(let i=0;i<e.length;i++)if("excel_edit_div"==e[i].id){this.isActive=!1;break}}initEvents(){this.removeMethods=this.removeMethods.bind(this),document.addEventListener("mouseup",this.removeMethods),this.keydownMethod=this.keydownMethod.bind(this),this.parent.addEventListener("keydown",this.keydownMethod)}setCopyCell(){this.copyedCell?this.copyedCell.change(this.selectCells):(this.copyedCell=new w(this.selectCells),this.canvas.add(this.copyedCell));let t=this.table.position[0],e=this.table.position[1];this.copyedCell.attr("position",[t,e]),this.copyCells=[];for(let i=0;i<this.selectCells.length;i++){let t=zrender.util.clone(this.selectCells[i].data);delete t.cellHeight,delete t.cellWidth,delete t.xPlace,delete t.yPlace,this.copyCells.push(t)}}pasteCopyCell(){var t;if(0==this.copyCells.length)return!1;let e=[],i=Math.max(...this.copyCells.map(t=>t.x)),s=Math.min(...this.copyCells.map(t=>t.x)),n=Math.min(...this.copyCells.map(t=>t.y)),a=Math.max(...this.copyCells.map(t=>t.y)),r=i-s+1,o=this.copyCells.length/r;if(1==this.copyCells.length&&this.copyCells[0].mergeConfig){i=this.copyCells[0].mergeConfig.xend,s=this.copyCells[0].mergeConfig.xstart,n=this.copyCells[0].mergeConfig.ystart,a=this.copyCells[0].mergeConfig.yend,r=i-s+1,o=a-n+1,this.copyCells=[];for(let t=s;t<=i;t++)for(let e=n;e<=a;e++){let i=zrender.util.clone(this.cells[t][e].data);delete i.cellHeight,delete i.cellWidth,delete i.xPlace,delete i.yPlace,this.copyCells.push(i)}}let l=[],c=Math.max(...this.selectCells.map(t=>t.data.x)),h=Math.min(...this.selectCells.map(t=>t.data.x)),d=Math.min(...this.selectCells.map(t=>t.data.y)),u=Math.max(...this.selectCells.map(t=>t.data.y)),p=c-h+1,f=this.selectCells.length/p;if(f/o<1||p/r<1)return alert("复制粘贴的位置不够，请重新选择"),!1;f%o!=0&&(u-=f%o,f-=f%o),p%r!=0&&(c-=p%r,p-=p%r),this.selectCells.forEach(t=>{null===t||void 0===t||t.unSelectCell()}),this.selectCells=[];for(let m=h;m<=c;m++)for(let t=d;t<=u;t++)this.selectCells.push(this.cells[m][t]);for(let m=0;m<o;m++){e.push([]);for(let t=0;t<r;t++)delete this.copyCells[t*o+m].x,delete this.copyCells[t*o+m].y,e[m].push(this.copyCells[t*o+m])}for(let m=0;m<f;m++){l.push([]);for(let t=0;t<p;t++)l[m].push(this.selectCells[t*f+m])}for(let m=0;m<l.length;m++)for(let t=0;t<l[m].length;t++)if(1==e[m%o][t%r].merge&&e[m%o][t%r].mergeConfig){let i=h-s,a=d-n,c=e[m%o][t%r].mergeConfig.xstart,u=e[m%o][t%r].mergeConfig.xend,p=e[m%o][t%r].mergeConfig.ystart,f=e[m%o][t%r].mergeConfig.yend;c+=r*Math.floor(t/r)+i,u+=r*Math.floor(t/r)+i,p+=o*Math.floor(m/o)+a,f+=o*Math.floor(m/o)+a;let g=0,v=0;for(let s=e[m%o][t%r].mergeConfig.xstart;s<=e[m%o][t%r].mergeConfig.xend;s++)g+=this.tableHeaderCell[s].data.width;for(let s=e[m%o][t%r].mergeConfig.ystart;s<=e[m%o][t%r].mergeConfig.yend;s++)v+=this.tableIndexCell[s].data.height;l[m][t].setData(e[m%o][t%r]),l[m][t].setData({cellWidth:g,cellHeight:v,mergeConfig:{xstart:c,xend:u,ystart:p,yend:f}})}else l[m][t].setData(e[m%o][t%r]);this.selectCells.forEach(t=>{t.selectCell()}),null===(t=this.activeCell)||void 0===t||t.unSelectCell(),this.copyCells=[],this.canvas.remove(this.copyedCell),this.copyedCell=null}changeSize(){this.canvas.remove(this.changeWidthLine),this.changeWidthLine=null,this.refreshCell()}setColumns(t){E["a"].commit("table/"+D["a"],t)}setRows(t){E["a"].commit("table/"+D["c"],t)}handleHeaderMouseMove(t){if(t.target){let e,i,s,n;switch(t.target.type){case"headerBorder":if(e=t.target.parent.data.index,i=this.activeCell.data.x,e!=i){this.cancelSelectCell(),this.selectCells=[],e>i?(s=i,n=e):(s=e,n=i);for(let t=s;t<=n;t++)this.selectCells.push(...this.cells[t]);this.updateSelectState()}break;case"cellborder":if(e=t.target.parent.data.x,i=this.activeCell.data.x,e!=i){this.cancelSelectCell(),this.selectCells=[],e>i?(s=i,n=e):(s=e,n=i);for(let t=s;t<=n;t++)this.selectCells.push(...this.cells[t]);this.updateSelectState()}break}}}dragLineY(t,e){const i=E["a"].state.table.columns.reduce((t,i,s)=>(e>s&&(t+=i.width),t),0),s=Math.max(t.clientX,i);this.changeWidthLine?this.changeWidthLine.attr({shape:{x1:s,y1:0,x2:s,y2:this.canvas.getHeight()}}):(this.changeWidthLine=new zrender.Line({z:1001,shape:{x1:s,y1:0,x2:s,y2:this.canvas.getHeight()},style:{stroke:"#FF610D",fill:"none",lineWidth:""+1/E["a"].state.scale}}),this.canvas.add(this.changeWidthLine))}dragLineX(t,e){const i=E["a"].state.table.rows.reduce((t,i,s)=>(e>s&&(t+=i.height),t),0),s=Math.max(i,t.clientY);this.changeWidthLine?this.changeWidthLine.attr({shape:{x1:0,y1:s,x2:this.canvas.getWidth(),y2:s}}):(this.changeWidthLine=new zrender.Line({z:1001,shape:{x1:0,y1:s,x2:this.canvas.getWidth(),y2:s},style:{stroke:"#FF610D",fill:"none",lineWidth:""+1/E["a"].state.scale}}),this.canvas.add(this.changeWidthLine))}handleIndexMouseMove(t){if(t.target){let e,i,s,n;switch(t.target.type){case"indexBorder":if(e=t.target.parent.data.index,i=this.activeCell.data.y,e!=i){this.cancelSelectCell(),this.selectCells=[],e>i?(s=i,n=e):(s=e,n=i);for(let t=0;t<this.cells.length;t++)for(let e=s;e<=n;e++)this.selectCells.push(this.cells[t][e]);this.updateSelectState()}break;case"cellborder":if(e=t.target.parent.data.y,i=this.activeCell.data.y,e!=i){this.cancelSelectCell(),this.selectCells=[],e>i?(s=i,n=e):(s=e,n=i);for(let t=0;t<this.cells.length;t++)for(let e=s;e<=n;e++)this.selectCells.push(this.cells[t][e]);this.updateSelectState()}break}}}resetRows(){const t=E["a"].state.table.rows.map(t=>Object(s["a"])(Object(s["a"])({},t),{},{focus:!1,active:!1})),e=E["a"].state.table.columns.map(t=>Object(s["a"])(Object(s["a"])({},t),{},{focus:!1,active:!1}));return[t,e]}resetTable(){var t;const[e,i]=this.resetRows();this.cancelSelectCell(),this.selectCells=[],null===(t=this.activeCell)||void 0===t||t.unSelectCell(),this.updateSelectState(),this.setRows(e),this.setColumns(i)}changeColumnCells(t){var e;const[i,s]=this.resetRows();s[t].focus=!0,this.cancelSelectCell(),this.selectCells=[],this.cells.forEach((e,i)=>{i===t&&e.forEach(t=>{this.selectCells.push(t)})}),null===(e=this.activeCell)||void 0===e||e.unSelectCell(),this.updateSelectState(),this.setRows(i),this.setColumns(s)}changeRowCells(t){var e;const[i,s]=this.resetRows();i[t].focus=!0,this.cancelSelectCell(),this.selectCells=[],this.cells.forEach(e=>{e.forEach((e,i)=>{i===t&&this.selectCells.push(e)})}),null===(e=this.activeCell)||void 0===e||e.unSelectCell(),this.updateSelectState(),this.setRows(i),this.setColumns(s)}changeHeaderAndIndexState(t){if(!this.editable)return;E["a"].commit("table/"+D["d"],t.map(t=>[t.data.x,t.data.y]));const[e,i]=this.resetRows();if(1==t.length)e[t[0].data.y]&&(e[t[0].data.y].active=!0),i[t[0].data.x]&&(i[t[0].data.x].active=!0);else{let s=t[0].data.x,n=t[0].data.y,a=t[t.length-1].data.x,r=t[t.length-1].data.y;for(let t=s;t<=a;t++)i[t]&&(i[t].active=!0);for(let t=n;t<=r;t++)e[t]&&(e[t].active=!0)}this.setColumns(i),this.setRows(e)}initEdit(t){this.edit=new T(t),this.edit.editEle.addEventListener("click",t=>{d(t)}),this.edit.on("update",t=>{if("text"===t.type){this.activeCell.setText(t.text);const{x:e,y:i}=this.activeCell.data;this._designData.table.cells[e][i].value=t.text}})}refreshCell(t){var e;(t&&this.setDesignData(t),this.refreshTableCell(),this.editable&&this.selectCells.length>0&&this.selectedCell)&&(this.selectedCell.change(this.selectCells,1,this.getBorderRadius(this.getBorderRadiusByScope(...this.getSelectedCellIndexes())),this._lineWidth),this.selectCells.forEach(t=>{t.selectCell()}),null===(e=this.activeCell)||void 0===e||e.unSelectCell())}refreshTableCell(){for(let i=0;i<this.column;i++)for(let s=0;s<this.row;s++){var t,e;null===(t=this.cells[i])||void 0===t||null===(e=t[s])||void 0===e||e.setData(this.getTargetStyle(i,s))}}refreshMergeCells(){this._designData.table.cells.forEach((t,e)=>{t.forEach((t,i)=>{if(t.merge&&t.mergeConfig){let s=0,n=0;const a=e+t.span-1,r=i+t.row-1;for(let t=e;t<=a;t++)s+=E["a"].state.table.columns[t].width;for(let t=i;t<=r;t++)n+=E["a"].state.table.rows[t].height;t.cellWidth=s,t.cellHeight=n}})}),this.refreshCell()}mergeCells(){if(this.selectCells.find(t=>t.data.merge))return!1;const t=this.selectCells.length-1;let e=this.selectCells[0],i=this.selectCells[t];e.data.x>=i.data.x&&e.data.y>=i.data.y&&([e,i]=[i,e]);let s=e.data.x,n=e.data.y,a=e.data.xPlace,r=e.data.yPlace,o=i.data.x,l=i.data.y,c=l-n+1,h=o-s+1,d=this._designData.table.cells.reduce((t,e,i)=>{var n;return i>=s&&i<=o?t+((null===(n=e[0].mergeConfig)||void 0===n?void 0:n.oldWidth)||e[0].cellWidth):t},0);d+=o-s;let u=this._designData.table.cells[0].reduce((t,e,i)=>{var s;return i>=n&&i<=l?t+((null===(s=e.mergeConfig)||void 0===s?void 0:s.oldHeight)||e.cellHeight):t},0);u+=l-n;const{cellWidth:p,cellHeight:f}=e.data;e.setData({row:c,span:h,merge:!0,cellWidth:d,cellHeight:u,xPlace:a,yPlace:r,mergeConfig:{xstart:s,ystart:n,xend:o,yend:l,oldWidth:p-1,oldHeight:f-1}});const{x:m,y:g}=e.data,v=this._designData.table.cells,b=v[m][g];b.merge=!0,b.row=c,b.span=h,b.cellWidth=d,b.cellHeight=u,b.xPlace=a,b.yPlace=r,b.mergeConfig={xstart:s,ystart:n,xend:o,yend:l,oldWidth:p-1,oldHeight:f-1},this.selectCells.forEach(t=>{if(t!=e){t.setData({row:0,span:0,merge:!0});const{x:e,y:i}=t.data,s=v[e][i];s.row=0,s.span=0,s.merge=!0,s.value=" "}}),this.selectCells=[e],this.lineContainer.drawLines()}splitCell(){let t=this.selectCells[0].data.x,e=this.selectCells[0].data.y,i=this.selectCells[this.selectCells.length-1].data.x,s=this.selectCells[this.selectCells.length-1].data.y;for(let n=t;n<=i;n++)for(let t=e;t<=s;t++)if(this.cells[n][t].data.merge&&this.cells[n][t].data.row+this.cells[n][t].data.span>2){let e=this.cells[n][t].data.mergeConfig.xstart,i=this.cells[n][t].data.mergeConfig.ystart,s=this.cells[n][t].data.mergeConfig.xend,a=this.cells[n][t].data.mergeConfig.yend;const r=this._designData.table.cells;let o=!1;for(let t=e;t<=s;t++)for(let e=i;e<=a;e++){const i={cellWidth:E["a"].state.table.columns[t].width,cellHeight:E["a"].state.table.rows[e].height,merge:!1,row:1,span:1,mergeConfig:null};o?i.text=" ":o=!0,this.cells[t][e].setData(i),r[t][e].cellWidth=E["a"].state.table.columns[t].width,r[t][e].cellHeight=E["a"].state.table.rows[e].height,r[t][e].merge=!1,r[t][e].row=1,r[t][e].span=1,this.selectCells.push(this.cells[t][e])}}this.selectedCell.change(this.selectCells,1,this.getBorderRadiusByScope(...this.getSelectedCellIndexes()),this._lineWidth)}dispose(){if(!this.canvas)return;this.canvas.dispose(),this.canvas=null;const t=document.getElementById(this.currentObj.id);t&&(t.innerHTML=""),this.parent.removeEventListener("keydown",this.keydownMethod),document.removeEventListener("mouseup",this.removeMethods),this.currentObj=null,this.table=null,this.cells=null,this.activeCell=null,this.selectCells=null,this.copyCells=null,this.selectedCell=null,this.copyedCell=null,this.tableHeader=null,this.tableHeaderCell=null,this.tableIndex=null,this.tableIndexCell=null,this.selectAllCell=null,this.edit=null,this.changeWidthLine=null,this.uploadFile=null,this.toolBar=null,this.textConfig=null}}e["a"]=L},"04f6":function(t,e){var i=32,s=7;function n(t){var e=0;while(t>=i)e|=1&t,t>>=1;return t+e}function a(t,e,i,s){var n=e+1;if(n===i)return 1;if(s(t[n++],t[e])<0){while(n<i&&s(t[n],t[n-1])<0)n++;r(t,e,n)}else while(n<i&&s(t[n],t[n-1])>=0)n++;return n-e}function r(t,e,i){i--;while(e<i){var s=t[e];t[e++]=t[i],t[i--]=s}}function o(t,e,i,s,n){for(s===e&&s++;s<i;s++){var a,r=t[s],o=e,l=s;while(o<l)a=o+l>>>1,n(r,t[a])<0?l=a:o=a+1;var c=s-o;switch(c){case 3:t[o+3]=t[o+2];case 2:t[o+2]=t[o+1];case 1:t[o+1]=t[o];break;default:while(c>0)t[o+c]=t[o+c-1],c--}t[o]=r}}function l(t,e,i,s,n,a){var r=0,o=0,l=1;if(a(t,e[i+n])>0){o=s-n;while(l<o&&a(t,e[i+n+l])>0)r=l,l=1+(l<<1),l<=0&&(l=o);l>o&&(l=o),r+=n,l+=n}else{o=n+1;while(l<o&&a(t,e[i+n-l])<=0)r=l,l=1+(l<<1),l<=0&&(l=o);l>o&&(l=o);var c=r;r=n-l,l=n-c}r++;while(r<l){var h=r+(l-r>>>1);a(t,e[i+h])>0?r=h+1:l=h}return l}function c(t,e,i,s,n,a){var r=0,o=0,l=1;if(a(t,e[i+n])<0){o=n+1;while(l<o&&a(t,e[i+n-l])<0)r=l,l=1+(l<<1),l<=0&&(l=o);l>o&&(l=o);var c=r;r=n-l,l=n-c}else{o=s-n;while(l<o&&a(t,e[i+n+l])>=0)r=l,l=1+(l<<1),l<=0&&(l=o);l>o&&(l=o),r+=n,l+=n}r++;while(r<l){var h=r+(l-r>>>1);a(t,e[i+h])<0?l=h:r=h+1}return l}function h(t,e){var i,n,a=s,r=0,o=0;r=t.length;var h=[];function d(t,e){i[o]=t,n[o]=e,o+=1}function u(){while(o>1){var t=o-2;if(t>=1&&n[t-1]<=n[t]+n[t+1]||t>=2&&n[t-2]<=n[t]+n[t-1])n[t-1]<n[t+1]&&t--;else if(n[t]>n[t+1])break;f(t)}}function p(){while(o>1){var t=o-2;t>0&&n[t-1]<n[t+1]&&t--,f(t)}}function f(s){var a=i[s],r=n[s],h=i[s+1],d=n[s+1];n[s]=r+d,s===o-3&&(i[s+1]=i[s+2],n[s+1]=n[s+2]),o--;var u=c(t[h],t,a,r,0,e);a+=u,r-=u,0!==r&&(d=l(t[a+r-1],t,h,d,d-1,e),0!==d&&(r<=d?m(a,r,h,d):g(a,r,h,d)))}function m(i,n,r,o){var d=0;for(d=0;d<n;d++)h[d]=t[i+d];var u=0,p=r,f=i;if(t[f++]=t[p++],0!==--o)if(1!==n){var m,g,v,b=a;while(1){m=0,g=0,v=!1;do{if(e(t[p],h[u])<0){if(t[f++]=t[p++],g++,m=0,0===--o){v=!0;break}}else if(t[f++]=h[u++],m++,g=0,1===--n){v=!0;break}}while((m|g)<b);if(v)break;do{if(m=c(t[p],h,u,n,0,e),0!==m){for(d=0;d<m;d++)t[f+d]=h[u+d];if(f+=m,u+=m,n-=m,n<=1){v=!0;break}}if(t[f++]=t[p++],0===--o){v=!0;break}if(g=l(h[u],t,p,o,0,e),0!==g){for(d=0;d<g;d++)t[f+d]=t[p+d];if(f+=g,p+=g,o-=g,0===o){v=!0;break}}if(t[f++]=h[u++],1===--n){v=!0;break}b--}while(m>=s||g>=s);if(v)break;b<0&&(b=0),b+=2}if(a=b,a<1&&(a=1),1===n){for(d=0;d<o;d++)t[f+d]=t[p+d];t[f+o]=h[u]}else{if(0===n)throw new Error;for(d=0;d<n;d++)t[f+d]=h[u+d]}}else{for(d=0;d<o;d++)t[f+d]=t[p+d];t[f+o]=h[u]}else for(d=0;d<n;d++)t[f+d]=h[u+d]}function g(i,n,r,o){var d=0;for(d=0;d<o;d++)h[d]=t[r+d];var u=i+n-1,p=o-1,f=r+o-1,m=0,g=0;if(t[f--]=t[u--],0!==--n)if(1!==o){var v=a;while(1){var b=0,y=0,_=!1;do{if(e(h[p],t[u])<0){if(t[f--]=t[u--],b++,y=0,0===--n){_=!0;break}}else if(t[f--]=h[p--],y++,b=0,1===--o){_=!0;break}}while((b|y)<v);if(_)break;do{if(b=n-c(h[p],t,i,n,n-1,e),0!==b){for(f-=b,u-=b,n-=b,g=f+1,m=u+1,d=b-1;d>=0;d--)t[g+d]=t[m+d];if(0===n){_=!0;break}}if(t[f--]=h[p--],1===--o){_=!0;break}if(y=o-l(t[u],h,0,o,o-1,e),0!==y){for(f-=y,p-=y,o-=y,g=f+1,m=p+1,d=0;d<y;d++)t[g+d]=h[m+d];if(o<=1){_=!0;break}}if(t[f--]=t[u--],0===--n){_=!0;break}v--}while(b>=s||y>=s);if(_)break;v<0&&(v=0),v+=2}if(a=v,a<1&&(a=1),1===o){for(f-=n,u-=n,g=f+1,m=u+1,d=n-1;d>=0;d--)t[g+d]=t[m+d];t[f]=h[p]}else{if(0===o)throw new Error;for(m=f-(o-1),d=0;d<o;d++)t[m+d]=h[d]}}else{for(f-=n,u-=n,g=f+1,m=u+1,d=n-1;d>=0;d--)t[g+d]=t[m+d];t[f]=h[p]}else for(m=f-(o-1),d=0;d<o;d++)t[m+d]=h[d]}i=[],n=[],this.mergeRuns=u,this.forceMergeRuns=p,this.pushRun=d}function d(t,e,s,r){s||(s=0),r||(r=t.length);var l=r-s;if(!(l<2)){var c=0;if(l<i)return c=a(t,s,r,e),void o(t,s,r,s+c,e);var d=new h(t,e),u=n(l);do{if(c=a(t,s,r,e),c<u){var p=l;p>u&&(p=u),o(t,s,s+p,s+c,e),c=p}d.pushRun(s,c),d.mergeRuns(),l-=c,s+=c}while(0!==l);d.forceMergeRuns()}}t.exports=d},"0530":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"materialRef",staticClass:"element-barcode-wrap",style:{width:t.data.style.width+"mm",height:t.data.style.height+"mm",opacity:(t.data.style.opacity||100)/100},attrs:{center:""},on:{dblclick:function(e){return t.$bus.$emit("setting-barcode/showEdit")},mousedown:function(e){return t.$emit("mousedown",e)}}})},n=[],a=i("62c5"),r=i.n(a),o=i("6796"),l=i("1645"),c={mixins:[o["a"]],props:{data:{type:Object,default:Object}},mounted(){const t={fontFamily:this.data.style.fontFamily,src:this.data.src};l["a"].injectFontFamilies([t],"ownFontStyle"),this.drawCode(),this.$emit("loaded")},methods:{refresh(){this.drawCode()},drawCode(){const t=this.data.fills||[],e=t.filter(t=>"background"===t.class)[0]||{},i=t.filter(t=>"foreground"===t.class)[0]||{},s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.classList.add("barcodeNode_"+this.data.uuid),r()(s,this.data.value,{format:this.data.codeMode,margin:5,font:this.data.style.fontFamily,background:e.color||"#ffffff",lineColor:i.color||"#000000"}),s.setAttribute("preserveAspectRatio","none"),s.style.width="100%",s.style.height="100%",this.$emit("loaded");while(this.$refs.materialRef.firstChild)this.$refs.materialRef.firstChild.remove();this.$refs.materialRef.appendChild(s)}},watch:{"data.fills":{handler(){this.refresh()},deep:!0},"data.style":{handler(){this.refresh()},deep:!0},"data.codeMode"(){this.refresh()},"data.value"(){this.refresh()}}},h=c,d=(i("f03f"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,"00548d48",null);e["default"]=u.exports},"0533":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"risk-panel"},[s("div",{staticClass:"h3"},[t._v(" 印刷风险检测 "),s("a-tooltip",[s("a",{staticClass:"clickable-theme",staticStyle:{display:"'inline-block'"},attrs:{target:"_blank",href:"https://help.baoxiaohe.com/support/archives/401/"}},[s("img",{staticClass:"flex-none",staticStyle:{width:"16px",height:"16px"},attrs:{src:i("4724")}})]),s("template",{slot:"title"},[t._v("查看印刷要求")])],2),s("img",{staticStyle:{float:"right",cursor:"pointer"},attrs:{src:i("7a35")},on:{click:function(e){return t.$emit("close")}}})],1),s("div",{staticClass:"risk-body"},[null===t.status?s("div",[t._m(0),s("a-button",{attrs:{type:"primary",block:""},on:{click:function(e){return t.beginRiskCheck(!1)}}},[t._v(" 开始检测 ")])],1):"checking"===t.status?s("div",{staticClass:"flex flex-center item-center",staticStyle:{"flex-direction":"column",margin:"40px"}},[s("a-progress",{attrs:{type:"circle",percent:t.riskProgress,width:80,"stroke-color":"#ff6634"},scopedSlots:t._u([{key:"format",fn:function(e){return[s("span",{staticStyle:{color:"#ff6634"}},[t._v(t._s(e)+"%")])]}}])}),s("div",{staticClass:"small-font",staticStyle:{"margin-top":"20px"}},[t._v("智能印刷引擎正在为您检测中...")])],1):"checkFinished"===t.status?s("div",[s("div",[0===t.riskData.images.length&&0===t.riskData.fonts.length?s("div",{staticClass:"flex flex-center item-center",staticStyle:{"flex-direction":"column"}},[s("img",{staticStyle:{width:"60px",height:"60px","margin-top":"30px"},attrs:{src:i("5163"),alt:""}}),s("span",{staticClass:"small-font",staticStyle:{"margin-top":"20px","padding-bottom":"16px"}},[t._v("检测完成, 建议您再仔细核查哦")]),s("div",{staticClass:"flex flex-center item-center"},[s("a-button",{staticClass:"mx-8",on:{click:function(e){return t.beginRiskCheck(!1)}}},[t._v("重新检测")]),0===t.$root.projectData.cate.complex_type?s("a-button",{staticClass:"mx-8",attrs:{type:"primary"},on:{click:t.showProductOrder}},[t._v(" 印刷下单 ")]):t._e()],1)]):s("div",[s("div",{staticStyle:{"padding-bottom":"64px"}},[s("div",{staticStyle:{"max-height":"500px","overflow-y":"auto"}},[t.riskData.images.length>0?s("div",[s("span",{staticClass:"middle-font"},[s("span",{staticClass:"danger-font"},[t._v(" "+t._s(t.riskData.images.length)+" ")]),t._v(" 张图片分辨率低于300dpi "),s("a-tooltip",[s("img",{staticStyle:{width:"16px",height:"16px"},attrs:{src:i("5176")}}),s("template",{slot:"title"},[t._v(" 图片分辨率低于300dpi，在实际印刷中可能存 在模糊，建议缩小大小或者替换图片 ")])],2)],1),s("span",{staticClass:"clickable-theme",staticStyle:{float:"right","font-size":"14px"},on:{click:t.adjustAllImages}},[t._v(" 调整所有 ")]),s("a-divider",{staticStyle:{margin:"1px 0 10px 0"}}),t._l(t.riskData.images,(function(e){return s("div",{key:e.design.uuid,staticClass:"image-block",class:{active:t.activeImageUUID===e.design.uuid},style:{backgroundImage:"url("+e.design.src+")"},on:{mouseover:function(i){t.hoverImageUUID=e.design.uuid},mouseout:function(e){t.hoverImageUUID=null}}},[s("a",{attrs:{href:"#"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.hoverImageUUID===e.design.uuid,expression:"hoverImageUUID === item.design.uuid"}],staticClass:"flex flex-center item-center image-cover",on:{click:function(i){return t.setItemActive(e)}}},[s("span",{staticClass:"locate-font",attrs:{href:"#"}},[t._v("定位")])])])])}))],2):t._e(),s("div",{staticClass:"clearfix"}),t.riskData.fonts.length>0?s("div",{staticStyle:{"margin-top":"16px"}},[s("span",{staticClass:"middle-font"},[s("span",{staticClass:"danger-font"},[t._v(" "+t._s(t.riskData.fonts.length)+" ")]),t._v(" 处文字字号小于6pt ")]),s("span",{staticClass:"clickable-theme",staticStyle:{float:"right"},on:{click:t.ignoreAllFonts}},[t._v(" 忽略全部 ")]),s("a-tooltip",[s("img",{staticStyle:{width:"16px",height:"16px"},attrs:{src:i("5176")}}),s("template",{slot:"title"},[t._v(" 文字字号小于6pt，在实际印刷中可能存在模糊，建议调整文字大小 ")])],2),s("a-divider",{staticStyle:{margin:"1px 0 10px 0"}}),t._l(t.riskData.fonts,(function(e){return s("a-row",{key:e.design.uuid,staticClass:"font-row"},[s("a-col",{attrs:{span:2}},[s("div",{staticClass:"font-sign flex flex-center"},[t._v("Aa")])]),s("a-col",{staticClass:"line-clamp",style:{fontSize:"14px",lineHeight:"32px",paddingLeft:"16px",paddingright:"16px",fontFamily:e.design.style.fontFamily,cursor:"pointer"},attrs:{span:20},on:{click:function(i){return t.setItemActive(e)}}},[s("a-tooltip",[s("template",{slot:"title"},[t._v("定位")]),t._v(" "+t._s(e.design.value)+" ")],2)],1),s("a-col",{attrs:{span:2}},[s("a-tooltip",{attrs:{placement:"right"}},[s("img",{staticStyle:{width:"16px",height:"16px"},attrs:{src:i("fb29")},on:{click:function(i){return t.ignoreFont(e,!0)}}}),s("template",{slot:"title"},[t._v(" 忽略 ")])],2)],1)],1)}))],2):t._e()])]),s("div",{staticClass:"risk-buttons"},[s("a-button",{attrs:{type:"primary"},on:{click:t.beginRiskCheck}},[t._v(" 重新检测 ")]),0===t.$root.projectData.cate.complex_type?s("a-button",{staticClass:"mx-8",on:{click:t.showProductOrder}},[t._v(" 继续下单 ")]):t._e()],1)])])]):t._e()])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"risk-content",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[s("img",{staticClass:"flex-none",staticStyle:{width:"70px",height:"70px",margin:"10px"},attrs:{src:i("7d98")}}),s("div",{staticClass:"small-font",staticStyle:{width:"144px"}},[t._v(" 包小盒智能印刷风险检测， 确保您的印刷清晰完整 ")])])}],a=(i("8a79"),i("ddb0"),i("5530")),r=i("5880"),o=i("fe94"),l=i("da71"),c={data(){return{riskData:{images:[],fonts:[]},status:null,riskProgress:0,activeImageUUID:null,hoverImageUUID:null,autoCheck:!1}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor",["imageSizeMap"])),Object(r["mapState"])(["isInside"])),{},{smallImages(){},hasRisk(){return!!this.riskData&&(this.riskData.fonts.length>0||this.riskData.images.length>0)}}),mounted(){},beforeDestroy(){},methods:{beginRiskCheck(t=!1){this.status="checking",this.riskProgress=10,setTimeout(()=>{this.riskProgress=25},300),setTimeout(()=>{this.riskProgress=50},600),setTimeout(()=>{this.riskProgress=75},900),setTimeout(()=>{this.riskProgress=100,this.checkBothSides(),t&&!this.hasRisk&&this.showProductOrder(),this.status="checkFinished"},1200)},checkBothSides(){const t={},e=this.doRiskCheck(this.$root.projectData.insideDesignData,"inside"),i=this.doRiskCheck(this.$root.projectData.designData,"outside");t.fonts=e.fonts.concat(i.fonts),t.images=e.images.concat(i.images),this.riskData=t},setItemActive(t){this.activeImageUUID=t.design.uuid;const e=t.side;t.design;"inside"!==e||this.isInside?"outside"===e&&this.isInside&&this.$store.commit("setIsInside",0):this.$store.commit("setIsInside",1),this.$nextTick(()=>{this.$store.dispatch("editor/saveTargetDesigns",[t.design])})},ignoreAllFonts(){for(const t of this.riskData.fonts)this.ignoreFont(t);this.$store.commit("increaseCanvasVersion",!0),this.$store.commit("increaseCanvasVersion",!1),this.$store.commit("increaseProjectVersion"),this.checkBothSides()},ignoreFont(t,e=!1){const{side:i,design:s}=t,n="inside"===i?this.$root.projectData.insideDesignData:this.$root.projectData.designData,a=n.filter(t=>t.uuid===s.uuid)[0];a&&(a.style.allowSmall=!0,e&&(this.$store.commit("increaseCanvasVersion","inside"===i),this.$store.commit("increaseProjectVersion"),this.checkBothSides()))},adjustAllImages(){const t=this.riskData.images;t.map(t=>this.adjustImage(t)),this.$store.commit("increaseCanvasVersion",!1),this.$store.commit("increaseCanvasVersion",!0),this.$store.commit("increaseProjectVersion"),this.$set(this.riskData,"images",[])},adjustImage(t){const{side:e,design:i}=t,s="inside"===e?this.$root.projectData.insideDesignData:this.$root.projectData.designData,n=s.filter(t=>t.uuid===i.uuid)[0];if(!n)return;const a=this.imageSizeMap[i.uuid];if(a){if(a.width/Object(o["a"])(n.style.width).mm2inch()<300){const t=n.style.width,e=Object(o["a"])(a.width/300).inch2mm(),i=e/t;n.style.width=e,n.style.height=n.style.height*i,n.bg&&(n.bg.width=n.bg.width*i,n.bg.height=n.bg.height*i,n.bg.x=n.bg.x*i,n.bg.y=n.bg.y*i)}if(a.height/Object(o["a"])(n.style.height).mm2inch()<300){const t=n.style.height,e=Object(o["a"])(a.height/300).inch2mm(),i=e/t;n.style.height=e,n.style.width=n.style.width*i,n.bg&&(n.bg.width=n.bg.width*i,n.bg.height=n.bg.height*i,n.bg.x=n.bg.x*i,n.bg.y=n.bg.y*i)}n.width=Object(o["a"])(n.style.width).mm2px(),n.height=Object(o["a"])(n.style.height).mm2px()}},doRiskCheck(t,e){const i=[],s=[];for(const n of t)if("font"===n.type)Object(o["a"])(n.style.fontSize).mm2pt()<6&&!n.style.allowSmall&&i.push({side:e,design:n});else if("img"===n.type&&!n.src.endsWith(".svg")){const t=this.imageSizeMap[n.uuid];if(!t)continue;(Math.round(t.width/Object(o["a"])(n.style.width).mm2inch())<=299||Math.round(t.height/Object(o["a"])(n.style.height).mm2inch())<=299)&&s.push({side:e,design:n})}return{fonts:i,images:s}},showProductOrder(){this.$root.projectData.science_id!==l["CUSTOMIZED_SCIENCE_ID"]?this.$emit("risk-result",{hasRisk:this.hasRisk}):this.$message.error("自定义材质暂时不支持印刷下单，请联系客服")}}},h=c,d=(i("13da"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,"33702b37",null);e["default"]=u.exports},"0570":function(t,e,i){},"058d":function(t,e,i){},"0596":function(t,e,i){},"05bf":function(t,e,i){"use strict";var s=i("533a"),n=i.n(s);n.a},"05ed":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bxh-number-input"},[i("input",{style:{width:t.width+"px"},attrs:{type:"number"},domProps:{value:t.value},on:{input:function(e){t.$emit("change",parseInt(e.target.value))}}})])},n=[],a={name:"NumberInput",model:{prop:"value",event:"change"},props:{value:{type:Number,require:!0},width:{type:Number,default:200}}},r=a,o=(i("193d"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,null,null);e["a"]=l.exports},"062e":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"render-menu",style:{height:t.height+"px"}},[i("div",{staticClass:"slide",style:{top:28+64*t.current+"px"}}),i("div",{class:" flex flex-center item-center "+(0===t.current?"menu-item--active":"menu-item"),on:{click:function(e){return t.$emit("change",0)}}},[t._m(0)]),1===t.user.is_admin?i("div",{class:" flex flex-center item-center "+(1===t.current?"menu-item--active":"menu-item"),on:{click:function(e){return t.$emit("change",1)}}},[t._m(1)]):t._e()])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("img",{staticClass:"img1",attrs:{src:i("e139")}}),s("img",{staticClass:"img2",attrs:{src:i("1f1e6")}}),s("div",{staticClass:"text fo-12 mt-8"},[t._v("场景")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("img",{staticClass:"img1",attrs:{src:i("ff05")}}),s("img",{staticClass:"img2",attrs:{src:i("8536")}}),s("div",{staticClass:"text fo-12 mt-8"},[t._v("光照")])])}],a=i("5530"),r=i("5880"),o={props:{height:{type:Number},current:{type:Number,require:!0}},computed:Object(a["a"])({},Object(r["mapState"])("profile",["user"])),model:{prop:"current",event:"change"}},l=o,c=(i("c2653"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,null,null);e["default"]=h.exports},"066c":function(t,e,i){"use strict";var s=i("e3d0"),n=i.n(s);n.a},"06ad":function(t,e,i){var s=i("4436"),n=i("41ef"),a=i("6d8b"),r=a.isArrayLike,o=Array.prototype.slice;function l(t,e){return t[e]}function c(t,e,i){t[e]=i}function h(t,e,i){return(e-t)*i+t}function d(t,e,i){return i>.5?e:t}function u(t,e,i,s,n){var a=t.length;if(1===n)for(var r=0;r<a;r++)s[r]=h(t[r],e[r],i);else{var o=a&&t[0].length;for(r=0;r<a;r++)for(var l=0;l<o;l++)s[r][l]=h(t[r][l],e[r][l],i)}}function p(t,e,i){var s=t.length,n=e.length;if(s!==n){var a=s>n;if(a)t.length=n;else for(var r=s;r<n;r++)t.push(1===i?e[r]:o.call(e[r]))}var l=t[0]&&t[0].length;for(r=0;r<t.length;r++)if(1===i)isNaN(t[r])&&(t[r]=e[r]);else for(var c=0;c<l;c++)isNaN(t[r][c])&&(t[r][c]=e[r][c])}function f(t,e,i){if(t===e)return!0;var s=t.length;if(s!==e.length)return!1;if(1===i){for(var n=0;n<s;n++)if(t[n]!==e[n])return!1}else{var a=t[0].length;for(n=0;n<s;n++)for(var r=0;r<a;r++)if(t[n][r]!==e[n][r])return!1}return!0}function m(t,e,i,s,n,a,r,o,l){var c=t.length;if(1===l)for(var h=0;h<c;h++)o[h]=g(t[h],e[h],i[h],s[h],n,a,r);else{var d=t[0].length;for(h=0;h<c;h++)for(var u=0;u<d;u++)o[h][u]=g(t[h][u],e[h][u],i[h][u],s[h][u],n,a,r)}}function g(t,e,i,s,n,a,r){var o=.5*(i-t),l=.5*(s-e);return(2*(e-i)+o+l)*r+(-3*(e-i)-2*o-l)*a+o*n+e}function v(t){if(r(t)){var e=t.length;if(r(t[0])){for(var i=[],s=0;s<e;s++)i.push(o.call(t[s]));return i}return o.call(t)}return t}function b(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function y(t){var e=t[t.length-1].value;return r(e&&e[0])?2:1}function _(t,e,i,a,o,l){var c=t._getter,v=t._setter,_="spline"===e,x=a.length;if(x){var w,C=a[0].value,k=r(C),S=!1,A=!1,O=k?y(a):0;a.sort((function(t,e){return t.time-e.time})),w=a[x-1].time;for(var j=[],M=[],I=a[0].value,T=!0,E=0;E<x;E++){j.push(a[E].time/w);var D=a[E].value;if(k&&f(D,I,O)||!k&&D===I||(T=!1),I=D,"string"===typeof D){var L=n.parse(D);L?(D=L,S=!0):A=!0}M.push(D)}if(l||!T){var P=M[x-1];for(E=0;E<x-1;E++)k?p(M[E],P,O):!isNaN(M[E])||isNaN(P)||A||S||(M[E]=P);k&&p(c(t._target,o),P,O);var R,z,N,B,F,$,U=0,H=0;if(S)var V=[0,0,0,0];var G=function(t,e){var i;if(e<0)i=0;else if(e<H){for(R=Math.min(U+1,x-1),i=R;i>=0;i--)if(j[i]<=e)break;i=Math.min(i,x-2)}else{for(i=U;i<x;i++)if(j[i]>e)break;i=Math.min(i-1,x-2)}U=i,H=e;var s=j[i+1]-j[i];if(0!==s)if(z=(e-j[i])/s,_)if(B=M[i],N=M[0===i?i:i-1],F=M[i>x-2?x-1:i+1],$=M[i>x-3?x-1:i+2],k)m(N,B,F,$,z,z*z,z*z*z,c(t,o),O);else{if(S)n=m(N,B,F,$,z,z*z,z*z*z,V,1),n=b(V);else{if(A)return d(B,F,z);n=g(N,B,F,$,z,z*z,z*z*z)}v(t,o,n)}else if(k)u(M[i],M[i+1],z,c(t,o),O);else{var n;if(S)u(M[i],M[i+1],z,V,1),n=b(V);else{if(A)return d(M[i],M[i+1],z);n=h(M[i],M[i+1],z)}v(t,o,n)}},W=new s({target:t._target,life:w,loop:t._loop,delay:t._delay,onframe:G,ondestroy:i});return e&&"spline"!==e&&(W.easing=e),W}}}var x=function(t,e,i,s){this._tracks={},this._target=t,this._loop=e||!1,this._getter=i||l,this._setter=s||c,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};x.prototype={when:function(t,e){var i=this._tracks;for(var s in e)if(e.hasOwnProperty(s)){if(!i[s]){i[s]=[];var n=this._getter(this._target,s);if(null==n)continue;0!==t&&i[s].push({time:0,value:v(n)})}i[s].push({time:t,value:e[s]})}return this},during:function(t){return this._onframeList.push(t),this},pause:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].pause();this._paused=!0},resume:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,i=0;i<e;i++)t[i].call(this)},start:function(t,e){var i,s=this,n=0,a=function(){n--,n||s._doneCallback()};for(var r in this._tracks)if(this._tracks.hasOwnProperty(r)){var o=_(this,t,a,this._tracks[r],r,e);o&&(this._clipList.push(o),n++,this.animation&&this.animation.addClip(o),i=o)}if(i){var l=i.onframe;i.onframe=function(t,e){l(t,e);for(var i=0;i<s._onframeList.length;i++)s._onframeList[i](t,e)}}return n||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,i=this.animation,s=0;s<e.length;s++){var n=e[s];t&&n.onframe(this._target,1),i&&i.removeClip(n)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}};var w=x;t.exports=w},"0716":function(t,e,i){},"0748":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"video-prop p-20",style:{height:t.height+"px"}},[s("div",{staticClass:"fo-14 pfow "},[t._v("视频比例")]),s("div",{staticClass:"flex flex-start item-center mt-16 "},t._l(t.ratios,(function(e,i){return s("div",{key:i,class:" small-btn "+(i==t.ratioIndex?"bg-b-active":"bg-b-def"),on:{click:function(e){return t.ratioClick(i)}}},[t._v(" "+t._s(e.w)+":"+t._s(e.h)+" ")])})),0),s("div",{staticClass:"fo-14 pfow mt-24"},[t._v("清晰度")]),s("div",{staticClass:"mt-12"},t._l(t.claritys,(function(e,n){return s("div",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!item.hidden"}],key:n,class:" flex flex-between item-center long-btn "+(n===t.clarityIndex?"bg-b-active":"bg-b-def")+" "+(e.close?"bg-close":""),on:{click:function(e){return t.clarityClick(n)}}},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"fo-12 ml-12",staticStyle:{display:"block","white-space":"nowrap"}},[t._v(" "+t._s(e.label)+" ")]),e.vip&&!e.close?s("img",{staticClass:"ml-8",attrs:{src:i("0be3"),height:"14px",alt:""}}):t._e(),e.close?s("div",{staticClass:"wait-open"},[t._v("待开放")]):t._e()]),s("div",{staticClass:"fo-12 mr-12"},[t._v(t._s(e.w)+"*"+t._s(e.h))])])})),0)])},n=[],a=i("5530"),r=i("9393"),o=i("5880"),l={props:{height:{type:Number}},mixins:[r["a"]],computed:Object(a["a"])({},Object(o["mapGetters"])("profile",["isVip"])),data(){return{ratios:[{w:16,h:9},{w:9,h:16},{w:4,h:3},{w:1,h:1}],ratioIndex:0,claritys:[{label:"720P标清",w:1280,h:720},{label:"1080P高清",w:1920,h:1080,vip:!0}],clarityIndex:0}},mounted(){this.ratioClick(0)},methods:{ratioClick(t){switch(this.ratioIndex=t,this.ratios[this.ratioIndex].w){case 16:this.claritys[0].w=1280,this.claritys[0].h=720,this.claritys[1].w=1920,this.claritys[1].h=1080;break;case 9:this.claritys[0].w=720,this.claritys[0].h=1280,this.claritys[1].w=1080,this.claritys[1].h=1920;break;case 4:this.claritys[0].w=960,this.claritys[0].h=720,this.claritys[1].w=1440,this.claritys[1].h=1080;break;case 1:this.claritys[0].w=720,this.claritys[0].h=720,this.claritys[1].w=1080,this.claritys[1].h=1080;break}this.$emit("ratio-change",{ratio:this.ratios[this.ratioIndex],clarity:this.claritys[this.clarityIndex]})},clarityClick(t){this.claritys[t].close||(this.claritys[t].close||this.claritys[t].vip?this.claritys[t].vip&&(this.isVip?this.clarityIndex=t:this.showPersonalVip()):this.clarityIndex=t,this.$emit("ratio-change",{ratio:this.ratios[this.ratioIndex],clarity:this.claritys[this.clarityIndex]}))}}},c=l,h=(i("57afd"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,"61e8c080",null);e["default"]=d.exports},"07a7":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-modal",{attrs:{centered:"",title:"预约下单",footer:null,visible:t.tvisble,"mask-closable":!0,width:720,"z-index":4e3},on:{cancel:function(e){t.tvisble=!1}}},[i("div",{staticClass:"editor-appointment-proofing flex flex-between item-center"},[i("div",{staticClass:"editor-appointment-proofing__left"},[i("div",{staticClass:"fo-14 fo-gray"},[t._v("提交预约信息，方便专属客服与您联系")]),i("a-form",{staticClass:"mt-16",attrs:{form:t.formData,"label-col":{span:4},"wrapper-col":{span:20}}},[i("a-form-item",{attrs:{label:"联系手机"}},[i("a-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入手机号"},model:{value:t.formData.phone_number,callback:function(e){t.$set(t.formData,"phone_number",e)},expression:"formData.phone_number"}})],1),i("a-form-item",{attrs:{label:"预约时间"}},[i("a-radio-group",{model:{value:t.formData.appint_type,callback:function(e){t.$set(t.formData,"appint_type",e)},expression:"formData.appint_type"}},[i("a-radio",{staticStyle:{display:"block"},attrs:{value:1}},[t._v("尽快联系")]),i("a-radio",{staticClass:"mt-12",staticStyle:{display:"block"},attrs:{value:2}},[t._v("自定义时间")])],1),i("br"),i("a-date-picker",{staticClass:"w-100",attrs:{"show-time":"",placeholder:"0000/00/00 00:00",disabled:1===t.formData.appint_type},on:{ok:t.timeOnOk},model:{value:t.timePicker,callback:function(e){t.timePicker=e},expression:"timePicker"}})],1),i("a-form-item",{attrs:{label:"留言要求"}},[i("a-textarea",{attrs:{placeholder:"请留言",rows:4},model:{value:t.formData.msg,callback:function(e){t.$set(t.formData,"msg",e)},expression:"formData.msg"}})],1),i("a-form-item",{attrs:{"wrapper-col":{span:12,offset:4}}},[i("a-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.submit}},[t._v("提交预约")])],1)],1)],1),i("div",{staticClass:"editor-appointment-proofing__right flex flex-center item-center"},[i("div",{staticClass:"text-center"},[i("img",{staticClass:"wxqrcode",attrs:{src:"/static/img/wx.png"}}),i("div",{staticClass:"fo-14 mt-12"},[t._v("微信扫码咨询您的专属客服")])])])])])],1)},n=[],a={props:["visible"],model:{prop:"visible",event:"change"},data(){return{timePicker:null,tvisble:this.visible,formData:{phone_number:"",appint_type:1,appint_time:"",msg:""},loading:!1}},watch:{visible(t){this.tvisble=t},tvisble(t){this.$emit("change",t)}},methods:{timeOnOk(t){this.formData.appint_time=new Date(t._d).getTime()},submit(){return this.formData.phone_number?2!==this.formData.appint_type||this.formData.appint_time?(this.formData.project_id=this.$route.query.id,this.loading=!0,void this.$api.appointment.add(this.formData).then(t=>{this.loading=!1,t&&(this.$message.success(t.errmsg),this.tvisble=!1)})):this.$message.error="请选择预约时间":this.$message.error="请输入手机号"}}},r=a,o=(i("9911"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,null,null);e["default"]=l.exports},"07df":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=i("3c7c"),a=r(n);function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=function(t){var e=t.substr(0,13).split("").map((function(t){return parseInt(t,10)})).reduce((function(t,e,i){return t+e*(3-i%2*2)}),0);return 10*Math.ceil(e/10)-e},d=function(t){function e(t,i){return o(this,e),-1!==t.search(/^[0-9]{13}$/)&&(t+=h(t)),l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return c(e,t),s(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{14}$/)&&+this.data[13]===h(this.data)}}]),e}(a.default);e.default=d},"0869":function(t,e,i){"use strict";i.r(e);var s=i("750b");i("0ac0");const n=i("77c1");e["default"]=Object(s["b"])({props:{address:{type:Object,required:!0},active:{type:Boolean,default:!1}},setup(t,e){const i=t=>{e.root.$confirm({title:"确定删除收货地址？",zIndex:4001,okText:"确定",centered:!0,onOk(){t.stopPropagation(),e.emit("remove")},onCancel(){},class:"test"})},a=t=>{t.stopPropagation(),e.emit("edit")};return()=>Object(s["c"])("div",{class:"picker-item"+(t.active?" picker-item--active":""),on:{click:()=>{e.emit("click")},dblclick:()=>{e.emit("dblclick")}}},[Object(s["c"])("div",{class:"picker-header"},[Object(s["c"])("div",{class:"name-row"},[Object(s["c"])("span",[t.address.contacts])," ",Object(s["c"])("span",{class:"ml-8"},["收"])," ",Boolean(t.address.isDefault)&&Object(s["c"])("div",{style:"margin-left:auto;"},[Object(s["c"])("span",{attrs:{href:"javascript:void;"},class:"tag"},["默认地址"])])]),Object(s["c"])("a-divider",{class:"mt-16 mb-16"})]),Object(s["c"])("div",{class:"picker-body"},[Object(s["c"])("div",{class:"address-row"},[`${t.address.province}${t.address.city}${t.address.district}${t.address.detail}`]),Object(s["c"])("div",{class:"phone-row mt-8"},[t.address.telNumber]),Object(s["c"])("div",{class:"flex left buttons ml-8"},[Object(s["c"])("a-button",{attrs:{type:"link",size:"small"},on:{click:i}},["删除"]),Object(s["c"])("a-button",{attrs:{type:"link",size:"small"},on:{click:a}},["修改"])])]),t.active&&Object(s["c"])("div",{class:"anotation"},[Object(s["c"])("img",{attrs:{src:n,alt:"picked-icon"},class:"picked-icon"})])])}})},"08d1":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"handle-knifefaces-panel",style:{right:t.tright+"px"}},[i("div",{staticClass:"title flex flex-end item-center",on:{dblclick:function(e){return t.changeFace(null)}}},[t.title?i("div",{staticClass:"fo-12"},[t._v(t._s(t.overtitle||t.title))]):t._e()]),i("div",{staticClass:"handle-knifefaces"},[i("div",{staticClass:"knifefaces-content"},[i("svg",{style:{transform:"scale("+t.mscale+","+(t.isInside?-1:1)*t.mscale+") rotate("+t.$root.projectData.totalRotate+"deg)"},attrs:{width:t.$root.knifeData.totalX,height:t.$root.knifeData.totalY,transformOrigin:"0 0"},on:{mouseout:function(e){t.overtitle=""}}},[t._l(t.$root.knifeData.facesForSvg,(function(e,s){return i("path",{key:"path-"+s,class:"svg-select-face "+(t.currentFace===e.name&&"svg-select-face--active"),attrs:{d:e.d},on:{dblclick:function(i){return t.changeFace(e.name)},mouseover:function(i){t.overtitle=e.name+"面"}}})})),i("g",t._l(t.$root.knifeData.folds,(function(e,s){return i("line",{key:s,attrs:{"stroke-width":1/t.mscale,stroke:"rgba(255,255,255,1)",x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}})})),0)],2)]),i("div",{staticClass:"knife-remark"},[t.cateId?i("a",{attrs:{target:"_blank",href:"/models/"+t.cateId}},[t._v(" 模型ID："+t._s(t.$root.projectData.cate.cate_no)+" ")]):i("span",[t._v("模型ID："+t._s(t.$root.projectData.cate.cate_no))])])])])},n=[],a=i("5530"),r=i("5880"),o={props:["right","value"],model:{prop:"value",event:"change"},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])(["isInside"])),Object(r["mapState"])("editor",["currentFace"])),{},{mscale(){let t;return t=this.$root.knifeData.totalX>this.$root.knifeData.totalY?this.modeStyle.width>this.modeStyle.height?this.modeStyle.height/this.$root.knifeData.totalX*.9:this.modeStyle.width/this.$root.knifeData.totalX*.9:this.modeStyle.width>this.modeStyle.height?this.modeStyle.height/this.$root.knifeData.totalY*.9:this.modeStyle.width/this.$root.knifeData.totalY*.9,t},title(){return null===this.currentFace?"":this.currentFace+"面"}}),watch:{value(t){this.visible=t},right(t){this.tright=t}},data(){return{visible:this.value,tright:this.right,overtitle:"",modeStyle:{width:140,height:140},cateId:null}},methods:{changeFace(t){this.$store.commit("editor/toggleCurrentFace",t)}},mounted(){this.$api2.getBlanks({pageSize:1,keywords:this.$root.projectData.cate.cate_no}).then(t=>{t.data.length>=1&&(this.cateId=t.data[0].id)})}},l=o,c=(i("f1b8"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,null,null);e["default"]=h.exports},"08f1":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.mounted?i("img",{attrs:{src:t.src}}):t._e()},n=[],a={props:{src:{required:!0,type:String}},data(){return{mounted:!0}},watch:{src:{immediate:!0,handler(t){}}},methods:{remount(){this.mounted=!1,setTimeout(()=>{this.mounted=!0})}}},r=a,o=i("2877"),l=Object(o["a"])(r,s,n,!1,null,null,null);e["a"]=l.exports},"0906":function(t,e,i){},"092f":function(t,e,i){"use strict";var s=i("28b3"),n=i.n(s);n.a},"094a":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"fo-12 pfow "},[t._v("旋转")]),s("div",{staticClass:"light-render-input"},[s("input",{staticClass:"light-render-input",domProps:{value:t.rotate+t.rotateUnit},on:{focus:function(e){t.rotateUnit="",e.target.select()},blur:t.rotateInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.rotateInput(e)}}})])]),s("div",{staticClass:"flex flex-center mt-16"},[s("div",{staticClass:"rotate-light"},[s("div",{ref:"rotateLight",staticClass:"panel flex flex-center item-center"},[s("div",{staticClass:"flag-panel ",style:{left:t.fx+"px",top:t.fy+"px"},on:{mousedown:t.mouseDown}},[t._m(0)]),s("img",{attrs:{src:i("c308")}})])])])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flag flex flex-center item-center"},[s("img",{attrs:{src:i("3230")}})])}],a=i("6116"),r={props:{value:{type:Number,require:!0},position:{type:Object}},data(){return{fx:0,fy:73,rotate:this.value,rotateUnit:"°"}},model:{prop:"value",event:"change"},watch:{value(t){this.rotate=t,this.toAxis()}},mounted(){this.toAxis()},methods:{rotateInput(t){"blur"===t.type&&(this.rotateUnit="°");let e=0;t.target.value&&(e=parseFloat(Object(a["c"])(t.target.value))),e>=360&&(e=0),e<0&&(e=0),this.rotate!=e&&(this.rotate=e,this.$emit("change",e),this.emitSunLight(),this.$emit("after-change",e),this.toAxis())},mouseDown(t){const e=this.$refs.rotateLight.getBoundingClientRect(),i=e.x+e.width/2,s=e.y+e.height/2;document.onmousemove=t=>{let e=t.clientX-i,n=t.clientY-s;const a=Math.sqrt(Math.pow(e,2)+Math.pow(n,2)),r=a/73,o=e/r,l=n/r;return this.toRotate(e,n),this.fx=o+73,this.fy=l+73,!1},document.onmouseup=()=>{this.$emit("after-change",this.rotate),document.onmousemove=null,document.onmouseup=null}},toRotate(t,e){const i=Math.atan2(-e,-t);let s=i/(2*Math.PI)*360;s<0&&(s+=360),this.rotate=parseInt(s),this.$emit("change",this.rotate),this.emitSunLight()},emitSunLight(){const t=Math.sqrt(Math.pow(this.position.x,2)+Math.pow(this.position.z,2)),e=Math.cos((this.rotate+90)*Math.PI/180)*t,i=-Math.sin((this.rotate+90)*Math.PI/180)*t;this.$emit("position-change",{x:i,y:this.position.y,z:e}),this.$bus.$emit("sunLightChange",{x:i,z:e})},toAxis(){let t=73*Math.cos((this.rotate+180)*Math.PI/180),e=73*Math.sin((this.rotate+180)*Math.PI/180);this.fx=t+73,this.fy=e+73}}},o=r,l=(i("c66b"),i("2877")),c=Object(l["a"])(o,s,n,!1,null,"139c58cb",null);e["default"]=c.exports},"0953":function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("44c4");e["default"]=Object(s["b"])({props:{mobile:{type:String,default:""},immediate:{type:Boolean,default:!1}},setup(t,e){const i=Object(s["j"])(0),a=Object(s["j"])(""),r=Object(s["j"])(!1);return()=>Object(s["c"])("div",{class:"input-code"},[Object(s["c"])("a-input",{attrs:{placeholder:"请输入短信验证码",value:a.value},on:{change:t=>a.value=t.target.value,blur:()=>{e.emit("change",a.value)}}},[Object(s["c"])(n["a"],{slot:"suffix",attrs:{mobile:t.mobile,immediate:t.immediate},on:{change:t=>i.value=t,error:t=>e.root.$message.error(t),disable:t=>r.value=t}},[Object(s["c"])("span",{class:"send-code",style:{cursor:r.value?" not-allowed":"pointer"}},["重新发送",r.value?`(${i.value})`:""])])])])}})},"09b9":function(t,e,i){},"09dc":function(t,e,i){"use strict";t.exports=h;var s=i("9d8a").codes,n=s.ERR_METHOD_NOT_IMPLEMENTED,a=s.ERR_MULTIPLE_CALLBACK,r=s.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=s.ERR_TRANSFORM_WITH_LENGTH_0,l=i("e666");function c(t,e){var i=this._transformState;i.transforming=!1;var s=i.writecb;if(null===s)return this.emit("error",new a);i.writechunk=null,i.writecb=null,null!=e&&this.push(e),s(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function h(t){if(!(this instanceof h))return new h(t);l.call(this,t),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"===typeof t.transform&&(this._transform=t.transform),"function"===typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",d)}function d(){var t=this;"function"!==typeof this._flush||this._readableState.destroyed?u(this,null,null):this._flush((function(e,i){u(t,e,i)}))}function u(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new o;if(t._transformState.transforming)throw new r;return t.push(null)}i("3fb5")(h,l),h.prototype.push=function(t,e){return this._transformState.needTransform=!1,l.prototype.push.call(this,t,e)},h.prototype._transform=function(t,e,i){i(new n("_transform()"))},h.prototype._write=function(t,e,i){var s=this._transformState;if(s.writecb=i,s.writechunk=t,s.writeencoding=e,!s.transforming){var n=this._readableState;(s.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},h.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},h.prototype._destroy=function(t,e){l.prototype._destroy.call(this,t,(function(t){e(t)}))}},"0a90":function(t,e,i){},"0ac0":function(t,e,i){},"0ae3":function(t,e,i){"use strict";t.exports=n;var s=i("09dc");function n(t){if(!(this instanceof n))return new n(t);s.call(this,t)}i("3fb5")(n,s),n.prototype._transform=function(t,e,i){i(null,t)}},"0b44":function(t,e,i){var s=i("607d"),n=function(){this._track=[]};function a(t){var e=t[1][0]-t[0][0],i=t[1][1]-t[0][1];return Math.sqrt(e*e+i*i)}function r(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}n.prototype={constructor:n,recognize:function(t,e,i){return this._doTrack(t,e,i),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e,i){var n=t.touches;if(n){for(var a={points:[],touches:[],target:e,event:t},r=0,o=n.length;r<o;r++){var l=n[r],c=s.clientToLocal(i,l,{});a.points.push([c.zrX,c.zrY]),a.touches.push(l)}this._track.push(a)}},_recognize:function(t){for(var e in o)if(o.hasOwnProperty(e)){var i=o[e](this._track,t);if(i)return i}}};var o={pinch:function(t,e){var i=t.length;if(i){var s=(t[i-1]||{}).points,n=(t[i-2]||{}).points||s;if(n&&n.length>1&&s&&s.length>1){var o=a(s)/a(n);!isFinite(o)&&(o=1),e.pinchScale=o;var l=r(s);return e.pinchX=l[0],e.pinchY=l[1],{type:"pinch",target:t[0].target,event:e}}}}},l=n;t.exports=l},"0b79":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"left-side-panel-wrap",class:[{hide:!t.left_side_show}]},[s("keep-alive",[s(t.curPanelComponentName,{tag:"component"})],1),s("img",{directives:[{name:"show",rawName:"v-show",value:t.left_side_show,expression:"left_side_show"}],staticClass:"btn-hide",attrs:{src:i("cd0e")},on:{click:t.onHideLeftSide}})],1)},n=[],a=(i("ddb0"),i("5530")),r=i("5880"),o=i("73b3"),l=i("7ef2"),c=i("52a9"),h=i("490d"),d=i("a2a2"),u=i("a753"),p=i("4223"),f={components:{templatePanel:o["default"],materialPanel:l["default"],fontPanel:c["default"],backgroundPanel:h["default"],uploadPanel:d["default"],toolPanel:u["default"],enterprisePanel:p["default"]},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("enterprise",["isCompanyDomain","enterprise_info"])),Object(r["mapState"])("editor-v2",["left_side_cur_menu_index","left_side_show"])),{},{curPanelComponentName(){const t=this.left_side_cur_menu_index;if(-1===t)return null;const e=["material-panel","font-panel","background-panel","tool-panel","upload-panel","enterprise-panel"];let i=[];return i=this.isCompanyDomain?e:["template-panel",...e],i[t]||null}}),methods:{onHideLeftSide(){this.$store.commit("editor-v2/set_left_side_show",!1),this.$store.commit("editor-v2/set_left_side_cur_menu_index",-1)}}},m=f,g=(i("f212"),i("2877")),v=Object(g["a"])(m,s,n,!1,null,"401735e3",null);e["default"]=v.exports},"0ba6":function(t,e,i){},"0be3":function(t,e,i){t.exports=i.p+"editor-assets/img/vip-f.77ca6c8d.svg"},"0c05":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{title:"温馨提示",visible:t.visible,width:480,footer:null},on:{cancel:t.handleCancel}},[i("div",{staticClass:"main-box"},[t._v("站外粘贴请使用快捷键 "+t._s(t.hotKey)+"+V")])])},n=[],a=i("3063"),r={data(){return{hotKey:a["a"].isMacOs?"⌘":"Ctrl",visible:!1}},methods:{handleCancel(){this.visible=!1},handleOk(){this.visible=!1}},mounted(){this.$bus.$on("show-paste-modal",t=>{this.visible=!0})},destroyed(){this.$bus.$off("show-paste-modal")}},o=r,l=(i("7262"),i("2877")),c=Object(l["a"])(o,s,n,!1,null,"0fa0a84f",null);e["default"]=c.exports},"0c053":function(t,e,i){},"0c09":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAB50lEQVRYR9XXP6hPYRzH8dctJitWk40sbBQLg5KiKBaFS4qEyGAwiFBSyr+6C0VRt1t3YEGMFpHFZMVqouhbz6nTuec853fOvfXwjKfv8/2+n8/3z/OcKYXXVOH4/guA/TiItQPV+oJHeJLb16fAPlweGLhpfglPu3zkAFbiJVbgHOYGguzCdfzEdvxo258DuII9eIVjA4NX5nexDc9xcQjAejzDL+zE15EAazCP5diLj00/bQrEt8jZBjzAjZHBq21ncQQfEDX1p+6vDWA3ruE7dqQcLoYhaugFVuE8ZnMAWeNFUHQeqqlAVq4awEYcxrr07RMe4n0HZGda6wC9BZOcR0ecbgkUub2FqPy21VrYdYB72JprGWxK0y2643YtnyHxSSxLU7NLiaq1X2M6KCuAkPRx39BIp4u+von7jWMexZmeuVEfbgciZRXABRxKp7qTKbZ3qZq34FvDbjXepu7ZnPFxIqk1g6tLCRAxY25ELYQaXasVYClSMEmXdqYgNvfObQRoXLG/a0XYTEUOZMH9MqYNj+NUrYDf9EheAfW2YRiOGUSfJwCYaBAFQPFRHBBFL6NqOBW9jgOi6IOkqtoFc3uSRm/Y9N4v//SjNA5T9FleqVn0x2RE2odt6fszGuZthHVxgL+43pMhc2zhgAAAAABJRU5ErkJggg=="},"0c12":function(t,e){function i(){}function s(t,e,i,s){for(var n=0,a=e.length,r=0,o=0;n<a;n++){var l=e[n];if(l.removed){for(c=[],h=o;h<o+l.count;h++)c.push(h);l.indices=c,o+=l.count}else{for(var c=[],h=r;h<r+l.count;h++)c.push(h);l.indices=c,r+=l.count,l.added||(o+=l.count)}}return e}function n(t){return{newPos:t.newPos,components:t.components.slice(0)}}i.prototype={diff:function(t,e,i){i||(i=function(t,e){return t===e}),this.equals=i;var a=this;t=t.slice(),e=e.slice();var r=e.length,o=t.length,l=1,c=r+o,h=[{newPos:-1,components:[]}],d=this.extractCommon(h[0],e,t,0);if(h[0].newPos+1>=r&&d+1>=o){for(var u=[],p=0;p<e.length;p++)u.push(p);return[{indices:u,count:e.length}]}function f(){for(var i=-1*l;i<=l;i+=2){var c,d=h[i-1],u=h[i+1],p=(u?u.newPos:0)-i;d&&(h[i-1]=void 0);var f=d&&d.newPos+1<r,m=u&&0<=p&&p<o;if(f||m){if(!f||m&&d.newPos<u.newPos?(c=n(u),a.pushComponent(c.components,void 0,!0)):(c=d,c.newPos++,a.pushComponent(c.components,!0,void 0)),p=a.extractCommon(c,e,t,i),c.newPos+1>=r&&p+1>=o)return s(a,c.components,e,t);h[i]=c}else h[i]=void 0}l++}while(l<=c){var m=f();if(m)return m}},pushComponent:function(t,e,i){var s=t[t.length-1];s&&s.added===e&&s.removed===i?t[t.length-1]={count:s.count+1,added:e,removed:i}:t.push({count:1,added:e,removed:i})},extractCommon:function(t,e,i,s){var n=e.length,a=i.length,r=t.newPos,o=r-s,l=0;while(r+1<n&&o+1<a&&this.equals(e[r+1],i[o+1]))r++,o++,l++;return l&&t.components.push({count:l}),t.newPos=r,o},tokenize:function(t){return t.slice()},join:function(t){return t.slice()}};var a=new i;function r(t,e,i){return a.diff(t,e,i)}t.exports=r},"0c98":function(t,e,i){},"0ccc":function(t,e,i){},"0cdb":function(t,e,i){},"0cde":function(t,e,i){var s=i("1687"),n=i("401b"),a=s.identity,r=5e-5;function o(t){return t>r||t<-r}var l=function(t){t=t||{},t.position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},c=l.prototype;c.transform=null,c.needLocalTransform=function(){return o(this.rotation)||o(this.position[0])||o(this.position[1])||o(this.scale[0]-1)||o(this.scale[1]-1)};var h=[];c.updateTransform=function(){var t=this.parent,e=t&&t.transform,i=this.needLocalTransform(),n=this.transform;if(i||e){n=n||s.create(),i?this.getLocalTransform(n):a(n),e&&(i?s.mul(n,t.transform,n):s.copy(n,t.transform)),this.transform=n;var r=this.globalScaleRatio;if(null!=r&&1!==r){this.getGlobalScale(h);var o=h[0]<0?-1:1,l=h[1]<0?-1:1,c=((h[0]-o)*r+o)/h[0]||0,d=((h[1]-l)*r+l)/h[1]||0;n[0]*=c,n[1]*=c,n[2]*=d,n[3]*=d}this.invTransform=this.invTransform||s.create(),s.invert(this.invTransform,n)}else n&&a(n)},c.getLocalTransform=function(t){return l.getLocalTransform(this,t)},c.setTransform=function(t){var e=this.transform,i=t.dpr||1;e?t.setTransform(i*e[0],i*e[1],i*e[2],i*e[3],i*e[4],i*e[5]):t.setTransform(i,0,0,i,0,0)},c.restoreTransform=function(t){var e=t.dpr||1;t.setTransform(e,0,0,e,0,0)};var d=[],u=s.create();c.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],i=t[2]*t[2]+t[3]*t[3],s=this.position,n=this.scale;o(e-1)&&(e=Math.sqrt(e)),o(i-1)&&(i=Math.sqrt(i)),t[0]<0&&(e=-e),t[3]<0&&(i=-i),s[0]=t[4],s[1]=t[5],n[0]=e,n[1]=i,this.rotation=Math.atan2(-t[1]/i,t[0]/e)}},c.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(s.mul(d,t.invTransform,e),e=d);var i=this.origin;i&&(i[0]||i[1])&&(u[4]=i[0],u[5]=i[1],s.mul(d,e,u),d[4]-=i[0],d[5]-=i[1],e=d),this.setLocalTransform(e)}},c.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},c.transformCoordToLocal=function(t,e){var i=[t,e],s=this.invTransform;return s&&n.applyTransform(i,i,s),i},c.transformCoordToGlobal=function(t,e){var i=[t,e],s=this.transform;return s&&n.applyTransform(i,i,s),i},l.getLocalTransform=function(t,e){e=e||[],a(e);var i=t.origin,n=t.scale||[1,1],r=t.rotation||0,o=t.position||[0,0];return i&&(e[4]-=i[0],e[5]-=i[1]),s.scale(e,e,n),r&&s.rotate(e,e,r),i&&(e[4]+=i[0],e[5]+=i[1]),e[4]+=o[0],e[5]+=o[1],e};var p=l;t.exports=p},"0ce6":function(t,e,i){t.exports=i.p+"editor-assets/img/ang4-b.9bb0ed8d.svg"},"0cee":function(t,e,i){t.exports=i.p+"editor-assets/img/e1.992fdd6b.svg"},"0cf7":function(t,e,i){"use strict";var s=i("d335"),n=i.n(s);n.a},"0d05":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"bottom-btn-wrap"},[s("div",{staticClass:"left-buttons"},[s("canvas-scaler"),s("b-popover-tooltip",[s("div",{attrs:{slot:"popover"},slot:"popover"},[s("div",{staticClass:"guide-line-item",on:{click:function(e){return t.onAddGuideLineByType("x")}}},[t._v("横向参考线")]),s("div",{staticClass:"guide-line-item",on:{click:function(e){return t.onAddGuideLineByType("y")}}},[t._v("竖向参考线")]),s("div",{staticClass:"guide-line-item",attrs:{disabled:!t.project_data.line_guides.length},on:{click:t.onRemoveAllGuideLine}},[t._v(" 清除参考线 ")])]),s("div",{attrs:{slot:"tooltip"},slot:"tooltip"},[t._v("参考线")]),s("div",{staticClass:"box-button--del btn radius-left ml-10"},[s("img",{attrs:{src:i("f7a3")}})])]),s("b-popover-tooltip",[s("div",{attrs:{slot:"popover"},slot:"popover"},[s("div",{staticClass:"pops-item",on:{click:function(e){t.project_data.show_material=1-t.project_data.show_material}}},[s("div",[t._v("显示材质")]),s("img",{directives:[{name:"show",rawName:"v-show",value:!!t.project_data.show_material,expression:"!!project_data.show_material"}],attrs:{src:i("e9bc")}})]),s("div",{staticClass:"pops-item",on:{click:function(e){t.project_data.show_bleed_line=1-t.project_data.show_bleed_line}}},[s("div",[t._v("显示出血线")]),s("img",{directives:[{name:"show",rawName:"v-show",value:!!t.project_data.show_bleed_line,expression:"!!project_data.show_bleed_line"}],attrs:{src:i("e9bc")}})]),s("div",{staticClass:"pops-item",on:{click:t.onSetBleedLineOnTop}},[s("div",[t._v("置顶出血线")]),s("img",{directives:[{name:"show",rawName:"v-show",value:!!t.is_bleedline_on_top,expression:"!!is_bleedline_on_top"}],attrs:{src:i("e9bc")}})]),s("div",{staticClass:"pops-item",on:{click:t.onSwitchClipByBleedLine}},[s("div",[t._v("裁切出血线")]),s("img",{directives:[{name:"show",rawName:"v-show",value:t.is_clip_by_bleedline,expression:"is_clip_by_bleedline"}],attrs:{src:i("e9bc")}})])]),s("div",{attrs:{slot:"tooltip"},slot:"tooltip"},[t._v("显示 / 隐藏")]),s("div",{staticClass:"box-button--del btn radius-right"},[s("img",{attrs:{src:i("fd60")}})])]),s("a-tooltip",{attrs:{placement:"top"}},[s("template",{slot:"title"},[s("div",{staticClass:"text-center"},[t._v(" 拖动画布 "),s("br"),t._v(" (按住空格键) ")])]),s("div",{staticClass:"btn ml-10",class:t.canvas_move_button_pressed?"actived":"",on:{click:t.onSwitchMoveCanvas}},[s("i",{staticClass:"iconfont icon-hand-grab"})])],2)],1),s("div",{staticClass:"right-buttons"},[s("div",{staticClass:"btn radius-left",class:{actived:t.is_outside},on:{click:function(e){return t.onToggleOutside(!0)}}},[t._v(" 外侧 ")]),s("div",{staticClass:"btn radius-right",class:{actived:!t.is_outside},on:{click:function(e){return t.onToggleOutside(!1)}}},[t._v(" 内侧 ")]),s("a-tooltip",{attrs:{effect:"dark",placement:"top"}},[s("div",{attrs:{slot:"title"},slot:"title"},[t._v("旋转画布")]),s("div",{staticClass:"btn radius ml-10",on:{click:t.onRotateCanvas}},[s("i",{staticClass:"iconfont icon-rotate-canvas"})])]),s("a-tooltip",{attrs:{effect:"dark",placement:"top"}},[s("div",{attrs:{slot:"title"},slot:"title"},[t._v("区域选择")]),s("div",{staticClass:"btn radius ml-10",class:[{actived:t.showMinimap}],on:{click:t.onSwitchShowMinimap}},[s("i",{staticClass:"iconfont icon-mini-map"})])]),s("mini-map",{directives:[{name:"show",rawName:"v-show",value:t.showMinimap,expression:"showMinimap"}],attrs:{is_outside:t.is_outside}})],1)])},n=[],a=i("5530"),r=i("5880"),o=i("caa8"),l=i("153e"),c={components:{canvasScaler:o["default"],miniMap:l["default"]},data(){return{showMinimap:!0}},computed:Object(a["a"])({},Object(r["mapState"])("editor-v2",["project_data","knife_data","localHistory","scale","is_outside","canvas_move_button_pressed","is_clip_by_bleedline","is_bleedline_on_top"])),methods:{onSwitchClipByBleedLine(){this.$store.commit("editor-v2/set_is_clip_by_bleedline",!this.is_clip_by_bleedline)},onSetBleedLineOnTop(){this.$store.commit("editor-v2/set_is_bleedline_on_top",!this.is_bleedline_on_top)},onRotateCanvas(){this.project_data.rotate=(this.project_data.rotate+90)%360},onToggleOutside(t){this.$store.commit("editor-v2/set_is_outside",t)},onSwitchShowMinimap(){this.showMinimap=!this.showMinimap},onSwitchMoveCanvas(){this.$store.commit("editor-v2/set_canvas_move_button_pressed",!this.canvas_move_button_pressed),document.body.style.cursor=this.canvas_move_button_pressed?"grabbing":"default"},onAddGuideLineByType(t){const e=document.getElementById("svgContainer").getBoundingClientRect(),{DPI:i}=this.$root.constant;switch(t){case"x":this.project_data.line_guides.push({type:"x",x:0,y:(e.y+e.height/2)/i});break;case"y":this.project_data.line_guides.push({type:"y",x:(e.x+e.width/2)/i,y:0});break;default:break}this.localHistory.record(this.project_data)},onRemoveAllGuideLine(){this.project_data.line_guides=[],this.localHistory.record(this.project_data)}}},h=c,d=(i("c458"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,"16f658cc",null);e["default"]=u.exports},"0d08":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"px-12 mt-24 sunLight"},[t._m(0),i("div",{staticClass:"flex flex-between item-center mt-12"},[i("div",{staticClass:"fo-12 pfow "},[t._v("亮度")]),i("div",{staticClass:"light-render-input"},[i("input",{staticClass:"light-render-input",domProps:{value:t.lightPowerValue+t.lightPowerUnit},on:{focus:function(e){t.lightPowerUnit="",e.target.select()},blur:t.lightPowerInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.lightPowerInput(e)}}})])]),i("a-slider",{staticStyle:{"margin-top":"5px"},attrs:{max:1e3,min:0,step:1,"tip-formatter":function(t){return t+"%"}},on:{change:t.lightPowerChange,afterChange:function(e){return t.$emit("attch-history")}},model:{value:t.lightPowerValue,callback:function(e){t.lightPowerValue=e},expression:"lightPowerValue"}}),i("div",[i("div",{staticClass:"flex flex-between item-center mt-12"},[i("div",{staticClass:"fo-12 pfow "},[t._v("阴影")]),i("div",{staticClass:"light-render-input"},[i("input",{staticClass:"light-render-input",domProps:{value:t.shadowValue+t.shadowUnit},on:{focus:function(e){t.shadowUnit="",e.target.select()},blur:t.shadowInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.shadowInput(e)}}})])]),i("a-slider",{staticStyle:{"margin-top":"5px"},attrs:{"tip-formatter":function(t){return t+"°"},max:180,min:0,step:1},on:{change:t.shadowChange,afterChange:function(e){return t.$emit("attch-history")}},model:{value:t.shadowValue,callback:function(e){t.shadowValue=e},expression:"shadowValue"}})],1),i("rotate-light",{attrs:{position:t.position},on:{"position-change":function(e){t.position=e}},model:{value:t.rotate,callback:function(e){t.rotate=e},expression:"rotate"}}),i("light-height",{attrs:{position:t.position,xrotate:t.rotate},on:{"position-change":function(e){t.position=e}},model:{value:t.heightRotate,callback:function(e){t.heightRotate=e},expression:"heightRotate"}}),t.lightVisible?t._e():i("div",{staticClass:"mask"})],1)])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mt-24 flex flex-between item-center "},[i("div",{staticClass:"fo-14 pfow"},[t._v("阳光")])])}],a=i("6116"),r=i("094a"),o=i("14b7"),l={components:{rotateLight:r["default"],lightHeight:o["default"]},props:{light:{type:Object}},data(){return{sunLightTC:2e3,sunLightTCUnit:"k",rotate:45,lightVisible:!0,heightRotate:45,lightPowerValue:17,lightPowerUnit:"%",shadowUnit:"°",shadowValue:10,position:{x:Math.sqrt(5),y:5*Math.sqrt(2),z:Math.sqrt(5)}}},mounted(){this.initRotate(),this.$bus.$on("initLightPosition",t=>{this.position=t,this.initRotate()}),this.$bus.$on("initLightVisible",t=>{this.lightVisible="undefined"===typeof t||t,this.checkedChange(this.lightVisible)}),this.$bus.$on("initSunLightPowerChange",t=>{this.lightPowerValue=parseInt(100*t)}),this.$bus.$on("sunLightShadowInit",t=>{this.shadowValue=t})},beforeDestroy(){this.$bus.$off("initLightPosition"),this.$bus.$off("initLightVisible"),this.$bus.$off("initSunLightPowerChange"),this.$bus.$off("sunLightShadowInit")},methods:{shadowInput(t){"blur"===t.type&&(this.shadowUnit="°");let e=0;t.target.value&&(e=parseInt(Object(a["c"])(t.target.value))),e>180&&(e=180),e<0&&(e=0),this.shadowValue!=e&&(this.shadowValue=e),this.shadowChange(e)},shadowChange(t){this.$bus.$emit("sunLightShadowChange",t)},lightPowerInput(t){"blur"===t.type&&(this.lightPowerUnit="%");let e=0;t.target.value&&(e=parseFloat(Object(a["c"])(t.target.value))),e>1e3&&(e=1e3),e<0&&(e=0),this.lightPowerValue!=e&&(this.lightPowerValue=e),this.lightPowerChange(e)},lightPowerChange(t){this.$bus.$emit("sunLightPowerChange",t/100)},checkedChange(t){this.$emit("openSunLightChange",t)},initRotate(){const t=Math.atan2(this.position.z,this.position.x);let e=t/(2*Math.PI)*360;e+=180,e<0&&(e+=360),e>=360&&(e-=360),this.rotate=parseInt(e);const i=Math.sqrt(Math.pow(this.position.z,2)+Math.pow(this.position.x,2)),s=Math.atan2(this.position.y,i);let n=s/(2*Math.PI)*360;this.heightRotate=parseInt(n)},sunLightTCInput(t){"blur"===t.type&&(this.sunLightTCUnit="k");let e=0;t.target.value&&(e=parseFloat(Object(a["c"])(t.target.value))),e>2e4&&(e=2e4),e<1e3&&(e=1e3),this.sunLightTC!=e&&(this.sunLightTC=e,this.$emit("attch-history","sunLightTC")),this.sunLightTCChange(e)},sunLightTCChange(t){this.$emit("sunLightTCChange",t)}}},c=l,h=(i("9476"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,null,null);e["default"]=d.exports},"0d1d":function(t,e,i){t.exports=i.p+"editor-assets/img/close.28d0677b.svg"},"0d67":function(t,e,i){"use strict";var s=i("750b");e["a"]=Object(s["b"])({props:{customStyle:{type:[Object,Object],default:()=>({})}},setup(t,e){return()=>{var i,n;return Object(s["c"])("div",{on:{click:()=>{document.querySelector(".zhiCustomBtn").click();const e=document.querySelector(".main-chat");e.style.bottom="10px",Object.keys(t.customStyle).length?(e.style.left=t.customStyle.left,e.style.right=t.customStyle.right):"/design"===window.location.pathname?(e.style.left="14px",e.style.right=""):(e.style.left="",e.style.right="65px")}}},[null===(i=(n=e.slots).default)||void 0===i?void 0:i.call(n)])}}})},"0da8":function(t,e,i){var s=i("19eb"),n=i("9850"),a=i("6d8b"),r=i("5e76");function o(t){s.call(this,t)}o.prototype={constructor:o,type:"image",brush:function(t,e){var i=this.style,s=i.image;i.bind(t,this,e);var n=this._image=r.createOrUpdateImage(s,this._image,this,this.onload);if(n&&r.isImageReady(n)){var a=i.x||0,o=i.y||0,l=i.width,c=i.height,h=n.width/n.height;if(null==l&&null!=c?l=c*h:null==c&&null!=l?c=l/h:null==l&&null==c&&(l=n.width,c=n.height),this.setTransform(t),i.sWidth&&i.sHeight){var d=i.sx||0,u=i.sy||0;t.drawImage(n,d,u,i.sWidth,i.sHeight,a,o,l,c)}else if(i.sx&&i.sy){d=i.sx,u=i.sy;var p=l-d,f=c-u;t.drawImage(n,d,u,p,f,a,o,l,c)}else t.drawImage(n,a,o,l,c);null!=i.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))}},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new n(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},a.inherits(o,s);var l=o;t.exports=l},"0dab":function(t,e,i){t.exports=i.p+"editor-assets/img/like.4023bce4.svg"},"0dc2":function(t,e,i){},"0de3":function(t,e,i){"use strict";var s=i("111c"),n=i.n(s);n.a},"0e11":function(t,e,i){},"0e83":function(t,e,i){},"0ea8":function(t,e,i){"use strict";i.r(e);i("5319"),i("1276"),i("ddb0");var s=i("8bbf"),n=i.n(s),a=i("750b"),r=i("ed08");i("38d7");const o=i("3ee8"),l=(t,e)=>t.split(e).reduce((t,e)=>t+e,""),c=t=>(t=l(t,"-"),l(t,"."));e["default"]=Object(a["b"])({props:{value:{type:String,default:""},width:{type:Number,default:144},fields:{type:[Object,Array],default:()=>[]},handleChange:{type:null,default:()=>{}},placeholder:{type:String,default:""},unit:{type:String,default:""},disabled:{type:Boolean,default:!1}},setup(t,e){Object(a["f"])(()=>{d.value=e.refs.el||null,n.a.nextTick(()=>{d.value=e.refs.el||null})}),Object(a["h"])(()=>{d.value=e.refs.el||null,n.a.nextTick(()=>{d.value=e.refs.el||null})});const{width:i,handleChange:s,fields:l}=t,h=Object(a["j"])(null),d=Object(a["j"])(null),u=Object(a["a"])(()=>!h.value||l.find(t=>t.key===h.value)?t.fields:[{key:h.value,value:h.value},...t.fields]);return()=>Object(a["c"])("a-select",{attrs:{showSearch:!0,getInputElement:()=>Object(a["c"])("a-input",{class:"select-insert",on:{change:async t=>{const e=t.target.value.replace("-","").replace(".","");await Object(r["D"])(0),d.value.$children[0].setState({_inputValue:e})}}}),notFoundContent:null,value:`${t.value} ${t.unit}`,disabled:t.disabled},ref:"el",on:{search:t=>{t=c(t),t=Object(r["H"])(t).target,t<4&&(t=4),h.value=t},change:t=>{null===s||void 0===s||s(t)}},style:{width:i+"px"}},[Object(a["c"])("img",{slot:"suffixIcon",attrs:{src:o},style:{width:"18px",height:"18px",marginTop:"-2px"}}),u.value.map(t=>Object(a["c"])("a-select-option",{key:t.key,attrs:{value:t.key}},[t.value]))])}})},"0ee7":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"qr-icons-wrap"},[s("h4",[t._v("标志")]),s("div",{staticClass:"icon-container"},[s("div",{staticClass:"qr-icon not-in-use",style:{backgroundImage:"url("+i("d168")+")",backgroundSize:"16px"},on:{click:function(e){return t.$emit("useIcon",null)}}}),t._l(t.$data.$predefinedIcons,(function(e,i){return s("div",{key:i,staticClass:"qr-icon",class:{"in-use":t.design.qricon===e,"not-in-use":t.design.qricon!=e},style:{backgroundImage:"url("+e+")"},on:{click:function(i){return t.$emit("useIcon",e)}}})})),t._l(t.userIcons,(function(e,i){return s("div",{key:"p"+i,staticClass:"qr-icon",class:{"in-use":t.design.qricon===e.file_path,"not-in-use":t.design.qricon!=e.file_path},style:{backgroundImage:"url("+e.file_path+")"},on:{click:function(i){return t.$emit("useIcon",e.file_path)}}},[s("a-icon",{staticClass:"remove",attrs:{type:"minus-circle",theme:"twoTone","two-tone-color":"#ff0000"},on:{click:function(i){return i.stopPropagation(),t.onRemoveIcon(e)}}})],1)})),s("div",{directives:[{name:"show",rawName:"v-show",value:t.userIcons.length<t.$data.$userIconsMaxCount,expression:"userIcons.length < $data.$userIconsMaxCount"}],staticStyle:{display:"inline-block"}},[s("a-upload",{attrs:{"show-upload-list":!1,name:"file",accept:".svg,.jpg,.jpeg,.png",multiple:!1,data:{type:"image"},headers:{Authentication:t.accessToken},"custom-request":t.onUploadIcon}},[s("div",{staticClass:"qr-icon not-in-use",style:{backgroundImage:"url("+i("ec05")+")",backgroundSize:"16px"},on:{click:t.validateMaxCount}})])],1),t.userIcons.length>t.$data.$userIconsMaxCount?s("a-alert",{attrs:{type:"error",message:"只能保留"+t.$data.$userIconsMaxCount+"张图片",banner:"",closable:""}}):t._e()],2)])},n=[],a=i("5530"),r=i("054f"),o=i("5333"),l=i("c64e"),c=i.n(l),h=i("5880"),d={data(){return{$predefinedIcons:["//cdn.baoxiaohe.com/user-materials/f505fd0b-9c41-4a39-8a60-51ad7e70ad70.svg","//cdn.baoxiaohe.com/user-materials/bf9a517f-a909-4800-adb8-fe1a864e5725.svg","//cdn.baoxiaohe.com/user-materials/2798bb16-4739-42cf-8bf9-8aa7cbe942a8.svg","//cdn.baoxiaohe.com/user-materials/09bf557e-722b-4f86-abd5-4354a7ff938e.svg","//cdn.baoxiaohe.com/user-materials/97192144-4ab6-412f-b36a-1c02cdfcbb63.svg","//cdn.baoxiaohe.com/user-materials/f862e137-b542-4519-a8bf-3fd858a853b2.svg","//cdn.baoxiaohe.com/user-materials/5c22e86e-e282-48f6-97fc-54c1771af077.svg","//cdn.baoxiaohe.com/user-materials/120fb8c9-014e-4f48-81dc-dd3b2cb2ce89.svg","//cdn.baoxiaohe.com/user-materials/57324824-3c7d-47b9-8918-f2dd612d5298.svg"],userIcons:[],$userIconsMaxCount:5,loading:!1}},computed:Object(a["a"])({},Object(h["mapState"])("profile",["accessToken"])),props:{design:{type:Object,default:null}},mounted(){this.ajaxLogoList()},methods:{async ajaxLogoList(){return this.$http.get("/api/bs/material/file/logoList").then(t=>{this.userIcons=t.data.data})},onRemoveIcon(t){o["a"].fileDel({ids:t.id}).then(()=>{this.ajaxLogoList()})},validateMaxCount(t){this.userIcons.length>=this.$data.$userIconsMaxCount&&(this.$message.error(`只能保留${this.$data.$userIconsMaxCount}个图片`),t.stopPropagation())},async onUploadIcon(t){const e=t.file.name.substring(t.file.name.lastIndexOf(".")+1,t.file.name.length),i="logo",s=c()()+"."+e,n=await r["a"].putFile(t.file,{xapi:i,rename:s,type:"user-materials"}),{errno:a,data:o}=n;a?(this.$message.error(n.errmsg),r["a"].removeStorage()):(await this.ajaxLogoList(),this.$emit("useIcon",o.url))}}},u=d,p=(i("3ed4"),i("2877")),f=Object(p["a"])(u,s,n,!1,null,"7bcbc8b8",null);e["default"]=f.exports},"0eff":function(t,e){t.exports={86:{11e4:"北京市",12e4:"天津市",13e4:"河北省",14e4:"山西省",15e4:"内蒙古自治区",21e4:"辽宁省",22e4:"吉林省",23e4:"黑龙江省",31e4:"上海市",32e4:"江苏省",33e4:"浙江省",34e4:"安徽省",35e4:"福建省",36e4:"江西省",37e4:"山东省",41e4:"河南省",42e4:"湖北省",43e4:"湖南省",44e4:"广东省",45e4:"广西壮族自治区",46e4:"海南省",5e5:"重庆市",51e4:"四川省",52e4:"贵州省",53e4:"云南省",54e4:"西藏自治区",61e4:"陕西省",62e4:"甘肃省",63e4:"青海省",64e4:"宁夏回族自治区",65e4:"新疆维吾尔自治区",71e4:"台湾省",91e4:"港澳"},11e4:{110100:"市辖区"},110100:{110101:"东城区",110102:"西城区",110105:"朝阳区",110106:"丰台区",110107:"石景山区",110108:"海淀区",110109:"门头沟区",110111:"房山区",110112:"通州区",110113:"顺义区",110114:"昌平区",110115:"大兴区",110116:"怀柔区",110117:"平谷区",110118:"密云区",110119:"延庆区"},12e4:{120100:"市辖区"},120100:{120101:"和平区",120102:"河东区",120103:"河西区",120104:"南开区",120105:"河北区",120106:"红桥区",120110:"东丽区",120111:"西青区",120112:"津南区",120113:"北辰区",120114:"武清区",120115:"宝坻区",120116:"滨海新区",120117:"宁河区",120118:"静海区",120119:"蓟州区"},13e4:{130100:"石家庄市",130200:"唐山市",130300:"秦皇岛市",130400:"邯郸市",130500:"邢台市",130600:"保定市",130700:"张家口市",130800:"承德市",130900:"沧州市",131e3:"廊坊市",131100:"衡水市",139001:"定州市",139002:"辛集市"},130100:{130102:"长安区",130104:"桥西区",130105:"新华区",130107:"井陉矿区",130108:"裕华区",130109:"藁城区",130110:"鹿泉区",130111:"栾城区",130121:"井陉县",130123:"正定县",130125:"行唐县",130126:"灵寿县",130127:"高邑县",130128:"深泽县",130129:"赞皇县",130130:"无极县",130131:"平山县",130132:"元氏县",130133:"赵县",130183:"晋州市",130184:"新乐市"},130200:{130202:"路南区",130203:"路北区",130204:"古冶区",130205:"开平区",130207:"丰南区",130208:"丰润区",130209:"曹妃甸区",130223:"滦县",130224:"滦南县",130225:"乐亭县",130227:"迁西县",130229:"玉田县",130281:"遵化市",130283:"迁安市"},130300:{130302:"海港区",130303:"山海关区",130304:"北戴河区",130306:"抚宁区",130321:"青龙满族自治县",130322:"昌黎县",130324:"卢龙县"},130400:{130402:"邯山区",130403:"丛台区",130404:"复兴区",130406:"峰峰矿区",130421:"邯郸县",130423:"临漳县",130424:"成安县",130425:"大名县",130426:"涉县",130427:"磁县",130428:"肥乡县",130429:"永年县",130430:"邱县",130431:"鸡泽县",130432:"广平县",130433:"馆陶县",130434:"魏县",130435:"曲周县",130481:"武安市"},130500:{130502:"桥东区",130503:"桥西区",130521:"邢台县",130522:"临城县",130523:"内丘县",130524:"柏乡县",130525:"隆尧县",130526:"任县",130527:"南和县",130528:"宁晋县",130529:"巨鹿县",130530:"新河县",130531:"广宗县",130532:"平乡县",130533:"威县",130534:"清河县",130535:"临西县",130581:"南宫市",130582:"沙河市"},130600:{130602:"竞秀区",130606:"莲池区",130607:"满城区",130608:"清苑区",130609:"徐水区",130623:"涞水县",130624:"阜平县",130626:"定兴县",130627:"唐县",130628:"高阳县",130629:"容城县",130630:"涞源县",130631:"望都县",130632:"安新县",130633:"易县",130634:"曲阳县",130635:"蠡县",130636:"顺平县",130637:"博野县",130638:"雄县",130681:"涿州市",130683:"安国市",130684:"高碑店市"},130700:{130702:"桥东区",130703:"桥西区",130705:"宣化区",130706:"下花园区",130708:"万全区",130709:"崇礼区",130722:"张北县",130723:"康保县",130724:"沽源县",130725:"尚义县",130726:"蔚县",130727:"阳原县",130728:"怀安县",130730:"怀来县",130731:"涿鹿县",130732:"赤城县"},130800:{130802:"双桥区",130803:"双滦区",130804:"鹰手营子矿区",130821:"承德县",130822:"兴隆县",130823:"平泉县",130824:"滦平县",130825:"隆化县",130826:"丰宁满族自治县",130827:"宽城满族自治县",130828:"围场满族蒙古族自治县"},130900:{130902:"新华区",130903:"运河区",130921:"沧县",130922:"青县",130923:"东光县",130924:"海兴县",130925:"盐山县",130926:"肃宁县",130927:"南皮县",130928:"吴桥县",130929:"献县",130930:"孟村回族自治县",130981:"泊头市",130982:"任丘市",130983:"黄骅市",130984:"河间市"},131e3:{131002:"安次区",131003:"广阳区",131022:"固安县",131023:"永清县",131024:"香河县",131025:"大城县",131026:"文安县",131028:"大厂回族自治县",131081:"霸州市",131082:"三河市"},131100:{131102:"桃城区",131103:"冀州区",131121:"枣强县",131122:"武邑县",131123:"武强县",131124:"饶阳县",131125:"安平县",131126:"故城县",131127:"景县",131128:"阜城县",131182:"深州市"},139001:{1390011:"留早镇",13900111:"邢邑镇",139001001:"南城区街道",139001002:"北城区街道",139001003:"西城区街道",139001004:"长安路街道",139001101:"清风店镇",139001102:"庞村镇",139001103:"砖路镇",139001104:"明月店镇",139001105:"叮咛店镇",139001106:"东亭镇",139001107:"大辛庄镇",139001108:"东旺镇",139001109:"高蓬镇",139001111:"李亲顾镇",139001112:"子位镇",139001113:"开元镇",139001115:"周村镇",139001116:"息冢镇",139001203:"东留春乡",139001204:"号头庄回族乡",139001205:"杨家庄乡",139001206:"大鹿庄乡",139001208:"西城乡"},139002:{1390021:"辛集镇",1390022:"天宫营乡",1390025:"辛集经济开发区",139002101:"旧城镇",139002102:"张古庄镇",139002103:"位伯镇",139002104:"新垒头镇",139002105:"新城镇",139002106:"南智邱镇",139002107:"王口镇",139002201:"前营乡",139002202:"马庄乡",139002203:"和睦井乡",139002204:"田家庄乡",139002205:"中里厢乡",139002206:"小辛庄乡"},14e4:{140100:"太原市",140200:"大同市",140300:"阳泉市",140400:"长治市",140500:"晋城市",140600:"朔州市",140700:"晋中市",140800:"运城市",140900:"忻州市",141e3:"临汾市",141100:"吕梁市"},140100:{140105:"小店区",140106:"迎泽区",140107:"杏花岭区",140108:"尖草坪区",140109:"万柏林区",140110:"晋源区",140121:"清徐县",140122:"阳曲县",140123:"娄烦县",140181:"古交市"},140200:{140202:"城区",140203:"矿区",140211:"南郊区",140212:"新荣区",140221:"阳高县",140222:"天镇县",140223:"广灵县",140224:"灵丘县",140225:"浑源县",140226:"左云县",140227:"大同县"},140300:{140302:"城区",140303:"矿区",140311:"郊区",140321:"平定县",140322:"盂县"},140400:{140402:"城区",140411:"郊区",140421:"长治县",140423:"襄垣县",140424:"屯留县",140425:"平顺县",140426:"黎城县",140427:"壶关县",140428:"长子县",140429:"武乡县",140430:"沁县",140431:"沁源县",140481:"潞城市"},140500:{140502:"城区",140521:"沁水县",140522:"阳城县",140524:"陵川县",140525:"泽州县",140581:"高平市"},140600:{140602:"朔城区",140603:"平鲁区",140621:"山阴县",140622:"应县",140623:"右玉县",140624:"怀仁县"},140700:{140702:"榆次区",140721:"榆社县",140722:"左权县",140723:"和顺县",140724:"昔阳县",140725:"寿阳县",140726:"太谷县",140727:"祁县",140728:"平遥县",140729:"灵石县",140781:"介休市"},140800:{140802:"盐湖区",140821:"临猗县",140822:"万荣县",140823:"闻喜县",140824:"稷山县",140825:"新绛县",140826:"绛县",140827:"垣曲县",140828:"夏县",140829:"平陆县",140830:"芮城县",140881:"永济市",140882:"河津市"},140900:{140902:"忻府区",140921:"定襄县",140922:"五台县",140923:"代县",140924:"繁峙县",140925:"宁武县",140926:"静乐县",140927:"神池县",140928:"五寨县",140929:"岢岚县",140930:"河曲县",140931:"保德县",140932:"偏关县",140981:"原平市"},141e3:{141002:"尧都区",141021:"曲沃县",141022:"翼城县",141023:"襄汾县",141024:"洪洞县",141025:"古县",141026:"安泽县",141027:"浮山县",141028:"吉县",141029:"乡宁县",141030:"大宁县",141031:"隰县",141032:"永和县",141033:"蒲县",141034:"汾西县",141081:"侯马市",141082:"霍州市"},141100:{141102:"离石区",141121:"文水县",141122:"交城县",141123:"兴县",141124:"临县",141125:"柳林县",141126:"石楼县",141127:"岚县",141128:"方山县",141129:"中阳县",141130:"交口县",141181:"孝义市",141182:"汾阳市"},15e4:{150100:"呼和浩特市",150200:"包头市",150300:"乌海市",150400:"赤峰市",150500:"通辽市",150600:"鄂尔多斯市",150700:"呼伦贝尔市",150800:"巴彦淖尔市",150900:"乌兰察布市",152200:"兴安盟",152500:"锡林郭勒盟",152900:"阿拉善盟"},150100:{150102:"新城区",150103:"回民区",150104:"玉泉区",150105:"赛罕区",150121:"土默特左旗",150122:"托克托县",150123:"和林格尔县",150124:"清水河县",150125:"武川县"},150200:{150202:"东河区",150203:"昆都仑区",150204:"青山区",150205:"石拐区",150206:"白云鄂博矿区",150207:"九原区",150221:"土默特右旗",150222:"固阳县",150223:"达尔罕茂明安联合旗"},150300:{150302:"海勃湾区",150303:"海南区",150304:"乌达区"},150400:{150402:"红山区",150403:"元宝山区",150404:"松山区",150421:"阿鲁科尔沁旗",150422:"巴林左旗",150423:"巴林右旗",150424:"林西县",150425:"克什克腾旗",150426:"翁牛特旗",150428:"喀喇沁旗",150429:"宁城县",150430:"敖汉旗"},150500:{150502:"科尔沁区",150521:"科尔沁左翼中旗",150522:"科尔沁左翼后旗",150523:"开鲁县",150524:"库伦旗",150525:"奈曼旗",150526:"扎鲁特旗",150581:"霍林郭勒市"},150600:{150602:"东胜区",150603:"康巴什区",150621:"达拉特旗",150622:"准格尔旗",150623:"鄂托克前旗",150624:"鄂托克旗",150625:"杭锦旗",150626:"乌审旗",150627:"伊金霍洛旗"},150700:{150702:"海拉尔区",150703:"扎赉诺尔区",150721:"阿荣旗",150722:"莫力达瓦达斡尔族自治旗",150723:"鄂伦春自治旗",150724:"鄂温克族自治旗",150725:"陈巴尔虎旗",150726:"新巴尔虎左旗",150727:"新巴尔虎右旗",150781:"满洲里市",150782:"牙克石市",150783:"扎兰屯市",150784:"额尔古纳市",150785:"根河市"},150800:{150802:"临河区",150821:"五原县",150822:"磴口县",150823:"乌拉特前旗",150824:"乌拉特中旗",150825:"乌拉特后旗",150826:"杭锦后旗"},150900:{150902:"集宁区",150921:"卓资县",150922:"化德县",150923:"商都县",150924:"兴和县",150925:"凉城县",150926:"察哈尔右翼前旗",150927:"察哈尔右翼中旗",150928:"察哈尔右翼后旗",150929:"四子王旗",150981:"丰镇市"},152200:{152201:"乌兰浩特市",152202:"阿尔山市",152221:"科尔沁右翼前旗",152222:"科尔沁右翼中旗",152223:"扎赉特旗",152224:"突泉县"},152500:{152501:"二连浩特市",152502:"锡林浩特市",152522:"阿巴嘎旗",152523:"苏尼特左旗",152524:"苏尼特右旗",152525:"东乌珠穆沁旗",152526:"西乌珠穆沁旗",152527:"太仆寺旗",152528:"镶黄旗",152529:"正镶白旗",152530:"正蓝旗",152531:"多伦县"},152900:{152921:"阿拉善左旗",152922:"阿拉善右旗",152923:"额济纳旗"},21e4:{210100:"沈阳市",210200:"大连市",210300:"鞍山市",210400:"抚顺市",210500:"本溪市",210600:"丹东市",210700:"锦州市",210800:"营口市",210900:"阜新市",211e3:"辽阳市",211100:"盘锦市",211200:"铁岭市",211300:"朝阳市",211400:"葫芦岛市"},210100:{210102:"和平区",210103:"沈河区",210104:"大东区",210105:"皇姑区",210106:"铁西区",210111:"苏家屯区",210112:"浑南区",210113:"沈北新区",210114:"于洪区",210115:"辽中区",210123:"康平县",210124:"法库县",210181:"新民市"},210200:{210202:"中山区",210203:"西岗区",210204:"沙河口区",210211:"甘井子区",210212:"旅顺口区",210213:"金州区",210214:"普兰店区",210224:"长海县",210281:"瓦房店市",210283:"庄河市"},210300:{210302:"铁东区",210303:"铁西区",210304:"立山区",210311:"千山区",210321:"台安县",210323:"岫岩满族自治县",210381:"海城市"},210400:{210402:"新抚区",210403:"东洲区",210404:"望花区",210411:"顺城区",210421:"抚顺县",210422:"新宾满族自治县",210423:"清原满族自治县"},210500:{210502:"平山区",210503:"溪湖区",210504:"明山区",210505:"南芬区",210521:"本溪满族自治县",210522:"桓仁满族自治县"},210600:{210602:"元宝区",210603:"振兴区",210604:"振安区",210624:"宽甸满族自治县",210681:"东港市",210682:"凤城市"},210700:{210702:"古塔区",210703:"凌河区",210711:"太和区",210726:"黑山县",210727:"义县",210781:"凌海市",210782:"北镇市"},210800:{210802:"站前区",210803:"西市区",210804:"鲅鱼圈区",210811:"老边区",210881:"盖州市",210882:"大石桥市"},210900:{210902:"海州区",210903:"新邱区",210904:"太平区",210905:"清河门区",210911:"细河区",210921:"阜新蒙古族自治县",210922:"彰武县"},211e3:{211002:"白塔区",211003:"文圣区",211004:"宏伟区",211005:"弓长岭区",211011:"太子河区",211021:"辽阳县",211081:"灯塔市"},211100:{211102:"双台子区",211103:"兴隆台区",211104:"大洼区",211122:"盘山县"},211200:{211202:"银州区",211204:"清河区",211221:"铁岭县",211223:"西丰县",211224:"昌图县",211281:"调兵山市",211282:"开原市"},211300:{211302:"双塔区",211303:"龙城区",211321:"朝阳县",211322:"建平县",211324:"喀喇沁左翼蒙古族自治县",211381:"北票市",211382:"凌源市"},211400:{211402:"连山区",211403:"龙港区",211404:"南票区",211421:"绥中县",211422:"建昌县",211481:"兴城市"},22e4:{220100:"长春市",220200:"吉林市",220300:"四平市",220400:"辽源市",220500:"通化市",220600:"白山市",220700:"松原市",220800:"白城市",222400:"延边朝鲜族自治州"},220100:{220102:"南关区",220103:"宽城区",220104:"朝阳区",220105:"二道区",220106:"绿园区",220112:"双阳区",220113:"九台区",220122:"农安县",220182:"榆树市",220183:"德惠市"},220200:{220202:"昌邑区",220203:"龙潭区",220204:"船营区",220211:"丰满区",220221:"永吉县",220281:"蛟河市",220282:"桦甸市",220283:"舒兰市",220284:"磐石市"},220300:{220302:"铁西区",220303:"铁东区",220322:"梨树县",220323:"伊通满族自治县",220381:"公主岭市",220382:"双辽市"},220400:{220402:"龙山区",220403:"西安区",220421:"东丰县",220422:"东辽县"},220500:{220502:"东昌区",220503:"二道江区",220521:"通化县",220523:"辉南县",220524:"柳河县",220581:"梅河口市",220582:"集安市"},220600:{220602:"浑江区",220605:"江源区",220621:"抚松县",220622:"靖宇县",220623:"长白朝鲜族自治县",220681:"临江市"},220700:{220702:"宁江区",220721:"前郭尔罗斯蒙古族自治县",220722:"长岭县",220723:"乾安县",220781:"扶余市"},220800:{220802:"洮北区",220821:"镇赉县",220822:"通榆县",220881:"洮南市",220882:"大安市"},222400:{222401:"延吉市",222402:"图们市",222403:"敦化市",222404:"珲春市",222405:"龙井市",222406:"和龙市",222424:"汪清县",222426:"安图县"},23e4:{230100:"哈尔滨市",230200:"齐齐哈尔市",230300:"鸡西市",230400:"鹤岗市",230500:"双鸭山市",230600:"大庆市",230700:"伊春市",230800:"佳木斯市",230900:"七台河市",231e3:"牡丹江市",231100:"黑河市",231200:"绥化市",232700:"大兴安岭地区"},230100:{230102:"道里区",230103:"南岗区",230104:"道外区",230108:"平房区",230109:"松北区",230110:"香坊区",230111:"呼兰区",230112:"阿城区",230113:"双城区",230123:"依兰县",230124:"方正县",230125:"宾县",230126:"巴彦县",230127:"木兰县",230128:"通河县",230129:"延寿县",230183:"尚志市",230184:"五常市"},230200:{230202:"龙沙区",230203:"建华区",230204:"铁锋区",230205:"昂昂溪区",230206:"富拉尔基区",230207:"碾子山区",230208:"梅里斯达斡尔族区",230221:"龙江县",230223:"依安县",230224:"泰来县",230225:"甘南县",230227:"富裕县",230229:"克山县",230230:"克东县",230231:"拜泉县",230281:"讷河市"},230300:{230302:"鸡冠区",230303:"恒山区",230304:"滴道区",230305:"梨树区",230306:"城子河区",230307:"麻山区",230321:"鸡东县",230381:"虎林市",230382:"密山市"},230400:{230402:"向阳区",230403:"工农区",230404:"南山区",230405:"兴安区",230406:"东山区",230407:"兴山区",230421:"萝北县",230422:"绥滨县"},230500:{230502:"尖山区",230503:"岭东区",230505:"四方台区",230506:"宝山区",230521:"集贤县",230522:"友谊县",230523:"宝清县",230524:"饶河县"},230600:{230602:"萨尔图区",230603:"龙凤区",230604:"让胡路区",230605:"红岗区",230606:"大同区",230621:"肇州县",230622:"肇源县",230623:"林甸县",230624:"杜尔伯特蒙古族自治县"},230700:{230702:"伊春区",230703:"南岔区",230704:"友好区",230705:"西林区",230706:"翠峦区",230707:"新青区",230708:"美溪区",230709:"金山屯区",230710:"五营区",230711:"乌马河区",230712:"汤旺河区",230713:"带岭区",230714:"乌伊岭区",230715:"红星区",230716:"上甘岭区",230722:"嘉荫县",230781:"铁力市"},230800:{230803:"向阳区",230804:"前进区",230805:"东风区",230811:"郊区",230822:"桦南县",230826:"桦川县",230828:"汤原县",230881:"同江市",230882:"富锦市",230883:"抚远市"},230900:{230902:"新兴区",230903:"桃山区",230904:"茄子河区",230921:"勃利县"},231e3:{231002:"东安区",231003:"阳明区",231004:"爱民区",231005:"西安区",231025:"林口县",231081:"绥芬河市",231083:"海林市",231084:"宁安市",231085:"穆棱市",231086:"东宁市"},231100:{231102:"爱辉区",231121:"嫩江县",231123:"逊克县",231124:"孙吴县",231181:"北安市",231182:"五大连池市"},231200:{231202:"北林区",231221:"望奎县",231222:"兰西县",231223:"青冈县",231224:"庆安县",231225:"明水县",231226:"绥棱县",231281:"安达市",231282:"肇东市",231283:"海伦市"},232700:{232721:"呼玛县",232722:"塔河县",232723:"漠河县"},31e4:{310100:"市辖区"},310100:{310101:"黄浦区",310104:"徐汇区",310105:"长宁区",310106:"静安区",310107:"普陀区",310109:"虹口区",310110:"杨浦区",310112:"闵行区",310113:"宝山区",310114:"嘉定区",310115:"浦东新区",310116:"金山区",310117:"松江区",310118:"青浦区",310120:"奉贤区",310151:"崇明区"},32e4:{320100:"南京市",320200:"无锡市",320300:"徐州市",320400:"常州市",320500:"苏州市",320600:"南通市",320700:"连云港市",320800:"淮安市",320900:"盐城市",321e3:"扬州市",321100:"镇江市",321200:"泰州市",321300:"宿迁市"},320100:{320102:"玄武区",320104:"秦淮区",320105:"建邺区",320106:"鼓楼区",320111:"浦口区",320113:"栖霞区",320114:"雨花台区",320115:"江宁区",320116:"六合区",320117:"溧水区",320118:"高淳区"},320200:{320205:"锡山区",320206:"惠山区",320211:"滨湖区",320213:"梁溪区",320214:"新吴区",320281:"江阴市",320282:"宜兴市"},320300:{320302:"鼓楼区",320303:"云龙区",320305:"贾汪区",320311:"泉山区",320312:"铜山区",320321:"丰县",320322:"沛县",320324:"睢宁县",320381:"新沂市",320382:"邳州市"},320400:{320402:"天宁区",320404:"钟楼区",320411:"新北区",320412:"武进区",320413:"金坛区",320481:"溧阳市"},320500:{320505:"虎丘区",320506:"吴中区",320507:"相城区",320508:"姑苏区",320509:"吴江区",320581:"常熟市",320582:"张家港市",320583:"昆山市",320585:"太仓市"},320600:{320602:"崇川区",320611:"港闸区",320612:"通州区",320621:"海安县",320623:"如东县",320681:"启东市",320682:"如皋市",320684:"海门市"},320700:{320703:"连云区",320706:"海州区",320707:"赣榆区",320722:"东海县",320723:"灌云县",320724:"灌南县"},320800:{320803:"淮安区",320804:"淮阴区",320812:"清江浦区",320813:"洪泽区",320826:"涟水县",320830:"盱眙县",320831:"金湖县"},320900:{320902:"亭湖区",320903:"盐都区",320904:"大丰区",320921:"响水县",320922:"滨海县",320923:"阜宁县",320924:"射阳县",320925:"建湖县",320981:"东台市"},321e3:{321002:"广陵区",321003:"邗江区",321012:"江都区",321023:"宝应县",321081:"仪征市",321084:"高邮市"},321100:{321102:"京口区",321111:"润州区",321112:"丹徒区",321181:"丹阳市",321182:"扬中市",321183:"句容市"},321200:{321202:"海陵区",321203:"高港区",321204:"姜堰区",321281:"兴化市",321282:"靖江市",321283:"泰兴市"},321300:{321302:"宿城区",321311:"宿豫区",321322:"沭阳县",321323:"泗阳县",321324:"泗洪县"},33e4:{330100:"杭州市",330200:"宁波市",330300:"温州市",330400:"嘉兴市",330500:"湖州市",330600:"绍兴市",330700:"金华市",330800:"衢州市",330900:"舟山市",331e3:"台州市",331100:"丽水市"},330100:{330102:"上城区",330103:"下城区",330104:"江干区",330105:"拱墅区",330106:"西湖区",330108:"滨江区",330109:"萧山区",330110:"余杭区",330111:"富阳区",330122:"桐庐县",330127:"淳安县",330182:"建德市",330185:"临安市"},330200:{330203:"海曙区",330204:"江东区",330205:"江北区",330206:"北仑区",330211:"镇海区",330212:"鄞州区",330225:"象山县",330226:"宁海县",330281:"余姚市",330282:"慈溪市",330283:"奉化市"},330300:{330302:"鹿城区",330303:"龙湾区",330304:"瓯海区",330305:"洞头区",330324:"永嘉县",330326:"平阳县",330327:"苍南县",330328:"文成县",330329:"泰顺县",330381:"瑞安市",330382:"乐清市"},330400:{330402:"南湖区",330411:"秀洲区",330421:"嘉善县",330424:"海盐县",330481:"海宁市",330482:"平湖市",330483:"桐乡市"},330500:{330502:"吴兴区",330503:"南浔区",330521:"德清县",330522:"长兴县",330523:"安吉县"},330600:{330602:"越城区",330603:"柯桥区",330604:"上虞区",330624:"新昌县",330681:"诸暨市",330683:"嵊州市"},330700:{330702:"婺城区",330703:"金东区",330723:"武义县",330726:"浦江县",330727:"磐安县",330781:"兰溪市",330782:"义乌市",330783:"东阳市",330784:"永康市"},330800:{330802:"柯城区",330803:"衢江区",330822:"常山县",330824:"开化县",330825:"龙游县",330881:"江山市"},330900:{330902:"定海区",330903:"普陀区",330921:"岱山县",330922:"嵊泗县"},331e3:{331002:"椒江区",331003:"黄岩区",331004:"路桥区",331021:"玉环县",331022:"三门县",331023:"天台县",331024:"仙居县",331081:"温岭市",331082:"临海市"},331100:{331102:"莲都区",331121:"青田县",331122:"缙云县",331123:"遂昌县",331124:"松阳县",331125:"云和县",331126:"庆元县",331127:"景宁畲族自治县",331181:"龙泉市"},34e4:{340100:"合肥市",340200:"芜湖市",340300:"蚌埠市",340400:"淮南市",340500:"马鞍山市",340600:"淮北市",340700:"铜陵市",340800:"安庆市",341e3:"黄山市",341100:"滁州市",341200:"阜阳市",341300:"宿州市",341500:"六安市",341600:"亳州市",341700:"池州市",341800:"宣城市"},340100:{340102:"瑶海区",340103:"庐阳区",340104:"蜀山区",340111:"包河区",340121:"长丰县",340122:"肥东县",340123:"肥西县",340124:"庐江县",340181:"巢湖市"},340200:{340202:"镜湖区",340203:"弋江区",340207:"鸠江区",340208:"三山区",340221:"芜湖县",340222:"繁昌县",340223:"南陵县",340225:"无为县"},340300:{340302:"龙子湖区",340303:"蚌山区",340304:"禹会区",340311:"淮上区",340321:"怀远县",340322:"五河县",340323:"固镇县"},340400:{340402:"大通区",340403:"田家庵区",340404:"谢家集区",340405:"八公山区",340406:"潘集区",340421:"凤台县",340422:"寿县"},340500:{340503:"花山区",340504:"雨山区",340506:"博望区",340521:"当涂县",340522:"含山县",340523:"和县"},340600:{340602:"杜集区",340603:"相山区",340604:"烈山区",340621:"濉溪县"},340700:{340705:"铜官区",340706:"义安区",340711:"郊区",340722:"枞阳县"},340800:{340802:"迎江区",340803:"大观区",340811:"宜秀区",340822:"怀宁县",340824:"潜山县",340825:"太湖县",340826:"宿松县",340827:"望江县",340828:"岳西县",340881:"桐城市"},341e3:{341002:"屯溪区",341003:"黄山区",341004:"徽州区",341021:"歙县",341022:"休宁县",341023:"黟县",341024:"祁门县"},341100:{341102:"琅琊区",341103:"南谯区",341122:"来安县",341124:"全椒县",341125:"定远县",341126:"凤阳县",341181:"天长市",341182:"明光市"},341200:{341202:"颍州区",341203:"颍东区",341204:"颍泉区",341221:"临泉县",341222:"太和县",341225:"阜南县",341226:"颍上县",341282:"界首市"},341300:{341302:"埇桥区",341321:"砀山县",341322:"萧县",341323:"灵璧县",341324:"泗县"},341500:{341502:"金安区",341503:"裕安区",341504:"叶集区",341522:"霍邱县",341523:"舒城县",341524:"金寨县",341525:"霍山县"},341600:{341602:"谯城区",341621:"涡阳县",341622:"蒙城县",341623:"利辛县"},341700:{341702:"贵池区",341721:"东至县",341722:"石台县",341723:"青阳县"},341800:{341802:"宣州区",341821:"郎溪县",341822:"广德县",341823:"泾县",341824:"绩溪县",341825:"旌德县",341881:"宁国市"},35e4:{350100:"福州市",350200:"厦门市",350300:"莆田市",350400:"三明市",350500:"泉州市",350600:"漳州市",350700:"南平市",350800:"龙岩市",350900:"宁德市"},350100:{350102:"鼓楼区",350103:"台江区",350104:"仓山区",350105:"马尾区",350111:"晋安区",350121:"闽侯县",350122:"连江县",350123:"罗源县",350124:"闽清县",350125:"永泰县",350128:"平潭县",350181:"福清市",350182:"长乐市"},350200:{350203:"思明区",350205:"海沧区",350206:"湖里区",350211:"集美区",350212:"同安区",350213:"翔安区"},350300:{350302:"城厢区",350303:"涵江区",350304:"荔城区",350305:"秀屿区",350322:"仙游县"},350400:{350402:"梅列区",350403:"三元区",350421:"明溪县",350423:"清流县",350424:"宁化县",350425:"大田县",350426:"尤溪县",350427:"沙县",350428:"将乐县",350429:"泰宁县",350430:"建宁县",350481:"永安市"},350500:{350502:"鲤城区",350503:"丰泽区",350504:"洛江区",350505:"泉港区",350521:"惠安县",350524:"安溪县",350525:"永春县",350526:"德化县",350527:"金门县",350581:"石狮市",350582:"晋江市",350583:"南安市"},350600:{350602:"芗城区",350603:"龙文区",350622:"云霄县",350623:"漳浦县",350624:"诏安县",350625:"长泰县",350626:"东山县",350627:"南靖县",350628:"平和县",350629:"华安县",350681:"龙海市"},350700:{350702:"延平区",350703:"建阳区",350721:"顺昌县",350722:"浦城县",350723:"光泽县",350724:"松溪县",350725:"政和县",350781:"邵武市",350782:"武夷山市",350783:"建瓯市"},350800:{350802:"新罗区",350803:"永定区",350821:"长汀县",350823:"上杭县",350824:"武平县",350825:"连城县",350881:"漳平市"},350900:{350902:"蕉城区",350921:"霞浦县",350922:"古田县",350923:"屏南县",350924:"寿宁县",350925:"周宁县",350926:"柘荣县",350981:"福安市",350982:"福鼎市"},36e4:{360100:"南昌市",360200:"景德镇市",360300:"萍乡市",360400:"九江市",360500:"新余市",360600:"鹰潭市",360700:"赣州市",360800:"吉安市",360900:"宜春市",361e3:"抚州市",361100:"上饶市"},360100:{360102:"东湖区",360103:"西湖区",360104:"青云谱区",360105:"湾里区",360111:"青山湖区",360112:"新建区",360121:"南昌县",360123:"安义县",360124:"进贤县"},360200:{360202:"昌江区",360203:"珠山区",360222:"浮梁县",360281:"乐平市"},360300:{360302:"安源区",360313:"湘东区",360321:"莲花县",360322:"上栗县",360323:"芦溪县"},360400:{360402:"濂溪区",360403:"浔阳区",360421:"九江县",360423:"武宁县",360424:"修水县",360425:"永修县",360426:"德安县",360428:"都昌县",360429:"湖口县",360430:"彭泽县",360481:"瑞昌市",360482:"共青城市",360483:"庐山市"},360500:{360502:"渝水区",360521:"分宜县"},360600:{360602:"月湖区",360622:"余江县",360681:"贵溪市"},360700:{360702:"章贡区",360703:"南康区",360721:"赣县",360722:"信丰县",360723:"大余县",360724:"上犹县",360725:"崇义县",360726:"安远县",360727:"龙南县",360728:"定南县",360729:"全南县",360730:"宁都县",360731:"于都县",360732:"兴国县",360733:"会昌县",360734:"寻乌县",360735:"石城县",360781:"瑞金市"},360800:{360802:"吉州区",360803:"青原区",360821:"吉安县",360822:"吉水县",360823:"峡江县",360824:"新干县",360825:"永丰县",360826:"泰和县",360827:"遂川县",360828:"万安县",360829:"安福县",360830:"永新县",360881:"井冈山市"},360900:{360902:"袁州区",360921:"奉新县",360922:"万载县",360923:"上高县",360924:"宜丰县",360925:"靖安县",360926:"铜鼓县",360981:"丰城市",360982:"樟树市",360983:"高安市"},361e3:{361002:"临川区",361021:"南城县",361022:"黎川县",361023:"南丰县",361024:"崇仁县",361025:"乐安县",361026:"宜黄县",361027:"金溪县",361028:"资溪县",361029:"东乡县",361030:"广昌县"},361100:{361102:"信州区",361103:"广丰区",361121:"上饶县",361123:"玉山县",361124:"铅山县",361125:"横峰县",361126:"弋阳县",361127:"余干县",361128:"鄱阳县",361129:"万年县",361130:"婺源县",361181:"德兴市"},37e4:{370100:"济南市",370200:"青岛市",370300:"淄博市",370400:"枣庄市",370500:"东营市",370600:"烟台市",370700:"潍坊市",370800:"济宁市",370900:"泰安市",371e3:"威海市",371100:"日照市",371200:"莱芜市",371300:"临沂市",371400:"德州市",371500:"聊城市",371600:"滨州市",371700:"菏泽市"},370100:{370102:"历下区",370103:"市中区",370104:"槐荫区",370105:"天桥区",370112:"历城区",370113:"长清区",370124:"平阴县",370125:"济阳县",370126:"商河县",370181:"章丘市"},370200:{370202:"市南区",370203:"市北区",370211:"黄岛区",370212:"崂山区",370213:"李沧区",370214:"城阳区",370281:"胶州市",370282:"即墨市",370283:"平度市",370285:"莱西市"},370300:{370302:"淄川区",370303:"张店区",370304:"博山区",370305:"临淄区",370306:"周村区",370321:"桓台县",370322:"高青县",370323:"沂源县"},370400:{370402:"市中区",370403:"薛城区",370404:"峄城区",370405:"台儿庄区",370406:"山亭区",370481:"滕州市"},370500:{370502:"东营区",370503:"河口区",370505:"垦利区",370522:"利津县",370523:"广饶县"},370600:{370602:"芝罘区",370611:"福山区",370612:"牟平区",370613:"莱山区",370634:"长岛县",370681:"龙口市",370682:"莱阳市",370683:"莱州市",370684:"蓬莱市",370685:"招远市",370686:"栖霞市",370687:"海阳市"},370700:{370702:"潍城区",370703:"寒亭区",370704:"坊子区",370705:"奎文区",370724:"临朐县",370725:"昌乐县",370781:"青州市",370782:"诸城市",370783:"寿光市",370784:"安丘市",370785:"高密市",370786:"昌邑市"},370800:{370811:"任城区",370812:"兖州区",370826:"微山县",370827:"鱼台县",370828:"金乡县",370829:"嘉祥县",370830:"汶上县",370831:"泗水县",370832:"梁山县",370881:"曲阜市",370883:"邹城市"},370900:{370902:"泰山区",370911:"岱岳区",370921:"宁阳县",370923:"东平县",370982:"新泰市",370983:"肥城市"},371e3:{371002:"环翠区",371003:"文登区",371082:"荣成市",371083:"乳山市"},371100:{371102:"东港区",371103:"岚山区",371121:"五莲县",371122:"莒县"},371200:{371202:"莱城区",371203:"钢城区"},371300:{371302:"兰山区",371311:"罗庄区",371312:"河东区",371321:"沂南县",371322:"郯城县",371323:"沂水县",371324:"兰陵县",371325:"费县",371326:"平邑县",371327:"莒南县",371328:"蒙阴县",371329:"临沭县"},371400:{371402:"德城区",371403:"陵城区",371422:"宁津县",371423:"庆云县",371424:"临邑县",371425:"齐河县",371426:"平原县",371427:"夏津县",371428:"武城县",371481:"乐陵市",371482:"禹城市"},371500:{371502:"东昌府区",371521:"阳谷县",371522:"莘县",371523:"茌平县",371524:"东阿县",371525:"冠县",371526:"高唐县",371581:"临清市"},371600:{371602:"滨城区",371603:"沾化区",371621:"惠民县",371622:"阳信县",371623:"无棣县",371625:"博兴县",371626:"邹平县"},371700:{371702:"牡丹区",371703:"定陶区",371721:"曹县",371722:"单县",371723:"成武县",371724:"巨野县",371725:"郓城县",371726:"鄄城县",371728:"东明县"},41e4:{410100:"郑州市",410200:"开封市",410300:"洛阳市",410400:"平顶山市",410500:"安阳市",410600:"鹤壁市",410700:"新乡市",410800:"焦作市",410900:"濮阳市",411e3:"许昌市",411100:"漯河市",411200:"三门峡市",411300:"南阳市",411400:"商丘市",411500:"信阳市",411600:"周口市",411700:"驻马店市",419001:"济源市"},410100:{410102:"中原区",410103:"二七区",410104:"管城回族区",410105:"金水区",410106:"上街区",410108:"惠济区",410122:"中牟县",410181:"巩义市",410182:"荥阳市",410183:"新密市",410184:"新郑市",410185:"登封市"},410200:{410202:"龙亭区",410203:"顺河回族区",410204:"鼓楼区",410205:"禹王台区",410211:"金明区",410212:"祥符区",410221:"杞县",410222:"通许县",410223:"尉氏县",410225:"兰考县"},410300:{410302:"老城区",410303:"西工区",410304:"瀍河回族区",410305:"涧西区",410306:"吉利区",410311:"洛龙区",410322:"孟津县",410323:"新安县",410324:"栾川县",410325:"嵩县",410326:"汝阳县",410327:"宜阳县",410328:"洛宁县",410329:"伊川县",410381:"偃师市"},410400:{410402:"新华区",410403:"卫东区",410404:"石龙区",410411:"湛河区",410421:"宝丰县",410422:"叶县",410423:"鲁山县",410425:"郏县",410481:"舞钢市",410482:"汝州市"},410500:{410502:"文峰区",410503:"北关区",410505:"殷都区",410506:"龙安区",410522:"安阳县",410523:"汤阴县",410526:"滑县",410527:"内黄县",410581:"林州市"},410600:{410602:"鹤山区",410603:"山城区",410611:"淇滨区",410621:"浚县",410622:"淇县"},410700:{410702:"红旗区",410703:"卫滨区",410704:"凤泉区",410711:"牧野区",410721:"新乡县",410724:"获嘉县",410725:"原阳县",410726:"延津县",410727:"封丘县",410728:"长垣县",410781:"卫辉市",410782:"辉县市"},410800:{410802:"解放区",410803:"中站区",410804:"马村区",410811:"山阳区",410821:"修武县",410822:"博爱县",410823:"武陟县",410825:"温县",410882:"沁阳市",410883:"孟州市"},410900:{410902:"华龙区",410922:"清丰县",410923:"南乐县",410926:"范县",410927:"台前县",410928:"濮阳县"},411e3:{411002:"魏都区",411023:"许昌县",411024:"鄢陵县",411025:"襄城县",411081:"禹州市",411082:"长葛市"},411100:{411102:"源汇区",411103:"郾城区",411104:"召陵区",411121:"舞阳县",411122:"临颍县"},411200:{411202:"湖滨区",411203:"陕州区",411221:"渑池县",411224:"卢氏县",411281:"义马市",411282:"灵宝市"},411300:{411302:"宛城区",411303:"卧龙区",411321:"南召县",411322:"方城县",411323:"西峡县",411324:"镇平县",411325:"内乡县",411326:"淅川县",411327:"社旗县",411328:"唐河县",411329:"新野县",411330:"桐柏县",411381:"邓州市"},411400:{411402:"梁园区",411403:"睢阳区",411421:"民权县",411422:"睢县",411423:"宁陵县",411424:"柘城县",411425:"虞城县",411426:"夏邑县",411481:"永城市"},411500:{411502:"浉河区",411503:"平桥区",411521:"罗山县",411522:"光山县",411523:"新县",411524:"商城县",411525:"固始县",411526:"潢川县",411527:"淮滨县",411528:"息县"},411600:{411602:"川汇区",411621:"扶沟县",411622:"西华县",411623:"商水县",411624:"沈丘县",411625:"郸城县",411626:"淮阳县",411627:"太康县",411628:"鹿邑县",411681:"项城市"},411700:{411702:"驿城区",411721:"西平县",411722:"上蔡县",411723:"平舆县",411724:"正阳县",411725:"确山县",411726:"泌阳县",411727:"汝南县",411728:"遂平县",411729:"新蔡县"},419001:{4190011:"济源市克井镇",41900111:"济源市下冶镇",419001001:"济源市沁园街道",419001002:"济源市济水街道",419001003:"济源市北海街道",419001004:"济源市天坛街道",419001005:"济源市玉泉街道",419001101:"济源市五龙口镇",419001102:"济源市轵城镇",419001103:"济源市承留镇",419001104:"济源市邵原镇",419001105:"济源市坡头镇",419001106:"济源市梨林镇",419001107:"济源市大峪镇",419001108:"济源市思礼镇",419001109:"济源市王屋镇"},42e4:{420100:"武汉市",420200:"黄石市",420300:"十堰市",420500:"宜昌市",420600:"襄阳市",420700:"鄂州市",420800:"荆门市",420900:"孝感市",421e3:"荆州市",421100:"黄冈市",421200:"咸宁市",421300:"随州市",422800:"恩施土家族苗族自治州",429004:"仙桃市",429005:"潜江市",429006:"天门市",429021:"神农架林区"},420100:{420102:"江岸区",420103:"江汉区",420104:"硚口区",420105:"汉阳区",420106:"武昌区",420107:"青山区",420111:"洪山区",420112:"东西湖区",420113:"汉南区",420114:"蔡甸区",420115:"江夏区",420116:"黄陂区",420117:"新洲区"},420200:{420202:"黄石港区",420203:"西塞山区",420204:"下陆区",420205:"铁山区",420222:"阳新县",420281:"大冶市"},420300:{420302:"茅箭区",420303:"张湾区",420304:"郧阳区",420322:"郧西县",420323:"竹山县",420324:"竹溪县",420325:"房县",420381:"丹江口市"},420500:{420502:"西陵区",420503:"伍家岗区",420504:"点军区",420505:"猇亭区",420506:"夷陵区",420525:"远安县",420526:"兴山县",420527:"秭归县",420528:"长阳土家族自治县",420529:"五峰土家族自治县",420581:"宜都市",420582:"当阳市",420583:"枝江市"},420600:{420602:"襄城区",420606:"樊城区",420607:"襄州区",420624:"南漳县",420625:"谷城县",420626:"保康县",420682:"老河口市",420683:"枣阳市",420684:"宜城市"},420700:{420702:"梁子湖区",420703:"华容区",420704:"鄂城区"},420800:{420802:"东宝区",420804:"掇刀区",420821:"京山县",420822:"沙洋县",420881:"钟祥市"},420900:{420902:"孝南区",420921:"孝昌县",420922:"大悟县",420923:"云梦县",420981:"应城市",420982:"安陆市",420984:"汉川市"},421e3:{421002:"沙市区",421003:"荆州区",421022:"公安县",421023:"监利县",421024:"江陵县",421081:"石首市",421083:"洪湖市",421087:"松滋市"},421100:{421102:"黄州区",421121:"团风县",421122:"红安县",421123:"罗田县",421124:"英山县",421125:"浠水县",421126:"蕲春县",421127:"黄梅县",421181:"麻城市",421182:"武穴市"},421200:{421202:"咸安区",421221:"嘉鱼县",421222:"通城县",421223:"崇阳县",421224:"通山县",421281:"赤壁市"},421300:{421303:"曾都区",421321:"随县",421381:"广水市"},422800:{422801:"恩施市",422802:"利川市",422822:"建始县",422823:"巴东县",422825:"宣恩县",422826:"咸丰县",422827:"来凤县",422828:"鹤峰县"},429004:{4290041:"郑场镇",4290044:"工业园区",42900411:"张沟镇",429004001:"沙嘴街道",429004002:"干河街道",429004003:"龙华山",429004101:"毛嘴镇",429004102:"豆河镇",429004103:"三伏潭镇",429004104:"胡场镇",429004105:"长倘口镇",429004106:"西流河镇",429004107:"沙湖镇",429004108:"杨林尾镇",429004109:"彭场镇",429004111:"郭河镇",429004112:"沔城回族镇",429004113:"通海口镇",429004114:"陈场镇",429004401:"九合垸原种场",429004402:"沙湖原种场",429004404:"五湖渔场",429004405:"赵西垸林场",429004407:"畜禽良种场",429004408:"排湖风景区"},429005:{4290051:"竹根滩镇",4290054:"江汉石油管理局",42900545:"周矶管理区",429005001:"园林",429005002:"杨市",429005003:"周矶",429005004:"广华",429005005:"泰丰",429005006:"高场",429005101:"渔洋镇",429005102:"王场镇",429005103:"高石碑镇",429005104:"熊口镇",429005105:"老新镇",429005106:"浩口镇",429005107:"积玉口镇",429005108:"张金镇",429005109:"龙湾镇",429005401:"潜江经济开发区",429005451:"后湖管理区",429005452:"熊口管理区",429005453:"总口管理区",429005454:"白鹭湖管理区",429005455:"运粮湖管理区",429005457:"浩口原种场"},429006:{4290061:"多宝镇",42900611:"麻洋镇",42900612:"石河镇",42900645:"蒋湖农场",429006001:"竟陵街道",429006002:"侨乡街道开发区",429006003:"杨林街道",429006101:"拖市镇",429006102:"张港镇",429006103:"蒋场镇",429006104:"汪场镇",429006105:"渔薪镇",429006106:"黄潭镇",429006107:"岳口镇",429006108:"横林镇",429006109:"彭市镇",429006111:"多祥镇",429006112:"干驿镇",429006113:"马湾镇",429006114:"卢市镇",429006115:"小板镇",429006116:"九真镇",429006118:"皂市镇",429006119:"胡市镇",429006121:"佛子山镇",429006201:"净潭乡",429006451:"白茅湖农场",429006452:"沉湖管委会"},429021:{4290211:"松柏镇",4290212:"宋洛乡",429021101:"阳日镇",429021102:"木鱼镇",429021103:"红坪镇",429021104:"新华镇",429021105:"九湖镇",429021202:"下谷坪土家族乡"},43e4:{430100:"长沙市",430200:"株洲市",430300:"湘潭市",430400:"衡阳市",430500:"邵阳市",430600:"岳阳市",430700:"常德市",430800:"张家界市",430900:"益阳市",431e3:"郴州市",431100:"永州市",431200:"怀化市",431300:"娄底市",433100:"湘西土家族苗族自治州"},430100:{430102:"芙蓉区",430103:"天心区",430104:"岳麓区",430105:"开福区",430111:"雨花区",430112:"望城区",430121:"长沙县",430124:"宁乡县",430181:"浏阳市"},430200:{430202:"荷塘区",430203:"芦淞区",430204:"石峰区",430211:"天元区",430221:"株洲县",430223:"攸县",430224:"茶陵县",430225:"炎陵县",430281:"醴陵市"},430300:{430302:"雨湖区",430304:"岳塘区",430321:"湘潭县",430381:"湘乡市",430382:"韶山市"},430400:{430405:"珠晖区",430406:"雁峰区",430407:"石鼓区",430408:"蒸湘区",430412:"南岳区",430421:"衡阳县",430422:"衡南县",430423:"衡山县",430424:"衡东县",430426:"祁东县",430481:"耒阳市",430482:"常宁市"},430500:{430502:"双清区",430503:"大祥区",430511:"北塔区",430521:"邵东县",430522:"新邵县",430523:"邵阳县",430524:"隆回县",430525:"洞口县",430527:"绥宁县",430528:"新宁县",430529:"城步苗族自治县",430581:"武冈市"},430600:{430602:"岳阳楼区",430603:"云溪区",430611:"君山区",430621:"岳阳县",430623:"华容县",430624:"湘阴县",430626:"平江县",430681:"汨罗市",430682:"临湘市"},430700:{430702:"武陵区",430703:"鼎城区",430721:"安乡县",430722:"汉寿县",430723:"澧县",430724:"临澧县",430725:"桃源县",430726:"石门县",430781:"津市市"},430800:{430802:"永定区",430811:"武陵源区",430821:"慈利县",430822:"桑植县"},430900:{430902:"资阳区",430903:"赫山区",430921:"南县",430922:"桃江县",430923:"安化县",430981:"沅江市"},431e3:{431002:"北湖区",431003:"苏仙区",431021:"桂阳县",431022:"宜章县",431023:"永兴县",431024:"嘉禾县",431025:"临武县",431026:"汝城县",431027:"桂东县",431028:"安仁县",431081:"资兴市"},431100:{431102:"零陵区",431103:"冷水滩区",431121:"祁阳县",431122:"东安县",431123:"双牌县",431124:"道县",431125:"江永县",431126:"宁远县",431127:"蓝山县",431128:"新田县",431129:"江华瑶族自治县"},431200:{431202:"鹤城区",431221:"中方县",431222:"沅陵县",431223:"辰溪县",431224:"溆浦县",431225:"会同县",431226:"麻阳苗族自治县",431227:"新晃侗族自治县",431228:"芷江侗族自治县",431229:"靖州苗族侗族自治县",431230:"通道侗族自治县",431281:"洪江市"},431300:{431302:"娄星区",431321:"双峰县",431322:"新化县",431381:"冷水江市",431382:"涟源市"},433100:{433101:"吉首市",433122:"泸溪县",433123:"凤凰县",433124:"花垣县",433125:"保靖县",433126:"古丈县",433127:"永顺县",433130:"龙山县"},44e4:{440100:"广州市",440200:"韶关市",440300:"深圳市",440400:"珠海市",440500:"汕头市",440600:"佛山市",440700:"江门市",440800:"湛江市",440900:"茂名市",441200:"肇庆市",441300:"惠州市",441400:"梅州市",441500:"汕尾市",441600:"河源市",441700:"阳江市",441800:"清远市",441900:"东莞市",442e3:"中山市",445100:"潮州市",445200:"揭阳市",445300:"云浮市"},440100:{440103:"荔湾区",440104:"越秀区",440105:"海珠区",440106:"天河区",440111:"白云区",440112:"黄埔区",440113:"番禺区",440114:"花都区",440115:"南沙区",440117:"从化区",440118:"增城区"},440200:{440203:"武江区",440204:"浈江区",440205:"曲江区",440222:"始兴县",440224:"仁化县",440229:"翁源县",440232:"乳源瑶族自治县",440233:"新丰县",440281:"乐昌市",440282:"南雄市"},440300:{440303:"罗湖区",440304:"福田区",440305:"南山区",440306:"宝安区",440307:"龙岗区",440308:"盐田区"},440400:{440402:"香洲区",440403:"斗门区",440404:"金湾区"},440500:{440507:"龙湖区",440511:"金平区",440512:"濠江区",440513:"潮阳区",440514:"潮南区",440515:"澄海区",440523:"南澳县"},440600:{440604:"禅城区",440605:"南海区",440606:"顺德区",440607:"三水区",440608:"高明区"},440700:{440703:"蓬江区",440704:"江海区",440705:"新会区",440781:"台山市",440783:"开平市",440784:"鹤山市",440785:"恩平市"},440800:{440802:"赤坎区",440803:"霞山区",440804:"坡头区",440811:"麻章区",440823:"遂溪县",440825:"徐闻县",440881:"廉江市",440882:"雷州市",440883:"吴川市"},440900:{440902:"茂南区",440904:"电白区",440981:"高州市",440982:"化州市",440983:"信宜市"},441200:{441202:"端州区",441203:"鼎湖区",441204:"高要区",441223:"广宁县",441224:"怀集县",441225:"封开县",441226:"德庆县",441284:"四会市"},441300:{441302:"惠城区",441303:"惠阳区",441322:"博罗县",441323:"惠东县",441324:"龙门县"},441400:{441402:"梅江区",441403:"梅县区",441422:"大埔县",441423:"丰顺县",441424:"五华县",441426:"平远县",441427:"蕉岭县",441481:"兴宁市"},441500:{441502:"城区",441521:"海丰县",441523:"陆河县",441581:"陆丰市"},441600:{441602:"源城区",441621:"紫金县",441622:"龙川县",441623:"连平县",441624:"和平县",441625:"东源县"},441700:{441702:"江城区",441704:"阳东区",441721:"阳西县",441781:"阳春市"},441800:{441802:"清城区",441803:"清新区",441821:"佛冈县",441823:"阳山县",441825:"连山壮族瑶族自治县",441826:"连南瑶族自治县",441881:"英德市",441882:"连州市"},441900:{441900003:"东城街道",441900004:"南城街道",441900005:"万江街道",441900006:"莞城街道",441900101:"石碣镇",441900102:"石龙镇",441900103:"茶山镇",441900104:"石排镇",441900105:"企石镇",441900106:"横沥镇",441900107:"桥头镇",441900108:"谢岗镇",441900109:"东坑镇",441900110:"常平镇",441900111:"寮步镇",441900112:"樟木头镇",441900113:"大朗镇",441900114:"黄江镇",441900115:"清溪镇",441900116:"塘厦镇",441900117:"凤岗镇",441900118:"大岭山镇",441900119:"长安镇",441900121:"虎门镇",441900122:"厚街镇",441900123:"沙田镇",441900124:"道滘镇",441900125:"洪梅镇",441900126:"麻涌镇",441900127:"望牛墩镇",441900128:"中堂镇",441900129:"高埗镇",441900401:"松山湖管委会",441900402:"虎门港管委会",441900403:"东莞生态园"},442e3:{442000001:"石岐区街道",442000002:"东区街道",442000003:"火炬开发区街道",442000004:"西区街道",442000005:"南区街道",442000006:"五桂山街道",442000100:"小榄镇",442000101:"黄圃镇",442000102:"民众镇",442000103:"东凤镇",442000104:"东升镇",442000105:"古镇镇",442000106:"沙溪镇",442000107:"坦洲镇",442000108:"港口镇",442000109:"三角镇",442000110:"横栏镇",442000111:"南头镇",442000112:"阜沙镇",442000113:"南朗镇",442000114:"三乡镇",442000115:"板芙镇",442000116:"大涌镇",442000117:"神湾镇"},445100:{445102:"湘桥区",445103:"潮安区",445122:"饶平县"},445200:{445202:"榕城区",445203:"揭东区",445222:"揭西县",445224:"惠来县",445281:"普宁市"},445300:{445302:"云城区",445303:"云安区",445321:"新兴县",445322:"郁南县",445381:"罗定市"},45e4:{450100:"南宁市",450200:"柳州市",450300:"桂林市",450400:"梧州市",450500:"北海市",450600:"防城港市",450700:"钦州市",450800:"贵港市",450900:"玉林市",451e3:"百色市",451100:"贺州市",451200:"河池市",451300:"来宾市",451400:"崇左市"},450100:{450102:"兴宁区",450103:"青秀区",450105:"江南区",450107:"西乡塘区",450108:"良庆区",450109:"邕宁区",450110:"武鸣区",450123:"隆安县",450124:"马山县",450125:"上林县",450126:"宾阳县",450127:"横县"},450200:{450202:"城中区",450203:"鱼峰区",450204:"柳南区",450205:"柳北区",450206:"柳江区",450222:"柳城县",450223:"鹿寨县",450224:"融安县",450225:"融水苗族自治县",450226:"三江侗族自治县"},450300:{450302:"秀峰区",450303:"叠彩区",450304:"象山区",450305:"七星区",450311:"雁山区",450312:"临桂区",450321:"阳朔县",450323:"灵川县",450324:"全州县",450325:"兴安县",450326:"永福县",450327:"灌阳县",450328:"龙胜各族自治县",450329:"资源县",450330:"平乐县",450331:"荔浦县",450332:"恭城瑶族自治县"},450400:{450403:"万秀区",450405:"长洲区",450406:"龙圩区",450421:"苍梧县",450422:"藤县",450423:"蒙山县",450481:"岑溪市"},450500:{450502:"海城区",450503:"银海区",450512:"铁山港区",450521:"合浦县"},450600:{450602:"港口区",450603:"防城区",450621:"上思县",450681:"东兴市"},450700:{450702:"钦南区",450703:"钦北区",450721:"灵山县",450722:"浦北县"},450800:{450802:"港北区",450803:"港南区",450804:"覃塘区",450821:"平南县",450881:"桂平市"},450900:{450902:"玉州区",450903:"福绵区",450921:"容县",450922:"陆川县",450923:"博白县",450924:"兴业县",450981:"北流市"},451e3:{451002:"右江区",451021:"田阳县",451022:"田东县",451023:"平果县",451024:"德保县",451026:"那坡县",451027:"凌云县",451028:"乐业县",451029:"田林县",451030:"西林县",451031:"隆林各族自治县",451081:"靖西市"},451100:{451102:"八步区",451103:"平桂区",451121:"昭平县",451122:"钟山县",451123:"富川瑶族自治县"},451200:{451202:"金城江区",451221:"南丹县",451222:"天峨县",451223:"凤山县",451224:"东兰县",451225:"罗城仫佬族自治县",451226:"环江毛南族自治县",451227:"巴马瑶族自治县",451228:"都安瑶族自治县",451229:"大化瑶族自治县",451281:"宜州市"},451300:{451302:"兴宾区",451321:"忻城县",451322:"象州县",451323:"武宣县",451324:"金秀瑶族自治县",451381:"合山市"},451400:{451402:"江州区",451421:"扶绥县",451422:"宁明县",451423:"龙州县",451424:"大新县",451425:"天等县",451481:"凭祥市"},46e4:{460100:"海口市",460200:"三亚市",460300:"三沙市",460400:"儋州市",469001:"五指山市",469002:"琼海市",469005:"文昌市",469006:"万宁市",469007:"东方市",469021:"定安县",469022:"屯昌县",469023:"澄迈县",469024:"临高县",469025:"白沙黎族自治县",469026:"昌江黎族自治县",469027:"乐东黎族自治县",469028:"陵水黎族自治县",469029:"保亭黎族苗族自治县",469030:"琼中黎族苗族自治县"},460100:{460105:"秀英区",460106:"龙华区",460107:"琼山区",460108:"美兰区"},460200:{460202:"海棠区",460203:"吉阳区",460204:"天涯区",460205:"崖州区"},460300:{460321:"西沙群岛",460322:"南沙群岛",460323:"中沙群岛的岛礁及其海域"},460400:{4604001:"那大镇",4604004:"国营西培农场",4604005:"华南热作学院",46040011:"三都镇",460400101:"和庆镇",460400102:"南丰镇",460400103:"大成镇",460400104:"雅星镇",460400105:"兰洋镇",460400106:"光村镇",460400107:"木棠镇",460400108:"海头镇",460400109:"峨蔓镇",460400111:"王五镇",460400112:"白马井镇",460400113:"中和镇",460400114:"排浦镇",460400115:"东成镇",460400116:"新州镇",460400404:"国营西联农场",460400405:"国营蓝洋农场",460400407:"国营八一农场",460400499:"洋浦经济开发区"},469001:{4690011:"通什镇",4690012:"畅好乡",4690014:"畅好农场",469001101:"南圣镇",469001102:"毛阳镇",469001103:"番阳镇",469001201:"毛道乡",469001202:"水满乡"},469002:{4690021:"嘉积镇",4690024:"国营东太农场",4690025:"彬村山华侨农场",46900211:"大路镇",469002101:"万泉镇",469002102:"石壁镇",469002103:"中原镇",469002104:"博鳌镇",469002105:"阳江镇",469002106:"龙江镇",469002107:"潭门镇",469002108:"塔洋镇",469002109:"长坡镇",469002111:"会山镇",469002402:"国营东红农场",469002403:"国营东升农场"},469005:{4690051:"文城镇",4690054:"国营东路农场",46900511:"昌洒镇",469005101:"重兴镇",469005102:"蓬莱镇",469005103:"会文镇",469005104:"东路镇",469005105:"潭牛镇",469005106:"东阁镇",469005107:"文教镇",469005108:"东郊镇",469005109:"龙楼镇",469005111:"翁田镇",469005112:"抱罗镇",469005113:"冯坡镇",469005114:"锦山镇",469005115:"铺前镇",469005116:"公坡镇",469005401:"国营南阳农场",469005402:"国营罗豆农场"},469006:{4690061:"万城镇",4690064:"国营东兴农场",4690065:"兴隆华侨农场",46900611:"南桥镇",469006101:"龙滚镇",469006102:"和乐镇",469006103:"后安镇",469006104:"大茂镇",469006105:"东澳镇",469006106:"礼纪镇",469006107:"长丰镇",469006108:"山根镇",469006109:"北大镇",469006111:"三更罗镇",469006401:"国营东和农场",469006404:"国营新中农场",469006501:"地方国营六连林场"},469007:{4690071:"八所镇",4690072:"天安乡",4690074:"国营广坝农场",4690075:"东方华侨农场",469007101:"东河镇",469007102:"大田镇",469007103:"感城镇",469007104:"板桥镇",469007105:"三家镇",469007106:"四更镇",469007107:"新龙镇",469007201:"江边乡"},469021:{4690211:"定城镇",4690214:"国营中瑞农场",469021101:"新竹镇",469021102:"龙湖镇",469021103:"黄竹镇",469021104:"雷鸣镇",469021105:"龙门镇",469021106:"龙河镇",469021107:"岭口镇",469021108:"翰林镇",469021109:"富文镇",469021401:"国营南海农场",469021402:"国营金鸡岭农场"},469022:{4690221:"屯城镇",4690224:"国营中建农场",469022101:"新兴镇",469022102:"枫木镇",469022103:"乌坡镇",469022104:"南吕镇",469022105:"南坤镇",469022106:"坡心镇",469022107:"西昌镇",469022401:"国营中坤农场"},469023:{4690231:"金江镇",4690234:"国营红光农场",46902311:"大丰镇",469023101:"老城镇",469023102:"瑞溪镇",469023103:"永发镇",469023104:"加乐镇",469023105:"文儒镇",469023106:"中兴镇",469023107:"仁兴镇",469023108:"福山镇",469023109:"桥头镇",469023402:"国营西达农场",469023405:"国营金安农场"},469024:{4690241:"临城镇",4690244:"国营红华农场",469024101:"波莲镇",469024102:"东英镇",469024103:"博厚镇",469024104:"皇桐镇",469024105:"多文镇",469024106:"和舍镇",469024107:"南宝镇",469024108:"新盈镇",469024109:"调楼镇",469024401:"国营加来农场"},469025:{4690251:"牙叉镇",4690252:"细水乡",469025101:"七坊镇",469025102:"邦溪镇",469025103:"打安镇",469025201:"元门乡",469025202:"南开乡",469025203:"阜龙乡",469025204:"青松乡",469025205:"金波乡",469025206:"荣邦乡",469025401:"国营白沙农场",469025404:"国营龙江农场",469025408:"国营邦溪农场"},469026:{4690261:"石碌镇",4690262:"王下乡",4690265:"国营霸王岭林场",469026101:"叉河镇",469026102:"十月田镇",469026103:"乌烈镇",469026104:"昌化镇",469026105:"海尾镇",469026106:"七叉镇",469026401:"国营红林农场",469026501:"海南矿业联合有限公司"},469027:{4690271:"抱由镇",4690275:"国营尖峰岭林业公司",46902711:"莺歌海镇",469027101:"万冲镇",469027102:"大安镇",469027103:"志仲镇",469027104:"千家镇",469027105:"九所镇",469027106:"利国镇",469027107:"黄流镇",469027108:"佛罗镇",469027109:"尖峰镇",469027401:"国营山荣农场",469027402:"国营乐光农场",469027405:"国营保国农场",469027501:"国营莺歌海盐场"},469028:{4690281:"椰林镇",4690282:"提蒙乡",4690284:"国营岭门农场",4690285:"国营吊罗山林业公司",469028101:"光坡镇",469028102:"三才镇",469028103:"英州镇",469028104:"隆广镇",469028105:"文罗镇",469028106:"本号镇",469028107:"新村镇",469028108:"黎安镇",469028201:"群英乡",469028401:"国营南平农场"},469029:{4690291:"保城镇",4690292:"六弓乡",469029101:"什玲镇",469029102:"加茂镇",469029103:"响水镇",469029104:"新政镇",469029105:"三道镇",469029201:"南林乡",469029202:"毛感乡",469029401:"国营新星农场",469029402:"海南保亭热带作物研究所",469029403:"国营金江农场",469029405:"国营三道农场"},469030:{4690301:"营根镇",4690302:"吊罗山乡",4690305:"海南黎母山省级自然保护区管理站",469030101:"湾岭镇",469030102:"黎母山镇",469030103:"和平镇",469030104:"长征镇",469030105:"红毛镇",469030106:"中平镇",469030201:"上安乡",469030202:"什运乡",469030402:"国营阳江农场",469030403:"国营乌石农场",469030406:"国营加钗农场",469030407:"国营长征农场"},5e5:{500100:"市辖区",500228:"梁平县",500229:"城口县",500230:"丰都县",500231:"垫江县",500232:"武隆县",500233:"忠县",500235:"云阳县",500236:"奉节县",500237:"巫山县",500238:"巫溪县",500240:"石柱土家族自治县",500241:"秀山土家族苗族自治县",500242:"酉阳土家族苗族自治县",500243:"彭水苗族土家族自治县"},500100:{500101:"万州区",500102:"涪陵区",500103:"渝中区",500104:"大渡口区",500105:"江北区",500106:"沙坪坝区",500107:"九龙坡区",500108:"南岸区",500109:"北碚区",500110:"綦江区",500111:"大足区",500112:"渝北区",500113:"巴南区",500114:"黔江区",500115:"长寿区",500116:"江津区",500117:"合川区",500118:"永川区",500119:"南川区",500120:"璧山区",500151:"铜梁区",500152:"潼南区",500153:"荣昌区",500154:"开州区"},500228:{5002282:"安胜乡",5002284:"梁平县农场",50022811:"聚奎镇",50022812:"合兴镇",500228001:"梁平县梁山街道",500228002:"梁平县双桂街道",500228101:"仁贤镇",500228102:"礼让镇",500228103:"云龙镇",500228104:"屏锦镇",500228106:"袁驿镇",500228107:"新盛镇",500228108:"福禄镇",500228109:"金带镇",500228111:"明达镇",500228112:"荫平镇",500228113:"和林镇",500228114:"回龙镇",500228115:"碧山镇",500228116:"虎城镇",500228117:"七星镇",500228118:"龙门镇",500228119:"文化镇",500228121:"石安镇",500228122:"柏家镇",500228123:"大观镇",500228124:"竹山镇",500228125:"蟠龙镇",500228126:"星桥镇",500228127:"曲水镇",500228201:"铁门乡",500228202:"龙胜乡",500228203:"复平乡",500228205:"紫照乡",500228401:"梁平县双桂工业园区"},500229:{50022911:"咸宜镇",50022921:"双河乡",50022922:"厚坪乡",500229001:"葛城街道",500229002:"复兴街道",500229102:"巴山镇",500229103:"坪坝镇",500229104:"庙坝镇",500229105:"明通镇",500229106:"修齐镇",500229107:"高观镇",500229108:"高燕镇",500229109:"东安镇",500229111:"高楠镇",500229201:"龙田乡",500229202:"北屏乡",500229205:"左岚乡",500229208:"沿河乡",500229211:"蓼子乡",500229212:"鸡鸣乡",500229214:"周溪乡",500229216:"明中乡",500229217:"治平乡",500229219:"岚天乡",500229221:"河鱼乡"},500230:{500230:"名山街道",50023011:"兴义镇",50023012:"兴龙镇",50023021:"三建乡",500230101:"虎威镇",500230102:"社坛镇",500230103:"三元镇",500230104:"许明寺镇",500230105:"董家镇",500230106:"树人镇",500230107:"十直镇",500230109:"高家镇",500230111:"双路镇",500230112:"江池镇",500230113:"龙河镇",500230114:"武平镇",500230115:"包鸾镇",500230116:"湛普镇",500230118:"南天湖镇",500230119:"保合镇",500230121:"仁沙镇",500230122:"龙孔镇",500230123:"暨龙镇",500230124:"双龙镇",500230125:"仙女湖镇",500230202:"青龙乡",500230206:"太平坝乡",500230207:"都督乡",500230209:"栗子乡"},500231:{50023111:"太平镇",50023112:"裴兴镇",500231001:"桂溪街道",500231002:"桂阳街道",500231101:"新民镇",500231102:"沙坪镇",500231103:"周嘉镇",500231104:"普顺镇",500231105:"永安镇",500231106:"高安镇",500231107:"高峰镇",500231108:"五洞镇",500231109:"澄溪镇",500231111:"鹤游镇",500231112:"坪山镇",500231113:"砚台镇",500231114:"曹回镇",500231115:"杠家镇",500231116:"包家镇",500231117:"白家镇",500231118:"永平镇",500231119:"三溪镇",500231121:"黄沙镇",500231122:"长龙镇",500231202:"沙河乡",500231204:"大石乡"},500232:{5002321:"巷口镇",5002322:"凤来乡",50023211:"土坎镇",50023221:"后坪苗族土家族乡",500232101:"火炉镇",500232102:"白马镇",500232103:"鸭江镇",500232104:"长坝镇",500232105:"江口镇",500232106:"平桥镇",500232107:"羊角镇",500232108:"仙女山镇",500232109:"桐梓镇",500232111:"和顺镇",500232112:"双河镇",500232202:"庙垭乡",500232203:"石桥苗族土家族乡",500232205:"黄莺乡",500232206:"沧沟乡",500232207:"文复苗族土家族乡",500232208:"土地乡",500232209:"白云乡",500232211:"浩口苗族仡佬族乡",500232212:"接龙乡",500232213:"赵家乡",500232214:"大洞河乡"},500233:{50023311:"官坝镇",50023312:"白石镇",50023321:"兴峰乡",500233001:"忠州街道",500233002:"白公街道",500233101:"新生镇",500233102:"任家镇",500233103:"乌杨镇",500233104:"洋渡镇",500233105:"东溪镇",500233106:"复兴镇",500233107:"石宝镇",500233108:"汝溪镇",500233109:"野鹤镇",500233111:"石黄镇",500233112:"马灌镇",500233113:"金鸡镇",500233114:"新立镇",500233115:"双桂镇",500233116:"拔山镇",500233117:"花桥镇",500233118:"永丰镇",500233119:"三汇镇",500233122:"黄金镇",500233201:"善广乡",500233203:"石子乡",500233204:"磨子土家族乡",500233206:"涂井乡",500233208:"金声乡"},500235:{50023513:"桑坪镇",50023514:"蔈草镇",500235001:"双江街道",500235002:"青龙街道",500235003:"人和街道",500235004:"盘龙街道",500235105:"龙角镇",500235107:"故陵镇",500235108:"红狮镇",500235115:"路阳镇",500235116:"农坝镇",500235118:"渠马镇",500235121:"黄石镇",500235122:"巴阳镇",500235123:"沙市镇",500235124:"鱼泉镇",500235125:"凤鸣镇",500235127:"宝坪镇",500235128:"南溪镇",500235129:"双土镇",500235131:"江口镇",500235132:"高阳镇",500235133:"平安镇",500235135:"云阳镇",500235136:"云安镇",500235137:"栖霞镇",500235138:"双龙镇",500235139:"泥溪镇",500235141:"养鹿镇",500235142:"水口镇",500235143:"堰坪镇",500235144:"龙洞镇",500235145:"后叶镇",500235146:"耀灵镇",500235147:"大阳镇",500235208:"外郎乡",500235215:"新津乡",500235216:"普安乡",500235218:"洞鹿乡",500235219:"石门乡",500235239:"上坝乡",500235242:"清水土家族自治乡"},500236:{50023612:"康乐镇",50023613:"新民镇",50023627:"康坪乡",500236001:"永安街道",500236002:"鱼复街道",500236003:"夔门街道",500236117:"白帝镇",500236118:"草堂镇",500236119:"汾河镇",500236121:"大树镇",500236122:"竹园镇",500236123:"公平镇",500236124:"朱衣镇",500236125:"甲高镇",500236126:"羊市镇",500236127:"吐祥镇",500236128:"兴隆镇",500236129:"青龙镇",500236131:"永乐镇",500236132:"安坪镇",500236133:"五马镇",500236134:"青莲镇",500236265:"岩湾乡",500236266:"平安乡",500236267:"红土乡",500236269:"石岗乡",500236272:"太和土家族乡",500236274:"鹤峰乡",500236275:"冯坪乡",500236276:"长安土家族乡",500236277:"龙桥土家族乡",500236278:"云雾土家族乡"},500237:{5002372:"红椿乡",50023711:"铜鼓镇",50023721:"建坪乡",500237001:"高唐街道",500237002:"龙门街道",500237101:"庙宇镇",500237102:"大昌镇",500237103:"福田镇",500237104:"龙溪镇",500237105:"双龙镇",500237106:"官阳镇",500237107:"骡坪镇",500237108:"抱龙镇",500237109:"官渡镇",500237111:"巫峡镇",500237207:"两坪乡",500237208:"曲尺乡",500237211:"大溪乡",500237214:"金坪乡",500237216:"平河乡",500237219:"当阳乡",500237222:"竹贤乡",500237225:"三溪乡",500237227:"培石乡",500237229:"笃坪乡",500237231:"邓家乡"},500238:{5002381:"城厢镇",5002384:"红池坝经济开发区",50023811:"峰灵镇",50023821:"长桂乡",50023824:"双阳乡",500238001:"宁河街道",500238002:"柏杨街道",500238101:"凤凰镇",500238102:"宁厂镇",500238103:"上磺镇",500238104:"古路镇",500238105:"文峰镇",500238106:"徐家镇",500238107:"白鹿镇",500238108:"尖山镇",500238109:"下堡镇",500238111:"塘坊镇",500238112:"朝阳镇",500238113:"田坝镇",500238114:"通城镇",500238115:"菱角镇",500238116:"蒲莲镇",500238117:"土城镇",500238204:"胜利乡",500238207:"大河乡",500238208:"天星乡",500238226:"鱼鳞乡",500238227:"乌龙乡",500238234:"中岗乡",500238237:"花台乡",500238239:"兰英乡",500238242:"中梁乡",500238243:"天元乡"},500240:{500240:"下路街道",50024011:"龙沙镇",50024021:"石家乡",500240101:"西沱镇",500240103:"悦崃镇",500240104:"临溪镇",500240105:"黄水镇",500240106:"马武镇",500240107:"沙子镇",500240108:"王场镇",500240109:"沿溪镇",500240111:"鱼池镇",500240112:"三河镇",500240113:"大歇镇",500240114:"桥头镇",500240115:"万朝镇",500240116:"冷水镇",500240117:"黄鹤镇",500240203:"黎场乡",500240204:"三星乡",500240205:"六塘乡",500240207:"三益乡",500240208:"王家乡",500240209:"河嘴乡",500240212:"枫木乡",500240213:"中益乡",500240214:"洗新乡",500240216:"龙潭乡",500240217:"新乐乡",500240218:"金铃乡",500240219:"金竹乡"},500241:{50024111:"雅江镇",500241001:"中和街道",500241002:"乌杨街道",500241003:"平凯街道",500241102:"清溪场镇",500241103:"隘口镇",500241104:"溶溪镇",500241105:"官庄镇",500241106:"龙池镇",500241107:"石堤镇",500241108:"峨溶镇",500241109:"洪安镇",500241111:"石耶镇",500241112:"梅江镇",500241113:"兰桥镇",500241114:"膏田镇",500241115:"溪口镇",500241116:"妙泉镇",500241117:"宋农镇",500241118:"里仁镇",500241119:"钟灵镇",500241201:"孝溪乡",500241207:"海洋乡",500241208:"大溪乡",500241211:"涌洞乡",500241214:"中平乡",500241215:"岑溪乡"},500242:{5002422:"涂市乡",50024211:"泔溪镇",50024221:"后坪乡",50024222:"清泉乡",500242001:"桃花源街道",500242002:"钟多街道",500242101:"龙潭镇",500242102:"麻旺镇",500242103:"酉酬镇",500242104:"大溪镇",500242105:"兴隆镇",500242106:"黑水镇",500242107:"丁市镇",500242108:"龚滩镇",500242109:"李溪镇",500242111:"酉水河镇",500242112:"苍岭镇",500242113:"小河镇",500242114:"板溪镇",500242202:"铜鼓乡",500242204:"可大乡",500242205:"偏柏乡",500242206:"五福乡",500242207:"木叶乡",500242208:"毛坝乡",500242209:"花田乡",500242211:"天馆乡",500242212:"宜居乡",500242213:"万木乡",500242214:"两罾乡",500242215:"板桥乡",500242216:"官清乡",500242217:"南腰界乡",500242218:"车田乡",500242219:"腴地乡",500242221:"庙溪乡",500242222:"浪坪乡",500242223:"双泉乡",500242224:"楠木乡"},500243:{50024311:"万足镇",50024321:"走马乡",500243001:"汉葭街道",500243002:"绍庆街道",500243003:"靛水街道",500243101:"保家镇",500243102:"郁山镇",500243103:"高谷镇",500243104:"桑柘镇",500243105:"鹿角镇",500243106:"黄家镇",500243107:"普子镇",500243108:"龙射镇",500243109:"连湖镇",500243111:"平安镇",500243112:"长生镇",500243113:"新田镇",500243114:"鞍子镇",500243115:"太原镇",500243116:"龙溪镇",500243117:"梅子垭镇",500243118:"大同镇",500243201:"岩东乡",500243202:"鹿鸣乡",500243204:"棣棠乡",500243206:"三义乡",500243207:"联合乡",500243208:"石柳乡",500243211:"芦塘乡",500243213:"乔梓乡",500243217:"诸佛乡",500243219:"桐楼乡",500243222:"善感乡",500243223:"双龙乡",500243224:"石盘乡",500243225:"大垭乡",500243226:"润溪乡",500243227:"朗溪乡",500243228:"龙塘乡"},51e4:{510100:"成都市",510300:"自贡市",510400:"攀枝花市",510500:"泸州市",510600:"德阳市",510700:"绵阳市",510800:"广元市",510900:"遂宁市",511e3:"内江市",511100:"乐山市",511300:"南充市",511400:"眉山市",511500:"宜宾市",511600:"广安市",511700:"达州市",511800:"雅安市",511900:"巴中市",512e3:"资阳市",513200:"阿坝藏族羌族自治州",513300:"甘孜藏族自治州",513400:"凉山彝族自治州"},510100:{510104:"锦江区",510105:"青羊区",510106:"金牛区",510107:"武侯区",510108:"成华区",510112:"龙泉驿区",510113:"青白江区",510114:"新都区",510115:"温江区",510116:"双流区",510121:"金堂县",510124:"郫县",510129:"大邑县",510131:"蒲江县",510132:"新津县",510181:"都江堰市",510182:"彭州市",510183:"邛崃市",510184:"崇州市",510185:"简阳市"},510300:{510302:"自流井区",510303:"贡井区",510304:"大安区",510311:"沿滩区",510321:"荣县",510322:"富顺县"},510400:{510402:"东区",510403:"西区",510411:"仁和区",510421:"米易县",510422:"盐边县"},510500:{510502:"江阳区",510503:"纳溪区",510504:"龙马潭区",510521:"泸县",510522:"合江县",510524:"叙永县",510525:"古蔺县"},510600:{510603:"旌阳区",510623:"中江县",510626:"罗江县",510681:"广汉市",510682:"什邡市",510683:"绵竹市"},510700:{510703:"涪城区",510704:"游仙区",510705:"安州区",510722:"三台县",510723:"盐亭县",510725:"梓潼县",510726:"北川羌族自治县",510727:"平武县",510781:"江油市"},510800:{510802:"利州区",510811:"昭化区",510812:"朝天区",510821:"旺苍县",510822:"青川县",510823:"剑阁县",510824:"苍溪县"},510900:{510903:"船山区",510904:"安居区",510921:"蓬溪县",510922:"射洪县",510923:"大英县"},511e3:{511002:"市中区",511011:"东兴区",511024:"威远县",511025:"资中县",511028:"隆昌县"},511100:{511102:"市中区",511111:"沙湾区",511112:"五通桥区",511113:"金口河区",511123:"犍为县",511124:"井研县",511126:"夹江县",511129:"沐川县",511132:"峨边彝族自治县",511133:"马边彝族自治县",511181:"峨眉山市"},511300:{511302:"顺庆区",511303:"高坪区",511304:"嘉陵区",511321:"南部县",511322:"营山县",511323:"蓬安县",511324:"仪陇县",511325:"西充县",511381:"阆中市"},511400:{511402:"东坡区",511403:"彭山区",511421:"仁寿县",511423:"洪雅县",511424:"丹棱县",511425:"青神县"},511500:{511502:"翠屏区",511503:"南溪区",511521:"宜宾县",511523:"江安县",511524:"长宁县",511525:"高县",511526:"珙县",511527:"筠连县",511528:"兴文县",511529:"屏山县"},511600:{511602:"广安区",511603:"前锋区",511621:"岳池县",511622:"武胜县",511623:"邻水县",511681:"华蓥市"},511700:{511702:"通川区",511703:"达川区",511722:"宣汉县",511723:"开江县",511724:"大竹县",511725:"渠县",511781:"万源市"},511800:{511802:"雨城区",511803:"名山区",511822:"荥经县",511823:"汉源县",511824:"石棉县",511825:"天全县",511826:"芦山县",511827:"宝兴县"},511900:{511902:"巴州区",511903:"恩阳区",511921:"通江县",511922:"南江县",511923:"平昌县"},512e3:{512002:"雁江区",512021:"安岳县",512022:"乐至县"},513200:{513201:"马尔康市",513221:"汶川县",513222:"理县",513223:"茂县",513224:"松潘县",513225:"九寨沟县",513226:"金川县",513227:"小金县",513228:"黑水县",513230:"壤塘县",513231:"阿坝县",513232:"若尔盖县",513233:"红原县"},513300:{513301:"康定市",513322:"泸定县",513323:"丹巴县",513324:"九龙县",513325:"雅江县",513326:"道孚县",513327:"炉霍县",513328:"甘孜县",513329:"新龙县",513330:"德格县",513331:"白玉县",513332:"石渠县",513333:"色达县",513334:"理塘县",513335:"巴塘县",513336:"乡城县",513337:"稻城县",513338:"得荣县"},513400:{513401:"西昌市",513422:"木里藏族自治县",513423:"盐源县",513424:"德昌县",513425:"会理县",513426:"会东县",513427:"宁南县",513428:"普格县",513429:"布拖县",513430:"金阳县",513431:"昭觉县",513432:"喜德县",513433:"冕宁县",513434:"越西县",513435:"甘洛县",513436:"美姑县",513437:"雷波县"},52e4:{520100:"贵阳市",520200:"六盘水市",520300:"遵义市",520400:"安顺市",520500:"毕节市",520600:"铜仁市",522300:"黔西南布依族苗族自治州",522600:"黔东南苗族侗族自治州",522700:"黔南布依族苗族自治州"},520100:{520102:"南明区",520103:"云岩区",520111:"花溪区",520112:"乌当区",520113:"白云区",520115:"观山湖区",520121:"开阳县",520122:"息烽县",520123:"修文县",520181:"清镇市"},520200:{520201:"钟山区",520203:"六枝特区",520221:"水城县",520222:"盘县"},520300:{520302:"红花岗区",520303:"汇川区",520304:"播州区",520322:"桐梓县",520323:"绥阳县",520324:"正安县",520325:"道真仡佬族苗族自治县",520326:"务川仡佬族苗族自治县",520327:"凤冈县",520328:"湄潭县",520329:"余庆县",520330:"习水县",520381:"赤水市",520382:"仁怀市"},520400:{520402:"西秀区",520403:"平坝区",520422:"普定县",520423:"镇宁布依族苗族自治县",520424:"关岭布依族苗族自治县",520425:"紫云苗族布依族自治县"},520500:{520502:"七星关区",520521:"大方县",520522:"黔西县",520523:"金沙县",520524:"织金县",520525:"纳雍县",520526:"威宁彝族回族苗族自治县",520527:"赫章县"},520600:{520602:"碧江区",520603:"万山区",520621:"江口县",520622:"玉屏侗族自治县",520623:"石阡县",520624:"思南县",520625:"印江土家族苗族自治县",520626:"德江县",520627:"沿河土家族自治县",520628:"松桃苗族自治县"},522300:{522301:"兴义市",522322:"兴仁县",522323:"普安县",522324:"晴隆县",522325:"贞丰县",522326:"望谟县",522327:"册亨县",522328:"安龙县"},522600:{522601:"凯里市",522622:"黄平县",522623:"施秉县",522624:"三穗县",522625:"镇远县",522626:"岑巩县",522627:"天柱县",522628:"锦屏县",522629:"剑河县",522630:"台江县",522631:"黎平县",522632:"榕江县",522633:"从江县",522634:"雷山县",522635:"麻江县",522636:"丹寨县"},522700:{522701:"都匀市",522702:"福泉市",522722:"荔波县",522723:"贵定县",522725:"瓮安县",522726:"独山县",522727:"平塘县",522728:"罗甸县",522729:"长顺县",522730:"龙里县",522731:"惠水县",522732:"三都水族自治县"},53e4:{530100:"昆明市",530300:"曲靖市",530400:"玉溪市",530500:"保山市",530600:"昭通市",530700:"丽江市",530800:"普洱市",530900:"临沧市",532300:"楚雄彝族自治州",532500:"红河哈尼族彝族自治州",532600:"文山壮族苗族自治州",532800:"西双版纳傣族自治州",532900:"大理白族自治州",533100:"德宏傣族景颇族自治州",533300:"怒江傈僳族自治州",533400:"迪庆藏族自治州"},530100:{530102:"五华区",530103:"盘龙区",530111:"官渡区",530112:"西山区",530113:"东川区",530114:"呈贡区",530122:"晋宁县",530124:"富民县",530125:"宜良县",530126:"石林彝族自治县",530127:"嵩明县",530128:"禄劝彝族苗族自治县",530129:"寻甸回族彝族自治县",530181:"安宁市"},530300:{530302:"麒麟区",530303:"沾益区",530321:"马龙县",530322:"陆良县",530323:"师宗县",530324:"罗平县",530325:"富源县",530326:"会泽县",530381:"宣威市"},530400:{530402:"红塔区",530403:"江川区",530422:"澄江县",530423:"通海县",530424:"华宁县",530425:"易门县",530426:"峨山彝族自治县",530427:"新平彝族傣族自治县",530428:"元江哈尼族彝族傣族自治县"},530500:{530502:"隆阳区",530521:"施甸县",530523:"龙陵县",530524:"昌宁县",530581:"腾冲市"},530600:{530602:"昭阳区",530621:"鲁甸县",530622:"巧家县",530623:"盐津县",530624:"大关县",530625:"永善县",530626:"绥江县",530627:"镇雄县",530628:"彝良县",530629:"威信县",530630:"水富县"},530700:{530702:"古城区",530721:"玉龙纳西族自治县",530722:"永胜县",530723:"华坪县",530724:"宁蒗彝族自治县"},530800:{530802:"思茅区",530821:"宁洱哈尼族彝族自治县",530822:"墨江哈尼族自治县",530823:"景东彝族自治县",530824:"景谷傣族彝族自治县",530825:"镇沅彝族哈尼族拉祜族自治县",530826:"江城哈尼族彝族自治县",530827:"孟连傣族拉祜族佤族自治县",530828:"澜沧拉祜族自治县",530829:"西盟佤族自治县"},530900:{530902:"临翔区",530921:"凤庆县",530922:"云县",530923:"永德县",530924:"镇康县",530925:"双江拉祜族佤族布朗族傣族自治县",530926:"耿马傣族佤族自治县",530927:"沧源佤族自治县"},532300:{532301:"楚雄市",532322:"双柏县",532323:"牟定县",532324:"南华县",532325:"姚安县",532326:"大姚县",532327:"永仁县",532328:"元谋县",532329:"武定县",532331:"禄丰县"},532500:{532501:"个旧市",532502:"开远市",532503:"蒙自市",532504:"弥勒市",532523:"屏边苗族自治县",532524:"建水县",532525:"石屏县",532527:"泸西县",532528:"元阳县",532529:"红河县",532530:"金平苗族瑶族傣族自治县",532531:"绿春县",532532:"河口瑶族自治县"},532600:{532601:"文山市",532622:"砚山县",532623:"西畴县",532624:"麻栗坡县",532625:"马关县",532626:"丘北县",532627:"广南县",532628:"富宁县"},532800:{532801:"景洪市",532822:"勐海县",532823:"勐腊县"},532900:{532901:"大理市",532922:"漾濞彝族自治县",532923:"祥云县",532924:"宾川县",532925:"弥渡县",532926:"南涧彝族自治县",532927:"巍山彝族回族自治县",532928:"永平县",532929:"云龙县",532930:"洱源县",532931:"剑川县",532932:"鹤庆县"},533100:{533102:"瑞丽市",533103:"芒市",533122:"梁河县",533123:"盈江县",533124:"陇川县"},533300:{533301:"泸水市",533323:"福贡县",533324:"贡山独龙族怒族自治县",533325:"兰坪白族普米族自治县"},533400:{533401:"香格里拉市",533422:"德钦县",533423:"维西傈僳族自治县"},54e4:{540100:"拉萨市",540200:"日喀则市",540300:"昌都市",540400:"林芝市",540500:"山南市",542400:"那曲地区",542500:"阿里地区"},540100:{540102:"城关区",540103:"堆龙德庆区",540121:"林周县",540122:"当雄县",540123:"尼木县",540124:"曲水县",540126:"达孜县",540127:"墨竹工卡县"},540200:{540202:"桑珠孜区",540221:"南木林县",540222:"江孜县",540223:"定日县",540224:"萨迦县",540225:"拉孜县",540226:"昂仁县",540227:"谢通门县",540228:"白朗县",540229:"仁布县",540230:"康马县",540231:"定结县",540232:"仲巴县",540233:"亚东县",540234:"吉隆县",540235:"聂拉木县",540236:"萨嘎县",540237:"岗巴县"},540300:{540302:"卡若区",540321:"江达县",540322:"贡觉县",540323:"类乌齐县",540324:"丁青县",540325:"察雅县",540326:"八宿县",540327:"左贡县",540328:"芒康县",540329:"洛隆县",540330:"边坝县"},540400:{540402:"巴宜区",540421:"工布江达县",540422:"米林县",540423:"墨脱县",540424:"波密县",540425:"察隅县",540426:"朗县"},540500:{540502:"乃东区",540521:"扎囊县",540522:"贡嘎县",540523:"桑日县",540524:"琼结县",540525:"曲松县",540526:"措美县",540527:"洛扎县",540528:"加查县",540529:"隆子县",540530:"错那县",540531:"浪卡子县"},542400:{542421:"那曲县",542422:"嘉黎县",542423:"比如县",542424:"聂荣县",542425:"安多县",542426:"申扎县",542427:"索县",542428:"班戈县",542429:"巴青县",542430:"尼玛县",542431:"双湖县"},542500:{542521:"普兰县",542522:"札达县",542523:"噶尔县",542524:"日土县",542525:"革吉县",542526:"改则县",542527:"措勤县"},61e4:{610100:"西安市",610200:"铜川市",610300:"宝鸡市",610400:"咸阳市",610500:"渭南市",610600:"延安市",610700:"汉中市",610800:"榆林市",610900:"安康市",611e3:"商洛市"},610100:{610102:"新城区",610103:"碑林区",610104:"莲湖区",610111:"灞桥区",610112:"未央区",610113:"雁塔区",610114:"阎良区",610115:"临潼区",610116:"长安区",610117:"高陵区",610122:"蓝田县",610124:"周至县",610125:"户县"},610200:{610202:"王益区",610203:"印台区",610204:"耀州区",610222:"宜君县"},610300:{610302:"渭滨区",610303:"金台区",610304:"陈仓区",610322:"凤翔县",610323:"岐山县",610324:"扶风县",610326:"眉县",610327:"陇县",610328:"千阳县",610329:"麟游县",610330:"凤县",610331:"太白县"},610400:{610402:"秦都区",610403:"杨陵区",610404:"渭城区",610422:"三原县",610423:"泾阳县",610424:"乾县",610425:"礼泉县",610426:"永寿县",610427:"彬县",610428:"长武县",610429:"旬邑县",610430:"淳化县",610431:"武功县",610481:"兴平市"},610500:{610502:"临渭区",610503:"华州区",610522:"潼关县",610523:"大荔县",610524:"合阳县",610525:"澄城县",610526:"蒲城县",610527:"白水县",610528:"富平县",610581:"韩城市",610582:"华阴市"},610600:{610602:"宝塔区",610603:"安塞区",610621:"延长县",610622:"延川县",610623:"子长县",610625:"志丹县",610626:"吴起县",610627:"甘泉县",610628:"富县",610629:"洛川县",610630:"宜川县",610631:"黄龙县",610632:"黄陵县"},610700:{610702:"汉台区",610721:"南郑县",610722:"城固县",610723:"洋县",610724:"西乡县",610725:"勉县",610726:"宁强县",610727:"略阳县",610728:"镇巴县",610729:"留坝县",610730:"佛坪县"},610800:{610802:"榆阳区",610803:"横山区",610821:"神木县",610822:"府谷县",610824:"靖边县",610825:"定边县",610826:"绥德县",610827:"米脂县",610828:"佳县",610829:"吴堡县",610830:"清涧县",610831:"子洲县"},610900:{610902:"汉滨区",610921:"汉阴县",610922:"石泉县",610923:"宁陕县",610924:"紫阳县",610925:"岚皋县",610926:"平利县",610927:"镇坪县",610928:"旬阳县",610929:"白河县"},611e3:{611002:"商州区",611021:"洛南县",611022:"丹凤县",611023:"商南县",611024:"山阳县",611025:"镇安县",611026:"柞水县"},62e4:{620100:"兰州市",620200:"嘉峪关市",620300:"金昌市",620400:"白银市",620500:"天水市",620600:"武威市",620700:"张掖市",620800:"平凉市",620900:"酒泉市",621e3:"庆阳市",621100:"定西市",621200:"陇南市",622900:"临夏回族自治州",623e3:"甘南藏族自治州"},620100:{620102:"城关区",620103:"七里河区",620104:"西固区",620105:"安宁区",620111:"红古区",620121:"永登县",620122:"皋兰县",620123:"榆中县"},620200:{},620300:{620302:"金川区",620321:"永昌县"},620400:{620402:"白银区",620403:"平川区",620421:"靖远县",620422:"会宁县",620423:"景泰县"},620500:{620502:"秦州区",620503:"麦积区",620521:"清水县",620522:"秦安县",620523:"甘谷县",620524:"武山县",620525:"张家川回族自治县"},620600:{620602:"凉州区",620621:"民勤县",620622:"古浪县",620623:"天祝藏族自治县"},620700:{620702:"甘州区",620721:"肃南裕固族自治县",620722:"民乐县",620723:"临泽县",620724:"高台县",620725:"山丹县"},620800:{620802:"崆峒区",620821:"泾川县",620822:"灵台县",620823:"崇信县",620824:"华亭县",620825:"庄浪县",620826:"静宁县"},620900:{620902:"肃州区",620921:"金塔县",620922:"瓜州县",620923:"肃北蒙古族自治县",620924:"阿克塞哈萨克族自治县",620981:"玉门市",620982:"敦煌市"},621e3:{621002:"西峰区",621021:"庆城县",621022:"环县",621023:"华池县",621024:"合水县",621025:"正宁县",621026:"宁县",621027:"镇原县"},621100:{621102:"安定区",621121:"通渭县",621122:"陇西县",621123:"渭源县",621124:"临洮县",621125:"漳县",621126:"岷县"},621200:{621202:"武都区",621221:"成县",621222:"文县",621223:"宕昌县",621224:"康县",621225:"西和县",621226:"礼县",621227:"徽县",621228:"两当县"},622900:{622901:"临夏市",622921:"临夏县",622922:"康乐县",622923:"永靖县",622924:"广河县",622925:"和政县",622926:"东乡族自治县",622927:"积石山保安族东乡族撒拉族自治县"},623e3:{623001:"合作市",623021:"临潭县",623022:"卓尼县",623023:"舟曲县",623024:"迭部县",623025:"玛曲县",623026:"碌曲县",623027:"夏河县"},63e4:{630100:"西宁市",630200:"海东市",632200:"海北藏族自治州",632300:"黄南藏族自治州",632500:"海南藏族自治州",632600:"果洛藏族自治州",632700:"玉树藏族自治州",632800:"海西蒙古族藏族自治州"},630100:{630102:"城东区",630103:"城中区",630104:"城西区",630105:"城北区",630121:"大通回族土族自治县",630122:"湟中县",630123:"湟源县"},630200:{630202:"乐都区",630203:"平安区",630222:"民和回族土族自治县",630223:"互助土族自治县",630224:"化隆回族自治县",630225:"循化撒拉族自治县"},632200:{632221:"门源回族自治县",632222:"祁连县",632223:"海晏县",632224:"刚察县"},632300:{632321:"同仁县",632322:"尖扎县",632323:"泽库县",632324:"河南蒙古族自治县"},632500:{632521:"共和县",632522:"同德县",632523:"贵德县",632524:"兴海县",632525:"贵南县"},632600:{632621:"玛沁县",632622:"班玛县",632623:"甘德县",632624:"达日县",632625:"久治县",632626:"玛多县"},632700:{632701:"玉树市",632722:"杂多县",632723:"称多县",632724:"治多县",632725:"囊谦县",632726:"曲麻莱县"},632800:{632801:"格尔木市",632802:"德令哈市",632821:"乌兰县",632822:"都兰县",632823:"天峻县"},64e4:{640100:"银川市",640200:"石嘴山市",640300:"吴忠市",640400:"固原市",640500:"中卫市"},640100:{640104:"兴庆区",640105:"西夏区",640106:"金凤区",640121:"永宁县",640122:"贺兰县",640181:"灵武市"},640200:{640202:"大武口区",640205:"惠农区",640221:"平罗县"},640300:{640302:"利通区",640303:"红寺堡区",640323:"盐池县",640324:"同心县",640381:"青铜峡市"},640400:{640402:"原州区",640422:"西吉县",640423:"隆德县",640424:"泾源县",640425:"彭阳县"},640500:{640502:"沙坡头区",640521:"中宁县",640522:"海原县"},65e4:{650100:"乌鲁木齐市",650200:"克拉玛依市",650400:"吐鲁番市",650500:"哈密市",652300:"昌吉回族自治州",652700:"博尔塔拉蒙古自治州",652800:"巴音郭楞蒙古自治州",652900:"阿克苏地区",653e3:"克孜勒苏柯尔克孜自治州",653100:"喀什地区",653200:"和田地区",654e3:"伊犁哈萨克自治州",654200:"塔城地区",654300:"阿勒泰地区",659001:"石河子市",659002:"阿拉尔市",659003:"图木舒克市",659004:"五家渠市",659006:"铁门关市"},650100:{650102:"天山区",650103:"沙依巴克区",650104:"新市区",650105:"水磨沟区",650106:"头屯河区",650107:"达坂城区",650109:"米东区",650121:"乌鲁木齐县"},650200:{650202:"独山子区",650203:"克拉玛依区",650204:"白碱滩区",650205:"乌尔禾区"},650400:{650402:"高昌区",650421:"鄯善县",650422:"托克逊县"},650500:{650502:"伊州区",650521:"巴里坤哈萨克自治县",650522:"伊吾县"},652300:{652301:"昌吉市",652302:"阜康市",652323:"呼图壁县",652324:"玛纳斯县",652325:"奇台县",652327:"吉木萨尔县",652328:"木垒哈萨克自治县"},652700:{652701:"博乐市",652702:"阿拉山口市",652722:"精河县",652723:"温泉县"},652800:{652801:"库尔勒市",652822:"轮台县",652823:"尉犁县",652824:"若羌县",652825:"且末县",652826:"焉耆回族自治县",652827:"和静县",652828:"和硕县",652829:"博湖县"},652900:{652901:"阿克苏市",652922:"温宿县",652923:"库车县",652924:"沙雅县",652925:"新和县",652926:"拜城县",652927:"乌什县",652928:"阿瓦提县",652929:"柯坪县"},653e3:{653001:"阿图什市",653022:"阿克陶县",653023:"阿合奇县",653024:"乌恰县"},653100:{653101:"喀什市",653121:"疏附县",653122:"疏勒县",653123:"英吉沙县",653124:"泽普县",653125:"莎车县",653126:"叶城县",653127:"麦盖提县",653128:"岳普湖县",653129:"伽师县",653130:"巴楚县",653131:"塔什库尔干塔吉克自治县"},653200:{653201:"和田市",653221:"和田县",653222:"墨玉县",653223:"皮山县",653224:"洛浦县",653225:"策勒县",653226:"于田县",653227:"民丰县"},654e3:{654002:"伊宁市",654003:"奎屯市",654004:"霍尔果斯市",654021:"伊宁县",654022:"察布查尔锡伯自治县",654023:"霍城县",654024:"巩留县",654025:"新源县",654026:"昭苏县",654027:"特克斯县",654028:"尼勒克县"},654200:{654201:"塔城市",654202:"乌苏市",654221:"额敏县",654223:"沙湾县",654224:"托里县",654225:"裕民县",654226:"和布克赛尔蒙古自治县"},654300:{654301:"阿勒泰市",654321:"布尔津县",654322:"富蕴县",654323:"福海县",654324:"哈巴河县",654325:"青河县",654326:"吉木乃县"},659001:{6590011:"北泉镇",6590015:"兵团一五二团",659001001:"新城街道",659001002:"向阳街道",659001003:"红山街道",659001004:"老街街道",659001005:"东城街道",659001101:"石河子镇"},659002:{6590022:"托喀依乡",6590025:"兵团七团",65900252:"兵团三团",659002001:"金银川路街道",659002002:"幸福路街道",659002003:"青松路街道",659002004:"南口街道",659002402:"工业园区",659002501:"兵团八团",659002503:"兵团十团",659002504:"兵团十一团",659002505:"兵团十二团",659002506:"兵团十三团",659002507:"兵团十四团",659002509:"兵团十六团",659002511:"兵团第一师水利水电工程处",659002512:"兵团第一师塔里木灌区水利管理处",659002513:"阿拉尔农场",659002514:"兵团第一师幸福农场",659002515:"中心监狱",659002516:"兵团一团",659002517:"兵团农一师沙井子水利管理处",659002518:"西工业园区管理委员会",659002519:"兵团二团"},659003:{65900351:"兵团五十团",659003001:"齐干却勒街道",659003002:"前海街道",659003003:"永安坝街道",659003504:"兵团四十四团",659003509:"兵团四十九团",659003511:"兵团五十一团",659003513:"兵团五十三团",659003514:"兵团图木舒克市喀拉拜勒镇"},659004:{6590045:"兵团一零一团",659004001:"军垦路街道",659004002:"青湖路街道",659004003:"人民路街道",659004501:"兵团一零二团",659004502:"兵团一零三团"},659006:{6590061:"博古其镇",659006101:"双丰镇"},71e4:{710100:"台湾省"},710100:{710101:"金门",710102:"连江",710103:"苗栗",710104:"南投",710105:"澎湖",710106:"屏东",710107:"台东",710108:"台中",710109:"台南",710110:"台北",710111:"桃园",710112:"云林",710113:"新北",710114:"彰化",710115:"嘉义",710116:"新竹",710117:"花莲",710118:"宜兰",710119:"高雄",710120:"基隆"},81e4:{810101:"中西区",810102:"东区",810103:"九龙城区",810104:"观塘区",810105:"深水埗区",810106:"湾仔区",810107:"黄大仙区",810108:"油尖旺区",810109:"离岛区",810110:"葵青区",810111:"北区",810112:"西贡区",810113:"沙田区",810114:"屯门区",810115:"大埔区",810116:"荃湾区",810117:"元朗区",810118:"香港",810119:"九龙",810120:"新界"},82e4:{820101:"离岛",820102:"澳门半岛",820103:"凼仔",820104:"路凼城",820105:"路环"},91e4:{81e4:"香港特别行政区",82e4:"澳门特别行政区"}}},"0f11":function(t,e,i){t.exports=i.p+"editor-assets/img/order.100f661d.svg"},"104b":function(t,e,i){t.exports=i.p+"editor-assets/img/print.0c69c2a7.svg"},"105d":function(t,e,i){"use strict";var s=i("2153"),n=i.n(s);n.a},1060:function(t,e,i){"use strict";i.d(e,"b",(function(){return r})),i.d(e,"d",(function(){return o})),i.d(e,"a",(function(){return l})),i.d(e,"c",(function(){return c}));var s=i("f576"),n=i.n(s);const a=t=>(new n.a).update(t).digest("hex");function r(){return a(window.location.href)}function o({data:t,expire:e,pageUrl:i,uuid:s}){const n=Date.now();i=i||window.location.href;const r=s||a(i);return localStorage.setItem(r,JSON.stringify({pageUrl:i,savedAt:n,data:t,expire:e})),setTimeout(()=>{localStorage.removeItem(r)},e),r}function l(t){const e=localStorage.getItem(t);if(!e)return null;let i;try{i=JSON.parse(e).data}catch(s){i=null}return i}function c(t){return localStorage.removeItem(t)}},"111c":function(t,e,i){},"11ad":function(t,e,i){},"124f":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=i("e762"),a=r(n);function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=function(t){function e(t,i){return o(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return c(e,t),s(e,[{key:"encode",value:function(){for(var t="110",e=0;e<this.data.length;e++){var i=parseInt(this.data[e]),s=i.toString(2);s=d(s,4-s.length);for(var n=0;n<s.length;n++)t+="0"==s[n]?"100":"110"}return t+="1001",{data:t,text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]+$/)}}]),e}(a.default);function d(t,e){for(var i=0;i<e;i++)t="0"+t;return t}e.default=h},1254:function(t,e,i){t.exports=i.p+"editor-assets/img/pointer.d0f36648.svg"},"127e":function(t,e,i){},"12de":function(t,e,i){"use strict";var s=i("40e6"),n=i.n(s);n.a},"12f2":function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("1ae4"),a=i.n(n);i("27bd");e["default"]=Object(s["b"])({setup(){return()=>Object(s["c"])("div",{class:"header-wrapper flex item-center flex-between px-30"},[Object(s["c"])("div",{class:"left flex item-center"},[Object(s["c"])("img",{class:"logo",attrs:{src:a.a,alt:""}}),Object(s["c"])("div",{class:"px-20 line-vertical"},["|"]),Object(s["c"])("div",{class:"title"},["商家开放平台"])]),Object(s["c"])("div",{class:"right flex item-center"},[Object(s["c"])("div",{class:"phone ml-12"},["400 886 9050"]),Object(s["c"])("a-button",{class:"ml-20",on:{click:()=>{window.open("https://www.wenjuan.com/s/67FRRzV/")}}},["商家试用"])])])}})},"131e":function(t,e,i){t.exports=i.p+"editor-assets/img/user-empty.9bcd7b5f.png"},"138d":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"fps-wrap",style:{right:(t.right_side_always_wide?240:0)+"px"},attrs:{title:"fps调试工具"}},t._l(t.points,(function(t,e){return i("div",{key:e,class:["indicator",{good:t>=55,neutral:t>40&&t<55,bad:t<=40}],style:{transform:"translateY(-"+15*Math.min(t,60)/60+"px)"}})})),0)},n=[],a=i("5530"),r=i("5880"),o={data(){return{maxSize:25,points:[],interval:null}},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["right_side_always_wide"])),{},{show(){return!1}}),mounted(){let t=0;const e=()=>{t++,requestAnimationFrame(e)};requestAnimationFrame(e),this.interval=setInterval(()=>{this.record(t),t=0},1e3)},beforeDestroy(){this.interval&&(clearInterval(this.interval),this.interval=null)},methods:{record(t){this.points.push(t),this.points.length>=this.maxSize&&(this.points=this.points.slice(1))}}},l=o,c=(i("3f2e"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,"35d816b9",null);e["default"]=h.exports},"13a8":function(t,e,i){"use strict";var s=i("c38a"),n=i.n(s);n.a},"13b3":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return 1===t.curDesigns.length?i("div",{ref:"controlRef",staticClass:"tailor-control-wrap",style:{position:"absolute",width:t.curDesign.style.width+"mm",height:t.curDesign.style.height+"mm"},on:{mousedown:t.handle_wrap_mouse_down}},[i("tailorImage",{attrs:{data:t.curDesign,"is-bg":!0}}),i("div",{staticClass:"image-viewport",on:{mousedown:t.handle_viewport_mouse_down}},[i("tailorImage",{attrs:{data:t.curDesign}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.resizing&&!t.moving,expression:"!resizing && !moving"}],staticClass:"center-and-no-rotate",style:{transform:"rotate(-"+t.curDesign.style.rotate+"deg)"}},[i("div",{staticClass:"editor-toolbar",style:{left:t.position.x+"mm",top:t.position.y+"mm",transform:"rotate("+t.position.rotate+"deg) scale("+t.position.scale+") translate(0,-60px)"}},[i("span",{staticStyle:{"margin-left":"16px","margin-right":"12px"}},[t._v("缩放")]),i("a-slider",{staticStyle:{width:"144px",display:"inline-block","margin-right":"20px"},attrs:{min:50,max:t.max_scale,"tip-formatter":t.showTipFormatter},on:{change:t.bg_scale_change,afterChange:t.bg_scale_after_change},model:{value:t.bg_scale,callback:function(e){t.bg_scale=e},expression:"bg_scale"}}),i("span",{staticClass:"btn",class:{disabled:!t.hasChange()},on:{click:t.onReset}},[t._v("重置")]),i("span",{staticClass:"btn",on:{click:t.onCancel}},[t._v("取消")]),i("span",{staticClass:"btn btn-submit",on:{click:t.onSave}},[t._v("确定")])],1)]),i("control-point",{style:{left:0,top:0,cursor:t.calculateCursor("nw")},attrs:{scale:t.scale,type:"circle",direction:"nw",position:{left:"-50%",top:"-50%"}},on:{resize:function(e){return t.doScale(e,"nw")}}}),t.showControlPoint?i("control-point",{style:{right:0,top:0,cursor:t.calculateCursor("ne")},attrs:{scale:t.scale,type:"circle",direction:"ne",position:{right:"-50%",top:"-50%"}},on:{resize:function(e){return t.doScale(e,"ne")}}}):t._e(),t.showControlPoint?i("control-point",{style:{left:0,bottom:0,cursor:t.calculateCursor("sw")},attrs:{scale:t.scale,type:"circle",direction:"sw",position:{left:"-50%",bottom:"-50%"}},on:{resize:function(e){return t.doScale(e,"sw")}}}):t._e(),t.showControlPoint?i("control-point",{style:{right:0,bottom:0,cursor:t.calculateCursor("se")},attrs:{scale:t.scale,type:"circle",direction:"se",position:{right:"-50%",bottom:"-50%"}},on:{resize:function(e){return t.doScale(e,"se")}}}):t._e(),t.showControlPoint?i("control-point",{style:{left:0,top:"50%",cursor:t.calculateCursor("w")},attrs:{scale:t.scale,type:"rect",direction:"w",position:{left:"-50%",top:"-50%"}},on:{resize:function(e){return t.doScale(e,"w")}}}):t._e(),i("control-point",{style:{right:0,top:"50%",cursor:t.calculateCursor("e")},attrs:{scale:t.scale,type:"rect",direction:"e",position:{right:"-50%",top:"-50%"}},on:{resize:function(e){return t.doScale(e,"e")}}}),["img","qrcode","barcode","table"].includes(this.curDesign.type)&&t.showControlPoint?i("control-point",{style:{left:"50%",top:0,cursor:t.calculateCursor("n")},attrs:{scale:t.scale,type:"rect",direction:"n",position:{left:"-50%",top:"-50%"}},on:{resize:function(e){return t.doScale(e,"n")}}}):t._e(),["img","qrcode","barcode","table"].includes(this.curDesign.type)&&t.showControlPoint?i("control-point",{style:{left:"50%",bottom:0,cursor:t.calculateCursor("s")},attrs:{scale:t.scale,type:"rect",direction:"s",position:{left:"-50%",bottom:"-50%"}},on:{resize:function(e){return t.doScale(e,"s")}}}):t._e(),t._l(2,(function(e){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.moving||t.resizing,expression:"moving || resizing"}],key:"h"+e,staticClass:"grid-line h",style:{top:33.33*e+"%"}})})),t._l(2,(function(e){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.moving||t.resizing,expression:"moving || resizing"}],key:"v"+e,staticClass:"grid-line v",style:{left:33.33*e+"%"}})}))],2):t._e()},n=[],a=(i("ddb0"),i("5530")),r=i("5880"),o=i("2b1a"),l=i("fe94"),c=i("60bb"),h=i.n(c),d=i("365c"),u=i("abd4"),p=i("5612"),f=i("c95d"),m={components:{tailorImage:p["default"],controlPoint:f["default"]},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["is_outside","project_data","knife_data","cur_tailor_uuid","cur_cutout_uuid","scale"])),Object(r["mapGetters"])("editor-v2",["curDesigns","curDesign","design_data","outside_designs_loaded","inside_designs_loaded"])),{},{designs(){return this.design_data},isTable(){return"table"===this.design.type},isInside(){return!this.is_outside},globalRotate(){return this.project_data.rotate},showControlPoint(){return this.design&&this.design.style.width*this.scale>3&&this.design.style.height*this.scale>3},designCenter(){let t=null;if(0===this.globalRotate)t={x:this.design.style.left+this.design.style.width/2,y:this.design.style.top+this.design.style.height/2};else if(90===this.globalRotate)t={x:this.knife_data.totalY-this.design.style.top-this.design.style.height/2,y:this.design.style.left+this.design.style.width/2};else if(180===this.globalRotate)t={x:this.knife_data.totalX-this.design.style.left-this.design.style.width/2,y:this.knife_data.totalY-this.design.style.top-this.design.style.height/2};else{if(270!==this.globalRotate)throw new Error("Unknown rotate, "+this.globalRotate);t={x:this.knife_data.totalY-this.design.style.top-this.design.style.height/2,y:this.knife_data.totalX-this.design.style.left-this.design.style.width/2}}return t},rotate(){return this.project_data.rotate},rotateStyle(){const t={position:"absolute",cursor:"grab",height:18/this.scale+"px",width:18/this.scale+"px",backgroundImage:`url(${i("3167")})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",pointerEvents:"auto"},e=-30/this.scale+"px";return 0===this.globalRotate?(t.top=e,t.left="50%",t.transform="translate(-50%, -50%)"):90===this.globalRotate?(t.left=e,t.top="50%",t.transform="translate(-50%, -50%)"):180===this.globalRotate?(t.bottom=e,t.left="50%",t.transform="translate(-50%, 50%)"):(t.right=e,t.bottom="50%",t.transform="translate(50%, 50%)"),t},origin(){return{x:0,y:0}},position(){return u["default"].getPosition(this.curDesign.style,this.project_data.rotate,this.scale,d["DPI"])}}),data(){return{cursors:["n","ne","e","se","s","sw","w","nw"],design:null,rotateValue:0,oldBg:{},oldStyle:{},bg_scale:100,max_scale:300,moving:!1,resizing:!1}},mounted(){this.oldBg=Object.assign({},this.curDesign.bg),this.oldStyle=Object.assign({},this.curDesign.style),this.initDesign(),this.design&&(this.rotateValue=this.design.style.rotate||0,this.calc_bg_scale(),window.addEventListener("keydown",this.onKeyDown))},beforeDestroy(){window.removeEventListener("keydown",this.onKeyDown)},methods:{setTailoringUUID(){this.$store.commit("editor-v2/set_cur_tailor_uuid","")},showTipFormatter(t){return t<100?"小于图框":t>=300?"已达最大值":t+"%"},hasChange(){const{oldBg:t,oldStyle:e}=this,{bg:i,style:s}=this.curDesign;if(!t||!e)return!1;const n=["x","y","width","height"];for(let r=0;r<n.length;r++){const e=n[r];if(t[e]!==i[e])return!0}const a=["width","height"];for(let r=0;r<a.length;r++){const t=a[r];if(e[t]!==s[t])return!0}return!1},onKeyDown(t){const{keyCode:e}=t;this.cur_tailor_uuid&&(27===e?this.onCancel():13===e&&this.onSave())},calc_bg_scale(){const{bg:t,style:e}=this.design;t&&(this.bg_scale=Math.round(100*Math.min(t.width/e.width,t.height/e.height)),this.bg_scale>300&&(this.max_scale=500))},onCancel(){this.onReset(),this.setTailoringUUID("")},bg_scale_change(t){const{bg:e,style:i}=this.design;let s=0,n=0;if(i.width/e.width>i.height/e.height){const t=i.width;s=t,n=t*e.height/e.width}else{const t=i.height;s=t*e.width/e.height,n=t}const a=s*t/100,r=n*t/100,o=e.x-(a-e.width)/2,l=e.y-(r-e.height)/2;e.width=a,e.height=r,e.x=o,e.y=l},bg_scale_after_change(t){(t<100||t>300)&&this.adjustSize()},onReset(){this.hasChange()&&(this.curDesign.bg=Object.assign({},this.oldBg),this.curDesign.style=Object.assign({},this.oldStyle),this.calc_bg_scale())},onSave(){const{uuid:t,bg:e}=this.curDesign;this.designs.forEach(i=>{i.uuid===t&&(i.bg=e)}),this.setTailoringUUID("")},handle_wrap_mouse_down(t){t.stopPropagation()},initDesign(){if(!this.curDesign)return null;const t=this.curDesign.uuid;this.isInside?this.design=this.project_data.inside_design_data.filter(e=>e.uuid===t)[0]:this.design=this.project_data.design_data.filter(e=>e.uuid===t)[0]},calculateCursor(t){let e=this.rotateValue+22;e+=this.globalRotate;const i=parseInt(e/45);let s=i+this.cursors.indexOf(t);s%=this.cursors.length,s<0&&(s+=this.cursors.length);const n=this.cursors[s]+"-resize";return n},calculatePosition(t){let e=null;return"nw"===t?e={x:this.design.style.left,y:this.design.style.top}:"ne"===t?e={x:this.design.style.left+this.design.style.width,y:this.design.style.top}:"sw"===t?e={x:this.design.style.left,y:this.design.style.top+this.design.style.height}:"se"===t?e={x:this.design.style.left+this.design.style.width,y:this.design.style.top+this.design.style.height}:"n"===t?e={x:this.design.style.left+this.design.style.width/2,y:this.design.style.top}:"e"===t?e={x:this.design.style.left+this.design.style.width,y:this.design.style.top+this.design.style.height/2}:"s"===t?e={x:this.design.style.left+this.design.style.width/2,y:this.design.style.top+this.design.style.height}:"w"===t&&(e={x:this.design.style.left,y:this.design.style.top+this.design.style.height/2}),e},calculateRotation(t,e,i){const s=Math.cos(i/180*Math.PI),n=Math.sin(i/180*Math.PI),a=t.x-e.x,r=t.y-e.y;return{x:a*s-r*n+e.x,y:a*n+r*s+e.y}},handle_viewport_mouse_down(t){if(t.stopPropagation(),0!==t.button)return;const e=this.design.bg.x,i=this.design.bg.y,s=this.design.bg.width,n=this.design.bg.height,a=this.design.style.width,r=this.design.style.height;document.onmousemove=this.moveThrottle(t.clientX,t.clientY,e,i,s,n,a,r),document.onmouseup=()=>{this.adjustSize(),this.moving=!1,document.onmousemove=null,document.onmousedown=null,document.onmouseup=null}},_parse_moveoffset(t,e,i){const{scale:s}=this,n=this.project_data.rotate;let a=t/(s*d["DPI"]),r=e/(s*d["DPI"]);90===n?[a,r]=[r,-a]:180===n?[a,r]=[-a,-r]:270===n&&([a,r]=[-r,a]);const o=Math.PI*i/180,l=a*Math.cos(o)+r*Math.sin(o),c=-a*Math.sin(o)+r*Math.cos(o);return{x:l,y:c}},moveThrottle(t,e,i,s,n,a,r,o){return h.a.throttle(n=>{const a=this._parse_moveoffset(n.clientX-t,n.clientY-e,this.design.style.rotate);return this.design.bg.x=a.x+i,this.design.bg.y=a.y+s,this.moving=!0,!1},5)},doScale(t,e){if(this.curDesign&&this.curDesign.locked)return;this.$store.commit("editor/setShowSizeTip",!0);const i=this.design.style.width,s=this.design.style.height,n=this.design.style.fontSize||0,a=this.design.style.lineHeight||0,r=this.cursors.indexOf(e);let c=r+4;c>=this.cursors.length&&(c%=this.cursors.length);let h=this.calculatePosition(e);this.$store.commit("editor/setMousePosition",{x:h.x*d["DPI"],y:h.y*d["DPI"]});let u=this.calculatePosition(this.cursors[c]);const p={x:this.design.style.left+this.design.style.width/2,y:this.design.style.top+this.design.style.height/2};h=Object(o["b"])(h.x,h.y,p.x,p.y,this.design.style.rotate||0),u=Object(o["b"])(u.x,u.y,p.x,p.y,this.design.style.rotate||0);const f=document.getElementById("svgContainer")&&document.getElementById("svgContainer").getBoundingClientRect();if(!f)return;const m={x:h.x-u.x,y:h.y-u.y},g=Math.sqrt(m.x*m.x+m.y*m.y);m.x/=g,m.y/=g;let v=parseInt(this.globalRotate/90)%4;v<0&&(v+=4);let b=null;"font"===this.design.type&&(b=document.querySelector("#dragFont"+this.design.uuid)),document.onmousemove=r=>{this.resizing=!0;const o=this.design.style.left,c=this.design.style.top,p=this.design.style.width,f=this.design.style.height;let g=(r.clientX-t.clientX)/this.scale/d["DPI"],y=(r.clientY-t.clientY)/this.scale/d["DPI"];1===v?[g,y]=[y,-g]:2===v?[g,y]=[-g,-y]:3===v&&([g,y]=[-y,g]);const _={x:(g*m.x+y*m.y)*m.x,y:(g*m.x+y*m.y)*m.y},x={x:h.x+_.x,y:h.y+_.y};if(this.$store.commit("editor/setMousePosition",{x:x.x*d["DPI"],y:x.y*d["DPI"]}),this.applyPointBack(e,x,u,i,s),this.design.style.width<1&&(this.design.style.width=p,this.design.style.left=o),this.design.style.height<1&&(this.design.style.height=f,this.design.style.top=c),2===e.length&&"font"===this.design.type)this.design.style.fontSize=this.design.style.width/i*n,this.design.style.lineHeight=this.design.style.width/i*a;else if(1===e.length&&"font"===this.design.type&&b){const t=Object(l["a"])(this.design.style.fontSize).mm2px(),e=t>12?1:t/12;this.design.style.height=b.clientHeight*e/d["DPI"]}const w={width:this.design.style.width*d["DPI"],height:this.design.style.height*d["DPI"],x:this.design.style.left*d["DPI"],y:this.design.style.top*d["DPI"],style:{}};w.style.width=this.design.style.width,w.style.height=this.design.style.height,w.style.left=this.design.style.left,w.style.top=this.design.style.top,this.design.style.fontSize&&(w.style.fontSize=this.design.style.fontSize),this.design.style.lineHeight&&(w.style.lineHeight=this.design.style.lineHeight)},document.onmouseup=t=>{this.adjustSize(),this.resizing=!1,this.$store.commit("editor/setShowSizeTip",!1),this.$store.dispatch("saveIsOpt",!1),this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside),document.onmousedown=null,document.onmousemove=null}},adjustSize(){const{bg:t,style:e}=this.design,i=t.x,s=t.y,n=t.height,a=t.width,r=e.width,o=e.height,{oldBg:l}=this;if(i>0&&(this.design.bg.x=0),i<r-a&&(this.design.bg.x=r-a),s>0&&(this.design.bg.y=0),s<o-n&&(this.design.bg.y=o-n),t.width<e.width){const i=l.height/l.width;t.width=e.width,t.height=i*t.width,t.x=0,t.y=0}if(t.height<e.height){const i=l.width/l.height;t.height=e.height,t.width=i*t.height,t.x=0,t.y=0}this.calc_bg_scale()},applyPointBack(t,e,i,s,n){const a=(e.x+i.x)/2,r=(e.y+i.y)/2,l=Object(o["b"])(e.x,e.y,a,r,-this.design.style.rotate),c=Object(o["b"])(i.x,i.y,a,r,-this.design.style.rotate);2===t.length?"nw"===t?(this.design.style.width=c.x-l.x,this.design.style.height=c.y-l.y,this.design.style.left=l.x,this.design.style.top=l.y):"ne"===t?(this.design.style.width=-c.x+l.x,this.design.style.height=c.y-l.y,this.design.style.left=c.x,this.design.style.top=l.y):"se"===t?(this.design.style.width=-c.x+l.x,this.design.style.height=-c.y+l.y,this.design.style.left=c.x,this.design.style.top=c.y):"sw"===t&&(this.design.style.width=c.x-l.x,this.design.style.height=-c.y+l.y,this.design.style.left=l.x,this.design.style.top=c.y):"n"===t?(this.design.style.height=c.y-l.y,this.design.style.left=l.x-s/2,this.design.style.top=l.y):"e"===t?(this.design.style.width=l.x-c.x,this.design.style.left=c.x,this.design.style.top=c.y-n/2):"s"===t?(this.design.style.height=l.y-c.y,this.design.style.left=c.x-s/2,this.design.style.top=c.y):"w"===t&&(this.design.style.width=c.x-l.x,this.design.style.left=l.x,this.design.style.top=l.y-n/2)}},watch:{cur_tailor_uuid:function(t){t&&(this.oldBg=Object.assign({},this.curDesign.bg),this.oldStyle=Object.assign({},this.curDesign.style))}}},g=m,v=(i("59fc"),i("2877")),b=Object(v["a"])(g,s,n,!1,null,"73dae9f3",null);e["default"]=b.exports},"13ce":function(t,e,i){t.exports=i.p+"editor-assets/img/pre.4c89620b.svg"},"13da":function(t,e,i){"use strict";var s=i("5a6f"),n=i.n(s);n.a},"13f9":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"width-height-input-wrap"},[s("div",{staticClass:"flex flex-between item-center"},[s("input-number",{attrs:{disabled:t.curDesign.locked,value:Math.round(t.curDesign.style.width),unit:"mm",suffix:"宽",min:1,max:2*t.knife_data.totalX},on:{confirm:t.onSetWidth}}),s("span",{staticClass:"length-lock-btn",on:{click:t.onSwitchLengthLock}},[t.curDesign.style.lengthLock?s("img",{attrs:{src:i("3cbe")}}):s("img",{attrs:{src:i("af93")}})]),s("input-number",{attrs:{disabled:t.curDesign.locked,value:Math.round(t.curDesign.style.height),unit:"mm",suffix:"高",min:1,max:2*t.knife_data.totalY},on:{confirm:t.onSetHeight}})],1)])},n=[],a=i("5530"),r=i("5880"),o=i("da3e"),l={components:{inputNumber:o["default"]},data(){return{}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["knife_data"])),Object(r["mapGetters"])("editor-v2",["curDesign"])),{},{designWhRatio(){return this.curDesign.style.width/this.curDesign.style.height},isSvg(){return/\.svg$/.test(this.curDesign.src)}}),methods:{onSetWidth(t){if(!this.curDesign)return;const e=Number.parseInt(t),i=e/this.curDesign.style.width,s=this.curDesign.style.height/this.curDesign.style.width;this.curDesign.style.width=e,this.curDesign.style.lengthLock||(this.curDesign.style.height=e*s),this.curDesign.bg.width*=i,this.curDesign.bg.x*=i,this.curDesign.bg.y*=i,this.curDesign.style.lengthLock||(this.curDesign.bg.height=this.curDesign.bg.width*s)},onSetHeight(t){if(!this.curDesign)return;const e=Number.parseInt(t),i=e/this.curDesign.style.height,s=this.curDesign.style.width/this.curDesign.style.height;this.curDesign.style.height=e,this.curDesign.style.lengthLock||(this.curDesign.style.width=e*s),this.curDesign.bg.height*=i,this.curDesign.bg.x*=i,this.curDesign.bg.y*=i,this.curDesign.style.lengthLock||(this.curDesign.bg.width=this.curDesign.bg.height*s)},onSwitchLengthLock(){this.curDesign.style.lengthLock=!this.curDesign.style.lengthLock}}},c=l,h=(i("a33e"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,"6acfa4bf",null);e["default"]=d.exports},1409:function(t,e,i){t.exports=i.p+"editor-assets/img/e4-active.ff3c79db.svg"},"149a":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isCup?i("for-cup"):i("for-box")},n=[],a=i("5530"),r=i("5880"),o=i("dbbc"),l=i("ab70"),c={components:{forBox:o["default"],forCup:l["default"]},computed:Object(a["a"])({},Object(r["mapGetters"])("editor-v2",["isCup"]))},h=c,d=i("2877"),u=Object(d["a"])(h,s,n,!1,null,null,null);e["default"]=u.exports},"14b7":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"fo-12 pfow "},[t._v("高度")]),s("div",{staticClass:"light-render-input"},[s("input",{staticClass:"light-render-input",domProps:{value:t.rotate+t.rotateUnit},on:{focus:function(e){t.rotateUnit="",e.target.select()},blur:t.rotateInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.rotateInput(e)}}})])]),s("div",{staticClass:"flex flex-center mt-12 mb-24"},[s("div",{staticClass:"light-height"},[s("div",{staticClass:"line-panel"},[s("div",{ref:"linePanel",staticClass:"line"})]),s("img",{staticClass:"lh-img",attrs:{src:i("20c5")}}),s("div",{staticClass:"flag-panel",style:{left:t.fx+"px",top:t.fy+"px"},on:{mousedown:t.mouseDown}},[t._m(0)])])])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flag flex flex-center item-center"},[s("img",{attrs:{src:i("3230")}})])}],a=i("6116"),r={props:{value:{type:Number,require:!0},position:{type:Object},xrotate:{type:Number}},model:{prop:"value",event:"change"},data(){return{fx:0,fy:130,rotate:this.value,rotateUnit:"°"}},watch:{value(t){this.rotate=t,this.toAxis()}},mounted(){this.toAxis()},methods:{rotateInput(t){"blur"===t.type&&(this.rotateUnit="°");let e=0;t.target.value&&(e=parseFloat(Object(a["c"])(t.target.value))),e>=360&&(e=0),e<0&&(e=0),this.rotate!=e&&(this.rotate=e,this.$emit("change",e),this.emitSunHeight(),this.$emit("after-change",e),this.toAxis())},mouseDown(t){const e=this.$refs.linePanel.getBoundingClientRect(),i=e.x+e.width/2,s=e.y+e.height/2;document.onmousemove=t=>{let e=t.clientX-i,n=t.clientY-s;const a=Math.sqrt(Math.pow(e,2)+Math.pow(n,2)),r=a/130;let o=e/r,l=n/r;return o>0&&(o=0,l=-130),l>0&&(l=0,o=-130),this.toRotate(o,l),this.fx=o+130,this.fy=l+130,!1},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}},toRotate(t,e){const i=Math.atan2(-e,-t);let s=i/(2*Math.PI)*360;s<0&&(s+=360),this.rotate=parseInt(s),this.$emit("change",this.rotate),this.emitSunHeight()},emitSunHeight(){const t=10,e=-Math.cos((this.rotate+90)*Math.PI/180)*t,i=Math.sqrt(100-Math.pow(e,2)),s=-Math.cos(this.xrotate*Math.PI/180)*i,n=-Math.sin(this.xrotate*Math.PI/180)*i;this.$emit("position-change",{x:s,y:e,z:n}),this.$bus.$emit("sunHeightChange",{y:e,x:s,z:n})},toAxis(){let t=130*Math.cos((this.rotate+180)*Math.PI/180),e=130*Math.sin((this.rotate+180)*Math.PI/180);this.fx=t+130,this.fy=e+130}}},o=r,l=(i("b8cd"),i("2877")),c=Object(l["a"])(o,s,n,!1,null,"6a14df0d",null);e["default"]=c.exports},"14f9":function(t,e,i){"use strict";var s=i("8ba7"),n=i.n(s);n.a},"14ff":function(t,e,i){},"153e":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.knife_data?i("div",{staticClass:"mini-map-wrap"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.title,expression:"title"}],staticClass:"title",on:{dblclick:function(e){return t.onToggleFace(null)}}},[t._v(t._s(t.title)+"面")]),i("div",{staticClass:"faces-content",style:{transform:"rotate("+t.project_data.rotate+"deg)"}},[i("svg",{style:{overflow:"inherit",transform:"scale("+(t.is_outside?1:-1)*t.scale_ratio+","+t.scale_ratio+")"},attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:t.knife_data.totalX,height:t.knife_data.totalY},on:{mouseout:function(e){t.hover_face_name=""}}},[t._l(t.knife_data.facesForSvg,(function(e,s){return i("path",{key:"path"+s,class:"face "+(t.cur_face_name===e.name&&"active"),attrs:{"stroke-width":t.strokeWidth,d:e.d},on:{dblclick:function(i){return t.onToggleFace(e.name)},mouseover:function(i){t.hover_face_name=e.name}}})})),t._l(t.knife_data.folds,(function(e,s){return i("g",{key:s},[e.path?t._e():i("line",{attrs:{"stroke-width":t.strokeWidth,stroke:"rgba(255,255,255,1)",x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}})])}))],2)]),i("div",{staticClass:"remark"},[t.cateId?i("a",{attrs:{target:"_blank",href:"/models/"+t.cateId}},[t._v(" 模型ID："+t._s(t.cate_no)+" ")]):i("span",[t._v("模型ID："+t._s(t.cate_no))])])]):t._e()},n=[],a=i("5530"),r=i("5880"),o={data(){return{hover_face_name:"",cateId:null}},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["is_outside","project_data","cur_face_name","knife_data"])),{},{title(){return this.hover_face_name||this.cur_face_name},cate_no(){return this.project_data.cate.cate_no},scale_ratio(){const{totalX:t,totalY:e}=this.knife_data;return.9*Math.min(140,140)/Math.max(t,e)},strokeWidth(){return 1/this.scale_ratio}}),mounted(){this.$http.get("/api/v2/blanks",{pageSize:1,keywords:this.cate_no}).then(t=>{t.data&&t.data.length&&(this.cateId=t.data[0].id)})},methods:{onToggleFace(t){const{cur_face_name:e}=this;e&&e===t?this.$store.commit("editor-v2/set_cur_face_name",null):this.$store.commit("editor-v2/set_cur_face_name",t)}}},l=o,c=(i("35ac"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,"5cbf9a2a",null);e["default"]=h.exports},"15a5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF8WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTAxLTE3VDExOjQwOjA1KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTAxLTE3VDExOjQwOjA1KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wMS0xN1QxMTo0MDowNSswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDplN2FkZTMyYS04ZWM0LWE1NDEtYjA4My0xM2I1ODlkNTEzOTkiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2YTQyNWJkYS0wZmFlLTBlNGMtOGFjNy0zZWVlMjA5MDAyOWEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpiNDIwNmQ5MC1jMGQyLWUyNDktYmE3MS00N2ZjMDMxZDVmZDQiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmI0MjA2ZDkwLWMwZDItZTI0OS1iYTcxLTQ3ZmMwMzFkNWZkNCIgc3RFdnQ6d2hlbj0iMjAyMC0wMS0xN1QxMTo0MDowNSswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDplN2FkZTMyYS04ZWM0LWE1NDEtYjA4My0xM2I1ODlkNTEzOTkiIHN0RXZ0OndoZW49IjIwMjAtMDEtMTdUMTE6NDA6MDUrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4wIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6bdIvkAAADlUlEQVRIibVWS0wTURR9naHM1FIGGVFaqSRSKjSERBSjJv6IWvATW0XdaFQUCAtxYUz8JZq4MHEhfjEx0SY0KmJqcKFxgdYEIosCotgKESifSEsBO1OoHTrTGReTNGX6Qwtndd95997z3rtv3h0Rx3Ec4J4OPGkebbaRNipAgcSAwqgG0+iUuoqc0yIgErEce/zzMbPTnGDecJRkljRsNsLK41mGAcOCZwcA2GfsaclpMKtnHT7HYggAAEiahBk9w3DMIgm4/W4o8arGABWgoLhOCITIJfIl8JL/00iKNoGJsRp1jVZeqk5V84yLcvVP978abno9+nr+pypSmOQCCgJQpaqyNu9cWnJaxJixP2PXe669/fV2PgKw7KhMkL1+w6Oq3CoURqPFyMSyvSv3uShXD/EtroCwBtW51fuz9vP2vd675zvPB7gAP/Sz/gtdF+733QMAQCLoVtGtUkXZvwmgEFqbd463A1zAMGh4NdJE+gmecfgcjUMvGocag/5XC67GFZhT5I0ZG1PFqbwNi+DWXW3TzHQ6gvNMtjS7c08XAiEe2vNp/NMP0uahPdIkqZfxzldALlGEDlPEKSnilFBmGbLMaDc2Db8sX1VeptiDI/iJ1SdtpNU0Yvo4/jG+wCQ1EWMtDMucaj+5ZfnW5m1vxJA4yKtT1Tql3uw0X/l6edg7LIiac01xBLeUdiAwElHg5veb+Vi+TqmLtoJR72iZudTtd4eSc4o8NTv1fOhZxOA+Tx9JE3x2wk9c+nJxcGaQn3r887FpxAQAUEqVD4sfCgKF1/RGz43u393hAu/H3p9RVfI2SZOWKYvT5+SH3e5uK/Gdt7et2K7BNKGBwqdilp090nb4/voHWoU2lHf6nCqZirezpdktOz8Ep+o31Id6FmAFNtIWdQcAAC/jNdobBCSenM5ybLhzOHwBX6wd8DiQpWtxtNztu+PwOdSyNcvRDPuMfTehLVxaGDs7zdKWKUt8gbre28ELF+x3db11hk1xmqtxsMFJOUMZ4WPHg6TJcHJgZkACS4rx4mjZ2yfaazvOsmDOSUYWiIY2V+s4Nb4uvUiSJOw/VsJa3nrIz/kFfIR+EBeYGNMrD67H1+HJOEl7bKRVIVmpVWiL3q3lALcAAhGhkqkmqUmCJgR81Jb5r+if7o/IQzE6V+JAYRQSfNkLCw2mgWK8jolDr9RDFTmnd2TuWIzsJZklp3IqRIv9+/4X3AtwjAZg+9sAAAAASUVORK5CYII="},"162e":function(t,e,i){"use strict";i.r(e);var s,n,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{position:"relative"}},[!t.isHome||t.isLogged&&!t.isFullCharged?t._e():i("BigBanner"),i("div",{staticClass:"layout"},[i("top-main",{attrs:{"has-big-banner":t.isHome&&(!t.isLogged||t.isFullCharged)}}),i("div",{staticClass:"layer-body flex flex-start"},[i("div",{staticClass:"layout-siderbar"},[i("SliderBar")],1),i("div",{ref:"layoutContent",staticClass:"layout-content layout-body-scroll-container",style:"height:"+t.height+"px"},[i("div",{staticClass:"router-layout",style:"min-height:"+t.bodyHeight+"px"},[i("router-view")],1),t.isMch?t._e():i("div",[i("Footer")],1)]),i("transition",{attrs:{name:"fade"}},[t.show&&!t.isMch&&t.isLogged?i("div",[i("Sidebar",{attrs:{isTop:t.isTop},on:{toTop:function(e){return t.scrollToTop(300)}}})],1):t._e()])],1)],1),i("div",{staticClass:"dialog-wrapper-section"},[i("ExportStructPaperDialog",{attrs:{visible:t.isExportStructPaperDialogShowing},on:{close:t.hideExportStructPaperDialog}})],1)],1)},r=[],o=i("5530"),l=i("ca9b"),c=i("f4b1"),h=i("d214"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sidebar-container"},[i("div",{staticClass:"float-top-button-container"},[i("a",{attrs:{href:t.links.vipTryEntry,target:"_blank"}},[i("img",{staticClass:"vip-try-entry",attrs:{src:t.vipTryEntry,alt:""}})])]),i("ul",{staticClass:"sidebar"},[i("a-tooltip",{attrs:{placement:"left"}},[i("template",{slot:"title"},[t._v(" 帮助中心 ")]),i("li",{staticClass:"sidebar-li bt",on:{click:t.toHelp}},[i("i",{staticClass:"iconfont icon-bangzhu"})])],2),i("li",{staticClass:"sidebar-li",on:{mouseover:function(e){return t.handleFlag(1)},mouseleave:t.handleClose}},[i("i",{staticClass:"iconfont icon-kefu1"}),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.flag,expression:"flag === 1"}],staticClass:"sidebar-wrap"},[i("div",{staticClass:"sidebar-tip"},[i("h5",{staticClass:"sidebar-tip-title"},[t._v("咨询客服")]),i("Service",[i("div",{staticClass:"tip_btn mt-8"},[i("i",{staticClass:"iconfont icon-bianji mr-4"}),t._v(" 在线咨询 ")])]),i("p",{staticClass:"sidebar-tip-time mt-8 fo-gray",staticStyle:{color:"rgba(0,0,0,.45)"}},[t._v(" 工作时间:9:00-18:00 ")]),i("div",{staticClass:"line"}),i("p",{staticClass:"fo-12 fo-gray text-center",staticStyle:{color:"rgba(0,0,0,.85)"}},[t._v(" 请扫下方微信二维码添加客服 ")]),i("img",{staticClass:"slide-image mt-8",attrs:{src:t.wechatService2,alt:""}})],1)])])],1),i("li",{staticClass:"sidebar-li",on:{mouseover:function(e){return t.handleFlag(2)},mouseleave:t.handleClose}},[i("i",{staticClass:"iconfont icon-weixin"}),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.flag,expression:"flag === 2"}],staticClass:"sidebar-wrap"},[i("div",{staticClass:"sidebar-tip"},[i("ul",{staticClass:"tabbar"},t._l(t.menus,(function(e,s){return i("li",{key:s,class:t.current===s?"active":"",on:{click:function(e){t.current=s}}},[t._v(" "+t._s(e.title)+" ")])})),0),i("img",{staticClass:"slide-image mt-20",attrs:{src:t.target.img,alt:""}}),i("p",{staticClass:"fo-12 fo-gray text-center mt-20",staticStyle:{color:"rgba(0,0,0,.85)"}},[t._v(" "+t._s(t.target.desc)+" ")])])])])],1),i("li",{staticClass:"sidebar-li",on:{mouseover:function(e){return t.handleFlag(3)},mouseleave:t.handleClose}},[i("i",{staticClass:"iconfont icon-baozhuanqian"}),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:3===t.flag,expression:"flag === 3"}],staticClass:"sidebar-wrap"},[i("div",{staticClass:"sidebar-tip"},[i("h5",{staticClass:"sidebar-tip-title"},[t._v("设计师招募")]),i("img",{staticClass:"slide-image",attrs:{src:t.wechatService,alt:""}}),i("p",{staticClass:"fo-12 fo-gray text-center mt-20",staticStyle:{color:"rgba(0,0,0,.85)"}},[t._v(" 扫一扫，联系客服 "),i("br"),t._v(" 成为包小盒签约设计师~ ")])])])])],1)],1),t.isTop?i("div",{staticClass:"placeholder mt-16"}):i("ul",{staticClass:"sidebar mt-16"},[i("li",{staticClass:"sidebar-li",on:{click:t.totop}},[i("i",{staticClass:"iconfont icon-zhiding"})])])])},u=[],p=i("0d67"),f={data(){return{links:{vipTryEntry:"https://www.baoxiaohe.com/share"}}}},m={props:{isTop:{type:Boolean,default:!1}},mixins:[f],components:{Service:p["a"]},data(){return{flag:-1,wechatService:"https://cdn.baoxiaohe.com/user-materials/feea4396-61fd-4d98-addc-3afac9e129e6.jpg",wechatService2:"https://cdn.baoxiaohe.com/user-materials/c267b9bb-7efb-4488-99de-85552cec6e28.jpg",vipTryEntry:i("c209"),current:0,menus:[{title:"公众号",img:"https://cdn.baoxiaohe.com/user-materials/949c3744-6b1e-4d9f-a6df-cdc46a97c43b.jpg",desc:"扫一扫，关注包小盒公众号"},{title:"小程序",img:"https://cdn.baoxiaohe.com/user-materials/2c8de22b-0914-46cc-98ff-a094337d406e.jpg",desc:"扫一扫，使用微信小程序"}]}},computed:{active(){return t=>t===this.flag?"active":""},target(){return this.menus[this.current]}},methods:{handleClose(){this.flag=-1},handleFlag(t){this.flag=t},totop(){this.$emit("toTop")},toHelp(){window.open("https://help.baoxiaohe.com/support/")}}},g=m,v=(i("f597"),i("2877")),b=Object(v["a"])(g,d,u,!1,null,null,null),y=b.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"your-carousel"},[s("div",{staticClass:"_bg"},[t._l(t.videos,(function(e,i){return s("video",{directives:[{name:"show",rawName:"v-show",value:t.currentTab===i,expression:"currentTab === i"}],key:i,ref:"video-"+i,refInFor:!0,attrs:{preload:"auto",src:e.src,autoplay:"",loop:"",muted:""},domProps:{muted:!0},on:{playing:function(){return t.handleStart(i)},durationchange:function(e){return t.handleDurationChange(i,e)}}})})),s("div",{staticClass:"_bg-mask"})],2),s("div",{staticClass:"_content"},[s("div",{staticClass:"_elements"},[s("div",{staticClass:"text-container"},[s("div",{staticClass:"big-title-2"},[t._v("在线3D包装云设计工具")]),s("div",{staticClass:"big-title-1",staticStyle:{"margin-top":"8px"}},[t._v(" "+t._s(t.slogans[t.currentTab]||"3步上手，包装设计从未如此简单")+" ")])]),s("div",{staticStyle:{height:"48px"}}),s("NewDesign",{staticStyle:{display:"inline-block"}},[s("div",{staticClass:"nice-btn"},[s("div",[s("span",[t._v("免费设计")])]),s("div",[s("span",[t._v("限时注册送 3天 VIP会员，放肆渲染")])])])])],1),s("div",{staticClass:"_controls",style:"width:"+t.controlListWidth+";"},t._l(t.videos,(function(e,i){return s("VControl",{key:i,attrs:{text:e.title,isPlaying:t.videosIsPlaying[i]&&t.currentTab===i,duration:e.duration,background:"rgba(255, 255, 255, 0.2)"},on:{click:function(e){return t.handleControlClick(i)},end:function(e){return t.handleEnd(i)}},model:{value:t.videosPercent[i],callback:function(e){t.$set(t.videosPercent,i,e)},expression:"videosPercent[i]"}})})),1)]),s("div",{staticClass:"_fg"},[s("div",{staticClass:"fast-scroll",on:{click:t.handleFastScrollClick}},[s("img",{staticClass:"fast-scroll__icon",attrs:{src:i("1a1c")}})])])])},x=[],w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-control",on:{mouseover:t.handleMouseOver,click:function(e){return t.$emit("click",e)}}},[i("div",{staticClass:"control-text",style:"color:"+t.textColor+"; opacity:"+(t.isPlaying?1:t.textOpacity)+";"},[t._v(" "+t._s(t.text)+" ")]),i("div",{staticClass:"burn-progress",style:"width:"+t.width+"; height:"+t.height+"; background:"+t.background+";"},[i("div",{staticClass:"burn-out",style:"width:"+t.leftWidth}),i("div",{staticClass:"burn-in",style:"width:calc(100% - "+t.leftWidth+");"})])])},C=[],k={props:{isPlaying:{type:Boolean,default:!1},value:{type:Number,default:0},text:{type:String,default:""},width:{type:String,default:"160px"},height:{type:String,default:"2px"},background:{type:String,default:"#B86051"},textColor:{text:String,default:"#fff"},textOpacity:{text:Number,default:.8}},computed:{leftWidth(){return this.value+"%"}},watch:{value(t){t>=100&&this.emitEnd()},isPlaying(t){t?this.emitStart(this.value):this.emitStop(this.value)}},methods:{emitChange(t){this.$emit("change",t)},emitStart(t){this.$emit("start",t)},emitEnd(){this.$emit("end")},emitStop(t){this.$emit("stop",t)},handleMouseOver(){}}},S=k,A=(i("7fc1"),Object(v["a"])(S,w,C,!1,null,"5428996e",null)),O=A.exports,j={props:{isPlaying:{type:Boolean,default:!1},value:{type:Number,default:0},duration:{type:Number,default:1e6},loop:{type:Boolean,default:!1}},watch:{isPlaying:{handler(t){t?this.handlerStart():this.handleStop()},immediate:!0},value(t){t>=100&&this.handleEnd()}},beforeDestroy(){this.stop()},methods:{handleEnd(){this.loop?this.emitInput(0):(this.emitInput(100),this.stop())},stop(){this.timer&&clearInterval(this.timer)},handleStop(){this.stop()},handlerStart(){this.stop(),this.startPlay()},startPlay(){const t=200;this.timer=setInterval(()=>{this.emitInput(this.value+1/this.duration*(t/1e3)*100)},t)},emitInput(t){this.$emit("input",t)}},render(t){return t(O,{attrs:this.$attrs,on:this.$listeners,props:{value:this.value,isPlaying:this.isPlaying}},[])}},M=j,I=Object(v["a"])(M,s,n,!1,null,null,null),T=I.exports,E=i("750b"),D=(i("95af"),Object(E["b"])({props:{width:{type:String,default:""},feature:{type:[Object,Object],default:()=>({})},isLast:{type:Boolean,default:()=>!1}},setup(t){const e=Object(E["j"])(!1);return()=>Object(E["c"])("div",{class:["feature-box flex flex-center item-center px-40",{"feature-box--active":e.value}],on:{mouseleave:()=>{e.value=!1},mousemove:()=>{e.value=!0}},style:{}},[e.value?Object(E["c"])("div",{class:"_back"},[Object(E["c"])("img",{class:"_icon",attrs:{src:t.feature.iconActive,alt:""}}),Object(E["c"])("div",{class:"_title"},[t.feature.title]),Object(E["c"])("div",{class:"_desc"},[t.feature.desc])]):Object(E["c"])("div",{class:"_front"},[Object(E["c"])("img",{class:"_icon",attrs:{src:t.feature.iconActive,alt:""}}),Object(E["c"])("div",{class:"_title"},[t.feature.title])])])}})),L=i("2af2"),P=i("6116");const R=99.99;var z={components:{VControl:T,Box:D,NewDesign:L["a"]},data(){const t=[{src:"https://yun.baoxiaohe.com/static/1.mp4",title:"3D全景虚拟棚拍",duration:1e6},{src:"https://yun.baoxiaohe.com/static/2.mp4",title:"结构素材商用无忧",duration:1e6},{src:"https://yun.baoxiaohe.com/static/3.mp4",title:"在线设计所见所得",duration:1e6},{src:"https://yun.baoxiaohe.com/static/4.mp4",title:"在线印刷品质保证",duration:1e6}],e=t.map(()=>0),i=t.map(()=>!1);return{videosPercent:e,videos:t,videosIsPlaying:i,currentTab:0,slogans:["3步上手，包装设计从未如此简单","包装结构，尺寸可变，素材免费可商用","2D设计+3D效果=所见即所得","在线印刷，自动报价，一个起印"]}},computed:{controlListWidth(){const t=4,e=.625,i=12.5;return i*t+2*e*(t-1)+2*e+"em"},homeData(){return this.$store.state.home.pageData}},beforeDestroy(){this.$bus.$off("receiveHomepageData")},methods:{handleFastScrollClick(){Object(P["a"])(document.querySelector("html"),window.innerHeight,300)},handleStart(t){this.$set(this.videosIsPlaying,t,!0)},resetOtherFull(t){this.videosPercent.forEach((e,i)=>{t!==i&&(this.videosPercent[i]=R)})},resetOthersEmpty(t){this.videosPercent.forEach((e,i)=>{t!==i&&(this.videosPercent[i]=0)})},handleControlClick(t){let e=this.$refs["video-"+t];this.resetOthersEmpty(t),e&&(e=e[0],e.currentTime=0,this.videosPercent[t]=0),this.currentTab=t},handleDurationChange(t,e){this.videos[t].duration=e.target.duration},startVideo(t){let e=this.$refs["video-"+t];e&&(e=e[0],e.currentTime=0,e.play())},handleEnd(t){this.currentTab+=1,this.currentTab=this.currentTab%4,this.videosPercent[this.currentTab]=0,this.startVideo(this.currentTab)}}},N=z,B=(i("6d49"),Object(v["a"])(N,_,x,!1,null,"70fd6a8b",null)),F=B.exports,$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{visible:t.visible},on:{cancel:t.handleCancel}},[t._v(" ExportStructPaperDialog.vue ")])},U=[],H={props:{visible:{type:Boolean,default:!1}},methods:{handleCancel(){this.$emit("close")}}},V=H,G=Object(v["a"])(V,$,U,!1,null,"0e9201ce",null),W=G.exports,Y=i("5880");const q=3,X=["home","details","templates","models","blanks","personalcenter","orders","mydesign","vip"];var Q={components:{TopMain:l["default"],Footer:c["default"],SliderBar:h["default"],Sidebar:y,BigBanner:F,ExportStructPaperDialog:W},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({bodyHeight(){return this.height-325},isHome(){return"home"===this.$route.name}},Object(Y["mapState"])(["router","queries"])),Object(Y["mapGetters"])("profile",["isMch","isLogged"])),Object(Y["mapState"])("dialog",["isExportStructPaperDialogShowing"])),watch:{router(t){this.show=X.includes(this.$route.name),this.$refs.layoutContent&&(this.$refs.layoutContent.scrollTop=0),this.isFullCharged&&(this.isFullCharged=!1,this.hit=q)},queries(){this.$refs.layoutContent&&(this.$refs.layoutContent.scrollTop=0)}},data(){return{height:1e3,isTop:!0,show:!0,hit:q,isFullCharged:!1}},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(Y["mapActions"])("layout",["resize"])),Object(Y["mapMutations"])("dialog",["hideExportStructPaperDialog"])),{},{handleResize(){this.height=window.innerHeight-56,this.resize(),window.onresize=()=>{this.resize(),this.height=window.innerHeight-56}},handleScroll(){var t;this.isTop=!(null===(t=this.$refs.layoutContent)||void 0===t?void 0:t.scrollTop)},handleWheel(t){this.isTop&&t.deltaY<0?(this.hit--,this.hit<=0&&(this.isFullCharged=!0)):this.hit=q},scrollToTop(t){if(!this.$refs.layoutContent)return;if(0===this.$refs.layoutContent.scrollTop)return;const e=this.$refs.layoutContent.scrollTop||0;let i=e,s=null;const n=a=>{if(null!==s){if(i-=e*(a-s)/t,i<=0&&this.$refs.layoutContent)return this.$refs.layoutContent.scrollTop=0;this.$refs.layoutContent&&(this.$refs.layoutContent.scrollTop=i)}s=a,window.requestAnimationFrame(n)};window.requestAnimationFrame(n)}}),beforeDestroy(){this.$refs.layoutContent.removeEventListener("scroll",this.handleScroll)},mounted(){this.show=X.includes(this.$route.name),"/"===this.router&&(this.$refs.layoutContent.addEventListener("scroll",this.handleScroll),this.$refs.layoutContent.addEventListener("wheel",this.handleWheel)),this.handleResize()}},Z=Q,K=(i("d1df"),Object(v["a"])(Z,a,r,!1,null,null,null));e["default"]=K.exports},1653:function(t,e,i){},1687:function(t,e){var i="undefined"===typeof Float32Array?Array:Float32Array;function s(){var t=new i(6);return n(t),t}function n(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function r(t,e,i){var s=e[0]*i[0]+e[2]*i[1],n=e[1]*i[0]+e[3]*i[1],a=e[0]*i[2]+e[2]*i[3],r=e[1]*i[2]+e[3]*i[3],o=e[0]*i[4]+e[2]*i[5]+e[4],l=e[1]*i[4]+e[3]*i[5]+e[5];return t[0]=s,t[1]=n,t[2]=a,t[3]=r,t[4]=o,t[5]=l,t}function o(t,e,i){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+i[0],t[5]=e[5]+i[1],t}function l(t,e,i){var s=e[0],n=e[2],a=e[4],r=e[1],o=e[3],l=e[5],c=Math.sin(i),h=Math.cos(i);return t[0]=s*h+r*c,t[1]=-s*c+r*h,t[2]=n*h+o*c,t[3]=-n*c+h*o,t[4]=h*a+c*l,t[5]=h*l-c*a,t}function c(t,e,i){var s=i[0],n=i[1];return t[0]=e[0]*s,t[1]=e[1]*n,t[2]=e[2]*s,t[3]=e[3]*n,t[4]=e[4]*s,t[5]=e[5]*n,t}function h(t,e){var i=e[0],s=e[2],n=e[4],a=e[1],r=e[3],o=e[5],l=i*r-a*s;return l?(l=1/l,t[0]=r*l,t[1]=-a*l,t[2]=-s*l,t[3]=i*l,t[4]=(s*o-r*n)*l,t[5]=(a*n-i*o)*l,t):null}function d(t){var e=s();return a(e,t),e}e.create=s,e.identity=n,e.copy=a,e.mul=r,e.translate=o,e.rotate=l,e.scale=c,e.invert=h,e.clone=d},"16fd":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"sideRef",staticClass:"editor-upload"},[s("a-dropdown-button",{attrs:{type:"primary"},on:{click:function(e){t.$refs.sideRef.querySelector("input").click()}}},[s("UploadButton",{ref:"uploadRef",attrs:{limitImgSize:t.maxImageSize,limitSvgSize:t.limitSvgSize,limitCount:t.limitCount,nowCount:t.queryCount},on:{refresh:t.refresh}}),s("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[s("a-menu-item",{key:"1",on:{click:function(e){return t.$bus.$emit("show-psd-modal")}}},[s("img",{staticClass:"img mr-4",attrs:{src:i("104b")}}),t._v(" 导入psd ")])],1),s("div",{attrs:{slot:"icon"},on:{mouseenter:function(e){t.mouseHover=!0},mouseleave:function(e){t.mouseHover=!1}},slot:"icon"},[t.mouseHover?s("a-icon",{attrs:{type:"caret-up"}}):s("a-icon",{attrs:{type:"caret-down"}})],1)],1),s("div",{staticClass:"mt-12 flex flex-between item-center pr-12"},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"fo-12 fo-gray ml-4 flex flex-start item-center"},[s("a-tooltip",{attrs:{placement:"bottomRight"}},[s("template",{slot:"title"},[s("div",{staticClass:"fo-12"},[t._v(" 因印刷需要，上传的PNG/JPG图片分辨率不得低于300DPI；"),s("br"),t._v(" 单张图片大小不超过5M，个人VIP为10M，企业VIP为20M；"),s("br"),t._v(" SVG高清矢量文件上传大小限制500KB。 ")])]),s("img",{staticStyle:{"margin-top":"-1px"},attrs:{src:i("fdca"),height:"12px",alt:""}})],2),s("div",{staticClass:"ml-4"},[t._v("支持上传JPG/PNG/SVG格式的文件")])],1)]),s("img",{staticClass:"pointer",attrs:{src:i("f44d")},on:{click:function(e){t.showSet=!t.showSet}}})]),s("div",{staticClass:"editor-upload__setpanel mt-12 flex flex-between item-center pr-12",style:{height:t.showSet?"40px":0}},[s("div",{on:{click:function(e){return t.checkedAllChange()}}},[s("checkbox",{staticClass:"ml-4",attrs:{label:"全选"},model:{value:t.checkedAll,callback:function(e){t.checkedAll=e},expression:"checkedAll"}})],1),s("div",{staticClass:"flex flex-end item-center"},[s("div",{staticClass:"text-btn text-del fo-12 mr-12",on:{click:function(e){return t.delImgList()}}},[t._v("删除")]),s("div",{staticClass:"text-btn text-cancel fo-12",on:{click:function(e){t.showSet=!1}}},[t._v("取消")])])]),s("div",{staticClass:"editor-upload__content",style:{height:t.height+"px"},attrs:{id:"editorUploadContent"}},[s("div",{staticClass:"flex flex-between flex-wrap"},t._l(t.list,(function(e,n){return s("div",{key:e.id+"-"+n,staticClass:"editor-upload__content__image mt-8"},[s("div",{staticClass:"editor-upload__content__image-float"},[s("div",{staticClass:"flex flex-between item-center"},[s("div",[t.showSet?s("checkbox",{on:{change:function(e){return t.checkedItemChange(n)}},model:{value:e.active,callback:function(i){t.$set(e,"active",i)},expression:"item.active"}}):t._e()],1),s("div",{staticClass:"editor-upload__content__image-del flex flex-center item-center",on:{click:function(i){return t.delImgList(e.id,n)}}},[s("img",{attrs:{src:i("bbca")}})])])]),s("div",{staticClass:"editor-upload__content__image-panel"},[s("resizeable",{attrs:{item:e,index:n,"id-prefix":"uploadItem"},on:{mousedown:function(i){return t.uploadMove(i,e)}}})],1)])})),0),0===t.list.length?s("div",{staticClass:"flex flex-center item-center mt-32 pt-32"},[t._m(0)]):t._e(),t.noMore?s("div",{staticClass:"p-8 fo-12 fo-gray text-center w-100"},[t._v("没有更多了")]):t._e(),t.loading?s("a-spin",{attrs:{fix:""}},[s("a-icon",{staticClass:"spin-icon-load",attrs:{type:"loading",size:"20",color:"#FF6634"}})],1):t._e(),t.nextLoading?s("div",{staticClass:"m-auto mt-16"},[s("a-spin",{staticClass:"text-center"},[s("a-icon",{staticClass:"spin-icon-load",attrs:{type:"loading",size:"20",color:"#FF6634"}})],1)],1):t._e()],1),s("div",{staticClass:"upload-limit pr-12 "},[s("a-progress",{attrs:{percent:t.queryCount/t.limitCount*100,size:"small","show-info":!1,strokeColor:"#ff6634"}}),s("div",{staticClass:"flex flex-between item-center"},[s("div",{staticClass:"fo-gray fo-12 mt-4"},[t._v("已上传 "+t._s(t.queryCount)+"/"+t._s(t.limitCount)+" 张")]),s("a",{staticClass:"fo-theme fo-12 mt-4",on:{click:t.showPersonalVip}},[t._v("扩充容量")])])],1)],1)])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("img",{attrs:{src:i("00dc")}}),s("div",{staticClass:"fo-14 fo-gray text-center"},[t._v("暂无图片")])])}],a=(i("25f0"),i("ddb0"),i("5530")),r=i("52dd"),o=i("318a"),l=i("5880"),c=i("c64e"),h=i.n(c),d=i("ed08"),u=i("26a1"),p=i("a998"),f=i("365c"),m=i("da71"),g=i("9393"),v={components:{checkbox:r["a"],UploadButton:o["default"],Resizeable:p["default"]},mixins:[g["a"]],props:{load:{type:Boolean,default:!1}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(l["mapState"])(["scale"])),Object(l["mapState"])("profile",["vip","accessToken"])),Object(l["mapGetters"])("profile",["isPersonalVip","isProdVip","isVip"])),{},{maxImageSize(){return this.isPersonalVip?m["MAX_IMAGE_SIZE"]["vip"]:this.isProdVip?m["MAX_IMAGE_SIZE"]["business"]:m["MAX_IMAGE_SIZE"]["user"]}}),watch:{showSet(t){this.height=t?window.innerHeight-52-99-40-50:window.innerHeight-52-99-50},load(t){t&&(this.onload=!0)},onload(t){t&&this.init()}},data(){return{mouseHover:!1,actionApi:this.$API_URL+"api/bs/material/file/upload",headers:{Authentication:this.accessToken},flieParams:{type:"image"},showVip:!1,showSet:!1,checkedAll:!1,height:window.innerHeight-52-99-50,query:{currentPage:1,pageSize:20},uploadLoading:[],noMore:!1,list:[],queryCount:0,loading:!1,nextLoading:!1,onload:!1,limitCount:300,limitSvgSize:m["MAX_SVG_FILE_SIZE"]}},mounted(){this.resize(),"no"===this.vip.type?(this.limitCount=300,this.limitSize=5242880):"personal"===this.vip.type?(this.limitCount=2e3,this.limitSize=10485760):"prod"===this.vip.type&&(this.limitCount=1e4,this.limitSize=20971520),this.refresh(),this.listenContent(),this.$bus.$on("refreshMatierialFileList",this.refresh)},methods:{resize(){window.addEventListener("resize",this._handeResize)},_handeResize(){this.height=window.innerHeight-52-99-50},delImgList(t,e){this.$api.material.fileDel({ids:t||this.getIds().toString()}).then(t=>{t&&(e?this.list.splice(e,1):(this.list=this.list.filter(t=>0==t.active),this.getImgList()))})},async refresh(){this.reset(),await Object(d["D"])(100),this.getImgList()},resetTempImage(t,e){e.style.position="static",e.style.zIndex="auto"},uploadMove(t,e){var i;if(0!==t.button)return!1;let s=document.getElementById("uploadItem"+e.id),n=t.clientX,a=t.clientY,r=null===(i=t.target)||void 0===i?void 0:i.getBoundingClientRect();if(!r)return;s.style.position="fixed",s.style.left=r.x+"px",s.style.top=r.y+"px",s.style.zIndex=1e4;let o=r.x,l=r.y;document.onmousemove=t=>{let e=t.clientX-n,i=t.clientY-a;return s.style.left=o+e+"px",s.style.top=l+i+"px",!1},document.onmouseup=i=>{var n,a;if(!Object(u["b"])(i,t,this.$refs.sideRef))return s.style.position="static",s.style.zIndex="auto",document.onmousemove=null,void(document.onmouseup=null);const r=null===(n=i.target.querySelector("img"))||void 0===n?void 0:n.getBoundingClientRect(),o=null===(a=document.getElementById("svgContainer"))||void 0===a?void 0:a.getBoundingClientRect();if(!o||!r)return;let l={type:"img",src:e.file_path,id:e.id,uuid:h()(),can_set_color:e.file_path.indexOf(".svg")>-1?1:0,style:{position:"absolute",top:50,left:100,rotate:360-this.$root.projectData.rotate||0,opacity:100},bg:{x:0,y:0}},c=(r.x-o.x)/this.scale-189,d=(r.y-o.y)/this.scale-189;l.owidth=l.width,l.oheight=l.height,l.style.width=r.width/this.scale/f["DPI"],l.style.height=r.height/this.scale/f["DPI"],l.bg.width=r.width/this.scale/f["DPI"],l.bg.height=r.height/this.scale/f["DPI"],[l.style.left,l.style.top]=Object(u["c"])(this.$root.projectData.rotate,c/f["DPI"],d/f["DPI"],l.width,l.height,this.$root.knifeData.totalX*f["DPI"],this.$root.knifeData.totalY*f["DPI"]),Object(u["d"])(t,i)&&(delete l.style.left,delete l.style.top),this.$store.dispatch("editor/setEditorTempMaterial",l),s.style.position="static",s.style.zIndex="auto",document.onmousemove=null,document.onmouseup=null}},reset(){this.query={currentPage:1,pageSize:20}},getIds(){let t=[];for(let e in this.list)this.list[e].active&&t.push(this.list[e].id);return t},checkedAllChange(){this.initCheck(this.checkedAll)},initCheck(t){for(let e in this.list)this.list[e].active=t},checkedItemChange(t){this.seeChecked()},seeChecked(){let t=!0;for(let e in this.list)!1===this.list[e].active&&(t=!1);this.checkedAll=t},init(){this.listenContent(),this.getImgList()},listenContent(){let t=document.getElementById("editorUploadContent");t&&(t.onscroll=t=>{t.target.clientHeight+t.target.scrollTop===t.target.scrollHeight&&(this.query.currentPage+=1,this.queryCount>this.list.length&&this.getImgList())})},getImgList(){1===this.query.currentPage?this.loading=!0:this.nextLoading=!0,this.$api.material.fileList(this.query).then(t=>{if(t){for(let e in t.data.data)t.data.data[e].active=!1;1===this.query.currentPage?this.list=t.data.data:this.list=[...this.list,...t.data.data],this.list.length>=t.data.count?this.noMore=!0:this.noMore=!1,this.queryCount=t.data.count,this.seeChecked()}}),1===this.query.currentPage?this.loading=!1:this.nextLoading=!1}},beforeDestroy(){window.removeEventListener("resize",this._handeResize)},destroyed(){this.$bus.$off("refreshMatierialFileList")}},b=v,y=(i("e0db"),i("2877")),_=Object(y["a"])(b,s,n,!1,null,null,null);e["default"]=_.exports},1707:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.curDesigns&&t.curDesigns.length>1&&t.showUnionRect?i("div",{staticClass:"multi-control-wrap",style:{left:t.unionRect.x+"mm",top:t.unionRect.y+"mm",width:t.unionRect.width+"mm",height:t.unionRect.height+"mm",borderWidth:1/t.scale+"px"},on:{mousedown:t.onStartMove,contextmenu:function(t){t.stopPropagation(),t.preventDefault()}}},[t.curDesigns&&t.curDesigns.length>1?i("div",{directives:[{name:"show",rawName:"v-show",value:t.moving,expression:"moving"}],staticClass:"move-tip",style:{transform:"scale("+1/t.scale+") rotate(-"+t.project_data.rotate+"deg",borderRadius:3/t.scale+"px"}},[t._v(" "+t._s(Math.round(t.unionRect.x))+" , "+t._s(Math.round(t.unionRect.y))+" ")]):t._e(),t._l(t.$data.$angles.filter((function(t){return t.length>1})),(function(e,s){return i("div",{key:s,class:["angle",""+e,{rect:1==e.length}],style:{cursor:t.calc_angle_cursor(e),width:t.angleBaseLength+"px",height:t.angleBaseLength+"px"},on:{mousedown:function(i){return i.stopPropagation(),t.onStartScale(i,e)}}})}))],2):t._e()},n=[],a=(i("ddb0"),i("5530")),r=i("5880"),o=i("2b1a"),l=i("60bb"),c=i.n(l),h=i("da71"),d=i("d323"),u={computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["is_outside","scale","adsorbInstance","project_data","knife_data","show_axis_remark","space_key_pressed","canvas_move_button_pressed","axis_helper"])),Object(r["mapGetters"])("editor-v2",["curDesigns","design_data"])),{},{angleBaseLength(){return 10/this.scale},globalRotate(){return this.project_data.rotate}}),data(){return{moving:!1,showUnionRect:!1,unionRect:{x:0,y:0,width:0,height:0},$angles:["n","ne","e","se","s","sw","w","nw"]}},methods:{calculatePosition(t,e){const{x:i,y:s,width:n,height:a}=t;return"nw"===e?{x:i,y:s}:"ne"===e?{x:i+n,y:s}:"sw"===e?{x:i,y:s+a}:"se"===e?{x:i+n,y:s+a}:void 0},onStartScale(t,e){var i;const s=JSON.parse(JSON.stringify(this.unionRect)),n=JSON.parse(JSON.stringify(this.curDesigns)),a=this.$data.$angles,r=a.indexOf(e);let o=r+4;o>=a.length&&(o%=a.length);const l=this.calculatePosition(s,e),c=this.calculatePosition(s,a[o]),h=null===(i=document.getElementById("svgContainer"))||void 0===i?void 0:i.getBoundingClientRect();if(!h)return;const d={x:l.x-c.x,y:l.y-c.y},u=Math.sqrt(d.x*d.x+d.y*d.y);d.x/=u,d.y/=u,document.onmousemove=this.throttleScale(t.clientX,t.clientY,l,c,e,d,s,n),document.onmouseup=t=>{document.onmousemove=null,document.onmouseup=null}},throttleScale(t,e,i,s,n,a,r,o){return c.a.throttle(l=>{let c=(l.clientX-t)/this.scale/h["DPI"],u=(l.clientY-e)/this.scale/h["DPI"],p=parseInt(this.project_data.rotate/90)%4;p<0&&(p+=4),1===p?[c,u]=[u,-c]:2===p?[c,u]=[-c,-u]:3===p&&([c,u]=[-u,c]);const f={x:(c*a.x+u*a.y)*a.x,y:(c*a.x+u*a.y)*a.y},m={x:i.x+f.x,y:i.y+f.y},g=this.calc_union_rect_position(n,m,s);this.unionRect.x=g.x,this.unionRect.y=g.y,this.unionRect.width=g.width,this.unionRect.height=g.height;const v=g.width/r.width,b=this.getMatrix(s,v);for(const t of o){const e=new d["Matrix"]([[t.style.left,t.style.top,1]]),i=e.multiply(b).elements[0],s=i[0],n=i[1],{uuid:a,type:r,bg:o}=t,l=this.getDesignByUUID(a);if(l.locked)continue;const c={style:{width:t.style.width*v,height:t.style.height*v,left:s,top:n}},h={uuid:t.uuid,style:{}};if("img"===r)if(o){let{x:e,y:i,width:s,height:n}=t.bg;e*=v,i*=v,s*=v,n*=v,c.bg={x:e,y:i,width:s,height:n}}else c.bg={x:0,y:0,width:h.style.width,height:h.style.height};else"font"===r&&(c.style.fontSize=t.style.fontSize*v,c.style.lineHeight=t.style.lineHeight*v);for(const t in c.style)l.style[t]=c.style[t];for(const t in c.bg)l.bg[t]=c.bg[t];if("group"===r)for(let d=0;d<t.designs.length;d++){const e=t.designs[d],i=l.designs.find(t=>t.uuid===e.uuid);this.doScaleToChildDesign(i,e,v)}}},5)},getMatrix({x:t,y:e},i){const s=new d["Matrix"]([[1,0,0],[0,1,0],[-t,-e,1]]),n=new d["Matrix"]([[i,0,0],[0,i,0],[0,0,1]]),a=new d["Matrix"]([[1,0,0],[0,1,0],[t,e,1]]);return s.multiply(n).multiply(a)},doScaleToChildDesign(t,e,i){const s=this.getMatrix({x:0,y:0},i),n=new d["Matrix"]([[e.style.left,e.style.top,1]]),[a,r]=n.multiply(s).elements[0];if(t.style.width=e.style.width*i,t.style.height=e.style.height*i,t.style.left=a,t.style.top=r,"font"===t.type)t.style.fontSize=e.style.fontSize*i,t.style.lineHeight=e.style.lineHeight*i;else if("img"===t.type&&!/\.svg$/.test(t.src))if(t.bg){const{x:s,y:n,width:a,height:r}=e.bg;t.bg.x=s*i,t.bg.y=n*i,t.bg.width=a*i,t.bg.height=r*i}else t.bg.x=0,t.bg.y=0,t.bg.width=t.style.width,t.bg.height=t.style.height},getDesignByUUID(t){return this.design_data.find(e=>e.uuid===t)},calc_union_rect_position(t,e,i){const s=(e.x+i.x)/2,n=(e.y+i.y)/2,a=Object(o["b"])(e.x,e.y,s,n,0),r=Object(o["b"])(i.x,i.y,s,n,0);let l,c,h,d;return"nw"===t?(h=r.x-a.x,d=r.y-a.y,l=a.x,c=a.y):"ne"===t?(h=-r.x+a.x,d=r.y-a.y,l=r.x,c=a.y):"se"===t?(h=-r.x+a.x,d=-r.y+a.y,l=r.x,c=r.y):"sw"===t&&(h=r.x-a.x,d=-r.y+a.y,l=a.x,c=r.y),{x:l,y:c,width:h,height:d}},calc_angle_cursor(t){let e=22;e+=this.project_data.rotate;const i=parseInt(e/45),s=this.$data.$angles;let n=i+s.indexOf(t);n%=s.length,n<0&&(n+=s.length);const a=s[n]+"-resize";return a},onStartMove(t){this.space_key_pressed||this.canvas_move_button_pressed||0===t.button&&(t.stopPropagation(),this.axis_helper.setOptions({scale:this.scale,rotate:this.project_data.rotate}),this.axis_helper.refreshAxis(),this.adsorbInstance.set({scale:this.scale,isInside:!this.is_outside,rotate:this.project_data.rotate,envDesigns:this.design_data.filter(t=>!t._selected),movingDesigns:this.curDesigns,guideLines:this.project_data.line_guides}),this.moving=!0,document.body.style.cursor="move",document.onmousemove=this.throttleMove(t.clientX,t.clientY),document.onmouseup=t=>{this.clearHighLines(),this.moving=!1,document.body.style.cursor="default",this.$store.commit("editor-v2/set_enable_local_history",!0),document.onmousedown=null,document.onmousemove=null,document.onmouseup=null})},throttleMove(t,e){return c.a.throttle(i=>{this.$store.commit("editor-v2/set_enable_local_history",!1);const s=this.adsorbInstance.calc(i.clientX-t,i.clientY-e);s.highlines&&s.highlines.length?this.$store.commit("editor-v2/set_high_lines",s.highlines):this.clearHighLines(),this.curDesigns.forEach(t=>{const{uuid:e}=t,{x:i,y:n}=s.positionMap[e];t.style.left=i,t.style.top=n})},5)},clearHighLines(){this.$store.commit("editor-v2/set_high_lines",[])}},watch:{curDesigns:{handler(t){if(t<2)return void(this.showUnionRect=!1);this.axis_helper.setOptions({scale:this.scale,rotate:this.project_data.rotate}),this.axis_helper.refreshAxis();const e=[],i=[],s=[],n=[];if(this.curDesigns.filter(t=>!t.locked).forEach((t,a)=>{const r=document.querySelector(`#element${t.uuid}:not([style*="display:none"])`);if(r){const t=r.getBoundingClientRect();e.push(t.left),i.push(t.top),s.push(t.right),n.push(t.bottom)}}),e.length){const t=Math.min(...e),a=Math.min(...i),r={x:t,y:a,width:Math.max(...s)-t,height:Math.max(...n)-a};this.unionRect=this.axis_helper.getRectLocalPos(r),this.showUnionRect=!0}else this.unionRect={x:0,y:0,width:0,height:0},this.showUnionRect=!1},deep:!0}}},p=u,f=(i("bfc4"),i("2877")),m=Object(f["a"])(p,s,n,!1,null,"6854cf44",null);e["default"]=m.exports},"170c":function(t,e,i){},"170e":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rendererd-property flex flex-start",style:{right:(t.visible?0:-240)+"px",height:t.HEIGHT+"px"},on:{mouseover:function(e){t.showTip=!0},mouseout:function(e){t.showTip=!1}}},[s("div",{staticClass:"rendererd-property__left",on:{click:function(e){t.visible=!t.visible}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"btn-drawer flex flex-center item-center"},[s("img",{class:t.visible?"":"img",attrs:{src:i("e149")}})])]),s("div",{staticClass:"rendererd-property__content"},[s("div",{staticClass:"flex flex-start item-center"},[t.activeModel?s("a-icon",{staticClass:"ml-8 pointer",staticStyle:{color:"#777777"},attrs:{type:"left"},on:{click:function(e){return t.changeMode(-1)}}}):t._e(),s("div",{staticClass:"fo-14 bold title ell ",staticStyle:{"padding-left":"8px","margin-left":"0"}},[t._v(" 场景对象 ")])],1),s("scrollbar",{staticClass:"rendererd-property__content__children",attrs:{maxHeight:220}},[s("div",{staticStyle:{"min-height":"220px"},on:{click:function(e){t.activeEdit="",t.changeMode(-1)}}},[s("div",{class:"render-child flex flex-between item-center",on:{click:function(e){e.stopPropagation(),t.openLights=!t.openLights}}},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"render-child--icon flex flex-center item-center"},[s("img",{attrs:{src:i("9b3a")}})]),s("div",{staticClass:"fo-14 ml-8"},[t._v("光照")])]),s("img",{style:{transform:"rotate("+(t.openLights?0:180)+"deg)"},attrs:{src:i("262c")}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.openLights,expression:"openLights"}]},[s("div",{class:"render-child flex flex-between item-center "+(-3==t.activeModel?"render-child--active":""),on:{click:function(e){return e.stopPropagation(),t.changeMode(-3)}}},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"render-child--icon flex flex-center item-center",staticStyle:{"margin-left":"30px"}},[-3==t.activeModel?s("img",{attrs:{src:i("3230")}}):s("img",{attrs:{src:i("1f0e")}})]),s("div",{staticClass:"fo-14 ml-8"},[t._v("阳光")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.openSunLight,expression:"!openSunLight"}],class:"fo-12 "+(-3==t.activeModel?"fo-white":""),style:{transform:"scale(0.9,0.9)"}},[t._v(" 已关 ")])]),t._l(t.lights,(function(e,n){return s("div",{key:n+"s",class:"render-child flex flex-start item-center "+(t.activeModel=="s"+n?"render-child--active":""),on:{click:function(e){return e.stopPropagation(),t.changeMode("s"+n)},dblclick:function(e){e.stopPropagation(),t.activeEdit="s"+n}}},[s("div",{staticClass:"render-child--icon flex flex-center item-center",staticStyle:{"margin-left":"30px"}},[t.activeModel=="s"+n?s("img",{attrs:{src:i("9adf")}}):s("img",{attrs:{src:i("77e8")}})]),t.activeEdit==="s"+n?s("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:e.name},on:{click:function(t){t.stopPropagation()},focus:function(t){t.stopPropagation()},blur:function(i){i.stopPropagation(),t.activeEdit="",e.name=i.target.value},keyup:function(i){if(!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter"))return null;t.activeEdit="",e.name=i.target.value}}}):s("div",{staticClass:"fo-14 ml-8"},[t._v(t._s(e.name))])])}))],2),t._l(t.sceneChildren,(function(e,n){return s("div",{key:n,class:"render-child flex flex-start item-center "+(t.activeModel==e.id?"render-child--active":""),on:{click:function(i){return i.stopPropagation(),t.changeMode(e)},dblclick:function(e){e.stopPropagation(),t.activeEdit=n}}},[s("div",{staticClass:"render-child--icon flex flex-center item-center"},[t.activeModel==e.id?s("img",{attrs:{src:i("a4f1")}}):s("img",{attrs:{src:i("1fa1")}})]),t.activeEdit===n?s("input",{staticClass:"input",staticStyle:{width:"160px"},attrs:{type:"text"},domProps:{value:e.name.replace("allGroup-","")},on:{click:function(t){t.stopPropagation()},focus:function(t){t.stopPropagation()},blur:function(i){t.activeEdit="",e.name="allGroup-"+i.target.value},keyup:function(i){if(!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter"))return null;t.activeEdit="",e.name="allGroup-"+i.target.value}}}):s("div",{staticClass:"fo-14 ml-8 ell"},[t._v(t._s(e.name.replace("allGroup-","")))])])}))],2)]),s("scrollbar",{attrs:{maxHeight:t.HEIGHT-260}},[s("div",[""==t.activeModel?s("div",{staticClass:"pl-12"},[s("a-divider"),s("div",{staticClass:"fo-14 pfow "},[t._v("构图比例")]),s("div",{staticClass:"flex flex-start item-center mt-16 "},t._l(t.ratios,(function(e,i){return s("div",{key:i,class:" small-btn "+(i==t.ratioIndex?"bg-b-active":"bg-b-def"),on:{click:function(e){return t.ratioClick(i)}}},[t._v(" "+t._s(e.w)+":"+t._s(e.h)+" ")])})),0),s("div",{staticClass:"fo-14 pfow mt-24"},[t._v("清晰度")]),s("div",{staticClass:"mt-12"},t._l(t.claritys,(function(e,n){return s("div",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!item.hidden"}],key:n,class:" flex flex-between item-center long-btn "+(n===t.clarityIndex?"bg-b-active":"bg-b-def")+" "+(e.close?"bg-close":""),on:{click:function(e){return t.clarityClick(n)}}},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"fo-12 ml-12",staticStyle:{display:"block","white-space":"nowrap"}},[t._v(" "+t._s(e.label)+" ")]),e.vip&&!e.close?s("img",{staticClass:"ml-8",attrs:{src:i("0be3"),height:"14px",alt:""}}):t._e(),e.close?s("div",{staticClass:"wait-open"},[t._v("待开放")]):t._e()]),s("div",{staticClass:"fo-12 mr-12"},[t._v(t._s(e.w)+"*"+t._s(e.h))])])})),0)],1):t._e(),s("rect-area-light",{directives:[{name:"show",rawName:"v-show",value:"string"===typeof t.activeModel&&t.activeModel.indexOf("s")>-1,expression:"typeof activeModel === 'string' && activeModel.indexOf('s') > -1"}]}),s("envLight",{directives:[{name:"show",rawName:"v-show",value:-2===t.activeModel,expression:"activeModel === -2"}]}),s("sunLight",{directives:[{name:"show",rawName:"v-show",value:-3===t.activeModel,expression:"activeModel === -3"}],attrs:{light:t.light},on:{openSunLightChange:t.openSunLightChange}}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.activeModel>=0&&"number"===typeof t.activeModel,expression:"activeModel >= 0 && typeof activeModel === 'number'"}]},[s("div",{staticClass:"fo-14 bold title"},[t._v("操作")]),s("div",{staticClass:"flex flex-center item-center"},[s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",{staticClass:"fo-12"},[t._v("位置平移")])]),s("div",{staticClass:"opt-btn ",on:{click:function(e){return t.changeTransform("translate")}}},[s("img",{directives:[{name:"show",rawName:"v-show",value:"translate"!==t.transformMode,expression:"transformMode !== 'translate'"}],attrs:{src:i("d849")}}),s("img",{directives:[{name:"show",rawName:"v-show",value:"translate"===t.transformMode,expression:"transformMode === 'translate'"}],attrs:{src:i("41fe")}})])],2),s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",{staticClass:"fo-12"},[t._v("位置旋转")])]),s("div",{staticClass:"opt-btn ml-4",on:{click:function(e){return t.changeTransform("rotate")}}},[s("img",{directives:[{name:"show",rawName:"v-show",value:"rotate"!==t.transformMode,expression:"transformMode !== 'rotate'"}],attrs:{src:i("3039")}}),s("img",{directives:[{name:"show",rawName:"v-show",value:"rotate"===t.transformMode,expression:"transformMode === 'rotate'"}],attrs:{src:i("ba44")}})])],2),s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",{staticClass:"fo-12"},[t._v("移动到地面")])]),s("div",{staticClass:"opt-btn ml-4",on:{click:t.moveToGround}},[s("img",{attrs:{src:i("e019")}})])],2),s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",{staticClass:"fo-12"},[t._v("复制")])]),s("div",{staticClass:"opt-btn ml-4",on:{click:t.copyClick}},[s("img",{attrs:{src:i("f522")}})])],2),s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",{staticClass:"fo-12"},[t._v("删除")])]),s("div",{staticClass:"opt-btn ml-4 ",style:{cursor:t.sceneChildren.length>1?"pointer":"not-allowed"},on:{click:function(e){t.sceneChildren.length>1&&t.delClick()}}},[t.sceneChildren.length>1?s("img",{attrs:{src:i("6925")}}):s("img",{attrs:{src:i("cfb5")}})])],2)],1),s("a-divider"),s("div",{staticClass:"fo-14  title"},[t._v("位置")]),s("div",{staticClass:"flex flex-start item-center "},[s("div",{staticClass:"pfow ml-16"},[t._v("X")]),s("input",{staticClass:"tarnsform-input",attrs:{type:"text"},domProps:{value:t.position.x+t.positionUnitX},on:{focus:function(e){t.positionUnitX=""},blur:function(e){return t.transformChange(e,"position","x")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.transformChange(e,"position","x")}}}),s("div",{staticClass:"pfow ml-8"},[t._v("Y")]),s("input",{staticClass:"tarnsform-input",attrs:{type:"text"},domProps:{value:t.position.y+t.positionUnitY},on:{focus:function(e){t.positionUnitY=""},blur:function(e){return t.transformChange(e,"position","y")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.transformChange(e,"position","y")}}}),s("div",{staticClass:"pfow ml-8"},[t._v("Z")]),s("input",{staticClass:"tarnsform-input",attrs:{type:"text"},domProps:{value:t.position.z+t.positionUnitZ},on:{focus:function(e){t.positionUnitZ=""},blur:function(e){return t.transformChange(e,"position","z")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.transformChange(e,"position","z")}}})]),s("div",{staticClass:"fo-14  title mt-12"},[t._v("旋转角度")]),s("div",{staticClass:"flex flex-start item-center "},[s("div",{staticClass:"pfow ml-16"},[t._v("X")]),s("input",{staticClass:"tarnsform-input",attrs:{type:"text"},domProps:{value:t.rotate.x+t.rotateUnitX},on:{focus:function(e){t.rotateUnitX=""},blur:function(e){return t.transformChange(e,"rotate","x")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.transformChange(e,"rotate","x")}}}),s("div",{staticClass:"pfow ml-8"},[t._v("Y")]),s("input",{staticClass:"tarnsform-input",attrs:{type:"text"},domProps:{value:t.rotate.y+t.rotateUnitY},on:{focus:function(e){t.rotateUnitY=""},blur:function(e){return t.transformChange(e,"rotate","y")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.transformChange(e,"rotate","y")}}}),s("div",{staticClass:"pfow ml-8"},[t._v("Z")]),s("input",{staticClass:"tarnsform-input",attrs:{type:"text"},domProps:{value:t.rotate.z+t.rotateUnitZ},on:{focus:function(e){t.rotateUnitZ=""},blur:function(e){return t.transformChange(e,"rotate","z")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.transformChange(e,"rotate","z")}}})]),s("div",{staticClass:"fo-14  title mt-12"},[t._v("折叠")]),s("div",{staticClass:"pl-12 pr-12"},[s("a-slider",{staticStyle:{"margin-top":"5px"},attrs:{"tip-formatter":function(t){return t+"%"},max:100,min:0,step:1},on:{change:t.folderChange,"after-change":function(e){return t.$emit("attch-change")}},model:{value:t.folderValue,callback:function(e){t.folderValue=e},expression:"folderValue"}})],1)],1)],1)])],1)])},n=[],a=(i("5319"),i("1276"),i("ddb0"),i("5530")),r=i("9393"),o=i("5880"),l=i("7018"),c=i("5c54"),h=i("1ecc"),d=i("70ab"),u=i("6116"),p={props:["height","active","transform","light","envLight","lights"],mixins:[r["a"]],components:{Pallet:l["a"],envLight:c["default"],sunLight:h["default"],rectAreaLight:d["default"],RectAreaLight:d["default"]},watch:{height(t){this.HEIGHT=t},active(t){this.activeModel=t||"";for(let e of this.sceneChildren)e.id==t&&(this.sceneTitle=e.name.replace("allGroup-",""))},transform(t){this.transformMode=t}},computed:Object(a["a"])({},Object(o["mapGetters"])("profile",["isVip"])),data(){return{openLights:!0,lightColor:"rgba(255,255,255,1)",sceneTitle:"",activeEdit:"",lightPositionValue:45,lightPowerValue:17,lightHeightValue:2.5,shadowValue:10,lightPositionUnit:"°",lightPowerUnit:"%",lightHeightUnit:"m",shadowUnit:"°",visible:!0,showTip:!1,HEIGHT:this.height,positionUnitX:"mm",positionUnitY:"mm",positionUnitZ:"mm",rotateUnitX:"°",rotateUnitY:"°",rotateUnitZ:"°",sceneChildren:[],activeModel:this.active,transformMode:this.transform,position:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},folderValue:20,ratios:[{w:16,h:9},{w:9,h:16},{w:4,h:3},{w:3,h:4},{w:1,h:1}],ratioIndex:0,claritys:[{label:"1K标清",w:1024,h:576},{label:"2K高清",w:1920,h:1080,vip:!0},{label:"3K超清",w:2560,h:1440,vip:!0,close:!1},{label:"4K超高清",w:3840,h:2160,vip:!0,close:!1}],clarityIndex:0,openSunLight:!0}},mounted(){this.emitSize()},methods:{openSunLightChange(t){this.openSunLight=t,this.$emit("openSunLightChange",t)},colorConfirmLight(t){this.lightColor=t.rgba,this.$emit("lightColorChange",t.rgba)},clearNoNum:u["c"],lightPositionInput(t){"blur"===t.type&&(this.lightPositionUnit="°");let e=0;t.target.value&&(e=parseInt(this.clearNoNum(t.target.value))),e>360&&(e=360),e<0&&(e=0),this.lightPositionValue!=e&&(this.lightPositionValue=e,this.$emit("attch-history","lightPositionInput")),this.lightPositionChange(e)},lightPositionChange(t){const e=6*Math.cos(t*Math.PI/180),i=6*Math.sin(t*Math.PI/180);this.$emit("lightPositionChange",{x:i,z:e})},lightPowerInput(t){"blur"===t.type&&(this.lightPowerUnit="%");let e=0;t.target.value&&(e=parseFloat(this.clearNoNum(t.target.value))),e>100&&(e=100),e<0&&(e=0),this.lightPowerValue!=e&&(this.lightPowerValue=e,this.$emit("attch-history","lightPowerInput")),this.lightPowerChange(e)},shadowInput(t){"blur"===t.type&&(this.shadowUnit="°");let e=0;t.target.value&&(e=parseInt(this.clearNoNum(t.target.value))),e>180&&(e=180),e<0&&(e=0),this.shadowValue!=e&&(this.shadowValue=e,this.$emit("attch-history","shadowInput")),this.shadowChange(e)},shadowChange(t){this.$emit("shadowChange",t)},lightPowerChange(t){this.$emit("lightPowerChange",t/50)},lightHeightInput(t){"blur"===t.type&&(this.lightHeightUnit="m");let e=0;t.target.value&&(e=parseFloat(this.clearNoNum(t.target.value))),e>5&&(e=5),e<0&&(e=0),this.lightHeightValue!=e&&(this.lightHeightValue=e,this.$emit("attch-history","lightHeightInput")),this.lightHeightChange(e)},lightHeightChange(t){this.$emit("lightHeightChange",4*t)},setRatio(t,e=!0){const i=t.split(":");let s=0;for(let n in this.ratios)this.ratios[n].w==i[0]&&(s=n);this.ratioClick(s,e)},ratioClick(t,e){switch(this.ratioIndex=t,this.$emit("ratio-change",this.ratios[this.ratioIndex]),e&&this.$emit("attch-history","ratioClick"),this.ratios[this.ratioIndex].w){case 16:this.claritys[0].w=1024,this.claritys[0].h=576,this.claritys[1].w=1920,this.claritys[1].h=1080,this.claritys[2].w=2560,this.claritys[2].h=1440,this.claritys[3].w=3840,this.claritys[3].h=2160,this.claritys[3].hidden=!1;break;case 9:this.claritys[0].w=576,this.claritys[0].h=1024,this.claritys[1].w=1080,this.claritys[1].h=1920,this.claritys[2].w=1440,this.claritys[2].h=2560,this.claritys[3].w=2160,this.claritys[3].h=3840,this.claritys[3].hidden=!1;break;case 4:this.claritys[0].w=1024,this.claritys[0].h=768,this.claritys[1].w=1600,this.claritys[1].h=1200,this.claritys[2].w=3200,this.claritys[2].h=2400,this.claritys[3].w=4e3,this.claritys[3].h=3e3,this.claritys[3].hidden=!1;break;case 3:this.claritys[0].w=768,this.claritys[0].h=1024,this.claritys[1].w=1200,this.claritys[1].h=1600,this.claritys[2].w=2400,this.claritys[2].h=3200,this.claritys[3].w=3e3,this.claritys[3].h=4e3,this.claritys[3].hidden=!1;break;case 1:this.claritys[0].w=768,this.claritys[0].h=768,this.claritys[1].w=1920,this.claritys[1].h=1920,this.claritys[2].w=3200,this.claritys[2].h=3200,this.claritys[3].hidden=!0;break}this.emitSize()},clarityClick(t){this.claritys[t].close||(this.claritys[t].close||this.claritys[t].vip?this.claritys[t].vip&&(this.isVip?(this.clarityIndex=t,this.emitSize()):this.showPersonalVip()):(this.clarityIndex=t,this.emitSize()))},emitSize(){this.$emit("change-size",this.claritys[this.clarityIndex].w+"*"+this.claritys[this.clarityIndex].h)},moveToGround(){this.position.y=0,this.$emit("transform-action",{position:this.position,rotation:{x:this.rotate.x*Math.PI/180,y:this.rotate.y*Math.PI/180,z:this.rotate.z*Math.PI/180}})},setSceneChildren(t){this.sceneChildren=t},changeMode(t){this.$emit("mode-change",t),"number"!==typeof t&&"string"!==typeof t||(this.activeModel=t,this.activeEdit="")},changeTransform(t){this.$emit("transform-change",t)},copyClick(){this.$emit("copy")},delClick(){this.$emit("del")},setPosition(t){this.position.x=Math.floor(100*t.x)/100,this.position.y=Math.floor(100*t.y)/100,this.position.z=Math.floor(100*t.z)/100},setRotate(t){t.x,Math.PI,this.rotate.x=Math.floor(t.x/Math.PI*180*100)/100,this.rotate.y=Math.floor(t.y/Math.PI*180*100)/100,this.rotate.z=Math.floor(t.z/Math.PI*180*100)/100},folderChange(t){this.$emit("folder-change",t)},transformChange(t,e,i){"position"===e?this["positionUnit"+i.toUpperCase()]="mm":this["rotateUnit"+i.toUpperCase()]="°",this[e][i]=t.target.value.replace(/[^\-?\d.]/g,""),this.$emit("transform-action",{position:this.position,rotation:{x:this.rotate.x*Math.PI/180,y:this.rotate.y*Math.PI/180,z:this.rotate.z*Math.PI/180}})}}},f=p,m=(i("7a411"),i("2877")),g=Object(m["a"])(f,s,n,!1,null,null,null);e["default"]=g.exports},1781:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rendererd-header flex flex-between item-center"},[0===t.page?s("div",{staticClass:"flex flex-start item-center"},[t._m(0),s("div",{staticClass:"left-item ml-12 mr-12"},[t._v("|")]),t._m(1),s("a-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.openHistory,expression:"openHistory"}],attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",[t._v("撤回")])]),s("div",{staticClass:"recall-btn flex flex-center item-center pointer",staticStyle:{"margin-left":"50px"},on:{click:function(e){t.canIRollback&&t.$emit("rollback")}}},[t.canIRollback?s("img",{attrs:{src:i("33ba")}}):s("img",{attrs:{src:i("1b45")}})])],2),s("a-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.openHistory,expression:"openHistory"}],attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",[t._v("恢复")])]),s("div",{staticClass:"recall-btn flex flex-center item-center pointer",on:{click:function(e){t.canIRecovery&&t.$emit("recovery")}}},[t.canIRecovery?s("img",{attrs:{src:i("eb6b")}}):s("img",{attrs:{src:i("35ae")}})])],2),s("div",{staticClass:"rendered-btn-save"},[s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",[t._v(t._s(t.saveText||"保存"))])]),s("div",{staticClass:"recall-btn flex flex-center item-center pointer",style:{marginLeft:"12px"},on:{click:function(e){!t.updateLoading&&t.$emit("save")}}},[t.updateLoading?s("icon-saving",{attrs:{"view-box":"0 0 22 23",width:"24",height:"24"}}):s("icon-saved",{attrs:{"view-box":"0 0 22 23",width:"24",height:"24"}})],1)],2)],1),s("div",{staticClass:"fo-14 ml-12"})],1):t._e(),1===t.page?s("div",{staticClass:"flex flex-center item-center pointer",on:{click:function(e){return t.changePage(0)}}},[s("a-icon",{staticClass:"left-item ml-20",attrs:{type:"left"}}),s("div",{staticClass:"left-item ml-8"},[t._v("效果图册")]),s("div",{staticClass:"left-item ml-12 mr-12"},[t._v("|")]),s("div",{staticClass:"left-item bold",staticStyle:{color:"#000000"}},[t._v(t._s(t.$root.projectData.project_name))])],1):t._e(),1===t.page&&"image"===t.renderType?s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],class:"pro-name-btn",style:{left:(t.WIDTH-256)/2-108+256+"px"},on:{click:function(e){return t.editName()}}},[t.editable?s("input",{staticClass:"pro-name-btn-input",attrs:{type:"text"},domProps:{value:t.tempName||"方案未命名"},on:{blur:t.tempNameChange}}):s("div",{staticClass:"fo-14 fo-black ell"},[t._v(t._s(t.tempName))])]):t._e(),s("div",{staticClass:"flex flex-end item-center"},[0===t.page?s("a",{staticClass:"flex flex-start item-center render-header-btn pointer mr-40",on:{click:t.openNew}},[s("div",{staticClass:"fo-14 ml-8"},[t._v("体验新版")])]):t._e(),"image"===t.renderType&&(t.renderList.length>0||t.list.length>0)||"video"===t.renderType&&t.videoList.length>0?s("a-popover",{attrs:{"overlay-class-name":"render-header-pic-tip",placement:"bottom"},model:{value:t.showpicPop,callback:function(e){t.showpicPop=e},expression:"showpicPop"}},[s("template",{slot:"content"},["image"===t.renderType?s("div",{staticClass:"pan flex flex-start flex-wrap"},[t._l(t.renderList,(function(e,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:i<6,expression:"index < 6"}],key:i,staticClass:"render-pic-item",style:{backgroundImage:"url("+t.thumbImg(e.image,140,80,100)+")"},on:{click:function(e){t.showpicPop=!1,t.changePage(1)}}},[s("div",{staticClass:"dot"}),s("div",{staticClass:"render-pic-item-panel flex flex-center item-center"},["wait"===e.status?s("div",{staticClass:"fo-white fo-14"},[t._v("相机预备中...")]):t._e(),"rendering"===e.status?s("div",{staticClass:"text-center"},[s("div",{staticClass:"fo-white fo-14"},[t._v("渲染中"+t._s(e.progress)+"%...")]),s("a-progress",{staticStyle:{width:"90px"},attrs:{percent:e.progress||0,"show-info":!1,size:"small","stroke-color":"#ff6634"}})],1):t._e()])])})),t._l(t.list,(function(e,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:i<6-t.renderList.length,expression:"index < 6 - renderList.length"}],key:i+"s",staticClass:"render-pic-item",style:{backgroundImage:"url("+t.thumbImg(e.image,140,80,100)+")"},on:{click:function(e){t.showpicPop=!1,t.changePage(1,i)}}},[e.is_read?t._e():s("div",{staticClass:"dot"}),s("div",{staticClass:"tag ml-8"},[t._v(t._s(e.clear_text||"1K标清"))]),s("div",{staticClass:"render-pic-item-hover"},[t._v("查看大图")])])}))],2):s("div",{staticClass:"pan flex flex-start flex-wrap"},t._l(t.videoList,(function(e,n){return s("div",{directives:[{name:"show",rawName:"v-show",value:n<6,expression:"index < 6"}],key:n,staticClass:"render-pic-item",style:{backgroundImage:"url("+e.videoShed.imagePath+")"},on:{click:function(e){t.showpicPop=!1,t.changePage(1,n)}}},[88!==e.status?s("div",{staticClass:"render-pic-item-panel flex flex-center item-center"},[s("div",{staticClass:"fo-white fo-14"},[t._v("正在拍摄中...")])]):s("div",{staticClass:"render-pic-item-panel flex flex-center item-center",staticStyle:{"background-color":"rgba(0, 0, 0, 0)"}},[s("div",{staticClass:"img-play flex flex-center item-center"},[s("img",{attrs:{src:i("57f3")}})])])])})),0),0===t.renderList.length&&0===t.list.length&&"image"===t.renderType||"video"===t.renderType&&0===t.videoList.length?s("div",{staticClass:"flex flex-center item-center"},[s("div",{staticClass:"text-center pb-20"},[s("img",{attrs:{src:i("e597"),width:"100px"}}),s("div",{staticClass:"fo-14 fo-gray mt-12"},[t._v("新增渲染图")])])]):t._e(),t.renderList.length+t.list.length>6&&"image"===t.renderType||t.renderType.length>6&&"video"===t.renderType?s("div",{staticClass:"flex flex-center item-center pb-16"},[s("div",{staticClass:"pointer",on:{click:function(e){t.showpicPop=!1,t.changePage(1)}}},[t._v(" 查看更多 "),s("a-icon",{staticStyle:{color:"#a8abb3"},attrs:{type:"right"}})],1)]):t._e()]),0===t.page?s("div",{class:["header-btn","flex","flex-center","item-center","render-header-btn","pointer",t.showAnimate?"header-btn-an":""],staticStyle:{"border-radius":"4px"},on:{click:function(e){t.showpicPop=!1,t.changePage(1)}}},["image"===t.renderType&&t.renderList.length>0?s("div",{staticClass:"badge-tag"},[s("div",{staticStyle:{transform:"scale(0.85, 0.85)","margin-top":"-2px"}},[t._v(" "+t._s(t.renderList.length)+" ")])]):t._e(),"video"===t.renderType&&t.badge>0?s("div",{staticClass:"badge-tag"},[s("div",{staticStyle:{transform:"scale(0.85, 0.85)","margin-top":"-2px"}},[t._v(t._s(t.badge))])]):t._e(),s("img",{staticStyle:{"margin-top":"2px"},attrs:{src:i("ca5c")}}),s("div",{staticClass:"fo-14 ml-8"},[t._v("效果图册")])]):t._e()],2):t._e(),0===t.page&&0===t.renderList.length&&0===t.list.length&&"image"===t.renderType||0===t.page&&"video"===t.renderType&&0===t.videoList.length?s("div",{class:["header-btn","flex","flex-center","item-center","render-header-btn","pointer",t.showAnimate?"header-btn-an":""],staticStyle:{"border-radius":"4px"},on:{click:function(e){t.showpicPop=!1,t.changePage(1)}}},["image"===t.renderType&&t.renderList.length>0?s("div",{staticClass:"badge-tag"},[s("div",{staticStyle:{transform:"scale(0.85, 0.85)","margin-top":"-2px"}},[t._v(t._s(t.renderList.length))])]):t._e(),"video"===t.renderType&&t.badge>0?s("div",{staticClass:"badge-tag"},[s("div",{staticStyle:{transform:"scale(0.85, 0.85)","margin-top":"-2px"}},[t._v(t._s(t.badge))])]):t._e(),s("img",{staticStyle:{"margin-top":"2px"},attrs:{src:i("ca5c")}}),s("div",{staticClass:"fo-14 ml-8"},[t._v("效果图册")])]):t._e(),0===t.page?s("a",{staticClass:"flex flex-start item-center render-header-btn pointer ml-40",attrs:{href:"https://help.baoxiaohe.com/support/category/render/",target:"_blank"}},[s("img",{staticStyle:{"margin-top":"2p x"},attrs:{src:i("c189")}}),s("div",{staticClass:"fo-14 ml-8"},[t._v("帮助")])]):t._e(),1===t.page?s("a",{staticClass:"flex flex-start item-center render-header-btn pointer ml-40",attrs:{href:"https://www.wenjuan.com/s/7fuAF3/",target:"_blank"}},[s("img",{staticStyle:{"margin-top":"2px"},attrs:{src:i("a8d7")}}),s("div",{staticClass:"fo-14 ml-8"},[t._v("问题反馈")])]):t._e(),s("div",{staticClass:"close-btn flex flex-center item-center ml-40 mr-20 pointer",on:{click:function(e){return t.doClose()}}},[s("img",{attrs:{src:i("0d1d")}})])],1),s("div",{staticClass:"type-tab flex flex-center"},[s("div",{staticClass:"tab-panel flex flex-between item-center"},[s("div",{class:["tab-item","image"===t.renderType?"tab-item--active":""],on:{click:function(e){return t.$store.dispatch("render/saveRenderType","image")}}},[t._v(" 图片 ")]),s("div",{class:["tab-item","video"===t.renderType?"tab-item--active":""],on:{click:function(e){return t.$store.dispatch("render/saveRenderType","video")}}},[t._v(" 视频 "),"video"!==t.renderType?s("img",{staticClass:"new-tip",attrs:{src:i("afa0")}}):t._e()])])])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ml-8"},[s("img",{attrs:{src:i("1ae4"),alt:""}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fo-14 bold flex flex-start item-start"},[t._v(" 渲染中心 "),i("div",{staticClass:"bxhtest",staticStyle:{transform:"scale(0.8, 0.8)",display:"inline-block",width:"30px"}},[t._v(" Beta ")])])}],a=(i("5319"),i("5530")),r=i("5880"),o=i("ed08"),l=i("a5d5"),c=i("89f0"),h={props:["width","open-history"],components:{IconSaved:l["a"],IconSaving:c["a"]},data(){return{WIDTH:this.width,editable:!1,tempName:"",tempId:"",updateLoading:!1,renderCount:0,shortcuts:["地板网格显示/关闭","坐标系显示/关闭","切换操作","复制","删除"],mac:["⌘ + g","⌘ + i","Tab","⌘ + C","Backspace"],win:["Ctrl + g","Ctrl + i","Tab","Ctrl + C","Backspace"],saveText:"",list:[],renderList:[],showpicPop:!1,showAnimate:!1}},watch:{width(t){this.WIDTH=t}},computed:Object(a["a"])({isMac(){navigator.userAgent.toLowerCase();const t=/macintosh|mac os x/i.test(navigator.userAgent);return t?"mac":"win"}},Object(r["mapGetters"])("render",["canIRollback","canIRecovery","renderType","videoList","badge","page"])),methods:{thumbImg:o["F"],openNew(){let t=window.location.origin;"8080"!==window.location.port&&"3100"!==window.location.port||(t=t.replace(window.location.port,"8000"));const e=`${t}/render/console?id=${this.$route.query.id}`;window.open(e,"box-render")},doResultAnimate(){this.showAnimate=!0,setTimeout(()=>{this.showAnimate=!1},1800)},doSave(t=!0,e=!0){let i="";e?(i+=t?"自动":"手动",i+="保存中..."):(i+=this.$formatDate(Date.now(),"hh:mm"),i+=" 已保存"),this.saveText=i},doClose(){0==this.page?this.$emit("close",!0):this.$store.dispatch("render/savePage",0)},changePage(t,e){"video"===this.renderType&&this.$store.dispatch("render/saveVideoCurrent",e),this.$store.dispatch("render/savePage",t),void 0!==e&&null!==e&&this.$emit("change-current",e)},editName(){this.editable||(this.editable=!0)},tempNameChange(t){this.editable=!1,this.tempName=t.target.value,this.$api.project.renderImageUpdate({id:this.tempId,filename:this.tempName}).then(t=>{0===t.errno&&(this.$message.success(t.errmsg),this.$emit("update-success",{id:this.tempId,name:this.tempName}))})}}},d=h,u=(i("772a"),i("2877")),p=Object(u["a"])(d,s,n,!1,null,null,null);e["default"]=p.exports},1784:function(t,e,i){var s;i("4d63"),i("25f0"),i("5319"),function(n){var a=/^\s+/,r=/\s+$/,o=0,l=n.round,c=(n.floor,n.min),h=n.max,d=n.random;function u(t,e){if(t=t||"",e=e||{},t instanceof u)return t;if(!(this instanceof u))return new u(t,e);var i=p(t);this._originalInput=t,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=l(100*this._a)/100,this._format=e.format||i.format,this._gradientType=e.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=i.ok,this._tc_id=o++}function p(t){var e={r:0,g:0,b:0},i=1,s=null,n=null,a=null,r=!1,o=!1;return"string"==typeof t&&(t=K(t)),"object"==typeof t&&(Z(t.r)&&Z(t.g)&&Z(t.b)?(e=f(t.r,t.g,t.b),r=!0,o="%"===String(t.r).substr(-1)?"prgb":"rgb"):Z(t.h)&&Z(t.s)&&Z(t.v)?(s=Y(t.s),n=Y(t.v),e=b(t.h,s,n),r=!0,o="hsv"):Z(t.c)&&Z(t.m)&&Z(t.y)&&Z(t.k)?(e=C(t.c/100,t.m/100,t.y/100,t.k/100),r=!0,o="cmyk"):Z(t.h)&&Z(t.s)&&Z(t.l)&&(s=Y(t.s),a=Y(t.l),e=g(t.h,s,a),r=!0,o="hsl"),t.hasOwnProperty("a")&&(i=t.a)),i=F(i),{ok:r,format:t.format||o,r:c(255,h(e.r,0)),g:c(255,h(e.g,0)),b:c(255,h(e.b,0)),a:i}}function f(t,e,i){return{r:255*$(t,255),g:255*$(e,255),b:255*$(i,255)}}function m(t,e,i){t=$(t,255),e=$(e,255),i=$(i,255);var s,n,a=h(t,e,i),r=c(t,e,i),o=(a+r)/2;if(a==r)s=n=0;else{var l=a-r;switch(n=o>.5?l/(2-a-r):l/(a+r),a){case t:s=(e-i)/l+(e<i?6:0);break;case e:s=(i-t)/l+2;break;case i:s=(t-e)/l+4;break}s/=6}return{h:s,s:n,l:o}}function g(t,e,i){var s,n,a;function r(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}if(t=$(t,360),e=$(e,100),i=$(i,100),0===e)s=n=a=i;else{var o=i<.5?i*(1+e):i+e-i*e,l=2*i-o;s=r(l,o,t+1/3),n=r(l,o,t),a=r(l,o,t-1/3)}return{r:255*s,g:255*n,b:255*a}}function v(t,e,i){t=$(t,255),e=$(e,255),i=$(i,255);var s,n,a=h(t,e,i),r=c(t,e,i),o=a,l=a-r;if(n=0===a?0:l/a,a==r)s=0;else{switch(a){case t:s=(e-i)/l+(e<i?6:0);break;case e:s=(i-t)/l+2;break;case i:s=(t-e)/l+4;break}s/=6}return{h:s,s:n,v:o}}function b(t,e,i){t=6*$(t,360),e=$(e,100),i=$(i,100);var s=n.floor(t),a=t-s,r=i*(1-e),o=i*(1-a*e),l=i*(1-(1-a)*e),c=s%6,h=[i,o,r,r,l,i][c],d=[l,i,i,o,r,r][c],u=[r,r,l,i,i,o][c];return{r:255*h,g:255*d,b:255*u}}function y(t,e,i,s){var n=[W(l(t).toString(16)),W(l(e).toString(16)),W(l(i).toString(16))];return s&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function _(t,e,i,s,n){var a=[W(l(t).toString(16)),W(l(e).toString(16)),W(l(i).toString(16)),W(q(s))];return n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function x(t,e,i,s){var n=[W(q(s)),W(l(t).toString(16)),W(l(e).toString(16)),W(l(i).toString(16))];return n.join("")}function w(t,e,i){var s=1-t/255,a=1-e/255,r=1-i/255,o=n.min(s,n.min(a,r));return s=(s-o)/(1-o),a=(a-o)/(1-o),r=(r-o)/(1-o),s=isNaN(s)?0:s,a=isNaN(a)?0:a,r=isNaN(r)?0:r,o=isNaN(o)?0:o,{c:s,m:a,y:r,k:o}}function C(t,e,i,s){t=t<=1?t:parseFloat(t)/100,e=e<=1?e:parseFloat(e)/100,i=i<=1?i:parseFloat(i)/100,s=s<=1?s:parseFloat(s)/100,t=t*(1-s)+s,e=e*(1-s)+s,i=i*(1-s)+s;var a=1-t,r=1-e,o=1-i;return a=n.round(255*a),r=n.round(255*r),o=n.round(255*o),{r:a,g:r,b:o}}function k(t,e){e=0===e?0:e||10;var i=u(t).toHsl();return i.s-=e/100,i.s=U(i.s),u(i)}function S(t,e){e=0===e?0:e||10;var i=u(t).toHsl();return i.s+=e/100,i.s=U(i.s),u(i)}function A(t){return u(t).desaturate(100)}function O(t,e){e=0===e?0:e||10;var i=u(t).toHsl();return i.l+=e/100,i.l=U(i.l),u(i)}function j(t,e){e=0===e?0:e||10;var i=u(t).toRgb();return i.r=h(0,c(255,i.r-l(-e/100*255))),i.g=h(0,c(255,i.g-l(-e/100*255))),i.b=h(0,c(255,i.b-l(-e/100*255))),u(i)}function M(t,e){e=0===e?0:e||10;var i=u(t).toHsl();return i.l-=e/100,i.l=U(i.l),u(i)}function I(t,e){var i=u(t).toHsl(),s=(i.h+e)%360;return i.h=s<0?360+s:s,u(i)}function T(t){var e=u(t).toHsl();return e.h=(e.h+180)%360,u(e)}function E(t){var e=u(t).toHsl(),i=e.h;return[u(t),u({h:(i+120)%360,s:e.s,l:e.l}),u({h:(i+240)%360,s:e.s,l:e.l})]}function D(t){var e=u(t).toHsl(),i=e.h;return[u(t),u({h:(i+90)%360,s:e.s,l:e.l}),u({h:(i+180)%360,s:e.s,l:e.l}),u({h:(i+270)%360,s:e.s,l:e.l})]}function L(t){var e=u(t).toHsl(),i=e.h;return[u(t),u({h:(i+72)%360,s:e.s,l:e.l}),u({h:(i+216)%360,s:e.s,l:e.l})]}function P(t,e,i){e=e||6,i=i||30;var s=u(t).toHsl(),n=360/i,a=[u(t)];for(s.h=(s.h-(n*e>>1)+720)%360;--e;)s.h=(s.h+n)%360,a.push(u(s));return a}function R(t,e){e=e||6;var i=u(t).toHsv(),s=i.h,n=i.s,a=i.v,r=[],o=1/e;while(e--)r.push(u({h:s,s:n,v:a})),a=(a+o)%1;return r}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,i,s,a,r,o=this.toRgb();return t=o.r/255,e=o.g/255,i=o.b/255,s=t<=.03928?t/12.92:n.pow((t+.055)/1.055,2.4),a=e<=.03928?e/12.92:n.pow((e+.055)/1.055,2.4),r=i<=.03928?i/12.92:n.pow((i+.055)/1.055,2.4),.2126*s+.7152*a+.0722*r},setAlpha:function(t){return this._a=F(t),this._roundA=l(100*this._a)/100,this},toHsv:function(){var t=v(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toCmyk:function(){return w(this._r,this._g,this._b)},toCmykString:function(){var t=w(this._r,this._g,this._b),e=l(100*t.c),i=l(100*t.m),s=l(100*t.y),n=l(100*t.k);return"cmyk("+e+"%,"+i+"%,"+s+"%,"+n+"%)"},toCmykRound(){const t=w(this._r,this._g,this._b),e=l(100*t.c),i=l(100*t.m),s=l(100*t.y),n=l(100*t.k);return{c:e,m:i,y:s,k:n}},toHsvString:function(){var t=v(this._r,this._g,this._b),e=l(360*t.h),i=l(100*t.s),s=l(100*t.v);return 1==this._a?"hsv("+e+", "+i+"%, "+s+"%)":"hsva("+e+", "+i+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var t=m(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=m(this._r,this._g,this._b),e=l(360*t.h),i=l(100*t.s),s=l(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+s+"%)":"hsla("+e+", "+i+"%, "+s+"%, "+this._roundA+")"},toHex:function(t){return y(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return _(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(100*$(this._r,255))+"%",g:l(100*$(this._g,255))+"%",b:l(100*$(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+l(100*$(this._r,255))+"%, "+l(100*$(this._g,255))+"%, "+l(100*$(this._b,255))+"%)":"rgba("+l(100*$(this._r,255))+"%, "+l(100*$(this._g,255))+"%, "+l(100*$(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(N[y(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+x(this._r,this._g,this._b,this._a),i=e,s=this._gradientType?"GradientType = 1, ":"";if(t){var n=u(t);i="#"+x(n._r,n._g,n._b,n._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,s=this._a<1&&this._a>=0,n=!e&&s&&("hex"===t||"hex6"===t||"hex3"===t||"hex4"===t||"hex8"===t||"name"===t);return n?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex4"===t&&(i=this.toHex8String(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return u(this.toString())},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(O,arguments)},brighten:function(){return this._applyModification(j,arguments)},darken:function(){return this._applyModification(M,arguments)},desaturate:function(){return this._applyModification(k,arguments)},saturate:function(){return this._applyModification(S,arguments)},greyscale:function(){return this._applyModification(A,arguments)},spin:function(){return this._applyModification(I,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(P,arguments)},complement:function(){return this._applyCombination(T,arguments)},monochromatic:function(){return this._applyCombination(R,arguments)},splitcomplement:function(){return this._applyCombination(L,arguments)},triad:function(){return this._applyCombination(E,arguments)},tetrad:function(){return this._applyCombination(D,arguments)}},u.fromRatio=function(t,e){if("object"==typeof t){var i={};for(var s in t)t.hasOwnProperty(s)&&(i[s]="a"===s?t[s]:Y(t[s]));t=i}return u(t,e)},u.equals=function(t,e){return!(!t||!e)&&u(t).toRgbString()==u(e).toRgbString()},u.random=function(){return u.fromRatio({r:d(),g:d(),b:d()})},u.mix=function(t,e,i){i=0===i?0:i||50;var s=u(t).toRgb(),n=u(e).toRgb(),a=i/100,r={r:(n.r-s.r)*a+s.r,g:(n.g-s.g)*a+s.g,b:(n.b-s.b)*a+s.b,a:(n.a-s.a)*a+s.a};return u(r)},u.readability=function(t,e){var i=u(t),s=u(e);return(n.max(i.getLuminance(),s.getLuminance())+.05)/(n.min(i.getLuminance(),s.getLuminance())+.05)},u.isReadable=function(t,e,i){var s,n,a=u.readability(t,e);switch(n=!1,s=J(i),s.level+s.size){case"AAsmall":case"AAAlarge":n=a>=4.5;break;case"AAlarge":n=a>=3;break;case"AAAsmall":n=a>=7;break}return n},u.mostReadable=function(t,e,i){var s,n,a,r,o=null,l=0;i=i||{},n=i.includeFallbackColors,a=i.level,r=i.size;for(var c=0;c<e.length;c++)s=u.readability(t,e[c]),s>l&&(l=s,o=u(e[c]));return u.isReadable(t,o,{level:a,size:r})||!n?o:(i.includeFallbackColors=!1,u.mostReadable(t,["#fff","#000"],i))};var z=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},N=u.hexNames=B(z);function B(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}function F(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function $(t,e){V(t)&&(t="100%");var i=G(t);return t=c(e,h(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),n.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function U(t){return c(1,h(0,t))}function H(t){return parseInt(t,16)}function V(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function G(t){return"string"===typeof t&&-1!=t.indexOf("%")}function W(t){return 1==t.length?"0"+t:""+t}function Y(t){return t<=1&&(t=100*t+"%"),t}function q(t){return n.round(255*parseFloat(t)).toString(16)}function X(t){return H(t)/255}var Q=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",i="(?:"+e+")|(?:"+t+")",s="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?",n="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{CSS_UNIT:new RegExp(i),rgb:new RegExp("rgb"+s),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+s),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+s),hsva:new RegExp("hsva"+n),cmyk:new RegExp("cmyk"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Z(t){return!!Q.CSS_UNIT.exec(t)}function K(t){t=t.replace(a,"").replace(r,"").toLowerCase();var e,i=!1;if(z[t])t=z[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=Q.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=Q.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=Q.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=Q.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=Q.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=Q.cmyk.exec(t))?{c:e[1],m:e[2],y:e[3],k:e[4]}:(e=Q.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=Q.hex8.exec(t))?{r:H(e[1]),g:H(e[2]),b:H(e[3]),a:X(e[4]),format:i?"name":"hex8"}:(e=Q.hex6.exec(t))?{r:H(e[1]),g:H(e[2]),b:H(e[3]),format:i?"name":"hex"}:(e=Q.hex4.exec(t))?{r:H(e[1]+""+e[1]),g:H(e[2]+""+e[2]),b:H(e[3]+""+e[3]),a:X(e[4]+""+e[4]),format:i?"name":"hex8"}:!!(e=Q.hex3.exec(t))&&{r:H(e[1]+""+e[1]),g:H(e[2]+""+e[2]),b:H(e[3]+""+e[3]),format:i?"name":"hex"}}function J(t){var e,i;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),i=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==i&&"large"!==i&&(i="small"),{level:e,size:i}}t.exports?t.exports=u:(s=function(){return u}.call(e,i,e,t),void 0===s||(t.exports=s))}(Math)},"17af":function(t,e,i){},"17b6":function(t,e,i){t.exports=i.p+"editor-assets/img/arrange-hcenter.d13d7c0b.svg"},"17dc":function(t,e,i){t.exports=i.p+"editor-assets/img/slide.c9bdeffe.svg"},"186c":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"render-light",style:{height:t.height+"px"}},[s("scrollbar",{attrs:{maxHeight:t.height+"px"}},[s("div",{staticClass:"p-20"},[s("div",{staticClass:"fo-14 pfow flex flex-start item-start"},[s("div",[t._v("快拍")]),s("a-tooltip",{attrs:{placement:"bottomLeft"}},[s("template",{slot:"title"},[s("span",[t._v("快拍：快速拍摄3D可折叠视频。")])]),s("div",{staticClass:"ml-4 mr-4"},[s("a-icon",{staticStyle:{color:"#FBB120"},attrs:{type:"question-circle"}})],1)],2)],1),s("div",{class:["cover-item flex flex-center item-center",-1===t.videoFlag?"cover-item--active":""],on:{click:function(e){return t.$store.dispatch("render/saveVideoFlag",-1)}}},[s("img",{attrs:{src:i("55eb"),width:"80px"}})]),s("div",{staticClass:"fo-14 pfow flex flex-start item-start mt-24"},[s("div",[t._v("棚拍")]),s("a-tooltip",{attrs:{placement:"bottomLeft"}},[s("template",{slot:"title"},[s("span",[t._v("棚拍：利用包小盒3D建模技术模拟搭建影棚场景进行渲染拍摄，效果逼真，时间较久。")])]),s("div",{staticClass:"ml-4 mr-4"},[s("a-icon",{staticStyle:{color:"#FBB120"},attrs:{type:"question-circle"}})],1)],2)],1),t._l(t.videos,(function(e,i){return s("div",{key:i,class:["cover-item flex flex-center item-center",t.videoFlag===i?"cover-item--active":""],style:{backgroundImage:"url("+e.imagePath+")"},on:{click:function(e){return t.changeVideo(i)}}},[s("div",{staticClass:"mask flex flex-center item-center fo-white fo-14"},[t._v("预览并拍摄")])])}))],2)])],1)},n=[],a=i("5530"),r=i("5880"),o={props:{height:{type:Number}},computed:Object(a["a"])({},Object(r["mapGetters"])("render",["videos","videoFlag"])),mounted(){this.shedList()},methods:{shedList(){this.$store.dispatch("render/fetchVideoPreview")},changeVideo(t){this.$store.dispatch("render/saveVideoFlag",t)}}},l=o,c=(i("71b6"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,"7d1e30fe",null);e["default"]=h.exports},"18a4":function(t,e,i){"use strict";i.r(e);i("5319"),i("ddb0");var s=i("5530"),n=i("750b"),a=i("ca9b"),r=i("f4b1"),o=i("365c"),l=i("ed08"),c=i("3ccf"),h=(i("7d4c"),i("1060")),d=i("3112"),u=i("5a0c"),p=i.n(u);const f=i("a04d"),m=i("c7a6"),g=119;e["default"]=Object(n["b"])({setup(t,e){const{order_num:i,total_fee:u,type:v,project_id:b,address_id:y,count:_}=e.route.query,x=Object(n["a"])(()=>"preorder"===v),w=x.value?o["createProductOrder"]:o["createRepayOrder"],C=Object(n["a"])(()=>{if(x.value){const{page_md5:t}=e.route.query;return Object(h["a"])(t)}return null}),k=x.value?{projectId:Number(b),count:Number(_),addressId:Number(y),message:C.value.message,orderType:"print"}:{orderId:i},S=Object(n["j"])(""),[A]=Object(c["b"])(e.root.$api2.getOrderFlagStatus),[O]=Object(c["b"])(w),j=Object(n["i"])({time:g}),M=Object(n["j"])(null),I=Object(n["j"])(null),T=()=>{I.value&&(clearInterval(I.value),I.value=null)},E=()=>{M.value&&(clearInterval(M.value),M.value=null)};Object(n["g"])(()=>{T(),E()});const D=()=>{M.value||(j.time=g,M.value=setInterval(()=>{0===j.time?E():j.time=j.time-1},1e3))},L=Object(n["j"])({});return Object(n["f"])(()=>{D(),O({variables:k,update(t){L.value=t.data,I.value=setInterval(()=>{A({variables:{flag:L.value.flag},update({data:t}){"success"===t.status?x.value?(e.track({category:"purchase",affiliation:"Google online store",action:"print-order",label:"print-order",value:parseFloat(C.value.total)}),Object(h["c"])(e.route.query.page_md5),e.router.replace({path:"/paid",query:Object(s["a"])(Object(s["a"])({},e.route.query),{},{order_id:t.orderId})})):e.router.replace({path:"/paid",query:Object(s["a"])(Object(s["a"])({},e.route.query),{},{order_id:i})}):"overdue"===t&&T()}})},3e3)}})}),Object(n["k"])(()=>L.value,async()=>{S.value=await Object(l["n"])(L.value.flag)},{lazy:!0}),()=>Object(n["c"])("div",{class:"pay-wrap"},[Object(n["c"])(a["default"]),Object(n["c"])("div",{class:"wrapper mb-48"},[Object(n["c"])("div",{class:"pay-header py-34"},[Object(n["c"])("a-breadcrumb",[Object(n["c"])("a-breadcrumb-item",[Object(n["c"])("a",{attrs:{href:"/"}},["首页"])]),Object(n["c"])("a-breadcrumb-item",[Object(n["c"])("a",{attrs:{href:"/orders"}},["我的订单"])]),Object(n["c"])("a-breadcrumb-item",[Object(n["c"])("a",{attrs:{href:"/pay"}},["当前位置"])])])]),Object(n["c"])("div",{class:"bg-white p-32"},[x.value&&Object(n["c"])(d["default"],{attrs:{status:"未付款",current:1}}),Object(n["c"])("div",{class:"pay-body"},[x.value?Object(n["c"])("div",{class:"info-box"},[Object(n["c"])("div",{class:"flex box-1"},[Object(n["c"])("div",{class:"line-info flex"},[Object(n["c"])("span",["商品名称："]),Object(n["c"])("span",[C.value.name])]),Object(n["c"])("div",{class:"line-info flex"},[Object(n["c"])("span",["下单时间："]),Object(n["c"])("span",[p()(C.value.createdAt).format("YYYY/MM/DD HH:mm")])])]),Object(n["c"])("div",{class:"price-info"},[Object(n["c"])("span",["应付款：¥"]),Object(n["c"])("span",{class:"price-amount"},[C.value.total])])]):Object(n["c"])("div",{class:"info-box"},[Object(n["c"])("div",{class:"flex box-1"},[Object(n["c"])("div",{class:"line-info flex"},[Object(n["c"])("span",["订单编号："]),Object(n["c"])("span",[i])])]),Object(n["c"])("div",{class:"price-info"},[Object(n["c"])("span",["应付款：¥"]),Object(n["c"])("span",{class:"price-amount"},[u])])]),Object(n["c"])("div",{class:"pay-container p-32"},[Object(n["c"])("span",{class:"title"},["支付宝/微信支付"]),Object(n["c"])("span",{class:"ml-12 content"},["距离二维码过期还剩",j.time,"秒，过期后请刷新页面重新获取二维码"]),Object(n["c"])("div",{class:"flex item-center flex-center mt-20"},[Object(n["c"])("div",{class:"left text-center"},[Object(n["c"])("div",{class:"preview flex flex-center item-center",directives:[{name:"show",value:0===j.time}]},[Object(n["c"])("a-button",{attrs:{icon:"reload"},on:{click:()=>{D()}}},["刷新"])]),Object(n["c"])("img",{class:"qrcode",attrs:{src:S.value,alt:""},style:{width:"220px",height:"220px"}}),Object(n["c"])("div",{class:"pay-tip"},[Object(n["c"])("span",{class:"pay-icon-container"},[Object(n["c"])("img",{class:"pay-icon",attrs:{src:m}}),Object(n["c"])("img",{class:"pay-icon",attrs:{src:f}})]),Object(n["c"])("span",["使用支付宝/微信扫码支付"])])])])])])])]),Object(n["c"])(r["default"])])}})},"18ed":function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("2d41"),a=i.n(n);i("64db");e["default"]=Object(s["b"])({props:{category:{type:[Object,Array],default:()=>[]},current:{type:Number,default:-1}},setup(t,e){const i=Object(s["j"])(!1),n=t=>{e.emit("change",t)};return()=>Object(s["c"])("div",{class:"gallery-category flex flex-start flex-wrap w-256"},[Object(s["c"])("div",{class:["gallery-content__cate-sub fo-12 mt-8 mr-8",-1===t.current?"cate-sub-active":""],on:{click:()=>n(-1)}},["全部"]),t.category.map((e,a)=>(!!i.value||a<6)&&Object(s["c"])("div",{class:"gallery-content__cate-sub fo-12 mt-8 mr-8 "+(t.current===a?"cate-sub-active":""),key:a,on:{click:()=>n(a)}},[e.name])),Object(s["c"])("div",{class:"gallery-content__cate-sub fo-12 mt-8 mr-8 flex flex-center item-center",on:{click:()=>i.value=!i.value}},[Object(s["c"])("div",{class:"px-6"},[Object(s["c"])("img",{style:{width:"14px",height:"14px",transform:i.value?"rotate(180deg)":""},attrs:{src:a.a}})])])])}})},"18f5":function(t,e,i){},"191d":function(t,e,i){"use strict";var s=i("d4f0"),n=i.n(s);n.a},1937:function(t,e,i){t.exports=i.p+"editor-assets/img/show-preview.51a0286e.svg"},"193d":function(t,e,i){"use strict";var s=i("4505"),n=i.n(s);n.a},"19b9":function(t,e,i){"use strict";var s=i("6d69"),n=i.n(s);n.a},"19ea":function(t,e,i){"use strict";(function(e,s){function n(t){var e=this;this.next=null,this.entry=null,this.finish=function(){W(e,t)}}var a;t.exports=M,M.WritableState=j;var r={deprecate:i("b7d1")},o=i("5bbb"),l=i("1c35").Buffer,c=e.Uint8Array||function(){};function h(t){return l.from(t)}function d(t){return l.isBuffer(t)||t instanceof c}var u,p=i("493f"),f=i("b9b5"),m=f.getHighWaterMark,g=i("9d8a").codes,v=g.ERR_INVALID_ARG_TYPE,b=g.ERR_METHOD_NOT_IMPLEMENTED,y=g.ERR_MULTIPLE_CALLBACK,x=g.ERR_STREAM_CANNOT_PIPE,w=g.ERR_STREAM_DESTROYED,C=g.ERR_STREAM_NULL_VALUES,k=g.ERR_STREAM_WRITE_AFTER_END,S=g.ERR_UNKNOWN_ENCODING,A=p.errorOrDestroy;function O(){}function j(t,e,s){a=a||i("e666"),t=t||{},"boolean"!==typeof s&&(s=e instanceof a),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=m(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var r=!1===t.decodeStrings;this.decodeStrings=!r,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){z(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function M(t){a=a||i("e666");var e=this instanceof a;if(!e&&!u.call(M,this))return new M(t);this._writableState=new j(t,this,e),this.writable=!0,t&&("function"===typeof t.write&&(this._write=t.write),"function"===typeof t.writev&&(this._writev=t.writev),"function"===typeof t.destroy&&(this._destroy=t.destroy),"function"===typeof t.final&&(this._final=t.final)),o.call(this)}function I(t,e){var i=new k;A(t,i),s.nextTick(e,i)}function T(t,e,i,n){var a;return null===i?a=new C:"string"===typeof i||e.objectMode||(a=new v("chunk",["string","Buffer"],i)),!a||(A(t,a),s.nextTick(n,a),!1)}function E(t,e,i){return t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=l.from(e,i)),e}function D(t,e,i,s,n,a){if(!i){var r=E(e,s,n);s!==r&&(i=!0,n="buffer",s=r)}var o=e.objectMode?1:s.length;e.length+=o;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:s,encoding:n,isBuf:i,callback:a,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else L(t,e,!1,o,s,n,a);return l}function L(t,e,i,s,n,a,r){e.writelen=s,e.writecb=r,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new w("write")):i?t._writev(n,e.onwrite):t._write(n,a,e.onwrite),e.sync=!1}function P(t,e,i,n,a){--e.pendingcb,i?(s.nextTick(a,n),s.nextTick(V,t,e),t._writableState.errorEmitted=!0,A(t,n)):(a(n),t._writableState.errorEmitted=!0,A(t,n),V(t,e))}function R(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function z(t,e){var i=t._writableState,n=i.sync,a=i.writecb;if("function"!==typeof a)throw new y;if(R(i),e)P(t,i,n,e,a);else{var r=$(i)||t.destroyed;r||i.corked||i.bufferProcessing||!i.bufferedRequest||F(t,i),n?s.nextTick(N,t,i,r,a):N(t,i,r,a)}}function N(t,e,i,s){i||B(t,e),e.pendingcb--,s(),V(t,e)}function B(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function F(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var s=e.bufferedRequestCount,a=new Array(s),r=e.corkedRequestsFree;r.entry=i;var o=0,l=!0;while(i)a[o]=i,i.isBuf||(l=!1),i=i.next,o+=1;a.allBuffers=l,L(t,e,!0,e.length,a,"",r.finish),e.pendingcb++,e.lastBufferedRequest=null,r.next?(e.corkedRequestsFree=r.next,r.next=null):e.corkedRequestsFree=new n(e),e.bufferedRequestCount=0}else{while(i){var c=i.chunk,h=i.encoding,d=i.callback,u=e.objectMode?1:c.length;if(L(t,e,!1,u,c,h,d),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function $(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function U(t,e){t._final((function(i){e.pendingcb--,i&&A(t,i),e.prefinished=!0,t.emit("prefinish"),V(t,e)}))}function H(t,e){e.prefinished||e.finalCalled||("function"!==typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,s.nextTick(U,t,e)))}function V(t,e){var i=$(e);if(i&&(H(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var s=t._readableState;(!s||s.autoDestroy&&s.endEmitted)&&t.destroy()}return i}function G(t,e,i){e.ending=!0,V(t,e),i&&(e.finished?s.nextTick(i):t.once("finish",i)),e.ended=!0,t.writable=!1}function W(t,e,i){var s=t.entry;t.entry=null;while(s){var n=s.callback;e.pendingcb--,n(i),s=s.next}e.corkedRequestsFree.next=t}i("3fb5")(M,o),j.prototype.getBuffer=function(){var t=this.bufferedRequest,e=[];while(t)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(j.prototype,"buffer",{get:r.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(t){return!!u.call(this,t)||this===M&&(t&&t._writableState instanceof j)}})):u=function(t){return t instanceof this},M.prototype.pipe=function(){A(this,new x)},M.prototype.write=function(t,e,i){var s=this._writableState,n=!1,a=!s.objectMode&&d(t);return a&&!l.isBuffer(t)&&(t=h(t)),"function"===typeof e&&(i=e,e=null),a?e="buffer":e||(e=s.defaultEncoding),"function"!==typeof i&&(i=O),s.ending?I(this,i):(a||T(this,s,t,i))&&(s.pendingcb++,n=D(this,s,a,t,e,i)),n},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||F(this,t))},M.prototype.setDefaultEncoding=function(t){if("string"===typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new S(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),M.prototype._write=function(t,e,i){i(new b("_write()"))},M.prototype._writev=null,M.prototype.end=function(t,e,i){var s=this._writableState;return"function"===typeof t?(i=t,t=null,e=null):"function"===typeof e&&(i=e,e=null),null!==t&&void 0!==t&&this.write(t,e),s.corked&&(s.corked=1,this.uncork()),s.ending||G(this,s,i),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),M.prototype.destroy=p.destroy,M.prototype._undestroy=p.undestroy,M.prototype._destroy=function(t,e){e(t)}}).call(this,i("c8ba"),i("4362"))},"19eb":function(t,e,i){var s=i("6d8b"),n=i("2b61"),a=i("d5b7"),r=i("9e2e");function o(t){for(var e in t=t||{},a.call(this,t),t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new n(t.style,this),this._rect=null,this.__clipPaths=null}o.prototype={constructor:o,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var i=this.transformCoordToLocal(t,e),s=this.getBoundingRect();return s.contain(i[0],i[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?a.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(!1),this},useStyle:function(t){return this.style=new n(t,this),this.dirty(!1),this},calculateTextPosition:null},s.inherits(o,a),s.mixin(o,r);var l=o;t.exports=l},"19f7":function(t,e,i){"use strict";var s=i("5537"),n=i.n(s);n.a},"1a1c":function(t,e,i){t.exports=i.p+"editor-assets/img/arrow-down-scroll.451eb2f7.svg"},"1a50":function(t,e,i){var s=i("6d8b");e.util=s;var n=i("1687");e.matrix=n;var a=i("401b");e.vector=a;var r=i("41ef");e.color=r;var o=i("342d");e.path=o;var l=i("3041");l.parseSVG;e.parseSVG=l.parseSVG;var c=i("e1fc");e.Group=c;var h=i("cbe5");e.Path=h;var d=i("0da8");e.Image=d;var u=i("d4c6");e.CompoundPath=u;var p=i("76a5");e.Text=p;var f=i("392f");e.IncrementalDisplayable=f;var m=i("8d32");e.Arc=m;var g=i("ac0f");e.BezierCurve=g;var v=i("d9fc");e.Circle=v;var b=i("62da");e.Droplet=b;var y=i("ae69");e.Ellipse=y;var _=i("fc7b");e.Heart=_;var x=i("c004");e.Isogon=x;var w=i("cb11");e.Line=w;var C=i("87b1");e.Polygon=C;var k=i("d498");e.Polyline=k;var S=i("c7a2");e.Rect=S;var A=i("4573");e.Ring=A;var O=i("bb11");e.Rose=O;var j=i("4aa2");e.Sector=j;var M=i("4d03");e.Star=M;var I=i("4e13");e.Trochoid=I;var T=i("48a9");e.LinearGradient=T;var E=i("dded");e.RadialGradient=E;var D=i("dc2f");e.Pattern=D;var L=i("9850");e.BoundingRect=L},"1a87":function(t,e,i){},"1ae4":function(t,e,i){t.exports=i.p+"editor-assets/img/logo.62e8799a.svg"},"1b2a":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"font-select-wrap"},[s("div",{staticClass:"field-title"},[t._v("字体")]),s("a-popover",{attrs:{placement:"left",trigger:"click","overlay-class-name":"ant-no-padding"}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("font-search-panel")],1),s("div",{staticClass:"field-content"},[s("a-input",{staticClass:"no-selected",attrs:{value:t.curDesign.example}},[s("img",{staticStyle:{width:"18px",height:"18px"},attrs:{slot:"suffix",src:i("3ee8")},slot:"suffix"})])],1)])],1)},n=[],a=i("5530"),r=i("0132"),o=i("5880"),l={components:{fontSearchPanel:r["default"]},computed:Object(a["a"])(Object(a["a"])({},Object(o["mapState"])("editor-v2",["element_craft_list"])),Object(o["mapGetters"])("editor-v2",["curDesign"]))},c=l,h=(i("97f1"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,"19ffbfdd",null);e["default"]=d.exports},"1b45":function(t,e,i){t.exports=i.p+"editor-assets/img/rollback.e9612b1a.svg"},"1b75":function(t,e,i){"use strict";var s=i("cbb8"),n=i.n(s);n.a},"1ba5":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function t(e,i,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},a=i("bdfe"),r=o(a);function o(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function h(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var d=function(t){var e=t.substr(0,7).split("").map((function(t){return+t})).reduce((function(t,e,i){return i%2?t+e:t+3*e}),0);return(10-e%10)%10},u=function(t){function e(t,i){return l(this,e),-1!==t.search(/^[0-9]{7}$/)&&(t+=d(t)),c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return h(e,t),s(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{8}$/)&&+this.data[7]===d(this.data)}},{key:"leftText",value:function(){return n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var t=this.data.substr(0,4);return n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,t,"LLLL")}},{key:"rightText",value:function(){return n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var t=this.data.substr(4,4);return n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,t,"RRRR")}}]),e}(r.default);e.default=u},"1bd1":function(t,e,i){t.exports=i.p+"editor-assets/img/mirror-dark.697e4c59.svg"},"1bd14":function(t,e){t.exports=(t,e)=>{const i=t._malloc(e.length*Uint32Array.BYTES_PER_ELEMENT);return e.forEach((e,s)=>{const n=t._malloc(e.length+1);t.writeAsciiToMemory(e,n),t.setValue(i+Uint32Array.BYTES_PER_ELEMENT*s,n,"i32")}),[e.length,i]}},"1bf0":function(t,e,i){t.exports=i.p+"editor-assets/img/ed.100ce152.svg"},"1c0d":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"select-surface-craft-wrap"},[i("div",{staticClass:"flex item-center flex-start mtb-18"},[i("div",{staticClass:"title mr-16"},[t._v("工艺")]),i("a-select",{staticStyle:{width:"120px"},attrs:{value:t.curCraftId},on:{change:t.onChoose}},t._l(t.avaliable_element_craft_list,(function(e,s){return i("a-select-option",{key:s,attrs:{value:e.id,label:e.name}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)])},n=[],a=(i("ddb0"),i("5530")),r=i("5880"),o={computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["element_craft_list"])),Object(r["mapGetters"])("editor-v2",["curDesign"])),{},{avaliable_element_craft_list(){return[{id:0,name:"无"},...this.element_craft_list]},curCraftId(){return this.curDesign.style.craft||0}}),methods:{onChoose(t){this.curDesign.style.craft=t}}},l=o,c=i("2877"),h=Object(c["a"])(l,s,n,!1,null,null,null);e["default"]=h.exports},"1c67":function(t,e,i){t.exports=i.p+"editor-assets/img/arrange-bottom.c052a712.svg"},"1cbc":function(t,e,i){},"1cbd":function(t,e,i){"use strict";var s=i("818c"),n=i.n(s);n.a},"1d43":function(t,e){t.exports="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAAEEfUpiAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEuUlEQVRYCb1XT2hcRRj/5mU3uyHJQilGa40glFQsCq0JtAexBUXxIIoeRE+NtdCKB/UiqLWtCiJoD9IKVdOTIqgooqAYNMVDC6V6KAqGaqGxW62KuNu4u8nujr/f93beznu7b5NG68Dum/n+zzfz/WZGpNXsZKHs+vGv49jtwzbO8UeQOmgfKdyhNLujsNkxIzV22oPJwk+dEjtW3eSrUgB2Q0E6cBrKSIQTSJ987Auk9qMgWhJubJyG3buhX87OnRJri+ZIeZuj69dJ+0Q7OTzXYhYu+gy/b3dfcVUAwss+MdavVM9nxPQfIDHpBnFofBmRhaPgb3KEmAUM6OKTJJFj++jw6kjJbi8cQ9TrnSD67zFAjqM8cGAfW5eTixf+QG8QrOckY9+VbL4o1cUJkeYryNFGMeZ5M1XaQ3k2NRAq/lqV7Fi/OXxyMWSl/yOCGbEmZ46UtghXIJkBXzWNxylhan8FunwZiebnK/fqm6nyD5hqIeDaS6NvbS/hXrxAN45tfNlLqBuPKyGBeT1aBRC4uX5EaFu7KTga11f+lt9lIL/GHPrtl8hAJMD1rdR0fo4WfenxrdLuaIxOhwEytcbr9ims+TiGRfym5drRx83e7xbI91vMAOp3P5L6LBS/xS59UvLZE7JYvVrq5gGY3Qd/8zI0stq8drrmG9E+cxAhQQc3JBA5uC/szlU3OhGNgHtdjK0tlUAq2Z03Z2VxdkGGrsxrJCyKtN3mvCS/YSQhEgSacSPXJ4U4TjNs3iwdB3eQZYB6toVwW3Yz0YuGaj07d4CAsLLGUhe5DZATb8mw/XGEMFRp5M4DrtZ0GPCFqOyP467q49gzJ1c+BSJUxrwUsKK0suLmlx4B3swbpc9VkKFqlS2tFsrj7NJtj1E4BZQmS3Q5RhDtDJY+64BVDbCuWd9qhEDRpUERGIizmmA6VR51IrFqJNE+XDgkTbvLCbS/piQDufXqrE3sjgceX/QAqdX2SFMe4q71eel9OAvkbcnl9icdJnU6ZkABdVqpfYheeOcw8j7Izyy3ZJguyL8gVu6nPeDQccz+3m7BxAJQx9XqCSheg9wclQG5zxws46RcedONUZEPYPNW2PxZ8vkJP5AoAA9Nz8iAnfi3jpMhh4EYTM5elzzedeNoLaTswKQxN1Yd7sxLaCxa1eNmRTOtA+gzniOojU2XYCvC23S86W4N2f4GmdgIKLkzEJ5+2nCI/W+t5Qu+cUXE0WuRRZ6gKU0BIIVHcho/NTP0VWkg/2accM5zf0yPb5FZGky2NEPOcRo/aSca86oQtiKhcFr7endokS/3p+1rOuCNB7koIZH7WgByWd2HPvSSVNLbFr21kO80eoPSZ7aEt4b/Pg59kjXsMUx4Hsi4joDUBqLwfTCDIDYrCmbGbl/OdX85YeplrD77haIhYXloZKu7HkYBOEMWj0dp1j8N4dicwaHy4EozojNuyjsh+gGGM5m7zOE/Tzlf/HYE4Jj68Jm/8DQCeUKXRqVx6bXykZjga+lrnNMXFOnc1Xxl2OYtsHiPgowaQqqNvCqDIy+6GSvZ+0sNwJPRrj5nz81tk4bcDQc3oIZZSlE5gVYE7Xt9QK8d/arbVT5pk+N/AMRMEY0KSQZGAAAAAElFTkSuQmCC"},"1d57":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACBklEQVRYR+2VPUwTYRjH/8+VwUEXCVUTNZFFGE3YXXU0pnHRROJgOEqvLHAQhxtMaHGQ68dd3JQAURsSFsLKymTCBAtDIcQyaTDykd77mGvS5K5ee9eXXLr0Hd/3nv//93y87xF6vKjH/ugD+CqQ1hafM4syA7fiaA0BNSJlsmTOrDf1fQBqJvcTMZl7EqpZBf12O4A9AA/jyN6juW8V9JFAgKmphUcOKe8BjqUFANUSLN4Vi3M/AgFizjxQXvoapqfzY1znJ4JxYJf0NVl4KQBVW3zBLFYJSLjGBKwN3Tx/ZRiG6BakawDXHCxWAAz4zBjLycHz8W4hugJoa94kkYCIDBBqLgkRCSCyuQREKMCEtpAiJnfKvT2v/zcDLdNHoC/lwuzrsKHsCKCqxnUMXDsGcMMjVAcpL8Hiq1ecgSoB9317QjyzS/MbnSA6AmSzH+9cigsXoLka5pY5803N5NgrrIjEsKM4214IYqjlom5LA7iBqpY3wZwBcMrEb2xzrtLYbwGwCjql0x8eCMXZBDAK0O5f5ezx5yXj15UA3OBGJS5/n1qW8acpFgTgnqVS3xPJZPXuycnOUaVSca40A52C2wGEGbaeh96CdoJ9gH4F+hXofQW0fBXM9xrXlOjQMmd9/4Go74H0OzCRzT0lpk+uERO/tZf0raim3u+kAWTMgmJ6DvAPEtXeIdorHPcAAAAASUVORK5CYII="},"1d65":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-limit pr-12"},[i("a-progress",{attrs:{percent:t.usedNumber/t.totalNumber*100,size:"small","show-info":!1,"stroke-color":"#ff6634"}}),i("div",{staticClass:"flex flex-between item-center"},[i("div",{staticClass:"fo-gray fo-12 mt-4"},[t._v(" 个人已使用 "+t._s(t.usedNumber)+"GB / 剩余容量 "+t._s(t.remainingNumber)+"GB ")])])],1)},n=[],a=(i("b680"),{props:{usedNumber:{type:Number,default:0},totalNumber:{type:Number,default:100}},computed:{remainingNumber(){return(this.totalNumber-this.usedNumber).toFixed(1)}}}),r=a,o=(i("fb01"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"a972642e",null);e["default"]=l.exports},"1d6f":function(t,e,i){"use strict";var s=i("976d"),n=i.n(s);n.a},"1da4":function(t,e,i){"use strict";var s=i("8be9"),n=i.n(s);n.a},"1da9":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"select-surface-craft-wrap"},[i("div",{staticClass:"title fw-500"},[t._v("表面处理")]),i("div",{staticClass:"flex flex-between item-center my-18"},[i("div",{staticClass:"title mr-16"},[t._v("工艺")]),i("a-select",{staticStyle:{width:"140px"},attrs:{value:t.project_data.membrane_id||t.default_membrane_id},on:{change:t.onChoose}},t._l(t.surface_craft_list,(function(e,s){return i("a-select-option",{key:s,attrs:{value:e.id,label:e.name}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)])},n=[],a=i("5530"),r=i("5880"),o={computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["project_data","surface_craft_list"])),{},{default_membrane_id(){const{surface_craft_list:t}=this;return t&&t.length>1?t[0].id:0}}),methods:{onChoose(t){this.project_data.membrane_id=t}}},l=o,c=i("2877"),h=Object(c["a"])(l,s,n,!1,null,"3afae7f2",null);e["default"]=h.exports},"1df2":function(t,e,i){t.exports=i.p+"editor-assets/img/help-actived.91676fd0.svg"},"1e0b":function(t,e,i){"use strict";var s=i("95ea"),n=i.n(s);n.a},"1e71":function(t,e,i){},"1e9d":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("div",{staticClass:"mb-10 flex flex-between"},[s("a-tooltip",{attrs:{effect:"dark",placement:"top"}},[s("span",{attrs:{slot:"title"},slot:"title"},[t._v(" 复制并粘贴 ")]),s("div",{class:"box-button "+(t.curDesign.locked?"disabled":""),on:{click:t.onCopyAndPaste}},[t.curDesign.locked?s("img",{attrs:{src:i("d4dd"),alt:""}}):s("img",{attrs:{src:i("e9a4"),alt:""}})])]),s("a-popover",{attrs:{placement:"top",trigger:"click"},on:{visibleChange:function(e){t.layerShow.showPopover=!t.curDesign.locked&&t.layerShow.showPopover}},model:{value:t.layerShow.showPopover,callback:function(e){t.$set(t.layerShow,"showPopover",e)},expression:"layerShow.showPopover"}},[s("div",{staticClass:"menu",attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"menu-item",on:{click:function(e){return t.onMoveDesignLayer("top")}}},[t._v("移到顶层")]),s("div",{staticClass:"menu-item",on:{click:function(e){return t.onMoveDesignLayer("up")}}},[t._v("上移一层")]),s("div",{staticClass:"menu-item",on:{click:function(e){return t.onMoveDesignLayer("down")}}},[t._v("下移一层")]),s("div",{staticClass:"menu-item",on:{click:function(e){return t.onMoveDesignLayer("bottom")}}},[t._v("移到底层")])]),s("a-tooltip",{attrs:{effect:"dark",placement:"top",visible:t.layerShow.hoverToolTip&&!t.layerShow.showPopover}},[s("span",{attrs:{slot:"title"},slot:"title"},[t._v(" 层级 ")]),s("div",{class:"box-button "+(t.curDesigns&&t.curDesigns.length>1?"disabled":""),on:{mousemove:function(e){t.layerShow.hoverToolTip=!0},mouseleave:function(e){t.layerShow.hoverToolTip=!1}}},[t.curDesign.locked?s("img",{attrs:{src:i("754b")}}):s("img",{attrs:{src:i("9bfc")}})])])],1),s("a-popover",{attrs:{placement:"top",trigger:"click"},on:{visibleChange:function(e){t.flipShow.showPopover=!t.curDesign.locked&&t.flipShow.showPopover}},model:{value:t.flipShow.showPopover,callback:function(e){t.$set(t.flipShow,"showPopover",e)},expression:"flipShow.showPopover"}},[s("div",{staticClass:"menu",attrs:{slot:"content"},slot:"content"},[s("div",{class:"menu-item "+(t.curDesign.style.rotateX?"active":""),on:{click:function(e){return t.onFlip("x")}}},[t._v(" 水平翻转 ")]),s("div",{class:"menu-item "+(t.curDesign.style.rotateY?"active":""),on:{click:function(e){return t.onFlip("y")}}},[t._v(" 垂直翻转 ")])]),s("a-tooltip",{attrs:{effect:"dark",placement:"top",visible:t.flipShow.hoverToolTip&&!t.flipShow.showPopover}},[s("span",{attrs:{slot:"title"},slot:"title"},[t._v(" 翻转 ")]),s("div",{class:"box-button "+(t.curDesign.locked?"disabled":""),on:{mousemove:function(e){t.flipShow.hoverToolTip=!0},mouseleave:function(e){t.flipShow.hoverToolTip=!1}}},[t.curDesign.locked?s("img",{attrs:{src:i("1bd1")}}):s("img",{attrs:{src:i("1f26")}})])])],1),s("a-tooltip",{attrs:{effect:"dark",placement:"top"}},[s("span",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.curDesign.locked?"解锁":"锁定")+" ")]),s("div",{class:"box-button",on:{click:t.onSwitchLocked}},[t.curDesign.locked?s("img",{attrs:{src:i("d96b")}}):s("img",{attrs:{src:i("98a9")}})])])],1),s("div",{staticClass:"mb-10"},[s("a-button",{class:"btn-delete "+(t.curDesign.locked?"disabled":""),attrs:{disabled:t.curDesign.locked},on:{click:t.onRemove}},[t._v("删除")])],1)])},n=[],a=i("5530"),r=i("5880"),o=i("87a0"),l={computed:Object(a["a"])({},Object(r["mapGetters"])("editor-v2",["curDesign","curDesigns"])),data(){return{layerShow:{hoverToolTip:!1,showPopover:!1},flipShow:{hoverToolTip:!1,showPopover:!1}}},methods:{onCopyAndPaste(){this.$bus.$emit("shortcut",{action:o["a"].COPY_AND_PASTE})},onMoveDesignLayer(t){if(1!==this.curDesigns.length)return;const e={top:o["a"].TOP,up:o["a"].MOVE_UP,down:o["a"].MOVE_DOWN,bottom:o["a"].DOWN},i=e[t];i&&this.$bus.$emit("shortcut",{action:i})},onFlip(t){if(1===this.curDesigns.length&&!this.curDesign.locked)switch(t){case"x":this.curDesign.style.rotateX=!this.curDesign.style.rotateX;break;case"y":this.curDesign.style.rotateY=!this.curDesign.style.rotateY;break;default:break}},onSwitchLocked(){this.curDesigns.forEach(t=>{t.locked=!t.locked})},onRemove(){this.curDesigns.forEach(t=>{t.locked||this.$store.commit("editor-v2/removeSingleDesign",t.uuid)})}}},c=l,h=(i("fc17"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,"4b4ffe74",null);e["default"]=d.exports},"1ecc":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"px-12 mt-24 sunLight"},[t._m(0),i("div",{staticClass:"flex flex-between item-center mt-12"},[i("div",{staticClass:"fo-12 pfow "},[t._v("亮度")]),i("div",{staticClass:"light-render-input"},[i("input",{staticClass:"light-render-input",domProps:{value:t.lightPowerValue+t.lightPowerUnit},on:{focus:function(e){t.lightPowerUnit="",e.target.select()},blur:t.lightPowerInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.lightPowerInput(e)}}})])]),i("a-slider",{staticStyle:{"margin-top":"5px"},attrs:{max:1e3,min:0,step:1,"tip-formatter":function(t){return t+"%"}},on:{change:t.lightPowerChange,afterChange:function(e){return t.$emit("attch-history")}},model:{value:t.lightPowerValue,callback:function(e){t.lightPowerValue=e},expression:"lightPowerValue"}}),i("div",[i("div",{staticClass:"flex flex-between item-center mt-12"},[i("div",{staticClass:"fo-12 pfow "},[t._v("阴影")]),i("div",{staticClass:"light-render-input"},[i("input",{staticClass:"light-render-input",domProps:{value:t.shadowValue+t.shadowUnit},on:{focus:function(e){t.shadowUnit="",e.target.select()},blur:t.shadowInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.shadowInput(e)}}})])]),i("a-slider",{staticStyle:{"margin-top":"5px"},attrs:{"tip-formatter":function(t){return t+"°"},max:180,min:0,step:1},on:{change:t.shadowChange,afterChange:function(e){return t.$emit("attch-history")}},model:{value:t.shadowValue,callback:function(e){t.shadowValue=e},expression:"shadowValue"}})],1),i("rotate-light",{attrs:{position:t.position},on:{"position-change":function(e){t.position=e}},model:{value:t.rotate,callback:function(e){t.rotate=e},expression:"rotate"}}),i("light-height",{attrs:{position:t.position,xrotate:t.rotate},on:{"position-change":function(e){t.position=e}},model:{value:t.heightRotate,callback:function(e){t.heightRotate=e},expression:"heightRotate"}}),t.lightVisible?t._e():i("div",{staticClass:"mask"})],1)])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mt-24 flex flex-between item-center "},[i("div",{staticClass:"fo-14 pfow"},[t._v("阳光")])])}],a=i("6116"),r=i("dad2"),o=i("362b"),l={components:{rotateLight:r["default"],lightHeight:o["default"]},props:{light:{type:Object}},data(){return{sunLightTC:2e3,sunLightTCUnit:"k",rotate:45,lightVisible:!0,heightRotate:45,lightPowerValue:17,lightPowerUnit:"%",shadowUnit:"°",shadowValue:10,position:{x:Math.sqrt(5),y:5*Math.sqrt(2),z:Math.sqrt(5)}}},mounted(){this.initRotate(),this.$bus.$on("initLightPosition",t=>{this.position=t,this.initRotate()}),this.$bus.$on("initLightVisible",t=>{this.lightVisible="undefined"===typeof t||t,this.checkedChange(this.lightVisible)}),this.$bus.$on("initSunLightPowerChange",t=>{this.lightPowerValue=parseInt(100*t)}),this.$bus.$on("sunLightShadowInit",t=>{this.shadowValue=t})},beforeDestroy(){this.$bus.$off("initLightPosition"),this.$bus.$off("initLightVisible"),this.$bus.$off("initSunLightPowerChange"),this.$bus.$off("sunLightShadowInit")},methods:{shadowInput(t){"blur"===t.type&&(this.shadowUnit="°");let e=0;t.target.value&&(e=parseInt(Object(a["c"])(t.target.value))),e>180&&(e=180),e<0&&(e=0),this.shadowValue!=e&&(this.shadowValue=e),this.shadowChange(e)},shadowChange(t){this.$bus.$emit("sunLightShadowChange",t)},lightPowerInput(t){"blur"===t.type&&(this.lightPowerUnit="%");let e=0;t.target.value&&(e=parseFloat(Object(a["c"])(t.target.value))),e>1e3&&(e=1e3),e<0&&(e=0),this.lightPowerValue!=e&&(this.lightPowerValue=e),this.lightPowerChange(e)},lightPowerChange(t){this.$bus.$emit("sunLightPowerChange",t/100)},checkedChange(t){this.$emit("openSunLightChange",t)},initRotate(){const t=Math.atan2(this.position.z,this.position.x);let e=t/(2*Math.PI)*360;e+=180,e<0&&(e+=360),e>=360&&(e-=360),this.rotate=parseInt(e);const i=Math.sqrt(Math.pow(this.position.z,2)+Math.pow(this.position.x,2)),s=Math.atan2(this.position.y,i);let n=s/(2*Math.PI)*360;this.heightRotate=parseInt(n)},sunLightTCInput(t){"blur"===t.type&&(this.sunLightTCUnit="k");let e=0;t.target.value&&(e=parseFloat(Object(a["c"])(t.target.value))),e>2e4&&(e=2e4),e<1e3&&(e=1e3),this.sunLightTC!=e&&(this.sunLightTC=e,this.$emit("attch-history","sunLightTC")),this.sunLightTCChange(e)},sunLightTCChange(t){this.$emit("sunLightTCChange",t)}}},c=l,h=(i("3f47"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,null,null);e["default"]=d.exports},"1f0e":function(t,e,i){t.exports=i.p+"editor-assets/img/sun.9197562e.svg"},"1f1e6":function(t,e,i){t.exports=i.p+"editor-assets/img/scene-a.ad5d0da9.svg"},"1f26":function(t,e,i){t.exports=i.p+"editor-assets/img/mirror.040a9c94.svg"},"1fa1":function(t,e,i){t.exports=i.p+"editor-assets/img/mode-d.4101b17e.svg"},"1fab":function(t,e){var i=Array.prototype.slice,s=function(t){this._$handlers={},this._$eventProcessor=t};function n(t,e){var i=t._$eventProcessor;return null!=e&&i&&i.normalizeQuery&&(e=i.normalizeQuery(e)),e}function a(t,e,i,s,a,r){var o=t._$handlers;if("function"===typeof i&&(a=s,s=i,i=null),!s||!e)return t;i=n(t,i),o[e]||(o[e]=[]);for(var l=0;l<o[e].length;l++)if(o[e][l].h===s)return t;var c={h:s,one:r,query:i,ctx:a||t,callAtLast:s.zrEventfulCallAtLast},h=o[e].length-1,d=o[e][h];return d&&d.callAtLast?o[e].splice(h,0,c):o[e].push(c),t}s.prototype={constructor:s,one:function(t,e,i,s){return a(this,t,e,i,s,!0)},on:function(t,e,i,s){return a(this,t,e,i,s,!1)},isSilent:function(t){var e=this._$handlers;return!e[t]||!e[t].length},off:function(t,e){var i=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(i[t]){for(var s=[],n=0,a=i[t].length;n<a;n++)i[t][n].h!==e&&s.push(i[t][n]);i[t]=s}i[t]&&0===i[t].length&&delete i[t]}else delete i[t];return this},trigger:function(t){var e=this._$handlers[t],s=this._$eventProcessor;if(e){var n=arguments,a=n.length;a>3&&(n=i.call(n,1));for(var r=e.length,o=0;o<r;){var l=e[o];if(s&&s.filter&&null!=l.query&&!s.filter(t,l.query))o++;else{switch(a){case 1:l.h.call(l.ctx);break;case 2:l.h.call(l.ctx,n[1]);break;case 3:l.h.call(l.ctx,n[1],n[2]);break;default:l.h.apply(l.ctx,n);break}l.one?(e.splice(o,1),r--):o++}}}return s&&s.afterTrigger&&s.afterTrigger(t),this},triggerWithContext:function(t){var e=this._$handlers[t],s=this._$eventProcessor;if(e){var n=arguments,a=n.length;a>4&&(n=i.call(n,1,n.length-1));for(var r=n[n.length-1],o=e.length,l=0;l<o;){var c=e[l];if(s&&s.filter&&null!=c.query&&!s.filter(t,c.query))l++;else{switch(a){case 1:c.h.call(r);break;case 2:c.h.call(r,n[1]);break;case 3:c.h.call(r,n[1],n[2]);break;default:c.h.apply(r,n);break}c.one?(e.splice(l,1),o--):l++}}}return s&&s.afterTrigger&&s.afterTrigger(t),this}};var r=s;t.exports=r},"1fbb":function(t,e,i){"use strict";var s=i("a7a0"),n=i.n(s);n.a},"1fd7":function(t,e,i){"use strict";i.r(e),i.d(e,"isOrderTypeVip",(function(){return s})),i.d(e,"isOrderTypePrint",(function(){return n})),i.d(e,"getPayInfo",(function(){return a})),i.d(e,"getImages",(function(){return r})),i.d(e,"getAddress",(function(){return o})),i.d(e,"forgePriceDataFromPrintOrder",(function(){return l})),i.d(e,"getStepStatusProps",(function(){return c})),i.d(e,"isMoneyEqual",(function(){return h})),i.d(e,"translatePayType",(function(){return d}));i("b680");const s=t=>"vip"===t.orderType,n=t=>"print"===t.orderType,a=t=>t.payInfo,r=t=>t.project.map(t=>({file_path:t.screenshot,id:t.id})),o=t=>{const e=a(t),{consigneeInfo:i}=e;return i},l=t=>{if(!n(t))throw new TypeError("print only.");const{projectInfo:e,originalFee:i}=a(t);return{payFee:t.totalFee,count:t.goodsCount,totalFee:i,projectInfo:e}},c=t=>{if(!n(t))throw new TypeError("print only.");let e=(t.payStatus,""),i="wait"===t.payStatus?1:2,s="wait"===t.payStatus?"请付款":"";return{status:e,current:i,description:s}},h=(t,e)=>t.toFixed(2)===e.toFixed(2),d=t=>{const e={wxpay:"微信支付",alipay:"支付宝",convert:"激活码"};return e[t.payType]||""}},2:function(t,e){},2036:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAeCAYAAAE6DSy/AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAHgAAAACyl2QUAAACd0lEQVRIDb1X207cMBC1nQ0I6FMlyv1f+LLC9rE/0g8rF6HVIlSpK9jdxJ0zYdyJYy9JgDXKOh4fnzkzvsQYY4yl53+5uZt5ajmx8AsZKzGyYWdnYrQxyRGMwlETBxvZgDfiaIzKbRgmElDbVwDbzk8PC3qBTjxcAgDDxaqBbm/XXQAqnXhHDEEDtZO+AURxt/ezK6rzIIj8ffswzYGauK37TqDrFCgk12ZADFgu1wYzkAKF1DKo7IIYIDlYrtYkg0LS7ijMa9jUQ68DCtKgUgGPQtaLJcyloL2vf1ycHSGvolxqgbTqDoH09iXiJMkgaEe6UZAoCq1SE5gMLRA4a01JgzEdQ4jszf3sjqI9Ybf0470n76BIl0Row7Ie04YQqCPvNh6l2o4SFbb8GBJWgGyrwYOUhBDGkgQChDWGpEUwhqRDMJSECeq6NsffvmJsKH3DYQLnHOIfRRJCmEyKUSRMgPWPEMaQMAE2j4QwlKR1oFRVbYqiiSq3K9WXBwn3hLaPknoZjHZuS8ezg3WfW/sbz0Jx+t6ad/PrFzDm2iQuxo5ut+ZAnXYgjDMQt0c71QNbAqRjm0KSArYpZKOAbQjpJeAzhXQE8MWAlpvcpMS5rj9yjTTHjmJfLF7Miq5xOBvllqK6+VXdWq7IEG/XuB0Pb7U7GZDe9boyJZ3wRyTk8ekP33ikL67fk5GOgC8He5T+VXD42UI6AnIOc/Y4G2gPyUhHgBA2Didmf3/X/F08i9mwvSxMSf8P4CK6qfQR4mjF/EqR4Lvq6U87B47t2CVvOAc2sVhhlsKLFT9mPp+fP7/UP701l/qmLMiPquneMD07OZxqvn8nQbWtA+mW4QAAAABJRU5ErkJggg=="},2075:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{centered:"",title:"编辑二维码"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("a-form-model",{ref:"formRef",attrs:{model:t.form,"label-col":{span:6},"wrapper-col":{span:16}}},[i("a-form-model-item",{attrs:{label:"内容类型",prop:"codeValue"}},[i("a-button",{staticClass:"choice-button",attrs:{type:"url"===t.form.codeType?"primary":"default",ghost:"url"===t.form.codeType},on:{click:function(e){return t.setCodeType("url")}}},[t._v("静态网址")]),i("a-button",{staticClass:"choice-button",attrs:{type:"text"===t.form.codeType?"primary":"default",ghost:"text"===t.form.codeType},on:{click:function(e){return t.setCodeType("text")}}},[t._v("文本")]),i("a-button",{staticClass:"choice-button",attrs:{type:"officialaccount"===t.form.codeType?"primary":"default",ghost:"officialaccount"===t.form.codeType},on:{click:function(e){return t.setCodeType("officialaccount")}}},[t._v("微信公众号")])],1),i("a-form-model-item",{attrs:{label:" ",prop:"codeValue",colon:!1}},["text"===t.form.codeType?i("a-textarea",{staticStyle:{resize:"none"},attrs:{rows:2,placeholder:"请输入文本"},model:{value:t.form.codeValue,callback:function(e){t.$set(t.form,"codeValue",e)},expression:"form.codeValue"}}):"url"===t.form.codeType?i("a-input-group",{attrs:{compact:""}},[i("a-input",{attrs:{placeholder:"请输入网址"},model:{value:t.form.codeValue,callback:function(e){t.$set(t.form,"codeValue",e)},expression:"form.codeValue"}},[i("a-select",{attrs:{slot:"addonBefore","default-value":t.form.httpType},on:{change:function(e){t.form.httpType=e}},slot:"addonBefore"},[i("a-select-option",{attrs:{value:"http://"}},[t._v(" http:// ")]),i("a-select-option",{attrs:{value:"https://"}},[t._v(" https:// ")])],1)],1)],1):i("div",[i("a-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入公众号ID"},model:{value:t.form.codeValue,callback:function(e){t.$set(t.form,"codeValue",e)},expression:"form.codeValue"}}),i("a",{staticStyle:{margin:"0 10px",color:"#aaaaaa"},attrs:{href:"https://help.baoxiaohe.com/support/archives/350/",target:"_blank"}},[i("a-icon",{attrs:{type:"question-circle"}})],1)],1),i("div",{staticClass:"small example"},[t._v(" 示例: "),i("span",{on:{click:function(e){return t.useExample(t.exampleValue)}}},[t._v(t._s(t.exampleValue))])]),i("div",{staticClass:"small"},[t._v("使用前请自行测试")])],1)],1),i("template",{slot:"footer"},[i("a-button",{key:"back",on:{click:t.handleCancel}},[t._v(" 取消 ")]),i("a-button",{key:"submit",attrs:{type:"primary",disabled:0==t.form.codeValue.length},on:{click:t.handleOk}},[t._v(" 保存并使用 ")])],1)],2)},n=[],a=(i("5319"),i("2ca0"),i("5530")),r=i("0c6d"),o=i("c64e"),l=i.n(o),c=i("5880"),h={data(){return{visible:!1,design:null,rules:{codeValue:[{validator:this.validateQrcode,trigger:"blur"}]},form:{codeType:"url",codeValue:"https://www.baoxiaohe.com"},example:{url:"www.baoxiaohe.com",text:"包小盒在线3D包装云设计",officialaccount:"baoxiaohesheji"},exampleValue:""}},computed:Object(a["a"])({},Object(c["mapState"])(["isInside"])),methods:{show(t){this.design=t,this.form.codeType=t.codeType,this.form.codeValue=t.codeValue,this.form.httpType="http://","url"===this.design.codeType&&(this.design.value.startsWith("https://")&&(this.form.httpType="https://"),this.form.codeValue=this.design.value.replace(this.form.httpType,"")),this.visible=!0,this.exampleValue=this.example[this.form.codeType]},setCodeType(t){this.form.codeType=t,this.exampleValue=this.example[t]},generateNewQrcode(t){this.design.uuid=l()(),this.design.codeType=t.codeType,this.design.codeValue=t.codeValue,this.design.value=t.value},async handleOk(){const t={uuid:this.design.uuid,codeType:this.form.codeType,codeValue:this.form.codeValue};if("text"===this.form.codeType)t.value=this.form.codeValue;else if("url"===this.form.codeType)t.value=this.form.httpType+this.form.codeValue;else if(t.value=await this.parseQrcode(),"string"!==typeof t.value||0===t.value.length)return void this.$message.error("公众号不存在");this.design.uuid?this.$emit("qrcode-change",t):(this.generateNewQrcode(t),this.$store.commit("editor/setEditorTempMaterial",this.design)),this.$store.commit("increaseCanvasVersion",this.isInside),this.visible=!1},handleCancel(){this.visible=!1},async parseQrcode(){return await Object(r["Q"])({username:this.form.codeValue})},useExample(t){this.form.codeValue=t}},watch:{"form.codeValue"(){"url"===this.form.codeType&&(this.form.codeValue.startsWith("http://")?(this.form.codeValue=this.form.codeValue.replace("http://",""),this.form.httpType="http://"):this.form.codeValue.startsWith("https://")&&(this.form.codeValue=this.form.codeValue.replace("https://",""),this.form.httpType="https://"))}}},d=h,u=(i("e6c7"),i("2877")),p=Object(u["a"])(d,s,n,!1,null,"94e5f418",null);e["default"]=p.exports},"20c5":function(t,e,i){t.exports=i.p+"editor-assets/img/ra2.1db4b2b7.svg"},"20c8":function(t,e,i){var s=i("4a3f"),n=i("401b"),a=i("e263"),r=i("9850"),o=i("2cf4c"),l=o.devicePixelRatio,c={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},h=[],d=[],u=[],p=[],f=Math.min,m=Math.max,g=Math.cos,v=Math.sin,b=Math.sqrt,y=Math.abs,_="undefined"!==typeof Float32Array,x=function(t){this._saveData=!t,this._saveData&&(this.data=[]),this._ctx=null};x.prototype={constructor:x,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e,i){i=i||0,this._ux=y(i/l/t)||0,this._uy=y(i/l/e)||0},getContext:function(){return this._ctx},beginPath:function(t){return this._ctx=t,t&&t.beginPath(),t&&(this.dpr=t.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(c.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){var i=y(t-this._xi)>this._ux||y(e-this._yi)>this._uy||this._len<5;return this.addData(c.L,t,e),this._ctx&&i&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),i&&(this._xi=t,this._yi=e),this},bezierCurveTo:function(t,e,i,s,n,a){return this.addData(c.C,t,e,i,s,n,a),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,i,s,n,a):this._ctx.bezierCurveTo(t,e,i,s,n,a)),this._xi=n,this._yi=a,this},quadraticCurveTo:function(t,e,i,s){return this.addData(c.Q,t,e,i,s),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,i,s):this._ctx.quadraticCurveTo(t,e,i,s)),this._xi=i,this._yi=s,this},arc:function(t,e,i,s,n,a){return this.addData(c.A,t,e,i,i,s,n-s,0,a?0:1),this._ctx&&this._ctx.arc(t,e,i,s,n,a),this._xi=g(n)*i+t,this._yi=v(n)*i+e,this},arcTo:function(t,e,i,s,n){return this._ctx&&this._ctx.arcTo(t,e,i,s,n),this},rect:function(t,e,i,s){return this._ctx&&this._ctx.rect(t,e,i,s),this.addData(c.R,t,e,i,s),this},closePath:function(){this.addData(c.Z);var t=this._ctx,e=this._x0,i=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,i),t.closePath()),this._xi=e,this._yi=i,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t,this._dashIdx=0;for(var e=0,i=0;i<t.length;i++)e+=t[i];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length===e||!_||(this.data=new Float32Array(e));for(var i=0;i<e;i++)this.data[i]=t[i];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,i=0,s=this._len,n=0;n<e;n++)i+=t[n].len();_&&this.data instanceof Float32Array&&(this.data=new Float32Array(s+i));for(n=0;n<e;n++)for(var a=t[n].data,r=0;r<a.length;r++)this.data[s++]=a[r];this._len=s},addData:function(t){if(this._saveData){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var i=0;i<arguments.length;i++)e[this._len++]=arguments[i];this._prevCmd=t}},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var i,s,n=this._dashSum,a=this._dashOffset,r=this._lineDash,o=this._ctx,l=this._xi,c=this._yi,h=t-l,d=e-c,u=b(h*h+d*d),p=l,g=c,v=r.length;h/=u,d/=u,a<0&&(a=n+a),a%=n,p-=a*h,g-=a*d;while(h>0&&p<=t||h<0&&p>=t||0===h&&(d>0&&g<=e||d<0&&g>=e))s=this._dashIdx,i=r[s],p+=h*i,g+=d*i,this._dashIdx=(s+1)%v,h>0&&p<l||h<0&&p>l||d>0&&g<c||d<0&&g>c||o[s%2?"moveTo":"lineTo"](h>=0?f(p,t):m(p,t),d>=0?f(g,e):m(g,e));h=p-t,d=g-e,this._dashOffset=-b(h*h+d*d)},_dashedBezierTo:function(t,e,i,n,a,r){var o,l,c,h,d,u=this._dashSum,p=this._dashOffset,f=this._lineDash,m=this._ctx,g=this._xi,v=this._yi,y=s.cubicAt,_=0,x=this._dashIdx,w=f.length,C=0;for(p<0&&(p=u+p),p%=u,o=0;o<1;o+=.1)l=y(g,t,i,a,o+.1)-y(g,t,i,a,o),c=y(v,e,n,r,o+.1)-y(v,e,n,r,o),_+=b(l*l+c*c);for(;x<w;x++)if(C+=f[x],C>p)break;o=(C-p)/_;while(o<=1)h=y(g,t,i,a,o),d=y(v,e,n,r,o),x%2?m.moveTo(h,d):m.lineTo(h,d),o+=f[x]/_,x=(x+1)%w;x%2!==0&&m.lineTo(a,r),l=a-h,c=r-d,this._dashOffset=-b(l*l+c*c)},_dashedQuadraticTo:function(t,e,i,s){var n=i,a=s;i=(i+2*t)/3,s=(s+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,i,s,n,a)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,_&&(this.data=new Float32Array(t)))},getBoundingRect:function(){h[0]=h[1]=u[0]=u[1]=Number.MAX_VALUE,d[0]=d[1]=p[0]=p[1]=-Number.MAX_VALUE;for(var t=this.data,e=0,i=0,s=0,o=0,l=0;l<t.length;){var f=t[l++];switch(1===l&&(e=t[l],i=t[l+1],s=e,o=i),f){case c.M:s=t[l++],o=t[l++],e=s,i=o,u[0]=s,u[1]=o,p[0]=s,p[1]=o;break;case c.L:a.fromLine(e,i,t[l],t[l+1],u,p),e=t[l++],i=t[l++];break;case c.C:a.fromCubic(e,i,t[l++],t[l++],t[l++],t[l++],t[l],t[l+1],u,p),e=t[l++],i=t[l++];break;case c.Q:a.fromQuadratic(e,i,t[l++],t[l++],t[l],t[l+1],u,p),e=t[l++],i=t[l++];break;case c.A:var m=t[l++],b=t[l++],y=t[l++],_=t[l++],x=t[l++],w=t[l++]+x;l+=1;var C=1-t[l++];1===l&&(s=g(x)*y+m,o=v(x)*_+b),a.fromArc(m,b,y,_,x,w,C,u,p),e=g(w)*y+m,i=v(w)*_+b;break;case c.R:s=e=t[l++],o=i=t[l++];var k=t[l++],S=t[l++];a.fromLine(s,o,s+k,o+S,u,p);break;case c.Z:e=s,i=o;break}n.min(h,h,u),n.max(d,d,p)}return 0===l&&(h[0]=h[1]=d[0]=d[1]=0),new r(h[0],h[1],d[0]-h[0],d[1]-h[1])},rebuildPath:function(t){for(var e,i,s,n,a,r,o=this.data,l=this._ux,h=this._uy,d=this._len,u=0;u<d;){var p=o[u++];switch(1===u&&(s=o[u],n=o[u+1],e=s,i=n),p){case c.M:e=s=o[u++],i=n=o[u++],t.moveTo(s,n);break;case c.L:a=o[u++],r=o[u++],(y(a-s)>l||y(r-n)>h||u===d-1)&&(t.lineTo(a,r),s=a,n=r);break;case c.C:t.bezierCurveTo(o[u++],o[u++],o[u++],o[u++],o[u++],o[u++]),s=o[u-2],n=o[u-1];break;case c.Q:t.quadraticCurveTo(o[u++],o[u++],o[u++],o[u++]),s=o[u-2],n=o[u-1];break;case c.A:var f=o[u++],m=o[u++],b=o[u++],_=o[u++],x=o[u++],w=o[u++],C=o[u++],k=o[u++],S=b>_?b:_,A=b>_?1:b/_,O=b>_?_/b:1,j=Math.abs(b-_)>.001,M=x+w;j?(t.translate(f,m),t.rotate(C),t.scale(A,O),t.arc(0,0,S,x,M,1-k),t.scale(1/A,1/O),t.rotate(-C),t.translate(-f,-m)):t.arc(f,m,S,x,M,1-k),1===u&&(e=g(x)*b+f,i=v(x)*_+m),s=g(M)*b+f,n=v(M)*_+m;break;case c.R:e=s=o[u],i=n=o[u+1],t.rect(o[u++],o[u++],o[u++],o[u++]);break;case c.Z:t.closePath(),s=e,n=i}}}},x.CMD=c;var w=x;t.exports=w},"20cf":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-button",{attrs:{block:"",disabled:t.tailoring},on:{click:t.onClick}},[s("img",{attrs:{src:i("9e07")}}),t._v(" 裁剪图片 ")])},n=[],a=i("5530"),r=i("5880"),o={props:{data:{type:Object,default:()=>({})}},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["cur_tailor_uuid"])),{},{tailoring(){return this.cur_tailor_uuid===this.data.uuid}}),methods:{onClick(){this.$store.commit("editor-v2/set_cur_tailor_uuid",this.data.uuid)}}},l=o,c=(i("23ce"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,"7d1221ba",null);e["default"]=h.exports},2138:function(t,e,i){},2153:function(t,e,i){},2161:function(t,e,i){},2199:function(t,e,i){"use strict";var s=i("7a8f"),n=i.n(s);n.a},"21a3":function(t,e,i){"use strict";var s=i("1653"),n=i.n(s);n.a},2214:function(t,e,i){},"222b":function(t,e,i){t.exports=i.p+"editor-assets/img/design.77f8e90f.svg"},2269:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.data&&t.data.length?i("div",{staticClass:"model-list-wrap"},t._l(t.data,(function(e,s){return i("div",{key:"model-item-"+s,staticClass:"item",on:{click:function(i){return t.$emit("click",e)}}},[i("a-popover",{attrs:{placement:"right","overlay-class-name":"ant-no-padding"}},[i("template",{slot:"content"},[i("div",{staticClass:"model-list-wrap__a-popover-content"},[i("div",{staticClass:"p-20"},[i("div",{staticClass:"title"},[t._v(" "+t._s(e.cate_info.name)+" ")]),parseFloat(e.cate_info.price)>0?i("div",{staticClass:"price-wrap"},[i("span",{staticClass:"price"},[t._v(" ¥"+t._s(e.cate_info.price)+" ")]),t._v(" 起 ")]):t._e()]),e.keywords?[i("a-divider",{staticClass:"my-1"}),i("div",{staticClass:"p-12"},t._l(e.keywords.split(","),(function(e,s){return i("span",{key:"keyword-"+s,staticClass:"keyword"},[t._v(" "+t._s(e)+" ")])})),0)]:t._e()],2)]),i("div",{staticClass:"btn-shenglue-wrap",on:{click:function(t){t.stopPropagation(),t.preventDefault()}}},[i("i",{staticClass:"iconfont icon-shenglve"})])],2),i("div",{staticClass:"item-image",style:{"background-image":"url("+t.$filters.limit(e.image,{width:124})+")"}}),i("div",{staticClass:"item-title"},[t._v(" "+t._s(e.cate_info.name)+" ")])],1)})),0):t._e()},n=[],a={props:{data:{type:Array,default:()=>[]}},data(){return{showPopover:!1}}},r=a,o=(i("ab50"),i("627d"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"f44b5bc0",null);e["default"]=l.exports},"22b0":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACfUlEQVRYR+2XP2gUURDGv9ktPIhXJUZLwUIxImplIaS5pLNSEsFCsHibJYWiEkUtAjZyaHFNdt8UaVTQECs7cxYBBStBUbQR7Pwv4ikkmM0n7/TCXtw7It6tINlmYZmd+e33Zr73VvCPL3H1wzDcnSTJ/jxZfN9/GEXRkzpAEAQfSPbmCSAiH621fXUAYwzdXUQ0DwiSxtVRVWkCcA/yAGh88DpAWoGvAHo8z9scx/G7bi7D2NhY//Ly8lsA31R1Y6MHngIY8H1/KIqiajcBwjAsJUkyB+CZqu5qAFwBcBrAbVU93AogDMPBYrH4qFwu17JiJiYmirVabV8URfOtchhjZgEcAnBVVc/UAVKyuFE8Yq29lU4wMzPjV6tVN6LHReQVyZKqvkzHGGO2iUiV5FYA06VSyYyMjCTpmCAIRkneBPDZ87ztbrlXxq4xGgAoIhXP864nSfIcwA4RmSR5MJXsted5JwuFwl33bGFhYZhkheSWRoyI3CE5CeCFiOwEcJTkiZ92I6G1Nq57T+OFlBktktyQIeEnABcBjAIYbCHxfRG5QfISgL7VMSKyCOCUtXZqBTQDYA/Jc66IiGxyzQLgXqFQKFcqFde9zjmPORAR2UuyR0QeAJiN43haRDg+Pt67tLR0HsABkgMAvgCYF5HL1trHabDfFMjLDVsq8N8DpPeBzCZsp4AxxhlIKasBReQNgGskL6jq9zY+UN95G3X+qAdSo9rOLMuqerarAFkqBUEwRNL5wntV7c8d4Nd4NsmbBfG3PdC2wOrk6wC5K7CWc0RXe2AdoCMKrCVJJ2KyrLilz3eiYNMZQGTOWjvctBl1usha8+XyK9YO5gcYQpkwAOpFegAAAABJRU5ErkJggg=="},"22d1":function(t,e){var i={};i="object"===typeof wx&&"function"===typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"===typeof document&&"undefined"!==typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"===typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:n(navigator.userAgent);var s=i;function n(t){var e={},i={},s=t.match(/Firefox\/([\d.]+)/),n=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),a=t.match(/Edge\/([\d.]+)/),r=/micromessenger/i.test(t);return s&&(i.firefox=!0,i.version=s[1]),n&&(i.ie=!0,i.version=n[1]),a&&(i.edge=!0,i.version=a[1]),r&&(i.weChat=!0),{browser:i,os:e,node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!==typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!i.ie&&!i.edge,pointerEventsSupported:"onpointerdown"in window&&(i.edge||i.ie&&i.version>=11),domSupported:"undefined"!==typeof document}}t.exports=s},2384:function(t,e,i){t.exports=i.p+"editor-assets/img/copy.e811c561.svg"},"238e":function(t,e,i){},"23ab":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"background-wrap",style:{transform:"scale("+(t.is_outside?1:-1)+", 1)"}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[s("defs",[s("pattern",{attrs:{id:"scienceImageNullPattern",patternUnits:"userSpaceOnUse",height:t.science_image_null_wh,width:t.science_image_null_wh}},[s("image",{attrs:{x:"0",y:"0",height:t.science_image_null_wh,width:t.science_image_null_wh,"xlink:href":i("5a38")}})]),s("pattern",{attrs:{id:"backgroundImagePattern",patternUnits:"userSpaceOnUse",height:t.background_image_wh,width:t.background_image_wh}},[t.background_image?s("image",{attrs:{x:"0",y:"0",height:t.background_image_wh,width:t.background_image_wh,"xlink:href":t.$filters.limit(t.background_image,{width:t.background_image_wh})}}):t._e()]),s("pattern",{attrs:{id:"scienceImagePattern",patternUnits:"userSpaceOnUse",height:t.science_image_wh,width:t.science_image_wh}},[s("image",{attrs:{x:"0",y:"0",width:t.science_image_wh,height:t.science_image_wh,"xlink:href":t.$filters.limit(t.project_data.science_image,{width:t.science_image_wh}),preserveAspectRatio:"none"}})])]),s("clipPath",{style:{transform:"scale("+t.$root.constant.DPI+") translate("+-parseInt(t.bleedline)+"px,"+-parseInt(t.bleedline)+"px)"},attrs:{id:"zoomable-canvas-clip-path"}},[s("path",{staticClass:"svg-cutting",attrs:{"stroke-width":t.strokeWidth,stroke:t.stroke,fill:"none",d:t.knife_data.bleedsForSvg}})]),t.knife_data&&t.face_background?s("svg",{attrs:{x:"0",y:"0",width:"1mm",height:"1mm",overflow:"visible",viewBox:"0 0 1 1"}},[s("path",{directives:[{name:"show",rawName:"v-show",value:1==t.project_data.show_bleed_line&&t.project_data.bleedline,expression:"project_data.show_bleed_line == 1 && project_data.bleedline"}],style:{fill:t.build_fill_for_bleed()},attrs:{id:"svg-bleed",transform:"translate("+-parseInt(t.bleedline)+","+-parseInt(t.bleedline)+")","stroke-width":t.strokeWidth,stroke:t.stroke,d:t.knife_data.bleedsForSvg}}),t.knife_data.faces&&t.knife_data.faces.length?s("g",{attrs:{id:"svg-face"}},t._l(t.knife_data.facesForSvg,(function(e,i){return s("path",{key:"path"+i,attrs:{"stroke-width":t.strokeWidth,fill:t.build_fill_for_face(e.name),d:e.d,id:"knifeFace_"+e.name},on:{dblclick:function(i){return t.onToggleFace(e.name)}}})})),0):t._e(),t.knife_data.cuts&&t.knife_data.cuts.length?s("g",{attrs:{id:"svg-cut"}},[s("path",{staticClass:"svg-cutting",attrs:{"stroke-width":t.strokeWidth,stroke:t.stroke,fill:"none",d:t.knife_data.cutsForSvg}})]):t._e(),t.knife_data.folds&&t.knife_data.folds.length?s("g",{attrs:{id:"svg-fold"}},t._l(t.knife_data.folds,(function(e,i){return s("g",{key:i},[e.path?t._e():s("line",{attrs:{"stroke-width":t.strokeWidth,stroke:t.stroke,"stroke-dasharray":t.dashStyle,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}}),e.path?s("path",{attrs:{stroke:t.stroke,"stroke-width":t.strokeWidth,"stroke-dasharray":t.dashStyle,fill:"none",d:e.d}}):t._e()])})),0):t._e(),t.knife_data.holesForSvg&&t.knife_data.holesForSvg.length?s("g",{attrs:{id:"svg-hole"}},t._l(t.knife_data.holesForSvg,(function(e,i){return s("path",{key:"holes"+i,style:{fill:"#ffffff"},attrs:{"stroke-width":t.strokeWidth,stroke:t.stroke,d:e}})})),0):t._e(),t.knife_data.sizeArrowData&&t.knife_data.sizeArrowData.length?s("g",{directives:[{name:"show",rawName:"v-show",value:t.show_axis_remark,expression:"show_axis_remark"}],staticClass:"clickable",attrs:{id:"svg-axias-remark"}},[t._l(t.knife_data.sizeArrowData,(function(e,i){return[s("arrow-pair",{key:"a"+i,attrs:{p1:e.p1,p2:e.p2,"line-name":e.lineName,"line-length":e.lineLength,"current-axias-remark":t.cur_axis_remark},on:{click:function(i){return t.hightlightSelection(e.tpointer.text)}}})]}))],2):t._e()]):t._e()])])},n=[],a=(i("5319"),i("1276"),i("5530")),r=i("5880"),o=i("7a01"),l=i("5e9f");function c(t,e,i){const s=Object(l["b"])(Number.parseInt(t),Number.parseInt(e),Number.parseInt(i));return s.v<=.7?[255,255,255]:[120,120,120]}var h={components:{arrowPair:o["default"]},data(){return{}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["project_data","cur_axis_remark","scale","is_outside","show_axis_remark","cur_face_name","knife_data"])),Object(r["mapGetters"])("editor-v2",["curDesigns","design_data","background","face_background"])),{},{bleedline(){return this.project_data.bleedline},background_image(){const{background:t}=this;return/^url/.test(t)?t.replace(/url\(|\)/g,""):null},background_image_wh(){return parseInt(200/this.$root.constant.DPI)},science_image_null_wh(){return parseInt(15/this.scale)},science_image_wh(){return 128},stroke(){const{background:t}=this,e=this.project_data.def_line_color||this.$root.constant.DEFAULT_LINE_COLOR;if(this.show_axis_remark)return e;if(t&&t.indexOf("url")<=-1){const i=t.replace(/\s+/g,""),s=/rgba\((\d+),(\d+),(\d+),(\d+)\)/,n=s.exec(i);if(n){const t=c(n[1],n[2],n[3]);return`rgba(${t[0]}, ${t[1]},${t[2]}, 0.8)`}return e}return e},strokeWidth(){return.25/this.scale},dashStyle(){return`${.75/this.scale} ${.5/this.scale}`}}),methods:Object(a["a"])(Object(a["a"])({},Object(r["mapMutations"])("editor-v2",["set_cur_face_name"])),{},{hightlightSelection(t){t=t.split("=")[0];const e={L:"length",W:"width",H:"height"};if(e[t]){this.$store.commit("editor-v2/set_cur_axis_remark",e[t]);const i=document.querySelector(`#${e[t]}-remark`);i&&i.focus()}},_try_material_fill(){const{science_image:t,show_material:e}=this.project_data;return t&&(e||this.show_axis_remark)?"url(#scienceImagePattern)":"url(#scienceImageNullPattern)"},_try_from_background_fill(){const{background:t}=this;return t?/^url/.test(t)?"url(#backgroundImagePattern)":t:this._try_material_fill()},_try_from_face_background_fill(t){const e=this.face_background[t];return e&&e.rgba?e.rgba:this._try_from_background_fill()},build_fill_for_bleed(){return this.cur_face_name?this.$root.constant.DEFAULT_BACKGROUND_COLOR:this.show_axis_remark?this._try_material_fill():this._try_from_background_fill()},build_fill_for_face(t){const{cur_face_name:e}=this;return e?t===e?this.show_axis_remark?this._try_material_fill():this._try_from_face_background_fill(t):this.$root.constant.DEFAULT_BACKGROUND_COLOR:this.show_axis_remark?this._try_material_fill():this._try_from_face_background_fill(t)},onToggleFace(t){const{cur_face_name:e}=this;e?e===t&&this.set_cur_face_name(null):this.set_cur_face_name(t)}})},d=h,u=(i("a2cb"),i("2877")),p=Object(u["a"])(d,s,n,!1,null,"76e56d8c",null);e["default"]=p.exports},"23ce":function(t,e,i){"use strict";var s=i("f45c"),n=i.n(s);n.a},"23ee":function(t,e,i){},"241e":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UPCE=e.UPC=e.EAN2=e.EAN5=e.EAN8=e.EAN13=void 0;var s=i("89a2"),n=m(s),a=i("1ba5"),r=m(a),o=i("583f"),l=m(o),c=i("a5d2"),h=m(c),d=i("e8b2"),u=m(d),p=i("be98"),f=m(p);function m(t){return t&&t.__esModule?t:{default:t}}e.EAN13=n.default,e.EAN8=r.default,e.EAN5=l.default,e.EAN2=h.default,e.UPC=u.default,e.UPCE=f.default},"247f":function(t,e,i){},"248f":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"const-right top-btn flex flex-center item-center ml-auto"},[s("Service",{attrs:{"custom-style":{left:"",right:"15px"}}},[s("div",{ref:"riskRef",staticClass:"fo-default fo-14 text-center",staticStyle:{width:"98px"}},[s("img",{attrs:{src:i("8cbd"),alt:""}}),s("span",[t._v("客服")])])])],1)},n=[],a=i("5530"),r=i("5880"),o=i("3357"),l=i("0d67"),c={mixins:[o["a"]],components:{Service:l["a"]},data(){return{tipVisible:!0,count:0,indexex:0,transition:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("config",["helpers"])),{},{helper(){return this.helpers[this.indexex]}}),mounted(){this.fetchHelpers(),this.initHelpCount()},methods:Object(a["a"])(Object(a["a"])({},Object(r["mapActions"])("config",["fetchHelpers"])),{},{doNotShowItAnyMore(){this.hideTipsFor("headerTip"),this.tipVisible=!1},handleIndexex(){this.indexex++,this.indexex===this.helpers.length&&(this.indexex=0),this.initHelpCount()},initHelpCount(){this.showTipsFor("headerTip")||(this.tipVisible=!1),this.timeout&&(clearInterval(this.timeout),this.transition=!1,this.count=0),this.timeout=setInterval(()=>{this.transition=!0,this.$nextTick(()=>{100===this.count?(this.tipVisible=!1,clearInterval(this.timeout),this.transition=!1,this.timeout=null):this.count+=10})},2e3)}})},h=c,d=(i("d1fb"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,"582797ac",null);e["default"]=u.exports},"251b":function(t,e,i){"use strict";var s=i("00be"),n=i.n(s);n.a},2539:function(t,e,i){"use strict";var s=i("8be1"),n=i.n(s);n.a},"25a7":function(t,e,i){},2614:function(t,e,i){},"262c":function(t,e,i){t.exports=i.p+"editor-assets/img/dr.825ac52d.svg"},"262e":function(t,e,i){"use strict";i.r(e);i("5319");e["default"]={name:"AddressDisplay",props:{address:{type:Object,required:!0}},render(){const t=arguments[0];return t("div",{class:"AddressDisplay"},[t("div",{class:"mt-16"},[t("span",["寄送至：",this.address.province," ",this.address.city,this.address.district," ",this.address.detail]),t("span",{style:"width: 1px; height: 15px; margin: 0 16px; display:inline-block; opacity: 0.9; border: 1px solid rgba(0,0,0,0.15); background:rgba(0,0,0,0.15); vertical-align: middle;"}),t("span",["收货人：",this.address.contacts," ",this.address.telNumber.replace(/(\d{3})(\d{4})(\d{4})/,(function(t,e,i,s){return`${e}****${s}`}))])])])}}},"262e8":function(t,e,i){const s=i("3e15"),{log:n}=i("908e"),a=async(t,e)=>{n("info","fetch "+t);const i=await(await fetch(t)).arrayBuffer();n("info",`${t} file size = ${i.byteLength} bytes`);const s=new Blob([i],{type:e}),a=URL.createObjectURL(s);return n("info",`${t} blob URL = ${a}`),a};t.exports=async({corePath:t})=>{if("string"!==typeof t)throw Error("corePath should be a string!");const e=s(t),i=await a(e,"application/javascript"),r=await a(e.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),o=await a(e.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return"undefined"===typeof createFFmpegCore?new Promise(t=>{const e=document.createElement("script"),s=()=>{e.removeEventListener("load",s),n("info","ffmpeg-core.js script loaded"),t({createFFmpegCore:createFFmpegCore,corePath:i,wasmPath:r,workerPath:o})};e.src=i,e.type="text/javascript",e.addEventListener("load",s),document.getElementsByTagName("head")[0].appendChild(e)}):(n("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore:createFFmpegCore,corePath:i,wasmPath:r,workerPath:o}))}},"267c":function(t,e,i){"use strict";i.r(e);i("b680");var s=i("8bbf"),n=i.n(s),a=i("750b"),r=(i("365c"),i("25a7"),i("c64e")),o=i.n(r),l=i("0e9a"),c=i("054f");const h=i("2b3c");e["default"]=Object(a["b"])({props:{limitImgSize:{type:Number},limitCount:{type:Number},nowCount:{type:Number,default:0}},setup(t,e){Object(a["f"])(()=>{s.value=e.refs.aUploadRef||null,n.a.nextTick(()=>{s.value=e.refs.aUploadRef||null})}),Object(a["h"])(()=>{s.value=e.refs.aUploadRef||null,n.a.nextTick(()=>{s.value=e.refs.aUploadRef||null})});const i=Object(a["j"])([]),s=Object(a["j"])(null),r=Object(a["a"])(()=>!!i.value.length),d=e.vuex.mapState("profile",["accessToken"]);return Object(a["k"])(()=>r.value,()=>{r.value||e.emit("refresh")},{lazy:!0}),()=>Object(a["c"])("a-upload",{ref:"aUploadRef",attrs:{showUploadList:!1,name:"file",accept:".svg,.png,.jpg,.jpeg",multiple:!0,data:{type:"image"},headers:{Authentication:d.accessToken.value},beforeUpload:async n=>{if(t.nowCount>=t.limitCount)return e.root.$message.error("您的上传数量已达上限"),Promise.reject(!1);if("image/svg+xml"===n.type&&n.size>=512e3)return e.root.$message.error("SVG格式的图片不得大于500KB"),Promise.reject(!1);if(n.size>=t.limitImgSize)return e.root.$message.error(`此图片不得大于${(t.limitImgSize/1024/1024).toFixed(0)}MB`),Promise.reject(!1);if(Object(l["c"])(n)){let t=await Object(l["e"])(n);if(t=Object(l["f"])(t),!Object(l["d"])(t))return e.root.$confirm({title:"SVG中含有image等不合法标签，是否继续？",zIndex:4001,okText:"继续",onOk(){i.value.push(!0);const t=s.value,{customRequest:e}=t.$options.propsData;e({file:n})},onCancel(){},class:"test"}),Promise.reject(!1)}return i.value.push(!0),!0},customRequest:async t=>{const s=t.file.name.substring(t.file.name.lastIndexOf(".")+1,t.file.name.length),n="user-materials",a=o()()+"."+s,r=await c["a"].putFile(t.file,{xapi:n,rename:a,type:"image"});i.value.shift(),200!==r.code&&(e.root.$message.error(r.errmsg),c["a"].removeStorage())}},on:{change:async t=>{"done"==t.file.status&&(i.value.shift(),0===t.file.response.errno||e.root.$message.error(t.file.response.errmsg))}}},[Object(a["c"])("div",{class:"upload-button"},[r.value?Object(a["c"])("a-icon",{attrs:{type:"loading",color:"#fff"}}):Object(a["c"])("img",{attrs:{src:h}}),Object(a["c"])("span",{class:"ml-8"},["上传图片"])])])}})},2699:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"w100p xxx",staticStyle:{width:"100%"}},[i("a-dropdown",{staticStyle:{width:"100%"}},[i("div",{staticClass:"ant-select ant-select-enabled science-input mt-16",attrs:{tabindex:"0"}},[i("div",{staticClass:"ant-select-selection ant-select-selection--single"},[i("div",{staticClass:"ant-select-selection__rendered"},[i("div",{staticClass:"ant-select-selection-selected-value",staticStyle:{display:"block",opacity:"1"}},[t.currentMaterial?i("span",[i("img",{staticClass:"box",attrs:{src:t.currentMaterial.image}}),t._v(" "+t._s(t.currentMaterial.value)+" ")]):t.customizeMaterial?i("span",[i("img",{staticClass:"box",attrs:{src:t.customizeMaterial.image}}),t._v(" "+t._s(t.customizeMaterial.value)+" ")]):t._e()])])])]),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t._l(t.groups,(function(e){return i("a-sub-menu",{key:e.name,attrs:{title:e.name}},t._l(t.menuData[e.name],(function(e){return i("a-menu-item",{key:e.key,staticStyle:{width:"165px"},attrs:{disabled:e.disabled},on:{click:function(i){return t.chooseMaterial(e)}}},[e.image?i("img",{staticClass:"box",attrs:{src:e.image,alt:""}}):t._e(),t._v(" "+t._s(e.value)+" ")])})),1)})),t.customizeMaterial?i("a-menu-item",{on:{click:function(e){return t.chooseMaterial(t.customizeMaterial)}}},[t._v(" "+t._s(t.customizeMaterial.value)+" ")]):t._e()],2)],1)],1)},n=[],a=(i("ddb0"),{props:{materials:{type:Array,default:()=>[]},currentMaterialId:{type:Number,default:null}},watch:{materials(){const t={};for(const e of this.materials)t[e.group_name]?t[e.group_name].push(e):t[e.group_name]=[e];this.menuData=t,this.currentMaterial=this.materials.find(t=>t.key===this.currentMaterialId),this.customizeMaterial=this.materials.find(t=>"自定义"===t.group_name)},currentMaterialId(){this.currentMaterial=this.materials.find(t=>t.key===this.currentMaterialId),this.currentMaterialId||this.chooseMaterial(this.customizeMaterial)}},data(){return{menuData:{},currentMaterial:null,customizeMaterial:null,groups:[{name:"卡纸",color:"#d2d4d9"},{name:"铜版纸",color:"#d2d4d9"},{name:"瓦楞纸",image:i("ec5b")}]}},methods:{chooseMaterial(t){this.$emit("chooseMaterial",t)}}}),r=a,o=(i("7893"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"25bdbbe1",null);e["default"]=l.exports},"269d":function(t,e,i){"use strict";var s=i("57ab"),n=i.n(s);n.a},"26a1":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"d",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return o})),i.d(e,"e",(function(){return l})),i.d(e,"f",(function(){return c}));var s=i("365c");function n(t,e,i){const s=(null===i||void 0===i?void 0:i.getBoundingClientRect())||{right:0};return t.clientX>s.right||a(t,e)}function a(t,e){return Math.abs(e.clientX-t.clientX)<10&&Math.abs(e.clientY-t.clientY)<10}function r(t,e,i,s,n,a,r){return t%=360,0===t?[e,i]:90===t?[i+n/2-s/2,r-e-s/2-n/2]:180===t?[a-e-s,r-i-n]:270===t?[a-i-n/2-s/2,e+s/2-n/2]:void 0}function o(t,e,i){let s=!1;return t.style.width<=0&&(s=!0,t.style.width=3),t.style.height<=0&&(s=!0,t.style.height=3),t.style.left>=e&&(t.style.left=e-t.style.width,s=!0),t.style.left<=-t.style.width&&(t.style.left=0,s=!0),t.style.top>=i&&(t.style.top=i-t.style.height,s=!0),t.style.top<=-t.style.height&&(t.style.top=0,s=!0),s}function l({clientX:t,clientY:e},{x:i,y:s,width:n,height:a}){return t>=i&&t<=i+n&&e>=s&&e<=s+a}function c(t,e,i){const n=document.querySelector("#svgContainer");if(!n)return{x:0,y:0};const a=n.getBoundingClientRect(),r=(t-a.x)/s["DPI"]/i-50,o=(e-a.y)/s["DPI"]/i-50;return{x:r,y:o}}},"26e0":function(t,e,i){"use strict";var s=i("59d7"),n=i.n(s);n.a},2790:function(t,e,i){},"27bd":function(t,e,i){},"27c9":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"editor-bg"},[t._m(0),s("div",{staticClass:"mt-12 flex flex-start item-center"},[s("Pallet",{ref:"pallet",attrs:{cmyk:t.cmyk,historyColors:t.$root.projectData.colorHistory},on:{confirm:function(e){return t.palletChangeColor(e.rgba,e.cmyk)}},model:{value:t.formData.color,callback:function(e){t.$set(t.formData,"color",e)},expression:"formData.color"}}),s("div",{staticClass:"ml-8 bg-trash flex flex-center item-center",on:{click:t.clearColor}},[s("img",{attrs:{src:i("e0c1")}})])],1),s("div",{staticClass:"gray-line"}),s("div",{staticClass:"flex flex-wrap flex-between"},t._l(t.colorList,(function(e,i){return s("div",{key:i,staticClass:"color-item mt-12",style:{backgroundColor:e},on:{click:function(i){return t.palletChangeColor(e)}}})})),0),t.bgImages.length?s("div",{staticClass:"title-wrap"},[s("div",{staticClass:"fo-14 fo-default bold"},[t._v("背景纹理")])]):t._e(),t.bgImages.length?s("div",{staticClass:"texture-image-wrap"},t._l(t.bgImages,(function(e,i){return s("img",{staticClass:"texture-image",attrs:{src:t.getUrlWithSuffix(e)},on:{key:i,click:function(i){t.palletChangeColor("url("+t.getUrlWithSuffix(e)+")")}}})})),0):t._e()])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex flex-between item-center pt-"},[i("div",{staticClass:"flex flex-start item-center"},[i("div",{staticClass:"fo-14 fo-default bold"},[t._v("背景颜色")])])])}],a=i("5530"),r=i("7018"),o=i("5880"),l=i("98bd9"),c=i("365c"),h={components:{Pallet:r["a"]},props:{load:{type:Boolean,default:!1}},data(){return{formData:{color:"",membrane_id:"-1",colorFilter:void 0},grainContent:window.innerHeight-163-8-52,colorList:["rgba(0,0,0,1)","rgba(68,68,68,1)","rgba(102,102,102,1)","rgba(168,168,168,1)","rgba(217,217,217,1)","rgba(243,243,243,1)","rgba(255,0,0,1)","rgba(255,91,92,1)","rgba(255,102,51,1)","rgba(255,153,0,1)","rgba(255,204,51,1)","rgba(254,249,81,1)"],query:{currentPage:1,pageSize:10,file_type:"imgbg",keyword:""},project:{},queryCount:0,loading:!1,imgData:[],nextLoading:!1,membrane:[],sideValue:"background",bgImages:[]}},watch:{load(t){t&&(this.init(),setTimeout(()=>{this.formData.colorFilter=Object(l["a"])({hex:this.formData.color,source:"hex"})},2e3))},"$root.projectData.background"(){this.init()},"$root.projectData.inside_background"(){this.init()},isInside(t){this.sideValue=0===t?"background":"inside_background",this.init()}},computed:Object(a["a"])(Object(a["a"])({},Object(o["mapState"])(["isInside"])),{},{cmyk(){}}),mounted(){this.resize(),this.ajaxData()},methods:{async ajaxData(){let t=await Object(c["getImageBg"])();this.bgImages=t.data},getUrlWithSuffix(t){let{file_path:e}=t;return/\.svg$/.test(e)?e:t.file_path+"?imageView2/0/w/200/h/200/q/70|imageslim"},resize(){window.addEventListener("resize",this._handeResize)},_handeResize(){this.grainContent=window.innerHeight-163-8-52},async init(){this.formData.color=this.$root.projectData[this.sideValue]},handleColorHistory(t){},clearColor(){this.formData.color="",0===this.isInside?(this.$root.projectData.background="",this.$root.projectData.background_filter="{}",this.updateProject({background:this.$root.projectData.background,background_filter:this.$root.projectData.background_filter})):(this.$root.projectData.inside_background="",this.$root.projectData.inside_background_filter="{}",this.updateProject({inside_background:this.$root.projectData.inside_background,inside_background_filter:this.$root.projectData.inside_background_filter}))},palletChangeColor(t,e){this.formData.color=t,0===this.isInside?(e&&(this.$root.projectData.background_cmyk=e),this.$root.projectData.background=t,this.updateProject({background:this.$root.projectData.background,background_filter:this.$root.projectData.background_filter})):(e&&(this.$root.projectData.inside_background_cmyk=e),this.$root.projectData.inside_background=t,this.$root.projectData.inside_background_filter=JSON.stringify(t),this.updateProject({inside_background:this.$root.projectData.inside_background,inside_background_filter:this.$root.projectData.inside_background_filter}))},updateProject(t){this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside)},membraneChange(t){this.$root.projectData.membrane_id=t;for(let e in this.membrane)this.membrane[e].id==t&&(this.$root.projectData.membrane_name=this.membrane[e].science_name);this.updateProject({membrane_id:this.$root.projectData.membrane_id}),this.$store.dispatch("saveReloadMode",!0)},changeBack(t){this.formData.color="",this.$root.projectData.background=`url(${t})`},listenGrain(){let t=document.getElementById("grainContent");t.onscroll=t=>{t.target.clientHeight+t.target.scrollTop==t.target.scrollHeight&&(this.query.currentPage+=1,this.queryCount>this.imgData.length&&this.getImgList())}},async getImgList(){1===this.query.currentPage?this.loading=!0:this.nextLoading=!0;let t=await this.$api.material.list(this.query);t&&(1===this.query.currentPage?this.imgData=t.data.data:this.imgData=this.imgData.concat(t.data.data),this.queryCount=t.data.count),1===this.query.currentPage?this.loading=!1:this.nextLoading=!1}},beforeDestroy(){window.removeEventListener("resize",this._handeResize)}},d=h,u=(i("38a8"),i("fca0"),i("2877")),p=Object(u["a"])(d,s,n,!1,null,"edd4765a",null);e["default"]=p.exports},"27d8":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"fontRef",staticClass:"editor-font"},[i("div",{staticClass:"font-title mt-8 h1-title"},[i("span",{staticClass:"fo-h1",attrs:{id:"fontItem-small"},on:{mousedown:function(e){return e.stopPropagation(),t.fontMove(e,"small","双击修改文字")}}},[t._v("点击添加标题")])]),i("div",{staticClass:"font-title mt-8 h3-title"},[i("span",{staticClass:"fo-h2",attrs:{id:"fontItem-medium"},on:{mousedown:function(e){return e.stopPropagation(),t.fontMove(e,"medium","双击修改文字")}}},[t._v("点击添加副标题")])]),i("div",{staticClass:"font-title mt-8 p"},[i("span",{staticClass:"fo-h3",attrs:{id:"fontItem-big"},on:{mousedown:function(e){return e.stopPropagation(),t.fontMove(e,"big","双击修改文字")}}},[t._v("点击添加正文")])])])},n=[],a=(i("ddb0"),i("5530")),r=i("5880"),o=i("ed08"),l=i("365c"),c=i("c64e"),h=i.n(c),d=i("26a1"),u=i("1645"),p={props:{load:{type:Boolean,default:!1}},computed:Object(a["a"])({},Object(r["mapState"])(["scale"])),data(){return{query:{currentPage:1,pageSize:12,file_type:"font",keyword:""},height:window.innerHeight-56-52-16,queryCount:0,imgData:[],loading:!1,nextLoading:!1,onload:!1,title:[{example:"点击添加大标题",file_path:"",thumb_path:""},{example:"点击添加小标题",file_path:"",thumb_path:""},{example:"点击添加正文",file_path:"",thumb_path:""}],rotate:0}},watch:{load(t){t&&(this.onload=!0)},onload(t){t&&this.init()}},async mounted(){this.resize()},methods:{resize(){window.addEventListener("resize",this._handeResize)},_handeResize(){this.height=window.innerHeight-56-52-16},titleClick(t,e,i,s){let n=20,a="normal";const r=this.scale/.3;switch(t){case"small":n=Object(o["H"])(42).pt2mm(),a="bold";break;case"medium":a="bold",n=Object(o["H"])(35).pt2mm();break;default:n=Object(o["H"])(30).pt2mm();break}n/=r;e.length;const c=1.2*n,d={uuid:h()(),type:"font",src:l["SIYUAN_FONT"],value:e,example:"思源黑体-常规",id:l["SIYUAN_FONT_ID"],style:{position:"absolute",lineHeight:c,fontSize:n,width:n*e.length+10,height:c,textAlign:"center",fontFamily:l["SIYUAN_FONT_FAMILY"],rotate:360-this.$root.projectData.rotate||0,color:"rgba(0,0,0,1)",fontWeight:a,vertical:0,fontStyle:"normal"}};i&&(d.style.left=i/l["DPI"],d.style.top=s/l["DPI"]),u["a"].injectFontFamilies([{fontFamily:d.style.fontFamily,src:d.src}],"ownFontStyle"),this.$store.dispatch("editor/setEditorTempMaterial",d),this.$store.commit("increaseCanvasVersion",!0),this.$store.commit("increaseCanvasVersion",!1)},fontMove(t,e,i){if(0!==t.button)return!1;const s=document.getElementById("fontItem-"+e);if(!s)return;const n=s.getBoundingClientRect(),a=t.clientX,r=t.clientY;n.width;s.style.position="fixed",s.style.textAlign="center",s.style.left=n.x+"px",s.style.top=n.y+"px",s.style.zIndex=1e4;const o=window.getComputedStyle(s,null).getPropertyValue("line-height");s.style.lineHeight=o,document.onmousemove=t=>{const e=t.clientX-a,i=t.clientY-r;return s.style.left=n.x+e+"px",s.style.top=n.y+i+"px",!1},document.onmouseup=a=>{if(!Object(d["b"])(a,t,this.$refs.fontRef))return s.style.position="static",s.style.zIndex="auto",document.onmousemove=null,void(document.onmouseup=null);const r=s.getBoundingClientRect(),o=document.getElementByI("svgContainer");if(!o)return;const c=o.getBoundingClientRect();let h=(r.x-c.x)/this.scale-50*l["DPI"],u=(r.y-c.y)/this.scale-50*l["DPI"];const p=r.width/this.scale,f=r.height/this.scale;[h,u]=Object(d["c"])(this.$root.projectData.rotate,h,u,p,f,this.$root.knifeData.totalX*l["DPI"],this.$root.knifeData.totalY*l["DPI"]),Object(d["d"])(t,a)&&(h=null,u=null),this.titleClick(e,i,h,u),s.style.position="static",s.style.zIndex="auto",s.style.left=n.x+"px",s.style.top=n.y+"px",document.onmousemove=null,document.onmouseup=null}},async init(){this.listenGrain(),await this.getImgList()},listenGrain(){const t=document.getElementById("fontContent");t&&(t.onscroll=t=>{t.target.clientHeight+t.target.scrollTop==t.target.scrollHeight&&(this.query.currentPage+=1,this.queryCount>this.imgData.length&&this.getImgList())})},searchInput(t){this.query.keyword=t.target.value,this.query.currentPage=1},async getImgList(){1===this.query.currentPage?this.loading=!0:this.nextLoading=!0;const t=await this.$api.material.list(this.query),e=document.getElementById("thumbFontStyle");for(const i in t.data.data){let s=-1;if(e.sheet.rules.length>0)for(const n in e.sheet.rules)e.sheet.rules[n].cssText&&e.sheet.rules[n].cssText.indexOf(t.data.data[i].thumb_path)>-1&&(s=n);if(t.data.data[i].style="bxh-fm-"+t.data.data[i].id,-1===s){const s=`@font-face{font-family:"bxh-fm-${t.data.data[i].id}"; src:url("${t.data.data[i].thumb_path}")}`;e.appendChild(document.createTextNode(s))}}this.$forceUpdate(),t&&(1===this.query.currentPage?this.imgData=t.data.data:this.imgData=this.imgData.concat(t.data.data),this.queryCount=t.data.count),1===this.query.currentPage?this.loading=!1:this.nextLoading=!1}},beforeDestroy(){window.removeEventListener("resize",this._handeResize)}},f=p,m=(i("1b75"),i("2877")),g=Object(m["a"])(f,s,n,!1,null,null,null);e["default"]=g.exports},"27dd":function(t,e,i){},"27f7":function(t,e,i){"use strict";var s=i("a974"),n=i.n(s);n.a},"28b3":function(t,e,i){},"28f2":function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("5a0c"),a=i.n(n);i("5d3b");e["default"]=Object(s["b"])({props:{visible:{type:Boolean,default:!1},target:{type:[Object,Object],default:()=>({})}},setup(t,e){return()=>{var i,n;return Object(s["c"])("a-modal",{attrs:{wrapClassName:"accredit-wrapper",visible:t.visible,footer:null,width:960},on:{cancel:()=>{e.emit("close")}}},[Object(s["c"])("div",{class:"flex"},[Object(s["c"])("div",{class:"material flex flex-center item-center"},[Object(s["c"])("img",{attrs:{src:null===(i=t.target.material)||void 0===i?void 0:i.url,alt:""}})]),Object(s["c"])("div",{class:"description p-40"},[Object(s["c"])("div",{class:"name"},[null===(n=t.target.material)||void 0===n?void 0:n.name]),Object(s["c"])("a-button",{attrs:{size:"large"},class:"accredit-btn mt-30",on:{click:()=>{e.emit("submit")}}},["填写授权书"]),Object(s["c"])("div",{class:"pt-24 mt-40 content-list"},[Object(s["c"])("div",{class:"content flex flex-between item-center"},[Object(s["c"])("span",{class:"key"},["授权类型："]),Object(s["c"])("span",{class:"value ml-40"},["标准授权"])]),Object(s["c"])("div",{class:"content flex flex-between item-center"},[Object(s["c"])("span",{class:"key"},["状态："]),Object(s["c"])("span",{class:"value ml-40"},[t.target.overdue?"已过期":"正在使用中"])]),Object(s["c"])("div",{class:"content flex flex-between item-center"},[Object(s["c"])("span",{class:"key"},["购买时间："]),Object(s["c"])("span",{class:"value ml-40"},[a()(parseInt(t.target.create_time)).format("YYYY/MM/DD HH:mm:ss")])]),Object(s["c"])("div",{class:"content flex flex-between item-center"},[Object(s["c"])("span",{class:"key"},["到期时间："]),Object(s["c"])("span",{class:"value ml-40"},[t.target.deadline_time?a()(parseInt(t.target.deadline_time)).format("YYYY/MM/DD HH:mm:ss"):"永久"])]),Object(s["c"])("div",{class:"content flex flex-between item-center"},[Object(s["c"])("span",{class:"key"},["购买途径："]),Object(s["c"])("span",{class:"value ml-40"},["asdasd"])]),Object(s["c"])("div",{class:"content flex flex-between item-center"},[Object(s["c"])("span",{class:"key"},["订单号："]),Object(s["c"])("span",{class:"value ml-40"},[t.target.order_no])]),Object(s["c"])("div",{class:"content flex flex-between item-center"},[Object(s["c"])("span",{class:"key"},["素材ID："]),Object(s["c"])("span",{class:"value ml-40"},[t.target.material_id])]),Object(s["c"])("div",{class:"content flex flex-between item-center"},[Object(s["c"])("span",{class:"key"},["格式："]),Object(s["c"])("span",{class:"value ml-40"},[t.target.type])])])])])])}}})},"28f4":function(t,e,i){},"294f":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:{"svgs-group":!0,"svgs-group--active":t.active,"svgs-group--child-selected":t.isGroupEditing},style:{width:t.width+"mm",height:t.height+"mm",outlineWidth:1.5/t.scale+"px"},attrs:{"data-index":t.index,id:"group-"+t.group.uuid},on:{mousedown:t.handleMousedown,contextmenu:function(e){return e.stopPropagation(),e.preventDefault(),t.handleContextMenu(e)}}},[t._t("default"),t.active&&!t.isGroupEditing?i("forever-group-control",t._b({ref:"designControlRef",attrs:{designs:t.designs,data:t.group,"project-data-rotate":t.$root.projectData.rotate,locked:t.group.locked},on:{move:t.handleMove,scale:t.handleScale,rotate:t.handleRotate,"end-rotate":t.handleEndRotate,locked:t.handleLocked}},"forever-group-control",t.group.style,!1)):t._e()],2)},n=[],a=(i("ddb0"),i("5530")),r=i("5880"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.designs.length>1?i("div",{on:{contextmenu:function(e){return e.preventDefault(),e.stopPropagation(),t.handleContextMenu(e)}}},[t.withGroup?t._e():i("div",t._l(t.designs,(function(e){return i("div",{key:e.uuid},[i("div",{staticClass:"box",style:{position:"absolute",width:e.style.width+"mm",height:e.style.height+"mm",left:e.style.left+"mm",top:e.style.top+"mm",outlineWidth:1.2/t.scale+"px",transform:t.transformRotate(e)},attrs:{id:"bxhGragmul"+e.uuid}})])})),0),i("div",{ref:"controlRef",staticClass:"control avoid-clicks",style:{left:"0mm",top:"0mm",width:t.width+"mm",height:t.height+"mm",transform:"rotate(0deg)"},attrs:{"data-name":"design-control/control"}},[i("div",{class:{"avoid-clicks":!0,"move-rect":!0,"move-rect--withgroup":t.withGroup},style:"outline-width: "+.25/t.scale+"mm; display: none;",on:{mousedown:t.doMove}}),i("control-point",{style:{left:0,top:0,cursor:t.calculateCursor("nw")},attrs:{scale:t.scale,type:"circle",position:{left:"-50%",top:"-50%"}},on:{resize:function(e){return t.doScale(e,"nw")}}}),i("control-point",{directives:[{name:"show",rawName:"v-show",value:t.showControlPoint,expression:"showControlPoint"}],style:{right:0,top:0,cursor:t.calculateCursor("ne")},attrs:{scale:t.scale,type:"circle",position:{right:"-50%",top:"-50%"}},on:{resize:function(e){return t.doScale(e,"ne")}}}),i("control-point",{directives:[{name:"show",rawName:"v-show",value:t.showControlPoint,expression:"showControlPoint"}],style:{left:0,bottom:0,cursor:t.calculateCursor("sw")},attrs:{scale:t.scale,type:"circle",position:{left:"-50%",bottom:"-50%"}},on:{resize:function(e){return t.doScale(e,"sw")}}}),i("control-point",{directives:[{name:"show",rawName:"v-show",value:t.showControlPoint,expression:"showControlPoint"}],style:{right:0,bottom:0,cursor:t.calculateCursor("se")},attrs:{scale:t.scale,type:"circle",position:{right:"-50%",bottom:"-50%"}},on:{resize:function(e){return t.doScale(e,"se")}}}),t.withGroup?i("div",{style:t.rotateStyle,on:{mousedown:function(e){return e.stopPropagation(),t.doRotate(e)}}}):t._e()],1)]):t._e()},l=[],c=i("ce94"),h=(i("df11"),i("575b"),i("2af2"),i("2b1a")),d=(i("fe94"),i("60bb")),u=i.n(d),p=i("da71"),f=(i("d323"),i("650f"),i("b439")),m={name:"DesignControl",components:{ControlPoint:c["a"]},props:{data:{type:Object,required:!0},designs:{type:Array,default:()=>[]},projectDataRotate:{type:Number,required:!0},locked:{type:Boolean,default:!1},top:{type:Number,required:!0},left:{type:Number,required:!0},width:{type:Number,required:!0},height:{type:Number,required:!0},rotate:{type:Number,required:!0}},data(){return{x:0,y:0,rotateValue:0,cursors:["n","ne","e","se","s","sw","w","nw"],offsets:[]}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor",["showPositionTip","targetGroup","currentFace","adsorbInstance"])),Object(r["mapState"])(["scale","isInside","spaceKeyDown"])),Object(r["mapGetters"])("editor",["withGroup","uuid2Design","designData"])),{},{globalRotate(){return this.$root.projectData.rotate},showControlPoint(){return this.width*this.scale>3&&this.height*this.scale>3},designCenter(){const{left:t,top:e,width:i,height:s}=this;return{x:t+i/2,y:e+s/2}},rotateStyle(){const t={position:"absolute",cursor:"grab",height:18/this.scale+"px",width:18/this.scale+"px",backgroundImage:`url(${i("3167")})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",pointerEvents:"auto"},e=-30/this.scale+"px";return 0===this.globalRotate?(t.top=e,t.left="50%",t.transform="translate(-50%, -50%)"):90===this.globalRotate?(t.left=e,t.top="50%",t.transform="translate(-50%, -50%)"):180===this.globalRotate?(t.bottom=e,t.left="50%",t.transform="translate(-50%, 50%)"):(t.right=e,t.bottom="50%",t.transform="translate(50%, 50%)"),t}}),methods:Object(a["a"])(Object(a["a"])({},Object(r["mapMutations"])("editor",["setHighLines","clearHighLines"])),{},{emitBeginMove(){this.$emit("begin-move")},emitEndMove(){this.$emit("end-move")},emitMove(t){this.$emit("move",t)},emitBeginScale(){this.$emit("begin-scale")},emitScale(t,e){this.$emit("scale",t,e)},emitEndScale(){this.$emit("end-scale")},emitBeginRotate(){this.$emit("begin-rotate")},emitRotate(t){this.$emit("rotate",t)},emitEndRotate(){this.$emit("end-rotate")},emitLocked(){this.$emit("locked")},emitResize(){this.$emit("resize")},doMove(t){this.spaceKeyDown||(t.stopPropagation(),this.locked?this.emitLocked():0===t.button&&(this.emitBeginMove(),this.$store.commit("editor/setShowPositionTip",!0),this.adsorbInstance.set({scale:this.scale,isInside:this.isInside,rotate:this.$root.projectData.rotate,envDesigns:this.designData.filter(t=>!this.designs.find(e=>e.uuid===t.uuid)).filter(t=>t.uuid!==this.data.uuid),movingDesigns:[this.data],guideLines:this.$root.projectData.lineGuides}),document.onmousemove=this.moveThrottle(t.clientX,t.clientY),document.onmouseup=t=>{this.clearHighLines(),this.emitEndMove(),this.spaceKeyDown||(document.body.style.cursor="default"),this.saveData(),this.$store.commit("editor/setShowPositionTip",!1),document.onmousemove=null,document.onmouseup=null}))},moveThrottle(t,e){return u.a.throttle(i=>{const s=this.adsorbInstance.calc(i.clientX-t,i.clientY-e);return this.data.style.left=s.x,this.data.style.top=s.y,s.highlines&&s.highlines.length?this.setHighLines(s.highlines):this.clearHighLines(),!1},5)},doScale(t,e){if(this.locked)return void this.emitLocked();this.emitBeginScale(),this.$store.commit("editor/setShowSizeTip",!0);this.x,this.y,this.width,this.height;const i=document.getElementById("svgContainer").getBoundingClientRect();if(!i)return;const s={left:this.left,top:this.top,width:this.width,height:this.height,rotate:this.rotate},[n,a]=Object(f["f"])({style:s},e),r=(n.x,a.x,n.y,a.y,Object(f["g"])(n,a));document.onmousemove=i=>{this.x,this.y;const o=this.width,l=this.height;let c=(i.clientX-t.clientX)/this.scale/p["DPI"],h=(i.clientY-t.clientY)/this.scale/p["DPI"],d=parseInt(this.globalRotate/90)%4;d<0&&(d+=4),1==d?[c,h]=[h,-c]:2==d?[c,h]=[-c,-h]:3==d&&([c,h]=[-h,c]);const u={x:(c*r.x+h*r.y)*r.x,y:(c*r.x+h*r.y)*r.y},m={x:n.x+u.x,y:n.y+u.y};this.$store.commit("editor/setMousePosition",{x:m.x*p["DPI"],y:m.y*p["DPI"]});const g=Object(f["e"])({style:s},e,[m,a]);if(o<10&&g.width<o)return;if(l<10&&g.height<l)return;const v=g.width/o;this.emitScale(v,a)},document.onmouseup=t=>{this.emitEndScale(),this.$store.commit("editor/setShowSizeTip",!1),document.onmousemove=null,document.onmouseup=null}},doRotate(t){if(this.locked)return void this.emitLocked();const e=document.getElementById("svgContainer").getBoundingClientRect();this.emitBeginRotate(),document.onmousemove=t=>{const i=(t.clientX-e.x)/this.scale-50*p["DPI"],s=(t.clientY-e.y)/this.scale-50*p["DPI"],n=Object(h["a"])({lx:i-this.designCenter.x*p["DPI"],ly:s-this.designCenter.y*p["DPI"]});return this.rotateValue=Object(h["d"])(n),this.emitRotate(this.rotateValue%360),!1},document.onmouseup=t=>{this.emitEndRotate(),document.onmousemove=null,document.onmouseup=null}},handleContextMenu(){},calculateCursor(t){let e=this.rotate+22;e+=this.globalRotate;const i=parseInt(e/45);let s=i+this.cursors.indexOf(t);s%=this.cursors.length,s<0&&(s+=this.cursors.length);const n=this.cursors[s]+"-resize";return n},calculateAngle(t){const e=t.offsetX-this.designCenter.x*p["DPI"],i=t.offsetY-this.designCenter.y*p["DPI"],s=Math.atan2(i,e)/Math.PI*180;return s+90},roundAngle(t){const e=5,i=45;t%=360,t<0&&(t+=360);const s=Math.round(t/i);return Math.abs(t-s*i)<e?s*i:t},calculateRotation(t,e,i){},getDesignByUUID(t){const e=this.isInside?this.$root.projectData.insideDesignData:this.$root.projectData.designData;return e.find(e=>e.uuid===t)},move(t){const e={x:0,y:0};switch(t){case"ArrowUp":this.y-=.5,e.y=-.5;break;case"ArrowDown":this.y+=.5,e.y=.5;break;case"ArrowLeft":this.x-=.5,e.x=-.5;break;case"ArrowRight":this.x+=.5,e.x=.5;break}this.emitMove(e),this.saveData()},transformRotate(t){const e=t.style.rotateX?-1:1,i=t.style.rotateY?-1:1,s=`scale(${e},${i}) rotate(${t.style.rotate}deg)`;return s},saveData(){this.$store.commit("increaseCanvasVersion",this.isInside),this.$store.commit("increaseProjectVersion")}}),watch:{designs:{immediate:!0,deep:!0,handler(t){}}}},g=m,v=(i("eef7"),i("2877")),b=Object(v["a"])(g,o,l,!1,null,"591b42cc",null),y=b.exports,_={name:"Svggroup",props:{group:{Object:Object,required:!0},index:{type:Number,required:!0}},components:{ForeverGroupControl:y},data(){return this.globalOffset=0,{}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])(["scale","isInside"])),Object(r["mapState"])("editor",["targetDesign","targetDesigns"])),Object(r["mapGetters"])("editor",["isGroupEditing","uuid2Design","designData","globalTransform"])),{},{active(){if(!this.targetDesign||!this.targetDesign.type)return!1;const{type:t}=this.targetDesign;return"group"!==t?this.group.designs.some(t=>t.uuid===this.targetDesign.uuid):this.targetDesign.uuid===this.group.uuid},isGroupEditing(){if(!this.targetDesign||!this.targetDesign.type)return!1;const{type:t}=this.targetDesign;return"group"!==t&&this.group.designs.some(t=>t.uuid===this.targetDesign.uuid)},left(){return this.group.style.left+this.globalOffset},top(){return this.group.style.top+this.globalOffset},width(){return this.group.style.width},height(){return this.group.style.height},rotate(){return this.group.style.rotate},designs(){return Object(f["d"])(this.group)},origin(){return{x:0,y:0}}}),watch:{active:{immediate:!0,handler(t){}},width(t,e){this.targetDesigns&&this.targetDesigns.length>1&&Object(f["m"])(this.group,t/e)}},mounted(){this.initGroup(),this.$on("resize",this.resize)},beforeDestroy(){this.$off("resize")},methods:{initGroup(){this.$emit("material-loaded",!0)},handleMousedown(t){this.$store.dispatch("editor/CLICK_GROUP",this),this.$nextTick(()=>{this.$refs.designControlRef&&this.$refs.designControlRef.doMove(t)}),t.stopPropagation()},updateDesigns(t,e){for(const i of t){const t=e.find(t=>t.uuid===i.uuid);t&&u.a.merge(t.style,i.style)}},handleMove(t,e,i){const s={type:"move",event:null,amount:t,origin:this.origin};Object(f["o"])(this.group,s)},handleScale(t,e){const i={type:"scale",event:null,amount:t,origin:e};Object(f["o"])(this.group,i)},handleRotate(t){const e={type:"rotate",event:null,amount:t,origin:this.origin};Object(f["o"])(this.group,e),this.$store.commit("editor/setShowRotateTip",!0)},handleEndRotate(){this.$store.commit("editor/setShowRotateTip",!1),this.$store.dispatch("editor/COMMIT_VERSION")},handleLocked(){return this.$message.error("该对象被锁定")},handleContextMenu(t){this.$bus.$emit("show-design-menu",{event:t,design:this.group})},resize(){Object(f["l"])(this.group)},refresh(t){}}},x=_,w=(i("4268"),Object(v["a"])(x,s,n,!1,null,null,null));e["default"]=w.exports},"29bf":function(t,e,i){"use strict";i.r(e);i("b680");var s=i("ed08"),n=(i("540c"),i("d43c"));const a=1e6,r=t=>t>1e4?(t/a).toFixed(4)+"m²":t.toFixed(0)+"mm²";e["default"]={name:"OrderInfo",description:"print only",props:{data:{required:!0},images:{required:!0,type:Array},message:{required:!1,type:String},canUpdate:{required:!1,type:Boolean}},data(){return{inputMessage:""}},methods:{handleMessageChange(t){this.inputMessage=t.target.value,this.$emit("message-change",this.inputMessage)}},render(){const t=arguments[0],{data:e}=this;if(!e)return null;const i=e,{projectInfo:a={}}=e;return t("div",{class:"OrderInfo"},[t("div",{class:"goods-info-wrap"},[t("div",{class:"sub-title"},["商品信息"]),t("div",{class:"goods-info__body mt-24"},[t("div",{class:"info-row"},[t("div",{class:"pb-16"},[this.images.map(e=>t("img",{key:e.id,attrs:{alt:"",src:Object(s["F"])(e.image,140,104)},class:"goods-img"}))]),i.payFee&&i.count?t("div",[t("div",[t("div",{class:"money-item"},["¥",(i.payFee/i.count).toFixed(2)]),i.payFee!==i.totalFee&&t("div",{class:"money-item price-old ft-gray mt-8",style:"text-decoration:line-through;"},["¥",(i.totalFee/i.count).toFixed(2)])]),t("div",{class:"money-item"},["x",i.count]),t("div",{class:"money-item",style:"font-weight:500;"},["¥",i.payFee])]):""]),t("div",[t("div",{class:"goods-name mb-16"},[a.name]),t("div",{class:"description"},[a.name,a.crafts&&a.crafts.length?t("span",["（工艺：",a.crafts.map(t=>t.name).join(", "),"）"]):" ",r(a.length2d*a.width2d)])])]),t("a-divider"),t("div",{class:"flex flex-between"},[t("div",{class:"flex",style:"min-width:400px;"},[t("span",{style:"display:inline-block; flex-basis:6.2em;"},["留言备注："]),this.canUpdate?t("a-input",{attrs:{type:"textarea",placeholder:"选填",value:this.inputMessage},style:"flex-basis:400px; resize:none;",on:{change:this.handleMessageChange}}):t("a-input",{attrs:{type:"textarea",disabled:!0,value:this.message||""},style:"flex-basis:400px; resize:none;"})]),t("div",{style:"flex:1; margin-left:auto;"},[i.payFee&&void 0]),t("div"),t("div",{class:"clearfix"})]),t("div",{class:"mt-32 flex"},["如需增值税发票，请在确认收货后",t(n["a"],{style:"margin-right:0.5em;"},[t("a",{attrs:{href:"javascript:void(0);"},style:"color:#333333; margin-left:0.5em;"},["联系客服"])]),"开具。"])])])}}},"2a0e":function(t,e,i){},"2a1e":function(t,e,i){},"2a4a":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"render-light",style:{height:t.height+"px"}},[s("scrollbar",{attrs:{maxHeight:t.height+"px"}},[s("div",{staticClass:"p-20"},[s("a-button",{attrs:{icon:"plus",block:""},on:{click:t.addLight}},[t._v("添加灯光")]),s("div",{staticClass:"pfow mt-24"},[t._v("光照模版")]),s("div",{staticClass:"flex flex-between flex-wrap"},[t._l(t.tpList,(function(e,i){return s("div",{key:i,staticClass:"light-item ",on:{click:function(i){return t.chooseLight(e)}}},[s("div",{staticClass:"img",style:{backgroundImage:"url("+t.thumbImg(e.example_image,104,78,90)+")"}}),s("div",{staticClass:"text"},[t._v(t._s(e.title))])])})),s("a-popover",{attrs:{trigger:"hover",placement:"rightTop",overlayClassName:"render-bg-item-pop"}},[s("template",{slot:"content"},[s("div",{staticClass:"flex flex-between item-center"},[s("div",{staticClass:"pfow"},[t._v("我的光照模板")]),s("div",{staticClass:"fo-12 fo-gray pr-12"},[t._v(t._s(t.tpList2.length)+" / 10")])]),s("a-button",{staticClass:" mt-12 ",staticStyle:{width:"216px"},attrs:{type:"primary",block:"",loading:t.tpLoading},on:{click:t.setIntotmp}},[t._v("当前光照设置为模板")]),s("scrollbar",{attrs:{maxHeight:258},on:{reachBottom:function(e){return t.getTempMode(!0,"2")}}},[s("div",{staticClass:"flex flex-start flex-wrap"},t._l(t.tpList2,(function(e,n){return s("div",{key:n,staticClass:"light-item mr-8",on:{click:function(i){return t.chooseLight(e)}}},[s("div",{staticClass:"img",style:{backgroundImage:"url("+t.bgl+")"}},[s("div",{staticClass:"del-btn flex flex-center item-center",on:{click:function(i){return i.stopPropagation(),t.delTpMode(e.id)}}},[s("img",{attrs:{src:i("87dd")}})])]),s("div",{staticClass:"flex flex-between item-center"},[s("div",{staticClass:"text ell"},[t._v(t._s(e.title))]),s("img",{staticClass:"kll mt-8",attrs:{src:i("1bf0")},on:{click:function(e){return t.showText(n)}}})])])})),0),t.tpList2.length>0&&t.tpList2.length>=t.tpcount2?s("div",{staticClass:"mt-12 fo-12 fo-gray text-center"},[t._v(" 没有更多了 ")]):t._e(),0===t.tpList2.length?s("div",{staticClass:"text-center mt-40"},[s("img",{attrs:{src:i("e597"),width:"155px"}}),s("div",{staticClass:"fo-12 fo-gray mt-16"},[t._v("您还没有灯光模板哦~")])]):t._e()])],1),s("div",{staticClass:"light-item "},[s("div",{staticClass:"img  flex flex-center item-center fo-14 fo-gray"},[t._v("我的")])])],2)],2)],1)]),s("a-modal",{attrs:{title:"修改模板名称",footer:null,zIndex:5e3,width:300},model:{value:t.showTmpTitle,callback:function(e){t.showTmpTitle=e},expression:"showTmpTitle"}},[s("a-input",{model:{value:t.tmpName,callback:function(e){t.tmpName=e},expression:"tmpName"}}),s("a-button",{staticClass:"mt-16",attrs:{type:"primary",block:"",loading:t.uploading},on:{click:t.uptmp}},[t._v("提交修改")])],1)],1)},n=[],a=i("365c"),r=i("ed08"),o=i("d7ea"),l=i.n(o),c={props:{height:{type:Number}},data(){return{bgl:l.a,tpQuery:{current:1,pageSize:7,publish_type:"official",template_type:"shine"},tpList:[],tpList2:[],tpQuery2:{current:1,pageSize:10,publish_type:"my",template_type:"shine"},tpLoading:!1,tpcount:0,tpcount2:0,tmpName:"",tmpId:"",showTmpTitle:!1,uploading:!1}},mounted(){this.getTempMode(!1,""),this.getTempMode(!1,"2"),this.$bus.$on("finishAddTmp",()=>{this.tpLoading=!1,this.getTempMode(!1,"2")})},beforeDestroy(){this.$bus.$off("finishAddTmp")},methods:{thumbImg:r["F"],chooseLight(t){this.$bus.$emit("chooseLightMode",{light:t.d3_params.scene.light,envLight:t.d3_params.scene.envLight,lights:t.d3_params.scene.lights})},uptmp(){this.uploading=!0,Object(a["delRenderTemp"])({template_id:this.tmpId,title:this.tmpName}).then(t=>{this.uploading=!1,200===t.code&&(this.showTmpTitle=!1,this.$message.success("修改成功"),this.getTempMode(!1,"2"))})},showText(t){this.tmpName=this.tpList2[t].title,this.tmpId=this.tpList2[t].id,this.showTmpTitle=!0},setIntotmp(){this.$confirm({title:"确定将当前灯光设为你的灯光模板！",okText:"确定",okType:"primary",cancelText:"取消",zIndex:4005,centered:!0,onOk:async()=>{this.tpLoading=!0,this.$bus.$emit("setLightIntoMode")}})},addLight(){this.$bus.$emit("renderAddLight")},delTpMode(t){this.$confirm({title:"删除后数据无法恢复，是否要继续删除?",okText:"删除",okType:"danger",cancelText:"取消",centered:!0,zIndex:4005,onOk:()=>{Object(a["delRenderTemp"])({status:0,template_id:t}).then(t=>{200===t.code&&(this.$message.success("删除成功"),this.getTempMode(!1,"2"))})}})},getTempMode(t,e){t&&this["tpcount"+e]>0&&this["tpcount"+e]<=this["tpList"+e].length||(t?this["tpQuery"+e].current+=1:this["tpQuery"+e].current=1,Object(a["getRenderTemp"])(this["tpQuery"+e]).then(i=>{200==i.code&&(this["tpList"+e]=t?this["tpList"+e].concat(i.data):i.data,this["tpcount"+e]=i.total)}))}}},h=c,d=(i("4a02"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,null,null);e["default"]=u.exports},"2a4ae":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.START_BIN="1010",e.END_BIN="11101",e.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]},"2aee":function(t,e,i){},"2af2":function(t,e,i){"use strict";var s=i("750b"),n=i("70d4"),a=i("63bf"),r=i("b6c6");i("79f3");e["a"]=Object(s["b"])({setup(t,e){const i=e.vuex.mapGetters("profile",["isLogged"]),o=e.vuex.mapMutations("profile",[r["c"]]),l=Object(s["i"])({visible:!1,resizeVisible:!1,newprojectType:!1,newprojectValue:null});return()=>{var t,c;return Object(s["c"])("div",{class:"newer-design"},[Object(s["c"])(a["default"],{attrs:{visible:l.resizeVisible,nptype:l.newprojectType,npvalue:l.newprojectValue},on:{npchange:t=>{l.resizeVisible=!1,l.newprojectValue=null,l.newprojectType=!1},change:t=>{l.resizeVisible=t}}}),Object(s["c"])(n["default"],{attrs:{visible:l.visible},on:{change:t=>{l.visible=t},"use-change":t=>{l.newprojectType=!0,l.newprojectValue=t,l.resizeVisible=!0}}}),Object(s["c"])("div",{on:{click:()=>{i.isLogged.value?l.visible=!0:o[r["c"]](!0)}}},[null===(t=(c=e.slots).default)||void 0===t?void 0:t.call(c)])])}}})},"2b3a":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAABMCAYAAADHl1ErAAANMklEQVR4Xu1cd3hUVRb/3fROSC+UhBCSoCICorBSpKwodl3RXQniKlWKrCiyccFVqigKGEQQAUEhgiiuoICJIIvSFIgYQhISQhISUkmflHn7nceb+DJ5M3PfmwnKfnO+L39k5tx7zv3NLafdy/A7kCAI7gBuBRAHIEb66wzAW/ZHmlXJ/i4CSJf+0gAcY4zVXWv12bUSKAhCfwB3AxgG4HYALlbKbgDwI4BkAHsYY0et7I+rebsCJghCBIAnAYwF0INLI+1M5wB8BGAzYyxHezfmW7YLYIIg3ALgnwAeAuBgSoUGQYfshgxk6dKRo8tCZXMFavTVqNbTSgS8HLzh6eAFH0dfRLhGIco1BpEu0XBhruZGpQewE8ACxtjPtgbOpoAJgtCbFAVwj5KiNfoq/FBzAIeqk/Hf6mSk1adCL9D4+MmBOSDO7Sb8yWsY7vAahgGeQ+DpQFufIu2mH44xdpJfwjWYYYIgdADwGoApABzlIvVoxoGqvfi0fBO+qfwCdXrb7tPuDu64y+cB/KVjPIZ4/xkOrcWTKs0AEgG8whi7Yi1wVs8wQRBo2ZFCIXJl6oRabC59H+8VL8Olxnxr9eRqH+ocjkmBL+BJ/wlwZx7GbQrpB2WM0XLVTJoBEwSBTrllAKbJpTcKDVhX8g4Si99AaVOxZsWsaejvFIgpgbPxTMAMOLM2h/FKAC8wxuiUVU2aABMEoSuAHQD6yiUeqv4WcwumIrOezKXfn7q7xWBh2Lu4w2u4sTInADzCGLugVkvVgAmCcBOArwGEGYTVCTV4OX8qkso2qpV/Tfgf8xuHReHvwp15yuUVABjFGEtVo4QqwARBGARgFwBfg5Cz9amYmPsYMurPqpF7zXmj3WKxpksSYt3o926hCgD3M8a+51WIGzAJrG8AkFsj0ldXtmP6xXibn3y8yqvloxN1RedNGN3hUXlTOrbv4gWNCzBpGR6Uz6xNZasxN/851XaU2kHamp/suIXhqxDvN9l4pg3mWZ4WAZM2+MPyPWvF5YVYXEiG/PVLc0IWYHrQXOM9baClg8AsYJLpQGC1nIY0s+bkkX16/dPiTonGM41OTwLNpMlhCbAVcjuL9qyJuWOuu2Vo6qel5bmmyzbjPW0lY2y6qTYmAZMs+M/kp+HozNuumw2ed/7TQfBV9yPGp+fDpjwCRcAk35DsBNHdITtrVEa/P7zpwAuSMR+ZHF9HH5fbaeRGxSr5nqYAa7UUZ+Y99Yc1SrWCZNyOjNu3O22Qf6y4NNsAJoVojhuiDuTuPHZ+hE30Yoyhi0skAp2CQf6et0MHVOmvoLypFAWNechrUO2p2EQvQydJ3fbL3SiKcvQzDg0pAfaVIZ5FjvTwjF5W+Ya+Th3xoO8TGOQ1HAM8h8LX0c/kIIubCnG89gfsq/wSuyqSUKuvsSkgljoj3/Pb6NNyh303Y2y0vF0rwKRI6U8GhtXFb+C1Sy9akqP4Pc2kiYGz8LjfeGMfjqs/CjZ+VrEFbxX9G0WNl7ja2ILpldClmBw4W95VH3nk1hiw7eTFX93oa9E/LUJ1iIaW3bMBM/ByyCK4Mjerx1Crr8Y7lxeI4aJmgVZJ+xJtFUfjcuTxtB2MsRZfqgUwKWFxHoD42dqStzGv4HlV2tHyW9d1BwZ63qmqHQ8z7aXk5Jc3lfGwW8XzathyPBsw09AHxdCjDIkVOWAJUpgZFFa+Na2rqkipj2MH0KbZy72fVcqaa3yhIQsPZQ1GYSNFZtqPKHJ7LO6CPNxN4e3XSaIcMIr6iamwlKo9+Fu2Yh5DUUtn5oydUQfRx4PSje1LqXU/iaC194GwJXI37vSmNKpI5xhjlHC+CpiUZD1i+HZK7hP4vGIr98hnBifgxWDKgbSlkqYifFz2ASqay/CE39OIdu1psl+dUI+k8g3I0p3DMO+7MdhrpCLvjoqPMC03nls/LYwP+j6OxC6fyJveRsliA2DzAMynb+l06vVrMLcLREfx/uhTirnCeqEOg9PjWuwrf6cAHInNhoeDl+IYpl18EjvKt4jfkZ+3P/qkscsitRNwX9ZAnKihxHf7ELlMp3sWyVN48xljrxoAOwBgMIneX/UfxGffx60FhX7H+StHLzJ1aRic3npGHYxJQ3fXWMX++5+NaGW8vtd1K+7vMEaR94ea7/BIlu0PF7mwTZFfYoT3vYaPDjLGhjCpMIRCtWJ6Zf6lWXi/eDkXYC4OLvg5rgAdHf0V+QXoMTbnXiRX7hG/v8WjP77sflgpdyh+v7J4ERZduhqjouM9pUcqApyCTfbdJ61Tu9poEwKfx/zQtwzyKeTjS4ANAfCd4dORGb1xpu4UF2CDvUdga+Q+i7zHaw+LZQCUvbGQ5sc53Rlk6zJxq+dA+DkGyvoWkNOQJQJE+yIt2c2la5FSRfmY9qEb3G/GvuhWSfOhBNhEAO+RSKp16PaLB3e8a6z/RCwJF5u2G9GJvetKEpKr9kCnr0cv974Icg5BgFMQBAgobixCYVMBTtUe4953eZWlH+X8jbXyH3kSAUZzTrRQ03W/4M70VlkVs30rhHl5dbHId7B6nxgGz9ZlIN5/EkZ1eBA3u/czuZzpxz5acwi7rmwTyxJ0ep1FGTwMKTGpiHG90cC6nABrcbZ3V+7AMzmtMipm+5wXtgwTA/7BI5ebpxlNeP3SS9hUuhqzgudhvP9Uk6eqqU7JiV95eRHWl67iXi2m+loXsR33+IjeItFuAuw0AHFaJRYvFZXlpXH+k7EonMoqbENkh43NHo3y5lIkdvnYrM3GI5FO0hkXxyGvIZeHXZEnIXQJpgS2BCBSCbBsAFT4hsWFc7Hi8iLuzod4j8QnkXu5+c0zCpiU+zjyG3OxLXKf6lllqu+ipgI8kjUU53UZmvScHvQy5oQsNLTNIcBK6BSnTxIKpmF9ySrujskQPRGXZ/Hk4+mQQklJ5RvxRfdD8HFoSazzNLXIU9iUj/szB2qaaU8HPIfXw6h+RaRSAox2R9EG0xKKXt55PcZ0HG9RaXMMZCYMSo/F1m57cbM71QorkSB3fU1w6MFMFDxqjRyP8XsKyzt9aJDXYDVgsW43IrmHqnqONoN9pWA6GoVGLA5frQjEu8VLsKxonughrO26HREu3dvwUcnCzoqPxYrEDyM+V6xKfD5vPLaVtYrbW/yhlQDTvCQN0hQSohYVMTCQN9A7LQxbI/cizq2XYrubfg1qCWROCZqNhJClrfjIse955jdvw5RLdab+JEaeo/Jbfvp7wDS8FkY5od+WpOZN39ALhXc+izqAvh4D+DWROI/UfI85+ZOR0uMXk23XlLyJJYUJCHQKwfqInbjBjUppWxPVpVHFI7lfGyJ2mXTX1HgyJEFp09dsVshVDnEOE/3EcGeqteOnjaWJOFH7o1hVY44oIaNQTdiqCdlwjnAy28/s/GexpXQdt4JKZoVmw9VYaqBzMD7s+rmqQOKSoqtFLS8FU/F1+9OKywuwuJCCy3ykZLhqdo2URLo5uOHtzhtMhmWM29CGT37hjCD+QfANVZlLbSZMyTXS7HybUpx8P1MnnnEb2p8owro0fI01OHC3nZX3NLaWtZgJZtuZcr41h3dMSdseldwqc0SOMQl3gnObJnsqd+KDkhXY3i2Fe9DWMN6T2R8na49xdaEQ3rEugKgklfaxk3EFogFJvuHmsvex6vJiVDVXoq/n7ejvcQfCXDqLy9DHoQN+rT+NfxXMxMmeBfB3DOIaiFamtPrTGJHRm3IYXF0oBhCppSAImkPUxpLHB0zFvNA3saVsrRgx4E2JzQ97ExMCZnENRCvTpNwxYgkCLymGqCXANCdBjIU/2nEsDtekoKAhj1cvka+jkx++jzlrFGVV1YVZZtKJimp47zZZSoLQXUbNaTZbDUshtWWTrvMac8T6trKmUu7+zKbZpFmmOZHLrQUHo5Lrw9HMJAsFE8ecH4mz9aY9CaXGZhO5EmBWlQpYMyjjthMCZyIhdKniqapGDl26iM+5V3VYh7dUgIKIVhWjqBmMJd5eHn3wTueN8ni6pSZtvh+QHoULOhqSOuIqRpFmmdXlTupUM89NttsonwfEK339RMfe/LUCKqKR35ecevGv2FneKt1vUT3ucicJMIp92KSgzqJmKhnIbhvkPRy3uN8GsvXof4qhUZlnTkMmfqr9Eadqj4s3df8VukyMnX1avhEzLj6lSpKqgjoJNJuWbKrS1kbMTswJlKChvOnQ9JYUmcXeVZdsSoBRsKldioItamxjBirwq9PXcucoNRUFS6DZy84BvrJzCTC69G6/2KBwqd5+dcYWV2cMW4kgCPbLWUb7qqXbbJSvtF//k4Fmv2D6GxhUmm3dBVPZ0qRiFfsVZou+hmwq2i/JXwXD4pKU73n2ZxhUAibZaPaHPtR6JPanZNQidjVxYn+sSANuBJz9OSy1wNkfXFOLmMRvf9JPO3CGRyMfNme6KD0aSQ9Gyh+NpIcj/28fjTTG1/4sqcYZJ9lv9odvteIn3aAjAOkeoJanlSm4efT3eFr5f+sfSoBPLimpAAAAAElFTkSuQmCC"},"2b3c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAANCAYAAACkTj4ZAAABNElEQVQ4T42TvytFYRjHP18sFvcPMLJYRWJW18hINrnDtTDc3LKzGJVkNMigZPFjF0n8BQwsykJcKfLoub2nTm/vi2c55zw/Ps/PIzJiZlPAIjAEfAM3wKak3VSIYqWZdQJbwFwmxx4wK+mrbE+BmsBartKgX5fUSILMbASYB2aA7pLTA/AGDJR0n0C/pPtC167IzJaBVaAjquQcmABawA4wXbKvSPKYtsjMxoFTf09AqpJeQzKfXQy7A+qSThx0DFR/gxS2sIgY5m0OO+gZqESgBeAauJX0FCrqAQYBfx5EHRw56D0abplZk7QdQGPAWWabLQddemkZh/+CXhxUCweYYvkl10NF3u5GJuGhg3zl+8BkxukR8CvuTWzWQ3w0o8UddQFL4bfoA/z7L/kALoCGpKsfMc1wpGxO+dgAAAAASUVORK5CYII="},"2b61":function(t,e,i){var s=i("7d6d"),n=i("82eb"),a=n.ContextCachedBy,r=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],o=function(t){this.extendFrom(t,!1)};function l(t,e,i){var s=null==e.x?0:e.x,n=null==e.x2?1:e.x2,a=null==e.y?0:e.y,r=null==e.y2?0:e.y2;e.global||(s=s*i.width+i.x,n=n*i.width+i.x,a=a*i.height+i.y,r=r*i.height+i.y),s=isNaN(s)?0:s,n=isNaN(n)?1:n,a=isNaN(a)?0:a,r=isNaN(r)?0:r;var o=t.createLinearGradient(s,a,n,r);return o}function c(t,e,i){var s=i.width,n=i.height,a=Math.min(s,n),r=null==e.x?.5:e.x,o=null==e.y?.5:e.y,l=null==e.r?.5:e.r;e.global||(r=r*s+i.x,o=o*n+i.y,l*=a);var c=t.createRadialGradient(r,o,0,r,o,l);return c}o.prototype={constructor:o,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(t,e,i){var n=this,o=i&&i.style,l=!o||t.__attrCachedBy!==a.STYLE_BIND;t.__attrCachedBy=a.STYLE_BIND;for(var c=0;c<r.length;c++){var h=r[c],d=h[0];(l||n[d]!==o[d])&&(t[d]=s(t,d,n[d]||h[1]))}if((l||n.fill!==o.fill)&&(t.fillStyle=n.fill),(l||n.stroke!==o.stroke)&&(t.strokeStyle=n.stroke),(l||n.opacity!==o.opacity)&&(t.globalAlpha=null==n.opacity?1:n.opacity),(l||n.blend!==o.blend)&&(t.globalCompositeOperation=n.blend||"source-over"),this.hasStroke()){var u=n.lineWidth;t.lineWidth=u/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1)}},hasFill:function(){var t=this.fill;return null!=t&&"none"!==t},hasStroke:function(){var t=this.stroke;return null!=t&&"none"!==t&&this.lineWidth>0},extendFrom:function(t,e){if(t)for(var i in t)!t.hasOwnProperty(i)||!0!==e&&(!1===e?this.hasOwnProperty(i):null==t[i])||(this[i]=t[i])},set:function(t,e){"string"===typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t},getGradient:function(t,e,i){for(var s="radial"===e.type?c:l,n=s(t,e,i),a=e.colorStops,r=0;r<a.length;r++)n.addColorStop(a[r].offset,a[r].color);return n}};for(var h=o.prototype,d=0;d<r.length;d++){var u=r[d];u[0]in h||(h[u[0]]=u[1])}o.getGradient=h.getGradient;var p=o;t.exports=p},"2b95":function(t,e,i){"use strict";var s=i("7910"),n=i.n(s);n.a},"2c06":function(t,e,i){},"2c45":function(t,e,i){},"2cf4c":function(t,e){var i=1;"undefined"!==typeof window&&(i=Math.max(window.devicePixelRatio||1,1));var s=0,n=i;e.debugMode=s,e.devicePixelRatio=n},"2d41":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAxklEQVRIS+3TMWtCMRTF8Z+g0IqLg3QqiKPQQd38/rhph0JHKbjp4FJUUFCCOii+lzxEBHl3CYSTc27+ual4cFUe7K8MiBJ+bURVfCCsebXFHLtbojxEAzSikI+Cf4yLBNQwTDQ/y0YIt7mop90gdFFHL+ENAvtvrIogOmtb6EZQ/WKRpUn5Bx18ZhjMMM1rICUgaL7QvDJa4gf7ewPC+TBVfbydzDaY3JqaIlN0rX1H+7T5h3XKGKcgSvHJ1JQBUXwloiiiA6wNGBnBt3ePAAAAAElFTkSuQmCC"},"2e00":function(t,e,i){t.exports=i.p+"editor-assets/img/ang1-w.144259e7.svg"},"2e14":function(t,e,i){},"2e3f":function(t,e,i){"use strict";var s=i("a355"),n=i.n(s);n.a},"2e61":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABAUlEQVRYR2NkGGDAOMD2M4w6AB4COfldwf///5v6n4FBnBbRwsjA8JKRkSl7ysSytcjmwx2QldfxgoFGliNZ+HLapAoJXA64wcDAoE4L3yOZeXPapAoNrA7IzW03/MvI1MLA8J8mUcDAwPiS+f+/msmTK89jdQCNfY7T+NFsOBoCQyMEMvM6ExkZ/nczMDAIk5tbCJaEuAxuaGhgefWO4yMDAwMXuZYTVRLiMZwxK6/jOZWKadwlIT7f5eS0Wf9jYqqjJApGS0JcITw0siEVUv9oZUS7ECC2LUl2SUgo/klsS+JuExKyCJd8Vl4HKW1J8kpCfI4jvi052ibEHo6jJSEAlVtYIU7Rmf8AAAAASUVORK5CYII="},"2e69":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-button",{staticClass:"mb-10",attrs:{block:""},on:{click:t.onMerge}},[t._v("组合")]),i("a-divider"),i("div",{staticClass:"flex item-center flex-wrap flex-between"},t._l(t.$data.$arrangeButtons,(function(e,s){return i("a-tooltip",{key:s,attrs:{effect:"dark",placement:"top"}},[i("template",{slot:"title"},[t._v(" "+t._s(e.tip)+" ")]),i("div",{staticClass:"btn-wrap"},[i("div",{class:"box-button",on:{click:function(i){return t.onArrange(e.direction)}}},[i("img",{attrs:{src:e.url,alt:""}})])])],2)})),1),i("a-divider"),i("design-common-operation")],1)},n=[],a=(i("2532"),i("ddb0"),i("5530")),r=i("5880"),o=i("1e9d"),l=i("c854"),c=i("ed08"),h={components:{designCommonOperation:o["default"]},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["scale","project_data","is_outside"])),Object(r["mapGetters"])("editor-v2",["curDesigns","design_data"])),data(){return{$arrangeButtons:[{direction:"left",url:i("ca19"),tip:"左对齐"},{direction:"hcenter",url:i("17b6"),tip:"水平居中"},{direction:"right",url:i("6b6b"),tip:"右对齐"},{direction:"top",url:i("c4d7"),tip:"顶部对齐"},{direction:"vcenter",url:i("8379"),tip:"垂直居中"},{direction:"bottom",url:i("1c67"),tip:"底部对齐"}]}},methods:{onArrange(t){const e=this.curDesigns,i=this.scale,s=this.project_data.rotate,n={};e.forEach(t=>{n[t.uuid]=JSON.parse(JSON.stringify(document.getElementById("element"+t.uuid).getBoundingClientRect()))});const a=Object.values(n),r={left:void 0,right:void 0,top:void 0,bottom:void 0,width:void 0,height:void 0};a.forEach(t=>{void 0===r.left?r.left=t.left:r.left=Math.min(r.left,t.left),void 0===r.top?r.top=t.top:r.top=Math.min(r.top,t.top),void 0===r.right?r.right=t.right:r.right=Math.max(r.right,t.right),void 0===r.bottom?r.bottom=t.bottom:r.bottom=Math.max(r.bottom,t.bottom)}),r.width=r.right-r.left,r.height=r.bottom-r.top;const o=e.map(t=>t.uuid),l=this.design_data;for(let h=0;h<l.length;h++){const e=l[h],{uuid:a}=e;if(!o.includes(a))continue;const d=n[a];let u,p="";switch(t){case"left":u=Math.round((r.left-d.left)/i),p="left";break;case"right":u=Math.round((r.right-d.right)/i),p="left";break;case"hcenter":u=Math.round(((r.width-d.width)/2-d.left+r.left)/i),p="left";break;case"top":u=Math.round((r.top-d.top)/i),p="top";break;case"bottom":u=Math.round((r.bottom-d.bottom)/i),p="top";break;case"vcenter":u=Math.round(((r.height-d.height)/2-d.top+r.top)/i),p="top";break;default:break}if(!u||!p)continue;let f=!1,m=1;90===s?(f=!0,["left","right","hcenter"].includes(t)&&(m=-1)):180===s?m=-1:270===s&&(f=!0,["left","right","hcenter"].includes(t)||(m=-1)),f&&("left"===p?p="top":"top"===p&&(p="left")),e.style[p]+=m*Object(c["H"])(u).px2mm()}},onMerge(){const{curDesigns:t,design_data:e}=this;if(!this.curDesigns||this.curDesigns.length<2)return;const i=l["i"](t),s=t.map(t=>e.findIndex(e=>e.uuid===t.uuid)),n=Math.max(...s),a=Math.min(n,e.length);t.forEach(t=>{const i=e.findIndex(e=>e.uuid===t.uuid);e.splice(i,1)}),i._selected=!0,e.splice(a,0,i)}}},d=h,u=(i("82ed"),i("2877")),p=Object(u["a"])(d,s,n,!1,null,"5b172065",null);e["default"]=p.exports},"2e81":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACF0lEQVRYR82XP0iVURTAf6cPcigSfJiCukSbPmryPU1FAkMIgqZqDKy5qTYHtxcV0tafTVA3pzaRRjUiIoKGaNEgc4uCzB4njtxPvr7e17uf75PrXe855/7uueffFTyXqp4ELgMXgXPAGeCUU/8GfALeAivACxH57mNamgmp6lngHnADONFM3u3/ABaAmoh8/J9OJoCqtgEzwB3guOfBabFfwCwwLSI7jWw0BFDVbmAJqB7w4LTaKnBVRL6kN/4BUNWyvSHQV9DhsZkNiyEReZe0+xeAu/n6IRyehBhMemIfwL35ywLdnuVAe47xOCaSADXgbsFuzzJ3X0Qss9gDcKn2voVoz8tt2dFvKRoDPAOm8lppUf65iNwSV+EsPbyKjKqy+Xnb/EZvz2lEmtayLE4rVt0GcA1Y9L3N8sorXr/5sCduAJMTVUqldl/1tNx1A3gC3Pa18GB2nnq9vi8eRceoDg4wVBkgiiJfM7HcUwOwtKj4atYezjUUNS+YN8wrOdaaAXwFOn2VsgBi/eFqmdEL533NbRvAT8Aaj9dqBmBGpm5eodThFRc7RwKg0CcYqpQZG8n3BMUEYUc7k5cOFoS50vDR4wV2d38XmobBC5ENm96l2K6+sbllDYy+3q7WS7HrhuGa0ZFoxw4i3EDiAKwahhvJHISN42GG0jixg47lCYhwH5MERLivWbIvB/ucpoeDw/qe/wF68+5J7oiJVQAAAABJRU5ErkJggg=="},"2ea4":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rendered-left"},[s("div",[s("scrollbar",{directives:[{name:"show",rawName:"v-show",value:0===t.page&&0===t.menu&&"image"===t.renderType,expression:"page === 0 && menu === 0 && renderType === 'image'"}],attrs:{"max-height":t.HEIGHT+"px"},on:{reachBottom:function(e){return t.getBgList(!0)}}},[s("div",{staticClass:"p-20"},[s("div",{staticClass:"fo-14 pfow flex flex-start item-start"},[s("div",[t._v("快搭模板")]),s("a-tooltip",{attrs:{placement:"bottomLeft"}},[s("template",{slot:"title"},[s("span",[t._v("快搭模板是指储存并快速应用当前渲染场景内所有参数的场景模板，包括但不限于模型位置及数量、灯光、材质、相机、背景等信息。")])]),s("div",{staticClass:"ml-4 mr-4"},[s("a-icon",{staticStyle:{color:"#fbb120"},attrs:{type:"question-circle"}})],1)],2),s("div",{staticClass:"bxhtest",staticStyle:{transform:"scale(0.8, 0.8)",display:"block",width:"30px"}},[t._v(" Beta ")])],1),s("div",{staticClass:"flex flex-between flex-wrap mt-8"},[t._l(t.tpList,(function(e,i){return s("div",{key:i,staticClass:"bg-item",style:{backgroundImage:"url("+t.thumbImg(e.image,104,78,90)+")"},on:{click:function(i){return t.$emit("tp-change",e)}}},[s("a-popover",{attrs:{trigger:"hover",placement:"rightTop","arrow-point-at-center":!0,"mouse-leave-delay":0,"overlay-class-name":"render-bg-item-pop"}},[s("template",{slot:"content"},[s("div",{staticClass:"pt-8"},[s("div",{staticClass:"pfow"},[t._v("示例效果图")]),s("div",{staticClass:"example-image mt-16",style:{backgroundImage:"url("+e.example_image+")"}}),s("div",{staticClass:"mt-16 fo-12 fo-gray pr-12"},[t._v(" "+t._s(e.title)+" ")])])]),s("div",{staticClass:"gb-item-gth"},[s("a-icon",{staticStyle:{"font-size":"10px",color:"#ffffff"},attrs:{type:"exclamation"}})],1)],2)],1)})),s("a-popover",{attrs:{trigger:"hover",placement:"rightTop","overlay-class-name":"render-bg-item-pop"}},[s("template",{slot:"content"},[s("div",{staticClass:"flex flex-between item-center"},[s("div",{staticClass:"pfow"},[t._v("我的快搭模板")]),s("div",{staticClass:"fo-12 fo-gray pr-12"},[t._v(t._s(t.tpList2.length)+" / 10")])]),s("a-button",{staticClass:"mt-12 mb-12",staticStyle:{width:"216px"},attrs:{type:"primary",block:"",loading:t.tpLoading},on:{click:function(e){return t.$emit("set-tp-mode")}}},[t._v("将当前场景设为快搭模板")]),s("scrollbar",{attrs:{"max-height":258},on:{reachBottom:function(e){return t.getTempMode(!0,"2")}}},[s("div",{staticClass:"flex flex-start flex-wrap"},[t._l(t.renderList,(function(e,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.tmpTaskId==e.id,expression:"tmpTaskId == item.id"}],key:i+"s",staticClass:"bg-item mr-8",style:{backgroundImage:"url("+t.thumbImg(e.image,104,78,90)+")"}},[s("div",{staticClass:"flex flex-center item-center",staticStyle:{width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.5)",color:"#fff"}},[t._v(" 生成中... ")])])})),t._l(t.tpList2,(function(e,n){return s("div",{key:n,staticClass:"bg-item mr-8",style:{backgroundImage:"url("+t.thumbImg(e.image,104,78,90)+")"},on:{click:function(i){return t.$emit("tp-change",e)}}},[s("div",{staticClass:"del-btn flex flex-center item-center",on:{click:function(i){return i.stopPropagation(),t.delTpMode(e.id)}}},[s("img",{attrs:{src:i("87dd")}})])])}))],2),t.tpList2.length>0&&t.tpList2.length>=t.tpcount2?s("div",{staticClass:"mt-12 fo-12 fo-gray text-center"},[t._v(" 没有更多了 ")]):t._e(),0===t.tpList2.length&&0===t.renderList.length?s("div",{staticClass:"text-center mt-40"},[s("img",{attrs:{src:i("e597"),width:"155px"}}),s("div",{staticClass:"fo-12 fo-gray mt-16"},[t._v("您还没有快搭场景模板哦~")])]):t._e()])],1),s("div",{staticClass:"bg-item flex flex-center item-center"},[s("div",{staticClass:"text-center"},[s("div",{staticClass:"fo-14 fo-gray mt-4"},[t._v("我的")])])])],2)],2),s("div",{class:(t.user.is_admin?"mt-24":"")+" flex flex-between item-center"},[s("div",{staticClass:"fo-14 pfow"},[t._v("预设相机角度")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.user.is_admin,expression:"user.is_admin"}],staticClass:"flex flex-start item-center mt-16"},[s("div",{staticClass:"pfow"},[t._v("X")]),s("input",{staticClass:"tarnsform-input",attrs:{type:"text"},domProps:{value:t.position.x},on:{blur:function(e){return t.positionChange(e.target.value,"x")}}}),s("div",{staticClass:"pfow ml-8"},[t._v("Y")]),s("input",{staticClass:"tarnsform-input",attrs:{type:"text"},domProps:{value:t.position.y},on:{blur:function(e){return t.positionChange(e.target.value,"y")}}}),s("div",{staticClass:"pfow ml-8"},[t._v("Z")]),s("input",{staticClass:"tarnsform-input",attrs:{type:"text"},domProps:{value:t.position.z},on:{blur:function(e){return t.positionChange(e.target.value,"z")}}})]),s("div",{staticClass:"flex flex-start flex-wrap mt-12"},t._l(t.renderRotates,(function(e,i){return s("div",{key:i,class:" flex flex-center item-center rect-btn "+(i===t.renderRotateFlag?"bg-b-active":"bg-b-def"),on:{click:function(e){return t.renderRotateClick(i)},mouseover:function(e){return t.mouseOver(i)},mouseout:function(e){return t.mouseOut(i)}}},[s("div",{staticClass:"text-center"},[s("img",{attrs:{src:e.over||i===t.renderRotateFlag?e.img:e.imgb}}),s("div",{staticClass:"fo-pfow fo-12"},[t._v(t._s(e.label))])])])})),0),s("div",{staticClass:"fo-14 pfow mt-24"},[t._v("背景")]),s("div",{staticClass:"mt-16 flex flex-start item-center flex-wrap backset"},[s("div",{staticClass:"flex flex-between item-center w-100"},[s("div",{class:"bg-btn nobg "+(0===t.bgFlag?"bg-btn--active":""),on:{click:function(e){return t.bgFlagChange(0)}}}),s("div",{class:"bg-btn "+(1===t.bgFlag?"bg-btn--active":""),staticStyle:{"margin-right":"0"},on:{click:function(e){return t.bgFlagChange(1)}}},[s("Pallet",{attrs:{value:t.color,title:"背景颜色","history-colors":[],"show-print":!1,"show-take-color":!1,placement:"topRight","show-opacity":!1},on:{confirm:t.colorConfirm}})],1)]),s("a-upload",{attrs:{name:"file","custom-request":t.uploadChange,"file-list":t.fileList}},[s("div",{class:"bg-btn2 "+(2===t.bgFlag?"bg-btn2--active":"")+" back-img fo-12 flex flex-center item-center bg-b-def2 fo-white pointer",style:{backgroundImage:"url("+t.background+")"},on:{click:function(e){return t.bgFlagChange(2)}}},[t._v(" "+t._s(t.background?"":"上传背景图片")+" "),t.background?s("div",{staticClass:"mask flex flex-center item-center"},[s("a-icon",{staticStyle:{color:"#fff"},attrs:{type:"retweet"}}),s("a-icon",{staticClass:"ml-8",staticStyle:{color:"#fff"},attrs:{type:"delete"},on:{click:function(e){return e.stopPropagation(),t.delBackground(e)}}})],1):t._e()])]),s("div",{staticClass:"flex flex-between flex-wrap mt-8 w-100"},t._l(t.bgList,(function(e,i){return s("div",{key:i,staticClass:"bg-item",style:{backgroundImage:"url("+t.thumbImg(e.image_path,104,78,90)+")"},on:{click:function(i){t.chooseImage(t.thumbImg(e.image_path,1080,1080,90))}}})})),0)],1),t.bgList.length>=t.bgcount?s("div",{staticClass:"mt-12 fo-12 fo-gray text-center"},[t._v(" 没有更多了 ")]):t._e()])]),1===t.page?s("scrollbar",{attrs:{"max-height":t.HEIGHT+"px"},on:{reachBottom:t.handleReachBottom}},[1===t.page&&"image"===t.renderType?s("div",{staticClass:"pt-4"},[t._l(t.renderList,(function(e,i){return s("div",{key:i,staticClass:"pic-item"},[s("div",{staticClass:"pic-img"},[s("div",{staticClass:"img flex flex-center item-center"},[s("img",{attrs:{src:e.image+"?imageView2/0/w/216/h/162/q/100"}})]),s("div",{staticClass:"progress flex flex-center item-center"},["rendering"===e.status?s("div",{staticClass:"text-center"},[s("div",{staticClass:"fo-white mb-8"},[t._v("渲染中"+t._s(e.progress)+"%...")]),"rendering"===e.status?s("a-progress",{staticStyle:{width:"186px"},attrs:{percent:e.progress||0,"show-info":!1,"stroke-color":"#ff6634"}}):t._e()],1):t._e(),"wait"===e.status?s("div",{staticClass:"fo-white"},[t._v("相机预备中...")]):t._e()])]),s("div",{staticClass:"text-k"},[t._v(t._s(e.filename))])])})),t._l(t.list,(function(e,n){return s("div",{key:"sk"+n,staticClass:"pic-item",on:{click:function(e){t.listFlag=n,t.emitPreview()}}},[s("div",{class:"pic-img pic-img-none "+(t.listFlag===n?"pic-img--active":""),style:{height:e.height+"px"}},[s("div",{staticClass:"img",style:{height:e.height+"px",backgroundImage:"url("+e.image+"?imageView2/0/w/"+(e.height>216?parseInt(e.height):216)+"/h/"+(e.height<=216?parseInt(e.height):216)+"/q/100"}},[s("div",{staticClass:"flex flex-between item-center"},[s("div",{staticClass:"tag-kuang ml-8"},[t._v(t._s(e.clear_text||"1K标清"))]),s("div",{staticClass:"tag-kuang mr-8 pointer hishow",on:{click:function(e){return e.stopPropagation(),t.delImage(n)}}},[s("img",{attrs:{src:i("3187"),alt:""}})])])]),s("div",{staticClass:"opt"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"flex flex-end item-center"},[s("div",{class:t.listFlag===n?"opt-right":"opt-def"},[t.listFlag===n?s("a-icon",{staticStyle:{"font-size":"10px",color:"#fff",transform:"scale(0.5, 0.5)",position:"relative",top:"-5px"},attrs:{type:"check"}}):t._e()],1)])])]),s("div",{staticClass:"flex flex-between item-center"},[s("div",{staticClass:"text-k ell"},[t._v(t._s(e.filename||"方案未命名"))]),s("a-icon",{staticClass:"editer-icon pointer",attrs:{type:"edit"},on:{click:function(i){t.tempId=e.id,t.tempName=e.filename,t.showUpdateName=!0}}})],1)])})),s("div",{staticClass:"flex flex-center item-center"},[s("a-spin",{attrs:{spinning:t.spinning}})],1)],2):t._e(),1===t.page&&"video"===t.renderType?s("div",{staticClass:"pt-4"},t._l(t.videoList,(function(e,n){return s("div",{key:n,class:"pic-item "},[s("div",{class:"pic-img "+(t.videoCurrent===n?"pic-img--active":""),on:{click:function(e){return t.$store.dispatch("render/saveVideoCurrent",n)}}},[s("div",{staticClass:"img",style:{backgroundImage:"url("+(e.videoPreviewImgPath||e.videoShed.imagePath)+")"}},[s("div",{staticClass:"flex flex-between item-center",staticStyle:{height:"1px"}},[s("div",{staticClass:"ml-8"}),s("div",{staticClass:"tag-kuang mr-8 pointer hishow",staticStyle:{"margin-top":"28px","z-index":"2"},on:{click:function(e){return e.stopPropagation(),t.delImage(n)}}},[s("img",{attrs:{src:i("3187"),alt:""}})])]),s("div",{staticClass:"flex flex-center item-center",staticStyle:{width:"100%",height:"100%"}},[88===e.status?s("div",{staticClass:"img-play flex flex-center item-center"},[s("img",{attrs:{src:i("57f3")}})]):t._e()])]),88!==e.status?s("div",{staticClass:"progress flex flex-center item-center"},["rendering"===e.status?s("div",{staticClass:"text-center"},[s("div",{staticClass:"fo-white mb-8"},[t._v("渲染中"+t._s(e.progress)+"%...")]),"rendering"===e.status?s("a-progress",{staticStyle:{width:"186px"},attrs:{percent:e.progress||0,"show-info":!1,"stroke-color":"#ff6634"}}):t._e()],1):t._e(),0===e.status?s("div",{staticClass:"fo-white"},[t._v("正在拍摄中...")]):2===e.status?s("div",{staticClass:"fo-white"},[t._v("渲染失败")]):s("div",{staticClass:"fo-white"},[t._v("正在拍摄中...")])]):t._e()]),s("div",{staticClass:"flex flex-between item-center"},[s("div",{staticClass:"text-k ell"},[t._v(t._s(e.title))]),s("a-icon",{staticClass:"editer-icon pointer",attrs:{type:"edit"},on:{click:function(i){t.tempId=e.id,t.tempName=e.title,t.showUpdateName=!0}}})],1)])})),0):t._e()]):t._e()],1),s("light",{directives:[{name:"show",rawName:"v-show",value:1===t.menu&&0===t.page&&"image"===t.renderType,expression:"menu === 1 && page === 0 && renderType === 'image'"}],attrs:{height:t.HEIGHT}}),"video"===t.renderType&&0===t.page?s("video-menu",{attrs:{height:t.HEIGHT}}):t._e(),s("update-name",{attrs:{"temp-id":t.tempId,name:t.tempName},on:{"update-success":function(e){t.list[t.listFlag].filename=e.name}},model:{value:t.showUpdateName,callback:function(e){t.showUpdateName=e},expression:"showUpdateName"}})],1)},n=[],a=(i("b680"),i("1276"),i("ddb0"),i("5530")),r=i("7018"),o=i("5880"),l=i("9393"),c=i("ed08"),h=i("365c"),d=i("2a4a"),u=i("186c"),p=i("4337"),f={components:{Pallet:r["a"],light:d["default"],videoMenu:u["default"],updateName:p["default"]},props:["height","visible","menu"],mixins:[l["a"]],data(){return{lightPowerValue:17,lightHeightValue:2.5,shadowValue:10,lightPowerUnit:"%",lightHeightUnit:"m",shadowUnit:"°",tmpTaskId:"",showUpdateName:!1,tempId:0,tempName:"",tpLoading:!1,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},HEIGHT:this.height,fileList:[],renderList:[],renderRotates:[{label:"前右",img:i("2e00"),imgb:i("bf7b"),name:"rotate_FR",position:{x:9.16,y:1.98,z:16.66},over:!1},{label:"正前",img:i("3a17"),imgb:i("68ea"),name:"rotate_F",position:{x:0,y:.33,z:20.08},over:!1},{label:"前左",img:i("ee4f"),imgb:i("4d67"),name:"rotate_FL",position:{x:-9.16,y:1.98,z:16.66},over:!1},{label:"顶右",img:i("41f7"),imgb:i("0ce6"),name:"rotate_TR",position:{x:8.82,y:12.79,z:10.97},over:!1},{label:"正顶",img:i("b8f0"),imgb:i("478b"),name:"rotate_T",position:{x:0,y:14.23,z:4},over:!1},{label:"顶左",img:i("a9d4"),imgb:i("c0ae"),name:"rotate_TL",position:{x:-8.82,y:12.79,z:10.97},over:!1}],renderRotateFlag:-1,bgFlag:1,background:"",color:"rgba(248,248,248,1)",query:{currentPage:1,pageSize:10,count:0},list:[],bgList:[],bgcount:0,bgQuery:{is_show:1,pageSize:10,currentPage:1,type:"bg"},listFlag:-1,tpQuery:{current:1,pageSize:7,publish_type:"official",template_type:"position"},tpList:[],tpList2:[],tpQuery2:{current:1,pageSize:10,publish_type:"my",template_type:"position"},tpcount:0,tpcount2:0,spinning:!1,progressTimer:null,reduceTimer:null,renderTime:4e3}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(o["mapState"])("profile",["user"])),Object(o["mapGetters"])("profile",["isVip"])),Object(o["mapGetters"])("render",["renderType","videoList","videoCurrent","page"])),Object(o["mapState"])("editor-v2",["project_data","knife_data","isCup","scale","is_outside","last_saved_local_history_ts","element_craft_list"])),{},{crafts(){return this.element_craft_list},isInside(){return!this.is_outside}}),watch:{height(t){this.HEIGHT=t},visible(t){t&&"image"===this.renderType?this.doIntervals():(this.clearIntervals(),this.$store.dispatch("render/fetchVideoList",{type:!1,project_id:this.project_data.id}))},renderType(t){"video"===t?(this.$store.dispatch("render/fetchVideoList",{type:!1,project_id:this.project_data.id}),this.clearIntervals()):this.doIntervals()}},beforeDestroy(){this.clearIntervals()},mounted(){"video"===this.renderType?(this.$store.dispatch("render/fetchVideoList",{type:!1,project_id:this.project_data.id}),this.clearIntervals()):this.doIntervals(),this.getBgList(),this.getList(),this.getTempMode(!1,""),this.getTempMode(!1,"2")},methods:{thumbImg:c["F"],delTpMode(t){this.$confirm({title:"删除后数据无法恢复，是否要继续删除?",okText:"删除",okType:"danger",cancelText:"取消",centered:!0,zIndex:4005,onOk:()=>{Object(h["delRenderTemp"])({status:0,template_id:t}).then(t=>{200===t.code&&(this.$message.success("删除成功"),this.getTempMode(!1,"2"))})}})},getTempMode(t,e){t&&this["tpcount"+e]>0&&this["tpcount"+e]<=this["tpList"+e].length||(t?this["tpQuery"+e].current+=1:this["tpQuery"+e].current=1,Object(h["getRenderTemp"])(this["tpQuery"+e]).then(i=>{200==i.code&&(this["tpList"+e]=t?this["tpList"+e].concat(i.data):i.data,this["tpcount"+e]=i.total)}))},chooseImage(t){this.background=t,this.$emit("upload-img",{transparent:!1,bg:"https:"+t})},getBgList(t){this.bgcount>0&&this.bgcount<=this.bgList.length||(t?this.bgQuery.currentPage+=1:this.bgQuery.currentPage=1,this.$api.material.getRenderbg(this.bgQuery).then(e=>{0===e.errno&&(this.bgList=t?this.bgList.concat(e.data.data):e.data.data,this.bgcount=e.data.count)}))},positionChange(t,e){this.position[e]=t,this.$emit("position-change",this.position),this.$emit("attch-history","positionChange")},doIntervals(){this.clearIntervals(),this.reduceTimer=setInterval(()=>{this.getProgress()},2e3)},clearIntervals(){clearInterval(this.progressTimer),clearInterval(this.reduceTimer)},setRatio(t,e=!0){const i=t.split(":");let s=0;for(const n in this.ratios)this.ratios[n].w==i[0]&&(s=n);this.ratioClick(s,e)},mouseOver(t){this.renderRotates[t].over=!0},mouseOut(t){this.renderRotates[t].over=!1},bgFlagChange(t){if(this.bgFlag==t)return;this.bgFlag=t;let e="",i=!1;0===t?(i=!0,e=this.color):e=1===t?this.color:this.background,e&&this.$emit("upload-img",{transparent:i,bg:e}),this.$emit("attch-history","bgFlagChange")},delBackground(){this.background="",this.$emit("upload-img",{transparent:!1,bg:this.color})},colorConfirm(t){this.color=t.rgba,this.$emit("upload-img",{transparent:!1,bg:t.rgba}),this.$emit("attch-history","colorConfirm")},getProgress(){this.$api.material.renderprogress({type:1,project_id:this.project_data.id,now:(new Date).getTime()}).then(t=>{0===t.errno&&(this.renderList.length>0&&t.data.length!==this.renderList.length&&this.getList(),t.data.map(t=>{0===t.render_status?t.status="wait":1===t.render_status&&(t.status="rendering"),t.progress=parseInt((100*t.progress).toFixed(0)),t.progress<0&&(t.progress=0),t.progress>100&&(t.progress=100)}),this.renderList=t.data,this.$emit("render-count",this.renderList.length),this.$emit("render-list",this.renderList))})},delImage(t){this.$confirm({title:"删除后数据无法恢复，是否要继续删除?",okText:"删除",okType:"danger",cancelText:"取消",centered:!0,zIndex:4005,onOk:()=>{"image"===this.renderType?this.$api.project.delImage({id:this.list[t].id}).then(e=>{0===e.errno&&(this.$message.success(e.errmsg),this.list.splice(t,1),this.listFlag>=t&&t>0&&this.list.length>0&&(this.listFlag=t-1),0===this.list.length&&(this.listFlag=-1),this.emitList(),this.emitPreview())}):Object(h["taskDelete"])({task_id:this.videoList[t].id}).then(t=>{200===t.code&&(this.$message.success("视频已删除"),this.$store.dispatch("render/fetchVideoList",{type:!1,project_id:this.project_data.id}))})}})},handleReachBottom(t){this.query.count>this.list.length&&this.getList(1)},doAddTpMode(){Object(h["addRenderTemp"])({project_image_id:this.tmpTaskId,template_type:"position",publish_type:"my"}).then(t=>{200==t.code&&(this.tmpTaskId="",this.getTempMode(!1,"2"))})},getList(t){t?this.query.currentPage+=1:this.query.currentPage=1,this.spinning=!0,this.$api.project.renderImages({project_id:this.project_data.id,currentPage:this.query.currentPage,pageSize:this.query.pageSize}).then(e=>{if(this.spinning=!1,e){this.query.count=e.data.count;for(const t of e.data.data){t.id==this.tmpTaskId&&this.doAddTpMode(),t.updateTime=this.$formatDate(t.update_time,"yyyy-MM-dd hh:mm:ss");const e=t.size.split("*"),i=e[0]/e[1];t.size.indexOf("1024")>-1||t.size.indexOf("768")>-1?t.clear_text="1K标清":t.size.indexOf("1920")>-1||t.size.indexOf("1080")>-1||t.size.indexOf("1200")>-1?t.clear_text="2K高清":t.size.indexOf("1440")>-1||t.size.indexOf("3200")>-1?t.clear_text="3K超清":t.size.indexOf("3840")>-1||t.size.indexOf("4000")>-1?t.clear_text="4K超高清":t.clear_text="1K标清",t.height=216/i}this.list=t?this.list.concat(e.data.data):e.data.data,this.emitList(),this.list.length>0&&-1===this.listFlag&&!t&&(this.listFlag=0,this.emitPreview())}})},emitList(){this.$emit("list",{list:this.list,count:this.query.count})},emitPreview(){this.$emit("preview",this.listFlag)},setPosition(t,e,i){this.position={x:t,y:e,z:i}},setRotation(t,e,i){this.rotation={x:t,y:e,z:i}},uploadChange(t){this.fileList=[];const e=new FileReader,i=t.file.name.substring(t.file.name.lastIndexOf(".")+1,t.file.name.length);if(t.file){e.readAsDataURL(t.file);e.onload=()=>{this.background=e.result,this.$emit("upload-img",{transparent:!1,bg:e.result,suffix:i})}}},renderRotateClick(t){this.renderRotateFlag=t,this.position.x=this.renderRotates[t].position.x,this.position.y=this.renderRotates[t].position.y,this.position.z=this.renderRotates[t].position.z,this.$emit("position-change",this.position),this.$emit("attch-history")},getRatio(){return this.ratios[this.ratioIndex]}}},m=f,g=(i("4277"),i("2877")),v=Object(g["a"])(m,s,n,!1,null,null,null);e["default"]=v.exports},"2ebb":function(t,e,i){"use strict";i.r(e);var s=i("750b");i("c978");e["default"]=Object(s["b"])({props:{title:{type:String,default:""},help:{type:Object,default:null}},setup(t,e){return()=>Object(s["c"])("div",{class:"field flex item-center"},[Object(s["c"])("div",{class:{title:!0,"mr-16":null===t.help,"mr-4":null!==t.help}},[t.help?Object(s["c"])("div",{class:{title:!0,"mr-16":null===t.help,"mr-4":null!==t.help}},[t.title,t.help?Object(s["c"])("a-tooltip",[Object(s["c"])("a",{style:{display:"inline-block"},attrs:{target:"_blank",href:t.help.link}},[Object(s["c"])("a-icon",{attrs:{type:"question-circle",theme:"filled"}})]),Object(s["c"])("template",{slot:"title"},[t.help.text])]):""]):t.title]),Object.keys(e.slots).map(t=>e.slots[t]())])}})},"2f01":function(t,e,i){t.exports=i.p+"editor-assets/img/e3-active.041a148d.svg"},"2fbb":function(t,e,i){t.exports=i.p+"editor-assets/img/account.555c3760.svg"},3:function(t,e){},3038:function(t,e,i){"use strict";var s=i("a6f8"),n=i.n(s);n.a},3039:function(t,e,i){t.exports=i.p+"editor-assets/img/rotate-d.5a724723.svg"},3041:function(t,e,i){var s=i("e1fc"),n=i("0da8"),a=i("76a5"),r=i("d9fc"),o=i("c7a2"),l=i("ae69"),c=i("cb11"),h=i("cbe5"),d=i("87b1"),u=i("d498"),p=i("48a9"),f=i("2b61"),m=i("1687"),g=i("342d"),v=g.createFromString,b=i("6d8b"),y=b.isString,_=b.extend,x=b.defaults,w=b.trim,C=b.each,k=/[\s,]+/;function S(t){if(y(t)){var e=new DOMParser;t=e.parseFromString(t,"text/xml")}9===t.nodeType&&(t=t.firstChild);while("svg"!==t.nodeName.toLowerCase()||1!==t.nodeType)t=t.nextSibling;return t}function A(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}A.prototype.parse=function(t,e){e=e||{};var i=S(t);if(!i)throw new Error("Illegal svg");var n=new s;this._root=n;var a=i.getAttribute("viewBox")||"",r=parseFloat(i.getAttribute("width")||e.width),l=parseFloat(i.getAttribute("height")||e.height);isNaN(r)&&(r=null),isNaN(l)&&(l=null),D(i,n,null,!0);var c,h,d=i.firstChild;while(d)this._parseNode(d,n),d=d.nextSibling;if(a){var u=w(a).split(k);u.length>=4&&(c={x:parseFloat(u[0]||0),y:parseFloat(u[1]||0),width:parseFloat(u[2]),height:parseFloat(u[3])})}if(c&&null!=r&&null!=l&&(h=F(c,r,l),!e.ignoreViewBox)){var p=n;n=new s,n.add(p),p.scale=h.scale.slice(),p.position=h.position.slice()}return e.ignoreRootClip||null==r||null==l||n.setClipPath(new o({shape:{x:0,y:0,width:r,height:l}})),{root:n,width:r,height:l,viewBoxRect:c,viewBoxTransform:h}},A.prototype._parseNode=function(t,e){var i,s=t.nodeName.toLowerCase();if("defs"===s?this._isDefine=!0:"text"===s&&(this._isText=!0),this._isDefine){var n=j[s];if(n){var a=n.call(this,t),r=t.getAttribute("id");r&&(this._defs[r]=a)}}else{n=O[s];n&&(i=n.call(this,t,e),e.add(i))}var o=t.firstChild;while(o)1===o.nodeType&&this._parseNode(o,i),3===o.nodeType&&this._isText&&this._parseText(o,i),o=o.nextSibling;"defs"===s?this._isDefine=!1:"text"===s&&(this._isText=!1)},A.prototype._parseText=function(t,e){if(1===t.nodeType){var i=t.getAttribute("dx")||0,s=t.getAttribute("dy")||0;this._textX+=parseFloat(i),this._textY+=parseFloat(s)}var n=new a({style:{text:t.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});I(e,n),D(t,n,this._defs);var r=n.style.fontSize;r&&r<9&&(n.style.fontSize=9,n.scale=n.scale||[1,1],n.scale[0]*=r/9,n.scale[1]*=r/9);var o=n.getBoundingRect();return this._textX+=o.width,e.add(n),n};var O={g:function(t,e){var i=new s;return I(e,i),D(t,i,this._defs),i},rect:function(t,e){var i=new o;return I(e,i),D(t,i,this._defs),i.setShape({x:parseFloat(t.getAttribute("x")||0),y:parseFloat(t.getAttribute("y")||0),width:parseFloat(t.getAttribute("width")||0),height:parseFloat(t.getAttribute("height")||0)}),i},circle:function(t,e){var i=new r;return I(e,i),D(t,i,this._defs),i.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),r:parseFloat(t.getAttribute("r")||0)}),i},line:function(t,e){var i=new c;return I(e,i),D(t,i,this._defs),i.setShape({x1:parseFloat(t.getAttribute("x1")||0),y1:parseFloat(t.getAttribute("y1")||0),x2:parseFloat(t.getAttribute("x2")||0),y2:parseFloat(t.getAttribute("y2")||0)}),i},ellipse:function(t,e){var i=new l;return I(e,i),D(t,i,this._defs),i.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),rx:parseFloat(t.getAttribute("rx")||0),ry:parseFloat(t.getAttribute("ry")||0)}),i},polygon:function(t,e){var i=t.getAttribute("points");i&&(i=T(i));var s=new d({shape:{points:i||[]}});return I(e,s),D(t,s,this._defs),s},polyline:function(t,e){var i=new h;I(e,i),D(t,i,this._defs);var s=t.getAttribute("points");s&&(s=T(s));var n=new u({shape:{points:s||[]}});return n},image:function(t,e){var i=new n;return I(e,i),D(t,i,this._defs),i.setStyle({image:t.getAttribute("xlink:href"),x:t.getAttribute("x"),y:t.getAttribute("y"),width:t.getAttribute("width"),height:t.getAttribute("height")}),i},text:function(t,e){var i=t.getAttribute("x")||0,n=t.getAttribute("y")||0,a=t.getAttribute("dx")||0,r=t.getAttribute("dy")||0;this._textX=parseFloat(i)+parseFloat(a),this._textY=parseFloat(n)+parseFloat(r);var o=new s;return I(e,o),D(t,o,this._defs),o},tspan:function(t,e){var i=t.getAttribute("x"),n=t.getAttribute("y");null!=i&&(this._textX=parseFloat(i)),null!=n&&(this._textY=parseFloat(n));var a=t.getAttribute("dx")||0,r=t.getAttribute("dy")||0,o=new s;return I(e,o),D(t,o,this._defs),this._textX+=a,this._textY+=r,o},path:function(t,e){var i=t.getAttribute("d")||"",s=v(i);return I(e,s),D(t,s,this._defs),s}},j={lineargradient:function(t){var e=parseInt(t.getAttribute("x1")||0,10),i=parseInt(t.getAttribute("y1")||0,10),s=parseInt(t.getAttribute("x2")||10,10),n=parseInt(t.getAttribute("y2")||0,10),a=new p(e,i,s,n);return M(t,a),a},radialgradient:function(t){}};function M(t,e){var i=t.firstChild;while(i){if(1===i.nodeType){var s=i.getAttribute("offset");s=s.indexOf("%")>0?parseInt(s,10)/100:s?parseFloat(s):0;var n=i.getAttribute("stop-color")||"#000000";e.addColorStop(s,n)}i=i.nextSibling}}function I(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),x(e.__inheritedStyle,t.__inheritedStyle))}function T(t){for(var e=w(t).split(k),i=[],s=0;s<e.length;s+=2){var n=parseFloat(e[s]),a=parseFloat(e[s+1]);i.push([n,a])}return i}var E={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function D(t,e,i,s){var n=e.__inheritedStyle||{},a="text"===e.type;if(1===t.nodeType&&(z(t,e),_(n,B(t)),!s))for(var r in E)if(E.hasOwnProperty(r)){var o=t.getAttribute(r);null!=o&&(n[E[r]]=o)}var l=a?"textFill":"fill",c=a?"textStroke":"stroke";e.style=e.style||new f;var h=e.style;null!=n.fill&&h.set(l,P(n.fill,i)),null!=n.stroke&&h.set(c,P(n.stroke,i)),C(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],(function(t){var e="lineWidth"===t&&a?"textStrokeWidth":t;null!=n[t]&&h.set(e,parseFloat(n[t]))})),n.textBaseline&&"auto"!==n.textBaseline||(n.textBaseline="alphabetic"),"alphabetic"===n.textBaseline&&(n.textBaseline="bottom"),"start"===n.textAlign&&(n.textAlign="left"),"end"===n.textAlign&&(n.textAlign="right"),C(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],(function(t){null!=n[t]&&h.set(t,n[t])})),n.lineDash&&(e.style.lineDash=w(n.lineDash).split(k)),h[c]&&"none"!==h[c]&&(e[c]=!0),e.__inheritedStyle=n}var L=/url\(\s*#(.*?)\)/;function P(t,e){var i=e&&t&&t.match(L);if(i){var s=w(i[1]),n=e[s];return n}return t}var R=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g;function z(t,e){var i=t.getAttribute("transform");if(i){i=i.replace(/,/g," ");var s=null,n=[];i.replace(R,(function(t,e,i){n.push(e,i)}));for(var a=n.length-1;a>0;a-=2){var r=n[a],o=n[a-1];switch(s=s||m.create(),o){case"translate":r=w(r).split(k),m.translate(s,s,[parseFloat(r[0]),parseFloat(r[1]||0)]);break;case"scale":r=w(r).split(k),m.scale(s,s,[parseFloat(r[0]),parseFloat(r[1]||r[0])]);break;case"rotate":r=w(r).split(k),m.rotate(s,s,parseFloat(r[0]));break;case"skew":r=w(r).split(k);break;case"matrix":r=w(r).split(k);s[0]=parseFloat(r[0]),s[1]=parseFloat(r[1]),s[2]=parseFloat(r[2]),s[3]=parseFloat(r[3]),s[4]=parseFloat(r[4]),s[5]=parseFloat(r[5]);break}}e.setLocalTransform(s)}}var N=/([^\s:;]+)\s*:\s*([^:;]+)/g;function B(t){var e=t.getAttribute("style"),i={};if(!e)return i;var s,n={};N.lastIndex=0;while(null!=(s=N.exec(e)))n[s[1]]=s[2];for(var a in E)E.hasOwnProperty(a)&&null!=n[a]&&(i[E[a]]=n[a]);return i}function F(t,e,i){var s=e/t.width,n=i/t.height,a=Math.min(s,n),r=[a,a],o=[-(t.x+t.width/2)*a+e/2,-(t.y+t.height/2)*a+i/2];return{scale:r,position:o}}function $(t,e){var i=new A;return i.parse(t,e)}e.parseXML=S,e.makeViewBoxTransform=F,e.parseSVG=$},3059:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.material_list.length?i("section",{staticClass:"for-box-wrap"},[i("div",{staticClass:"flex flex-between mb-10"},[i("div",{staticClass:"title"},[t._v(" 尺寸 "),i("a-tooltip",{attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"title"},slot:"title"},[t._v("尺寸说明")]),i("a",{attrs:{target:"_blank",href:"https://help.baoxiaohe.com/support/archives/683/"}},[i("i",{staticClass:"iconfont c-primary f-20 mt-2",staticStyle:{position:"relative",top:"2px"}},[t._v("")])])])],1),i("a-dropdown",{attrs:{trigger:["click"]},on:{visibleChange:t.onDropdownVisibleChange}},[i("span",{staticClass:"size-type-title"},[t._v(" "+t._s(t.size_type_title)+" "),t.dropdownExpanded?i("a-icon",{staticClass:"icon pl-4 direction-icon",attrs:{type:"caret-up"}}):i("a-icon",{staticClass:"icon pl-4 direction-icon",attrs:{type:"caret-down"}})],1),i("a-menu",{attrs:{slot:"overlay"},on:{click:t.onChangeSizeType},slot:"overlay"},t._l(t.SIZE_TYPES,(function(e){return i("a-menu-item",{key:e.key},[t._v(" "+t._s(e.value)+" ")])})),1)],1)],1),i("div",[t._l(t.kwh_inputs,(function(e,s){return[e.disabled?i("InputNumber",{key:s,staticClass:"mb-4",attrs:{disabled:!0,suffix:e.title,value:t.form[e.prop],unit:"mm"}}):i("InputNumber",{key:s,staticClass:"mb-4",attrs:{min:e.min,max:e.max,suffix:e.title,value:t.form[e.prop],unit:"mm",placeholder:"请输入"+e.title,"special-id":e.prop+"-remark"},on:{confirm:function(i){t.kwh_input_confirm(i,e)},blur:t.kwh_input_blur,focus:function(i){return t.kwh_input_focus(e.prop)}}})]}))],2),i("div",{staticClass:"line my-24"}),i("div",{staticClass:"mb-20"},[i("div",{staticClass:"flex flex-between my-10"},[i("span",{staticClass:"title"},[t._v(" 厚度 ")]),i("span",{class:"thickness-warning "+(t.thicknessError?"thickness-error":"")},[t._v(" ("+t._s(t.size_thickness_range.minThickness)+"mm~"+t._s(t.size_thickness_range.maxThickness)+"mm) ")])]),i("InputNumberWithControl",{staticClass:"thickness-input mt-16 w100p",attrs:{precise:2,min:t.size_thickness_range.minThickness,max:t.size_thickness_range.maxThickness,"outer-number":parseFloat(t.form.thickness||0)},on:{error:t.onThicknessError,change:t.onThicknessChange}})],1),i("div",{staticClass:"title"},[t._v(" 材质 "),i("a-tooltip",{staticClass:"c-primary",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"title"},slot:"title"},[t._v("材质说明")]),i("a",{staticClass:"relative t-2",attrs:{target:"_blank",href:"https://help.baoxiaohe.com/archives/421/"}},[i("i",{staticClass:"iconfont f-20"},[t._v("")])])])],1),i("nested-material-select",{staticClass:"science-input mb-20",staticStyle:{width:"100%"},attrs:{materials:t.available_material_list,"current-material-id":t.form.science_id},on:{chooseMaterial:t.onChooseScience}}),i("div",{staticClass:"line my-24"}),i("a-button",{staticClass:"mb-10",attrs:{type:"primary",block:"",disabled:!t.formOk},on:{click:t.onSubmit}},[t._v("确认调整")]),i("div",{staticClass:"c-aaa f-12"},[t._v("* 为保证设计合理性，尺寸、厚度与材质将互相影响")])],1):t._e()},n=[],a=(i("2532"),i("ddb0"),i("5530")),r=i("5880"),o=i("d1cf"),l=i("6116"),c=i("ed08"),h=i("4fe6"),d=i("2699"),u=i("8067"),p=i("b21f"),f={components:{NestedMaterialSelect:d["default"],InputNumberWithControl:u["default"],InputNumber:p["default"]},data(){return{loading:!1,thicknessError:!1,dropdownExpanded:!1,size_thickness_range:{minThickness:.1,maxThickness:10},form:{size_type:"id",length:0,width:0,height:0,thickness:0,inless:0,outless:0,science_id:0}}},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["project_data","knife_data","material_list","project_size_limits"])),{},{SIZE_TYPES(){return[{key:"id",value:"内尺寸"},{key:"ed",value:"外尺寸"},{key:"dm",value:"制造尺寸"}]},size_type_title(){const{size_type:t}=this.form;if(!t)return"内尺寸";const e=this.SIZE_TYPES.find(e=>e.key===t);return e&&e.value},INSERT_SIZE(){return[{title:"长",prop:"length",suffix:"L"},{title:"宽",prop:"width",suffix:"W"},{title:"高",prop:"height",suffix:"H"}]},available_material_list(){const t=this.material_list;if(!t||0===t.length)return[];const{minThickness:e,maxThickness:i}=this.size_thickness_range;function s(t,e,i){return t.min_thickness>i||t.max_thickness<e}return this.material_list.map(t=>Object.assign({},t,{key:t.id,value:t.name,science_image:t.image,image:Object(l["C"])(t.image,64,64),disabled:s(t,e,i)}))},formOk(){const{form:t}=this,e=this.knife_data.size.like||{},i=Object.keys(e).map(t=>this.INSERT_SIZE.find(e=>e.suffix===t).prop);for(const s of Object.keys(t))if(t[s]&&1!==t[s]&&!i.includes(s)&&!t[s])return!1;return!0},currentScience(){const{science_id:t}=this.form;return t&&this.available_material_list.find(e=>e.key===t)||null},kwh_limits(){const{lengthLimit:t,widthLimit:e,heightLimit:i,defaultSize:s}=this.project_size_limits,{thickness:n,inless:a,outless:r}=this.form,l={length:{min:5,max:5e3},width:{min:5,max:5e3},height:{min:5,max:5e3}},h=new o["a"](t,e,i,s,this.knife_data);h.setDepths(Object(c["k"])(n),a,r);const d=h.getLimits("id");return d.l&&(l.length.min=parseInt(d.l[0]),l.length.max=parseInt(d.l[1])),d.w&&(l.width.min=parseInt(d.w[0]),l.width.max=parseInt(d.w[1])),d.h&&(l.height.min=parseInt(d.h[0]),l.height.max=parseInt(d.h[1])),l},kwh_inputs(){const t=[{title:"长",prop:"length",suffix:"L"},{title:"宽",prop:"width",suffix:"W"},{title:"高",prop:"height",suffix:"H"}],e=this.knife_data.size.like,i=this.form,s=t.map(s=>{if(e&&e[s.suffix]){const i=t.find(t=>t.suffix===e[s.suffix]);return{disabled:!0,title:s.title,prop:i.prop}}if(i[s.prop]&&1!==i[s.prop]){const t=this.kwh_limits[s.prop];return Object(a["a"])({title:s.title,prop:s.prop},t)}return null}).filter(t=>!!t);return s}}),mounted(){this.init_form_size(),this.ajaxThicknessRange()},methods:{kwh_input_confirm(t,e){const{form:i}=this,s=i[e.prop];s!==t&&(i[e.prop]=t,this.ajaxThicknessRange())},kwh_input_blur(){this.$store.commit("editor-v2/set_cur_axis_remark",null)},kwh_input_focus(t){this.$store.commit("editor-v2/set_cur_axis_remark",t)},onDropdownVisibleChange(t){this.dropdownExpanded=t},goBack(){this.$emit("close")},onThicknessChange(t){this.form.thickness=t,this.form.inless=Object(h["a"])(t),this.form.outless=Object(c["k"])(t-this.form.inless,2),this.reSelectScience()},reSelectScience(){this.currentScience&&(this.form.thickness<this.currentScience.min_thickness||this.form.thickness>this.currentScience.max_thickness)&&(this.form.science_id=null)},onThicknessError(){this.thicknessError=!0,setTimeout(()=>{this.thicknessError=!1},1e3)},onChooseScience(t){let e=t.thickness;null!=this.form.science_id&&(t.thickness<this.size_thickness_range.minThickness?e=this.size_thickness_range.minThickness:t.thickness>this.size_thickness_range.maxThickness&&(e=this.size_thickness_range.maxThickness),this.form.thickness=e),this.form.inless=Object(h["a"])(e),this.form.outless=this.form.thickness-this.form.inless,this.form.science_id=t.key},init_form_size(){const{size_type:t}=this.project_data,e={id:"size",ed:"outSize",dm:"knifeSize"},i=this.knife_data[e[t]];this.form=Object.assign(this.form,{size_type:t,width:i.W,length:i.L,height:i.H})},set_form_thickness(t,e){const{size_thickness_range:i}=this;t<=i.minThickness&&(t=i.minThickness),t>=i.maxThickness&&(t=i.maxThickness);const{currentScience:s}=this;s&&(t<s.min_thickness||t>s.max_thickness)&&(e=null);const n=Object(h["a"])(t),a=Object(c["k"])(t-Object(h["a"])(t),2);this.form=Object.assign(this.form,{thickness:t,inless:n,outless:a,science_id:e})},onChangeSizeType({key:t}){this.form.size_type=t,this.dropdownExpanded=!1},ajaxThicknessRange(){const{cate_id:t,thickness:e,science_id:i}=this.project_data,{height:s,length:n,width:a}=this.form;this.$http.get("/api/v2/modes/category/cal",{cate_id:t,height:s,length:n,width:a}).then(t=>{const{minThickness:s,maxThickness:n}=t.data;this.size_thickness_range={minThickness:s,maxThickness:n},this.set_form_thickness(e,i)})},onSubmit(){const t=this.project_data.id;let{size_type:e,length:i,width:s,height:n,thickness:a,inless:r,outless:o,science_id:l}=this.form;s=Object(c["k"])(s,2),n=Object(c["k"])(n,2),i=Object(c["k"])(i,2),a=Object(c["k"])(a,2);const h={id:t,project_id:t,type:"knife",editType:"",size_type:e,length:i,width:s,height:n,thickness:a,inless:r,outless:o,science_id:l};this.$http.put("/api/v2/projects",h).then(t=>{if(200===t.code){const t=this.material_list.find(t=>t.id===l);Object.assign(this.project_data,{size_type:e,length:i,width:s,height:n,thickness:a,inless:r,outless:o,science_id:l,science_image:t.image,science_name:t.name,def_line_color:t.def_line_color}),this.$bus.$emit("design/refresh",{name:"knife_info"}),this.goBack()}else this.$message.error(t.msg)})}}},m=f,g=(i("d4f2"),i("2877")),v=Object(g["a"])(m,s,n,!1,null,"118c042c",null);e["default"]=v.exports},3091:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rendererd-header flex flex-between item-center"},[0===t.page?s("div",{staticClass:"flex flex-start item-center"},[t._m(0),s("div",{staticClass:"left-item ml-12 mr-12"},[t._v("|")]),t._m(1),s("a-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.openHistory,expression:"openHistory"}],attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",[t._v("撤回")])]),s("div",{staticClass:"recall-btn flex flex-center item-center pointer",staticStyle:{"margin-left":"50px"},on:{click:function(e){t.canIRollback&&t.$emit("rollback")}}},[t.canIRollback?s("img",{attrs:{src:i("33ba")}}):s("img",{attrs:{src:i("1b45")}})])],2),s("a-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.openHistory,expression:"openHistory"}],attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",[t._v("恢复")])]),s("div",{staticClass:"recall-btn flex flex-center item-center pointer",on:{click:function(e){t.canIRecovery&&t.$emit("recovery")}}},[t.canIRecovery?s("img",{attrs:{src:i("eb6b")}}):s("img",{attrs:{src:i("35ae")}})])],2),s("div",{staticClass:"rendered-btn-save"},[s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",[t._v(t._s(t.saveText||"保存"))])]),s("div",{staticClass:"recall-btn flex flex-center item-center pointer",style:{marginLeft:"12px"},on:{click:function(e){!t.updateLoading&&t.$emit("save")}}},[t.updateLoading?s("icon-saving",{attrs:{"view-box":"0 0 22 23",width:"24",height:"24"}}):s("icon-saved",{attrs:{"view-box":"0 0 22 23",width:"24",height:"24"}})],1)],2)],1),s("div",{staticClass:"fo-14 ml-12"})],1):t._e(),1===t.page?s("div",{staticClass:"flex flex-center item-center pointer",on:{click:function(e){return t.changePage(0)}}},[s("a-icon",{staticClass:"left-item ml-20",attrs:{type:"left"}}),s("div",{staticClass:"left-item ml-8"},[t._v("效果图册")]),s("div",{staticClass:"left-item ml-12 mr-12"},[t._v("|")]),s("div",{staticClass:"left-item bold",staticStyle:{color:"#000000"}},[t._v(t._s(t.project_data.project_name))])],1):t._e(),1===t.page&&"image"===t.renderType?s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],class:"pro-name-btn",style:{left:(t.WIDTH-256)/2-108+256+"px"},on:{click:function(e){return t.editName()}}},[t.editable?s("input",{staticClass:"pro-name-btn-input",attrs:{type:"text"},domProps:{value:t.tempName||"方案未命名"},on:{blur:t.tempNameChange}}):s("div",{staticClass:"fo-14 fo-black ell"},[t._v(t._s(t.tempName))])]):t._e(),s("div",{staticClass:"flex flex-end item-center"},[0===t.page?s("a",{staticClass:"flex flex-start item-center render-header-btn pointer mr-40",on:{click:t.openNew}},[s("div",{staticClass:"fo-14 ml-8"},[t._v("体验新版")])]):t._e(),"image"===t.renderType&&(t.renderList.length>0||t.list.length>0)||"video"===t.renderType&&t.videoList.length>0?s("a-popover",{attrs:{"overlay-class-name":"render-header-pic-tip",placement:"bottom"},model:{value:t.showpicPop,callback:function(e){t.showpicPop=e},expression:"showpicPop"}},[s("template",{slot:"content"},["image"===t.renderType?s("div",{staticClass:"pan flex flex-start flex-wrap"},[t._l(t.renderList,(function(e,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:i<6,expression:"index < 6"}],key:i,staticClass:"render-pic-item",style:{backgroundImage:"url("+t.thumbImg(e.image,140,80,100)+")"},on:{click:function(e){t.showpicPop=!1,t.changePage(1)}}},[s("div",{staticClass:"dot"}),s("div",{staticClass:"render-pic-item-panel flex flex-center item-center"},["wait"===e.status?s("div",{staticClass:"fo-white fo-14"},[t._v("相机预备中...")]):t._e(),"rendering"===e.status?s("div",{staticClass:"text-center"},[s("div",{staticClass:"fo-white fo-14"},[t._v("渲染中"+t._s(e.progress)+"%...")]),s("a-progress",{staticStyle:{width:"90px"},attrs:{percent:e.progress||0,"show-info":!1,size:"small","stroke-color":"#ff6634"}})],1):t._e()])])})),t._l(t.list,(function(e,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:i<6-t.renderList.length,expression:"index < 6 - renderList.length"}],key:i+"s",staticClass:"render-pic-item",style:{backgroundImage:"url("+t.thumbImg(e.image,140,80,100)+")"},on:{click:function(e){t.showpicPop=!1,t.changePage(1,i)}}},[e.is_read?t._e():s("div",{staticClass:"dot"}),s("div",{staticClass:"tag ml-8"},[t._v(t._s(e.clear_text||"1K标清"))]),s("div",{staticClass:"render-pic-item-hover"},[t._v("查看大图")])])}))],2):s("div",{staticClass:"pan flex flex-start flex-wrap"},t._l(t.videoList,(function(e,n){return s("div",{directives:[{name:"show",rawName:"v-show",value:n<6,expression:"index < 6"}],key:n,staticClass:"render-pic-item",style:{backgroundImage:"url("+e.videoShed.imagePath+")"},on:{click:function(e){t.showpicPop=!1,t.changePage(1,n)}}},[88!==e.status?s("div",{staticClass:"render-pic-item-panel flex flex-center item-center"},[s("div",{staticClass:"fo-white fo-14"},[t._v("正在拍摄中...")])]):s("div",{staticClass:"render-pic-item-panel flex flex-center item-center",staticStyle:{"background-color":"rgba(0, 0, 0, 0)"}},[s("div",{staticClass:"img-play flex flex-center item-center"},[s("img",{attrs:{src:i("57f3")}})])])])})),0),0===t.renderList.length&&0===t.list.length&&"image"===t.renderType||"video"===t.renderType&&0===t.videoList.length?s("div",{staticClass:"flex flex-center item-center"},[s("div",{staticClass:"text-center pb-20"},[s("img",{attrs:{src:i("e597"),width:"100px"}}),s("div",{staticClass:"fo-14 fo-gray mt-12"},[t._v("新增渲染图")])])]):t._e(),t.renderList.length+t.list.length>6&&"image"===t.renderType||t.renderType.length>6&&"video"===t.renderType?s("div",{staticClass:"flex flex-center item-center pb-16"},[s("div",{staticClass:"pointer",on:{click:function(e){t.showpicPop=!1,t.changePage(1)}}},[t._v(" 查看更多 "),s("a-icon",{staticStyle:{color:"#a8abb3"},attrs:{type:"right"}})],1)]):t._e()]),0===t.page?s("div",{class:["header-btn","flex","flex-center","item-center","render-header-btn","pointer",t.showAnimate?"header-btn-an":""],staticStyle:{"border-radius":"4px"},on:{click:function(e){t.showpicPop=!1,t.changePage(1)}}},["image"===t.renderType&&t.renderList.length>0?s("div",{staticClass:"badge-tag"},[s("div",{staticStyle:{transform:"scale(0.85, 0.85)","margin-top":"-2px"}},[t._v(" "+t._s(t.renderList.length)+" ")])]):t._e(),"video"===t.renderType&&t.badge>0?s("div",{staticClass:"badge-tag"},[s("div",{staticStyle:{transform:"scale(0.85, 0.85)","margin-top":"-2px"}},[t._v(t._s(t.badge))])]):t._e(),s("img",{staticStyle:{"margin-top":"2px"},attrs:{src:i("ca5c")}}),s("div",{staticClass:"fo-14 ml-8"},[t._v("效果图册")])]):t._e()],2):t._e(),0===t.page&&0===t.renderList.length&&0===t.list.length&&"image"===t.renderType||0===t.page&&"video"===t.renderType&&0===t.videoList.length?s("div",{class:["header-btn","flex","flex-center","item-center","render-header-btn","pointer",t.showAnimate?"header-btn-an":""],staticStyle:{"border-radius":"4px"},on:{click:function(e){t.showpicPop=!1,t.changePage(1)}}},["image"===t.renderType&&t.renderList.length>0?s("div",{staticClass:"badge-tag"},[s("div",{staticStyle:{transform:"scale(0.85, 0.85)","margin-top":"-2px"}},[t._v(t._s(t.renderList.length))])]):t._e(),"video"===t.renderType&&t.badge>0?s("div",{staticClass:"badge-tag"},[s("div",{staticStyle:{transform:"scale(0.85, 0.85)","margin-top":"-2px"}},[t._v(t._s(t.badge))])]):t._e(),s("img",{staticStyle:{"margin-top":"2px"},attrs:{src:i("ca5c")}}),s("div",{staticClass:"fo-14 ml-8"},[t._v("效果图册")])]):t._e(),0===t.page?s("a",{staticClass:"flex flex-start item-center render-header-btn pointer ml-40",attrs:{href:"https://help.baoxiaohe.com/support/category/render/",target:"_blank"}},[s("img",{staticStyle:{"margin-top":"2p x"},attrs:{src:i("c189")}}),s("div",{staticClass:"fo-14 ml-8"},[t._v("帮助")])]):t._e(),1===t.page?s("a",{staticClass:"flex flex-start item-center render-header-btn pointer ml-40",attrs:{href:"https://www.wenjuan.com/s/7fuAF3/",target:"_blank"}},[s("img",{staticStyle:{"margin-top":"2px"},attrs:{src:i("a8d7")}}),s("div",{staticClass:"fo-14 ml-8"},[t._v("问题反馈")])]):t._e(),s("div",{staticClass:"close-btn flex flex-center item-center ml-40 mr-20 pointer",on:{click:function(e){return t.doClose()}}},[s("img",{attrs:{src:i("0d1d")}})])],1),s("div",{staticClass:"type-tab flex flex-center"},[s("div",{staticClass:"tab-panel flex flex-between item-center"},[s("div",{class:["tab-item","image"===t.renderType?"tab-item--active":""],on:{click:function(e){return t.$store.dispatch("render/saveRenderType","image")}}},[t._v(" 图片 ")]),s("div",{class:["tab-item","video"===t.renderType?"tab-item--active":""],on:{click:function(e){return t.$store.dispatch("render/saveRenderType","video")}}},[t._v(" 视频 "),"video"!==t.renderType?s("img",{staticClass:"new-tip",attrs:{src:i("afa0")}}):t._e()])])])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ml-8"},[s("img",{attrs:{src:i("1ae4"),alt:""}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fo-14 bold flex flex-start item-start"},[t._v(" 渲染中心 "),i("div",{staticClass:"bxhtest",staticStyle:{transform:"scale(0.8, 0.8)",display:"inline-block",width:"30px"}},[t._v(" Beta ")])])}],a=(i("5319"),i("5530")),r=i("5880"),o=i("ed08"),l=i("a5d5"),c=i("89f0"),h={props:["width","open-history"],components:{IconSaved:l["a"],IconSaving:c["a"]},data(){return{WIDTH:this.width,editable:!1,tempName:"",tempId:"",updateLoading:!1,renderCount:0,shortcuts:["地板网格显示/关闭","坐标系显示/关闭","切换操作","复制","删除"],mac:["⌘ + g","⌘ + i","Tab","⌘ + C","Backspace"],win:["Ctrl + g","Ctrl + i","Tab","Ctrl + C","Backspace"],saveText:"",list:[],renderList:[],showpicPop:!1,showAnimate:!1}},watch:{width(t){this.WIDTH=t}},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["project_data","knife_data","isCup","scale","is_outside","last_saved_local_history_ts","element_craft_list"])),{},{crafts(){return this.element_craft_list},isInside(){return!this.is_outside},isMac(){navigator.userAgent.toLowerCase();const t=/macintosh|mac os x/i.test(navigator.userAgent);return t?"mac":"win"}},Object(r["mapGetters"])("render",["canIRollback","canIRecovery","renderType","videoList","badge","page"])),methods:{thumbImg:o["F"],openNew(){let t=window.location.origin;"8080"!==window.location.port&&"3100"!==window.location.port||(t=t.replace(window.location.port,"8000"));const e=`${t}/render/console?id=${this.$route.query.id}`;window.open(e,"box-render")},doResultAnimate(){this.showAnimate=!0,setTimeout(()=>{this.showAnimate=!1},1800)},doSave(t=!0,e=!0){let i="";e?(i+=t?"自动":"手动",i+="保存中..."):(i+=this.$formatDate(Date.now(),"hh:mm"),i+=" 已保存"),this.saveText=i},doClose(){0==this.page?this.$emit("close",!0):this.$store.dispatch("render/savePage",0)},changePage(t,e){"video"===this.renderType&&this.$store.dispatch("render/saveVideoCurrent",e),this.$store.dispatch("render/savePage",t),void 0!==e&&null!==e&&this.$emit("change-current",e)},editName(){this.editable||(this.editable=!0)},tempNameChange(t){this.editable=!1,this.tempName=t.target.value,this.$api.project.renderImageUpdate({id:this.tempId,filename:this.tempName}).then(t=>{0===t.errno&&(this.$message.success(t.errmsg),this.$emit("update-success",{id:this.tempId,name:this.tempName}))})}}},d=h,u=(i("cd53"),i("2877")),p=Object(u["a"])(d,s,n,!1,null,null,null);e["default"]=p.exports},"30a3":function(t,e,i){var s=i("6d8b"),n=i("607d"),a=n.Dispatcher,r=i("98b7"),o=i("06ad"),l=function(t){t=t||{},this.stage=t.stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,a.call(this)};l.prototype={constructor:l,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),i=0;i<e.length;i++)this.addClip(e[i])},removeClip:function(t){var e=s.indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)},removeAnimator:function(t){for(var e=t.getClips(),i=0;i<e.length;i++)this.removeClip(e[i]);t.animation=null},_update:function(){for(var t=(new Date).getTime()-this._pausedTime,e=t-this._time,i=this._clips,s=i.length,n=[],a=[],r=0;r<s;r++){var o=i[r],l=o.step(t,e);l&&(n.push(l),a.push(o))}for(r=0;r<s;)i[r]._needsRemove?(i[r]=i[s-1],i.pop(),s--):r++;s=n.length;for(r=0;r<s;r++)a[r].fire(n[r]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},_startLoop:function(){var t=this;function e(){t._running&&(r(e),!t._paused&&t._update())}this._running=!0,r(e)},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(t,e){e=e||{};var i=new o(t,e.loop,e.getter,e.setter);return this.addAnimator(i),i}},s.mixin(l,a);var c=l;t.exports=c},"30ee":function(t,e,i){"use strict";i.r(e);i("2532"),i("ddb0");var s=i("750b"),n=i("a9ff"),a=i("831f"),r=i("ee50"),o=i("365c"),l=i("3ccf"),c=i("d1cf"),h=i("ed08"),d=i("6116"),u=(i("6395"),i("4fe6"));const p="https://help.baoxiaohe.com/support/archives/421/",f="https://help.baoxiaohe.com/support/archives/683/",m=10,g=.1,v=[{key:"id",value:"内尺寸"},{key:"ed",value:"外尺寸"},{key:"dm",value:"制造尺寸"}];e["default"]=Object(s["b"])({props:{height:{type:Number,default:100}},setup(t,e){const i=e.vuex.mapActions(["increaseKnifeVersion"]),b=Object(s["i"])({thickness:null,science:null,size:1,size_type:"id",width:null,length:null,height:null,inless:0,outless:0}),[y,{loading:_}]=Object(l["b"])(o["updateAll"]),{loading:x,refetch:w}=Object(l["c"])(o["updateKnife"],{variables:{id:e.root.projectData.id||e.root.projectData.project_id,bleed:e.root.projectData.bleedline,export_type:"project"},update(t){e.root.knifeData=Object(h["f"])(t.data)}}),C=Object(s["i"])({}),k=Object(s["j"])(null),S=Object(s["j"])(!1),A=Object(s["j"])(!1),O=Object(s["a"])(()=>{const t=v.find(t=>t.key===b.size_type);return null===t||void 0===t?void 0:t.value}),j=t=>t.map(t=>~~t);Object(l["c"])(o["getCateInfo"],{variables:{project_id:e.route.query.id?e.route.query.id:e.route.query.workOuterId,type:e.route.query.id?"project":"work"},update(t){const{lengthLimit:i,widthLimit:s,heightLimit:n,defaultSize:a}=t;k.value=new c["a"](i,s,n,a,e.root.knifeData)}});const M=t=>t.map(t=>()=>e.root.projectData[t]),I=e.vuex.mapMutations("editor",["setCurrentAxiasRemark"]),T=e.vuex.mapState("property",["materialSciences"]),E=Object(s["a"])(()=>(T.materialSciences.value||[]).map(t=>({key:t.id,value:t.name,image:Object(d["C"])(t.image,64,64),science_image:t.image,can_set:t.can_set,thickness:t.thickness,inless:t.inless,outless:t.outless,group_name:t.group_name,def_line_color:t.def_line_color,min_thickness:t.min_thickness,max_thickness:t.max_thickness,disabled:N(t,R.value,z.value)}))),D=t=>t.map(t=>()=>b[t]),L=t=>{let i=e.root.knifeData.size;"ed"===e.root.projectData.size_type?i=e.root.knifeData.outSize:"dm"===e.root.projectData.size_type&&(i=e.root.knifeData.knifeSize),t.width=i.W,t.height=i.H,t.length=i.L};Object(s["k"])([...M(["width","height","length"]),...D(["inless","outless","thickness"]),()=>k.value],()=>{if(!k.value||!b.inless)return;k.value.setDepths(Object(h["k"])(b.thickness),b.inless,b.outless);const t=k.value.getLimits("id");C.length=j(t.l),C.width=j(t.w),C.height=j(t.h),S.value||(S.value=!0,e.root.$nextTick(()=>{L(b)}))},{lazy:!0});const P=()=>{const t=e.root.projectData;b.science=t.science_id,b.size_type=t.size_type||"id",b.thickness=t.thickness,b.inless=Object(u["a"])(t.thickness),b.outless=Object(h["k"])(t.thickness-Object(u["a"])(t.thickness),2)};Object(s["f"])(()=>{const t=e.vuex.mapActions("property",["fetchMaterialSciences"]);t.fetchMaterialSciences(),P(),L(b),B()});const R=Object(s["j"])(g),z=Object(s["j"])(m),N=(t,e,i)=>t.min_thickness>i||t.max_thickness<e,B=()=>{Object(o["getModeCal"])({width:b.width,height:b.height,length:b.length,cate_id:e.root.projectData.cate_id}).then(t=>{R.value=Number(t.data.minThickness),z.value=Number(t.data.maxThickness),b.thickness<=R.value&&(b.thickness=R.value),b.thickness>=z.value&&(b.thickness=z.value),F()})},F=()=>{H.value&&(b.thickness<H.value.min_thickness||b.thickness>H.value.max_thickness)&&(b.science=null)},$={functional:!0,render:t=>t("div",{class:"back-content text-pointer",on:{click:()=>{e.emit("close"),P()}}},[t("a-icon",{attrs:{type:"left",color:"rgba(0,0,0,.15)"}}),t("span",{class:"ml-4 fo-gray"},["返回"])])},U=Object(s["a"])(()=>{const t=e.root.knifeData.size.like||{},i=Object.keys(t).map(t=>o["INSERT_SIZE"].find(e=>e.suffix===t).prop);for(const e of Object.keys(b))if(!i.includes(e)&&!b[e])return!1;return!0}),H=Object(s["a"])(()=>{const t=E.value.find(t=>t.key===b.science)||null;return t}),V={functional:!0,render:t=>t("div",{class:"bottom-wrapper-container text-center "+(U.value?"active":""),on:{click:()=>{if(!U.value||_.value||x.value)return;const t=e.root.projectData,s=JSON.parse(JSON.stringify(b));let{width:n,height:a,length:r,thickness:o,size_type:l,inless:c,outless:d}=s;n=Object(h["k"])(n,2),a=Object(h["k"])(a,2),r=Object(h["k"])(r,2),o=Object(h["k"])(o,2),y({variables:{type:"knife",id:t.id,length:r,width:n,height:a,thickness:o,inless:c,outless:d,size_type:b.size_type,science_id:b.science},async update(){const t=JSON.parse(JSON.stringify(e.root.projectData));t.length=r,t.width=n,t.height=a,t.thickness=o,t.size_type=l,t.inless=c,t.outless=d,Object.assign(e.root.projectData,t);const s=E.value.find(t=>t.key===b.science);e.root.$set(e.root.projectData,"science_id",b.science),e.root.$set(e.root.projectData,"science_image",s.science_image),e.root.$set(e.root.projectData,"science_name",s.value),e.root.$set(e.root.projectData,"def_line_color",s.def_line_color),w({variables:{id:e.root.projectData.id,bleed:e.root.projectData.bleedline,export_type:"project"},update(t){e.root.knifeData=Object(h["f"])(t.data),i.increaseKnifeVersion()}}),await Object(h["D"])(500),e.emit("close")}})}}},[t("div",{class:"flex flex-center item-center"},[t("a-icon",{class:"mr-4",attrs:{type:"loading",color:"#fff"},directives:[{name:"show",value:_.value||x.value}]}),t("span",["确认调整"])])])},G=t=>{const i=e.root.knifeData.size.like,a=C[t.prop]||[5,5e3];if(i&&i[t.suffix]){const e=o["INSERT_SIZE"].find(e=>e.suffix===i[t.suffix]),a=o["INSERT_SIZE"].find(e=>e.suffix===t.suffix);return Object(s["c"])(n["default"],{attrs:{disabled:!0,suffix:a.title,value:b[e.prop],unit:"mm"},class:"mb-4"})}return b[t.prop]&&1!==b[t.prop]?Object(s["c"])(n["default"],{attrs:{max:a[1],min:a[0],unit:"mm",suffix:t.title,value:b[t.prop],placeholder:"请输入"+t.title,specialId:t.prop+"-remark",autoSelect:!0},class:"mb-4",on:{confirm:e=>{const i=b[t.prop];i!=e&&(b[t.prop]=e,B())},blur:()=>I.setCurrentAxiasRemark(null),focus:()=>I.setCurrentAxiasRemark(t.prop)}}):(b[t.prop]=1,"")};return()=>Object(s["c"])("div",{class:"editor-size-container",ref:"sizeRef",style:{height:t.height+"px",top:0}},[Object(s["c"])($),Object(s["c"])("scrollbar",{attrs:{maxHeight:t.height-40}},[Object(s["c"])("div",{class:"size-outview px-16"},[Object(s["c"])("div",{class:"mt-12 insert-container"},[Object(s["c"])("div",{class:"mb-16 flex items-center flex-between"},[Object(s["c"])("div",{class:"title"},["尺寸  ",Object(s["c"])("a-tooltip",[Object(s["c"])("a",{style:{display:"inline-block"},attrs:{target:"_blank",href:f}},[Object(s["c"])("a-icon",{class:"icon",attrs:{type:"question-circle"}})]),Object(s["c"])("template",{slot:"title"},["尺寸说明"])])]),Object(s["c"])("a-dropdown",{attrs:{trigger:["click"]},on:{visibleChange:t=>{A.value=t}}},[Object(s["c"])("span",{class:"text-pointer"},[O.value,A.value?Object(s["c"])("a-icon",{class:"icon pl-4 direction-icon",attrs:{type:"caret-up"}}):Object(s["c"])("a-icon",{class:"icon pl-4 direction-icon",attrs:{type:"caret-down"}})]),Object(s["c"])("a-menu",{slot:"overlay"},[v.map(t=>Object(s["c"])("a-menu-item",[Object(s["c"])("a",{on:{click:e=>{e.preventDefault(),b.size_type=t.key,A.value=!A.value}}},[t.value])]))])])]),o["INSERT_SIZE"].map(t=>G(t))]),Object(s["c"])("div",{class:"line my-24"}),Object(s["c"])("div",{class:"size-container"},[Object(s["c"])("div",{class:"flex flex-between"},[Object(s["c"])("div",{class:"title"},["厚度"]),Object(s["c"])("div",{class:"thickness-warning",ref:"thicknessRef"},["（",R.value,"mm~",z.value,"mm）"])]),Object(s["c"])(a["default"],{class:"thickness-input mt-16",attrs:{precise:2,min:R.value,max:z.value,outerNumber:parseFloat(b.thickness||0)},on:{error:()=>{e.refs.thicknessRef.classList.add("thickness-error"),setTimeout(()=>{e.refs.thicknessRef.classList.remove("thickness-error")},1e3)},change:t=>{b.thickness=t,b.inless=Object(u["a"])(t),b.outless=Object(h["k"])(t-b.inless,2),F()}}})]),Object(s["c"])("div",{class:"science-container mt-24"},[Object(s["c"])("div",{class:"title"},["材质  ",Object(s["c"])("a-tooltip",[Object(s["c"])("a",{style:{display:"inline-block"},attrs:{target:"_blank",href:p}},[Object(s["c"])("a-icon",{class:"icon",attrs:{type:"question-circle"}})]),Object(s["c"])("template",{slot:"title"},["材质说明"])])]),Object(s["c"])(r["default"],{class:"science-input",attrs:{materials:E.value,currentMaterialId:b.science},on:{chooseMaterial:t=>{let e=t.thickness;null!=b.science&&(t.thickness<R.value?e=R.value:t.thickness>z.value&&(e=z.value),b.thickness=e),b.inless=Object(u["a"])(e),b.outless=b.thickness-b.inless,b.science=t.key}}})]),Object(s["c"])("div",{class:"line my-20"}),Object(s["c"])("div",{class:"my-20"},[Object(s["c"])(V),Object(s["c"])("div",{class:"notice mt-10"},["* 为保证设计合理性，尺寸、厚度与材质将互相影响"])])])])])}})},3112:function(t,e,i){"use strict";i.r(e);i("e01a");var s=i("5a0c"),n=i.n(s);i("ca90");const a=18e5;e["default"]={name:"step-status",props:{status:{type:String,required:!0},current:{type:Number,required:!0},description:{type:String,default:""}},render(){const t=arguments[0];return t("div",{class:"StepStatus"},[t("div",[this.status&&t("span",{class:"ft-gray"},["订单状态: ",this.status]),t("a-steps",{attrs:{current:this.current,progressDot:({index:e,status:i})=>{const s="finish"===i;return t("div",{class:`dot ${this.current===e?"active":""} ${s?"":this.current>e?"disabled":""}`},[s?t("a-icon",{attrs:{type:"check"}}):e+1])}}},[t("a-step",{attrs:{title:"确认订单",description:""}}),t("a-step",{attrs:{title:"付款",description:1===this.current?t("span",{style:"color:rgba(0,0,0,0.45);"},[this.description||`请在\n                    ${n()(Date.now()+a).format("YYYY-MM-DD HH:mm:ss")} 前付款`]):""}}),t("a-step",{attrs:{title:"收货",description:2===this.current?this.description||"付款后1-3个工作日发货":""}})])]),this.status&&t("div",{class:"pt-32"},[t("a-divider")])])}}},3167:function(t,e,i){t.exports=i.p+"editor-assets/img/rotate.822daa13.svg"},3187:function(t,e,i){t.exports=i.p+"editor-assets/img/trash.32931076.svg"},"318a":function(t,e,i){"use strict";i.r(e);i("b680");var s=i("8bbf"),n=i.n(s),a=i("750b"),r=i("365c"),o=(i("0c053"),i("c64e")),l=i.n(o),c=i("0e9a"),h=i("054f");const d=i("2b3c");e["default"]=Object(a["b"])({props:{limitImgSize:{type:Number},limitCount:{type:Number},nowCount:{type:Number,default:0}},setup(t,e){Object(a["f"])(()=>{o.value=e.refs.aUploadRef||null,n.a.nextTick(()=>{o.value=e.refs.aUploadRef||null})}),Object(a["h"])(()=>{o.value=e.refs.aUploadRef||null,n.a.nextTick(()=>{o.value=e.refs.aUploadRef||null})});const i=r["UPLOAD_PATH"],s=Object(a["j"])([]),o=Object(a["j"])(null),u=Object(a["a"])(()=>!!s.value.length),p=e.vuex.mapState("profile",["accessToken"]);return Object(a["k"])(()=>u.value,()=>{u.value||e.emit("refresh")},{lazy:!0}),()=>Object(a["c"])("a-upload",{ref:"aUploadRef",attrs:{showUploadList:!1,name:"file",accept:".svg,.png,.jpg,.jpeg",multiple:!0,data:{type:"image"},action:i,headers:{Authentication:p.accessToken.value},beforeUpload:async i=>{if(t.nowCount>=t.limitCount)return e.root.$message.error("您的上传数量已达上限"),Promise.reject(!1);if("image/svg+xml"===i.type&&i.size>=512e3)return e.root.$message.error("SVG格式的图片不得大于500KB"),Promise.reject(!1);if(i.size>=t.limitImgSize)return e.root.$message.error(`此图片不得大于${(t.limitImgSize/1024/1024).toFixed(0)}MB`),Promise.reject(!1);if(Object(c["c"])(i)){let t=await Object(c["e"])(i);if(t=Object(c["f"])(t),!Object(c["d"])(t))return e.root.$confirm({title:"SVG中含有image等不合法标签，是否继续？",zIndex:4001,okText:"继续",onOk(){s.value.push(!0);const t=o.value,{customRequest:e}=t.$options.propsData;e({file:i})},onCancel(){},class:"test"}),Promise.reject(!1)}return s.value.push(!0),!0},customRequest:async t=>{let i=t.file.name.substring(t.file.name.lastIndexOf(".")+1,t.file.name.length);const n="user-materials";let a=l()()+"."+i,r=await h["a"].putFile(t.file,{xapi:n,rename:a,type:"image"});s.value.shift(),0!==r.errno&&(e.root.$message.error(r.errmsg),h["a"].removeStorage())}},on:{change:async t=>{"done"==t.file.status&&(s.value.shift(),0===t.file.response.errno||e.root.$message.error(t.file.response.errmsg))}}},[Object(a["c"])("div",{class:"upload-button"},[u.value?Object(a["c"])("a-icon",{attrs:{type:"loading",color:"#fff"}}):Object(a["c"])("img",{attrs:{src:d}}),Object(a["c"])("span",{class:"ml-8"},["上传图片"])])])}})},"31df":function(t,e,i){"use strict";i("ddb0");var s=i("5530"),n=i("5880"),a=i("b439"),r=i("87a0"),o=i("365c");e["a"]={computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(n["mapState"])("editor-v2",["scale","is_outside","project_data","knife_data","localHistory","show_axis_remark","high_lines"])),Object(n["mapGetters"])("profile",["isVip"])),Object(n["mapGetters"])("editor-v2",["curDesigns","design_data","background","face_background"])),methods:{handleShortcut(t){const e=t.action;t.designs||(t.designs=this.curDesigns);try{switch(e){case r["a"].COPY:this.handleCopyMultiple(t);break;case r["a"].COPY_AND_PASTE:this.handleCopyMultiple(t),this.handlePasteMultiple(t);break;case r["a"].CUT:this.handleCopyMultiple(t),this.handleDelMultiple(t);break;case r["a"].PASTE:this.handlePasteMultiple(t);break;case r["a"].DELETE:this.handleDelMultiple(t);break;case r["a"].LOCK:this.handleBatchLock(t,!0);break;case r["a"].UNLOCK:this.handleBatchLock(t,!1);break;case r["a"].TOP:this.handleMoveLayerToTop(t);break;case r["a"].DOWN:this.handleMoveLayerToBottom(t);break;case r["a"].MOVE_UP:this.handleMoveLayerUp(t);break;case r["a"].MOVE_DOWN:this.handleMoveLayerDown(t);break;case r["a"].ROTATE_X:this.handleBatchRotateX(t);break;case r["a"].ROTATE_Y:this.handleBatchRotateY(t);break;case r["a"].TEXT_ALIGN_LEFT:this.handleTextAlign(t,"left");break;case r["a"].TEXT_ALIGN_CENTER:this.handleTextAlign(t,"center");break;case r["a"].TEXT_ALIGN_RIGHT:this.handleTextAlign(t,"right");break;case r["a"].MOVE:this.handleKeyMove(t,t.event);break;case r["a"].SAVE:this.handleSave(t);break;case r["a"].SELECT_ALL:this.handleSelectAllDesigns(t);break;default:break}}catch(i){}},handleCopyMultiple(t){const{designs:e}=t,i=[];let s=e[0].style.left,n=e[0].style.top;for(const r of e){const t=Object(a["c"])(r);t.style.left+=2.5,t.style.top+=2.5,t.locked=!1,s>r.style.left&&(s=r.style.left),n>r.style.top&&(n=r.top),i.push(t)}return this.saveToClipboard({designs:i,minX:s,minY:n}),this},saveToClipboard({designs:t,minX:e,minY:i}){localStorage.setItem("clipboard",JSON.stringify({uuid:this.clipboardUUID,designs:t,minX:e,minY:i}))},handlePasteMultiple(t){const e=this.getFromClipboard();if(!e.designs)return void this.$bus.$emit("show-paste-modal");const i=e.designs;this.design_data.push(...i),this.localHistory.record(this.project_data),this.$store.commit("editor-v2/multiSelectDesigns",i.map(t=>t.uuid)),t&&t.followMouse||this.clearClipboard()},handleSelectAllDesigns(){this.design_data.forEach(t=>{t.locked||(t._selected=!0)})},handleBarcodeChange(t){const e=this.isInside?this.project_data.insideDesignData:this.project_data.designData,i=e.filter(e=>e.uuid===t.uuid)[0];i.codeMode=t.codeMode,i.value=t.value,this.$store.commit("editor/addToUuidTable",i.uuid)},handleQrcodeChange(t){const e=this.isInside?this.project_data.insideDesignData:this.project_data.designData,i=e.filter(e=>e.uuid===t.uuid)[0];i.codeType=t.codeType,i.codeValue=t.codeValue,i.value=t.value},handleDelMultiple(t){const{designs:e}=t;e.forEach(t=>{this.$store.commit("editor-v2/removeSingleDesign",t.uuid)})},handleRotateX(){const t=this[this.faceMaterial].filter(t=>t.uuid=this.targetDesign.uuid)[0];return t.style.rotateX=!t.style.rotateX,this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside),this},handleBatchRotateY(){for(const t in this.curDesigns)for(const e in this[this.faceMaterial])if(this.curDesigns[t].uuid===this[this.faceMaterial][e].uuid){const t=this[this.faceMaterial][e],i=!t.style.rotateY;this.$set(t.style,"rotateY",i)}return this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside),this},handleBatchRotateX(){for(const t in this.curDesigns)for(const e in this[this.faceMaterial])if(this.curDesigns[t].uuid===this[this.faceMaterial][e].uuid){const t=this[this.faceMaterial][e],i=!t.style.rotateX;this.$set(t.style,"rotateX",i)}return this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside),this},handleTextAlign(t){const e=this[this.faceMaterial].filter(t=>t.uuid===this.targetDesign.uuid)[0];return e.style.textAlign=t,this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside),this},handleBatchLock(t,e){const{designs:i}=t;i.forEach(t=>{t.locked=e})},handleMoveLayerToTop(t){this._handleMoveLayer(t,"toTop")},handleMoveLayerToBottom(t){this._handleMoveLayer(t,"toBottom")},handleMoveLayerUp(t){this._handleMoveLayer(t,"up")},handleMoveLayerDown(t){this._handleMoveLayer(t,"down")},_handleMoveLayer(t,e){const{designs:i}=t;if(1!==i.length)return;const{uuid:s}=i[0];switch(e){case"toTop":this.$store.commit("editor-v2/moveDesignLayerToTop",s);break;case"toBottom":this.$store.commit("editor-v2/moveDesignLayerToBottom",s);break;case"up":this.$store.commit("editor-v2/moveDesignLayerUp",s);break;case"down":this.$store.commit("editor-v2/moveDesignLayerDown",s);break;default:break}},handleKeyMove(t,e){const i=["ArrowUp","ArrowLeft","ArrowDown","ArrowRight"];if(-1!==["INPUT","TEXTAREA"].indexOf(e.target.tagName))return;if(-1!==["true","plaintext-only"].indexOf(e.target.contenteditable))return;let s=parseInt(this.project_data.rotate/90)%i.length;s<0&&(s+=4);let n=i.indexOf(e.key)+s;n%=i.length;const a=i[n];if(this.curDesigns&&this.curDesigns.length>1)return void this.$refs.groupControlRef.move(a);const r=t.designs[0];if(r&&!r.locked)switch(a){case"ArrowUp":r.style.top-=.5,r.y-=.5*o["DPI"];break;case"ArrowDown":r.style.top+=.5,r.y+=.5*o["DPI"];break;case"ArrowLeft":r.x-=.5*o["DPI"],r.style.left-=.5;break;case"ArrowRight":r.x+=.5*o["DPI"],r.style.left+=.5;break}},async handleSave(){"preview"===this.$route.query.type&&await this.$store.dispatch("saveForceCreateV2",{router:this.$router,knife_data:this.knife_data,project_data:this.project_data}),this.$store.dispatch("saveFullTemplateV2",{projectData:this.project_data,knifeData:this.knife_data,isAuto:!1})}}}},3214:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"render-light",style:{height:t.height+"px"}},[s("scrollbar",{attrs:{maxHeight:t.height+"px"}},[s("div",{staticClass:"p-20"},[s("div",{staticClass:"fo-14 pfow flex flex-start item-start"},[s("div",[t._v("快拍")]),s("a-tooltip",{attrs:{placement:"bottomLeft"}},[s("template",{slot:"title"},[s("span",[t._v("快拍：快速拍摄3D可折叠视频。")])]),s("div",{staticClass:"ml-4 mr-4"},[s("a-icon",{staticStyle:{color:"#FBB120"},attrs:{type:"question-circle"}})],1)],2)],1),s("div",{class:["cover-item flex flex-center item-center",-1===t.videoFlag?"cover-item--active":""],on:{click:function(e){return t.$store.dispatch("render/saveVideoFlag",-1)}}},[s("img",{attrs:{src:i("55eb"),width:"80px"}})]),s("div",{staticClass:"fo-14 pfow flex flex-start item-start mt-24"},[s("div",[t._v("棚拍")]),s("a-tooltip",{attrs:{placement:"bottomLeft"}},[s("template",{slot:"title"},[s("span",[t._v("棚拍：利用包小盒3D建模技术模拟搭建影棚场景进行渲染拍摄，效果逼真，时间较久。")])]),s("div",{staticClass:"ml-4 mr-4"},[s("a-icon",{staticStyle:{color:"#FBB120"},attrs:{type:"question-circle"}})],1)],2)],1),t._l(t.videos,(function(e,i){return s("div",{key:i,class:["cover-item flex flex-center item-center",t.videoFlag===i?"cover-item--active":""],style:{backgroundImage:"url("+e.imagePath+")"},on:{click:function(e){return t.changeVideo(i)}}},[s("div",{staticClass:"mask flex flex-center item-center fo-white fo-14"},[t._v("预览并拍摄")])])}))],2)])],1)},n=[],a=i("5530"),r=i("5880"),o={props:{height:{type:Number}},computed:Object(a["a"])({},Object(r["mapGetters"])("render",["videos","videoFlag"])),mounted(){this.shedList()},methods:{shedList(){this.$store.dispatch("render/fetchVideoPreview")},changeVideo(t){this.$store.dispatch("render/saveVideoFlag",t)}}},l=o,c=(i("501c5"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,"3a67f852",null);e["default"]=h.exports},3230:function(t,e,i){t.exports=i.p+"editor-assets/img/sun-a.f1d29865.svg"},"32ad":function(t,e,i){t.exports=i.p+"editor-assets/img/e2.1cdc5bd0.svg"},"32b8":function(t,e,i){t.exports=i.p+"editor-assets/img/d2.e07b326e.svg"},"330c":function(t,e,i){},3332:function(t,e,i){"use strict";var s=i("74c3"),n=i.n(s);n.a},3343:function(t,e,i){},"334a":function(t,e,i){e=t.exports=i("4250"),e.Stream=e,e.Readable=e,e.Writable=i("19ea"),e.Duplex=i("e666"),e.Transform=i("09dc"),e.PassThrough=i("0ae3"),e.finished=i("ee93"),e.pipeline=i("fbd5")},3350:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"video-prop p-20",style:{height:t.height+"px"}},[s("div",{staticClass:"fo-14 pfow "},[t._v("视频比例")]),s("div",{staticClass:"flex flex-start item-center mt-16 "},t._l(t.ratios,(function(e,i){return s("div",{key:i,class:" small-btn "+(i==t.ratioIndex?"bg-b-active":"bg-b-def"),on:{click:function(e){return t.ratioClick(i)}}},[t._v(" "+t._s(e.w)+":"+t._s(e.h)+" ")])})),0),s("div",{staticClass:"fo-14 pfow mt-24"},[t._v("清晰度")]),s("div",{staticClass:"mt-12"},t._l(t.claritys,(function(e,n){return s("div",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!item.hidden"}],key:n,class:" flex flex-between item-center long-btn "+(n===t.clarityIndex?"bg-b-active":"bg-b-def")+" "+(e.close?"bg-close":""),on:{click:function(e){return t.clarityClick(n)}}},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"fo-12 ml-12",staticStyle:{display:"block","white-space":"nowrap"}},[t._v(" "+t._s(e.label)+" ")]),e.vip&&!e.close?s("img",{staticClass:"ml-8",attrs:{src:i("0be3"),height:"14px",alt:""}}):t._e(),e.close?s("div",{staticClass:"wait-open"},[t._v("待开放")]):t._e()]),s("div",{staticClass:"fo-12 mr-12"},[t._v(t._s(e.w)+"*"+t._s(e.h))])])})),0)])},n=[],a=i("5530"),r=i("9393"),o=i("5880"),l={props:{height:{type:Number}},mixins:[r["a"]],computed:Object(a["a"])({},Object(o["mapGetters"])("profile",["isVip"])),data(){return{ratios:[{w:16,h:9},{w:9,h:16},{w:4,h:3},{w:1,h:1}],ratioIndex:0,claritys:[{label:"720P标清",w:1280,h:720},{label:"1080P高清",w:1920,h:1080,vip:!0}],clarityIndex:0}},mounted(){this.ratioClick(0)},methods:{ratioClick(t){switch(this.ratioIndex=t,this.ratios[this.ratioIndex].w){case 16:this.claritys[0].w=1280,this.claritys[0].h=720,this.claritys[1].w=1920,this.claritys[1].h=1080;break;case 9:this.claritys[0].w=720,this.claritys[0].h=1280,this.claritys[1].w=1080,this.claritys[1].h=1920;break;case 4:this.claritys[0].w=960,this.claritys[0].h=720,this.claritys[1].w=1440,this.claritys[1].h=1080;break;case 1:this.claritys[0].w=720,this.claritys[0].h=720,this.claritys[1].w=1080,this.claritys[1].h=1080;break}this.$emit("ratio-change",{ratio:this.ratios[this.ratioIndex],clarity:this.claritys[this.clarityIndex]})},clarityClick(t){this.claritys[t].close||(this.claritys[t].close||this.claritys[t].vip?this.claritys[t].vip&&(this.isVip?this.clarityIndex=t:this.showPersonalVip()):this.clarityIndex=t,this.$emit("ratio-change",{ratio:this.ratios[this.ratioIndex],clarity:this.claritys[this.clarityIndex]}))}}},c=l,h=(i("8021"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,"a9e57bf2",null);e["default"]=d.exports},33503:function(t,e,i){},3357:function(t,e,i){"use strict";var s=i("da71");e["a"]={data(){return{tipsConfig:{}}},mounted(){this.loadConfig()},methods:{loadConfig(){const t=localStorage.getItem(s["LOCAL_STORAGE_TIPS_KEY"]);this.tipsConfig=t&&JSON.parse(t)||{}},showTipsFor(t){return!1!==this.tipsConfig[t]},hideTipsFor(t){this.tipsConfig[t]=!1,localStorage.setItem(s["LOCAL_STORAGE_TIPS_KEY"],JSON.stringify(this.tipsConfig)),this.loadConfig()}}}},"336a":function(t,e,i){},"337b":function(t,e,i){},3390:function(t,e,i){"use strict";i.r(e);i("1276");var s=i("750b"),n=i("ed08");i("2614");const a=i("7a71");e["default"]=Object(s["b"])({props:{good:{type:[Object,Object],default:()=>({})}},setup(t,e){const i=Object(s["j"])(!1),r=Object(s["j"])(!1),o=[{key:!1,value:"3D"},{key:!0,value:"图纸"}],l=()=>{e.emit("open")};return()=>{var c,h,d,u;return Object(s["c"])("div",{class:"good-containerd "+(i.value?"good-containerd__active":""),on:{mousemove:()=>{i.value||(i.value=!0)},mouseleave:()=>{i.value&&(i.value=!1)}}},[Object(s["c"])("transition",{attrs:{name:"el-zoom-in-top"}},[i.value?Object(s["c"])("div",{class:"preview flex flex-between item-center"},[Object(s["c"])("div",{directives:[{name:"show",value:i.value}],class:"flex item-center dot-body"},[o.map((t,e)=>Object(s["c"])("div",{class:"dot "+(r.value===t.key?"active":""),key:e,on:{mousemove:()=>{r.value=t.key}}},[t.value]))])]):""]),Object(s["c"])("div",{class:"image-container"},[Object(s["c"])("img",{directives:[{name:"show",value:!r.value}],on:{click:()=>l()},attrs:{src:Object(n["F"])(null===(c=t.good)||void 0===c?void 0:c.mode_image,200,200,60,"|imageslim"),draggable:"false",alt:""}}),Object(s["c"])("img",{directives:[{name:"show",value:r.value}],on:{click:()=>l()},attrs:{src:Object(n["F"])(null===(h=t.good)||void 0===h?void 0:h.knife_image,200,200,60,"|imageslim"),draggable:"false",alt:""}})]),Object(s["c"])("div",{class:"flex flex-between item-center mt-10"},[Object(s["c"])("div",{class:"title",on:{click:()=>l()}},[null===(d=t.good)||void 0===d?void 0:d.cate_name,i.value?Object(s["c"])("a-tooltip",{attrs:{placement:"top",title:"商用"}},[Object(s["c"])("img",{class:"ml-4",attrs:{src:a,alt:""}})]):""]),Object(s["c"])("div",{class:"id",on:{click:()=>l()}},["ID: ",t.good.mode_no])]),Object(s["c"])("transition",{attrs:{name:"fade"}},[Object(s["c"])("div",{class:"overflow mt-8",directives:[{name:"show",value:i.value}]},[Object(s["c"])("div",{class:"flex item-center flex-wrap keywords"},[null===(u=t.good.keywords)||void 0===u?void 0:u.split(",").map((t,i)=>Object(s["c"])("div",{class:"content",key:i,on:{click:()=>e.emit("search",t)}},[t]))])])])])}}})},"33ac":function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("5a0c"),a=i.n(n);i("cb86");e["default"]=Object(s["b"])({props:{target:{type:[Object,Object],default:()=>({})},show:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1}},setup(t){const e=Object(s["a"])(()=>a()(parseInt(t.target.create_time)).format("YYYY-MM-DD"));return()=>{var i;return Object(s["c"])("div",{class:"content-wrapper"},[Object(s["c"])("div",{class:`notice_item ${t.show?"select":""} ${t.isLast?"noLine":""}`},[Object(s["c"])("dt",[Object(s["c"])("div",{class:"notice_title_wrp"},[Object(s["c"])("strong",{class:"notice_title"},[t.target.title||(null===(i=t.target)||void 0===i?void 0:i.update_content)]),Object(s["c"])("span",{class:"notice_time"},[e.value])])]),t.show&&t.target.content?Object(s["c"])("dd",{class:"dn",domProps:{innerHTML:t.target.content}}):""])])}}})},"33ba":function(t,e,i){t.exports=i.p+"editor-assets/img/rollback-active.3778f03d.svg"},"33d1":function(t,e,i){},"33dc":function(t,e,i){},"341d":function(t,e,i){"use strict";var s=i("7877"),n=i.n(s);n.a},"342d":function(t,e,i){var s=i("cbe5"),n=i("20c8"),a=i("ee84"),r=Math.sqrt,o=Math.sin,l=Math.cos,c=Math.PI,h=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},d=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(h(t)*h(e))},u=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(d(t,e))};function p(t,e,i,s,n,a,h,p,f,m,g){var v=f*(c/180),b=l(v)*(t-i)/2+o(v)*(e-s)/2,y=-1*o(v)*(t-i)/2+l(v)*(e-s)/2,_=b*b/(h*h)+y*y/(p*p);_>1&&(h*=r(_),p*=r(_));var x=(n===a?-1:1)*r((h*h*(p*p)-h*h*(y*y)-p*p*(b*b))/(h*h*(y*y)+p*p*(b*b)))||0,w=x*h*y/p,C=x*-p*b/h,k=(t+i)/2+l(v)*w-o(v)*C,S=(e+s)/2+o(v)*w+l(v)*C,A=u([1,0],[(b-w)/h,(y-C)/p]),O=[(b-w)/h,(y-C)/p],j=[(-1*b-w)/h,(-1*y-C)/p],M=u(O,j);d(O,j)<=-1&&(M=c),d(O,j)>=1&&(M=0),0===a&&M>0&&(M-=2*c),1===a&&M<0&&(M+=2*c),g.addData(m,k,S,h,p,A,M,v,a)}var f=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,m=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function g(t){if(!t)return new n;for(var e,i=0,s=0,a=i,r=s,o=new n,l=n.CMD,c=t.match(f),h=0;h<c.length;h++){for(var d,u=c[h],g=u.charAt(0),v=u.match(m)||[],b=v.length,y=0;y<b;y++)v[y]=parseFloat(v[y]);var _=0;while(_<b){var x,w,C,k,S,A,O,j=i,M=s;switch(g){case"l":i+=v[_++],s+=v[_++],d=l.L,o.addData(d,i,s);break;case"L":i=v[_++],s=v[_++],d=l.L,o.addData(d,i,s);break;case"m":i+=v[_++],s+=v[_++],d=l.M,o.addData(d,i,s),a=i,r=s,g="l";break;case"M":i=v[_++],s=v[_++],d=l.M,o.addData(d,i,s),a=i,r=s,g="L";break;case"h":i+=v[_++],d=l.L,o.addData(d,i,s);break;case"H":i=v[_++],d=l.L,o.addData(d,i,s);break;case"v":s+=v[_++],d=l.L,o.addData(d,i,s);break;case"V":s=v[_++],d=l.L,o.addData(d,i,s);break;case"C":d=l.C,o.addData(d,v[_++],v[_++],v[_++],v[_++],v[_++],v[_++]),i=v[_-2],s=v[_-1];break;case"c":d=l.C,o.addData(d,v[_++]+i,v[_++]+s,v[_++]+i,v[_++]+s,v[_++]+i,v[_++]+s),i+=v[_-2],s+=v[_-1];break;case"S":x=i,w=s;var I=o.len(),T=o.data;e===l.C&&(x+=i-T[I-4],w+=s-T[I-3]),d=l.C,j=v[_++],M=v[_++],i=v[_++],s=v[_++],o.addData(d,x,w,j,M,i,s);break;case"s":x=i,w=s;I=o.len(),T=o.data;e===l.C&&(x+=i-T[I-4],w+=s-T[I-3]),d=l.C,j=i+v[_++],M=s+v[_++],i+=v[_++],s+=v[_++],o.addData(d,x,w,j,M,i,s);break;case"Q":j=v[_++],M=v[_++],i=v[_++],s=v[_++],d=l.Q,o.addData(d,j,M,i,s);break;case"q":j=v[_++]+i,M=v[_++]+s,i+=v[_++],s+=v[_++],d=l.Q,o.addData(d,j,M,i,s);break;case"T":x=i,w=s;I=o.len(),T=o.data;e===l.Q&&(x+=i-T[I-4],w+=s-T[I-3]),i=v[_++],s=v[_++],d=l.Q,o.addData(d,x,w,i,s);break;case"t":x=i,w=s;I=o.len(),T=o.data;e===l.Q&&(x+=i-T[I-4],w+=s-T[I-3]),i+=v[_++],s+=v[_++],d=l.Q,o.addData(d,x,w,i,s);break;case"A":C=v[_++],k=v[_++],S=v[_++],A=v[_++],O=v[_++],j=i,M=s,i=v[_++],s=v[_++],d=l.A,p(j,M,i,s,A,O,C,k,S,d,o);break;case"a":C=v[_++],k=v[_++],S=v[_++],A=v[_++],O=v[_++],j=i,M=s,i+=v[_++],s+=v[_++],d=l.A,p(j,M,i,s,A,O,C,k,S,d,o);break}}"z"!==g&&"Z"!==g||(d=l.Z,o.addData(d),i=a,s=r),e=d}return o.toStatic(),o}function v(t,e){var i=g(t);return e=e||{},e.buildPath=function(t){if(t.setData){t.setData(i.data);var e=t.getContext();e&&t.rebuildPath(e)}else{e=t;i.rebuildPath(e)}},e.applyTransform=function(t){a(i,t),this.dirty(!0)},e}function b(t,e){return new s(v(t,e))}function y(t,e){return s.extend(v(t,e))}function _(t,e){for(var i=[],n=t.length,a=0;a<n;a++){var r=t[a];r.path||r.createPathProxy(),r.__dirtyPath&&r.buildPath(r.path,r.shape,!0),i.push(r.path)}var o=new s(e);return o.createPathProxy(),o.buildPath=function(t){t.appendPath(i);var e=t.getContext();e&&t.rebuildPath(e)},o}e.createFromString=b,e.extendFromString=y,e.mergePath=_},3433:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:"editor-order__container "+(t.visible&&"editor-order__container--open"),style:{height:t.height+"px"}},[s("div",{staticClass:"p-16 bg-white"},[s("div",{staticClass:"flex flex-between"},[s("div",{staticClass:"fo-16 bold-600"},[t._v("印品选择")]),s("img",{staticClass:"pointer",attrs:{src:i("729c")},on:{click:function(e){t.visible=!1}}})]),s("div",{staticClass:"flex flex-between item-center mt-24"},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"fo-14 bold-600 editor-order__container__text"},[t._v("面积：")]),s("div",{staticClass:"fo-14 ml-16"},[t._v(t._s((parseInt(t.price.area)/100/100/100).toFixed(1))+"m²")])])]),s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"fo-14 bold-600 editor-order__container__text"},[t._v("纸张：")]),s("div",{staticClass:"fo-14 ml-16"},[s("bxhselect",{attrs:{value:t.project_data.science_id,options:t.science,label:"science_name",prop:"id",width:168,req:!1},on:{change:t.scienceChange}})],1)]),s("div",{staticClass:"fo-info pointer fo-12"},[t._v("材质介绍")])]),s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"fo-14 bold-600 editor-order__container__text"},[t._v("工艺：")]),s("div",{staticClass:"fo-14 ml-16"},[s("bxhselect",{attrs:{value:t.project_data.membrane_id,options:t.membrane,label:"science_name",prop:"id",width:230},on:{change:t.membraneChange}})],1)])]),t._m(0),t._m(1),s("div",{staticClass:"flex flex-start item-end mt-24"},[s("div",{staticClass:"fo-14 bold-600 editor-order__container__text"},[t._v("价格")]),s("div",{staticClass:"ml-16 fo-24 bold",staticStyle:{"line-height":"24px"}},[s("span",{staticClass:"fo-gray"},[t._v("￥")]),t._v(" "+t._s(t.price.totalPrice)+" ")]),s("div",{staticClass:"ml-8"},[t.discount>0?s("div",{staticClass:"editor-order__container__discount"},[t._v(t._s(t.discount)+"折")]):t._e(),s("div",{staticClass:"fo-12 fo-gray editor-order__container__line"},[t._v(" ￥"+t._s((parseFloat(t.price.originPrice)*t.num).toFixed(2))+" ")])])]),s("div",{staticClass:"flex flex-start item-end mt-24"},[t._m(2),s("div",{staticClass:"editor-order__container__order ml-16",on:{click:t.checkOrder}},[t._v("确认下单")])]),s("div",{staticClass:"fo-12 fo-gray mt-12 text-center mb-24"},[t._v("下单即代表您知晓印刷须知")])]),s("div",{staticClass:"p-16"},[s("div",{staticClass:"fo-14 mb-16 bold-600"},[t._v("印刷信息")]),s("div",{staticClass:"fo-12 fo-gray lh-20"},[t._v(" 尺寸：L "+t._s(t.project_data.length||0)+"mm / "+t._s(t.project_data.width||0)+"mm / "+t._s(t.project_data.height||0)+"mm ")]),s("div",{staticClass:"fo-12 fo-gray lh-20"},[t._v("工期：1-3工作日发货")]),s("div",{staticClass:"fo-12 fo-gray lh-20"},[t._v("快递：全国包邮")])])])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex flex-between item-center mt-12"},[i("div",{staticClass:"flex flex-start item-center"},[i("div",{staticClass:"fo-14 bold-600 editor-order__container__text"},[t._v("数量")]),i("div",{staticClass:"fo-14 ml-16"})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex flex-between item-center mt-12"},[i("div",{staticClass:"flex flex-start item-center"},[i("div",{staticClass:"fo-14 bold-600 editor-order__container__text"}),i("div",{staticClass:"fo-12 ml-16 fo-theme"},[t._v("数量越多折扣力度越大")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"editor-order__container__concat flex flex-center item-center"},[s("img",{attrs:{src:i("5727")}})])}],a=(i("b680"),i("5530")),r=i("5880"),o=i("5a4f"),l={components:{bxhselect:o["a"]},props:{value:{type:Boolean,require:!0,default:!1},load:{type:Boolean,default:!1}},model:{prop:"value",event:"change"},watch:{value(t){this.visible=t,t&&this.calculate()},visible(t){this.$emit("change",t)},load(t){t&&this.initCanvas()}},data(){return{visible:this.value,height:window.innerHeight-52,imgsFlag:0,science:[],science_id:"",membrane:[],num:100,price:{totalPrice:"0.00",originPrice:"0.00",totalDiscount:"0.00",area:"0.00"},discount:0}},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["project_data","knife_data","isCup","scale","is_outside","last_saved_local_history_ts","element_craft_list"])),{},{crafts(){return this.element_craft_list}}),mounted(){this.resize()},methods:{resize(){window.onresize=()=>{this.height=window.innerHeight-52}},initCanvas(){const t=document.getElementById("orderCanvas");t.width=220,t.height=220;const e=t.getContext("2d");let i=1;i=this.knife_data.totalWidth>this.knife_data.totalLength?t.width/this.knife_data.totalWidth:t.height/this.knife_data.totalLength,e.scale(i,i),this.drawCutline(e),this.drawFoldline(e)},calculate(){this.$api.material.calculate({project_id:this.project_data.id,num:this.num}).then(t=>{t&&(this.price=t.data,this.discount=(parseFloat(t.data.totalPrice)/(parseFloat(t.data.originPrice)*this.num)*10).toFixed(1))})},scienceChange(t){this.project_data.science_id=t,this.visible&&this.calculate()},membraneChange(t){this.project_data.membrane_id=t,this.visible&&this.calculate()},numChange(t){this.calculate()},checkOrder(){this.$router.push({path:"/orders",query:{id:this.project_data.id,num:this.num}})},drawCutline(t){t.beginPath(),t.strokeStyle="red";const e=this.knife_data.cutLineData;for(const i in e)this.filterSvgPath(t,e[i]);t.stroke()},drawFoldline(t){const e=this.knife_data.foldLine;for(const i in e)t.beginPath(),t.strokeStyle="lime",t.moveTo(e[i].x1,e[i].y1),t.lineTo(e[i].x2,e[i].y2),t.closePath(),t.stroke()},drawHoles(t){const e=this.knife_data.holes;for(const i in e){t.beginPath(),t.strokeStyle="red";for(const s in e[i])this.filterSvgPath(t,e[i][s]);t.stroke()}},filterSvgPath(t,e){switch(e.mtd){case"M":t.moveTo(e.x,e.y);break;case"L":t.lineTo(e.x,e.y);break;case"Q":t.quadraticCurveTo(e.cx,e.cy,e.x,e.y);break;case"Z":t.closePath();break}}}},c=l,h=(i("04d9"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,null,null);e["default"]=d.exports},"344f":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAADD0lEQVRIS6WXSaiNYRzGf08oSXZKZB4XMmSIlC4yZSjKFAtDbmJBygJbKaIolGFhIYosZAoLU2QspMhQFJeSjaQM9eq5ve/tO9/9zneO461bt+8dnv/w/J///4iCFULoCIyMW08l/Sk618g35S+FEAYBZ4BRce8JsEjSmzKAEEInYCMwHRgAvADOA8ckhXS3AjCEMBi4DvQCPsZD6f8pkl5XiYiNPAuMKNi/ASyW9MV7bYA5MB+aEy9fBJqiAe1Ac/eeA1uBl8BYYBfQB/B7U+1pK2AMoz/am1YwST/iXhcgCzo6WVtkZLoX73YHHkXQZklHFQnyMObMYPOAHUBfYKGtCiFkQZsk3awFlkIbQlgKnHI+Jc33a2OiFc7ZMOAIsAz4ao8l/YzWdjAZnMd6wTLRc+7fSBqcB7zjBAPfgJmS7oUQ+gEtkn7FB7LEqgh/FULNjWy9KmlmPqS+kwVbDxwAjkta/S+eZfJ/HxgObJG0J0ua20AP4DEwGVgJHIxWrwAeZEqmHs+yeX9m1kr6Xa0sTGvn02sDcO0/wMwNE61VOMoK3/ubgEv/CVZRu0XSZlLciuF1/HsDPfP1WYUg+ZptJxTtADNMTKD+9K85cxgLpbAeQF8eklWQAsGv6VmheDdYZ+3AgFnAEmBVXvDLSNNwGEMIh4HmIsEv7RaNhjGnvRX5TIXfFXCjHdgoQYDxwDRgnWWwALS1FhPgcuAEYEWYWIdnr2Ira4m9ckaUQHf2/pLeF7Q2OzQuAe621gHbJe2sNkrkrPYx16lbz76kSpIOhRA6Az8zrS0ZODYBnvbcAiyXdLKOov4cz1h709oQwSYAF4DbkhZEIxPgmARoYR4HTJJ0t546i2eSOFh73Vc901wBugH7gW2ZaaEipJ+ilLnhOi9tq4xxuXblLmNZNJjD7LLw1JbmoQrS2MKhwFrgchwv3Hj95wK25YVylQO1oU7PmhxYm8ylkG4G9lYjC/AWmF0yJmYFv3S8zBa+Qe2hQ/IBMLXfAU+Bc5K+lxiUJr+aA3SheJc9XAO05k+Ev1j+yo14otLjAAAAAElFTkSuQmCC"},3472:function(t,e,i){t.exports=i.p+"editor-assets/img/活动-百万补贴.fbee2e1e.svg"},"347e":function(t,e,i){"use strict";var s=i("6b02"),n=i.n(s);n.a},3497:function(t,e,i){t.exports=i.p+"editor-assets/img/e1-active.1cb83036.svg"},"349c":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CODE39=void 0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=i("e762"),a=r(n);function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=function(t){function e(t,i){return o(this,e),t=t.toUpperCase(),i.mod43&&(t+=m(v(t))),l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return c(e,t),s(e,[{key:"encode",value:function(){for(var t=p("*"),e=0;e<this.data.length;e++)t+=p(this.data[e])+"0";return t+=p("*"),{data:t,text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),e}(a.default),d=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],u=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function p(t){return f(g(t))}function f(t){return u[t].toString(2)}function m(t){return d[t]}function g(t){return d.indexOf(t)}function v(t){for(var e=0,i=0;i<t.length;i++)e+=g(t[i]);return e%=43,e}e.CODE39=h},"34ad":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var s=i("5a89"),n=function(){function t(t){s["B"].call(this,t),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.pluginCallbacks=[],this.register((function(t){return new o(t)})),this.register((function(t){return new c(t)})),this.register((function(t){return new l(t)}))}function e(){var t={};return{get:function(e){return t[e]},add:function(e,i){t[e]=i},remove:function(e){delete t[e]},removeAll:function(){t={}}}}t.prototype=Object.assign(Object.create(s["B"].prototype),{constructor:t,load:function(t,e,i,n){var a,r=this;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:s["C"].extractUrlBase(t),r.manager.itemStart(t);var o=function(e){n&&n(e),r.manager.itemError(t),r.manager.itemEnd(t)},l=new s["l"](r.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),"use-credentials"===r.crossOrigin&&l.setWithCredentials(!0),l.load(t,(function(i){try{r.parse(i,a,(function(i){e(i),r.manager.itemEnd(t)}),o)}catch(s){o(s)}}),i,o)},setDRACOLoader:function(t){return this.dracoLoader=t,this},setDDSLoader:function(t){return this.ddsLoader=t,this},setKTX2Loader:function(t){return this.ktx2Loader=t,this},register:function(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this},unregister:function(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this},parse:function(t,e,o,l){var c,d={},u={};if("string"===typeof t)c=t;else{var g=s["C"].decodeText(new Uint8Array(t,0,4));if(g===h){try{d[i.KHR_BINARY_GLTF]=new p(t)}catch(S){return void(l&&l(S))}c=d[i.KHR_BINARY_GLTF].content}else c=s["C"].decodeText(new Uint8Array(t))}var y=JSON.parse(c);if(void 0===y.asset||y.asset.version[0]<2)l&&l(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var _=new z(y,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager,ktx2Loader:this.ktx2Loader});_.fileLoader.setRequestHeader(this.requestHeader);for(var x=0;x<this.pluginCallbacks.length;x++){var w=this.pluginCallbacks[x](_);u[w.name]=w,d[w.name]=!0}if(y.extensionsUsed)for(x=0;x<y.extensionsUsed.length;++x){var C=y.extensionsUsed[x],k=y.extensionsRequired||[];switch(C){case i.KHR_LIGHTS_PUNCTUAL:d[C]=new a(y);break;case i.KHR_MATERIALS_UNLIT:d[C]=new r;break;case i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:d[C]=new v;break;case i.KHR_DRACO_MESH_COMPRESSION:d[C]=new f(y,this.dracoLoader);break;case i.MSFT_TEXTURE_DDS:d[C]=new n(this.ddsLoader);break;case i.KHR_TEXTURE_TRANSFORM:d[C]=new m;break;case i.KHR_MESH_QUANTIZATION:d[C]=new b;break;default:k.indexOf(C)>=0&&u[C]}}_.setExtensions(d),_.setPlugins(u),_.parse(o,l)}}});var i={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function n(t){if(!t)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=i.MSFT_TEXTURE_DDS,this.ddsLoader=t}function a(t){this.name=i.KHR_LIGHTS_PUNCTUAL;var e=t.extensions&&t.extensions[i.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=e.lights||[]}function r(){this.name=i.KHR_MATERIALS_UNLIT}function o(t){this.parser=t,this.name=i.KHR_MATERIALS_CLEARCOAT}function l(t){this.parser=t,this.name=i.KHR_MATERIALS_TRANSMISSION}function c(t){this.parser=t,this.name=i.KHR_TEXTURE_BASISU}a.prototype.loadLight=function(t){var e,i=this.lightDefs[t],n=new s["h"](16777215);void 0!==i.color&&n.fromArray(i.color);var a=void 0!==i.range?i.range:0;switch(i.type){case"directional":e=new s["i"](n),e.target.position.set(0,0,-1),e.add(e.target);break;case"point":e=new s["T"](n),e.distance=a;break;case"spot":e=new s["hb"](n),e.distance=a,i.spot=i.spot||{},i.spot.innerConeAngle=void 0!==i.spot.innerConeAngle?i.spot.innerConeAngle:0,i.spot.outerConeAngle=void 0!==i.spot.outerConeAngle?i.spot.outerConeAngle:Math.PI/4,e.angle=i.spot.outerConeAngle,e.penumbra=1-i.spot.innerConeAngle/i.spot.outerConeAngle,e.target.position.set(0,0,-1),e.add(e.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+i.type+'".')}return e.position.set(0,0,0),e.decay=2,void 0!==i.intensity&&(e.intensity=i.intensity),e.name=i.name||"light_"+t,Promise.resolve(e)},r.prototype.getMaterialType=function(){return s["I"]},r.prototype.extendParams=function(t,e,i){var n=[];t.color=new s["h"](1,1,1),t.opacity=1;var a=e.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){var r=a.baseColorFactor;t.color.fromArray(r),t.opacity=r[3]}void 0!==a.baseColorTexture&&n.push(i.assignTexture(t,"map",a.baseColorTexture))}return Promise.all(n)},o.prototype.getMaterialType=function(t){var e=this.parser,i=e.json.materials[t];return i.extensions&&i.extensions[this.name]?s["J"]:null},o.prototype.extendMaterialParams=function(t,e){var i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var a=[],r=n.extensions[this.name];if(void 0!==r.clearcoatFactor&&(e.clearcoat=r.clearcoatFactor),void 0!==r.clearcoatTexture&&a.push(i.assignTexture(e,"clearcoatMap",r.clearcoatTexture)),void 0!==r.clearcoatRoughnessFactor&&(e.clearcoatRoughness=r.clearcoatRoughnessFactor),void 0!==r.clearcoatRoughnessTexture&&a.push(i.assignTexture(e,"clearcoatRoughnessMap",r.clearcoatRoughnessTexture)),void 0!==r.clearcoatNormalTexture&&(a.push(i.assignTexture(e,"clearcoatNormalMap",r.clearcoatNormalTexture)),void 0!==r.clearcoatNormalTexture.scale)){var o=r.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new s["nb"](o,o)}return Promise.all(a)},l.prototype.getMaterialType=function(t){var e=this.parser,i=e.json.materials[t];return i.extensions&&i.extensions[this.name]?s["J"]:null},l.prototype.extendMaterialParams=function(t,e){var i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();var n=[],a=s.extensions[this.name];return void 0!==a.transmissionFactor&&(e.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&n.push(i.assignTexture(e,"transmissionMap",a.transmissionTexture)),Promise.all(n)},c.prototype.loadTexture=function(t){var e=this.parser,i=e.json,s=i.textures[t];if(!s.extensions||!s.extensions[this.name])return null;var n=s.extensions[this.name],a=i.images[n.source],r=e.options.ktx2Loader;if(!r)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return e.loadTextureImage(t,a,r)};var h="glTF",d=12,u={JSON:1313821514,BIN:5130562};function p(t){this.name=i.KHR_BINARY_GLTF,this.content=null,this.body=null;var e=new DataView(t,0,d);if(this.header={magic:s["C"].decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==h)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");var n=new DataView(t,d),a=0;while(a<n.byteLength){var r=n.getUint32(a,!0);a+=4;var o=n.getUint32(a,!0);if(a+=4,o===u.JSON){var l=new Uint8Array(t,d+a,r);this.content=s["C"].decodeText(l)}else if(o===u.BIN){var c=d+a;this.body=t.slice(c,c+r)}a+=r}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function f(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=i.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}function m(){this.name=i.KHR_TEXTURE_TRANSFORM}function g(t){s["K"].call(this),this.isGLTFSpecularGlossinessMaterial=!0;var e=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),n=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),a=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),r=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),o={specular:{value:(new s["h"]).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=o,this.onBeforeCompile=function(t){for(var s in o)t.uniforms[s]=o[s];t.fragmentShader=t.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),t.fragmentShader=t.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),t.fragmentShader=t.fragmentShader.replace("#include <roughnessmap_pars_fragment>",e),t.fragmentShader=t.fragmentShader.replace("#include <metalnessmap_pars_fragment>",i),t.fragmentShader=t.fragmentShader.replace("#include <roughnessmap_fragment>",n),t.fragmentShader=t.fragmentShader.replace("#include <metalnessmap_fragment>",a),t.fragmentShader=t.fragmentShader.replace("#include <lights_physical_fragment>",r)},Object.defineProperties(this,{specular:{get:function(){return o.specular.value},set:function(t){o.specular.value=t}},specularMap:{get:function(){return o.specularMap.value},set:function(t){o.specularMap.value=t}},glossiness:{get:function(){return o.glossiness.value},set:function(t){o.glossiness.value=t}},glossinessMap:{get:function(){return o.glossinessMap.value},set:function(t){o.glossinessMap.value=t,t?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}function v(){return{name:i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return g},extendParams:function(t,e,i){var n=e.extensions[this.name];t.color=new s["h"](1,1,1),t.opacity=1;var a=[];if(Array.isArray(n.diffuseFactor)){var r=n.diffuseFactor;t.color.fromArray(r),t.opacity=r[3]}if(void 0!==n.diffuseTexture&&a.push(i.assignTexture(t,"map",n.diffuseTexture)),t.emissive=new s["h"](0,0,0),t.glossiness=void 0!==n.glossinessFactor?n.glossinessFactor:1,t.specular=new s["h"](1,1,1),Array.isArray(n.specularFactor)&&t.specular.fromArray(n.specularFactor),void 0!==n.specularGlossinessTexture){var o=n.specularGlossinessTexture;a.push(i.assignTexture(t,"glossinessMap",o)),a.push(i.assignTexture(t,"specularMap",o))}return Promise.all(a)},createMaterial:function(t){var e=new g(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=s["jb"],t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e.refractionRatio=.98,e}}}function b(){this.name=i.KHR_MESH_QUANTIZATION}function y(t,e,i,n){s["r"].call(this,t,e,i,n)}f.prototype.decodePrimitive=function(t,e){var i=this.json,s=this.dracoLoader,n=t.extensions[this.name].bufferView,a=t.extensions[this.name].attributes,r={},o={},l={};for(var c in a){var h=S[c]||c.toLowerCase();r[h]=a[c]}for(c in t.attributes){h=S[c]||c.toLowerCase();if(void 0!==a[c]){var d=i.accessors[t.attributes[c]],u=x[d.componentType];l[h]=u,o[h]=!0===d.normalized}}return e.getDependency("bufferView",n).then((function(t){return new Promise((function(e){s.decodeDracoFile(t,(function(t){for(var i in t.attributes){var s=t.attributes[i],n=o[i];void 0!==n&&(s.normalized=n)}e(t)}),r,l)}))}))},m.prototype.extendTexture=function(t,e){return t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),e.texCoord,t.needsUpdate=!0,t},g.prototype=Object.create(s["K"].prototype),g.prototype.constructor=g,g.prototype.copy=function(t){return s["K"].prototype.copy.call(this,t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},y.prototype=Object.create(s["r"].prototype),y.prototype.constructor=y,y.prototype.copySampleValue_=function(t){for(var e=this.resultBuffer,i=this.sampleValues,s=this.valueSize,n=t*s*3+s,a=0;a!==s;a++)e[a]=i[n+a];return e},y.prototype.beforeStart_=y.prototype.copySampleValue_,y.prototype.afterEnd_=y.prototype.copySampleValue_,y.prototype.interpolate_=function(t,e,i,s){for(var n=this.resultBuffer,a=this.sampleValues,r=this.valueSize,o=2*r,l=3*r,c=s-e,h=(i-e)/c,d=h*h,u=d*h,p=t*l,f=p-l,m=-2*u+3*d,g=u-d,v=1-m,b=g-d+h,y=0;y!==r;y++){var _=a[f+y+r],x=a[f+y+o]*c,w=a[p+y+r],C=a[p+y]*c;n[y]=v*_+b*x+m*w+g*C}return n};var _={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},x={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},w={9728:s["M"],9729:s["y"],9984:s["O"],9985:s["A"],9986:s["N"],9987:s["z"]},C={33071:s["g"],33648:s["L"],10497:s["bb"]},k={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},S={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},A={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},O={CUBICSPLINE:void 0,LINEAR:s["t"],STEP:s["s"]},j={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function M(t,e){return"string"!==typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}function I(t){return void 0===t["DefaultMaterial"]&&(t["DefaultMaterial"]=new s["K"]({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:s["m"]})),t["DefaultMaterial"]}function T(t,e,i){for(var s in i.extensions)void 0===t[s]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[s]=i.extensions[s])}function E(t,e){void 0!==e.extras&&"object"===typeof e.extras&&Object.assign(t.userData,e.extras)}function D(t,e,i){for(var s=!1,n=!1,a=0,r=e.length;a<r;a++){var o=e[a];if(void 0!==o.POSITION&&(s=!0),void 0!==o.NORMAL&&(n=!0),s&&n)break}if(!s&&!n)return Promise.resolve(t);var l=[],c=[];for(a=0,r=e.length;a<r;a++){o=e[a];if(s){var h=void 0!==o.POSITION?i.getDependency("accessor",o.POSITION):t.attributes.position;l.push(h)}if(n){h=void 0!==o.NORMAL?i.getDependency("accessor",o.NORMAL):t.attributes.normal;c.push(h)}}return Promise.all([Promise.all(l),Promise.all(c)]).then((function(e){var i=e[0],a=e[1];return s&&(t.morphAttributes.position=i),n&&(t.morphAttributes.normal=a),t.morphTargetsRelative=!0,t}))}function L(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(var i=0,s=e.weights.length;i<s;i++)t.morphTargetInfluences[i]=e.weights[i];if(e.extras&&Array.isArray(e.extras.targetNames)){var n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(i=0,s=n.length;i<s;i++)t.morphTargetDictionary[n[i]]=i}}}function P(t){var e,s=t.extensions&&t.extensions[i.KHR_DRACO_MESH_COMPRESSION];return e=s?"draco:"+s.bufferView+":"+s.indices+":"+R(s.attributes):t.indices+":"+R(t.attributes)+":"+t.mode,e}function R(t){for(var e="",i=Object.keys(t).sort(),s=0,n=i.length;s<n;s++)e+=i[s]+":"+t[i[s]]+";";return e}function z(t,i){this.json=t||{},this.extensions={},this.plugins={},this.options=i||{},this.cache=new e,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},"undefined"!==typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new s["o"](this.options.manager):this.textureLoader=new s["kb"](this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new s["l"](this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function N(t,e,i){var n=e.attributes,a=new s["c"];if(void 0!==n.POSITION){var r=i.json.accessors[n.POSITION],o=r.min,l=r.max;if(void 0!==o&&void 0!==l){a.set(new s["ob"](o[0],o[1],o[2]),new s["ob"](l[0],l[1],l[2]));var c=e.targets;if(void 0!==c){for(var h=new s["ob"],d=new s["ob"],u=0,p=c.length;u<p;u++){var f=c[u];if(void 0!==f.POSITION){r=i.json.accessors[f.POSITION],o=r.min,l=r.max;void 0!==o&&void 0!==l&&(d.setX(Math.max(Math.abs(o[0]),Math.abs(l[0]))),d.setY(Math.max(Math.abs(o[1]),Math.abs(l[1]))),d.setZ(Math.max(Math.abs(o[2]),Math.abs(l[2]))),h.max(d))}}a.expandByVector(h)}t.boundingBox=a;var m=new s["fb"];a.getCenter(m.center),m.radius=a.min.distanceTo(a.max)/2,t.boundingSphere=m}}}function B(t,e,i){var s=e.attributes,n=[];function a(e,s){return i.getDependency("accessor",e).then((function(e){t.setAttribute(s,e)}))}for(var r in s){var o=S[r]||r.toLowerCase();o in t.attributes||n.push(a(s[r],o))}if(void 0!==e.indices&&!t.index){var l=i.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));n.push(l)}return E(t,e),N(t,e,i),Promise.all(n).then((function(){return void 0!==e.targets?D(t,e.targets,i):t}))}function F(t,e){var i=t.getIndex();if(null===i){var n=[],a=t.getAttribute("position");if(void 0===a)return t;for(var r=0;r<a.count;r++)n.push(r);t.setIndex(n),i=t.getIndex()}var o=i.count-2,l=[];if(e===s["lb"])for(r=1;r<=o;r++)l.push(i.getX(0)),l.push(i.getX(r)),l.push(i.getX(r+1));else for(r=0;r<o;r++)r%2===0?(l.push(i.getX(r)),l.push(i.getX(r+1)),l.push(i.getX(r+2))):(l.push(i.getX(r+2)),l.push(i.getX(r+1)),l.push(i.getX(r)));l.length;var c=t.clone();return c.setIndex(l),c}return z.prototype.setExtensions=function(t){this.extensions=t},z.prototype.setPlugins=function(t){this.plugins=t},z.prototype.parse=function(t,e){var i=this,s=this.json,n=this.extensions;this.cache.removeAll(),this._markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(e){var a={scene:e[0][s.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:s.asset,parser:i,userData:{}};T(n,a,s),E(a,s),t(a)})).catch(e)},z.prototype._markDefs=function(){for(var t=this.json.nodes||[],e=this.json.skins||[],s=this.json.meshes||[],n=0,a=e.length;n<a;n++)for(var r=e[n].joints,o=0,l=r.length;o<l;o++)t[r[o]].isBone=!0;for(var c=0,h=t.length;c<h;c++){var d=t[c];void 0!==d.mesh&&(this._addNodeRef(this.meshCache,d.mesh),void 0!==d.skin&&(s[d.mesh].isSkinnedMesh=!0)),void 0!==d.camera&&this._addNodeRef(this.cameraCache,d.camera),d.extensions&&d.extensions[i.KHR_LIGHTS_PUNCTUAL]&&void 0!==d.extensions[i.KHR_LIGHTS_PUNCTUAL].light&&this._addNodeRef(this.lightCache,d.extensions[i.KHR_LIGHTS_PUNCTUAL].light)}},z.prototype._addNodeRef=function(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)},z.prototype._getNodeRef=function(t,e,i){if(t.refs[e]<=1)return i;var s=i.clone();return s.name+="_instance_"+t.uses[e]++,s},z.prototype._invokeOne=function(t){var e=Object.values(this.plugins);e.push(this);for(var i=0;i<e.length;i++){var s=t(e[i]);if(s)return s}},z.prototype._invokeAll=function(t){var e=Object.values(this.plugins);e.unshift(this);for(var i=[],s=0;s<e.length;s++)i.push(t(e[s]));return Promise.all(i)},z.prototype.getDependency=function(t,e){var s=t+":"+e,n=this.cache.get(s);if(!n){switch(t){case"scene":n=this.loadScene(e);break;case"node":n=this.loadNode(e);break;case"mesh":n=this._invokeOne((function(t){return t.loadMesh&&t.loadMesh(e)}));break;case"accessor":n=this.loadAccessor(e);break;case"bufferView":n=this._invokeOne((function(t){return t.loadBufferView&&t.loadBufferView(e)}));break;case"buffer":n=this.loadBuffer(e);break;case"material":n=this._invokeOne((function(t){return t.loadMaterial&&t.loadMaterial(e)}));break;case"texture":n=this._invokeOne((function(t){return t.loadTexture&&t.loadTexture(e)}));break;case"skin":n=this.loadSkin(e);break;case"animation":n=this.loadAnimation(e);break;case"camera":n=this.loadCamera(e);break;case"light":n=this.extensions[i.KHR_LIGHTS_PUNCTUAL].loadLight(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(s,n)}return n},z.prototype.getDependencies=function(t){var e=this.cache.get(t);if(!e){var i=this,s=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(s.map((function(e,s){return i.getDependency(t,s)}))),this.cache.add(t,e)}return e},z.prototype.loadBuffer=function(t){var e=this.json.buffers[t],s=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[i.KHR_BINARY_GLTF].body);var n=this.options;return new Promise((function(t,i){s.load(M(e.uri,n.path),t,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))},z.prototype.loadBufferView=function(t){var e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){var i=e.byteLength||0,s=e.byteOffset||0;return t.slice(s,s+i)}))},z.prototype.loadAccessor=function(t){var e=this,i=this.json,n=this.json.accessors[t];if(void 0===n.bufferView&&void 0===n.sparse)return Promise.resolve(null);var a=[];return void 0!==n.bufferView?a.push(this.getDependency("bufferView",n.bufferView)):a.push(null),void 0!==n.sparse&&(a.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(a).then((function(t){var a,r,o=t[0],l=k[n.type],c=x[n.componentType],h=c.BYTES_PER_ELEMENT,d=h*l,u=n.byteOffset||0,p=void 0!==n.bufferView?i.bufferViews[n.bufferView].byteStride:void 0,f=!0===n.normalized;if(p&&p!==d){var m=Math.floor(u/p),g="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+m+":"+n.count,v=e.cache.get(g);v||(a=new c(o,m*p,n.count*p/h),v=new s["p"](a,p/h),e.cache.add(g,v)),r=new s["q"](v,l,u%p/h,f)}else a=null===o?new c(n.count*l):new c(o,u,n.count*l),r=new s["d"](a,l,f);if(void 0!==n.sparse){var b=k.SCALAR,y=x[n.sparse.indices.componentType],_=n.sparse.indices.byteOffset||0,w=n.sparse.values.byteOffset||0,C=new y(t[1],_,n.sparse.count*b),S=new c(t[2],w,n.sparse.count*l);null!==o&&(r=new s["d"](r.array.slice(),r.itemSize,r.normalized));for(var A=0,O=C.length;A<O;A++){var j=C[A];if(r.setX(j,S[A*l]),l>=2&&r.setY(j,S[A*l+1]),l>=3&&r.setZ(j,S[A*l+2]),l>=4&&r.setW(j,S[A*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return r}))},z.prototype.loadTexture=function(t){var e,s,n=this,a=this.json,r=this.options,o=a.textures[t],l=o.extensions||{};return e=l[i.MSFT_TEXTURE_DDS]?a.images[l[i.MSFT_TEXTURE_DDS].source]:a.images[o.source],e.uri&&(s=r.manager.getHandler(e.uri)),s||(s=l[i.MSFT_TEXTURE_DDS]?n.extensions[i.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(t,e,s)},z.prototype.loadTextureImage=function(t,e,i){var n=this,a=this.json,r=this.options,o=a.textures[t],l=self.URL||self.webkitURL,c=e.uri,h=!1,d=!0;return"image/jpeg"===e.mimeType&&(d=!1),void 0!==e.bufferView&&(c=n.getDependency("bufferView",e.bufferView).then((function(t){"image/png"===e.mimeType&&(d=6===new DataView(t,25,1).getUint8(0,!1)),h=!0;var i=new Blob([t],{type:e.mimeType});return c=l.createObjectURL(i),c}))),Promise.resolve(c).then((function(t){return new Promise((function(e,n){var a=e;!0===i.isImageBitmapLoader&&(a=function(t){e(new s["f"](t))}),i.load(M(t,r.path),a,void 0,n)}))})).then((function(e){!0===h&&l.revokeObjectURL(c),e.flipY=!1,o.name&&(e.name=o.name),d||(e.format=s["ab"]);var i=a.samplers||{},r=i[o.sampler]||{};return e.magFilter=w[r.magFilter]||s["y"],e.minFilter=w[r.minFilter]||s["z"],e.wrapS=C[r.wrapS]||s["bb"],e.wrapT=C[r.wrapT]||s["bb"],n.associations.set(e,{type:"textures",index:t}),e}))},z.prototype.assignTexture=function(t,e,s){var n=this;return this.getDependency("texture",s.index).then((function(a){if(void 0!==s.texCoord&&0!=s.texCoord&&("aoMap"!==e||s.texCoord),n.extensions[i.KHR_TEXTURE_TRANSFORM]){var r=void 0!==s.extensions?s.extensions[i.KHR_TEXTURE_TRANSFORM]:void 0;if(r){var o=n.associations.get(a);a=n.extensions[i.KHR_TEXTURE_TRANSFORM].extendTexture(a,r),n.associations.set(a,o)}}t[e]=a}))},z.prototype.assignFinalMaterial=function(t){var e=t.geometry,i=t.material,n=void 0!==e.attributes.tangent,a=void 0!==e.attributes.color,r=void 0===e.attributes.normal,o=!0===t.isSkinnedMesh,l=Object.keys(e.morphAttributes).length>0,c=l&&void 0!==e.morphAttributes.normal;if(t.isPoints){var h="PointsMaterial:"+i.uuid,d=this.cache.get(h);d||(d=new s["V"],s["E"].prototype.copy.call(d,i),d.color.copy(i.color),d.map=i.map,d.sizeAttenuation=!1,this.cache.add(h,d)),i=d}else if(t.isLine){h="LineBasicMaterial:"+i.uuid;var u=this.cache.get(h);u||(u=new s["v"],s["E"].prototype.copy.call(u,i),u.color.copy(i.color),this.cache.add(h,u)),i=u}if(n||a||r||o||l){h="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(h+="specular-glossiness:"),o&&(h+="skinning:"),n&&(h+="vertex-tangents:"),a&&(h+="vertex-colors:"),r&&(h+="flat-shading:"),l&&(h+="morph-targets:"),c&&(h+="morph-normals:");var p=this.cache.get(h);p||(p=i.clone(),o&&(p.skinning=!0),n&&(p.vertexTangents=!0),a&&(p.vertexColors=!0),r&&(p.flatShading=!0),l&&(p.morphTargets=!0),c&&(p.morphNormals=!0),this.cache.add(h,p),this.associations.set(p,this.associations.get(i))),i=p}i.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),i.normalScale&&!n&&(i.normalScale.y=-i.normalScale.y),i.clearcoatNormalScale&&!n&&(i.clearcoatNormalScale.y=-i.clearcoatNormalScale.y),t.material=i},z.prototype.getMaterialType=function(){return s["K"]},z.prototype.loadMaterial=function(t){var e,n=this,a=this.json,r=this.extensions,o=a.materials[t],l={},c=o.extensions||{},h=[];if(c[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var d=r[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];e=d.getMaterialType(),h.push(d.extendParams(l,o,n))}else if(c[i.KHR_MATERIALS_UNLIT]){var u=r[i.KHR_MATERIALS_UNLIT];e=u.getMaterialType(),h.push(u.extendParams(l,o,n))}else{var p=o.pbrMetallicRoughness||{};if(l.color=new s["h"](1,1,1),l.opacity=1,Array.isArray(p.baseColorFactor)){var f=p.baseColorFactor;l.color.fromArray(f),l.opacity=f[3]}void 0!==p.baseColorTexture&&h.push(n.assignTexture(l,"map",p.baseColorTexture)),l.metalness=void 0!==p.metallicFactor?p.metallicFactor:1,l.roughness=void 0!==p.roughnessFactor?p.roughnessFactor:1,void 0!==p.metallicRoughnessTexture&&(h.push(n.assignTexture(l,"metalnessMap",p.metallicRoughnessTexture)),h.push(n.assignTexture(l,"roughnessMap",p.metallicRoughnessTexture))),e=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(t)})),h.push(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,l)})))}!0===o.doubleSided&&(l.side=s["j"]);var m=o.alphaMode||j.OPAQUE;return m===j.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,m===j.MASK&&(l.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&e!==s["I"]&&(h.push(n.assignTexture(l,"normalMap",o.normalTexture)),l.normalScale=new s["nb"](1,1),void 0!==o.normalTexture.scale&&l.normalScale.set(o.normalTexture.scale,o.normalTexture.scale)),void 0!==o.occlusionTexture&&e!==s["I"]&&(h.push(n.assignTexture(l,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(l.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&e!==s["I"]&&(l.emissive=(new s["h"]).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&e!==s["I"]&&h.push(n.assignTexture(l,"emissiveMap",o.emissiveTexture)),Promise.all(h).then((function(){var a;return a=e===g?r[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(l):new e(l),o.name&&(a.name=o.name),a.map&&(a.map.encoding=s["qb"]),a.emissiveMap&&(a.emissiveMap.encoding=s["qb"]),E(a,o),n.associations.set(a,{type:"materials",index:t}),o.extensions&&T(r,a,o),a}))},z.prototype.loadGeometries=function(t){var e=this,n=this.extensions,a=this.primitiveCache;function r(t){return n[i.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(i){return B(i,t,e)}))}for(var o=[],l=0,c=t.length;l<c;l++){var h,d=t[l],u=P(d),p=a[u];if(p)o.push(p.promise);else h=d.extensions&&d.extensions[i.KHR_DRACO_MESH_COMPRESSION]?r(d):B(new s["e"],d,e),a[u]={primitive:d,promise:h},o.push(h)}return Promise.all(o)},z.prototype.loadMesh=function(t){for(var e=this,i=this.json,n=i.meshes[t],a=n.primitives,r=[],o=0,l=a.length;o<l;o++){var c=void 0===a[o].material?I(this.cache):this.getDependency("material",a[o].material);r.push(c)}return r.push(e.loadGeometries(a)),Promise.all(r).then((function(i){for(var r=i.slice(0,i.length-1),o=i[i.length-1],l=[],c=0,h=o.length;c<h;c++){var d,u=o[c],p=a[c],f=r[c];if(p.mode===_.TRIANGLES||p.mode===_.TRIANGLE_STRIP||p.mode===_.TRIANGLE_FAN||void 0===p.mode)d=!0===n.isSkinnedMesh?new s["eb"](u,f):new s["H"](u,f),!0!==d.isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),p.mode===_.TRIANGLE_STRIP?d.geometry=F(d.geometry,s["mb"]):p.mode===_.TRIANGLE_FAN&&(d.geometry=F(d.geometry,s["lb"]));else if(p.mode===_.LINES)d=new s["x"](u,f);else if(p.mode===_.LINE_STRIP)d=new s["u"](u,f);else if(p.mode===_.LINE_LOOP)d=new s["w"](u,f);else{if(p.mode!==_.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);d=new s["U"](u,f)}Object.keys(d.geometry.morphAttributes).length>0&&L(d,n),d.name=n.name||"mesh_"+t,o.length>1&&(d.name+="_"+c),E(d,n),e.assignFinalMaterial(d),l.push(d)}if(1===l.length)return l[0];var m=new s["n"];for(c=0,h=l.length;c<h;c++)m.add(l[c]);return m}))},z.prototype.loadCamera=function(t){var e,i=this.json.cameras[t],n=i[i.type];if(n)return"perspective"===i.type?e=new s["S"](s["F"].radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===i.type&&(e=new s["R"](-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),i.name&&(e.name=i.name),E(e,i),Promise.resolve(e)},z.prototype.loadSkin=function(t){var e=this.json.skins[t],i={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(i):this.getDependency("accessor",e.inverseBindMatrices).then((function(t){return i.inverseBindMatrices=t,i}))},z.prototype.loadAnimation=function(t){for(var e=this.json,i=e.animations[t],n=[],a=[],r=[],o=[],l=[],c=0,h=i.channels.length;c<h;c++){var d=i.channels[c],u=i.samplers[d.sampler],p=d.target,f=void 0!==p.node?p.node:p.id,m=void 0!==i.parameters?i.parameters[u.input]:u.input,g=void 0!==i.parameters?i.parameters[u.output]:u.output;n.push(this.getDependency("node",f)),a.push(this.getDependency("accessor",m)),r.push(this.getDependency("accessor",g)),o.push(u),l.push(p)}return Promise.all([Promise.all(n),Promise.all(a),Promise.all(r),Promise.all(o),Promise.all(l)]).then((function(e){for(var n=e[0],a=e[1],r=e[2],o=e[3],l=e[4],c=[],h=0,d=n.length;h<d;h++){var u=n[h],p=a[h],f=r[h],m=o[h],g=l[h];if(void 0!==u){var v;switch(u.updateMatrix(),u.matrixAutoUpdate=!0,A[g.path]){case A.weights:v=s["P"];break;case A.rotation:v=s["Y"];break;case A.position:case A.scale:default:v=s["pb"];break}var b=u.name?u.name:u.uuid,_=void 0!==m.interpolation?O[m.interpolation]:s["t"],x=[];A[g.path]===A.weights?u.traverse((function(t){!0===t.isMesh&&t.morphTargetInfluences&&x.push(t.name?t.name:t.uuid)})):x.push(b);var w=f.array;if(f.normalized){var C;if(w.constructor===Int8Array)C=1/127;else if(w.constructor===Uint8Array)C=1/255;else if(w.constructor==Int16Array)C=1/32767;else{if(w.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");C=1/65535}for(var k=new Float32Array(w.length),S=0,j=w.length;S<j;S++)k[S]=w[S]*C;w=k}for(S=0,j=x.length;S<j;S++){var M=new v(x[S]+"."+A[g.path],p.array,w,_);"CUBICSPLINE"===m.interpolation&&(M.createInterpolant=function(t){return new y(this.times,this.values,this.getValueSize()/3,t)},M.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(M)}}}var I=i.name?i.name:"animation_"+t;return new s["a"](I,void 0,c)}))},z.prototype.loadNode=function(t){var e=this.json,n=this.extensions,a=this,r=e.nodes[t];return function(){var t=[];if(void 0!==r.mesh&&t.push(a.getDependency("mesh",r.mesh).then((function(t){var e=a._getNodeRef(a.meshCache,r.mesh,t);return void 0!==r.weights&&e.traverse((function(t){if(t.isMesh)for(var e=0,i=r.weights.length;e<i;e++)t.morphTargetInfluences[e]=r.weights[e]})),e}))),void 0!==r.camera&&t.push(a.getDependency("camera",r.camera).then((function(t){return a._getNodeRef(a.cameraCache,r.camera,t)}))),r.extensions&&r.extensions[i.KHR_LIGHTS_PUNCTUAL]&&void 0!==r.extensions[i.KHR_LIGHTS_PUNCTUAL].light){var e=r.extensions[i.KHR_LIGHTS_PUNCTUAL].light;t.push(a.getDependency("light",e).then((function(t){return a._getNodeRef(a.lightCache,e,t)})))}return Promise.all(t)}().then((function(e){var i;if(i=!0===r.isBone?new s["b"]:e.length>1?new s["n"]:1===e.length?e[0]:new s["Q"],i!==e[0])for(var o=0,l=e.length;o<l;o++)i.add(e[o]);if(r.name&&(i.userData.name=r.name,i.name=s["W"].sanitizeNodeName(r.name)),E(i,r),r.extensions&&T(n,i,r),void 0!==r.matrix){var c=new s["G"];c.fromArray(r.matrix),i.applyMatrix4(c)}else void 0!==r.translation&&i.position.fromArray(r.translation),void 0!==r.rotation&&i.quaternion.fromArray(r.rotation),void 0!==r.scale&&i.scale.fromArray(r.scale);return a.associations.set(i,{type:"nodes",index:t}),i}))},z.prototype.loadScene=function(){function t(e,i,n,a){var r=n.nodes[e];return a.getDependency("node",e).then((function(t){return void 0===r.skin?t:a.getDependency("skin",r.skin).then((function(t){e=t;for(var i=[],s=0,n=e.joints.length;s<n;s++)i.push(a.getDependency("node",e.joints[s]));return Promise.all(i)})).then((function(i){return t.traverse((function(t){if(t.isMesh){for(var n=[],a=[],r=0,o=i.length;r<o;r++){var l=i[r];if(l){n.push(l);var c=new s["G"];void 0!==e.inverseBindMatrices&&c.fromArray(e.inverseBindMatrices.array,16*r),a.push(c)}}t.bind(new s["db"](n,a),t.matrixWorld)}})),t}));var e})).then((function(e){i.add(e);var s=[];if(r.children)for(var o=r.children,l=0,c=o.length;l<c;l++){var h=o[l];s.push(t(h,e,n,a))}return Promise.all(s)}))}return function(e){var i=this.json,n=this.extensions,a=this.json.scenes[e],r=this,o=new s["n"];a.name&&(o.name=a.name),E(o,a),a.extensions&&T(n,o,a);for(var l=a.nodes||[],c=[],h=0,d=l.length;h<d;h++)c.push(t(l[h],o,i,r));return Promise.all(c).then((function(){return o}))}}(),t}()},3529:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"render-preview",style:{width:t.WIDTH+"px",height:t.HEIGHT+"px"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"image"===t.renderType,expression:"renderType === 'image'"}],staticClass:"flex flex-center item-center",style:{height:t.HEIGHT-80+"px",width:t.WIDTH+"px"},attrs:{id:"renderPreview"},on:{wheel:t.onMouseWheel}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0&&!t.clearLoad&&"image"===t.renderType,expression:"list.length > 0 && !clearLoad && renderType === 'image'"}],staticClass:"change-page flex flex-center item-center",on:{click:function(e){return t.pre()}}},[s("img",{attrs:{src:i("13ce")}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0&&"image"===t.renderType,expression:"list.length > 0 && renderType === 'image'"}],staticClass:"pic-area flex flex-center item-center",style:{width:t.WIDTH-340+"px",height:t.HEIGHT-280+"px"}},[t.showSave?s("aiclear",{attrs:{"o-img":t.oimg,"c-img":t.cimg}}):t._e(),t.current>-1&&!t.showSave&&"image"===t.renderType?s("div",{staticClass:"pic-img",style:{position:"relative",zIndex:"4999",backgroundImage:"url("+t.list[t.current].image+")",backgroundSize:"contain",width:"100%",height:"100%",backgroundRepeat:"none",transform:"scale("+t.scale+","+t.scale+")"},attrs:{id:"renderPicImg"},on:{mousedown:t.onMouseDown}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.clearLoad,expression:"clearLoad"}],staticClass:"pic-scan"})]):t._e()],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0&&!t.clearLoad&&"image"===t.renderType,expression:"list.length > 0 && !clearLoad && renderType === 'image'"}],staticClass:"change-page flex flex-center item-center",on:{click:function(e){return t.next()}}},[s("img",{staticStyle:{transform:"rotate(180deg)"},attrs:{src:i("13ce")}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.list.length,expression:"list.length === 0"}],staticClass:"text-center"},[s("img",{attrs:{src:i("e597"),width:"216px"}}),s("div",{staticClass:"fo-14 mt-30",staticStyle:{color:"rgba(0, 0, 0, 0.65)"}},[t._v("您还没有对盒子进行渲染")]),s("a",{staticClass:"fo-14 mt-16",staticStyle:{display:"block"},on:{click:function(e){return t.$store.dispatch("render/savePage",0)}}},[t._v("返回渲染")])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:"video"===t.renderType,expression:"renderType === 'video'"}],staticClass:"flex flex-center item-center",style:{height:t.HEIGHT-80+"px",width:t.WIDTH+"px"}},[t.videoCurrent>-1&&88===t.videoList[t.videoCurrent].status?s("div",[s("video",{staticClass:"render-video",style:{height:t.size[t.videoList[t.videoCurrent].aspectRatio].height+"px",width:t.size[t.videoList[t.videoCurrent].aspectRatio].width+"px"},attrs:{controls:"",src:t.videoCurrent>-1?t.videoList[t.videoCurrent].videoFilePath:""}})]):t._e(),t.videoCurrent>-1&&88!==t.videoList[t.videoCurrent].status?s("div",{staticClass:"text-center"},[s("img",{attrs:{src:i("d782"),width:"216px"}}),s("div",{staticClass:"fo-14 mt-30",staticStyle:{color:"rgba(0, 0, 0, 0.65)"}},[t._v(" "+t._s(2===t.videoList[t.videoCurrent].status?"视频渲染失败":"正在拍摄中…")+" ")]),s("div",{staticClass:"fo-14 mt-16"},[t._v(" "+t._s(2===t.videoList[t.videoCurrent].status?"请尝试重新渲染":"隔日上午8点可下载视频")+" ")])]):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.videoList.length,expression:"videoList.length === 0"}],staticClass:"text-center"},[s("img",{attrs:{src:i("e597"),width:"216px"}}),s("div",{staticClass:"fo-14 mt-30",staticStyle:{color:"rgba(0, 0, 0, 0.65)"}},[t._v("您还没有对盒子进行渲染")]),s("a",{staticClass:"fo-14 mt-16",staticStyle:{display:"block"},on:{click:function(e){return t.$store.dispatch("render/savePage",0)}}},[t._v("返回渲染")])])]),t.list.length>0&&"image"===t.renderType||t.videoList.length>0&&"video"===t.renderType?s("div",{staticClass:"render-opt flex flex-center item-center"},["image"===t.renderType?s("div",{staticClass:"w-25 pl-20"},[t.current>-1?s("div",{staticClass:"fo-65 fo-12"},[t._v(" 分辨率："+t._s(t.list[t.current].clear_text)+" "+t._s(t.list[t.current].size)+" ")]):t._e(),t.current>-1?s("div",{staticClass:"fo-65 fo-12 mt-4"},[t._v(t._s(t.list[t.current].updateTime))]):t._e()]):t._e(),"video"===t.renderType?s("div",{staticClass:"w-25 pl-20"},[t.videoCurrent>-1?s("div",{staticClass:"fo-65 fo-12"},[t._v(" 分辨率："+t._s(1===t.videoList[t.videoCurrent].resolution?"720P":"1080P")+" ")]):t._e(),t.videoCurrent>-1?s("div",{staticClass:"fo-65 fo-12 mt-4"},[t._v(" "+t._s(t.$formatDate(new Date(t.videoList[t.videoCurrent].createTime).valueOf(),"yyyy.MM.dd hh:mm:ss"))+" ")]):t._e()]):t._e(),s("div",{staticClass:"w-50 flex flex-center"},["image"===t.renderType&&!t.list[t.current].image.endsWith(".png")&&(t.list[t.current].clear_text.indexOf("1K")>-1||t.list[t.current].clear_text.indexOf("2K")>-1)?s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t.isVip?s("div",[s("a-button",{directives:[{name:"show",rawName:"v-show",value:!t.showSave,expression:"!showSave"}],attrs:{ghost:"",type:"primary",loading:t.clearLoad},on:{click:function(e){return t.doClearPic()}}},[s("img",{attrs:{src:i("7406")}}),s("span",[t._v("智能清晰增强")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showSave,expression:"showSave"}]},[s("a-button",{on:{click:function(e){t.showSave=!1,t.clearLoad=!1}}},[t._v("取消")]),s("a-button",{staticClass:"ml-8",attrs:{type:"primary",loading:t.saveLoading},on:{click:t.saveImg}},[t._v("保存")])],1)],1):s("a-popover",{attrs:{trigger:"click",placement:"top","overlay-class-name":"tip-clear"}},[s("template",{slot:"content"},[s("div",{staticClass:"fo-16 mb-12"},[t._v(" 智能清晰增强 "),s("img",{staticStyle:{"margin-top":"-2px"},attrs:{src:i("0be3"),width:"28px",alt:""}})]),s("aiclear",{staticStyle:{border:"1px solid #f3f3f3"},attrs:{"o-img":"https://yun.baoxiaohe.com/demo/demoh3.jpg","c-img":"https://yun.baoxiaohe.com/demo/democlear.png"}}),s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"fo-12"},[t._v(" 实现智能快速去噪，优化图像纹理细节，使渲染效果更加自然清晰。 ")]),s("a-button",{staticClass:"fo-12",style:{background:"linear-gradient(318deg,#f7bb77 12%, #ffdcad 82%)",width:"72px",height:"24px"},attrs:{size:"large",block:""},on:{click:t.showPersonalVip}},[t._v("开通VIP")])],1)],1),s("a-button",{attrs:{ghost:"",type:"primary"}},[s("img",{attrs:{src:i("7406")}}),s("span",[t._v("智能清晰增强")])])],2)],1):t._e(),s("a-popover",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0&&!t.clearLoad&&"image"===t.renderType,expression:"list.length > 0 && !clearLoad && renderType === 'image'"}],attrs:{trigger:"click",placement:"top","overlay-class-name":"tip-clear"}},[s("template",{slot:"content"},[s("div",{staticClass:"fo-14 bold text-center"},[t._v("分享渲染效果图")]),s("div",{staticClass:"qrcode mt-8"},[s("img",{attrs:{src:t.qrcode,width:"130px",height:"130px"}})]),s("div",{staticClass:"fo-12 fo-gray text-center mt-8"},[t._v("扫二维码给微信好友")])]),s("a-button",{staticClass:"ml-20",attrs:{type:"primary",icon:"share-alt"},on:{click:t.getQrcode}},[s("span",[t._v("分享")])])],2),t.user.is_admin&&"image"===t.renderType?s("a-button",{staticClass:"ml-20",attrs:{loading:t.setLoading},on:{click:t.setModeCover}},[t._v("设为模型封面")]):t._e(),t.user.is_admin&&"image"===t.renderType?s("a-button",{staticClass:"ml-20",attrs:{loading:t.setFasterLoading},on:{click:t.setFasterMode}},[t._v("设为快搭模板")]):t._e(),"image"===t.renderType?s("a-button",{staticClass:"ml-20",on:{click:t.download}},[t._v("下载")]):t._e(),"video"===t.renderType&&this.videoCurrent>-1?s("a-button",{staticStyle:{width:"120px"},attrs:{disabled:!t.videoList[this.videoCurrent].videoFilePath,type:"primary",loading:t.videoLoad},on:{click:t.download}},[t._v(t._s(t.videoLoadText))]):t._e()],1),s("div",{staticClass:"w-25 flex flex-end item-center"},[s("a-tooltip",{directives:[{name:"show",rawName:"v-show",value:!t.clearLoad,expression:"!clearLoad"}],attrs:{placement:"top"}},[s("template",{slot:"title"},[s("span",{staticClass:"fo-12"},[t._v("删除")])]),s("div",{staticClass:"bt-btn flex flex-center item-center",on:{click:t.delImage}},[s("img",{attrs:{src:i("fce4")}})])],2)],1)]):t._e()])},n=[],a=(i("5319"),i("ddb0"),i("5530")),r=i("a394"),o=i("365c"),l=i("5880"),c=i("d055"),h=i.n(c),d=i("9393"),u=i("989b"),p={components:{aiclear:r["default"]},props:["width","height"],mixins:[d["a"]],watch:{width(t){this.WIDTH=t},height(t){this.HEIGHT=t},current(){this.doRead()}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(l["mapState"])("profile",["user"])),Object(l["mapGetters"])("profile",["isVip"])),Object(l["mapGetters"])("render",["renderType","videoList","videoCurrent"])),Object(l["mapState"])("editor-v2",["project_data","knife_data","isCup","is_outside","last_saved_local_history_ts","element_craft_list"])),{},{crafts(){return this.element_craft_list},isInside(){return!this.is_outside},size(){const t=[4/3,3/4,16/9,1,9/16],e=[];for(const i of t){let t=this.width-200,s=t/i;s>this.height-80-200&&(s=this.height-80-200,t=s*i),e.push({width:t,height:s})}return e}}),data(){return{WIDTH:this.width,HEIGHT:this.height,current:-1,list:[],count:0,imgWidth:0,imgHeight:0,clearLoad:!1,showSave:!1,oimg:"https://yun.baoxiaohe.com/demo/demoh3.jpg",cimg:"https://yun.baoxiaohe.com/demo/democlear.png",cimg_url:"",saveLoading:!1,scale:1,qrcode:"",setLoading:!1,setFasterLoading:!1,videoLoad:!1,videoLoadText:"下载视频"}},methods:{applicateScene(t){this.$confirm({title:"确定覆盖当前渲染效果场景全部参数？",okText:"确定",okType:"primary",cancelText:"取消",zIndex:4005,centered:!0,onOk:()=>{}})},doRead(){this.current>-1&&!this.list[this.current].is_read&&this.list[this.current]&&(this.list[this.current].is_read=1,Object(o["renderImageRead"])({project_image_id:this.list[this.current].id}))},setModeCover(){this.$confirm({title:"此操作会覆盖模型库封面，请不要轻易尝试，无关人员请点击取消，谢谢配合！",okText:"确定",okType:"primary",cancelText:"取消",zIndex:4005,centered:!0,onOk:()=>{var t;this.setLoading=!0,this.$api.project.setBlankCover({image:(null===(t=this.list[this.current])||void 0===t?void 0:t.image)||"",project_id:this.project_data.id}).then(t=>{this.setLoading=!1,0===t.errno&&this.$message.success(t.errmsg)})}})},setFasterMode(){this.$confirm({title:"此操作会新增一条快搭记录，请不要轻易尝试，无关人员请点击取消，谢谢配合！",okText:"确定",okType:"primary",cancelText:"取消",zIndex:4005,centered:!0,onOk:()=>{this.setFasterLoading=!0,Object(o["addRenderTemp"])({project_image_id:this.list[this.current].id,template_type:"position",publish_type:"official"}).then(t=>{this.setFasterLoading=!1,200==t.code&&this.$message.success("设置成功")})}})},getQrcode(){let t="https://m."+window.location.host.replace("www.","")+"/render";(t.indexOf("localhost")>-1||t.indexOf("127.0.0.1")>-1||t.indexOf("test")>-1)&&(t="https://m.test.baoxiaohe.com/render"),h.a.toDataURL(`${t}?id=${this.list[this.current].id}`).then(t=>{this.qrcode=t}).catch(t=>{})},onMouseWheel(t){const e=this.scale-t.deltaY/1e3/(10-o["MOUSE_SENSITY"]);e>.1&&e<=5&&(this.scale=e)},recoverPosition(){const t=document.getElementById("renderPicImg");t&&t.style&&(t.style.left="0px",t.style.top="0px")},onMouseDown(t){const e=document.getElementById("renderPreview"),i=document.getElementById("renderPicImg"),s=t.clientX,n=t.clientY,a=parseInt(i.style.left.replace("px"))||0,r=parseInt(i.style.top.replace("px"))||0;e.onmousemove=t=>{const o=s-t.clientX,l=n-t.clientY;i.style.left=a-o+"px",i.style.top=r-l+"px",e.onmouseup=t=>{e.onmousemove=null,e.onmouseup=null}}},doClearPic(){this.$track({category:"ai-definition",action:"click"}),this.clearLoad=!0,this.scale=1,this.recoverPosition(),setTimeout(()=>{Object(o["doAiclears"])({imgUrl:this.list[this.current].image}).then(t=>{var e;200===t.code&&(this.$message.success("智能清晰增强完成"),this.oimg=(null===(e=this.list[this.current])||void 0===e?void 0:e.image)?this.list[this.current].image+`?imageView2/2/w/${this.WIDTH-340}/h/${this.HEIGHT-280}/q/100`:"",this.cimg=t.data+`?imageView2/2/w/${this.WIDTH-340}/h/${this.HEIGHT-280}/q/100`,this.cimg_url=t.data,this.showSave=!0)})},800)},saveImg(){this.saveLoading=!0,this.$api.project.renderImageUpdate({id:this.list[this.current].id,image:this.cimg_url}).then(t=>{this.saveLoading=!1,0===t.errno&&(this.showSave=!1,this.clearLoad=!1,this.$message.success(t.errmsg),this.$emit("update-success",{id:this.list[this.current].id,image:this.cimg_url}),this.$forceUpdate())})},getImageWidth(t){},setCurrent(t){this.clearLoad||(this.scale=1,this.recoverPosition(),this.current=t)},setList(t){this.list=t},setCount(t){this.count=t},next(){this.current<this.list.length-1?(this.current++,this.$emit("currentChange",this.current),this.scale=1,this.recoverPosition()):this.current===this.list.length-1&&this.count>this.list.length&&(this.$emit("getList",!0),this.scale=1,this.recoverPosition()),this.clearLoad=!1},pre(){this.current>0&&(this.current--,this.scale=1,this.$emit("currentChange",this.current)),this.clearLoad=!1},delImage(){this.$confirm({title:"删除后数据无法恢复，是否要继续删除?",okText:"删除",okType:"danger",cancelText:"取消",centered:!0,zIndex:4005,onOk:()=>{"image"===this.renderType?this.$api.project.delImage({id:this.list[this.current].id}).then(t=>{0===t.errno&&(this.scale=1,this.$message.success(t.errmsg),this.list.splice(this.current,1),this.current>0&&this.list.length>0&&(this.current-=1),0===this.list.length&&(this.current=-1),this.$emit("getList",!0),this.$emit("currentChange",this.current))}):Object(o["taskDelete"])({task_id:this.videoList[this.videoCurrent].id}).then(t=>{200===t.code&&(this.$message.success("视频已删除"),this.$store.dispatch("render/fetchVideoList",{type:!1,project_id:this.project_data.id}))})}})},download(){var t,e,i;"image"===this.renderType?Object(u["b"])((null===(t=this.list[this.current])||void 0===t?void 0:t.image)||"",this.list[this.current].filename):(this.videoLoad=!0,this.videoLoadText="",Object(u["b"])((null===(e=this.videoList[this.videoCurrent])||void 0===e?void 0:e.videoFilePath)||"",null===(i=this.videoList[this.videoCurrent])||void 0===i?void 0:i.title),this.videoLoad=!1,this.videoLoadText="下载视频")}}},f=p,m=(i("8640"),i("2877")),g=Object(m["a"])(f,s,n,!1,null,null,null);e["default"]=g.exports},"35ac":function(t,e,i){"use strict";var s=i("33d1"),n=i.n(s);n.a},"35ae":function(t,e,i){t.exports=i.p+"editor-assets/img/next.fff7a59a.svg"},"362b":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"fo-12 pfow "},[t._v("高度")]),s("div",{staticClass:"light-render-input"},[s("input",{staticClass:"light-render-input",domProps:{value:t.rotate+t.rotateUnit},on:{focus:function(e){t.rotateUnit="",e.target.select()},blur:t.rotateInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.rotateInput(e)}}})])]),s("div",{staticClass:"flex flex-center mt-12 mb-24"},[s("div",{staticClass:"light-height"},[s("div",{staticClass:"line-panel"},[s("div",{ref:"linePanel",staticClass:"line"})]),s("img",{staticClass:"lh-img",attrs:{src:i("20c5")}}),s("div",{staticClass:"flag-panel",style:{left:t.fx+"px",top:t.fy+"px"},on:{mousedown:t.mouseDown}},[t._m(0)])])])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flag flex flex-center item-center"},[s("img",{attrs:{src:i("3230")}})])}],a=i("6116"),r={props:{value:{type:Number,require:!0},position:{type:Object},xrotate:{type:Number}},model:{prop:"value",event:"change"},data(){return{fx:0,fy:130,rotate:this.value,rotateUnit:"°"}},watch:{value(t){this.rotate=t,this.toAxis()}},mounted(){this.toAxis()},methods:{rotateInput(t){"blur"===t.type&&(this.rotateUnit="°");let e=0;t.target.value&&(e=parseFloat(Object(a["c"])(t.target.value))),e>=360&&(e=0),e<0&&(e=0),this.rotate!=e&&(this.rotate=e,this.$emit("change",e),this.emitSunHeight(),this.$emit("after-change",e),this.toAxis())},mouseDown(t){const e=this.$refs.linePanel.getBoundingClientRect(),i=e.x+e.width/2,s=e.y+e.height/2;document.onmousemove=t=>{let e=t.clientX-i,n=t.clientY-s;const a=Math.sqrt(Math.pow(e,2)+Math.pow(n,2)),r=a/130;let o=e/r,l=n/r;return o>0&&(o=0,l=-130),l>0&&(l=0,o=-130),this.toRotate(o,l),this.fx=o+130,this.fy=l+130,!1},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}},toRotate(t,e){const i=Math.atan2(-e,-t);let s=i/(2*Math.PI)*360;s<0&&(s+=360),this.rotate=parseInt(s),this.$emit("change",this.rotate),this.emitSunHeight()},emitSunHeight(){const t=10,e=-Math.cos((this.rotate+90)*Math.PI/180)*t,i=Math.sqrt(100-Math.pow(e,2)),s=-Math.cos(this.xrotate*Math.PI/180)*i,n=-Math.sin(this.xrotate*Math.PI/180)*i;this.$emit("position-change",{x:s,y:e,z:n}),this.$bus.$emit("sunHeightChange",{y:e,x:s,z:n})},toAxis(){let t=130*Math.cos((this.rotate+180)*Math.PI/180),e=130*Math.sin((this.rotate+180)*Math.PI/180);this.fx=t+130,this.fy=e+130}}},o=r,l=(i("d32c"),i("2877")),c=Object(l["a"])(o,s,n,!1,null,"76f5d754",null);e["default"]=c.exports},"365f":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABACAYAAACunKHjAAAGw0lEQVR4Xu1cfUxTVxQ/lM9BS8foZoG6FAoO6iQCmgxwUkwQlmrIhgHRBuKIk2SRyucIExEJ6Pi0mCWoYwZSUYhsGiGDkUAJAksUMajABpRmFqgbyAqV8VmWy3im6HuV0AeKvvNXee/c+37n984599x738UIXpT3AMAVADgAQAcAExyd9XRpFgA0AKAEgG4AeIIH3kjnojEAeAMAfz1ZuQKsnQDQCgBzum0xIhAJnwGA/Qo6Xo9NBgHgF10yMCJ2vAWe8PwLQ55xC7uIiEA5Yd96fK0kYL6G5QxEhA8AfExCp+uxiwcA0IKAIyJCAeDd9WgFCZj/AYAKjIgv34AhcqWcoKH1R4yIr1bayxvS7gJFxP9vkiJi0aMpIigiliY3yiMoj6A8AnfAp0KDCg0qNKjQ0DcboHLEK8kRlpaWtMOHDzsJhcLNbm5uzgwGw8bKysoagXn69OnY+Pj4aFdXV291dfXDixcvyicmJrRrNKlbG49gs9lmBQUFO4RCYQCDwUCrYS8VjUbzpKqqqi42NvaWSqWafmkDwxRWn4isrCx3sVgssrS0ZK4E68TEhFoikUhTUlI6VtJ+mW1WjwhbW1uTuro6kYeHB9oeMFja29tbAwICpCMjI2ghhWxZHSJcXFzeqa+v/5rD4bjoQTw/PDw8MDIyMox0bG1tWSwWy2Fx6RC3mVKp7Nm1a9f3PT09/5LMBPlEcLlci9u3byeyWCy0S/aCzM/Pz7W2tjYmJyfXNjU1ofXCZ7Jz506b06dP7/b29vYzMjJC+ywvyPDwsHL79u05CoVikkQyyCXC3NzcqLOz86iTk9NmPJDT09MTqampRdnZ2b/rMyIpKemjjIyMaDMzM0s8Pblc3snn8wunpqbmSSKDXCJkMlmIn5/fbgJP0B4/flySlZWF9h4XJDAwkLVnzx4n9LuqqkpeW1u7ECZIUlJSXDMzM8UAQMPrr7Gx8VeBQFD52hFx5MgRblFR0TdEwNva2pq3bdtWioDb2NiY3Lx5M8TX19dfJyfMNzc3N+zdu7dydHR0ISHeuXMnwsvLy5fAWG10dPR358+fV5BABjkeYWpqajQ4OJi6mOxwcYWFhZ2sqKgYQjcbGhq+EAgEgXiKMpms1t/f/yd0LzQ01K68vPwkkaEo2drb22fMzMwYGiLkEJGfn+8VGxtLuCWg0WhGGQxGMjJoy5Yt9I6OjhwizwEArbu7e+L9+/fRNj6Mj4+fodPpNkRkFBQUXIiLi2sz0CvIIUKlUn27YcOGD4nADAwM9HI4HGQ8nDhxgp+eno5in1DS0tIkp06dQhu0oFQqkxwcHHhEyo8fP/6TzWZnvhZE9PX1xRCNFAigSqXqt7OzO4N+x8XFueTl5SXoAx4fH5+bn5/fg3SGhoaS2Wy2I5G+XC5/yOPxCl8LIhISElxycnIIjZucnNRYWVnFa7Va4HA45v39/TkmJibmeOBnZ2enHB0dE5VK5RSNRkOTsTwLCwv01Q6uJCYm5ubm5i6QZoCQExoIQH9/v5jL5RJ+aSMWi7MLCwv7kK5UKhUcPHgwHA/45cuXy0QiUSO6FxMTw5NIJElEBioUik5HR0eJAQRgTckjAtUE1dXVacbGxmZ4wPr6+h44Ozufw+4VFxf7ikSifVjRhIotqVR6LSoqqhnT6e3tPcrj8XA/V5ibm5sWCoXpurWHAYSQRwQCceXKlV379+8PIwJUWloqjYyMbMLuo0o0ODiYjf6+ceOGSrdSLCkp+TQiIkJE1NfVq1fLw8PD6w0wXrcpuUSgnu/evRvh4eGBWwSheUZZWVmFSCSS6TMAhc6BAwdCieYb7e3tzZ6engvFGUlCPhFMJtP43r17R7lcrhsRyEePHv1x6dKl2rNnz3ZjVSSqNo8dO+Z66NChwI0bN27Skxe6tm7dek6tVi/5Is5AQsgnAgFCRrW0tES5urp66gOo1WpnNBqNGunQ6XQmjUYz1aff3d3d7uPj8wNGnoHGr25o6MZ/TU3N5wKBIEBPFblcW7QymawuKCjoZxJnnGtDBPYUVEClpaVFWltbv79cq3X1xsbG/k5PTy/BCqyV9LGMNqsTGs8/mE6nG0skkk9CQkKCmEzmB8sABmq1+q/KysoasVj8m0ajITMf4D1+bYjAnoxmqVFRUdzg4ODNfD5/E5PJXLKcr1ar0XJ+z/Xr1x8UFxcrSJhVLodzpLO2RCwX1SvQo4hYJJ0igiJiafxRHkF5BOURuGMSFRpUaFChQYWGvoL1WY6gDq5QR5lgyVEm6nDbokdQxx11tuWpA7CL6ZQ6Eq0zrlCH5J8bZN/Kf5vwH2L1dl/GTpZ9AAAAAElFTkSuQmCC"},3744:function(t,e,i){},"377a":function(t,e,i){t.exports=i.p+"editor-assets/img/ro.c4152682.svg"},"37dd":function(t,e,i){t.exports=i.p+"editor-assets/img/vip-enterprise.b72fcd58.svg"},3809:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-modal",{attrs:{visible:t.visible,footer:null,title:"棚拍视频设置",width:640,zIndex:6001,centered:""},on:{cancel:function(e){t.doCancel(),t.$emit("change",!1)}}},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"vistext fo-14"},[t._v("视频标题:")]),s("div",{staticClass:"ml-12 vis-content"},[s("a-input",{attrs:{placeholder:"请输入视频标题",maxLength:30},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)]),s("div",{staticClass:"flex flex-start item-center mt-12"},[s("div",{staticClass:"vistext fo-14"},[t._v("清晰度:")]),s("div",{staticClass:"ml-12 vis-content flex flex-start"},t._l(t.clears,(function(e,n){return s("div",{key:n,class:["clear-item px-12 flex flex-center item-center",t.clearIndex===n?"clear-item--active":""],on:{click:function(e){return t.changeClear(n)}}},[s("div",{class:["fo-14",t.clearIndex===n?"fo-white":""]},[t._v(t._s(e.label))]),e.needsVip?s("img",{staticClass:"ml-8",attrs:{src:i("0be3"),height:"14px",alt:""}}):t._e()])})),0)]),s("div",{staticClass:"mt-20 p-12 bg-gray"},[s("div",{staticClass:"flex flex-start item-center"},[s("a-icon",{staticClass:"fo-14 fo-theme",attrs:{type:"exclamation-circle"}}),s("div",{staticClass:"ml-8 fo-gray"},[t._v(" 您今天还剩余 "),s("span",{staticClass:"fo-theme bold"},[t._v(t._s(t.oneDayLimitCount-t.videoRenderCount<0?0:t.oneDayLimitCount-t.videoRenderCount))]),t._v(" 次免费渲染券，"),t.oneDayLimitCount-t.videoRenderCount>0?s("span",[t._v("本次将消耗 "),s("span",{staticClass:"fo-theme bold"},[t._v("1")]),t._v(" 张。")]):t._e(),t.isVip?t._e():s("a",{staticStyle:{color:"#cd9745"},on:{click:function(e){return t.showPersonalVip()}}},[t._v("开通VIP享有更多渲染次数")])])],1),s("div",{staticClass:"ml-22 fo-gray"},[t._v(" 棚拍时间较久，需隔日查看；拍摄完成后，将为您保存30天，请及时下载 ")])]),s("a-divider"),s("div",{staticClass:"mt-20 flex flex-between item-center"},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"flex flex-start item-center"},[s("a-popover",{attrs:{overlayClassName:"photo-notice",placement:"top"}},[s("template",{slot:"content"},[s("div",{staticClass:"text-center"},[s("div",{staticClass:"fo-14"},[t._v("未绑定微信将无法收到通知")]),s("div",{staticClass:"fo-14 mt-12"},[t._v("（账号设置-账号与安全-微信）")]),s("img",{staticClass:"mt-12",attrs:{src:"https://yun.baoxiaohe.com/qrcode/qrcode_for_gh_6524d8ae8445_344.jpg",width:"180px"}}),s("div",{staticClass:"fo-gray fo-14"},[t._v("扫码关注，接收提醒")])])]),s("a-checkbox",{attrs:{checked:t.needsNotice},on:{change:t.needsNoticeChange}},[t._v(" 拍摄完成提醒 "),s("a-icon",{staticClass:"fo-gray",attrs:{type:"question-circle"}})],1)],2)],1),s("div",{staticClass:"flex flex-start item-center ml-34"},[s("a-checkbox",{attrs:{checked:t.isVip,disabled:t.isVip},on:{change:t.watermarkChange}},[t._v(" 去水印logo ")]),t.isVip?t._e():s("img",{attrs:{src:i("0be3"),height:"14px"}})],1)]),s("div",{staticClass:"flex flex-end item-center"},[s("a-button",{attrs:{size:"large"},on:{click:function(e){t.doCancel(),t.$emit("change",!1)}}},[t._v("取消")]),s("a-button",{staticClass:"ml-16",attrs:{type:"primary",size:"large",loading:t.loading,disabled:t.oneDayLimitCount-t.videoRenderCount<=0},on:{click:function(e){return t.submit()}}},[t._v(t._s(t.submitText))])],1)])],1)},n=[],a=i("5530"),r=i("5880"),o=i("9393"),l=i("365c"),c={model:{prop:"visible",event:"change"},mixins:[o["a"]],props:{visible:{type:Boolean}},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapGetters"])("profile",["isVip"])),Object(r["mapGetters"])("render",["videos","videoFlag"])),data(){return{submitText:"确定",clears:[{label:"720P标清"},{label:"1080P高清",needsVip:!0}],clearIndex:0,ratios:[{w:4,h:3},{w:3,h:4},{w:16,h:9},{w:1,h:1},{w:9,h:16}],ratioIndex:2,clearWatermark:this.isVip,needsNotice:!0,videoRenderCount:0,oneDayLimitCount:0,title:this.$root.projectData.project_name+"-棚拍视频",loading:!1}},beforeDestroy(){this.$bus.$off("emitRenderGlb")},mounted(){this.renderLimit(),this.doSubmit()},methods:{doCancel(){this.loading=!1,this.submitText="确定"},changeClear(t){!this.clears[t].needsVip||this.isVip?this.clearIndex=t:this.showPersonalVip()},doSubmit(){this.$bus.$on("emitRenderGlb",t=>{Object(l["renderVideo"])({title:this.title,project_id:this.$root.projectData.id,glb_path:t,shed_id:this.videos[this.videoFlag].id,watermark:this.isVip?2:1,resolution:0===this.clearIndex?1:2,finish_notify:this.needsNotice?1:0,aspect_ratio:this.ratioIndex}).then(t=>{this.loading=!1,this.submitText="确定",200===t.code&&(this.$message.success("已进入拍摄，隔日上午8点可下载"),this.$emit("change",!1),this.$store.dispatch("render/savePage",1),this.$store.dispatch("render/fetchVideoList",{type:!1,project_id:this.$root.projectData.id}),this.renderLimit())})})},submit(){this.title?(this.$track({category:"render-kjl-video",action:"click"}),this.loading=!0,this.submitText="正在排队中",this.$bus.$emit("getRenderGlb")):this.$message.error("请输入视频标题")},renderLimit(){Object(l["renderLimit"])().then(t=>{200===t.code&&(this.videoRenderCount=t.data.videoRenderCount,this.oneDayLimitCount=t.data.oneDayLimitCount)})},watermarkChange(t){this.isVip?this.clearWatermark=t.target.checked:this.showPersonalVip()},needsNoticeChange(t){this.needsNotice=t.target.checked}}},h=c,d=(i("13a8"),i("ef7f"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,"114b768f",null);e["default"]=u.exports},3828:function(t,e,i){},"385c":function(t,e,i){},"38a8":function(t,e,i){"use strict";var s=i("0570"),n=i.n(s);n.a},"38d7":function(t,e,i){},"38f2":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.project_data?s("div",{staticClass:"editor-header min-width bg-white"},[s("div",{staticClass:"flex item-center container"},[s("a-popconfirm",{staticClass:"const",attrs:{"overlay-class-name":"backpopover",placement:"topLeft","ok-text":"确定","cancel-text":"取消"},on:{confirm:t.goHome}},[s("template",{slot:"title"},[s("p",[t._v("您正在编辑此页面，确定要离开吗?")])]),s("div",{staticClass:"flex item-start"},[t.isCompanyDomain?s("img",{staticClass:"logo",attrs:{id:"bxhlogo",alt:t.enterprise_info.enterpriseShortName+"官网",src:t.enterprise_info.logo,title:"返回首页"}}):s("img",{staticClass:"logo",attrs:{id:"bxhlogo",src:i("1ae4"),alt:"包小盒官网",title:"返回首页"}})])],2),s("a-popover",{attrs:{placement:"bottom","overlay-class-name":"render-pop",trigger:"click"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[s("template",{slot:"content"},[s("div",[s("div",{staticClass:"file-item",on:{click:t.onCreateNewDesign}},[t._v("新建设计方案")]),s("div",{staticClass:"file-item",on:{click:t.toBlankWinodw}},[t._v("查看我的设计方案")]),s("div",{staticClass:"file-item",on:{click:t.onImportPsd}},[t._v("导入psd")]),s("div",{staticClass:"file-item",class:[{disable:!t.accessToken||!t.project_data.id}],on:{click:t.handleSaveAll}},[t._v(" 保存 ")]),s("div",{staticClass:"file-item",class:[{disable:!t.accessToken||!t.project_data.id}],on:{click:t.handleSaveAnother}},[t._v(" 创建副本 ")]),s("div",{staticClass:"file-item",class:[{disable:!t.accessToken||!t.project_data.id}],on:{click:t.openHistory}},[t._v(" 历史版本记录 "),s("img",{staticClass:"pointer",attrs:{src:i("0be3"),height:"14px",alt:""},on:{click:t.gotoVip}})]),t.features.header__file.includes("send-template-center")?s("div",{staticClass:"file-item",class:[{disable:!t.accessToken||!t.project_data.id}],on:{click:t.commitDesign}},[t.is_contribute||t.isCompanyDomain?t._e():s("span",[t._v(" 投稿至模板中心 ")]),!t.is_contribute&&t.isCompanyDomain?s("span",[t._v(" 发布至模板中心 ")]):t._e()]):t._e(),(t.isAdmin||t.isCompanyDomain)&&t.is_contribute?s("div",{staticClass:"file-item",on:{click:t.commitDesign}},[t._v(" 审核投稿作品 ")]):t._e(),s("div",{staticClass:"file-item border-t",on:{click:t.toBlankSocail}},[t._v("帮助中心")])])]),s("div",{staticClass:"ml-30",staticStyle:{"min-width":"62px"}},[s("div",{staticClass:"btn-new flex flex-center item-center",on:{click:function(e){t.filePickerVisible=!t.filePickerVisible}}},[s("div",{staticClass:"mr-4"},[t._v("文件")]),s("svg",{staticClass:"icon",attrs:{t:"1578128532967",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1945",width:"10",height:"8"}},[s("path",{attrs:{d:"M511.999488 819.413462 72.8374 204.586538 951.1626 204.586538Z","p-id":"1946",fill:"#333333"}})])])])],2),t.project_data.id&&t.accessToken?s("div",{staticClass:"const recall-group ml-12"},[s("a-tooltip",{staticClass:"item",attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",[t._v("撤回")])]),s("div",{staticClass:"recall-btn flex flex-center item-center"},[t.canRollback?s("img",{attrs:{src:i("33ba")},on:{click:t.handleRollBack}}):s("img",{attrs:{src:i("1b45")}})])],2),s("a-tooltip",{staticClass:"item",attrs:{placement:"bottom",disabled:!t.canReRollback}},[s("template",{slot:"title"},[s("span",[t._v("恢复")])]),s("div",{staticClass:"recall-btn flex flex-center item-center"},[t.canReRollback?s("img",{attrs:{src:i("eb6b")},on:{click:t.handleReRollBack}}):s("img",{attrs:{src:i("35ae")}})])],2),s("div",{staticClass:"fo-gray fo-12 header-time"},[s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",[t._v(t._s(t.project_is_saving?"自动保存中...":t.save_time))])]),t.project_is_saving?s("div",{staticClass:"recall-btn flex flex-center item-center"},[s("icon-saving",{attrs:{"view-box":"0 0 22 23",width:"24",height:"24"}})],1):s("div",{staticClass:"recall-btn flex flex-center item-center",on:{click:t.handleUpdate}},[s("icon-saved",{attrs:{"view-box":"0 0 22 23",width:"24",height:"24"}})],1)],2)],1),s("a-popover",{attrs:{trigger:"click","overlay-class-name":"rename-wrapper",placement:"bottom"}},[s("template",{slot:"content"},[s("rename",{ref:"renameRef",attrs:{"project-name":t.project_data.project_name,trademark:t.project_data.extend_attrs?t.project_data.extend_attrs.trademark:"","product-name":t.project_data.extend_attrs?t.project_data.extend_attrs.productName:""}})],1),s("div",{staticClass:"const rename-content flex item-center ml-16 text-pointer"},[s("div",{staticClass:"rename-title"},[t._v(t._s(t.renameTitle))]),s("div",{staticClass:"rename-suffix ml-4"},[t._v("- 编辑")])])],2)],1):t._e(),t.features.header&&t.features.header.length?s("div",{staticClass:"header-right-btn-group"},[t.features.header.includes("customer-service-button")?s("customer-service-button"):t._e(),s("a-popover",{attrs:{placement:"bottom",trigger:"click","overlay-class-name":"risk-wrapper"},on:{visibleChange:t.onRiskVisibleChange},model:{value:t.riskVisible,callback:function(e){t.riskVisible=e},expression:"riskVisible"}},[s("template",{slot:"content"},[s("div",{staticClass:"px-12 py-16"},[s("risk",{ref:"riskRef",on:{close:function(e){t.riskVisible=!1},"risk-result":t.handleRiskResult}})],1)]),s("div",{staticClass:"const-right top-btn flex flex-center item-center"},[s("div",{ref:"riskRef",staticClass:"fo-default fo-14 text-center px-15"},[s("i",{staticClass:"iconfont icon-head-fengxianjiance mr-8",staticStyle:{color:"#19cc81"}}),s("span",[t._v("印前检测")])])])],2),t.showRenderBtn?s("div",{staticClass:"const-right top-btn flex flex-center item-center mr-10",on:{click:t.doRender}},[t._m(0)]):t._e(),t.features.header.includes("share-button")?s("div",{class:"const-right top-btn flex flex-center item-center px-15",on:{click:t.onClickShare}},[s("i",{staticClass:"iconfont icon-head-fenxiang mx-8",staticStyle:{color:"#888ca2"}}),s("div",{staticClass:"fo-default fo-14"},[t._v("分享")])]):t._e(),t.features.header.includes("printing-button")?s("printing-button",{on:{click:t.handleCreatePrintOrder}}):t._e(),t.features.header.includes("export-button")?s("div",{staticClass:"mr-8"},[s("a-button",{attrs:{type:"primary"},on:{click:t.outputShow}},[s("i",{staticClass:"iconfont icon-head-daochu mr-8"}),t._v(" 导出 ")])],1):t._e(),s("a-popover",{staticStyle:{display:"inline-block"},attrs:{placement:"bottomRight",trigger:"click","overlay-class-name":"render-pop"},model:{value:t.downloadVisible,callback:function(e){t.downloadVisible=e},expression:"downloadVisible"}},[s("template",{slot:"content"},[s("download-pop",{model:{value:t.downloadVisible,callback:function(e){t.downloadVisible=e},expression:"downloadVisible"}})],1)],2)],1):t._e()],1)]):t._e(),s("a-modal",{attrs:{centered:"",title:"创建副本",visible:t.saveVisible,footer:null,"z-index":4001},on:{cancel:function(e){t.saveVisible=!1}}},[s("a-form",{attrs:{form:t.form}},[s("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{"label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol,label:"文件名"}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["template_id"],expression:"['template_id']"}]})],1),s("a-form-item",{attrs:{"label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol,label:"文件名"}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["project_name"],expression:"['project_name']"}]})],1)],1),s("div",{staticClass:"save-footer flex flex-center item-center"},[s("a-button",{staticStyle:{width:"120px"},attrs:{size:"large"},on:{click:function(e){t.saveVisible=!1}}},[t._v("取消")]),s("a-button",{staticClass:"ml-24",staticStyle:{width:"120px"},attrs:{type:"primary",size:"large"},on:{click:t.handleSubmit}},[t._v("确认")])],1)],1),s("proofing",{model:{value:t.proofingVisible,callback:function(e){t.proofingVisible=e},expression:"proofingVisible"}}),s("share-model",{model:{value:t.shareVisible,callback:function(e){t.shareVisible=e},expression:"shareVisible"}}),s("resize-model",{attrs:{nptype:t.newprojectType,npvalue:t.newprojectValue},on:{npchange:t.npchange},model:{value:t.resizeVisible,callback:function(e){t.resizeVisible=e},expression:"resizeVisible"}}),t.$root.modeReady?s("order-drawer",{attrs:{load:t.orderLoad},model:{value:t.orderDrawerVisible,callback:function(e){t.orderDrawerVisible=e},expression:"orderDrawerVisible"}}):t._e(),s("new-project",{on:{"use-change":t.newProjectUseChange},model:{value:t.npvisible,callback:function(e){t.npvisible=e},expression:"npvisible"}}),s("commit",{attrs:{title:t.commitTitle},model:{value:t.commitVisible,callback:function(e){t.commitVisible=e},expression:"commitVisible"}}),t.renderVisible?s("render"):t._e(),s("render-old",{directives:[{name:"show",rawName:"v-show",value:t.renderOldVisible,expression:"renderOldVisible"}]}),t.project_data.id&&t.knife_data?s("product-order",{ref:"productOrderRef"}):t._e()],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"fo-default fo-14 text-center",staticStyle:{width:"98px"}},[s("img",{staticStyle:{"margin-top":"3px"},attrs:{src:i("4b30"),alt:""}}),s("span",[t._v("渲染")]),s("div",{staticClass:"tag"},[t._v("棚拍")])])}],a=(i("2532"),i("ddb0"),i("5530")),r=i("5880"),o=i("87a0"),l=i("38f6"),c=i("15fa"),h=i("dba3"),d=i("3433"),u=i("ab73"),p=i("8506"),f=i("e7a5"),m=i("5a0c"),g=i.n(m),v=i("365c"),b=i("07a7"),y=i("85bd"),_=i("d7c8"),x=i("f30a"),w=i("a5d5"),C=i("89f0"),k=i("248f"),S=i("6316"),A=i("467d"),O=i("b92a"),j=i("ec51"),M=i("e1042"),I=i("b6c6"),T=i("485e"),E=i("6116"),D=i("da71"),L=i("f856");const P={labelCol:{span:6},wrapperCol:{span:14}},R={labelCol:{span:6},wrapperCol:{span:14}};var z={components:{newProject:l["default"],ShareModel:c["default"],ResizeModel:h["default"],OrderDrawer:d["default"],commit:f["default"],Proofing:b["default"],DownloadPop:y["default"],Risk:u["default"],Render:_["default"],IconSaved:w["a"],IconSaving:C["a"],Rename:T["default"],productOrder:p["default"],RenderOld:x["default"],customerServiceButton:k["default"],checkBeforePrintingButton:S["default"],d3RenderButton:A["default"],shareButton:O["default"],printingButton:j["default"],exportButton:M["default"]},data(){return{count:0,transition:!1,tipVisible:!0,timeout:null,is_up:!1,proofingVisible:!1,basePath:"/components/breadcrumb",editable:!1,shareVisible:!1,saveVisible:!1,confirmLoading:!1,filePickerVisible:!1,resizeVisible:!1,downloadVisible:!1,riskVisible:!1,renameVisible:!1,orderDrawerVisible:!1,productOrderModalVisible:!1,npvisible:!1,formItemLayout:P,formTailLayout:R,project:{},visible:!1,updateTime:"保存",orderLoad:!1,saveLoad:!1,newprojectType:!1,newprojectValue:null,commitVisible:!1,commitTitle:"",is_admin:0,is_contribute:!1,load:!1,routes:[{breadcrumbName:"",edit:!0},{breadcrumbName:"外侧面",children:[{key:"FRONT",breadcrumbName:"外侧面"},{key:"BACKEND",breadcrumbName:"内侧面"}]}],renderWindow:null}},watch:{projectVersion(t){this.routes[0].breadcrumbName=this.project_data.project_name||""},updateLoading(t){t&&(this.updateTimeFilter(),setTimeout(()=>{this[o["B"]](!1)},3e3))}},beforeCreate(){this.form=this.$form.createForm(this,{name:"time_related_controls"})},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("config",["helpers"])),Object(r["mapState"])("enterprise",["isCompanyDomain","enterprise_info","enterprise_user_info"])),Object(r["mapState"])(["projectVersion","updateLoading"])),Object(r["mapState"])("profile",["vip","user","accessToken"])),Object(r["mapGetters"])("profile",["isMch","isVip","isAdmin","mchConf"])),Object(r["mapGetters"])("render",["renderVisible","canIDoAnimation","renderOldVisible"])),Object(r["mapState"])("editor-v2",["project_data","knife_data","isCup","scale","is_outside","localHistory","last_saved_local_history_ts","project_last_saved_ts","project_is_saving"])),{},{features(){return this.isCompanyDomain?L["a"].enterprise:L["a"].www},showRenderBtn(){let t=!1;return this.isCompanyDomain?this.features.header.includes("d3-render-button")&&this.enterprise_user_info.isVip&&(t=!0):t=!0,!!t&&(!this.isCup||this.isCup&&this.canIDoAnimation)},renameTitle(){const t=this.project_data.extend_attrs||{},e=[t.trademark,t.productName].filter(t=>t).join("-");return e?`${e}: ${this.project_data.project_name}`:this.project_data.project_name},isInside(){return!this.is_outside},canRollback(){return this.localHistory&&!this.localHistory.checkIsFirst()},canReRollback(){return this.localHistory&&!this.localHistory.checkIsLast()},save_time(){return this.project_last_saved_ts?g()(this.project_last_saved_ts).format("HH:mm")+" 已保存":"保存"}}),mounted(){this.is_contribute="contribute"===this.$route.query.type,this[o["B"]](!1),this.$bus.$on("show-print-and-order",()=>{this.proofingVisible=!0}),this.$bus.$on("openRender",t=>{this.$store.dispatch("render/saveRenderVisible",t)}),window.addEventListener("message",this.receiveMessage)},beforeDestroy(){clearInterval(this.timeout),this.timeout=null,this.$bus.$off("show-print-and-order"),this.$bus.$off("openRender"),window.removeEventListener("message",this.receiveMessage)},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({onCreateNewDesign(){this.accessToken?this.npvisible=!0:this.showLoginDialog()},onImportPsd(){this.accessToken?this.$bus.$emit("show-psd-modal"):this.showLoginDialog()},showLoginDialog(){this.$store.commit("profile/SET_SHOW_LOGIN_MODAL",!0)},onRiskVisibleChange(t){this.accessToken?this.project_data.id||(this.$message.info("请选择一个模板开始设计"),this.openLeftSidePanel(),this.riskVisible=!1):(this.riskVisible=!1,this.showLoginDialog())},openLeftSidePanel(){this.$store.commit("editor-v2/set_left_side_show",!0),this.$route.query.id||this.$route.query.workOuterId?this.$store.commit("editor-v2/set_left_side_cur_menu_index",1):this.$store.commit("editor-v2/set_left_side_cur_menu_index",0)},goHome(){window.location.href="/"},receiveMessage(t){"close"===t.data?(this.$store.dispatch("render/saveRenderVisible",!1),this.$store.dispatch("render/saveRenderOldVisible",!1)):"openOld"===t.data&&(this.$store.dispatch("render/saveRenderVisible",!1),this.$store.dispatch("render/saveRenderOldVisible",!0))}},Object(r["mapActions"])(["rollbackHistory","reRollbackHistory","saveFullTemplateV2","saveForceCreateV2","saveIsInside"])),Object(r["mapMutations"])([o["B"]])),Object(r["mapMutations"])("profile",[I["d"]])),Object(r["mapActions"])("config",["fetchHelpers"])),Object(r["mapMutations"])("render",["setRenderType"])),{},{async onClickShare(){if(this.accessToken)return this.project_data.id?void(this.$route.query.type&&"preview"===this.$route.query.type?(this.handleUpdate(),await this.$store.dispatch("saveForceCreateV2",{router:this.$router,knife_data:this.knife_data,project_data:this.project_data}),this.showRenameBefore("share")):this.shareVisible=!0):(this.$message.info("请选择一个模板开始设计"),this.openLeftSidePanel(),void(this.riskVisible=!1));this.showLoginDialog()},gotoVip(){this[I["d"]](!0)},async handleShare(){"preview"===this.$route.query.type&&await this.$store.dispatch("saveForceCreateV2",{router:this.$router,knife_data:this.knife_data,project_data:this.project_data}),this.shareVisible=!0},openHistory(){this.accessToken&&this.project_data.id&&(this.visible=!1,this.isVip?this.$emit("updateHistoryShow",!0):this.gotoVip())},async outputShow(){if(this.accessToken)if(!this.isCompanyDomain||this.enterprise_user_info.isVip){if(!this.project_data.id)return this.$message.info("请选择一个模板开始设计"),this.openLeftSidePanel(),void(this.riskVisible=!1);"preview"===this.$route.query.type&&await this.$store.dispatch("saveForceCreateV2",{router:this.$router,knife_data:this.knife_data,project_data:this.project_data}),await this.saveFullTemplateV2({projectData:this.project_data,knifeData:this.knife_data}),this.downloadVisible=!0}else this.$message.info("导出设计无权限，请联系管理员");else this.showLoginDialog()},showProductOrder(){this.productOrderModalVisible=!0},handleSaveAnother(){this.accessToken&&this.project_data.id&&(this.saveVisible=!0,this.$nextTick(()=>{const{project_name:t,id:e}=this.project_data;this.form.setFieldsValue({template_id:e,project_name:Object(E["i"])(t)})}))},handleSubmit(){this.form.validateFields(async(t,e)=>{if(t)return;const i=Object(a["a"])({},e);i.project_name||this.$message.error("请输入文件名"),await this.saveFullTemplateV2({projectData:this.project_data,knifeData:this.knife_data});const s=await Object(v["copyDesign"])(i);this.saveVisible=!1;const{id:n}=s.data;this.$message.success("操作成功"),window.location.href="/design?id="+n})},async commitDesign(){this.accessToken&&this.project_data.id&&("preview"!==this.$route.query.type?(await this.saveFullTemplateV2({projectData:this.project_data,knifeData:this.knife_data}),this.commitVisible=!0,this.commitTitle=this.is_contribute?"审核投稿作品":"投稿至模板中心",this.isCompanyDomain&&!this.is_contribute&&(this.commitTitle="发布至模版中心")):await this.$store.dispatch("saveForceCreateV2",{router:this.$router,knife_data:this.knife_data,project_data:this.project_data}))},toBlankSocail(){window.open("https://help.baoxiaohe.com/support/")},changeBreadName(t){const e=[...this.routes];e[1].breadcrumbName=t,this.routes=[...e]},closeRisk(){this.$refs.riskRef.parentNode.click()},chooseBread(t){this.editable=!0},toBlankWinodw(){this.accessToken?this.isCompanyDomain?window.open("/admin/design"):window.open("/mydesign"):this.showLoginDialog()},npchange(){this.newprojectValue=null,this.newprojectType=!1},newProjectUseChange(t){this.newprojectValue=t,this.newprojectType=!0,this.resizeVisible=!0},async doRender(){if(!this.accessToken)return void this.showLoginDialog();if(!this.project_data.id)return this.$message.info("请选择一个模板开始设计"),this.openLeftSidePanel(),void(this.riskVisible=!1);const t=this.$message.loading("加载中",0);this.setRenderType("image"),this.$route.query.type&&"preview"===this.$route.query.type?(await this.handleUpdate(),this.$store.dispatch("render/saveRenderVisible",!0)):(await this.saveFullTemplateV2({projectData:this.project_data,isAuto:!1,knifeData:this.knife_data}),this.$store.dispatch("render/saveRenderVisible",!0)),setTimeout(t,0)},async handleUpdate(){"preview"!==this.$route.query.type?this.saveLoad||(this.$store.commit("editor-v2/set_last_saved_local_history_ts",this.localHistory.getCurTs()),this.$emit("update",""),this.saveLoad=!0,setTimeout(()=>{this.saveLoad=!1},3e3)):await this.$store.dispatch("saveForceCreateV2",{router:this.$router,knife_data:this.knife_data,project_data:this.project_data})},filePickerChange(t){this.filePickerVisible=t},updateProject(t){this.project_data.project_name=t.target.value||"",this.routes[0].breadcrumbName=t.target.value||"未命名"},updateTimeFilter(){this.updateTime=g()(Date.now()).format("HH:mm")+" 已保存"},handleRollBack(){this.$bus.$emit("design/localhistory_rollback")},handleReRollBack(){this.$bus.$emit("design/localhistory_reRollback")},async handleSaveAll(){this.accessToken&&this.project_data.id&&("preview"===this.$route.query.type&&await this.$store.dispatch("saveForceCreateV2",{router:this.$router,project_data:this.project_data,knife_data:this.knife_data}),this.saveFullTemplateV2({projectData:this.project_data,knifeData:this.knife_data,isAuto:!1}),this.visible=!1)},tempTest(){this.$message.info("正在紧急开发中，敬请期待！")},navigateTo(t){"share"===t?this.shareVisible=!0:"render"===t&&this.$store.dispatch("render/saveRenderVisible",!0)},async handleCreatePrintOrder(){this.$track({category:"ClickPrintButton",action:"click"}),this.project_data.science_id!==D["CUSTOMIZED_SCIENCE_ID"]?(this.is_up=!1,this.riskVisible=!0,await this.saveForceCreateV2({router:this.$router,knife_data:this.knife_data,project_data:this.project_data}),await this.saveFullTemplateV2({projectData:this.project_data,isAuto:!1,knifeData:this.knife_data}),this.$nextTick(()=>{this.$refs.riskRef.beginRiskCheck(!0)})):this.$message.error("自定义材质暂时不支持印刷下单，请联系客服")},handleRiskResult({hasRisk:t}){this.$refs.productOrderRef.show({hasRisk:t})}})},N=z,B=(i("2e3f"),i("191d"),i("2877")),F=Object(B["a"])(N,s,n,!1,null,"17d396ee",null);e["default"]=F.exports},"38f6":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"editpr-newpro"},[s("a-modal",{attrs:{centered:"",title:"新建设计",footer:null,width:"928px"},on:{close:function(e){t.dialogVisible=!1}},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[s("div",{staticClass:"w-100 flex flex-end item-center"},[s("div",{staticClass:"mysesign-btn flex flex-center item-center"},[s("img",{attrs:{src:i("222b")}}),s("div",{staticClass:"fo-14 ml-4 fo-theme",on:{click:t.toBlankWinodw}},[t._v("我的设计")])]),s("a-input-search",{staticClass:"ml-8",staticStyle:{width:"200px",height:"36px"},attrs:{placeholder:"搜索 模型编号/关键词"},on:{search:t.onSearch},model:{value:t.query.keyword,callback:function(e){t.$set(t.query,"keyword",e)},expression:"query.keyword"}})],1),s("div",{staticClass:"mt-16 editpr-newpro__panel"},[s("div",{class:"flag-item fo-14 "+(-1===t.cateFlag&&"flag-item-active"),on:{click:function(e){return t.changeCate(-1,"")}}},[t._v(" 全部 ")]),t._l(t.cate,(function(e,i){return s("div",{key:i,class:"flag-item fo-14 "+(t.cateFlag===i&&"flag-item-active"),on:{click:function(s){return t.changeCate(i,e.id)}}},[t._v(" "+t._s(e.cate_name)+" ")])}))],2),s("a-spin",{attrs:{spinning:t.loading}},[s("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"}),s("div",{staticClass:"editpr-newpro__content flex flex-start flex-wrap"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&0===t.list.length,expression:"!loading && list.length === 0"}],staticClass:"nodata flex flex-center item-center"},[s("div",[s("img",{attrs:{src:i("e597")}}),s("div",{staticClass:"fo-14 mt-12 text-center"},[t._v("暂无模型，去别处逛逛~")])])]),t._l(t.list,(function(e,i){return s("div",{key:i,staticClass:"good-item"},[s("Good",{attrs:{good:e},on:{open:function(i){return t.createBlank(e)},collect:t.handleCollect}})],1)}))],2)],1),s("div",{staticClass:"flex flex-end mt-16"},[s("a-pagination",{attrs:{size:"small",total:t.query.count,"default-page-size":t.query.pageSize,"show-quick-jumper":""},on:{change:t.handlePagination},model:{value:t.query.currentPage,callback:function(e){t.$set(t.query,"currentPage",e)},expression:"query.currentPage"}})],1)],1)],1)},n=[],a=(i("1276"),i("5530")),r=i("3390"),o=i("365c"),l=(i("5880"),{props:["visible"],components:{Good:r["default"]},data(){return{dialogVisible:this.visible,query:{keyword:"",cate_id:"",currentPage:1,pageSize:8,count:0},onload:!1,cateFlag:-1,cate:[],list:[],loading:!1,kload:!1}},model:{prop:"visible",event:"change"},watch:{visible(t){this.dialogVisible=t,t&&!this.onload&&(this.getCate(),this.getList(),this.onload=!0)},dialogVisible(t){this.$emit("change",t)}},methods:{handleCollect(t){Object(o["addTempCollection"])({type_id:t}).then(t=>{this.getList(),this.$message.success("操作成功")}).catch(t=>{this.$message.error("操作失败")})},toBlankWinodw(){window.open("/mydesign")},changeCate(t,e){this.cateFlag=t,this.query.cate_id=e,this.query.currentPage=1,this.getList()},onSearch(t){this.query.currentPage=1,this.query.keyword=t,this.getList()},getCate(){this.$api.templates.cateList({currentPage:1,pageSize:100,field:"id,cate_name"}).then(t=>{t&&(this.cate=t.data.data)})},handlePagination(){this.getList()},getList(){this.loading=!0,this.$api.templates.getBlankModel(this.query).then(t=>{t&&(this.query.count=t.data.count,this.list=t.data.data.map(t=>Object(a["a"])(Object(a["a"])({},t),{keyArr:t.keywords?t.keywords.split(","):[],flag:0})))}).finally(()=>{this.loading=!1})},createBlank(t){this.$api.material.science({science_type:1,currentPage:1,pageSize:1e3}).then(e=>{if(!e)return;const i=e.data.data,s=i.find(e=>e.id===t.def_science_id);s&&Object(o["createDesignByBlank"])({length:t.length,width:t.width,height:t.height,size_type:"id",thickness:s.thickness,science_id:t.def_science_id,science_name:s.science_name,cate_id:t.cate_id}).then(t=>{this.loading=!1,t&&(this.visibleValue=!1,window.location.href="/design?id="+t.data.id+"&type=blank")})})}}}),c=l,h=(i("4929"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,null,null);e["default"]=d.exports},"392f":function(t,e,i){var s=i("6d8b"),n=s.inherits,a=i("19eb"),r=i("9850");function o(t){a.call(this,t),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}o.prototype.incremental=!0,o.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},o.prototype.addDisplayable=function(t,e){e?this._temporaryDisplayables.push(t):this._displayables.push(t),this.dirty()},o.prototype.addDisplayables=function(t,e){e=e||!1;for(var i=0;i<t.length;i++)this.addDisplayable(t[i],e)},o.prototype.eachPendingDisplayable=function(t){for(var e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},o.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var e=this._displayables[t];e.parent=this,e.update(),e.parent=null}for(t=0;t<this._temporaryDisplayables.length;t++){e=this._temporaryDisplayables[t];e.parent=this,e.update(),e.parent=null}},o.prototype.brush=function(t,e){for(var i=this._cursor;i<this._displayables.length;i++){var s=this._displayables[i];s.beforeBrush&&s.beforeBrush(t),s.brush(t,i===this._cursor?null:this._displayables[i-1]),s.afterBrush&&s.afterBrush(t)}this._cursor=i;for(i=0;i<this._temporaryDisplayables.length;i++){s=this._temporaryDisplayables[i];s.beforeBrush&&s.beforeBrush(t),s.brush(t,0===i?null:this._temporaryDisplayables[i-1]),s.afterBrush&&s.afterBrush(t)}this._temporaryDisplayables=[],this.notClear=!0};var l=[];o.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new r(1/0,1/0,-1/0,-1/0),e=0;e<this._displayables.length;e++){var i=this._displayables[e],s=i.getBoundingRect().clone();i.needLocalTransform()&&s.applyTransform(i.getLocalTransform(l)),t.union(s)}this._rect=t}return this._rect},o.prototype.contain=function(t,e){var i=this.transformCoordToLocal(t,e),s=this.getBoundingRect();if(s.contain(i[0],i[1]))for(var n=0;n<this._displayables.length;n++){var a=this._displayables[n];if(a.contain(t,e))return!0}return!1},n(o,a);var c=o;t.exports=c},3937:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex flex-between item-center"},[i("div",[t._v("透明度")]),i("div",{staticClass:"w-120"},[i("a-slider",{staticStyle:{width:"120px"},attrs:{min:1,max:100},model:{value:t.curDesign.style.opacity,callback:function(e){t.$set(t.curDesign.style,"opacity",e)},expression:"curDesign.style.opacity"}})],1)])},n=[],a=i("5530"),r=i("5880"),o={computed:Object(a["a"])({},Object(r["mapGetters"])("editor-v2",["curDesign"]))},l=o,c=i("2877"),h=Object(c["a"])(l,s,n,!1,null,null,null);e["default"]=h.exports},"398a":function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("365c"),a=i("3ccf"),r=i("ee60"),o=i("7fad");i("971a");e["default"]=Object(s["b"])({setup(){const{loading:t,data:e,refetch:i}=Object(a["c"])(n["hasPassword"]);return()=>{var n,a,l;return Object(s["c"])("div",{class:"setting"},[Object(s["c"])("a-spin",{attrs:{spinning:t.value}},[Object(s["c"])("div",{class:"setting__content pb-80"},[Object(s["c"])(r["default"],{attrs:{phone:null===(n=e.value)||void 0===n?void 0:n.mobile},on:{refresh:i}}),Object(s["c"])(o["default"],{attrs:{mobile:null===(a=e.value)||void 0===a?void 0:a.mobile,nickname:null===(l=e.value)||void 0===l?void 0:l.nickName},on:{refresh:i}})])])])}}})},"39c8":function(t,e,i){},"39f3":function(t,e,i){t.exports=i.p+"editor-assets/img/line.fca883e3.svg"},"39fe":function(t,e,i){},"3a07":function(t,e,i){"use strict";var s=i("3343"),n=i.n(s);n.a},"3a17":function(t,e,i){t.exports=i.p+"editor-assets/img/ang6-w.6a6a0064.svg"},"3b15":function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("dd98"),a=i.n(n);i("469f");e["default"]=Object(s["b"])({setup(t,e){const i=e.vuex.mapState(["scale"]);return()=>Object(s["c"])("div",{class:"select-all-wrapper",style:{width:24/i.scale.value+"px",height:24/i.scale.value+"px",lineHeight:24/i.scale.value+"px",left:`-${32/i.scale.value}px`,top:`-${32/i.scale.value}px`,boxShadow:`0px ${2/i.scale.value}px ${5/i.scale.value}px 0px rgba(0, 0, 0, 0.1)`},on:{click:t=>{e.emit("click",t)}}},[Object(s["c"])("img",{style:{width:12/i.scale.value+"px",height:12/i.scale.value+"px"},attrs:{src:a.a,alt:""}})])}})},"3b53":function(t,e,i){"use strict";i.r(e);i("b680"),i("be2d");var s=i("3112"),n=i("29bf"),a=i("eda1"),r=i("ca9b"),o=i("f4b1"),l=i("365c"),c=i("1fd7"),h=i("262e"),d=i("de66");e["default"]={name:"paid",data(){return{data:null,order:null,loading:!1}},mounted(){this.loadData()},methods:{async loadData(){this.loading=!0;const{order_id:t}=this.$route.query;if(t)try{const e=await Object(l["getOrderDetail"])(t);this.order=e,this.data=Object(c["forgePriceDataFromPrintOrder"])(e)}catch(e){}finally{this.loading=!1}}},render(){const t=arguments[0];return t("div",{class:"Payed"},[t("div",{class:"pay-wrap"},[t(r["default"]),t(a["default"],[t("div",{class:"p-32"},[t(s["default"],{attrs:{status:"已付款",current:2}}),this.order&&t(n["default"],{attrs:{data:this.data,images:Object(c["getImages"])(this.order),message:Object(c["getPayInfo"])(this.order).message}}),this.order&&t("div",{class:"ml-auto text-right pt-32 bottom-color"},[t("span",["总额： ¥ "]),t("span",{class:"sum"},[this.order.total_fee.toFixed(2)]),t("br"),this.order&&t(h["default"],{attrs:{address:Object(c["getAddress"])(this.order)}})])]),t(d["default"])]),t(o["default"])])])}}},"3bab":function(t,e,i){"use strict";var s=i("2138"),n=i.n(s);n.a},"3bba":function(t,e,i){},"3bf5":function(t,e,i){t.exports=i.p+"editor-assets/img/shortcut.182ce30f.svg"},"3c7c":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=i("2a4ae"),a=i("e762"),r=o(a);function o(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function h(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var d=function(t){function e(){return l(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return h(e,t),s(e,[{key:"valid",value:function(){return-1!==this.data.search(/^([0-9]{2})+$/)}},{key:"encode",value:function(){var t=this,e=this.data.match(/.{2}/g).map((function(e){return t.encodePair(e)})).join("");return{data:n.START_BIN+e+n.END_BIN,text:this.text}}},{key:"encodePair",value:function(t){var e=n.BINARIES[t[1]];return n.BINARIES[t[0]].split("").map((function(t,i){return("1"===t?"111":"1")+("1"===e[i]?"000":"0")})).join("")}}]),e}(r.default);e.default=d},"3c87":function(t,e,i){},"3cbe":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAE40lEQVRYR+2Wa2yTVRjH/895exGHbEMYMQhyCQpmMdEPaIAQTQjojBpFlhhxXgJZaOl62dptMs1LEGm7jrbv2slgQUcIidMvEiQQMAEzCSEhGokxRGATUVSEbsLY9ZzHvA3DZa6rlQ/EhPfjec85/995Lv9zCLf5o9usjzsA/58IOH0NDwogT1MiVVDgOa/rpEbWj8sXeiLPds/pYNCRyqWuskZA19tsl1Id7zHwMoGKAD5NsGxcunjG56WlpdIUY2ZyekKniKglGauODQM0Nzdby8vLB8cDGhfA6906YUAN1TG4Esx2AnoZmEBEVxh458nFs5tNiDSAO7xfEzjYeAPAoScnUlfPbrvQXFu3Vv6UCSIjgCk+KAc3MKEKYCuBWhVrOwmylsElRJRioM6EWLVqlVrvCR1k4qNNsdrNrlpjquzp/diEtQvbS7GY92JOAG1tbdqR9k4/EeumOCB2WMlaE4t5u1yB0P2yH9vB/IwJQUDdlMKF2y+lTuwjxnHOy2tEzzWDwdMtoDLDqDmfcwoqKsLzJGEvs5oviLbdZRVVkYi/Z3gjn69hRp8abIHCciLqImADMy9jiBMEtZCB+zS7WN1YHzibrSDHTIGjIriEQAdAJISg5xuj/sOjN3JWRh7gwaEWAMsI9IvQ8GLx/IKvv/2ua8/UyUWv6fqbfdnEzf9jAng80VkDqn8/gAUg2m9hXjdWKF2GYZfnegPEJC2QhwoLa07+0R1+jIdgsMAV4vT+U0A4loxXe8cCyliEDl99OUm5hRmFAA6T1bIm2VD143incnnqnwUkmOkFEtRpzlUKFoL2TSJeuTcnAF1ncTkVWquAzcy4l4i+IKtYm4j4OzJBODzBEDGtISK9MepPEBFnS8O4PmB2w5dfdbyhmINmKInFEZvFUhKN+npHb2ymQ529XseMOgIuK03zT8uvah3tmKPX/QsnZPFbd/h1UgiCuUgI2pyIVdeNdbIbLdoM5hIQ/Q6CLxkN7BkvElkBTCEzHVe6Gl6VSm4kgV2JWLWeKbQmhOpHM6chcJFY8yTiVZ9kgsgI4HSH3wXU7LQQC8XEM6Bhi4W0P42GqpPmcCavT0P0YQeDnybQBaFZVzdGfUdzKkKnO7yJoWYCdI1MfGaLjWyBRYumX20/3rlCKX6UWQxZybJrLKt1u2PThtDfyswrCDiEvImvJLesv5xzDQwvcHnDy5WUZUmjdrXLHSyTjCSAiRD4zE42ZzTq+/kfhemtf05KuZeIzmhMJYYR+OE/AZjiUqpWCEQZoktAFTPoEimYF5N5O+4TdqxrDFdfGBYor4jPs1DfTmY2XfUY22llU33g15wBnO7IUkA2CaC1+OGC2Knvu99n8DQxZ8LatAv+DXHASra3zHS4/OG5ckB9BMYSEF1lAfcH0eoPc6oBc7LLG1ooJe8m8KdTJ8/Vdb10wOkORgmYmYjXrEz3fkefH1LVMnA3iA5pxHGl8DYDi4jwJ5HYlIgFIjldxzfzbhh2OnfdObngcUPXnxoyx53uUASsipJGbVkacjTETSXqJovQH3loUnK8V1FWHzBfOyN72OEJxsAoborXLBsJyh19DpZqDYBZDDqjCdpWvCC/5ZaeZNl8fOR/07bb2zvnAGKSpmmp/HxPZzYbzngd5yJ8q3OzpuBWBbKtvwNw2yPwFx/wMz9Sv05DAAAAAElFTkSuQmCC"},"3cd2":function(t,e,i){},"3d71":function(t,e,i){"use strict";var s=i("f26a"),n=i.n(s);n.a},"3dcb":function(t,e,i){},"3dff":function(t,e,i){},"3e65":function(t,e,i){},"3ed4":function(t,e,i){"use strict";var s=i("a65f"),n=i.n(s);n.a},"3edb":function(t,e,i){"use strict";var s=i("77c6"),n=i.n(s);n.a},"3ef4":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));i("2532"),i("1276"),i("ddb0");var s=i("ade3"),n=i("95c0"),a=i("365c");class r{constructor(t,e){Object(s["a"])(this,"lineInstance",{}),this.canvas=t,this._design=e,this.drawLines()}get row(){return this._design.table.row}get column(){return this._design.table.column}get zIndex(){var t;return null!==(t=this._design.table.zIndex)&&void 0!==t?t:0}set zIndex(t){this._design.table.zIndex=t}get width(){return this._design.style.width*a["DPI"]}get height(){return this._design.style.height*a["DPI"]}get cxstart(){return this.column-1}get cystart(){return this.row-1}get cxend(){return this.column}get cyend(){return this.row}get borderRadius(){return this._design.style.borderRadius||0}get leftTopLines(){return["0,0,0,1","1,0,0,0","0,0,1,0","0,1,0,0"]}get leftBottomLines(){return[`0,${this.cyend},1,${this.cyend}`,`1,${this.cyend},0,${this.cyend}`,`0,${this.cystart},0,${this.cyend}`,`0,${this.cyend},0,${this.cystart}`]}get rightTopLines(){return[`${this.cxstart},0,${this.cxend},0`,`${this.cxend},0,${this.cxstart},0`,`${this.cxend},0,${this.cxend},1`,`${this.cxend},1,${this.cxend},0`]}get rightBottomLines(){return[`${this.cxend},${this.cystart},${this.cxend},${this.cyend}`,`${this.cxend},${this.cyend},${this.cxend},${this.cystart}`,`${this.cxstart},${this.cyend},${this.cxend},${this.cyend}`,`${this.cxend},${this.cyend},${this.cxstart},${this.cyend}`]}get curveLines(){return[...this.leftTopLines,...this.leftBottomLines,...this.rightBottomLines,...this.rightTopLines]}get cells(){return this._design.table.cells}get _lines(){var t;return(null===(t=this._design.table)||void 0===t?void 0:t.lines)||{}}set _lines(t){this._design.table&&(this._design.table.lines=t)}get _lineWidth(){return this._design.table.borderWidth||1}getCellByKey(t){const[e,i]=t.split(",");return this.cells[e][i]}getMergeCoordCells(){const t=[];return this.cells.forEach(e=>{e.forEach(e=>{if(e.merge&&e.mergeConfig){const{xstart:i,ystart:s,xend:n,yend:a}=e.mergeConfig;t.push([i,s,n+1,a+1])}})}),t}getMergeLinesKey(){const t=this.getMergeCoordCells(),e=[];return t.forEach(t=>{e.push(...this.getMergeLineByCoord(t))}),e}getMergeLineByCoord([t,e,i,s]){const n=[];for(let a=t+1;a<i;a++)for(let t=e;t<s;t++)n.push(`${a},${t},${a},${t+1}`);for(let a=e+1;a<s;a++)for(let e=t;e<i;e++)n.push(`${e},${a},${e+1},${a}`);return n}getLineCoord(t){return t.split(",").map(t=>parseInt(t))}getWidthByIndex(t){const e=this.cells.reduce((e,i,s)=>{var n;return s>=t?e:e+((null===(n=i[0].mergeConfig)||void 0===n?void 0:n.oldWidth)||i[0].cellWidth)+1},this._lineWidth/2);return e}getHeightByIndex(t){const e=this.cells[0].reduce((e,i,s)=>{var n;return s>=t?e:e+((null===(n=i.mergeConfig)||void 0===n?void 0:n.oldHeight)||i.cellHeight)+1},this._lineWidth/2);return e}drawLines(){const t=this.getMergeLinesKey();Object.keys(this._lines).forEach(e=>{t.includes(e)&&(this._lines[e]={color:"transparent"}),this.drawLineByKey(e)})}drawLineByKey(t){const[e,i,s,n]=this.getLineCoord(t),a=this.getWidthByIndex(e),r=this.getWidthByIndex(s),o=this.getHeightByIndex(i),l=this.getHeightByIndex(n);this.curveLines.includes(t)?this.drawCurveLine(a,o,r,l,t):this.drawStraightLine(a,o,r,l,t)}drawStraightLine(t,e,i,s,a){const r=this._lines[a],o={stroke:r.color,lineWidth:this._lineWidth,fill:"none"},l=this._lineWidth/2;var c,h;(t===i?(e-=l,s+=l):(t-=l,i+=l),this.lineInstance[a])?this.lineInstance[a].attr({style:o,z2:null!==(c=r.zIndex)&&void 0!==c?c:0}):(this.lineInstance[a]=new n["Line"]({shape:{x1:t,y1:e,x2:i,y2:s},z:3,z2:null!==(h=r.zIndex)&&void 0!==h?h:0,style:o}),this.canvas.add(this.lineInstance[a]))}caculatePointCoord(t){const e=this._lineWidth/2,i=this.borderRadius+e,s=this.width-e-this.borderRadius,n=this.height-e-this.borderRadius;return this.leftTopLines.includes(t)?[i,i]:this.rightTopLines.includes(t)?[s,i]:this.leftBottomLines.includes(t)?[i,n]:[s,n]}drawCurveLine(t,e,i,s,a){const r=this._lines[a],o={stroke:r.color,fill:"none",lineWidth:this._lineWidth},l=this._lineWidth/2;let c=0,h=0,d=0,u=0;if(this.lineInstance[a]){var p;this.lineInstance[a].attr({style:o,z2:null!==(p=r.zIndex)&&void 0!==p?p:0})}else{var f;const p=this.caculatePointCoord(a);let m,g;this.leftTopLines.includes(a)?this.leftTopLines[0]===a||this.leftTopLines[1]===a?(m=Math.PI,g=5*Math.PI/4,c=l,d=this.borderRadius,h=l,u=s+l):(m=5*Math.PI/4,g=3*Math.PI/2,c=this.borderRadius,d=l,h=i+l,u=l):this.rightTopLines.includes(a)?this.rightTopLines[0]===a||this.rightTopLines[1]===a?(m=3*Math.PI/2,g=7*Math.PI/4,c=t,d=l,h=i-this.borderRadius,u=l):(m=7*Math.PI/4,g=0,c=t,d=this.borderRadius,h=t,u=s):this.leftBottomLines.includes(a)?this.leftBottomLines[0]===a||this.leftBottomLines[1]==a?(m=Math.PI/2,g=3*Math.PI/4,c=i,d=s,h=t+this.borderRadius-l,u=s):(m=3*Math.PI/4,g=Math.PI,c=l,d=e,h=l,u=s-this.borderRadius):this.rightBottomLines[0]===a||this.rightBottomLines[1]===a?(m=0,g=Math.PI/4,c=t,d=e,h=t,u=s-this.borderRadius+l):(m=Math.PI/4,g=Math.PI/2,c=t,h=i-this.borderRadius+l,d=s,u=s),this.lineInstance[a]=new n["CompoundPath"]({style:o,z:3,z2:null!==(f=r.zIndex)&&void 0!==f?f:0,shape:{paths:[new n["Arc"]({shape:{cx:p[0],cy:p[1],r:this.borderRadius,startAngle:m,endAngle:g,clockwise:!0}}),new n["Line"]({shape:{x1:c,y1:d,x2:h,y2:u}})]}}),this.canvas.add(this.lineInstance[a])}}static getLineKey(...t){return Array.isArray(t[0])&&(t=t[0]),t.join()}static getLeftKeysByCoord(t,e,i,s){const n=[];for(let a=e;a<s;a++)n.push(this.getLineKey(t,a,t,a+1));return n}static getRightKeysByCoord(t,e,i,s){const n=[];for(let a=e;a<s;a++)n.push(this.getLineKey(i,a,i,a+1));return n}static getTopKeysByCoord(t,e,i,s){const n=[];for(let a=t;a<i;a++)n.push(this.getLineKey(a,e,a+1,e));return n}static getBottomKeysByCoord(t,e,i,s){const n=[];for(let a=t;a<i;a++)n.push(this.getLineKey(a,s,a+1,s));return n}static getLineKeysByCoord(...t){return[...this.getLeftKeysByCoord(...t),...this.getTopKeysByCoord(...t),...this.getBottomKeysByCoord(...t),...this.getRightKeysByCoord(...t)]}setLineByCoord(t,...e){this.setLineByCoordWithoutDraw(t,...e),this.drawLines()}setLineByCoordWithoutDraw(t,...e){const i=r.getLineKeysByCoord(...e);t.zIndex=this.zIndex,this.zIndex++,i.forEach(e=>{this._lines[e]=t})}setVerticalLines(){for(let t=0;t<this.column;t++)this.setLineByCoordWithoutDraw({color:"#000"},t,0,t,this.row);return this}setHorizontalLines(){for(let t=0;t<this.row;t++)this.setLineByCoordWithoutDraw({color:"#000"},0,t,this.column,t);return this}setFirstVerticalLine(){return this.setLineByCoordWithoutDraw({color:"#000"},1,0,0,this.row),this}setFirstHorizontalLine(){return this.setLineByCoordWithoutDraw({color:"#000"},0,1,this.column,0),this}setOutline(){return this.setLineByCoordWithoutDraw({color:"#000"},0,0,this.column,this.row),this}resetLines(){return Object.keys(this._lines).forEach(t=>{this._lines[t].color="transparent"}),this}}},"3ef6":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.project_data?i("panel",[t._v(" "+t._s(t.project_data.id)+" "),i("button",{on:{click:t.ok}},[t._v("测试loading问题")])]):t._e()},n=[],a=i("5530"),r=i("5880"),o=i("c64e"),l=i.n(o),c=i("5a0c"),h=i.n(c),d=i("ed08"),u=i("9f9e"),p={components:{panel:u["default"]},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("enterprise",["isCompanyDomain","enterprise_user_info"])),Object(r["mapState"])("editor-v2",["is_outside","scale","project_data","knife_data","adsorbInstance","image_design_size_map","high_lines","d3_window_option","left_side_pinned","left_side_cur_menu_index","left_side_always_wide","right_side_always_wide","cur_cutout_uuid","last_saved_local_history_ts","show_d3_window","localHistory","element_craft_list","project_last_saved_ts","enable_local_history"])),Object(r["mapState"])("enterprise",["info","isCompanyDomain"])),Object(r["mapGetters"])("editor-v2",["curDesigns","curDesign","design_data","outside_designs_loaded","inside_designs_loaded"])),{},{x(){return Object(d["H"])(3.704166666).mm2pt()},save_time(){return h()(this.project_last_saved_ts).format("HH:mm")+" 已保存"}}),data(){return{}},mounted(){},methods:{init(){this.goLink("/design?id=205916&mid=2122&type=preview")},goLink(t){this.$router.push({path:t})},ok(){this.init(),this.$store.commit("editor-v2/insertDesignItem",{type:"img",src:"//cdn.baoxiaohe.com/311e910b-163f-4101-ba86-a05edb4e7e46.png",id:109239,uuid:l()(),can_set_color:1,attr_aspect:0,is_container:0,style:{position:"absolute",top:162.425099622099,left:193.81917089968056,width:75.80064898417204,height:33.62601268909213,rotate:360,opacity:100},bg:{x:0,y:0,width:75.80064898417204,height:33.62601268909213},locked:!1,_loaded:!1}),this.goLink("/design?id=208606"),setTimeout(()=>{this.$store.commit("editor-v2/set_project_data_loaded",!1),log(">>>准备重置数据"),this.project_data.id=Date.now(),this.project_data.design_data=[{type:"img",src:"//cdn.baoxiaohe.com/80d58729-3d47-40fa-b103-50086d375537.png",id:109235,uuid:"0f1b4814-ceba-48c2-82b3-3d97ad20eba2",can_set_color:1,attr_aspect:0,is_container:0,style:{position:"absolute",top:163.58311368708547,left:616.4077889864396,width:75.80064898417204,height:26.27754289283146,rotate:360,opacity:100},bg:{x:0,y:0,width:75.80064898417204,height:26.27754289283146},locked:!1,_loaded:!1}],log(">>>重置数据"),this.$store.commit("editor-v2/set_project_data_loaded",!0)},500)}}},f=p,m=i("2877"),g=Object(m["a"])(f,s,n,!1,null,"16bf990a",null);e["default"]=g.exports},"3f2e":function(t,e,i){"use strict";var s=i("127e"),n=i.n(s);n.a},"3f47":function(t,e,i){"use strict";var s=i("8923"),n=i.n(s);n.a},"3f8e":function(t,e,i){var s=i("8727"),n=s.createElement,a=i("20c8"),r=i("9850"),o=i("1687"),l=i("e86a"),c=i("a73c5"),h=i("76a5"),d=a.CMD,u=Array.prototype.join,p="none",f=Math.round,m=Math.sin,g=Math.cos,v=Math.PI,b=2*Math.PI,y=180/v,_=1e-4;function x(t){return f(1e4*t)/1e4}function w(t){return t<_&&t>-_}function C(t,e){var i=e?t.textFill:t.fill;return null!=i&&i!==p}function k(t,e){var i=e?t.textStroke:t.stroke;return null!=i&&i!==p}function S(t,e){e&&A(t,"transform","matrix("+u.call(e,",")+")")}function A(t,e,i){(!i||"linear"!==i.type&&"radial"!==i.type)&&t.setAttribute(e,i)}function O(t,e,i){t.setAttributeNS("http://www.w3.org/1999/xlink",e,i)}function j(t,e,i,s){if(C(e,i)){var n=i?e.textFill:e.fill;n="transparent"===n?p:n,A(t,"fill",n),A(t,"fill-opacity",null!=e.fillOpacity?e.fillOpacity*e.opacity:e.opacity)}else A(t,"fill",p);if(k(e,i)){var a=i?e.textStroke:e.stroke;a="transparent"===a?p:a,A(t,"stroke",a);var r=i?e.textStrokeWidth:e.lineWidth,o=!i&&e.strokeNoScale?s.getLineScale():1;A(t,"stroke-width",r/o),A(t,"paint-order",i?"stroke":"fill"),A(t,"stroke-opacity",null!=e.strokeOpacity?e.strokeOpacity:e.opacity);var l=e.lineDash;l?(A(t,"stroke-dasharray",e.lineDash.join(",")),A(t,"stroke-dashoffset",f(e.lineDashOffset||0))):A(t,"stroke-dasharray",""),e.lineCap&&A(t,"stroke-linecap",e.lineCap),e.lineJoin&&A(t,"stroke-linejoin",e.lineJoin),e.miterLimit&&A(t,"stroke-miterlimit",e.miterLimit)}else A(t,"stroke",p)}function M(t){for(var e=[],i=t.data,s=t.len(),n=0;n<s;){var a=i[n++],r="",o=0;switch(a){case d.M:r="M",o=2;break;case d.L:r="L",o=2;break;case d.Q:r="Q",o=4;break;case d.C:r="C",o=6;break;case d.A:var l=i[n++],c=i[n++],h=i[n++],u=i[n++],p=i[n++],_=i[n++],C=i[n++],k=i[n++],S=Math.abs(_),A=w(S-b)||(k?_>=b:-_>=b),O=_>0?_%b:_%b+b,j=!1;j=!!A||!w(S)&&O>=v===!!k;var M=x(l+h*g(p)),I=x(c+u*m(p));A&&(_=k?b-1e-4:1e-4-b,j=!0,9===n&&e.push("M",M,I));var T=x(l+h*g(p+_)),E=x(c+u*m(p+_));e.push("A",x(h),x(u),f(C*y),+j,+k,T,E);break;case d.Z:r="Z";break;case d.R:T=x(i[n++]),E=x(i[n++]);var D=x(i[n++]),L=x(i[n++]);e.push("M",T,E,"L",T+D,E,"L",T+D,E+L,"L",T,E+L,"L",T,E);break}r&&e.push(r);for(var P=0;P<o;P++)e.push(x(i[n++]))}return e.join(" ")}var I={brush:function(t){var e=t.style,i=t.__svgEl;i||(i=n("path"),t.__svgEl=i),t.path||t.createPathProxy();var s=t.path;if(t.__dirtyPath){s.beginPath(),s.subPixelOptimize=!1,t.buildPath(s,t.shape),t.__dirtyPath=!1;var a=M(s);a.indexOf("NaN")<0&&A(i,"d",a)}j(i,e,!1,t),S(i,t.transform),null!=e.text?z(t,t.getBoundingRect()):$(t)}},T={brush:function(t){var e=t.style,i=e.image;if(i instanceof HTMLImageElement){var s=i.src;i=s}if(i){var a=e.x||0,r=e.y||0,o=e.width,l=e.height,c=t.__svgEl;c||(c=n("image"),t.__svgEl=c),i!==t.__imageSrc&&(O(c,"href",i),t.__imageSrc=i),A(c,"width",o),A(c,"height",l),A(c,"x",a),A(c,"y",r),S(c,t.transform),null!=e.text?z(t,t.getBoundingRect()):$(t)}}},E={},D=new r,L={},P=[],R={left:"start",right:"end",center:"middle",middle:"middle"},z=function(t,e){var i=t.style,s=t.transform,a=t instanceof h||i.transformText;t.__dirty&&c.normalizeTextStyle(i,!0);var r=i.text;if(null!=r&&(r+=""),c.needDrawText(r,i)){null==r&&(r=""),!a&&s&&(D.copy(e),D.applyTransform(s),e=D);var o=t.__textSvgEl;o||(o=n("text"),t.__textSvgEl=o);var d=o.style,u=i.font||l.DEFAULT_FONT,p=o.__computedFont;u!==o.__styleFont&&(d.font=o.__styleFont=u,p=o.__computedFont=d.font);var f=i.textPadding,m=i.textLineHeight,g=t.__textCotentBlock;g&&!t.__dirtyText||(g=t.__textCotentBlock=l.parsePlainText(r,p,f,m,i.truncate));var v=g.outerHeight,b=g.lineHeight;c.getBoxPosition(L,t,i,e);var y=L.baseX,_=L.baseY,x=L.textAlign||"left",w=L.textVerticalAlign;N(o,a,s,i,e,y,_);var C=l.adjustTextY(_,v,w),k=y,S=C;f&&(k=B(y,x,f),S+=f[0]),S+=b/2,j(o,i,!0,t);var A=g.canCacheByTextString,O=t.__tspanList||(t.__tspanList=[]),M=O.length;if(A&&t.__canCacheByTextString&&t.__text===r){if(t.__dirtyText&&M)for(var I=0;I<M;++I)F(O[I],x,k,S+I*b)}else{t.__text=r,t.__canCacheByTextString=A;var T=g.lines,E=T.length;for(I=0;I<E;I++){var P=O[I],R=T[I];P?P.__zrText!==R&&(P.innerHTML="",P.appendChild(document.createTextNode(R))):(P=O[I]=n("tspan"),o.appendChild(P),P.appendChild(document.createTextNode(R))),F(P,x,k,S+I*b)}if(M>E){for(;I<M;I++)o.removeChild(O[I]);O.length=E}}}};function N(t,e,i,s,n,a,r){o.identity(P),e&&i&&o.copy(P,i);var l=s.textRotation;if(n&&l){var c=s.textOrigin;"center"===c?(a=n.width/2+n.x,r=n.height/2+n.y):c&&(a=c[0]+n.x,r=c[1]+n.y),P[4]-=a,P[5]-=r,o.rotate(P,P,l),P[4]+=a,P[5]+=r}S(t,P)}function B(t,e,i){return"right"===e?t-i[1]:"center"===e?t+i[3]/2-i[1]/2:t+i[3]}function F(t,e,i,s){A(t,"dominant-baseline","middle"),A(t,"text-anchor",R[e]),A(t,"x",i),A(t,"y",s)}function $(t){t&&t.__textSvgEl&&(t.__textSvgEl.parentNode&&t.__textSvgEl.parentNode.removeChild(t.__textSvgEl),t.__textSvgEl=null,t.__tspanList=[],t.__text=null)}E.drawRectText=z,E.brush=function(t){var e=t.style;null!=e.text?z(t,!1):$(t)},e.path=I,e.image=T,e.text=E},"401b":function(t,e){var i="undefined"===typeof Float32Array?Array:Float32Array;function s(t,e){var s=new i(2);return null==t&&(t=0),null==e&&(e=0),s[0]=t,s[1]=e,s}function n(t,e){return t[0]=e[0],t[1]=e[1],t}function a(t){var e=new i(2);return e[0]=t[0],e[1]=t[1],e}function r(t,e,i){return t[0]=e,t[1]=i,t}function o(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function l(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t}function c(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function h(t){return Math.sqrt(u(t))}var d=h;function u(t){return t[0]*t[0]+t[1]*t[1]}var p=u;function f(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function m(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function g(t,e){return t[0]*e[0]+t[1]*e[1]}function v(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function b(t,e){var i=h(e);return 0===i?(t[0]=0,t[1]=0):(t[0]=e[0]/i,t[1]=e[1]/i),t}function y(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var _=y;function x(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var w=x;function C(t,e){return t[0]=-e[0],t[1]=-e[1],t}function k(t,e,i,s){return t[0]=e[0]+s*(i[0]-e[0]),t[1]=e[1]+s*(i[1]-e[1]),t}function S(t,e,i){var s=e[0],n=e[1];return t[0]=i[0]*s+i[2]*n+i[4],t[1]=i[1]*s+i[3]*n+i[5],t}function A(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function O(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}e.create=s,e.copy=n,e.clone=a,e.set=r,e.add=o,e.scaleAndAdd=l,e.sub=c,e.len=h,e.length=d,e.lenSquare=u,e.lengthSquare=p,e.mul=f,e.div=m,e.dot=g,e.scale=v,e.normalize=b,e.distance=y,e.dist=_,e.distanceSquare=x,e.distSquare=w,e.negate=C,e.lerp=k,e.applyTransform=S,e.min=A,e.max=O},4028:function(t,e,i){t.exports=i.p+"editor-assets/img/unlock.429ebbea.svg"},"404d":function(t,e,i){},4063:function(t,e,i){},"408b":function(t,e,i){},"40a9":function(t,e,i){"use strict";i.r(e);i("b680");var s=i("8bbf"),n=i.n(s),a=i("750b"),r=(i("365c"),i("2161"),i("c64e")),o=i.n(r),l=i("0e9a"),c=i("054f");const h=i("2b3c");e["default"]=Object(a["b"])({props:{limitImgSize:{type:Number},limitCount:{type:Number},nowCount:{type:Number,default:0}},setup(t,e){Object(a["f"])(()=>{s.value=e.refs.aUploadRef||null,n.a.nextTick(()=>{s.value=e.refs.aUploadRef||null})}),Object(a["h"])(()=>{s.value=e.refs.aUploadRef||null,n.a.nextTick(()=>{s.value=e.refs.aUploadRef||null})});const i=Object(a["j"])([]),s=Object(a["j"])(null),r=Object(a["a"])(()=>!!i.value.length),d=e.vuex.mapState("profile",["accessToken"]);return Object(a["k"])(()=>r.value,()=>{r.value||e.emit("refresh")},{lazy:!0}),()=>Object(a["c"])("a-upload",{ref:"aUploadRef",attrs:{showUploadList:!1,name:"file",accept:".svg,.png,.jpg,.jpeg",multiple:!0,data:{type:"image"},headers:{Authentication:d.accessToken.value},beforeUpload:async n=>{if(t.nowCount>=t.limitCount)return e.root.$message.error("您的上传数量已达上限"),Promise.reject(!1);if("image/svg+xml"===n.type&&n.size>=512e3)return e.root.$message.error("SVG格式的图片不得大于500KB"),Promise.reject(!1);if(n.size>=t.limitImgSize)return e.root.$message.error(`此图片不得大于${(t.limitImgSize/1024/1024).toFixed(0)}MB`),Promise.reject(!1);if(Object(l["c"])(n)){let t=await Object(l["e"])(n);if(t=Object(l["f"])(t),!Object(l["d"])(t))return e.root.$confirm({title:"SVG中含有image等不合法标签，是否继续？",zIndex:4001,okText:"继续",onOk(){i.value.push(!0);const t=s.value,{customRequest:e}=t.$options.propsData;e({file:n})},onCancel(){},class:"test"}),Promise.reject(!1)}return i.value.push(!0),!0},customRequest:async t=>{const s=t.file.name.substring(t.file.name.lastIndexOf(".")+1,t.file.name.length),n="user-materials",a=o()()+"."+s,r=await c["a"].putFileForEnterprise(t.file,{xapi:n,rename:a,type:"image"});i.value.shift(),200!==r.code&&(e.root.$message.error(r.errmsg),c["a"].removeStorage())}},on:{change:async t=>{"done"==t.file.status&&(i.value.shift(),0===t.file.response.errno||e.root.$message.error(t.file.response.errmsg))}}},[Object(a["c"])("div",{class:"upload-button"},[r.value?Object(a["c"])("a-icon",{attrs:{type:"loading",color:"#fff"}}):Object(a["c"])("img",{attrs:{src:h}}),Object(a["c"])("span",{class:"ml-8"},["上传图片"])])])}})},"40b6":function(t,e,i){},"40e6":function(t,e,i){},"410d":function(t,e,i){},4140:function(t,e,i){"use strict";var s=i("c3ff"),n=i.n(s);n.a},"414b":function(t,e,i){},4186:function(t,e,i){"use strict";(function(e){var s;function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var a=i("ee93"),r=Symbol("lastResolve"),o=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),h=Symbol("lastPromise"),d=Symbol("handlePromise"),u=Symbol("stream");function p(t,e){return{value:t,done:e}}function f(t){var e=t[r];if(null!==e){var i=t[u].read();null!==i&&(t[h]=null,t[r]=null,t[o]=null,e(p(i,!1)))}}function m(t){e.nextTick(f,t)}function g(t,e){return function(i,s){t.then((function(){e[c]?i(p(void 0,!0)):e[d](i,s)}),s)}}var v=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((s={get stream(){return this[u]},next:function(){var t=this,i=this[l];if(null!==i)return Promise.reject(i);if(this[c])return Promise.resolve(p(void 0,!0));if(this[u].destroyed)return new Promise((function(i,s){e.nextTick((function(){t[l]?s(t[l]):i(p(void 0,!0))}))}));var s,n=this[h];if(n)s=new Promise(g(n,this));else{var a=this[u].read();if(null!==a)return Promise.resolve(p(a,!1));s=new Promise(this[d])}return this[h]=s,s}},n(s,Symbol.asyncIterator,(function(){return this})),n(s,"return",(function(){var t=this;return new Promise((function(e,i){t[u].destroy(null,(function(t){t?i(t):e(p(void 0,!0))}))}))})),s),v),y=function(t){var e,i=Object.create(b,(e={},n(e,u,{value:t,writable:!0}),n(e,r,{value:null,writable:!0}),n(e,o,{value:null,writable:!0}),n(e,l,{value:null,writable:!0}),n(e,c,{value:t._readableState.endEmitted,writable:!0}),n(e,d,{value:function(t,e){var s=i[u].read();s?(i[h]=null,i[r]=null,i[o]=null,t(p(s,!1))):(i[r]=t,i[o]=e)},writable:!0}),e));return i[h]=null,a(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=i[o];return null!==e&&(i[h]=null,i[r]=null,i[o]=null,e(t)),void(i[l]=t)}var s=i[r];null!==s&&(i[h]=null,i[r]=null,i[o]=null,s(p(void 0,!0))),i[c]=!0})),t.on("readable",m.bind(null,i)),i};t.exports=y}).call(this,i("4362"))},"41c5":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-spin",{staticStyle:{height:"100vh"},attrs:{spinning:t.project_loading}},[t.project_data?i("div",{staticClass:"design-wrap",style:{filter:t.showHistoryDialog?"blur(20px)":"none"}},[i("editor-header",{on:{update:function(e){return t.saveProjectAndScreenshot({projectData:t.project_data,knifeData:t.knife_data,isAuto:!1})},updateHistoryShow:function(e){t.showHistoryDialog=e}}}),i("div",{staticClass:"left-side flex flex-start editor-left",class:[{wide:t.left_side_show}]},[i("left-side-menu"),i("left-side-panel")],1),t.project_data.id&&t.knife_data?i("editor-center",{staticClass:"editor-center",class:[{"left-indent":t.left_side_show,"right-indent":t.right_side_always_wide}],attrs:{id:"editor_center"}}):t._e(),t.project_data.id?t._e():i("no-id-tip",{class:[{"left-indent":t.left_side_show}]}),i("context-menu",{ref:"contextMenuWrap"}),t.project_data.id&&t.knife_data?i("setting-panel"):t._e(),t.project_data.id&&t.knife_data?i("d3",{model:{value:t.rightDrawerOpen,callback:function(e){t.rightDrawerOpen=e},expression:"rightDrawerOpen"}}):t._e(),t.isCompanyDomain?i("support-instruction",{class:[{"left-indent":t.left_side_show}]}):t._e(),t.project_data.id&&t.knife_data?i("bottom-buttons",{class:[{"left-indent":t.left_side_show,"right-indent":t.right_side_always_wide}]}):t._e()],1):t._e(),i("psd-modal",{ref:"psdModalRef"}),i("history",{model:{value:t.showHistoryDialog,callback:function(e){t.showHistoryDialog=e},expression:"showHistoryDialog"}}),i("vip-paste-modal"),i("paste-modal"),i("check-browser-is-chrome-modal"),t.project_data&&t.knife_data?[i("devcanvas"),i("devtool"),i("fps")]:t._e()],2)},n=[],a=(i("ddb0"),i("5530")),r=i("5880"),o=i("365c"),l=i("780b");i("2532"),i("1276");class c{constructor(t){this.DPI=t.DPI,this.totalX=t.totalX,this.totalY=t.totalY,this.designSorbFlag=void 0===t.designSorbFlag||t.designSorbFlag,this.foldLineSorbFlag=void 0===t.foldLineSorbFlag||t.foldLineSorbFlag,this.faceCenterSorbFlag=void 0===t.faceCenterSorbFlag||t.faceCenterSorbFlag,this.guideLineSorbFlag=void 0===t.guideLineSorbFlag||t.guideLineSorbFlag,this.faces=JSON.parse(JSON.stringify(t.faces||[])),this.faces.forEach(t=>{t.center={x:t.x+t.w/2,y:t.y+t.h/2}}),this.outerFoldLines=t.foldLines.filter(t=>t.x1==t.x2||t.y1==t.y2).map(t=>{const{x1:e,x2:i,y1:s,y2:n}=t;let r;r=t.x1==t.x2?"v":"h";const o=i-e,l=n-s;return Object(a["a"])(Object(a["a"])({},t),{},{type:r,width:o,height:l})}),this.innerFoldLines=this.outerFoldLines.map(t=>{const{x1:e,x2:i}=t;return Object.assign({},t,{x1:this.totalX-i,x2:this.totalX-e})})}set(t){this.scale=t.scale||1,this.threshold=Math.max(1.6/this.scale,1/this.DPI),this.isInside=t.isInside||0,this.rotate=t.rotate||0,this.envDesigns=t.envDesigns||[],this.envRects=this.envDesigns.map(t=>this._designStyle2Rect(t.style)),this._setMovingDesigns(t.movingDesigns),this._setGuideLines(t.guideLines,this.rotate,this.totalX,this.totalY)}debug(){}_initEveryMove(){this.highlines=[],this.input_offset_mm={},this.collision_offset_delta={x:0,y:0}}_setGuideLines(t,e,i,s){const n=document.getElementById("editor_center").getBoundingClientRect(),a=document.getElementById("svgContainer").getBoundingClientRect(),r={width:a.width/this.DPI,height:a.height/this.DPI};this.guideLines=t.map(t=>{let{x:i,y:s,type:o}=t;const l={x:t.x+n.x/this.DPI-a.x/this.DPI,y:t.y+n.y/this.DPI-a.y/this.DPI};switch(e){case 0:"x"==o?(i=0,s=l.y):(i=l.x,s=0);break;case 90:"x"==o?(o="y",s=0,i=l.y):(o="x",i=0,s=r.height-l.x);break;case 180:"x"==o?(i=0,s=r.height-l.y):(o="y",s=0,i=r.width-l.x);break;case 270:"x"==o?(o="y",i=r.width-l.y,s=0):(o="x",i=0,s=l.x);break;default:break}return{type:o,x:i/this.scale,y:s/this.scale}})}_setGuideLines_old(t,e,i,s){const n={x:i/2,y:s/2},a=Math.PI*e/180;this.guideLines=t.map(t=>{let{x:r,y:o,type:l}=t;"y"==l?o=s/2:r=i/2;let{x:c,y:h}=this._translate_axis(n.x,n.y,r,o,-a);return 90!=e&&270!=e||(l="x"==l?"y":"x"),"x"==l?c=0:h=0,{type:l,x:c,y:h}})}_translate_axis(t,e,i,s,n){return{x:(i-t)*Math.cos(n)+(s-e)*Math.sin(n)+t,y:(s-e)*Math.cos(n)+(i-t)*Math.sin(n)+e}}_designStyle2Rect(t){const{left:e,top:i,width:s,height:n,rotate:a}=t,r=e+s,o=i+n,l={x:e+s/2,y:i+n/2},c=Math.PI*a/180,h=[[e,i],[e,o],[r,i],[r,o]].map(t=>this._translate_axis(l.x,l.y,t[0],t[1],c)),d={left:Math.min(...h.map(t=>t.x)),right:Math.max(...h.map(t=>t.x)),top:Math.min(...h.map(t=>t.y)),bottom:Math.max(...h.map(t=>t.y))};return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}_refreshMovingRect(t){const{freezeMovingRect:e}=this;return this.movingRect=Object.assign({},e,{left:e.left+t.x,right:e.right+t.x,top:e.top+t.y,bottom:e.bottom+t.y}),this.movingRect}_setMovingDesigns(t){this.freezeMovingDesigns=JSON.parse(JSON.stringify(t));let e={};const i=t.map(t=>this._designStyle2Rect(t.style));if(1===i.length)e=i[0];else{const t={left:Math.min(...i.map(t=>t.left)),top:Math.min(...i.map(t=>t.top)),right:Math.max(...i.map(t=>t.right)),bottom:Math.max(...i.map(t=>t.bottom))};t.width=t.right-t.left,t.height=t.bottom-t.top,e=t}this.movingRect=e,this.freezeMovingRect=Object.assign({},e)}_parse_moveoffset(t,e){const{scale:i,rotate:s,DPI:n}=this;let a=t/(i*n),r=e/(i*n);return 90===s?[a,r]=[r,-a]:180===s?[a,r]=[-a,-r]:270===s&&([a,r]=[-r,a]),{x:a,y:r}}_build_result(){const{input_offset_mm:t,collision_offset_delta:e,highlines:i,freezeMovingDesigns:s,movingRect:n}=this,a={selectionPosition:{x:n.left-e.x,y:n.top-e.y},highlines:i},r={x:t.x-e.x,y:t.y-e.y};if(1==s.length){const t=s[0];a.x=t.style.left+r.x,a.y=t.style.top+r.y}else{const t={};s.forEach(e=>{const{uuid:i}=e,{left:s,top:n,width:a,height:o}=e.style;t[i]={x:s+r.x,y:n+r.y}}),a.positionMap=t}return a}calc(t,e){this._initEveryMove(),this.input_offset_mm=this._parse_moveoffset(t,e);const i=this._refreshMovingRect(this.input_offset_mm);return this._checkCollisionWithEnvDesigns(i),this._checkCollisionWithFaces(i),this._checkCollisionWithFoldLines(i),this._checkCollisionWithGuideLines(i),this._build_result()}_checkCollisionWithFaces(t){if(!this.faceCenterSorbFlag)return;const{highlines:e,threshold:i}=this,s=[t.left,t.right,t.left+t.width/2],n=[t.top,t.bottom,t.top+t.height/2];this.faces.forEach(e=>{if(!this._point_in_face({x:t.left+t.width/2,y:t.top+t.height/2},e))return!1;const i=Math.min(t.top,e.y),a=Math.max(t.bottom,e.y+e.h),r=Math.min(t.left,e.x),o=Math.max(t.right,e.x+e.w);let l=e.center.x;s.forEach(t=>{this._check_x_axis(t,l,!0,i,a)}),l=e.center.y,n.forEach(t=>{this._check_y_axis(t,l,!0,r,o)})})}_get_moving_face(t){const e={x:t.left+t.width/2,y:t.top+t.height/2};return this.faces.find(t=>e.x>t.x&&e.x<t.x+t.w&&e.y>t.y&&e.y<t.y+t.h)}_point_in_face(t,e){return t.x>e.x&&t.x<e.x+e.w&&t.y>e.y&&t.y<e.y+e.h}_checkCollisionWithEnvDesigns(t){if(!this.designSorbFlag)return;const e=this._get_moving_face(t);this.envRects.forEach(i=>{if(e&&!this._point_in_face({x:i.left+i.width/2,y:i.top+i.height/2},e))return!1;const s=[t.left,t.right,t.left+t.width/2],n=[t.top,t.bottom,t.top+t.height/2],a=[i.left,i.right,i.left+i.width/2],r=[i.top,i.bottom,i.top+i.height/2],o=Math.min(t.top,i.top),l=Math.max(t.bottom,i.bottom),c=Math.min(t.left,i.left),h=Math.max(t.right,i.right);a.forEach(t=>{s.forEach(e=>{this._check_x_axis(e,t,!0,o,l)})}),r.forEach(t=>{n.forEach(e=>{this._check_y_axis(e,t,!0,c,h)})})})}_check_x_axis(t,e,i=!0,s,n){const a=t-e;Math.abs(a)<this.threshold&&(!this.collision_offset_delta.x||Math.abs(a-this.collision_offset_delta.x)<1e-4)&&(this.collision_offset_delta.x=a,i&&this.highlines.push({x:e,y:s,width:0,height:n-s}))}_check_y_axis(t,e,i=!0,s,n){const a=t-e;Math.abs(a)<this.threshold&&(!this.collision_offset_delta.y||Math.abs(a-this.collision_offset_delta.y)<1e-4)&&(this.collision_offset_delta.y=a,i&&this.highlines.push({x:s,y:e,width:n-s,height:0}))}_checkCollisionWithGuideLines(t){this.guideLineSorbFlag&&this.guideLines.forEach(e=>{const i=[t.left,t.right,t.left+t.width/2],s=[t.top,t.bottom,t.top+t.height/2];if("y"==e.type){const t=e.x;i.forEach(e=>{this._check_x_axis(e,t,!1)})}if("x"==e.type){const t=e.y;s.forEach(e=>{this._check_y_axis(e,t,!1)})}})}_checkCollisionWithFoldLines(t){if(!this.foldLineSorbFlag)return;const{isInside:e,outerFoldLines:i,innerFoldLines:s}=this;let n=[];n=e?s:i,n.forEach(e=>{const i=[t.left,t.right,t.left+t.width/2],s=[t.top,t.bottom,t.top+t.height/2],n=Math.min(t.top,e.y1),a=Math.max(t.bottom,e.y2),r=Math.min(t.left,e.x1),o=Math.max(t.right,e.x2),l=this._get_current_facenames(t.left+t.width/2,t.top+t.height/2),c=e.name.split("_").some(t=>l.includes(t));if(!c)return!1;if("v"==e.type){const t=e.x1;i.forEach(e=>{this._check_x_axis(e,t,!0,n,a)})}if("h"==e.type){const t=e.y1;s.forEach(e=>{this._check_y_axis(e,t,!0,r,o)})}})}_get_current_facenames(t,e){return this.faces.map(i=>t<i.x||t>i.x+i.w||e<i.y||e>i.y+i.h?"":i.name).filter(t=>!!t)}}var h=i("8ed8"),d=i("c6d2"),u=i("84a2"),p=i.n(u),f=i("031a"),m=i("6126"),g=i("0b79"),v=i("0d05"),b=i("38f2"),y=i("cc24"),_=i("c32f"),x=i("02aa"),w=i("9f88"),C=i("9c47"),k=i("8a71"),S=i("0c05"),A=i("04a8"),O=i("6f4c"),j=i("ccda"),M=i("3ef6"),I=i("5e9b"),T=i("138d"),E=i("54ae"),D={components:{editorHeader:b["default"],settingPanel:f["default"],leftSideMenu:m["default"],leftSidePanel:g["default"],editorCenter:y["default"],ContextMenu:x["default"],d3:_["default"],bottomButtons:v["default"],PsdModal:w["default"],noIdTip:j["default"],history:C["default"],VipPasteModal:k["default"],PasteModal:S["default"],checkBrowserIsChromeModal:A["default"],supportInstruction:O["default"],devtool:M["default"],devcanvas:I["default"],fps:T["default"]},data(){return{project_loading:!1,rightDrawerOpen:!0,showHistoryDialog:!1,curMenuIndex:-1,canvas_offset:null,auto_save_interval:null,localHistory:null,leftSideIndentTimeout:null}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["is_outside","knife_data","left_side_show","left_side_cur_menu_index","project_data","scale","right_side_always_wide","adsorbInstance","cur_face_name","zoomable_canvas_offset","last_saved_local_history_ts"])),Object(r["mapState"])("profile",["accessToken"])),Object(r["mapState"])("enterprise",["isCompanyDomain"])),Object(r["mapState"])("menu",["keepPin","menuVisible"])),Object(r["mapGetters"])("editor-v2",["project_data_knife_data_ready","curDesigns","curSelectedSingleDesignType"])),{},{id(){return this.$route.query.id},workOuterId(){return this.$route.query.workOuterId},mid(){return this.$route.query.mid},type(){return this.$route.query.type}}),mounted(){!this.id||this.accessToken?(this.id||this.workOuterId?this.ajaxProjectInfo():this.initFakeProjectInfo(),this.ajaxScienceList1(),this.ajaxScienceList2(),this.localHistory=new E["default"],this.$store.commit("editor-v2/set_localHistory",this.localHistory),window.addEventListener("keydown",this.keydown_handle),window.addEventListener("keyup",this.keyup_handle),window.addEventListener("resize",this.on_resize),this.$bus.$on("show-design-menu",({event:t,design:e,sameLayerDesigns:i})=>{this.$refs.contextMenuWrap.open(t,e,i)}),this.$bus.$on("show-psd-modal",()=>{this.$refs.psdModalRef.show()}),this.$bus.$on("design/adjustScreenSize",()=>{this.adjust_canvas_size_and_position()}),this.$bus.$on("design/refresh",t=>{const{name:e}=t;"project_info"===e&&this.ajaxProjectInfo(),"knife_info"===e&&this.ajaxProjectKnife(this.project_data.bleedline)}),this.$bus.$on("design/localhistory_rollback",t=>{this.onRollback()}),this.$bus.$on("design/localhistory_reRollback",t=>{this.onReRollback()}),this.enableAutoSave(),this.type||window.addEventListener("beforeunload",this.beforeunload)):/baoxiaohe\.cn/.test(window.location.host)?window.location.href="/":this.$store.commit("profile/SET_SHOW_LOGIN_MODAL",!0)},beforeDestroy(){window.removeEventListener("beforeunload",this.beforeunload),this.$store.commit("editor-v2/set_localHistory",null),window.removeEventListener("keydown",this.keydown_handle),window.removeEventListener("keyup",this.keyup_handle),window.removeEventListener("resize",this.on_resize),this.auto_save_interval&&clearInterval(this.auto_save_interval),this.$bus.$off("show-design-menu"),this.$bus.$off("show-psd-modal"),this.$bus.$off("design/refresh"),this.$bus.$off("design/adjustScreenSize"),this.$bus.$off("design/localhistory_rollback"),this.$bus.$off("design/localhistory_reRollback"),this.leftSideIndentTimeout&&(clearTimeout(this.leftSideIndentTimeout),this.leftSideIndentTimeout=null)},methods:{onRollback(){this.localHistory.indexBackMove().then(t=>{const{cur:e,isFirst:i,isLast:s}=t;this.$store.commit("editor-v2/set_project_data",e),this.isFirst=i,this.isLast=s})},onReRollback(){this.localHistory.indexForeMove().then(t=>{const{cur:e,isFirst:i,isLast:s}=t;this.$store.commit("editor-v2/set_project_data",e),this.isFirst=i,this.isLast=s})},beforeunload(t){/baoxiaohe/.test(navigator.userAgent)||this.localHistory&&this.localHistory.size()>0&&this.localHistory.getCurTs()!==this.last_saved_local_history_ts&&(t.returnValue="",t.preventDefault())},enableAutoSave(){!this.type&&this.accessToken&&this.project_data&&this.project_data.id&&(this.auto_save_interval=setInterval(()=>{this.saveProjectAndScreenshot({projectData:this.project_data,knifeData:this.knife_data,isAuto:!0})},o["UPDATE_TIME_OUT"]))},initAdsorbInstance(){if(!this.adsorbInstance){const t=new c({DPI:this.$root.constant.DPI,totalX:this.knife_data.totalX,totalY:this.knife_data.totalY,foldLines:this.knife_data.folds,faces:this.knife_data.faces});this.$store.commit("editor-v2/set_adsorbInstance",t)}},async saveProjectAndScreenshot({knifeData:t,projectData:e,isAuto:i=!0}){try{const s=JSON.parse(JSON.stringify(e));s.isAuto=i?1:0;const n=await Object(d["a"])(t,s);if(1e3===n.errno)return!1;n.data&&n.data.url&&(s.screenshot=n.data.url),this._saveProject(s)}catch(s){}},_saveProject(t){[...t.design_data,...t.inside_design_data].forEach(t=>{t._selected=!1,t._loaded=!1});const e={project_id:t.id,project_name:t.project_name,background:t.background,background_filter:t.background_filter,background_cmyk:t.background_cmyk,cate_id:t.cate_id,color_history:JSON.stringify(t.color_history),design_data:JSON.stringify(t.design_data),face_background:JSON.stringify(t.face_background),inside_design_data:JSON.stringify(t.inside_design_data),inside_face_background:JSON.stringify(t.inside_face_background),inside_background:t.inside_background,inside_background_filter:t.inside_background_filter,inside_background_cmyk:t.inside_background_cmyk,membrane_id:t.membrane_id,line_guides:JSON.stringify(t.line_guides),is_temp:t.is_temp,isAuto:t.isAuto,rotate:t.rotate%360,show_bleed_line:t.show_bleed_line,show_material:t.show_material};t.screenshot&&"string"===typeof t.screenshot&&(e.screenshot=t.screenshot),e.editType=this.type,this.$store.commit("editor-v2/set_project_is_saving",!0),this.$http.put("/api/v2/projects",e).then(t=>{if(200!==t.code)return this.$message.error(t.msg||"操作失败"),void this.$store.commit("editor-v2/set_project_is_saving",!1);this.$store.commit("editor-v2/set_project_last_saved_ts",Date.now()),this.$store.commit("editor-v2/set_project_is_saving",!1)})},onLeftSideMenuClick(t){this.curMenuIndex=t},on_resize(){p()(()=>{this.project_data_knife_data_ready&&this.adjust_canvas_size_and_position()},250)()},adjust_canvas_size_and_position(){this.$nextTick(()=>{const t=document.getElementById("editor_center");if(!t)return;const e=t.clientWidth||t.offsetWidth,i=t.clientHeight||t.offsetHeight,{totalX:s,totalY:n}=this.knife_data,a=this.$root.constant.DPI;let r=s*a,o=n*a,l=0,c=0;if(this.cur_face_name){const t=this.knife_data.faces.find(t=>t.name===this.cur_face_name);t&&(r=t.w*a,o=t.h*a,l=this.is_outside?-(t.x+t.w/2-s/2):t.x+t.w/2-s/2,c=-(t.y+t.h/2-n/2))}let h=1;const d=this.project_data.rotate;d%180>0&&([r,o]=[o,r]),h=.6*Math.min(e/r,i/o),this.$store.commit("editor-v2/set_scale",Math.max(h,.01)),this.$store.commit("editor-v2/set_zoomable_canvas_offset",{x:l*a,y:c*a})})},ajaxCraftList(){this.accessToken&&this.$http.get("/api/v2/materials/craft/list").then(t=>{200!==t.code?this.$message.error(t.msg):this.$store.commit("editor-v2/set_element_craft_list",t.data||[])})},ajaxCategoryInfo(){const t={};if(this.id)t.project_id=this.id,t.type="project";else{if(!this.workOuterId)return;t.workOuterId=this.workOuterId,t.type="work"}this.$http.get("/api/v2/modes/category/info",t).then(t=>{200!==t.code?this.$message.error(t.msg):this.$store.commit("editor-v2/set_project_size_limits",t.data)})},ajaxProjectInfo(){const{id:t,workOuterId:e,type:i}=this,s={type:i};t&&(s.id=t),e&&(s.workOuterId=e),this.project_loading=!0,this.$store.commit("editor-v2/set_project_data_loaded",!1),this.$http.get("/api/v2/projects/info",s).then(t=>{if(200!==t.code)return void this.$message.error(t.msg);const e=t.data;if(e.design_data=e.design_data?e.design_data.filter(t=>t.type):[],e.inside_design_data=e.inside_design_data?e.inside_design_data.filter(t=>t.type):[],[...e.design_data,...e.inside_design_data].forEach(t=>{Object(l["a"])(t),t.designs&&t.designs.forEach(t=>{Object(l["a"])(t,2)})}),e.line_guides||(e.line_guides=[]),e.size_type||(e.size_type="id"),"{}"===e.color_history)e.color_history=[];else if("string"===typeof e.color_history)try{e.color_history=JSON.parse(e.color_history)}catch(i){}e.face_background||(e.face_background={}),e.inside_face_background||(e.inside_face_background={}),e.project_id=e.id,e._enable_local_history||(e._enable_local_history=!0),this.$store.commit("editor-v2/set_project_data",e),this.$store.commit("editor-v2/set_project_data_loaded",!0),this._injectStyle(e),this.ajaxProjectKnife(e.bleedline),this.ajaxCategoryInfo(),this.ajaxCraftList(),this.ajaxEnterpriseInfo(),this.$root.modeReady=!0}).finally(()=>{this.project_loading=!1})},initFakeProjectInfo(){this.$store.commit("editor-v2/set_project_data_loaded",!1);const t={id:0,length:10,width:10,height:10,thickness:1.5,inless:1,outless:.5,background:"",images:null,membrane_id:0,is_mode:0,design_data:[],inside_design_data:[],by_project_id:0,material_obj:null,material_jpg:null,material_mtl:null,is_render:0,line_guides:[],screenshot_id:0,screenshot:"",color_history:[],inside_background:null,face_background:{},inside_face_background:{},show_bleed_line:1,show_material:1,size_type:"id",mch_id:0,by_mode_id:0,rotate:0,extend_attrs:{trademark:"",productName:"",nameModified:!1},size_option:null,create_time:"1612175058767",update_time:"1612175058767",is_delete:0,science_id:0,user_id:0,cate_id:0,project_name:"",price:"0",cate:{},science_image:"",bleedline:5,science_name:"",def_line_color:"#ffffff",_enable_local_history:!0};this.$store.commit("editor-v2/set_project_data",t),this.$store.commit("editor-v2/set_project_data_loaded",!0),this.ajaxCraftList(),this.$root.modeReady=!0},ajaxEnterpriseInfo(){this.$http.get("/api/enterprise/enterprise/info").then(t=>{const{code:e,data:i}=t;200===e&&(this.$store.commit("enterprise/set_enterprise_info",i.info),this.$store.commit("enterprise/set_isCompanyDomain",i.companyDomain),this.ajaxEnterpriseUserInfo())})},ajaxEnterpriseUserInfo(){this.$http.get("/api/enterprise/enterprise/user/info").then(t=>{const{code:e,data:i}=t;200===e&&this.$store.commit("enterprise/set_enterprise_user_info",i)})},_injectStyle(t){const{design_data:e,inside_design_data:i}=t,s=[...e,...i].filter(t=>"font"===t.type).map(t=>({fontFamily:t.style.fontFamily,src:t.src}));Object(h["a"])(s,"ownFontStyle")},ajaxProjectKnife(t){const{id:e,mid:i,workOuterId:s}=this,n={bleed:t};i?(n.id=i,n.export_type="template"):s?(n.workOuterId=s,n.export_type="userWork"):(n.id=e,n.export_type="project"),this.$http.get("/api/v2/project/knife",n).then(t=>{200!==t.code?this.$message.error(t.msg):(this.$store.commit("editor-v2/set_knife_data",t.data),this.initAdsorbInstance(),this.adjust_canvas_size_and_position())})},ajaxScienceList2(){this.accessToken&&this.$http.get("/api/v2/materials/science",{pageSize:1e3,scienceType:2}).then(t=>{200!==t.code?this.$message.error(t.msg):this.$store.commit("editor-v2/set_surface_craft_list",t.data)})},ajaxScienceList1(){this.accessToken&&this.$http.get("/api/v2/materials/science",{pageSize:1e3,scienceType:1}).then(t=>{200!==t.code?this.$message.error(t.msg):this.$store.commit("editor-v2/set_material_list",t.data)})}},watch:{accessToken(t){t&&window.location.reload()},id(t){t&&(this.ajaxProjectInfo(),this.localHistory.reset())},"localHistory.version"(t){log("本地历史记录project的版本变化",t),t>0&&this.$route.query.type&&"preview"===this.$route.query.type&&this.$store.dispatch("saveForceCreateV2",{router:this.$router,knife_data:this.knife_data,project_data:this.project_data})},cur_face_name(t){this.adjust_canvas_size_and_position()},is_outside(t){this.adjust_canvas_size_and_position()},left_side_show(){this.adjust_canvas_size_and_position()},right_side_always_wide(){this.adjust_canvas_size_and_position()}}},L=D,P=(i("9bb7"),i("2877")),R=Object(P["a"])(L,s,n,!1,null,"6799cf9e",null);e["default"]=R.exports},"41ef":function(t,e,i){var s=i("d51b"),n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function a(t){return t=Math.round(t),t<0?0:t>255?255:t}function r(t){return t=Math.round(t),t<0?0:t>360?360:t}function o(t){return t<0?0:t>1?1:t}function l(t){return t.length&&"%"===t.charAt(t.length-1)?a(parseFloat(t)/100*255):a(parseInt(t,10))}function c(t){return t.length&&"%"===t.charAt(t.length-1)?o(parseFloat(t)/100):o(parseFloat(t))}function h(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function d(t,e,i){return t+(e-t)*i}function u(t,e,i,s,n){return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t}function p(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var f=new s(20),m=null;function g(t,e){m&&p(m,e),m=f.put(t,m||e.slice())}function v(t,e){if(t){e=e||[];var i=f.get(t);if(i)return p(e,i);t+="";var s=t.replace(/ /g,"").toLowerCase();if(s in n)return p(e,n[s]),g(t,e),e;if("#"!==s.charAt(0)){var a=s.indexOf("("),r=s.indexOf(")");if(-1!==a&&r+1===s.length){var o=s.substr(0,a),h=s.substr(a+1,r-(a+1)).split(","),d=1;switch(o){case"rgba":if(4!==h.length)return void u(e,0,0,0,1);d=c(h.pop());case"rgb":return 3!==h.length?void u(e,0,0,0,1):(u(e,l(h[0]),l(h[1]),l(h[2]),d),g(t,e),e);case"hsla":return 4!==h.length?void u(e,0,0,0,1):(h[3]=c(h[3]),b(h,e),g(t,e),e);case"hsl":return 3!==h.length?void u(e,0,0,0,1):(b(h,e),g(t,e),e);default:return}}u(e,0,0,0,1)}else{if(4===s.length){var m=parseInt(s.substr(1),16);return m>=0&&m<=4095?(u(e,(3840&m)>>4|(3840&m)>>8,240&m|(240&m)>>4,15&m|(15&m)<<4,1),g(t,e),e):void u(e,0,0,0,1)}if(7===s.length){m=parseInt(s.substr(1),16);return m>=0&&m<=16777215?(u(e,(16711680&m)>>16,(65280&m)>>8,255&m,1),g(t,e),e):void u(e,0,0,0,1)}}}}function b(t,e){var i=(parseFloat(t[0])%360+360)%360/360,s=c(t[1]),n=c(t[2]),r=n<=.5?n*(s+1):n+s-n*s,o=2*n-r;return e=e||[],u(e,a(255*h(o,r,i+1/3)),a(255*h(o,r,i)),a(255*h(o,r,i-1/3)),1),4===t.length&&(e[3]=t[3]),e}function y(t){if(t){var e,i,s=t[0]/255,n=t[1]/255,a=t[2]/255,r=Math.min(s,n,a),o=Math.max(s,n,a),l=o-r,c=(o+r)/2;if(0===l)e=0,i=0;else{i=c<.5?l/(o+r):l/(2-o-r);var h=((o-s)/6+l/2)/l,d=((o-n)/6+l/2)/l,u=((o-a)/6+l/2)/l;s===o?e=u-d:n===o?e=1/3+h-u:a===o&&(e=2/3+d-h),e<0&&(e+=1),e>1&&(e-=1)}var p=[360*e,i,c];return null!=t[3]&&p.push(t[3]),p}}function _(t,e){var i=v(t);if(i){for(var s=0;s<3;s++)i[s]=e<0?i[s]*(1-e)|0:(255-i[s])*e+i[s]|0,i[s]>255?i[s]=255:t[s]<0&&(i[s]=0);return j(i,4===i.length?"rgba":"rgb")}}function x(t){var e=v(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}function w(t,e,i){if(e&&e.length&&t>=0&&t<=1){i=i||[];var s=t*(e.length-1),n=Math.floor(s),r=Math.ceil(s),l=e[n],c=e[r],h=s-n;return i[0]=a(d(l[0],c[0],h)),i[1]=a(d(l[1],c[1],h)),i[2]=a(d(l[2],c[2],h)),i[3]=o(d(l[3],c[3],h)),i}}var C=w;function k(t,e,i){if(e&&e.length&&t>=0&&t<=1){var s=t*(e.length-1),n=Math.floor(s),r=Math.ceil(s),l=v(e[n]),c=v(e[r]),h=s-n,u=j([a(d(l[0],c[0],h)),a(d(l[1],c[1],h)),a(d(l[2],c[2],h)),o(d(l[3],c[3],h))],"rgba");return i?{color:u,leftIndex:n,rightIndex:r,value:s}:u}}var S=k;function A(t,e,i,s){if(t=v(t),t)return t=y(t),null!=e&&(t[0]=r(e)),null!=i&&(t[1]=c(i)),null!=s&&(t[2]=c(s)),j(b(t),"rgba")}function O(t,e){if(t=v(t),t&&null!=e)return t[3]=o(e),j(t,"rgba")}function j(t,e){if(t&&t.length){var i=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(i+=","+t[3]),e+"("+i+")"}}e.parse=v,e.lift=_,e.toHex=x,e.fastLerp=w,e.fastMapToColor=C,e.lerp=k,e.mapToColor=S,e.modifyHSL=A,e.modifyAlpha=O,e.stringify=j},"41f7":function(t,e,i){t.exports=i.p+"editor-assets/img/ang4-w.69c2970a.svg"},"41fe":function(t,e,i){t.exports=i.p+"editor-assets/img/translate-a.f8426e0a.svg"},4212:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));i("ddb0");var s=i("365c");function n(t,e,i,n){const a={length:t,width:e,height:i};if(n)for(const r of Object.keys(n)){const t=s["INSERT_SIZE"].find(t=>t.suffix===r),e=s["INSERT_SIZE"].find(t=>t.suffix===n[r]);e&&(a[t.prop]=a[e.prop])}return[a.length,a.width,a.height].filter(Boolean).filter(t=>1!==t)}},4223:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"enterprise-con"},[i("div",{staticClass:"top"},[i("a-radio-group",{staticClass:"tab-group",attrs:{"button-style":"solid"},on:{change:t.onChange},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},t._l(t.tabs,(function(e,s){return i("a-radio-button",{key:s,staticClass:"tab-button",attrs:{value:s}},[t._v(" "+t._s(e)+" ")])})),1),i("div",{class:"line mt-16 "+(2===t.modeType?"":"mb-16")}),2!==t.currentTab?i("div",{class:"enterprise-tree "+(t.showTree?"show-tree":"")},[i("a-button",{staticClass:"select-btn flex flex-between item-center",on:{click:function(e){t.showTree=!t.showTree}}},[t._v(t._s(t.selectedName)),i("i",{staticClass:"tree-arrow"})]),i("transition",{attrs:{name:"fade"}},[t.showTree?i("a-tree",{ref:"moveFile",staticClass:"edit-tree",attrs:{"show-icon":"","tree-data":t.fileList,"replace-fields":t.replaceFields,"default-expand-all":""},on:{select:t.onSelect},model:{value:t.selectedKeys,callback:function(e){t.selectedKeys=e},expression:"selectedKeys"}}):t._e()],1)],1):t._e()],1),i("a-spin",{attrs:{spinning:t.spinning}},[t.tabsList.length?i("div",{staticClass:"mode-list"},[i("div",{staticClass:"item flex flex-wrap"},t._l(t.tabsList,(function(e,s){return i("div",{key:s,class:"mode-item "+(t.modeType?1===t.modeType?"material-mr":"brand-mr":"tem-mr")},[t.spinning||0!==t.modeType?t._e():i("Mode",{attrs:{"mode-type":t.modeType,mode:e},on:{uploadTemplate:t.uploadTemplate}}),!t.spinning&&t.modeType?i("ModeMaterial",{attrs:{"mode-type":t.modeType,index:s,mode:e}}):t._e()],1)})),0)]):i("div",{staticClass:"noData"},[i("Empty")],1)])],1)},n=[],a=i("5530"),r=i("7de1"),o=i("4503"),l=i("4794"),c={components:{Mode:r["default"],ModeMaterial:o["default"],Empty:l["a"]},data(){return{currentTab:0,tabs:["模版","素材","LOGO"],tabsList:[],fileList:[],selectedName:"全部",selectedKeys:[""],showTree:!1,modeType:0,spinning:!0,replaceFields:{key:"id"}}},mounted(){this.getAllFiles(),this.getAllList()},methods:{onChange(t){this.selectedName="全部",this.selectedKeys=[""],this.showTree=!1,this.modeType=this.currentTab,2===this.currentTab?this.getBrand():(this.getAllFiles(),this.getAllList())},onSelect(t,e){e.selected&&(this.selectedName=e.node.title,this.showTree=!1,t[0]?this.getSingle(t):this.getAllList())},uploadTemplate(){this.getAllList()},getAllList(){this.spinning=!0,this.tabsList=[];const t=this.modeType?this.$http.get("/api/enterprise/enterprise/materialFile"):this.$http.get("/api/enterprise/enterprise/project");t.then(t=>{200===t.code?(this.spinning=!1,1===this.modeType?this.tabsList=t.data.rows.map(t=>Object(a["a"])(Object(a["a"])({},t),{file_path:t.filePath})):this.tabsList=t.data.projects.rows.concat(t.data.projectImages.rows)):(this.spinning=!1,this.$message.error(t.msg))}).catch(t=>{this.spinning=!1,this.$message.error(t)})},getAllFiles(){this.spinning=!0,this.$http.get("/api/enterprise/enterprise/folder",{type:this.modeType?"material":"project"}).then(t=>{200===t.code?(this.fileList=[{id:"",value:"",title:"全部",pid:"",children:t.data}],this.spinning=!1):this.$message.error(t.msg)})},getSingle(t){this.$http.get("/api/enterprise/enterprise/folder/items",{type:this.modeType?"material":"project",folderId:t}).then(t=>{200===t.code&&(this.modeType?this.tabsList=t.data.rows.map(t=>Object(a["a"])(Object(a["a"])({},t),{file_path:t.filePath})):this.tabsList=t.data.projects.rows.concat(t.data.projectImages.rows))}).catch(t=>{this.$message.error(t)})},getBrand(){this.spinning=!0,this.$http.get("/api/enterprise/enterprise/brand/logos").then(t=>{200===t.code?(this.spinning=!1,this.tabsList=t.data.map(t=>(t.children&&(t.children=t.children.map(t=>Object(a["a"])(Object(a["a"])({},t),{file_path:t.filePath}))),t))):this.$message.error(t.msg)}).catch(t=>{this.$message.error(t)})}}},h=c,d=(i("6b56"),i("ea51"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,"679d115a",null);e["default"]=u.exports},4229:function(t,e,i){},4250:function(t,e,i){"use strict";(function(e,s){var n;t.exports=M,M.ReadableState=j;i("faa1").EventEmitter;var a=function(t,e){return t.listeners(e).length},r=i("5bbb"),o=i("1c35").Buffer,l=e.Uint8Array||function(){};function c(t){return o.from(t)}function h(t){return o.isBuffer(t)||t instanceof l}var d,u=i(2);d=u&&u.debuglog?u.debuglog("stream"):function(){};var p,f,m,g=i("96a5"),v=i("493f"),b=i("b9b5"),y=b.getHighWaterMark,_=i("9d8a").codes,x=_.ERR_INVALID_ARG_TYPE,w=_.ERR_STREAM_PUSH_AFTER_EOF,C=_.ERR_METHOD_NOT_IMPLEMENTED,k=_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;i("3fb5")(M,r);var S=v.errorOrDestroy,A=["error","close","destroy","pause","resume"];function O(t,e,i){if("function"===typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}function j(t,e,s){n=n||i("e666"),t=t||{},"boolean"!==typeof s&&(s=e instanceof n),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=y(this,t,"readableHighWaterMark",s),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=i("7d72").StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function M(t){if(n=n||i("e666"),!(this instanceof M))return new M(t);var e=this instanceof n;this._readableState=new j(t,this,e),this.readable=!0,t&&("function"===typeof t.read&&(this._read=t.read),"function"===typeof t.destroy&&(this._destroy=t.destroy)),r.call(this)}function I(t,e,i,s,n){d("readableAddChunk",e);var a,r=t._readableState;if(null===e)r.reading=!1,R(t,r);else if(n||(a=E(r,e)),a)S(t,a);else if(r.objectMode||e&&e.length>0)if("string"===typeof e||r.objectMode||Object.getPrototypeOf(e)===o.prototype||(e=c(e)),s)r.endEmitted?S(t,new k):T(t,r,e,!0);else if(r.ended)S(t,new w);else{if(r.destroyed)return!1;r.reading=!1,r.decoder&&!i?(e=r.decoder.write(e),r.objectMode||0!==e.length?T(t,r,e,!1):B(t,r)):T(t,r,e,!1)}else s||(r.reading=!1,B(t,r));return!r.ended&&(r.length<r.highWaterMark||0===r.length)}function T(t,e,i,s){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",i)):(e.length+=e.objectMode?1:i.length,s?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&z(t)),B(t,e)}function E(t,e){var i;return h(e)||"string"===typeof e||void 0===e||t.objectMode||(i=new x("chunk",["string","Buffer","Uint8Array"],e)),i}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),M.prototype.destroy=v.destroy,M.prototype._undestroy=v.undestroy,M.prototype._destroy=function(t,e){e(t)},M.prototype.push=function(t,e){var i,s=this._readableState;return s.objectMode?i=!0:"string"===typeof t&&(e=e||s.defaultEncoding,e!==s.encoding&&(t=o.from(t,e),e=""),i=!0),I(this,t,e,!1,i)},M.prototype.unshift=function(t){return I(this,t,null,!0,!1)},M.prototype.isPaused=function(){return!1===this._readableState.flowing},M.prototype.setEncoding=function(t){p||(p=i("7d72").StringDecoder);var e=new p(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;var s=this._readableState.buffer.head,n="";while(null!==s)n+=e.write(s.data),s=s.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var D=1073741824;function L(t){return t>=D?t=D:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function P(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=L(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function R(t,e){if(d("onEofChunk"),!e.ended){if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,e.sync?z(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,N(t)))}}function z(t){var e=t._readableState;d("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(d("emitReadable",e.flowing),e.emittedReadable=!0,s.nextTick(N,t))}function N(t){var e=t._readableState;d("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,W(t)}function B(t,e){e.readingMore||(e.readingMore=!0,s.nextTick(F,t,e))}function F(t,e){while(!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length)){var i=e.length;if(d("maybeReadMore read 0"),t.read(0),i===e.length)break}e.readingMore=!1}function $(t){return function(){var e=t._readableState;d("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,W(t))}}function U(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function H(t){d("readable nexttick read 0"),t.read(0)}function V(t,e){e.resumeScheduled||(e.resumeScheduled=!0,s.nextTick(G,t,e))}function G(t,e){d("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),W(t),e.flowing&&!e.reading&&t.read(0)}function W(t){var e=t._readableState;d("flow",e.flowing);while(e.flowing&&null!==t.read());}function Y(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):i=e.buffer.consume(t,e.decoder),i);var i}function q(t){var e=t._readableState;d("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,s.nextTick(X,e,t))}function X(t,e){if(d("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var i=e._writableState;(!i||i.autoDestroy&&i.finished)&&e.destroy()}}function Q(t,e){for(var i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1}M.prototype.read=function(t){d("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return d("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?q(this):z(this),null;if(t=P(t,e),0===t&&e.ended)return 0===e.length&&q(this),null;var s,n=e.needReadable;return d("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&(n=!0,d("length less than watermark",n)),e.ended||e.reading?(n=!1,d("reading or ended",n)):n&&(d("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=P(i,e))),s=t>0?Y(t,e):null,null===s?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&q(this)),null!==s&&this.emit("data",s),s},M.prototype._read=function(t){S(this,new C("_read()"))},M.prototype.pipe=function(t,e){var i=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,d("pipe count=%d opts=%j",n.pipesCount,e);var r=(!e||!1!==e.end)&&t!==s.stdout&&t!==s.stderr,o=r?c:b;function l(t,e){d("onunpipe"),t===i&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,p())}function c(){d("onend"),t.end()}n.endEmitted?s.nextTick(o):i.once("end",o),t.on("unpipe",l);var h=$(i);t.on("drain",h);var u=!1;function p(){d("cleanup"),t.removeListener("close",g),t.removeListener("finish",v),t.removeListener("drain",h),t.removeListener("error",m),t.removeListener("unpipe",l),i.removeListener("end",c),i.removeListener("end",b),i.removeListener("data",f),u=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||h()}function f(e){d("ondata");var s=t.write(e);d("dest.write",s),!1===s&&((1===n.pipesCount&&n.pipes===t||n.pipesCount>1&&-1!==Q(n.pipes,t))&&!u&&(d("false write response, pause",n.awaitDrain),n.awaitDrain++),i.pause())}function m(e){d("onerror",e),b(),t.removeListener("error",m),0===a(t,"error")&&S(t,e)}function g(){t.removeListener("finish",v),b()}function v(){d("onfinish"),t.removeListener("close",g),b()}function b(){d("unpipe"),i.unpipe(t)}return i.on("data",f),O(t,"error",m),t.once("close",g),t.once("finish",v),t.emit("pipe",i),n.flowing||(d("pipe resume"),i.resume()),t},M.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var s=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<n;a++)s[a].emit("unpipe",this,{hasUnpiped:!1});return this}var r=Q(e.pipes,t);return-1===r||(e.pipes.splice(r,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},M.prototype.on=function(t,e){var i=r.prototype.on.call(this,t,e),n=this._readableState;return"data"===t?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===t&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,d("on readable",n.length,n.reading),n.length?z(this):n.reading||s.nextTick(H,this))),i},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(t,e){var i=r.prototype.removeListener.call(this,t,e);return"readable"===t&&s.nextTick(U,this),i},M.prototype.removeAllListeners=function(t){var e=r.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||s.nextTick(U,this),e},M.prototype.resume=function(){var t=this._readableState;return t.flowing||(d("resume"),t.flowing=!t.readableListening,V(this,t)),t.paused=!1,this},M.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},M.prototype.wrap=function(t){var e=this,i=this._readableState,s=!1;for(var n in t.on("end",(function(){if(d("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(n){if(d("wrapped data"),i.decoder&&(n=i.decoder.write(n)),(!i.objectMode||null!==n&&void 0!==n)&&(i.objectMode||n&&n.length)){var a=e.push(n);a||(s=!0,t.pause())}})),t)void 0===this[n]&&"function"===typeof t[n]&&(this[n]=function(e){return function(){return t[e].apply(t,arguments)}}(n));for(var a=0;a<A.length;a++)t.on(A[a],this.emit.bind(this,A[a]));return this._read=function(e){d("wrapped _read",e),s&&(s=!1,t.resume())},this},"function"===typeof Symbol&&(M.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=i("4186")),f(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),M._fromList=Y,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(M.from=function(t,e){return void 0===m&&(m=i("919c")),m(M,t,e)})}).call(this,i("c8ba"),i("4362"))},4268:function(t,e,i){"use strict";var s=i("ee49"),n=i.n(s);n.a},4277:function(t,e,i){"use strict";var s=i("28f4"),n=i.n(s);n.a},4284:function(t,e,i){t.exports=i.p+"editor-assets/img/button-draw-right-r.7c482cf3.svg"},"42e5":function(t,e){var i=function(t){this.colorStops=t||[]};i.prototype={constructor:i,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}};var s=i;t.exports=s},4337:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{visible:t.visible,title:"修改"+("image"===t.renderType?"图片":"视频")+"名称",width:300,zIndex:6002,footer:null,centered:""},on:{cancel:function(e){return t.$emit("change",!1)}}},[i("a-input",{attrs:{size:"large"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),i("a-button",{staticClass:"mt-20",attrs:{type:"primary",block:"",size:"large",loading:t.loading},on:{click:t.submit}},[t._v("提交修改")])],1)},n=[],a=i("5530"),r=i("5880"),o=i("365c"),l={model:{prop:"visible",event:"change"},props:{visible:{type:Boolean},name:{type:String},tempId:{type:Number}},computed:Object(a["a"])({},Object(r["mapGetters"])("render",["renderType"])),watch:{name(t){this.title=t}},data(){return{title:this.name,loading:!1}},methods:{submit(){this.title?(this.loading=!0,"image"===this.renderType?this.$api.project.renderImageUpdate({id:this.tempId,filename:this.title}).then(t=>{this.loading=!1,0===t.errno&&(this.$message.success(t.errmsg),this.$emit("update-success",{name:this.title,id:this.tempId}),this.$emit("change",!1))}):Object(o["taskInfoUpdate"])({task_id:this.tempId,title:this.title}).then(t=>{this.loading=!1,200===t.code&&(this.$message.success("修改成功"),this.$store.dispatch("render/saveUpdateName",{id:this.tempId,title:this.title}),this.$emit("change",!1))})):this.$message.error("请输入名称")}}},c=l,h=i("2877"),d=Object(h["a"])(c,s,n,!1,null,null,null);e["default"]=d.exports},4343:function(t,e,i){t.exports=i.p+"editor-assets/img/e5.83e53c57.svg"},4364:function(t,e,i){"use strict";i.r(e);i("b680");var s=i("750b"),n=(i("365c"),i("5a0c"),i("c991"),i("6cb4")),a=i("1060"),r=i("3112"),o=(i("414b"),i("29bf")),l=(i("d43c"),i("262e"));const c=36e5;e["default"]=Object(s["b"])({props:{data:{required:!0},images:{required:!0,type:Array},projectId:{required:!0,type:String},count:{required:!0,type:Number},pageMd5:{require:!0,type:String}},setup(t,e){Object(s["a"])(()=>{try{var t;return JSON.parse(null===(t=d.value)||void 0===t?void 0:t.pay_info)}catch(e){return[]}});const i=Object(s["j"])(null),h=Object(s["j"])(""),{data:d}=t,u=(Object(s["a"])(()=>{var t;return"success"===(null===(t=d.value)||void 0===t?void 0:t.pay_status)?3:1}),t=>{i.value=t}),p=()=>{var s;Object(a["d"])({data:{name:d.projectInfo.name,createdAt:Date.now(),total:d.payFee,message:h.value,__raw:{data:t.data,images:t.images,address:i.value}},expire:c}),e.router.push({path:"/pay",query:{project_id:t.projectId,count:t.count,address_id:null===(s=i.value)||void 0===s?void 0:s.id,type:"preorder",page_md5:t.pageMd5}})};return()=>{var e;return Object(s["c"])("div",{class:"page-order"},[Object(s["c"])("div",{class:"p-32"},[Object(s["c"])(r["default"],{attrs:{status:"确认订单信息",current:0}}),Object(s["c"])("div",{class:"goods-info-wrap"},[Object(s["c"])("div",{class:"flex mb-28",style:"align-items:center;"},[Object(s["c"])("div",{class:"sub-title"},["选择收货地址"]),Object(s["c"])("span",{style:"margin-left:12px; display:flex;"},["（默认顺丰到到付）"])]),Object(s["c"])(n["default"],{on:{change:u}}),Object(s["c"])("a-divider")]),Object(s["c"])(o["default"],{attrs:{data:d,canUpdate:!0,images:t.images},on:{"message-change":t=>h.value=t}})]),Object(s["c"])("div",{class:"order-bottom py-40 flex item-center px-32"},[Object(s["c"])("div"),Object(s["c"])("div",{class:"ml-auto text-right"},[Object(s["c"])("span",["success"===(null===(e=d.value)||void 0===e?void 0:e.pay_status)?"实":"应","付款： ¥ "]),Object(s["c"])("span",{class:"sum"},[d.payFee.toFixed(2)]),Object(s["c"])("br"),i.value&&Object(s["c"])(l["default"],{attrs:{address:i.value}}),Object(s["c"])("a-button",{class:"mt-32",attrs:{type:"primary",size:"large",disabled:!i.value},on:{click:()=>{p()}}},["去付款"])])]),Object(s["c"])("div",{class:"placeholder"})])}}})},"436b":function(t,e,i){"use strict";var s=i("b30c"),n=i.n(s);n.a},"441f":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"for-svg-wrap"},[i("width-height-input"),t._l(t.curDesign.fills,(function(e,s){return i("b-pallet",{key:s,ref:"bg",refInFor:!0,staticClass:"mt-16",attrs:{cmyk:"",value:e.color||e,"history-colors":[]},on:{confirm:function(e){return t.onPickerChange(s,e.rgba)}}})})),i("opacity-slider",{staticClass:"mt-16"}),i("select-element-craft"),i("a-divider",{staticClass:"mt-24"}),i("design-common-operation",{staticClass:"mt-16"})],2)},n=[],a=i("5530"),r=i("5880"),o=i("13f9"),l=i("1e9d"),c=i("3937"),h=i("1c0d"),d={components:{widthHeightInput:o["default"],opacitySlider:c["default"],selectElementCraft:h["default"],designCommonOperation:l["default"]},computed:Object(a["a"])({},Object(r["mapGetters"])("editor-v2",["curDesign"])),methods:{onPickerChange(t,e){this.curDesign.fills[t].color=e}}},u=d,p=(i("092f"),i("2877")),f=Object(p["a"])(u,s,n,!1,null,null,null);e["default"]=f.exports},4436:function(t,e,i){var s=i("74cb");function n(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}n.prototype={constructor:n,step:function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),this._paused)this._pausedTime+=e;else{var i=(t-this._startTime-this._pausedTime)/this._life;if(!(i<0)){i=Math.min(i,1);var n=this.easing,a="string"===typeof n?s[n]:n,r="function"===typeof a?a(i):i;return this.fire("frame",r),1===i?this.loop?(this.restart(t),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(t){var e=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-e+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(t,e){t="on"+t,this[t]&&this[t](this._target,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var a=n;t.exports=a},4461:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("124f"),n=r(s),a=i("6e53");function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=function(t){function e(t,i){return o(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t+(0,a.mod11)(t),i))}return c(e,t),e}(n.default);e.default=h},"44cc":function(t,e,i){},4503:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"marterial-brand mb-8"},[1===t.modeType?i("div",{staticClass:"marterial-item"},[i("resizeable",{attrs:{item:t.mode,index:t.index,width:80,"id-prefix":"galleryItem"},on:{mousedown:function(e){return t.onDragMaterialToGraph(e,t.mode)}}})],1):t.mode.children.length?i("div",{staticClass:"brand"},[i("div",{staticClass:"title"},[t._v(t._s(t.mode.name))]),i("div",{staticClass:"brand-item flex flex-wrap mt-13"},t._l(t.mode.children,(function(e,s){return i("resizeable",{key:s,staticClass:"mb-8",attrs:{item:e,index:s,width:122,"id-prefix":"galleryItem"},on:{mousedown:function(i){return t.onDragMaterialToGraph(i,e)}}})})),1)]):t._e()])},n=[],a=(i("ddb0"),i("5530")),r=i("5880"),o=i("26a1"),l=i("c64e"),c=i.n(l),h=i("6b13"),d=i("365c"),u={components:{Resizeable:h["default"]},props:{modeType:{type:Number,default:1},mode:{type:Object,default:()=>{}},index:{type:Number,default:0}},computed:Object(a["a"])({},Object(r["mapState"])("editor-v2",["knife_data","project_data","scale"])),data(){return{}},methods:{openLeftSidePanel(){this.$store.commit("editor-v2/set_left_side_show",!0),this.$route.query.id||this.$route.query.workOuterId?this.$store.commit("editor-v2/set_left_side_cur_menu_index",1):this.$store.commit("editor-v2/set_left_side_cur_menu_index",0)},onDragMaterialToGraph(t,e){var i,s;if(!this.project_data.id)return this.$message.info("请选择一个模板开始设计"),void this.openLeftSidePanel();const n=null===(i=t.target.children[0])||void 0===i?void 0:i.getBoundingClientRect();if(!n)return!1;if(0!==t.button)return!1;this.tempShow=!0,this.tempImg=e.file_path;const a=document.getElementById("galleryItem"+e.id),r=null===(s=t.target)||void 0===s?void 0:s.getBoundingClientRect();if(!r)return;const l=t.clientX,h=t.clientY;a.style.position="fixed",a.style.left=r.x+"px",a.style.top=r.y+"px",a.style.zIndex=1e4;const u=r.x,p=r.y;document.onmousemove=t=>{const e=t.clientX-l,i=t.clientY-h;return a.style.left=u+e+"px",a.style.top=p+i+"px",!1},document.onmouseup=i=>{var s,r;const l=null===(s=i.target.querySelector("img"))||void 0===s?void 0:s.getBoundingClientRect();this.$track({category:"AdoptMaterial",action:"click"});const h=null===(r=document.getElementById("svgContainer"))||void 0===r?void 0:r.getBoundingClientRect(),u=c()(),p={type:"img",src:e.file_path,id:e.id,uuid:u,can_set_color:e.can_set_color||0,style:{position:"absolute",top:50,left:100,width:n.width/d["DPI"]/this.scale,height:n.height/d["DPI"]/this.scale,rotate:360-this.project_data.rotate||0,opacity:100},bg:{x:0,y:0,width:n.width/d["DPI"]/this.scale,height:n.height/d["DPI"]/this.scale}},f=(l.x-h.x)/this.scale,m=(l.y-h.y)/this.scale;[p.style.left,p.style.top]=Object(o["c"])(this.project_data.rotate,f/d["DPI"],m/d["DPI"],p.style.width,p.style.height,this.knife_data.totalX,this.knife_data.totalY),Object(o["d"])(i,t)&&(p.style.left=this.knife_data.totalX/2,p.style.top=this.knife_data.totalY/2),this.$store.commit("editor-v2/insertDesignItem",p),a.style.position="static",a.style.zIndex="auto",document.onmousemove=null,document.onmouseup=null}}}},p=u,f=(i("e97d"),i("641e"),i("2877")),m=Object(f["a"])(p,s,n,!1,null,"c496511a",null);e["default"]=m.exports},4505:function(t,e,i){},4510:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-limit pr-12"},[i("a-progress",{attrs:{percent:t.usedNumber/t.totalNumber*100,size:"small","show-info":!1,"stroke-color":"#ff6634"}}),i("div",{staticClass:"flex flex-between item-center"},[i("div",{staticClass:"fo-gray fo-12 mt-4"},[t._v("已上传 "+t._s(t.usedNumber)+"/"+t._s(t.totalNumber)+" 张")]),i("a",{staticClass:"fo-theme fo-12 mt-4",on:{click:function(e){return t.$emit("click")}}},[t._v("扩充容量")])])],1)},n=[],a={props:{usedNumber:{type:Number,default:0},totalNumber:{type:Number,default:100}}},r=a,o=(i("da16"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"2a1087ae",null);e["default"]=l.exports},4573:function(t,e,i){var s=i("cbe5"),n=s.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var i=e.cx,s=e.cy,n=2*Math.PI;t.moveTo(i+e.r,s),t.arc(i,s,e.r,0,n,!1),t.moveTo(i+e.r0,s),t.arc(i,s,e.r0,0,n,!0)}});t.exports=n},"457e":function(t,e,i){t.exports=i.p+"editor-assets/img/customer-service.3d44246c.svg"},4582:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rendered-left"},[s("div",[s("scrollbar",{directives:[{name:"show",rawName:"v-show",value:0===t.page&&0===t.menu&&"image"===t.renderType,expression:"page === 0 && menu === 0 && renderType === 'image'"}],attrs:{maxHeight:t.HEIGHT+"px"},on:{reachBottom:function(e){return t.getBgList(!0)}}},[s("div",{staticClass:" p-20"},[s("div",{staticClass:"fo-14 pfow flex flex-start item-start"},[s("div",[t._v("快搭模板")]),s("a-tooltip",{attrs:{placement:"bottomLeft"}},[s("template",{slot:"title"},[s("span",[t._v("快搭模板是指储存并快速应用当前渲染场景内所有参数的场景模板，包括但不限于模型位置及数量、灯光、材质、相机、背景等信息。")])]),s("div",{staticClass:"ml-4 mr-4"},[s("a-icon",{staticStyle:{color:"#FBB120"},attrs:{type:"question-circle"}})],1)],2),s("div",{staticClass:"bxhtest",staticStyle:{transform:"scale(0.8, 0.8)",display:"block",width:"30px"}},[t._v(" Beta ")])],1),s("div",{staticClass:"flex flex-between flex-wrap mt-8"},[t._l(t.tpList,(function(e,i){return s("div",{key:i,staticClass:"bg-item",style:{backgroundImage:"url("+t.thumbImg(e.image,104,78,90)+")"},on:{click:function(i){return t.$emit("tp-change",e)}}},[s("a-popover",{attrs:{trigger:"hover",placement:"rightTop",arrowPointAtCenter:!0,mouseLeaveDelay:0,overlayClassName:"render-bg-item-pop"}},[s("template",{slot:"content"},[s("div",{staticClass:"pt-8"},[s("div",{staticClass:"pfow"},[t._v("示例效果图")]),s("div",{staticClass:"example-image mt-16",style:{backgroundImage:"url("+e.example_image+")"}}),s("div",{staticClass:"mt-16 fo-12 fo-gray pr-12"},[t._v(" "+t._s(e.title)+" ")])])]),s("div",{staticClass:"gb-item-gth"},[s("a-icon",{staticStyle:{"font-size":"10px",color:"#ffffff"},attrs:{type:"exclamation"}})],1)],2)],1)})),s("a-popover",{attrs:{trigger:"hover",placement:"rightTop",overlayClassName:"render-bg-item-pop"}},[s("template",{slot:"content"},[s("div",{staticClass:"flex flex-between item-center"},[s("div",{staticClass:"pfow"},[t._v("我的快搭模板")]),s("div",{staticClass:"fo-12 fo-gray pr-12"},[t._v(t._s(t.tpList2.length)+" / 10")])]),s("a-button",{staticClass:" mt-12 mb-12",staticStyle:{width:"216px"},attrs:{type:"primary",block:"",loading:t.tpLoading},on:{click:function(e){return t.$emit("set-tp-mode")}}},[t._v("将当前场景设为快搭模板")]),s("scrollbar",{attrs:{maxHeight:258},on:{reachBottom:function(e){return t.getTempMode(!0,"2")}}},[s("div",{staticClass:"flex flex-start flex-wrap"},[t._l(t.renderList,(function(e,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.tmpTaskId==e.id,expression:"tmpTaskId == item.id"}],key:i+"s",staticClass:"bg-item mr-8",style:{backgroundImage:"url("+t.thumbImg(e.image,104,78,90)+")"}},[s("div",{staticClass:"flex flex-center item-center",staticStyle:{width:"100%",height:"100%",background:"rgba(0,0,0,0.5)",color:"#fff"}},[t._v(" 生成中... ")])])})),t._l(t.tpList2,(function(e,n){return s("div",{key:n,staticClass:"bg-item mr-8",style:{backgroundImage:"url("+t.thumbImg(e.image,104,78,90)+")"},on:{click:function(i){return t.$emit("tp-change",e)}}},[s("div",{staticClass:"del-btn flex flex-center item-center",on:{click:function(i){return i.stopPropagation(),t.delTpMode(e.id)}}},[s("img",{attrs:{src:i("87dd")}})])])}))],2),t.tpList2.length>0&&t.tpList2.length>=t.tpcount2?s("div",{staticClass:"mt-12 fo-12 fo-gray text-center"},[t._v(" 没有更多了 ")]):t._e(),0===t.tpList2.length&&0===t.renderList.length?s("div",{staticClass:"text-center mt-40"},[s("img",{attrs:{src:i("e597"),width:"155px"}}),s("div",{staticClass:"fo-12 fo-gray mt-16"},[t._v("您还没有快搭场景模板哦~")])]):t._e()])],1),s("div",{staticClass:"bg-item flex flex-center item-center"},[s("div",{staticClass:"text-center"},[s("div",{staticClass:"fo-14 fo-gray mt-4"},[t._v("我的")])])])],2)],2),s("div",{class:(t.user.is_admin?"mt-24":"")+" flex flex-between item-center"},[s("div",{staticClass:"fo-14 pfow"},[t._v("预设相机角度")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.user.is_admin,expression:"user.is_admin"}],staticClass:"flex flex-start item-center mt-16"},[s("div",{staticClass:"pfow"},[t._v("X")]),s("input",{staticClass:"tarnsform-input",attrs:{type:"text"},domProps:{value:t.position.x},on:{blur:function(e){return t.positionChange(e.target.value,"x")}}}),s("div",{staticClass:"pfow ml-8"},[t._v("Y")]),s("input",{staticClass:"tarnsform-input",attrs:{type:"text"},domProps:{value:t.position.y},on:{blur:function(e){return t.positionChange(e.target.value,"y")}}}),s("div",{staticClass:"pfow ml-8"},[t._v("Z")]),s("input",{staticClass:"tarnsform-input",attrs:{type:"text"},domProps:{value:t.position.z},on:{blur:function(e){return t.positionChange(e.target.value,"z")}}})]),s("div",{staticClass:"flex flex-start flex-wrap mt-12"},t._l(t.renderRotates,(function(e,i){return s("div",{key:i,class:" flex flex-center item-center rect-btn "+(i===t.renderRotateFlag?"bg-b-active":"bg-b-def"),on:{click:function(e){return t.renderRotateClick(i)},mouseover:function(e){return t.mouseOver(i)},mouseout:function(e){return t.mouseOut(i)}}},[s("div",{staticClass:"text-center"},[s("img",{attrs:{src:e.over||i===t.renderRotateFlag?e.img:e.imgb}}),s("div",{staticClass:"fo-pfow fo-12"},[t._v(t._s(e.label))])])])})),0),s("div",{staticClass:"fo-14 pfow mt-24"},[t._v("背景")]),s("div",{staticClass:"mt-16 flex flex-start item-center flex-wrap backset"},[s("div",{staticClass:"flex flex-between item-center w-100"},[s("div",{class:"bg-btn nobg "+(0===t.bgFlag?"bg-btn--active":""),on:{click:function(e){return t.bgFlagChange(0)}}}),s("div",{class:"bg-btn "+(1===t.bgFlag?"bg-btn--active":""),staticStyle:{"margin-right":"0"},on:{click:function(e){return t.bgFlagChange(1)}}},[s("Pallet",{attrs:{value:t.color,title:"背景颜色",historyColors:[],showPrint:!1,showTakeColor:!1,placement:"topRight",showOpacity:!1},on:{confirm:t.colorConfirm}})],1)]),s("a-upload",{attrs:{name:"file",customRequest:t.uploadChange,fileList:t.fileList}},[s("div",{class:"bg-btn2 "+(2===t.bgFlag?"bg-btn2--active":"")+" back-img fo-12 flex flex-center item-center bg-b-def2 fo-white pointer",style:{backgroundImage:"url("+t.background+")"},on:{click:function(e){return t.bgFlagChange(2)}}},[t._v(" "+t._s(t.background?"":"上传背景图片")+" "),t.background?s("div",{staticClass:"mask flex flex-center item-center"},[s("a-icon",{staticStyle:{color:"#fff"},attrs:{type:"retweet"}}),s("a-icon",{staticClass:"ml-8",staticStyle:{color:"#fff"},attrs:{type:"delete"},on:{click:function(e){return e.stopPropagation(),t.delBackground(e)}}})],1):t._e()])]),s("div",{staticClass:"flex flex-between flex-wrap mt-8 w-100"},t._l(t.bgList,(function(e,i){return s("div",{key:i,staticClass:"bg-item",style:{backgroundImage:"url("+t.thumbImg(e.image_path,104,78,90)+")"},on:{click:function(i){t.chooseImage(t.thumbImg(e.image_path,1080,1080,90))}}})})),0)],1),t.bgList.length>=t.bgcount?s("div",{staticClass:"mt-12 fo-12 fo-gray text-center"},[t._v(" 没有更多了 ")]):t._e()])]),1===t.page?s("scrollbar",{attrs:{maxHeight:t.HEIGHT+"px"},on:{reachBottom:t.handleReachBottom}},[1===t.page&&"image"===t.renderType?s("div",{staticClass:"pt-4"},[t._l(t.renderList,(function(e,i){return s("div",{key:i,staticClass:"pic-item"},[s("div",{staticClass:"pic-img"},[s("div",{staticClass:"img flex flex-center item-center"},[s("img",{attrs:{src:e.image+"?imageView2/0/w/216/h/162/q/100"}})]),s("div",{staticClass:"progress  flex flex-center item-center"},["rendering"===e.status?s("div",{staticClass:"text-center"},[s("div",{staticClass:"fo-white mb-8"},[t._v("渲染中"+t._s(e.progress)+"%...")]),"rendering"===e.status?s("a-progress",{staticStyle:{width:"186px"},attrs:{percent:e.progress||0,"show-info":!1,strokeColor:"#ff6634"}}):t._e()],1):t._e(),"wait"===e.status?s("div",{staticClass:" fo-white"},[t._v(" 相机预备中... ")]):t._e()])]),s("div",{staticClass:"text-k"},[t._v(t._s(e.filename))])])})),t._l(t.list,(function(e,n){return s("div",{key:"sk"+n,staticClass:"pic-item ",on:{click:function(e){t.listFlag=n,t.emitPreview()}}},[s("div",{class:"pic-img pic-img-none "+(t.listFlag===n?"pic-img--active":""),style:{height:e.height+"px"}},[s("div",{staticClass:"img ",style:{height:e.height+"px",backgroundImage:"url("+e.image+"?imageView2/0/w/"+(e.height>216?parseInt(e.height):216)+"/h/"+(e.height<=216?parseInt(e.height):216)+"/q/100"}},[s("div",{staticClass:"flex flex-between item-center"},[s("div",{staticClass:"tag-kuang ml-8"},[t._v(t._s(e.clear_text||"1K标清"))]),s("div",{staticClass:"tag-kuang mr-8 pointer hishow",on:{click:function(e){return e.stopPropagation(),t.delImage(n)}}},[s("img",{attrs:{src:i("3187"),alt:""}})])])]),s("div",{staticClass:"opt"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"flex flex-end item-center"},[s("div",{class:t.listFlag===n?"opt-right":"opt-def"},[t.listFlag===n?s("a-icon",{staticStyle:{"font-size":"10px",color:"#fff",transform:"scale(0.5,0.5)",position:"relative",top:"-5px"},attrs:{type:"check"}}):t._e()],1)])])]),s("div",{staticClass:"flex flex-between item-center"},[s("div",{staticClass:"text-k ell"},[t._v(t._s(e.filename||"方案未命名"))]),s("a-icon",{staticClass:"editer-icon pointer",attrs:{type:"edit"},on:{click:function(i){t.tempId=e.id,t.tempName=e.filename,t.showUpdateName=!0}}})],1)])})),s("div",{staticClass:"flex flex-center item-center"},[s("a-spin",{attrs:{spinning:t.spinning}})],1)],2):t._e(),1===t.page&&"video"===t.renderType?s("div",{staticClass:"pt-4"},t._l(t.videoList,(function(e,n){return s("div",{key:n,class:"pic-item "},[s("div",{class:"pic-img "+(t.videoCurrent===n?"pic-img--active":""),on:{click:function(e){return t.$store.dispatch("render/saveVideoCurrent",n)}}},[s("div",{staticClass:"img ",style:{backgroundImage:"url("+(e.videoPreviewImgPath||e.videoShed.imagePath)+")"}},[s("div",{staticClass:"flex flex-between item-center",staticStyle:{height:"1px"}},[s("div",{staticClass:"ml-8"}),s("div",{staticClass:"tag-kuang mr-8 pointer hishow ",staticStyle:{"margin-top":"28px","z-index":"2"},on:{click:function(e){return e.stopPropagation(),t.delImage(n)}}},[s("img",{attrs:{src:i("3187"),alt:""}})])]),s("div",{staticClass:"flex flex-center item-center",staticStyle:{width:"100%",height:"100%"}},[88===e.status?s("div",{staticClass:"img-play flex flex-center item-center"},[s("img",{attrs:{src:i("57f3")}})]):t._e()])]),88!==e.status?s("div",{staticClass:"progress  flex flex-center item-center"},["rendering"===e.status?s("div",{staticClass:"text-center"},[s("div",{staticClass:"fo-white mb-8"},[t._v("渲染中"+t._s(e.progress)+"%...")]),"rendering"===e.status?s("a-progress",{staticStyle:{width:"186px"},attrs:{percent:e.progress||0,"show-info":!1,strokeColor:"#ff6634"}}):t._e()],1):t._e(),0===e.status?s("div",{staticClass:" fo-white"},[t._v(" 正在拍摄中... ")]):2===e.status?s("div",{staticClass:" fo-white"},[t._v(" 渲染失败 ")]):s("div",{staticClass:" fo-white"},[t._v(" 正在拍摄中... ")])]):t._e()]),s("div",{staticClass:"flex flex-between item-center"},[s("div",{staticClass:"text-k ell"},[t._v(t._s(e.title))]),s("a-icon",{staticClass:"editer-icon pointer",attrs:{type:"edit"},on:{click:function(i){t.tempId=e.id,t.tempName=e.title,t.showUpdateName=!0}}})],1)])})),0):t._e()]):t._e()],1),s("light",{directives:[{name:"show",rawName:"v-show",value:1===t.menu&&0===t.page&&"image"===t.renderType,expression:"menu === 1 && page === 0 && renderType === 'image'"}],attrs:{height:t.HEIGHT}}),"video"===t.renderType&&0===t.page?s("video-menu",{attrs:{height:t.HEIGHT}}):t._e(),s("update-name",{attrs:{tempId:t.tempId,name:t.tempName},on:{"update-success":function(e){t.list[t.listFlag].filename=e.name}},model:{value:t.showUpdateName,callback:function(e){t.showUpdateName=e},expression:"showUpdateName"}})],1)},n=[],a=(i("b680"),i("1276"),i("ddb0"),i("5530")),r=i("7018"),o=i("5880"),l=i("9393"),c=i("ed08"),h=i("365c"),d=i("b1dc"),u=i("3214"),p=i("77a8"),f={components:{Pallet:r["a"],light:d["default"],videoMenu:u["default"],updateName:p["default"]},props:["height","visible","menu"],mixins:[l["a"]],data(){return{lightPowerValue:17,lightHeightValue:2.5,shadowValue:10,lightPowerUnit:"%",lightHeightUnit:"m",shadowUnit:"°",tmpTaskId:"",showUpdateName:!1,tempId:0,tempName:"",tpLoading:!1,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},HEIGHT:this.height,fileList:[],renderList:[],renderRotates:[{label:"前右",img:i("2e00"),imgb:i("bf7b"),name:"rotate_FR",position:{x:9.16,y:1.98,z:16.66},over:!1},{label:"正前",img:i("3a17"),imgb:i("68ea"),name:"rotate_F",position:{x:0,y:.33,z:20.08},over:!1},{label:"前左",img:i("ee4f"),imgb:i("4d67"),name:"rotate_FL",position:{x:-9.16,y:1.98,z:16.66},over:!1},{label:"顶右",img:i("41f7"),imgb:i("0ce6"),name:"rotate_TR",position:{x:8.82,y:12.79,z:10.97},over:!1},{label:"正顶",img:i("b8f0"),imgb:i("478b"),name:"rotate_T",position:{x:0,y:14.23,z:4},over:!1},{label:"顶左",img:i("a9d4"),imgb:i("c0ae"),name:"rotate_TL",position:{x:-8.82,y:12.79,z:10.97},over:!1}],renderRotateFlag:-1,bgFlag:1,background:"",color:"rgba(248,248,248,1)",query:{currentPage:1,pageSize:10,count:0},list:[],bgList:[],bgcount:0,bgQuery:{is_show:1,pageSize:10,currentPage:1,type:"bg"},listFlag:-1,tpQuery:{current:1,pageSize:7,publish_type:"official",template_type:"position"},tpList:[],tpList2:[],tpQuery2:{current:1,pageSize:10,publish_type:"my",template_type:"position"},tpcount:0,tpcount2:0,spinning:!1,progressTimer:null,reduceTimer:null,renderTime:4e3}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(o["mapState"])("profile",["user"])),Object(o["mapGetters"])("profile",["isVip"])),Object(o["mapGetters"])("render",["renderType","videoList","videoCurrent","page"])),watch:{height(t){this.HEIGHT=t},visible(t){t&&"image"===this.renderType?this.doIntervals():(this.clearIntervals(),this.$store.dispatch("render/fetchVideoList",{type:!1,project_id:this.$root.projectData.id}))},renderType(t){"video"===t?(this.$store.dispatch("render/fetchVideoList",{type:!1,project_id:this.$root.projectData.id}),this.clearIntervals()):this.doIntervals()}},beforeDestroy(){this.clearIntervals()},mounted(){"video"===this.renderType?(this.$store.dispatch("render/fetchVideoList",{type:!1,project_id:this.$root.projectData.id}),this.clearIntervals()):this.doIntervals(),this.getBgList(),this.getList(),this.getTempMode(!1,""),this.getTempMode(!1,"2")},methods:{thumbImg:c["F"],delTpMode(t){this.$confirm({title:"删除后数据无法恢复，是否要继续删除?",okText:"删除",okType:"danger",cancelText:"取消",centered:!0,zIndex:4005,onOk:()=>{Object(h["delRenderTemp"])({status:0,template_id:t}).then(t=>{200===t.code&&(this.$message.success("删除成功"),this.getTempMode(!1,"2"))})}})},getTempMode(t,e){t&&this["tpcount"+e]>0&&this["tpcount"+e]<=this["tpList"+e].length||(t?this["tpQuery"+e].current+=1:this["tpQuery"+e].current=1,Object(h["getRenderTemp"])(this["tpQuery"+e]).then(i=>{200==i.code&&(this["tpList"+e]=t?this["tpList"+e].concat(i.data):i.data,this["tpcount"+e]=i.total)}))},chooseImage(t){this.background=t,this.$emit("upload-img",{transparent:!1,bg:"https:"+t})},getBgList(t){this.bgcount>0&&this.bgcount<=this.bgList.length||(t?this.bgQuery.currentPage+=1:this.bgQuery.currentPage=1,this.$api.material.getRenderbg(this.bgQuery).then(e=>{0===e.errno&&(this.bgList=t?this.bgList.concat(e.data.data):e.data.data,this.bgcount=e.data.count)}))},positionChange(t,e){this.position[e]=t,this.$emit("position-change",this.position),this.$emit("attch-history","positionChange")},doIntervals(){this.clearIntervals(),this.reduceTimer=setInterval(()=>{this.getProgress()},2e3)},clearIntervals(){clearInterval(this.progressTimer),clearInterval(this.reduceTimer)},setRatio(t,e=!0){const i=t.split(":");let s=0;for(let n in this.ratios)this.ratios[n].w==i[0]&&(s=n);this.ratioClick(s,e)},mouseOver(t){this.renderRotates[t].over=!0},mouseOut(t){this.renderRotates[t].over=!1},bgFlagChange(t){if(this.bgFlag==t)return;this.bgFlag=t;let e="",i=!1;0===t?(i=!0,e=this.color):e=1===t?this.color:this.background,e&&this.$emit("upload-img",{transparent:i,bg:e}),this.$emit("attch-history","bgFlagChange")},delBackground(){this.background="",this.$emit("upload-img",{transparent:!1,bg:this.color})},colorConfirm(t){this.color=t.rgba,this.$emit("upload-img",{transparent:!1,bg:t.rgba}),this.$emit("attch-history","colorConfirm")},getProgress(){this.$api.material.renderprogress({type:1,project_id:this.$root.projectData.id,now:(new Date).getTime()}).then(t=>{0===t.errno&&(this.renderList.length>0&&t.data.length!==this.renderList.length&&this.getList(),t.data.map(t=>{0===t.render_status?t.status="wait":1===t.render_status&&(t.status="rendering"),t.progress=parseInt((100*t.progress).toFixed(0)),t.progress<0&&(t.progress=0),t.progress>100&&(t.progress=100)}),this.renderList=t.data,this.$emit("render-count",this.renderList.length),this.$emit("render-list",this.renderList))})},delImage(t){this.$confirm({title:"删除后数据无法恢复，是否要继续删除?",okText:"删除",okType:"danger",cancelText:"取消",centered:!0,zIndex:4005,onOk:()=>{"image"===this.renderType?this.$api.project.delImage({id:this.list[t].id}).then(e=>{0===e.errno&&(this.$message.success(e.errmsg),this.list.splice(t,1),this.listFlag>=t&&t>0&&this.list.length>0&&(this.listFlag=t-1),0===this.list.length&&(this.listFlag=-1),this.emitList(),this.emitPreview())}):Object(h["taskDelete"])({task_id:this.videoList[t].id}).then(t=>{200===t.code&&(this.$message.success("视频已删除"),this.$store.dispatch("render/fetchVideoList",{type:!1,project_id:this.$root.projectData.id}))})}})},handleReachBottom(t){this.query.count>this.list.length&&this.getList(1)},doAddTpMode(){Object(h["addRenderTemp"])({project_image_id:this.tmpTaskId,template_type:"position",publish_type:"my"}).then(t=>{200==t.code&&(this.tmpTaskId="",this.getTempMode(!1,"2"))})},getList(t){t?this.query.currentPage+=1:this.query.currentPage=1,this.spinning=!0,this.$api.project.renderImages({project_id:this.$root.projectData.id,currentPage:this.query.currentPage,pageSize:this.query.pageSize}).then(e=>{if(this.spinning=!1,e){this.query.count=e.data.count;for(let t of e.data.data){t.id==this.tmpTaskId&&this.doAddTpMode(),t.updateTime=this.$formatDate(t.update_time,"yyyy-MM-dd hh:mm:ss");let e=t.size.split("*"),i=e[0]/e[1];t.size.indexOf("1024")>-1||t.size.indexOf("768")>-1?t.clear_text="1K标清":t.size.indexOf("1920")>-1||t.size.indexOf("1080")>-1||t.size.indexOf("1200")>-1?t.clear_text="2K高清":t.size.indexOf("1440")>-1||t.size.indexOf("3200")>-1?t.clear_text="3K超清":t.size.indexOf("3840")>-1||t.size.indexOf("4000")>-1?t.clear_text="4K超高清":t.clear_text="1K标清",t.height=216/i}this.list=t?this.list.concat(e.data.data):e.data.data,this.emitList(),this.list.length>0&&-1===this.listFlag&&!t&&(this.listFlag=0,this.emitPreview())}})},emitList(){this.$emit("list",{list:this.list,count:this.query.count})},emitPreview(){this.$emit("preview",this.listFlag)},setPosition(t,e,i){this.position={x:t,y:e,z:i}},setRotation(t,e,i){this.rotation={x:t,y:e,z:i}},uploadChange(t){this.fileList=[];const e=new FileReader,i=t.file.name.substring(t.file.name.lastIndexOf(".")+1,t.file.name.length);if(t.file){e.readAsDataURL(t.file);e.onload=()=>{this.background=e.result,this.$emit("upload-img",{transparent:!1,bg:e.result,suffix:i})}}},renderRotateClick(t){this.renderRotateFlag=t,this.position.x=this.renderRotates[t].position.x,this.position.y=this.renderRotates[t].position.y,this.position.z=this.renderRotates[t].position.z,this.$emit("position-change",this.position),this.$emit("attch-history")},getRatio(){return this.ratios[this.ratioIndex]}}},m=f,g=(i("6a07"),i("2877")),v=Object(g["a"])(m,s,n,!1,null,null,null);e["default"]=v.exports},"464e":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-modal",{attrs:{centered:"",title:"编辑条形码"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("a-form-model",{ref:"formRef",attrs:{model:t.form,rules:t.rules,"label-col":{span:6},"wrapper-col":{span:14}}},[i("a-form-model-item",{attrs:{label:"码制"}},[i("a-select",{attrs:{options:t.options},on:{change:t.handleChange},model:{value:t.form.codeMode,callback:function(e){t.$set(t.form,"codeMode",e)},expression:"form.codeMode"}},[i("a-tooltip",{attrs:{slot:"suffixIcon",placement:"right"},slot:"suffixIcon"},[i("template",{slot:"title"},[t._v(t._s(t.desc))]),i("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)","font-size":"14px"},attrs:{type:"info-circle"}})],2)],1)],1),i("a-form-model-item",{attrs:{label:"码值",prop:"value"}},[i("a-input",{attrs:{placeholder:"请输入码值"},on:{focus:t.onFocus,change:function(e){return t.drawCode()}},model:{value:t.form.value,callback:function(e){t.$set(t.form,"value",e)},expression:"form.value"}},[i("a-tooltip",{attrs:{slot:"suffix",placement:"right"},slot:"suffix"},[i("template",{slot:"title"},[t._v(t._s(t.requirements))]),i("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],2)],1)],1)],1),i("div",{staticClass:"barcode"},[i("svg",{directives:[{name:"show",rawName:"v-show",value:!t.hasError&&t.form.value,expression:"!hasError && form.value"}],ref:"barcodeRef",attrs:{id:"modal-barcode",preserveAspectRatio:"none"}})]),i("template",{slot:"footer"},[i("a-button",{key:"back",on:{click:t.handleCancel}},[t._v(" 取消 ")]),i("a-button",{key:"submit",attrs:{type:"primary",disabled:t.hasError},on:{click:t.handleOk}},[t._v(" 保存并使用 ")])],1)],2)],1)},n=[],a=i("5530"),r=i("62c5"),o=i.n(r),l=i("c64e"),c=i.n(l),h=(i("365c"),i("5880")),d={data(){return{visible:!1,design:null,desc:"",hasError:!1,form:{codeMode:"EAN13",value:""},rules:{value:[{validator:this.validateBarcode,trigger:"change"}]},requirements:"",regs:{CODE128:/^[-A-Z0-9.\s$/+%]{1,49}$/,CODE39:/^[-A-Z0-9.\s$/+%]{1,43}$/,EAN13:/^\d{13}$/,EAN8:/^\d{8}$/},options:[{label:"EAN13",value:"EAN13",requirements:"由13个数字组成",desc:"European Article Number (欧洲物品编码的缩写)，其中共计13位代码的EAN-13是比较通用的一般终端产品的条形码协议和标准，主要应用于超级市场和其它零售业，为EAN的标准编码型式"},{label:"EAN8",value:"EAN8",requirements:"由8个数字组成",desc:"European Article Number (欧洲物品编码的缩写)由前缀码、厂商识别码、7位商品项目代码和1位校验码组成，其为国际物品编码协会制定的一种商品用条码，通用于全世界。EAN-8是EAN-13的缩短版，属EAN的简易编码型式"},{label:"CODE128",value:"CODE128",requirements:"允许字符：数字0到9、大写英文字母、加号、减号、句号、空格、美元符、正斜杠、百分号",desc:"Code 128码是1981年引入的一种高密度条码，广泛应用在企业内部管理、生产流程、物流控制系统方面的条码码制，由于其优良的特性在管理信息系统的设计中被广泛使用，CODE128码是应用最广泛的条码码制之一"},{label:"CODE39",value:"CODE39",requirements:"26个大写字母（A - Z），十个数字（0 - 9），连接号(-),句号（.）,空格,美圆符号($),斜扛(/),加号(+)以及百分号(%)。",desc:"Code 39，也被称为3 of 9 code，USD-3或者LOGMARS，是使用最为广泛的条形码格式之一。由于编制简单、能够对任意长度的数据进行编码、支持设备广泛等特性而被广泛采用"}]}},computed:Object(a["a"])({},Object(h["mapState"])(["isInside"])),methods:{show(t){this.design=t,this.visible=!0,this.form.codeMode=this.design.codeMode,this.form.value=this.design.value,this.initNotice(this.design.codeMode),this.$nextTick(()=>{this.design.value&&this.drawCode(this.design.codeMode)})},generateNewBarcode(){this.design.uuid=c()(),this.design.codeMode=this.form.codeMode,this.design.value=this.form.value},handleOk(){this.design.uuid?this.$emit("barcode-change",Object(a["a"])({uuid:this.design.uuid},this.form)):(this.generateNewBarcode(),this.$store.dispatch("editor/setEditorTempMaterial",this.design)),this.visible=!1,this.$store.commit("increaseCanvasVersion",this.isInside)},handleCancel(){this.visible=!1},initNotice(t){const e=this.options.filter(e=>e.value===t)[0];this.desc=e.desc,this.requirements=e.requirements},handleChange(t){this.initNotice(t),this.drawCode(t)},drawCode(t){this.form.value=this.form.value.toUpperCase(),t=t||this.form.codeMode,this.$refs.formRef.validate()},validateBarcode(t,e,i){const s=this.form.codeMode,n=this.regs[s];n.test(this.form.value)||(this.hasError=!0,i(new Error("码值不符合要求"))),o()("#modal-barcode",this.form.value,{format:s,margin:5,font:this.design.style.fontFamily,valid:t=>{this.$nextTick(()=>{const t=this.$refs.barcodeRef;t.setAttribute("respectAspectRatio","none"),t.style.maxHeight="100%",t.style.maxWidth="100%",t.style.margin="10px auto"}),t?(this.hasError=!1,i()):(this.hasError=!0,i(new Error("校验位不正确")))}})},onFocus(){"0000000000000"===this.form.value&&(this.form.value="")}}},u=d,p=(i("85cd"),i("2877")),f=Object(p["a"])(u,s,n,!1,null,"0703f73a",null);e["default"]=f.exports},4667:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:"editor-material bg-white flex flex-between "+(t.menuVisible?"editor-material--open":"editor-material--close"),style:{height:t.height+"px"},on:{mouseenter:function(e){t.showTip=!0},mouseleave:function(e){t.showTip=!1}}},[s("div",{staticClass:"editor-material__panel"},[s("keep-alive",[s(t.curPanelId,{tag:"component"})],1)],1),s("div",{staticClass:"editor-material__close flex flex-center item-center",style:{height:t.height+"px"}},[s("a-tooltip",{attrs:{placement:"right",title:t.keepPin?"取消锁定":"锁定边栏","arrow-point-at-center":""}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showTip&&t.menuVisible,expression:"showTip && menuVisible"}],staticClass:"editor-material__close-btn flex flex-center item-center",on:{click:function(e){return t.saveKeepPin(!t.keepPin)}}},[s("img",{directives:[{name:"show",rawName:"v-show",value:t.keepPin,expression:"keepPin"}],attrs:{src:i("888b"),alt:""}}),s("img",{directives:[{name:"show",rawName:"v-show",value:!t.keepPin,expression:"!keepPin"}],attrs:{src:i("99f3"),alt:""}})])])],1)])},n=[],a=i("5530"),r=i("5880"),o=i("b91b"),l=i("27d8"),c=i("27c9"),h=i("16fd"),d=i("d9f9"),u={components:{editorGallery:o["default"],editorFont:l["default"],editorBg:c["default"],editorUpload:h["default"],editorTool:d["default"]},props:{current:{type:Number,default:-1}},watch:{visible(t){this.$emit("change",t)}},data(){return{height:window.innerHeight-52,showTip:!1}},mounted(){this.resize()},methods:Object(a["a"])(Object(a["a"])({},Object(r["mapActions"])("menu",["saveKeepPin"])),{},{resize(){window.addEventListener("resize",this._handeResize)},_handeResize(){this.height=window.innerHeight-52}}),computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("menu",["keepPin","menuVisible","currentMenuIndex"])),{},{curPanelId(){if(!this.menuVisible)return null;let t={0:"editor-gallery",1:"editor-font",2:"editor-bg",3:"editor-tool",4:"editor-upload"};return t[this.currentMenuIndex]||null}}),beforeDestroy(){window.removeEventListener("resize",this._handeResize)}},p=u,f=(i("85a2"),i("2877")),m=Object(f["a"])(p,s,n,!1,null,null,null);e["default"]=m.exports},"467d":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div")},n=[],a=i("2877"),r={},o=Object(a["a"])(r,s,n,!1,null,null,null);e["default"]=o.exports},"469f":function(t,e,i){},"46e9":function(t,e,i){"use strict";var s=i("9628"),n=i.n(s);n.a},4724:function(t,e,i){t.exports=i.p+"editor-assets/img/risk-question-gray.b4062632.svg"},4727:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("124f"),n=r(s),a=i("6e53");function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=function(t){function e(t,i){return o(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t+(0,a.mod10)(t),i))}return c(e,t),e}(n.default);e.default=h},"478b":function(t,e,i){t.exports=i.p+"editor-assets/img/ang5-b.5bedc96b.svg"},4794:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"showno"},[s("div",{staticClass:"nodatawrap"},[s("img",{attrs:{src:i("e597"),alt:""}}),s("p",{staticClass:"tip"},[t._v("暂无内容")])])])}],a=(i("5ff5"),i("2877")),r={},o=Object(a["a"])(r,s,n,!1,null,null,null);e["a"]=o.exports},"47fc":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"setting-font-wrap"},[i("font-select"),i("div",{staticClass:"flex flex-between mb-10"},[i("div",{staticClass:"field-title"},[t._v("字号")]),i("div",{staticClass:"field-content flex flex-between",staticStyle:{"vertical-align":"top"}},[i("a-select",{staticClass:"w-90 inline-block",staticStyle:{width:"90px"},attrs:{value:t.fontSizePt},on:{change:t.onChangeFontSize}},t._l(t.$data.$font_size_pt_list,(function(e,s){return i("a-select-option",{key:s,attrs:{value:e}},[t._v(" "+t._s(e)+" pt ")])})),1),i("b-pallet",{ref:"bg",attrs:{cmyk:"","history-colors":[]},on:{confirm:function(e){return t.onPickerChange(e.rgba,e.cmyk)}},model:{value:t.curDesign.style.color,callback:function(e){t.$set(t.curDesign.style,"color",e)},expression:"curDesign.style.color"}})],1)]),i("select-element-craft"),i("div",{staticClass:"flex flex-between mtb-16"},[i("b-popover-tooltip",[i("div",{attrs:{slot:"popover"},slot:"popover"},[i("div",{staticClass:"flex flex-between item-center p-10",attrs:{slot:"content"},slot:"content"},[i("div",{staticStyle:{width:"30px",margin:"0 10px"}},[t._v("行高")]),i("div",{staticStyle:{width:"100px"}},[i("a-slider",{attrs:{min:.1,max:5,step:.1},on:{change:t.onChangeFontHeightRatio},model:{value:t.fontHeightRatio,callback:function(e){t.fontHeightRatio=e},expression:"fontHeightRatio"}})],1),i("div",{staticStyle:{width:"100px"}},[i("a-input-number",{staticStyle:{width:"100px"},attrs:{"controls-position":"right",min:0,max:5},on:{change:t.onChangeFontHeightRatio},model:{value:t.fontHeightRatio,callback:function(e){t.fontHeightRatio=e},expression:"fontHeightRatio"}})],1)])]),i("div",{attrs:{slot:"tooltip"},slot:"tooltip"},[t._v("行高")]),i("div",{staticClass:"box-button"},[i("i",{staticClass:"iconfont icon-wenzi-hanggao"})])]),i("b-popover-tooltip",[i("div",{attrs:{slot:"popover"},slot:"popover"},t._l(t.$data.$text_aligns,(function(e,s){return i("div",{key:s,staticClass:"menu-item",on:{click:function(i){return t.onSetTextAlign(e)}}},[i("i",{class:"iconfont "+e.icon}),t._v(" "+t._s(e.title)+" ")])})),0),i("div",{attrs:{slot:"tooltip"},slot:"tooltip"},[t._v("对齐")]),i("div",{staticClass:"box-button"},[i("i",{staticClass:"iconfont icon-wenzi-duiqi"})])]),i("a-tooltip",[i("template",{slot:"title"},[t._v("加粗")]),i("div",{staticClass:"box-button",class:{actived:"bold"===t.curDesign.style.fontWeight},on:{click:t.onSwitchFontWeight}},[i("i",{staticClass:"iconfont icon-wenzi-jiacu"})])],2),i("a-tooltip",[i("template",{slot:"title"},[t._v("斜体")]),i("div",{staticClass:"box-button",class:{actived:"italic"===t.curDesign.style.fontStyle},staticStyle:{"font-style":"italic"},on:{click:t.onSwitchFontStyle}},[i("i",{staticClass:"iconfont icon-wenzi-xieti"})])],2)],1),i("a-tooltip",[i("template",{slot:"title"},[t._v("文字竖排")]),i("div",{class:"box-button "+(t.curDesign.style.vertical?"actived":""),on:{click:t.onSwitchStyleVertical}},[i("i",{staticClass:"iconfont icon-wenzi-wenzifangxiang"})])],2),i("a-divider"),i("design-common-operation")],1)},n=[],a=(i("b680"),i("5530")),r=i("5880"),o=i("1b2a"),l=i("1c0d"),c=i("1e9d"),h=i("ed08"),d={components:{fontSelect:o["default"],selectElementCraft:l["default"],designCommonOperation:c["default"]},data(){return{fontHeightRatio:1,$font_size_pt_list:[4,5,6,8,9,10,12,14,16,20,24,32,36,38,42,54,63,72,80,100,200,300,500],$text_aligns:[{value:"left",icon:"icon-wenzi-zuoduiqi",title:"居左"},{value:"center",icon:"icon-wenzi-zhongduiqi",title:"居中"},{value:"right",icon:"icon-wenzi-youduiqi",title:"居右"}]}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["element_craft_list"])),Object(r["mapGetters"])("editor-v2",["curDesign"])),{},{fontSizePt(){return Object(h["H"])(this.curDesign.style.fontSize||12).mm2pt().toFixed(1)}}),mounted(){this.curDesign.style||(this.fontHeightRatio=1.2);let{fontSize:t,lineHeight:e}=this.curDesign.style;e||(e=1.2*t),this.fontHeightRatio=Math.round(e/t*100)/100},methods:{onChangeFontSize(t){const e=Object(h["H"])(t).pt2mm(),{fontSize:i,width:s,lineHeight:n,height:a}=this.curDesign.style,r=e/i;this.curDesign.style.lineHeight=r*n,this.curDesign.style.height=r*a,this.curDesign.style.width=r*s,this.curDesign.style.fontSize=e},onSwitchStyleVertical(){this.curDesign.style.vertical=1-this.curDesign.style.vertical||0;const t=this.curDesign.style.width,e=this.curDesign.style.height;this.curDesign.style.width=e,this.curDesign.style.height=t},onSwitchFontStyle(){const t="italic"===this.curDesign.style.fontStyle?"normal":"italic";this.curDesign.style.fontStyle=t},onSwitchFontWeight(){const t="bold"===this.curDesign.style.fontWeight?"normal":"bold";this.curDesign.style.fontWeight=t},onSetTextAlign(t){this.curDesign.style.textAlign=t.value},onPickerChange(t){this.curDesign.style.color=t},onChangeFontHeightRatio(t){const{height:e,lineHeight:i,fontSize:s}=this.curDesign.style,n=Math.round(e/i),a=t*s;this.curDesign.style.lineHeight=a,this.curDesign.style.height=n*a}}},u=d,p=(i("afc5a"),i("2877")),f=Object(p["a"])(u,s,n,!1,null,"2fff9cf2",null);e["default"]=f.exports},"485e":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rename-panel"},[i("a-row",{attrs:{type:"flex"}},[i("a-col",{staticClass:"label pr-20",attrs:{span:6}},[t._v("类型：")]),i("a-col",{attrs:{span:18}},[i("div",{staticClass:"input-group"},[i("a-input",{staticClass:"short-input",attrs:{placeholder:"品牌名"},on:{blur:function(e){return t.emitChanges()}},model:{value:t.form.trademark,callback:function(e){t.$set(t.form,"trademark",e)},expression:"form.trademark"}}),t._v(" - "),i("a-input",{staticClass:"short-input",attrs:{placeholder:"产品名"},on:{blur:function(e){return t.emitChanges()}},model:{value:t.form.productName,callback:function(e){t.$set(t.form,"productName",e)},expression:"form.productName"}})],1)])],1),i("a-row",{staticClass:"mt-12",attrs:{type:"flex"}},[i("a-col",{staticClass:"label pr-20",attrs:{span:6}},[i("span",{staticClass:"fo-theme required-left"},[t._v("*")]),t._v("名称：")]),i("a-col",{attrs:{span:18}},[i("a-input",{staticClass:"long-input",attrs:{placeholder:"项目名"},on:{blur:function(e){return t.emitChanges()}},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1)],1),t.showSubmit?i("a-row",{staticClass:"mt-34 flex flex-center items-center"},[i("a-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("下一步")])],1):t._e()],1)},n=[],a=i("5530"),r=i("5880"),o={props:{projectName:{type:String,default:""},trademark:{type:String,default:""},productName:{type:String,default:""},showSubmit:{type:Boolean,default:!1}},data(){return{formItemLayout:{labelCol:{span:4},wrapperCol:{span:14}},form:{projectName:"",productName:"",trademark:""}}},computed:Object(a["a"])({},Object(r["mapState"])("editor-v2",["project_data","knife_data","isCup","scale","is_outside","last_saved_local_history_ts"])),mounted(){this.form.projectName=this.projectName,this.form.productName=this.productName,this.form.trademark=this.trademark},methods:{emitChanges(){this.showSubmit||this.handleSubmit()},submitNames(){const t=this.project_data,e={projectName:t.project_name,productName:t.extend_attrs?t.extend_attrs.productName:"",trademark:t.extend_attrs?t.extend_attrs.trademark:"",nameModified:!!t.extend_attrs&&t.extend_attrs.nameModified},i=this.form;this.$store.dispatch("editor/updateProjectNames",{originData:e,newData:i,projectId:t.id}).then(()=>{t.project_name=i.projectName,t.extend_attrs={},t.extend_attrs.productName=i.productName,t.extend_attrs.trademark=i.trademark,t.extend_attrs.nameModified=!0,this.$emit("nameChanged")})},handleSubmit(){this.$route.query.mid?this.$store.dispatch("saveForceCreateV2",{router:this.$router,knife_data:this.knife_data,project_data:this.project_data}).then(()=>{this.submitNames()}):this.submitNames()}}},l=o,c=(i("251b"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,"11a7b175",null);e["default"]=h.exports},"48a9":function(t,e,i){var s=i("6d8b"),n=i("42e5"),a=function(t,e,i,s,a,r){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==i?1:i,this.y2=null==s?0:s,this.type="linear",this.global=r||!1,n.call(this,a)};a.prototype={constructor:a},s.inherits(a,n);var r=a;t.exports=r},"48b0":function(t,e,i){},"490d":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"background-panel-wrap"},[s("div",{staticClass:"fo-14 bold"},[t._v("背景颜色")]),s("div",{staticClass:"flex flex-start item-center mt-12"},[s("b-pallet",{attrs:{value:t.background},on:{confirm:function(e){return t.onChangeBackground(e.rgba,e.cmyk)}}}),s("div",{staticClass:"ml-8 bg-trash flex flex-center item-center",on:{click:t.onClearBackground}},[s("img",{attrs:{src:i("e0c1")}})])],1),s("div",{staticClass:"gray-line"}),s("div",{staticClass:"flex flex-wrap flex-between"},t._l(t.$data.$available_colors,(function(e,i){return s("div",{key:i,staticClass:"color-item mt-12",style:{backgroundColor:e},on:{click:function(i){return t.onChangeBackground(e)}}})})),0),t.bgImages.length?[s("div",{staticClass:"fo-14 fo-default bold my-12"},[t._v("背景纹理")]),s("perfect-scrollbar",{staticClass:"scrollbar-wrap",on:{"ps-y-reach-end":t.onLoadMore}},[s("div",{staticClass:"texture-image-wrap"},t._l(t.bgImages,(function(e,i){return s("img",{key:i,staticClass:"texture-image",attrs:{src:t.getImageThumb(e)},on:{click:function(i){t.onChangeBackground("url("+t.getImageThumb(e)+")")}}})})),0)])]:t._e()],2)},n=[],a=i("5530"),r=i("5880"),o={data(){return{loading:!1,query:{current:1,pageSize:20},$available_colors:["rgba(0,0,0,1)","rgba(68,68,68,1)","rgba(102,102,102,1)","rgba(168,168,168,1)","rgba(217,217,217,1)","rgba(243,243,243,1)","rgba(255,0,0,1)","rgba(255,91,92,1)","rgba(255,102,51,1)","rgba(255,153,0,1)","rgba(255,204,51,1)","rgba(254,249,81,1)"],bgImages:[],noMore:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["knife_data","project_data","scale","is_outside"])),Object(r["mapGetters"])("editor-v2",["background"])),mounted(){this.ajaxBackgroundImages()},methods:{onLoadMore(){this.loading||this.noMore||(this.query.current++,this.ajaxBackgroundImages())},ajaxBackgroundImages(){this.loading=!0,this.$http.get("/api/v2/materials/files/imgbg",this.query).then(t=>{const{code:e,data:i}=t;200!==e?this.$message.error(t.msg):(1===this.query.current?this.bgImages=i:this.bgImages=this.bgImages.concat(i),i.length<this.query.pageSize&&(this.noMore=!0)),this.loading=!1})},getImageThumb(t){const{file_path:e}=t;return/\.svg$/.test(e)?e:t.file_path+"?imageView2/0/w/200/h/200/q/70|imageslim"},onClearBackground(){this.$store.commit("editor-v2/set_background","")},onChangeBackground(t,e){if(!this.project_data.id)return this.$message.info("请选择一个模板开始设计"),void this.openLeftSidePanel();this.$store.commit("editor-v2/set_background",t)},openLeftSidePanel(){this.$store.commit("editor-v2/set_left_side_show",!0),this.$route.query.id||this.$route.query.workOuterId?this.$store.commit("editor-v2/set_left_side_cur_menu_index",1):this.$store.commit("editor-v2/set_left_side_cur_menu_index",0)}}},l=o,c=(i("3bab"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,"03ca139f",null);e["default"]=h.exports},4929:function(t,e,i){"use strict";var s=i("c3f7"),n=i.n(s);n.a},"493f":function(t,e,i){"use strict";(function(e){function i(t,i){var a=this,o=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return o||l?(i?i(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(r,this,t)):e.nextTick(r,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!i&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(n,a):(a._writableState.errorEmitted=!0,e.nextTick(s,a,t)):e.nextTick(s,a,t):i?(e.nextTick(n,a),i(t)):e.nextTick(n,a)})),this)}function s(t,e){r(t,e),n(t)}function n(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function r(t,e){t.emit("error",e)}function o(t,e){var i=t._readableState,s=t._writableState;i&&i.autoDestroy||s&&s.autoDestroy?t.destroy(e):t.emit("error",e)}t.exports={destroy:i,undestroy:a,errorOrDestroy:o}}).call(this,i("4362"))},4942:function(t,e,i){var s=i("2cf4c"),n=s.debugMode,a=function(){};1===n&&(a=console.error);var r=a;t.exports=r},"494a":function(t,e,i){"use strict";i.r(e);var s=i("750b");i("c105");e["default"]=Object(s["b"])({props:{value:{type:Number,default:1},unit:{type:String,default:""},align:{type:String,default:"center"},min:{type:Number,default:1}},setup(t,e){const i=Object(s["j"])(!1),n=Object(s["j"])(t.value),a=()=>{i.value=!1,e.emit("confirm",n.value)};return Object(s["k"])(()=>t.value,()=>{n.value=t.value}),()=>Object(s["c"])("div",{class:"no-border-input-wrapper",style:{textAlign:t.align}},[Object(s["c"])("input",{ref:"insert",directives:[{name:"show",value:i.value}],class:"no-border-input",attrs:{type:"number"},domProps:{value:n.value},on:{blur:()=>{a()},change:i=>{n.value=Math.max(parseFloat(i.target.value),t.min),e.emit("confirm",n.value)},keydown:e=>{"Enter"===e.key&&(i.value=!1),n.value=Math.max(parseFloat(e.target.value),t.min)}}}),Object(s["c"])("div",{class:"input-preview",directives:[{name:"show",value:!i.value}],on:{click:()=>{i.value=!0,e.root.$nextTick(()=>{e.refs.insert.focus()})}}},[n.value," ",t.unit])])}})},4981:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vip-title-contanier"},[i("div",{class:"vip-title-sub text-center vip-title-sub-"+t.theme},[t._v(t._s(t.subTitle))]),i("div",{class:"vip-title text-center vip-title-"+t.theme},[t._v(t._s(t.title))])])},n=[],a={props:["title","subTitle","theme"]},r=a,o=(i("ebff"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,null,null);e["default"]=l.exports},"498e":function(t,e,i){"use strict";var s=i("5481"),n=i.n(s);n.a},"49c5":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-modal",{staticClass:"success-modal",attrs:{centered:"",visible:t.visible,"z-index":4e3,width:560},on:{cancel:t.onCancel}},[s("div",{staticClass:"text-center"},[s("img",{staticClass:"mt-8",attrs:{src:i("d1ae"),width:"121px",alt:""}}),s("div",{staticClass:"fo-20 bold mt-24"},[t._v("方案导出成功")]),s("a-divider"),s("div",{staticClass:"fo-12 fo-gray"},[t._v(" 不确定方案导出到哪了？ "),s("a",{staticClass:"fo-12 fo-gray",attrs:{href:"https://help.baoxiaohe.com/support/archives/295/",target:"_blank"}},[t._v(" 查看文件存储位置")])])],1),s("div",{style:{backgroundColor:"#f3f3f3"},attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"flex flex-center item-center p-24"},[s("img",{attrs:{src:i("ea56"),alt:"",width:"120px"}}),s("div",{staticClass:"ml-24 text-left"},[s("div",{staticClass:"fo-14 bold"},[t._v("包小盒专属微信客服")]),s("div",{staticClass:"fo-12 fo-gray mt-12"},[t._v("获取最新产品及优惠活动信息")])])])])])},n=[],a={data(){return{visible:!1}},methods:{show(){this.visible=!0},onCancel(){this.visible=!1}}},r=a,o=i("2877"),l=Object(o["a"])(r,s,n,!1,null,null,null);e["default"]=l.exports},"49d9":function(t,e,i){},"4a02":function(t,e,i){"use strict";var s=i("4ec9"),n=i.n(s);n.a},"4a31":function(t,e,i){},"4a3f":function(t,e,i){var s=i("401b"),n=s.create,a=s.distSquare,r=Math.pow,o=Math.sqrt,l=1e-8,c=1e-4,h=o(3),d=1/3,u=n(),p=n(),f=n();function m(t){return t>-l&&t<l}function g(t){return t>l||t<-l}function v(t,e,i,s,n){var a=1-n;return a*a*(a*t+3*n*e)+n*n*(n*s+3*a*i)}function b(t,e,i,s,n){var a=1-n;return 3*(((e-t)*a+2*(i-e)*n)*a+(s-i)*n*n)}function y(t,e,i,s,n,a){var l=s+3*(e-i)-t,c=3*(i-2*e+t),u=3*(e-t),p=t-n,f=c*c-3*l*u,g=c*u-9*l*p,v=u*u-3*c*p,b=0;if(m(f)&&m(g))if(m(c))a[0]=0;else{var y=-u/c;y>=0&&y<=1&&(a[b++]=y)}else{var _=g*g-4*f*v;if(m(_)){var x=g/f,w=(y=-c/l+x,-x/2);y>=0&&y<=1&&(a[b++]=y),w>=0&&w<=1&&(a[b++]=w)}else if(_>0){var C=o(_),k=f*c+1.5*l*(-g+C),S=f*c+1.5*l*(-g-C);k=k<0?-r(-k,d):r(k,d),S=S<0?-r(-S,d):r(S,d);y=(-c-(k+S))/(3*l);y>=0&&y<=1&&(a[b++]=y)}else{var A=(2*f*c-3*l*g)/(2*o(f*f*f)),O=Math.acos(A)/3,j=o(f),M=Math.cos(O),I=(y=(-c-2*j*M)/(3*l),w=(-c+j*(M+h*Math.sin(O)))/(3*l),(-c+j*(M-h*Math.sin(O)))/(3*l));y>=0&&y<=1&&(a[b++]=y),w>=0&&w<=1&&(a[b++]=w),I>=0&&I<=1&&(a[b++]=I)}}return b}function _(t,e,i,s,n){var a=6*i-12*e+6*t,r=9*e+3*s-3*t-9*i,l=3*e-3*t,c=0;if(m(r)){if(g(a)){var h=-l/a;h>=0&&h<=1&&(n[c++]=h)}}else{var d=a*a-4*r*l;if(m(d))n[0]=-a/(2*r);else if(d>0){var u=o(d),p=(h=(-a+u)/(2*r),(-a-u)/(2*r));h>=0&&h<=1&&(n[c++]=h),p>=0&&p<=1&&(n[c++]=p)}}return c}function x(t,e,i,s,n,a){var r=(e-t)*n+t,o=(i-e)*n+e,l=(s-i)*n+i,c=(o-r)*n+r,h=(l-o)*n+o,d=(h-c)*n+c;a[0]=t,a[1]=r,a[2]=c,a[3]=d,a[4]=d,a[5]=h,a[6]=l,a[7]=s}function w(t,e,i,s,n,r,l,h,d,m,g){var b,y,_,x,w,C=.005,k=1/0;u[0]=d,u[1]=m;for(var S=0;S<1;S+=.05)p[0]=v(t,i,n,l,S),p[1]=v(e,s,r,h,S),x=a(u,p),x<k&&(b=S,k=x);k=1/0;for(var A=0;A<32;A++){if(C<c)break;y=b-C,_=b+C,p[0]=v(t,i,n,l,y),p[1]=v(e,s,r,h,y),x=a(p,u),y>=0&&x<k?(b=y,k=x):(f[0]=v(t,i,n,l,_),f[1]=v(e,s,r,h,_),w=a(f,u),_<=1&&w<k?(b=_,k=w):C*=.5)}return g&&(g[0]=v(t,i,n,l,b),g[1]=v(e,s,r,h,b)),o(k)}function C(t,e,i,s){var n=1-s;return n*(n*t+2*s*e)+s*s*i}function k(t,e,i,s){return 2*((1-s)*(e-t)+s*(i-e))}function S(t,e,i,s,n){var a=t-2*e+i,r=2*(e-t),l=t-s,c=0;if(m(a)){if(g(r)){var h=-l/r;h>=0&&h<=1&&(n[c++]=h)}}else{var d=r*r-4*a*l;if(m(d)){h=-r/(2*a);h>=0&&h<=1&&(n[c++]=h)}else if(d>0){var u=o(d),p=(h=(-r+u)/(2*a),(-r-u)/(2*a));h>=0&&h<=1&&(n[c++]=h),p>=0&&p<=1&&(n[c++]=p)}}return c}function A(t,e,i){var s=t+i-2*e;return 0===s?.5:(t-e)/s}function O(t,e,i,s,n){var a=(e-t)*s+t,r=(i-e)*s+e,o=(r-a)*s+a;n[0]=t,n[1]=a,n[2]=o,n[3]=o,n[4]=r,n[5]=i}function j(t,e,i,s,n,r,l,h,d){var m,g=.005,v=1/0;u[0]=l,u[1]=h;for(var b=0;b<1;b+=.05){p[0]=C(t,i,n,b),p[1]=C(e,s,r,b);var y=a(u,p);y<v&&(m=b,v=y)}v=1/0;for(var _=0;_<32;_++){if(g<c)break;var x=m-g,w=m+g;p[0]=C(t,i,n,x),p[1]=C(e,s,r,x);y=a(p,u);if(x>=0&&y<v)m=x,v=y;else{f[0]=C(t,i,n,w),f[1]=C(e,s,r,w);var k=a(f,u);w<=1&&k<v?(m=w,v=k):g*=.5}}return d&&(d[0]=C(t,i,n,m),d[1]=C(e,s,r,m)),o(v)}e.cubicAt=v,e.cubicDerivativeAt=b,e.cubicRootAt=y,e.cubicExtrema=_,e.cubicSubdivide=x,e.cubicProjectPoint=w,e.quadraticAt=C,e.quadraticDerivativeAt=k,e.quadraticRootAt=S,e.quadraticExtremum=A,e.quadraticSubdivide=O,e.quadraticProjectPoint=j},"4a66":function(t,e,i){t.exports=i.p+"editor-assets/img/big.ca7a43b3.svg"},"4a68":function(t,e,i){},"4aa2":function(t,e,i){var s=i("cbe5"),n=i("897a"),a=s.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:n(s.prototype.brush),buildPath:function(t,e){var i=e.cx,s=e.cy,n=Math.max(e.r0||0,0),a=Math.max(e.r,0),r=e.startAngle,o=e.endAngle,l=e.clockwise,c=Math.cos(r),h=Math.sin(r);t.moveTo(c*n+i,h*n+s),t.lineTo(c*a+i,h*a+s),t.arc(i,s,a,r,o,!l),t.lineTo(Math.cos(o)*n+i,Math.sin(o)*n+s),0!==n&&t.arc(i,s,n,o,r,l),t.closePath()}});t.exports=a},"4ab1":function(t,e,i){var s=i("8727"),n=s.createElement,a=i("6d8b"),r=i("cbe5"),o=i("0da8"),l=i("76a5"),c=i("3f8e"),h=c.path,d=c.image,u=c.text,p="0",f="1";function m(t,e,i,s,n){this._zrId=t,this._svgRoot=e,this._tagNames="string"===typeof i?[i]:i,this._markLabel=s,this._domName=n||"_dom",this.nextId=0}m.prototype.createElement=n,m.prototype.getDefs=function(t){var e=this._svgRoot,i=this._svgRoot.getElementsByTagName("defs");return 0===i.length?t?(i=e.insertBefore(this.createElement("defs"),e.firstChild),i.contains||(i.contains=function(t){var e=i.children;if(!e)return!1;for(var s=e.length-1;s>=0;--s)if(e[s]===t)return!0;return!1}),i):null:i[0]},m.prototype.update=function(t,e){if(t){var i=this.getDefs(!1);if(t[this._domName]&&i.contains(t[this._domName]))"function"===typeof e&&e(t);else{var s=this.add(t);s&&(t[this._domName]=s)}}},m.prototype.addDom=function(t){var e=this.getDefs(!0);e.appendChild(t)},m.prototype.removeDom=function(t){var e=this.getDefs(!1);e&&t[this._domName]&&(e.removeChild(t[this._domName]),t[this._domName]=null)},m.prototype.getDoms=function(){var t=this.getDefs(!1);if(!t)return[];var e=[];return a.each(this._tagNames,(function(i){var s=t.getElementsByTagName(i);e=e.concat([].slice.call(s))})),e},m.prototype.markAllUnused=function(){var t=this.getDoms(),e=this;a.each(t,(function(t){t[e._markLabel]=p}))},m.prototype.markUsed=function(t){t&&(t[this._markLabel]=f)},m.prototype.removeUnused=function(){var t=this.getDefs(!1);if(t){var e=this.getDoms(),i=this;a.each(e,(function(e){e[i._markLabel]!==f&&t.removeChild(e)}))}},m.prototype.getSvgProxy=function(t){return t instanceof r?h:t instanceof o?d:t instanceof l?u:h},m.prototype.getTextSvgElement=function(t){return t.__textSvgEl},m.prototype.getSvgElement=function(t){return t.__svgEl};var g=m;t.exports=g},"4b23":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=i("e762"),a=o(n),r=i("f08e");function o(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function h(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var d=function(t){function e(t,i){l(this,e);var s=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.substring(1),i));return s.bytes=t.split("").map((function(t){return t.charCodeAt(0)})),s}return h(e,t),s(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var t=this.bytes,i=t.shift()-105,s=r.SET_BY_CODE[i];if(void 0===s)throw new RangeError("The encoding does not start with a start character.");!0===this.shouldEncodeAsEan128()&&t.unshift(r.FNC1);var n=e.next(t,1,s);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(i)+n.result+e.getBar((n.checksum+i)%r.MODULO)+e.getBar(r.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var t=this.options.ean128||!1;return"string"===typeof t&&(t="true"===t.toLowerCase()),t}}],[{key:"getBar",value:function(t){return r.BARS[t]?r.BARS[t].toString():""}},{key:"correctIndex",value:function(t,e){if(e===r.SET_A){var i=t.shift();return i<32?i+64:i-32}return e===r.SET_B?t.shift()-32:10*(t.shift()-48)+t.shift()-48}},{key:"next",value:function(t,i,s){if(!t.length)return{result:"",checksum:0};var n=void 0,a=void 0;if(t[0]>=200){a=t.shift()-105;var o=r.SWAP[a];void 0!==o?n=e.next(t,i+1,o):(s!==r.SET_A&&s!==r.SET_B||a!==r.SHIFT||(t[0]=s===r.SET_A?t[0]>95?t[0]-96:t[0]:t[0]<32?t[0]+96:t[0]),n=e.next(t,i+1,s))}else a=e.correctIndex(t,s),n=e.next(t,i+1,s);var l=e.getBar(a),c=a*i;return{result:l+n.result,checksum:c+n.checksum}}}]),e}(a.default);e.default=d},"4b30":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADm0lEQVRYR+2XX2gcVRTGv3NnN5utRY1/KKWiD1KloILkIQoaKmIfCkpRKepmN2KlQWpWsjubnW0R5sFkZ7uz2xKCYFV0Z7IVCn0wpVDaBy2+SGnxxQZFiWgfAqGNYh+yye7eIzuSJibZzEyY0hfn9Zzzfb97OffcO4Q7/JEf/4MHPwnv3BntaldTj3Ty4tzUDV3XpVddTwDMTIWSrQPIAIi6iM8JUG5YjZ/wAuEJwChVUmAqeRG8lcN4RcskzrjVuALo+jehzq3X/gCw3U3sv3H6VlPjL7jVrAEwzc8eaYjOu5dXInvBGHcTWifORPIlptBsK9ZsSqYozxx+v//GytxbAIZZ7QU3T4Dw+CbMvJYwQOeaCzhw5Eh8plXkAIwUK08pRN97aDCvRm55V7d0/NWdTCYXHADDtL4C8IZbVaBxon4tHbf+BShaUyDs8mnQOuvXAY4AdI/PWoCprGXi6aUd+BXAo15EGJgixgjJ+pls9sBNZwFG5WEKU4wlMiC0HVQr9Zl4PJfuH/QHQPi8a+v8ewMDA/X1YAuFiYc4JCfBeNptMb4BiGhyONW3j4h4tGj1CEFZgLvBmGfiC7ImRludPXL85DbRaFwhYMdGEP4AGLWwaDyWTr9zzSjb+yG5CiC0ymAmoijPDQ3FpgtmNc5oWsEBEL7W0ol9+Xy1i8LyN4DbNd0FTU3sGRwbi+yo3zsLxvJAW0XjaweIcTibSeQLph1j8MQGK5MhhLap6lvXDbNyEaDedrm+ABh8KKf2f2yUvlTBorhhgwn5hJZ6+6phWpMAXg4EABAfaWrfhwXTepWB0xsA1Gsd4gE92fe3YdqXnSZt8/naAQCXNDXRUy6fii7I2i/tOpyIqtl0vG907NSDYrHWmvVKUAAQAruHU4mLxeLJZ5vUOAusGTg/cF15MZeL/WmYVh6AFtwpcJRoOgSlp9Vgx47Z22sNPiSAbhY0T0Tno6H7vkgm9y7ki/ZuIj4PIBwwgCP3sxLG65kPEj+uJ37UtN+U4E8B3BX4JFwWpAaBTzNjkoSYJpIRbtKTTDIG0DNuxkvxVU1o/wTw7XyIrOUiHNfSiSHnMsoXrbNE2OuVPog8EjSYTcXHHYCj5Yk9UspzSy+kIAxcNGZrYnGXnnp3bvlNWLIHILkMwpbbCcDA72Eor6lq7IpztlaajY5X7ldq4nmm9pfI5uFIEjAzf7PjO13fv7ik4/pfsHlDb5X/A9zxHfgH0FKSMP0/v+0AAAAASUVORK5CYII="},"4b3a":function(t,e,i){t.exports=i.p+"editor-assets/img/barcode.edeab4cb.svg"},"4bb4":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row-column-popover-wrap",style:{left:t.position.left+"px",top:t.position.top+"px"},on:{mouseenter:function(e){return t.$emit("mouseenter")},mouseleave:function(e){return t.$emit("mouseleave")}}},[i("div",{staticClass:"arrow"}),i("div",{staticClass:"inner-content-wrap"},[i("div",{staticClass:"flex item-end flex-between pr-20"},[i("div",{staticClass:"title mx-16 pt-10"},[t._v("创建表格")]),i("div",[t._v(t._s(t.rowNumber)+"行, "+t._s(t.columnNumber)+"列")])]),i("div",{staticClass:"cell-grid-wrap"},t._l(t.$data.$maxRowNumber,(function(e){return i("ul",{key:e,staticClass:"flex item-center flex-around mt-4"},t._l(t.$data.$maxColumnNumber,(function(s){return i("li",{key:s,class:t.rowNumber>=e&&t.columnNumber>=s?"actived":"",on:{click:function(i){return i.stopPropagation(),t.onPick(e,s)},mousemove:function(){return t.onMouseMove(e,s)}}})})),0)})),0)])])},n=[],a={props:{position:{required:!1,type:Object,default:()=>({})},dataId:{type:Number,default:0}},data(){return{rowNumber:0,columnNumber:0,$maxRowNumber:10,$maxColumnNumber:10}},methods:{onPick(t,e){this.$emit("change",{rowNumber:t,columnNumber:e})},onMouseMove(t,e){this.rowNumber=t,this.columnNumber=e}},watch:{dataId(t){this.rowNumber=0,this.columnNumber=0}}},r=a,o=(i("83dd"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"3a262dba",null);e["default"]=l.exports},"4bc5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACOklEQVRYR+2XP4gTQRTGv5dNcoKViGDSiba2Yi2e7eEVd92BzcyGJILIFRbCgFaKCCZhd6YRrvMKvatPrMXWWuyylVgJmn9P5rwc55rs7E7OE+FShbx57/vN92beEILnRwhxGcCrg/R1Y8wnn1LkkySlXLbizHzO5hPRVwDrWuu9ovUKA4RheG8ymTwFEBDRrhVk5hUA41KptBnH8fMiELkB2u320mAwMMy8YTWJ6FEcx8qKhWGomPnhLzNoq1qtik6n8yMPSC6AVqtVHw6Hb5j5GoBvRLShtX59VEBKucrMWwDOEtGHSqVyu9vt9l0QToBGo3F9PB5bsRqAzwBWjDEfZxUWQlwFYNtyCUASBMFqFEXvsyAyAaSUdwBEzLxERO/K5fJar9f7klWw2WyeH41G28x8g4hsGxpa65fzcmYCKKXK/X7/GYC7B4kv6vX6faXUyGWpjRfJ/wOg6A6ygPI4+BuATw9djrjO0CGA7yl2Adh41i0iZqb0Pa7ValIp9T1P8bxrlFJnkiTR6TlCUsqdRSZZXoDpOiEET7/bSUr2h0VmuS+A1bRviXXgATNv+75mvgAArhDRmnMSFhVwrZ+2wBizr30IkA7MGbUVAI8B2Al5YdYaItrTWt+aB7IQgJTyCTNvunY53d2cTewfQi8HpJQJM18MgmA5iqK3aYGcLvoDuARccQu8UAtcAq74KcD/74Dr+v31M3AKcCIOuESOKz5rFNv/dTePSyCrztEH68Sf4zTYPwf4CTzGq/Jzr9v+AAAAAElFTkSuQmCC"},"4c03":function(t,e,i){},"4c50":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"project-edit-wrap"},[i("div",{staticClass:"header-wrap",on:{click:t.onClose}},[i("i",{staticClass:"iconfont f-16 f-666"},[t._v("")]),i("span",{staticClass:"fo-gray"},[t._v("返回")])]),i("perfect-scrollbar",{staticClass:"content-wrap"},[t.isCup?i("for-cup",{on:{close:t.onClose}}):i("for-box",{on:{close:t.onClose}})],1)],1)},n=[],a=i("5530"),r=i("5880"),o=i("3059"),l=i("9690"),c={components:{forBox:o["default"],forCup:l["default"]},computed:Object(a["a"])({},Object(r["mapGetters"])("editor-v2",["isCup"])),methods:{onClose(){this.$emit("close")}}},h=c,d=(i("8a94"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,"961f5f08",null);e["default"]=u.exports},"4c74":function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("365c"),a=i("3ccf"),r=i("33ac");i("86f9");e["default"]=Object(s["b"])({setup(){const t=Object(s["i"])({currentPage:1,pageSize:100}),e=Object(s["j"])(""),{data:i}=Object(a["c"])(n["getLogs"],{variables:t});return Object(s["k"])(()=>{}),()=>{var t;return Object(s["c"])("div",{class:"logs-wrapper py-30"},[Object(s["c"])("div",{class:"logs-container"},[Object(s["c"])("div",{class:"title"},["通知中心"]),Object(s["c"])("div",{class:"mod_default_box"},[null===(t=i.value)||void 0===t?void 0:t.data.map((t,i)=>Object(s["c"])("div",{key:i,on:{click:()=>{e.value=i}}},[Object(s["c"])(r["default"],{attrs:{target:t,show:i===e.value}})]))])])])}}})},"4c8f":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEp0lEQVRYR91XXWwUVRT+vtktVIwiWtqdDZom+BdrVHanBSmbyIPRkJj4gOgDMf4kPqCIBg1Qys7MFgKSqDVEfDAxBDQ8iNHoA+qDSragdGeLRDRGgxCMnRVqQjQIlZ055k53626722FJgMR5mnvvued85957vvtd4gp/vMLx0RgAAWOHM3fQRwq+nwKYAlAEmAVlgCLZYcP6sZGkpgbgPNPUhjkJAinQT1G0bkBuCAlwCsAAwAERf6BgYAi0ivXmVAGIO9YMMrLAg8oOKYILIHJ1ncmnQGYFiNKXRSCur2lHniFwECL7xZcDZ5vwzel51umy7TgAPW/vFMFjBJrqBDwOIgsgO2mpRdjm2B1aRFtUsTU31gYEH4JPXMN8WI3/B8Cx/fE2A6MfABkgkIUfzQ539f7ayN7GHfMmoZYi0S0+FgHoAKAFPkhxk+ngvxKAqA6B7Ih40176bX7PH40EDLOd5WyZ2YzRVwE8rWxdwwxiTwZAWIWkaYc5vJjxWN42KbD+/wDigxuDAzjx3FyWFYgfsu+XIj4GIfQjt1WCuOQA4rlMt1A+A6C44xz9yK2XDUA8l5knlC8AXCdAkcQyN2l+WHlYL9kKxB3rdiH3QdAKxSHEE27C3DWxUi4KwCxnzcxmzjgQsIfmLynMs45XZXXIaqdHxZBzlIkInisY6e21yvSiAMQGMx3U5MgYSeFoEdHUiLHeVe0WZ5MeRTFLYG4pYI9rmJvrccSFARDYhU4zIIvypzvWZoBrS+0jmnfuPvXvR5q/AnDnWL9scQ1r3VQEFcvZFgmzHhWra7RFwB0FI/3kREfxfOZNEVkxxuXIjcVEZ9Aktw8n08+GsWMsZ79DQvkecQ1zdjUV56y9IB8EcMJNmu2qjqscilB3+naCsry6n++6xobHVVZhAPS8fQyCdkA+dw3rgWoAjr0KQL/q9DQuPJlIfz3J4ZdWVL9Gex+Q4CoF+JH7l/8IFtcXHGUfsZzVRfJgad5q10i/VgVg9vdbY5GzZ08EeoD4wE2aS2tm9PPK6fqfLa+oMffakTW4ZdtoWOZqXHcyCvhSAc8XtentI4k1w1UAAqOctQukWmJfopF7C/f0Dl6I8zCbObmNXR49taIaiPfcpDm+jVWSrNXpmxuB/x2AqwAcO49od7nkwoLUGw+ECbQBAOqC+tuDdtdJY8PRsv0kUarnMy9A5PWSwU8etCWVExoBUmLIvWMHL+CRFQXDfKvSR01VrDvWGwCfLxmOiMalhUR6XyPBY9/ai1nEHmBcrG52DbNnoo+6sjyety0B0xAhiH8ArHUT6f7QchNQH8qsEpGtJYErgLbeNTbUZMgp3wV6PrMcIm8DaC4hP+hpfLFmiQKIHcp0sij9IBYG9oJzBJ4a7jR311u90JeRPrTREN/bTeDmsdJXhCOf0uem4c70ftXVdjgzn0X0UOShCp35C7TIo26i15lq60IBqMnqwSLQ1gGyulQhJT7BAQiUnFeyu/yNCtAvTTP6fr/75TNh5+aCAJSdtAxZ8Wkee0RJa45vy3hgEDvoRTY18oZoCEA5Utthq1U7j5UQLguEPWVPsRnbTnVYhbCMJ47/C4PnHz8XyQ/DAAAAAElFTkSuQmCC"},"4ced":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(e,i,s){n(this,t),this.object=e,this.encodings=i,this.options=s}return s(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();e.default=a},"4cf2":function(t,e,i){},"4d03":function(t,e,i){var s=i("cbe5"),n=Math.PI,a=Math.cos,r=Math.sin,o=s.extend({type:"star",shape:{cx:0,cy:0,n:3,r0:null,r:0},buildPath:function(t,e){var i=e.n;if(i&&!(i<2)){var s=e.cx,o=e.cy,l=e.r,c=e.r0;null==c&&(c=i>4?l*a(2*n/i)/a(n/i):l/3);var h=n/i,d=-n/2,u=s+l*a(d),p=o+l*r(d);d+=h,t.moveTo(u,p);for(var f,m=0,g=2*i-1;m<g;m++)f=m%2===0?c:l,t.lineTo(s+f*a(d),o+f*r(d)),d+=h;t.closePath()}}});t.exports=o},"4d13":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-modal",{attrs:{centered:"",visible:t.visible,title:"编辑二维码"},on:{cancel:t.handleCancel}},[i("a-form-model",{ref:"formRef",attrs:{model:t.form,"label-col":{span:6},"wrapper-col":{span:16}}},[i("a-form-model-item",{attrs:{label:"内容类型",prop:"codeValue"}},[i("a-button",{staticClass:"choice-button",attrs:{type:"url"===t.form.codeType?"primary":"default",ghost:"url"===t.form.codeType},on:{click:function(e){return t.setCodeType("url")}}},[t._v("静态网址")]),i("a-button",{staticClass:"choice-button",attrs:{type:"text"===t.form.codeType?"primary":"default",ghost:"text"===t.form.codeType},on:{click:function(e){return t.setCodeType("text")}}},[t._v("文本")]),i("a-button",{staticClass:"choice-button",attrs:{type:"officialaccount"===t.form.codeType?"primary":"default",ghost:"officialaccount"===t.form.codeType},on:{click:function(e){return t.setCodeType("officialaccount")}}},[t._v("微信公众号")])],1),i("a-form-model-item",{attrs:{label:" ",prop:"codeValue",colon:!1}},["text"===t.form.codeType?i("a-textarea",{staticStyle:{resize:"none"},attrs:{rows:2,placeholder:"请输入文本"},model:{value:t.form.codeValue,callback:function(e){t.$set(t.form,"codeValue",e)},expression:"form.codeValue"}}):"url"===t.form.codeType?i("a-input-group",{attrs:{compact:""}},[i("a-input",{attrs:{placeholder:"请输入网址"},model:{value:t.form.codeValue,callback:function(e){t.$set(t.form,"codeValue",e)},expression:"form.codeValue"}},[i("a-select",{attrs:{slot:"addonBefore","default-value":t.form.httpType},on:{change:function(e){t.form.httpType=e}},slot:"addonBefore"},[i("a-select-option",{attrs:{value:"http://"}},[t._v(" http:// ")]),i("a-select-option",{attrs:{value:"https://"}},[t._v(" https:// ")])],1)],1)],1):i("div",[i("a-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入公众号ID"},model:{value:t.form.codeValue,callback:function(e){t.$set(t.form,"codeValue",e)},expression:"form.codeValue"}}),i("a",{staticStyle:{margin:"0 10px",color:"#aaaaaa"},attrs:{href:"https://help.baoxiaohe.com/support/archives/350/",target:"_blank"}},[i("a-icon",{attrs:{type:"question-circle"}})],1)],1),i("div",{staticClass:"small example"},[t._v(" 示例: "),i("span",{on:{click:function(e){return t.useExample(t.exampleValue)}}},[t._v(t._s(t.exampleValue))])]),i("div",{staticClass:"small"},[t._v("使用前请自行测试")])],1)],1),i("template",{slot:"footer"},[i("a-button",{key:"back",on:{click:t.handleCancel}},[t._v(" 取消 ")]),i("a-button",{key:"submit",attrs:{type:"primary",disabled:0===t.form.codeValue.length},on:{click:t.onSubmit}},[t._v(" 保存并使用 ")])],1)],2)],1)},n=[],a=(i("5319"),i("2ca0"),i("0c6d")),r=i("c64e"),o=i.n(r),l={props:{visible:{required:!0,type:Boolean,default:!1},data:{required:!0,type:Object}},data(){return{rules:{codeValue:[{validator:this.validateQrcode,trigger:"blur"}]},form:{codeType:"url",codeValue:"https://www.baoxiaohe.com",httpType:""},example:{url:"www.baoxiaohe.com",text:"包小盒在线3D包装云设计",officialaccount:"baoxiaohesheji"},exampleValue:""}},mounted(){this.updateForm()},methods:{setCodeType(t){this.form.codeType=t,this.exampleValue=this.example[t]},async onSubmit(){const{codeType:t,httpType:e,codeValue:i}=this.form,s={value:"",codeType:t,codeValue:i};if("text"===t)s.value=i;else if("url"===t)s.value=e+i;else if(s.value=await Object(a["Q"])({username:i}),"string"!==typeof s.value||0===s.value.length)return void this.$message.error("公众号不存在");this.data.uuid||(this.options.uuid=o()()),this.$emit("callback",Object.assign({},this.data,s))},handleCancel(){this.$emit("close")},useExample(t){this.form.codeValue=t},updateForm(){const{value:t,codeType:e}=this.data;"url"===e&&(t.startsWith("https://")&&(this.form.httpType="https://"),t.startsWith("http://")&&(this.form.httpType="http://"),this.form.codeValue=t.replace(this.form.httpType,"")),this.form.codeType=e,this.exampleValue=this.example[this.form.codeType]}},watch:{"form.codeValue"(){"url"===this.form.codeType&&(this.form.codeValue.startsWith("http://")?(this.form.codeValue=this.form.codeValue.replace("http://",""),this.form.httpType="http://"):this.form.codeValue.startsWith("https://")&&(this.form.codeValue=this.form.codeValue.replace("https://",""),this.form.httpType="https://"))},visible(t){t&&this.updateForm()}}},c=l,h=(i("fee1"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,"7af3c854",null);e["default"]=d.exports},"4d36":function(t,e,i){"use strict";var s=i("23ee"),n=i.n(s);n.a},"4d67":function(t,e,i){t.exports=i.p+"editor-assets/img/ang2-b.37fea6cc.svg"},"4db8":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-button",{attrs:{block:""},on:{click:t.onDimiss}},[t._v("拆分组合")]),i("a-divider"),i("design-common-operation")],1)},n=[],a=(i("ddb0"),i("5530")),r=i("5880"),o=i("1e9d"),l=i("c854"),c={components:{designCommonOperation:o["default"]},computed:Object(a["a"])({},Object(r["mapGetters"])("editor-v2",["curDesign","design_data"])),methods:{onDimiss(){const{curDesign:t,design_data:e}=this,{type:i,designs:s,uuid:n}=t;if("group"!==i||!s)return;const a=l["s"](t);a.forEach(t=>{t._selected=!0});const r=e.findIndex(t=>t.uuid===n);e.splice(r,1,...a)}}},h=c,d=i("2877"),u=Object(d["a"])(h,s,n,!1,null,null,null);e["default"]=u.exports},"4e13":function(t,e,i){var s=i("cbe5"),n=Math.cos,a=Math.sin,r=s.extend({type:"trochoid",shape:{cx:0,cy:0,r:0,r0:0,d:0,location:"out"},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i,s,r,o,l=e.r,c=e.r0,h=e.d,d=e.cx,u=e.cy,p="out"===e.location?1:-1;if(!(e.location&&l<=c)){var f,m=0,g=1;i=(l+p*c)*n(0)-p*h*n(0)+d,s=(l+p*c)*a(0)-h*a(0)+u,t.moveTo(i,s);do{m++}while(c*m%(l+p*c)!==0);do{f=Math.PI/180*g,r=(l+p*c)*n(f)-p*h*n((l/c+p)*f)+d,o=(l+p*c)*a(f)-h*a((l/c+p)*f)+u,t.lineTo(r,o),g++}while(g<=c*m/(l+p*c)*360)}}});t.exports=r},"4e31":function(t,e,i){},"4e315":function(t,e,i){"use strict";var s=i("a456"),n=i.n(s);n.a},"4e47":function(t,e,i){t.exports=i.p+"editor-assets/img/rotate-content.7b85fb1a.svg"},"4e63":function(t,e,i){},"4e90":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"linked bd-bt"},[t._l(t.menus,(function(e,s){return i("li",{key:s,class:[e.disabled?"disabled":"",e.active?"actived":""],on:{click:function(i){return t.handleClick(e)}}},[e.icon?i("a-icon",{attrs:{type:e.icon}}):t._e(),t._v(" "+t._s(e[t.arg])+" ")],1)})),t._t("default")],2)},n=[],a={props:{menus:{type:[Object,Array],default:()=>[]},arg:{type:String,default:"title"}},methods:{handleClick(t){t.disabled||this.$emit("change",t)}}},r=a,o=(i("3a07"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"60d31fea",null);e["a"]=l.exports},"4eb4":function(t,e,i){},"4ec9":function(t,e,i){},"4ed7":function(t,e,i){},"4f88":function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("2d41"),a=i.n(n);i("6232");e["default"]=Object(s["b"])({props:{category:{type:[Object,Array],default:()=>[]},current:{type:Number,default:-1}},setup(t,e){const i=Object(s["j"])(!1),n=t=>{e.emit("change",t)};return()=>Object(s["c"])("div",{class:"gallery-category flex flex-start flex-wrap w-256"},[Object(s["c"])("div",{class:["gallery-content__cate-sub fo-12 mt-8 mr-8",-1===t.current?"cate-sub-active":""],on:{click:()=>n(-1)}},["全部"]),t.category.map((e,a)=>(!!i.value||a<6)&&Object(s["c"])("div",{class:"gallery-content__cate-sub fo-12 mt-8 mr-8 "+(t.current===a?"cate-sub-active":""),key:a,on:{click:()=>n(a)}},[e.name])),Object(s["c"])("div",{class:"gallery-content__cate-sub fo-12 mt-8 mr-8 flex flex-center item-center",on:{click:()=>i.value=!i.value}},[Object(s["c"])("div",{class:"px-6"},[Object(s["c"])("img",{style:{width:"14px",height:"14px",transform:i.value?"rotate(180deg)":""},attrs:{src:a.a}})])])])}})},"4fa7":function(t,e,i){},"4fac":function(t,e,i){var s=i("620b"),n=i("9c2c");function a(t,e,i){var a=e.points,r=e.smooth;if(a&&a.length>=2){if(r&&"spline"!==r){var o=n(a,r,i,e.smoothConstraint);t.moveTo(a[0][0],a[0][1]);for(var l=a.length,c=0;c<(i?l:l-1);c++){var h=o[2*c],d=o[2*c+1],u=a[(c+1)%l];t.bezierCurveTo(h[0],h[1],d[0],d[1],u[0],u[1])}}else{"spline"===r&&(a=s(a,i)),t.moveTo(a[0][0],a[0][1]);c=1;for(var p=a.length;c<p;c++)t.lineTo(a[c][0],a[c][1])}i&&t.closePath()}}e.buildPath=a},"4fe6":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));class s{static CASE(t,e,i){return e?t:i}static ROUNDDOWN(t,e){return t%e===0?t:Math.floor(t/e)*e}}function n(t){return s.CASE(s.ROUNDDOWN(2*t/3,.05),t<=.9,s.ROUNDDOWN(2*t/3,.5))}},"500c":function(t,e,i){t.exports=i.p+"editor-assets/img/e5-active.e54aff3c.svg"},5012:function(t,e,i){},"501c":function(t,e,i){},"501c5":function(t,e,i){"use strict";var s=i("8b5c"),n=i.n(s);n.a},"50e4":function(t,e,i){"use strict";var s=i("edf3"),n=i.n(s);n.a},5144:function(t,e,i){},5151:function(t,e,i){t.exports=i.p+"editor-assets/img/d3.5b507d69.svg"},5176:function(t,e,i){t.exports=i.p+"editor-assets/img/risk-question-line.94c0877e.svg"},"518c":function(t,e,i){"use strict";var s=i("f0ca"),n=i.n(s);n.a},"51b7":function(t,e,i){"use strict";var s=i("7c17"),n=i.n(s);n.a},5211:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABFklEQVRYR2NkGGDAOMD2M4w6ACMEcvK7gv///zf1PwODOC2ih5GB4SUjI1P2lIlla0HmYzggK6/jBQONLEfy0MtpkyokcDngBgMDgzotfI9k5s1pkyo0sDogN7fd8C8jUwsDw3+aRAEDA+NL5v//aiZPrjyP1QE09jmG8aPZcDQEhlYIZOZ1JjIy/O9mYGAQJpBb3v5nYCydPql8PqFcRXQINDQ0sLx6x/GRgYGBi5ChUPlvYkI/+BsaGv7gU0+0A0DFdlZex3MSimlQcSvJwMDwn1oOYMjJabP+x8RUR0wUMP371zRlStVRQqFFSggQMoss+VEHjIbA4AuB0TZhVl7HaJuQrBKNXE2DLxeQ6xNy9Q14CAAAikRcIWCJ81QAAAAASUVORK5CYII="},5254:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"editor-content",style:{height:t.height+"px",width:t.width+"px",marginLeft:t.left+"px"}},[s("div",{staticClass:"fix-bottom flex flex-start",style:{marginLeft:(t.keepPin?304:34)+"px"}},[s("page-size-picker",{attrs:{options:{height:t.$root.knifeData.totalY,width:t.$root.knifeData.totalX,windowHeight:t.height,windowWidth:t.width},value:t.scale},on:{change:t.scaleChange}}),s("a-popover",{attrs:{placement:"top",width:150,trigger:"click",overlayClassName:"ant-no-padding"},model:{value:t.canPopVisible,callback:function(e){t.canPopVisible=e},expression:"canPopVisible"}},[s("div",{staticClass:"can-panel",attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"can-item",on:{click:function(e){return t.addGuides("x")}}},[t._v("横向参考线")]),s("div",{staticClass:"can-item",on:{click:function(e){return t.addGuides("y")}}},[t._v("竖向参考线")]),s("div",{staticClass:"can-item",attrs:{disabled:!(t.$root.projectData.lineGuides.length>0)},on:{click:function(e){t.$root.projectData.lineGuides.length>0&&t.clearGuides()}}},[t._v(" 清除参考线 ")])]),s("div",{staticClass:"fixed-btn fixed-btn-l flex flex-center item-center ml-8"},[s("a-tooltip",{attrs:{placement:"top",visible:t.showCanVisible}},[s("template",{slot:"title"},[s("span",[t._v("参考线")])]),s("div",{staticClass:"flex flex-center item-center w-100",staticStyle:{height:"100%"},on:{mousemove:function(e){t.canToolVisible=!0},mouseleave:function(e){t.canToolVisible=!1}}},[s("img",{attrs:{src:i("f7a3")}})])],2)],1)]),s("a-popover",{attrs:{placement:"top",width:170,trigger:"click",overlayClassName:"bottom-editor-pop ant-no-padding"},model:{value:t.bleedPopVisible,callback:function(e){t.bleedPopVisible=e},expression:"bleedPopVisible"}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"pops-item p-12 flex flex-between item-center",on:{click:function(e){return t.handleProject({show_bleed_line:1-t.$root.projectData.show_bleed_line})}}},[s("div",{staticClass:"text"},[t._v("出血线")]),s("div",[s("img",{directives:[{name:"show",rawName:"v-show",value:!!t.$root.projectData.show_bleed_line,expression:"!!$root.projectData.show_bleed_line"}],staticClass:"img",staticStyle:{width:"14px",height:"14px"},attrs:{src:i("e9bc")}})])]),s("div",{staticClass:"pops-item p-12 flex flex-between item-center",on:{click:function(e){return t.handleProject({show_material:1-t.$root.projectData.show_material})}}},[s("div",{staticClass:"text"},[t._v("材质")]),s("div",[s("img",{directives:[{name:"show",rawName:"v-show",value:!!t.$root.projectData.show_material,expression:"!!$root.projectData.show_material"}],staticClass:"img",staticStyle:{width:"14px",height:"14px"},attrs:{src:i("e9bc")}})])])]),s("div",{staticClass:"fixed-btn fixed-btn-r flex flex-center item-center"},[s("a-tooltip",{attrs:{placement:"top",visible:t.showBleedVisible}},[s("template",{slot:"title"},[s("span",[t._v("显示 / 隐藏")])]),s("div",{staticClass:"flex flex-center item-center w-100",staticStyle:{height:"100%"},on:{mousemove:function(e){t.bleedToolVisible=!0},mouseleave:function(e){t.bleedToolVisible=!1}}},[s("img",{attrs:{src:i("fd60")}})])],2)],1)])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showMaterialTip&&!t.isopt&&t.materialTipData.text,expression:"showMaterialTip && !isopt && materialTipData.text"}],staticClass:"material_tip",style:{left:t.materialTipData.x+(t.materialTipData.width/2-40)+"px",top:t.materialTipData.y-25+"px"}},[t._v(" "+t._s(t.materialTipData.text)+" ")]),s("div",{staticClass:"editor-content__panel",style:{height:t.height+"px",width:t.width+"px"},attrs:{id:"editorContentPanel",tabindex:"1"},on:{keydown:t.listenKeyDown,keyup:t.listenKeyUp}},[s("line-guides",{attrs:{drawer:t.drawerData,scale:t.scale,width:t.width,height:t.height,x:t.svgContainer.x,y:t.svgContainer.y,lines:t.$root.projectData.lineGuides}}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.selectRect.isShow,expression:"selectRect.isShow"}],staticClass:"avoid-clicks",style:{position:"fixed",zIndex:1e3,left:t.selectRect.x+"px",top:t.selectRect.y+"px",width:t.selectRect.mx-t.selectRect.x+"px",height:t.selectRect.my-t.selectRect.y+"px",border:"1px solid #ff610d",backgroundColor:"rgba(255, 97, 13, 0.1)"}}),t._v(" "+t._s()+" "),s("div",{ref:"edittorPanel",staticClass:"editor-content__panel__canvas flex flex-center item-center",style:{width:t.width-110+"px",height:t.height+"px",overflow:"auto",transform:"translate("+(t.keepPin?"30px":"-110px")+", 0)"},attrs:{id:"editorContentPanelCanvas"},on:{mousedown:t.listenMouseDown,wheel:t.mouseWheel}},[s("div",{staticClass:"editor-content__panel__canvas__project",style:{width:t.width+"px",height:t.height+"px",transform:"scale("+t.scale+","+t.scale+") rotate("+t.$root.projectData.totalRotate+"deg)"},attrs:{id:"editorContentPanelCanvasProject"},on:{contextmenu:function(e){return e.preventDefault(),t.handleContextMenu(e)}}},[s("graph",{directives:[{name:"show",rawName:"v-show",value:t.$root.modeReady,expression:"$root.modeReady"}],ref:"svgContainer",attrs:{id:"svgContainer",bleed:!!t.$root.projectData.show_bleed_line,material:!!t.$root.projectData.show_material,options:{height:t.height,width:t.width}}})],1)])],1)])},n=[],a=(i("5319"),i("ddb0"),i("5530")),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pagesize-picker",attrs:{id:"pagesizePicker"}},[i("div",{staticClass:"pagesize-picker__panel flex flex-between"},[i("div",{class:"pagesize-picker__panel__btn "+(t.val-.25<=.2?"pagesize-picker__panel--notallow":"pointer"),on:{click:t.reduse}},[t._v(" - ")]),i("div",{staticClass:"pagesize-picker__panel__text fo-12"},[i("span",{directives:[{name:"show",rawName:"v-show",value:!t.isInput,expression:"!isInput"}]},[t._v(t._s(t.showVal))]),i("input",{directives:[{name:"show",rawName:"v-show",value:t.isInput,expression:"isInput"}],attrs:{type:"text",readonly:"",placeholder:"100%",id:"pageSizePickerInput"},domProps:{value:t.val},on:{blur:t.inputChange,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.inputChange(e)}}})]),i("div",{class:"pagesize-picker__panel__btn "+(t.val+.25>=5?"pagesize-picker__panel--notallow":"pointer"),on:{click:t.add}},[t._v(" + ")])]),i("div",{staticClass:"pagesize-picker__menu"},t._l(t.arrList,(function(e,s){return i("div",{key:s,class:"pagesize-picker__menu__panel \n              "+(t.val===e.value&&"pagesize-picker__menu__panel--active")+" \n              "+("func"===e.value&&"border-t")+" ",on:{click:function(i){return t.changeVlaue(e.value)}}},[t._v(" "+t._s(e.label)+" ")])})),0)])},o=[],l=(i("b680"),{name:"PageSizePicker",props:{value:{type:Number},options:{type:Object}},model:{prop:"value",event:"change"},watch:{val(t){this.$emit("change",t)},value(t){this.showVal=(100*t).toFixed(0)+"%",this.val=t},options(t){}},data(){return{val:this.value,isInput:!1,showVal:"100%",arrList:[{label:"20%",value:.2},{label:"50%",value:.5},{label:"100%",value:1},{label:"200%",value:2},{label:"300%",value:3},{label:"适应屏幕",value:"func"},{label:"实际大小",value:1}]}},methods:{selectAll(){document.getElementById("pageSizePickerInput").select()},inputChange(t){parseFloat(t.target.value)>=5?this.val=5:parseFloat(t.target.value)<=.05?this.val=.05:this.val=parseFloat(t.target.value),this.isInput=!1,this.showValData()},changeVlaue(t){"func"!==t?(this.val=t,this.showValData()):this.adapt()},showValData(){this.showVal=(100*this.val).toFixed(0)+"%"},add(){this.val>=5||(this.val+=.25,this.showValData())},reduse(){this.val-.25<=.05||(this.val-=.25,this.showValData())},adapt(){let t=this.options;t.height>=t.width?(t.height>.75*t.windowHeight||t.height<.5*t.windowHeight)&&(this.val=.75*t.windowHeight/t.height):(t.width>.75*t.windowWidth||t.width<.5*t.windowWidth)&&(this.val=.75*t.windowWidth/t.width),this.showValData()}}}),c=l,h=(i("bfe0"),i("2877")),d=Object(h["a"])(c,r,o,!1,null,null,null),u=d.exports,p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"markline-picker"},[i("div",{staticClass:"markline-picker__text fo-12"},[t._v("参考线")]),i("div",{staticClass:"markline-picker__panel"},t._l(t.arrList,(function(e,s){return i("div",{key:e,class:"markline-picker__panel__menu "+(s===t.flag&&"markline-picker__panel__menu--active"),on:{click:function(e){return t.changeItem(s)}}},[t._v(" "+t._s(e)+" ")])})),0)])},f=[],m={name:"MarkLinePicker",data(){return{flag:0,arrList:["横线参考线","竖向参考线","清除参考线"]}},watch:{flag(t){this.$emit("change",t)}},methods:{changeItem(t){this.flag=t}}},g=m,v=(i("c0f9"),Object(h["a"])(g,p,f,!1,null,null,null)),b=v.exports,y=i("568c"),_=i("f293"),x=i("87a0"),w=i("5880"),C=i("6ca2"),k=i("365c"),S=i("650f"),A={components:{PageSizePicker:u,MarkLinePicker:b,graph:y["default"],PopMenu:C["a"],lineGuides:_["default"]},props:{drawer:{type:Object,default:{rightDrawerOpen:!0}}},data(){return{drawerData:this.drawer,height:window.innerHeight-52,width:window.innerWidth-(this.keepPin?280:0)-220-56,canPopVisible:!1,canToolVisible:!1,bleedPopVisible:!1,bleedToolVisible:!1,svgContainer:{x:0,y:0},cvsContent:{height:window.innerHeight-52,width:window.innerWidth-(this.keepPin?280:0)-220-56,scrollTop:800,scrollLeft:800},menus1:[{title:"横向参考线",value:"HORIZONTAL",active:!0},{title:"竖向参考线",value:"VERTICAL"},{title:"清除参考线",value:"CLEAN",disabled:!0},{title:"显示出血线",value:"SHOW"}],menus2:[{title:"显示材质",value:"SHOW"},{title:"关闭材质",value:"CLOSE"}],left:220,hository:[],steps:[],areaFlag:-1,materialFlag:-1,project:{},face:null,selectRect:{x:0,y:0,mx:0,my:0,isShow:!1},materialTipData:{x:0,y:0,width:0,text:""},isopt:!1}},watch:{drawer:{deep:!0,handler:function(t){this.drawerData=t}},materialTip(t){this.materialTipData=t},isOpt(t){this.isopt=t},currentFace(t){if(null===t)return this.$store.dispatch("editor/saveTargetDesigns",[]),void this.handleChangeFace(null);const e=this.$root.knifeData.faces.find(t=>t.name===this.currentFace);let{h:i,w:s,x:n,y:a,name:r}=e;this.isInside&&(n=this.$root.knifeData.totalX-n-s),this.handleChangeFace({h:i,w:s,x:n,y:a,face:r})}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(w["mapState"])(["scale","showMaterialTip","materialTip","isOpt","spaceKeyDown","isInside"])),Object(w["mapState"])("editor",["currentFace","targetDesigns","targetDesign","adsorbInstance","tailoringUUID"])),Object(w["mapState"])("menu",["keepPin"])),{},{showBleedVisible(){return this.bleedToolVisible&&!this.bleedPopVisible},showCanVisible(){return this.canToolVisible&&!this.canPopVisible}}),mounted(){this.resize(),this.init(),this.$refs.edittorPanel.addEventListener("wheel",this.cancelEvent),this.initAdsorbInstance()},beforeDestroy(){window.removeEventListener("resize",this._handeResize),this.$refs.edittorPanel.removeEventListener("wheel",this.cancelEvent)},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(w["mapMutations"])([x["s"]])),Object(w["mapMutations"])("editor",["setAdsorbInstance"])),Object(w["mapActions"])("editor",["setTailoringUUID"])),Object(w["mapActions"])(["rollbackHistory","reRollbackHistory"])),{},{initAdsorbInstance(){if(!this.adsorbInstance){let t=new S["a"]({DPI:k["DPI"],totalX:this.$root.knifeData.totalX,totalY:this.$root.knifeData.totalY,foldLines:this.$root.knifeData.folds,faces:this.$root.knifeData.faces});this.setAdsorbInstance(t)}},cancelEvent(t){t.preventDefault()},listenKeyDown(t){if(" "===t.key)document.body.style.cursor="grabbing",this.$store.commit("setSpaceKeyDown",!0);else if("Backspace"===t.key){if(-1!==["INPUT","TEXTAREA"].indexOf(t.target.tagName))return;if("true"==t.target.contentEditable||"plaintext-only"==t.target.contentEditable)return;t.preventDefault()}else if("Escape"===t.key){if(-1!==["INPUT","TEXTAREA"].indexOf(t.target.tagName))return;if("true"==t.target.contentEditable||"plaintext-only"==t.target.contentEditable)return;this.currentFace&&this.$store.commit("editor/toggleCurrentFace",null),t.preventDefault()}let e=!1;const i=t.ctrlKey||t.metaKey;if(!i||"A"!==t.key&&"a"!==t.key)if(!i||t.shiftKey||"Z"!==t.key&&"z"!==t.key)if(i&&t.shiftKey&&("Z"===t.key||"z"===t.key))e=!0,this.reRollbackHistory(this);else if(!i||"v"!==t.key&&"V"!==t.key)if(!i||"s"!==t.key&&"S"!==t.key){if(this.targetDesigns.length>0)if(!i||"L"!==t.key&&"l"!==t.key)if(!i||"c"!==t.key&&"C"!==t.key)if(!i||"x"!==t.key&&"X"!==t.key)if(!t.shiftKey||"H"!==t.key&&"h"!==t.key)if(!t.shiftKey||"V"!==t.key&&"v"!==t.key)if("Delete"===t.key||"Backspace"===t.key)e=!0,this.$bus.$emit("shortcut",{action:x["a"].DELETE});else{const i=["ArrowUp","ArrowLeft","ArrowDown","ArrowRight"];-1!=i.indexOf(t.key)&&(e=!0,this.$bus.$emit("shortcut",{action:x["a"].MOVE,event:t}))}else e=!0,this.$bus.$emit("shortcut",{action:x["a"].ROTATE_Y});else e=!0,this.$bus.$emit("shortcut",{action:x["a"].ROTATE_X});else e=!0,this.$bus.$emit("shortcut",{action:x["a"].CUT});else e=!0,this.$bus.$emit("shortcut",{action:x["a"].COPY});else e=!0,this.$bus.$emit("shortcut",{action:this.targetDesigns[0].locked?x["a"].UNLOCK:x["a"].LOCK})}else e=!0,this.$bus.$emit("shortcut",{action:x["a"].SAVE});else{let t=localStorage.getItem("clipboard");t&&""!=t&&"{}"!=t?(e=!0,this.$bus.$emit("shortcut",{action:x["a"].PASTE})):e=!1}else this.rollbackHistory(this);else e=!0;e&&t.preventDefault()},listenKeyUp(t){" "===t.key&&(document.body.style.cursor="default",this.$store.commit("setSpaceKeyDown",!1))},listenMouseDown(t){t.target;const e=document.getElementById("svgContainer"),i=document.getElementById("lineGuidesX"),s=document.getElementById("lineGuidesY");if(this.$store.commit("editor/setMouseMoved",!1),this.spaceKeyDown){let n=parseFloat(e.style.left.replace("px")),a=parseFloat(e.style.top.replace("px"));const r=t.clientX,o=t.clientY,l=parseFloat(i.style.left.replace("px")),c=parseFloat(s.style.top.replace("px"));document.onmousemove=t=>{this.$store.commit("editor/setMouseMoved",!0),this.spaceKeyDown||(document.onmousemove=null,document.onmouseup=null);let h=(t.clientX-r)/this.scale,d=(t.clientY-o)/this.scale;const u=this.$root.projectData.rotate;i.style.left=l+h+"px",s.style.top=c+d+"px",90===u?[h,d]=[d,-h]:180===u?[h,d]=[-h,-d]:270==u&&([h,d]=[-d,h]),e.style.left=n+h+"px",e.style.top=a+d+"px"},document.onmouseup=t=>{document.onmousemove=null,document.onmouseup=null}}else{if(this.tailoringUUID)return void this.setTailoringUUID("");this.selectRect.isShow=!0;let e=t.clientX,i=t.clientY;this.selectRect.x=e,this.selectRect.y=i,this.selectRect.mx=e,this.selectRect.my=i,document.onmousedown=document.onmousemove=t=>{var s;this.$store.commit("editor/setMouseMoved",!0),t.clientX-e>=0?this.selectRect.mx=t.clientX:this.selectRect.x=t.clientX,t.clientY-i>=0?this.selectRect.my=t.clientY:this.selectRect.y=t.clientY,null===(s=this.$refs.svgContainer)||void 0===s||s.selectMaterialsByRect(JSON.parse(JSON.stringify(this.selectRect)))},document.onmouseup=()=>{this.selectRect.isShow=!1,this.selectRect.x=0,this.selectRect.y=0,this.selectRect.mx=0,this.selectRect.my=0,document.onmousedown=null,document.onmousemove=null,document.onmouseup=null}}},addGuides(t){let e=this.$root.projectData.lineGuides;"x"===t?this.face?e.push({type:t,x:0,y:(this.face.y+this.face.h/2)/k["DPI"]}):e.push({type:t,x:0,y:this.$root.knifeData.totalY/2}):this.face?e.push({type:t,x:(this.face.x+this.face.w/2)/k["DPI"],y:0}):e.push({type:t,x:this.$root.knifeData.totalX/2,y:0}),this.$store.commit("increaseProjectVersion")},handleProject(t){this.$root.projectData=Object.assign(this.$root.projectData,t)},clearGuides(){this.$root.projectData.lineGuides=[]},delGuide(t){const e=$root.projectData.lineGuides;e.splice(t,1),this.$root.projectData.lineGuides=[...e]},resize(){window.addEventListener("resize",this._handeResize)},_handeResize(){this.height=window.innerHeight-52,this.width=window.innerWidth-65,this.cvsContent.height=window.innerHeight-52,this.cvsContent.height=window.innerWidth-65},init(){let t=window.innerWidth-65,e=0;this.width=t,this.left=e;const i=this.$root.knifeData.totalY*k["DPI"],s=this.$root.knifeData.totalX*k["DPI"];i>this.height?this.cvsContent.height=i+50:this.cvsContent.height=this.height,s>this.width?this.cvsContent.width=s+50:this.cvsContent.width=this.width;let n=this.width/2-s/2-50*k["DPI"],a=this.height/2-i/2-50*k["DPI"];this.svgContainer.x=n,this.svgContainer.y=a;let r=document.getElementById("svgContainer"),o=document.getElementById("lineGuidesX"),l=document.getElementById("lineGuidesY");r.style.left=n+"px",r.style.top=a+"px",o.style.left=n+50*k["DPI"]+"px",l.style.top=a+50*k["DPI"]+"px",this.setScale()},setScale(){let t=1,e=this.$root.knifeData.totalX*k["DPI"]+100,i=this.$root.knifeData.totalY*k["DPI"]+100,s={width:e,height:i};i>this.height&&(t=.8*this.height/i,s.height=i*t,s.width=e*t);let n=window.innerWidth-(this.keepPin?280:0)-220-56;s.width>n&&(t=.8*n/e),this[x["s"]](t)},mouseWheel(t){const e=this.scale-t.deltaY/1e3/(10-k["MOUSE_SENSITY"]);this[x["s"]](Math.max(Math.min(e,5),.05))},scaleChange(t){this[x["s"]](t)},calculateAxias(){},handleChangeFace(t){let e=document.getElementById("svgContainer"),i=document.getElementById("lineGuidesX"),s=document.getElementById("lineGuidesY");if(null===t)return this.face=null,this.init(),void(e.style.transform="rotate(0deg)");this.face=t;let n=0,a=0;const r=this.$root.projectData.rotate;let o=!0;if(r%180==90&&(o=!1),n=this.width/2-t.x*k["DPI"]-t.w*k["DPI"]/2-50*k["DPI"]+(o?30:0),a=this.height/2-t.y*k["DPI"]-t.h*k["DPI"]/2-50*k["DPI"],t.w>t.h){const e=(this.width-220-(this.keepPin?280:0))/t.w/k["DPI"];this[x["s"]](.8*e)}else this[x["s"]](.8*this.height/t.h/k["DPI"]);e.style.left=n+"px",e.style.top=a+"px",i.style.left=n+50*k["DPI"]+"px",s.style.top=a+50*k["DPI"]+"px"},handleContextMenu(t){this.$store.commit("editor/setContextMenuPosition",{x:t.clientX,y:t.clientY}),this.$store.commit("editor/setPotentialDesigns",[]),this.$bus.$emit("show-design-menu",{design:null,event:t})}})},O=A,j=(i("e175"),Object(h["a"])(O,s,n,!1,null,null,null));e["default"]=j.exports},5261:function(t,e,i){"use strict";function s(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var i in e)e.hasOwnProperty(i)&&(i=e[i],"string"===typeof t[i]&&(t[i]=parseInt(t[i],10)));return"string"===typeof t["displayValue"]&&(t["displayValue"]="false"!=t["displayValue"]),t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=s},"52a9":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"fontRef",staticClass:"editor-font"},[i("div",{staticClass:"font-title mt-8 h1-title",on:{mousedown:function(e){return e.stopPropagation(),t.fontMove(e,"small","双击修改文字")}}},[i("span",{staticClass:"fo-h1",attrs:{id:"fontItem-small"}},[t._v("点击添加标题")])]),i("div",{staticClass:"font-title mt-8 h3-title",on:{mousedown:function(e){return e.stopPropagation(),t.fontMove(e,"medium","双击修改文字")}}},[i("span",{staticClass:"fo-h2",attrs:{id:"fontItem-medium"}},[t._v("点击添加副标题")])]),i("div",{staticClass:"font-title mt-8 p",on:{mousedown:function(e){return e.stopPropagation(),t.fontMove(e,"big","双击修改文字")}}},[i("span",{staticClass:"fo-h3",attrs:{id:"fontItem-big"}},[t._v("点击添加正文")])])])},n=[],a=(i("ddb0"),i("5530")),r=i("5880"),o=i("ed08"),l=i("365c"),c=i("c64e"),h=i.n(c),d=i("26a1"),u=i("1645"),p={props:{load:{type:Boolean,default:!1}},computed:Object(a["a"])({},Object(r["mapState"])("editor-v2",["knife_data","project_data","scale"])),data(){return{query:{currentPage:1,pageSize:12,file_type:"font",keyword:""},height:window.innerHeight-56-52-16,queryCount:0,imgData:[],loading:!1,nextLoading:!1,onload:!1,title:[{example:"点击添加大标题",file_path:"",thumb_path:""},{example:"点击添加小标题",file_path:"",thumb_path:""},{example:"点击添加正文",file_path:"",thumb_path:""}],rotate:0}},watch:{load(t){t&&(this.onload=!0)},onload(t){t&&this.init()}},async mounted(){this.resize()},methods:{resize(){window.addEventListener("resize",this._handeResize)},_handeResize(){this.height=window.innerHeight-56-52-16},titleClick(t,e,i,s){let n=20,a="normal";const r=this.scale/.3;switch(t){case"small":n=Object(o["H"])(42).pt2mm(),a="bold";break;case"medium":a="bold",n=Object(o["H"])(35).pt2mm();break;default:n=Object(o["H"])(30).pt2mm();break}n/=r;const c=1.2*n,d={uuid:h()(),type:"font",src:l["SIYUAN_FONT"],value:e,example:"思源黑体-常规",id:l["SIYUAN_FONT_ID"],style:{position:"absolute",lineHeight:c,fontSize:n,width:n*e.length+10,height:c,textAlign:"center",fontFamily:l["SIYUAN_FONT_FAMILY"],rotate:360-this.project_data.rotate||0,color:"rgba(0,0,0,1)",fontWeight:a,fontStyle:"normal",vertical:0}};i&&(d.style.left=i/l["DPI"],d.style.top=s/l["DPI"]),u["a"].injectFontFamilies([{fontFamily:d.style.fontFamily,src:d.src}],"ownFontStyle"),this.$store.commit("editor-v2/insertDesignItem",d)},openLeftSidePanel(){this.$store.commit("editor-v2/set_left_side_show",!0),this.$route.query.id||this.$route.query.workOuterId?this.$store.commit("editor-v2/set_left_side_cur_menu_index",1):this.$store.commit("editor-v2/set_left_side_cur_menu_index",0)},fontMove(t,e,i){if(!this.project_data.id)return this.$message.info("请选择一个模板开始设计"),void this.openLeftSidePanel();if(0!==t.button)return!1;const s=document.getElementById("fontItem-"+e);if(!s)return;const n=s.getBoundingClientRect(),a=t.clientX,r=t.clientY;s.style.position="fixed",s.style.textAlign="center",s.style.left=n.x+"px",s.style.top=n.y+"px",s.style.zIndex=1e4;const o=window.getComputedStyle(s,null).getPropertyValue("line-height");s.style.lineHeight=o,document.onmousemove=t=>{const e=t.clientX-a,i=t.clientY-r;return s.style.left=n.x+e+"px",s.style.top=n.y+i+"px",!1},document.onmouseup=a=>{if(!Object(d["b"])(a,t,this.$refs.fontRef))return s.style.position="static",s.style.zIndex="auto",document.onmousemove=null,void(document.onmouseup=null);const r=s.getBoundingClientRect(),o=document.getElementById("svgContainer");if(!o)return;const c=o.getBoundingClientRect();let h=(r.x-c.x)/this.scale,u=(r.y-c.y)/this.scale;const p=r.width/this.scale,f=r.height/this.scale;[h,u]=Object(d["c"])(this.project_data.rotate,h,u,p,f,this.knife_data.totalX*l["DPI"],this.knife_data.totalY*l["DPI"]),Object(d["d"])(t,a)&&(h=(this.knife_data.totalX-0)*l["DPI"]/2,u=(this.knife_data.totalY-0)*l["DPI"]/2),this.titleClick(e,i,h,u),s.style.position="static",s.style.zIndex="auto",s.style.left=n.x+"px",s.style.top=n.y+"px",document.onmousemove=null,document.onmouseup=null}},async init(){this.listenGrain(),await this.getImgList()},listenGrain(){const t=document.getElementById("fontContent");t&&(t.onscroll=t=>{t.target.clientHeight+t.target.scrollTop===t.target.scrollHeight&&(this.query.currentPage+=1,this.queryCount>this.imgData.length&&this.getImgList())})},searchInput(t){this.query.keyword=t.target.value,this.query.currentPage=1},async getImgList(){1===this.query.currentPage?this.loading=!0:this.nextLoading=!0;const t=await this.$api.material.list(this.query),e=document.getElementById("thumbFontStyle");for(const i in t.data.data){let s=-1;if(e.sheet.rules.length>0)for(const n in e.sheet.rules)e.sheet.rules[n].cssText&&e.sheet.rules[n].cssText.indexOf(t.data.data[i].thumb_path)>-1&&(s=n);if(t.data.data[i].style="bxh-fm-"+t.data.data[i].id,-1===s){const s=`@font-face{font-family:"bxh-fm-${t.data.data[i].id}"; src:url("${t.data.data[i].thumb_path}")}`;e.appendChild(document.createTextNode(s))}}this.$forceUpdate(),t&&(1===this.query.currentPage?this.imgData=t.data.data:this.imgData=this.imgData.concat(t.data.data),this.queryCount=t.data.count),1===this.query.currentPage?this.loading=!1:this.nextLoading=!1}},beforeDestroy(){window.removeEventListener("resize",this._handeResize)}},f=p,m=(i("2b95"),i("2877")),g=Object(m["a"])(f,s,n,!1,null,null,null);e["default"]=g.exports},"52cd":function(t,e,i){t.exports=i.p+"editor-assets/img/table-right.48645cd4.svg"},"52ea":function(t,e,i){"use strict";i.r(e);i("ddb0");var s=i("750b"),n=i("ed08"),a=i("e856");i("fa26");const r=i("365f");e["default"]=Object(s["b"])({props:{images:{type:[Object,Array],default:()=>[]},frame:{type:String,default:""},width:{type:String,default:""},name:{type:String,default:""}},setup(t,e){const i=Object(s["j"])(null),o=Object(s["j"])(800),l=Object(s["j"])(500),c=Object(s["j"])(0),h=()=>{var i;o.value=t.width,l.value=null===(i=e.refs.banner)||void 0===i?void 0:i.$el.clientHeight};return Object(s["f"])(()=>{h()}),()=>Object(s["c"])("div",{class:"banner-container",style:{width:t.width}},[Object(s["c"])("a-carousel",{attrs:{arrows:!0,dotsClass:"slick-dots slick-thumb",dots:!1,infinite:!1},ref:"banner"},[[...t.images,""].map((e,n)=>2===n?Object(s["c"])("div",{class:"banner-item",attrs:{id:"frame"},directives:[{name:"show",value:2===n}]},[Object(s["c"])("iframe",{key:t.frame,attrs:{width:o.value,height:l.value,src:t.frame,frameborder:"0"}})]):Object(s["c"])("div",{class:"banner-item",key:e},[Object(s["c"])("transition",{attrs:{name:"fade"}},[i.value===n?Object(s["c"])("img",{class:"watch text-pointer",attrs:{src:r,alt:"",draggable:"false"}}):""]),Object(s["c"])("img",{attrs:{src:e,draggable:"false",alt:""}})]))]),Object(s["c"])("div",{class:"bn-bottom flex flex-center"},[Object(s["c"])("ul",{class:"dots-list mt-24 flex item-center"},[t.images.map((i,r)=>Object(s["c"])("li",{key:r,class:"item ml-20",on:{click:()=>{e.refs.banner.goTo(r),c.value=r}}},[Object(s["c"])(a["default"],{attrs:{src:Object(n["F"])(i,116,86,40,1===r?"|imageslim":""),active:c.value===r,alt:0===r?t.name:t.name+"展开图"}})])),Object(s["c"])("li",{class:"dot-item ml-20",on:{click:()=>{e.refs.banner.goTo(2),c.value=2}}},[Object(s["c"])(a["default"],{attrs:{src:Object(n["F"])(t.images[0],116,86,40,""),active:2===c.value,play:!0,alt:t.name+"3d图"}})])])])])}})},"533a":function(t,e,i){},5373:function(t,e,i){},"53ae":function(t,e,i){"use strict";var s=i("d17d"),n=i.n(s);n.a},"540c":function(t,e,i){},5481:function(t,e,i){},5482:function(t,e,i){"use strict";var s=i("cd2a"),n=i.n(s);n.a},"54ae":function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return s}));i("ddb0");class s{constructor(t={}){this.list=[],this.index=-1,this.maxSize=t.maxSize||20,this.isBackOrFore=!1,this.version=0,this.outside_version=0,this.inside_version=0}_insert(t){this.list=this.list.slice(0,this.index+1),this.list.push({_t:Date.now(),data:JSON.parse(JSON.stringify(t))}),this.index++,this.list.length>this.maxSize&&(this.list=this.list.slice(1),this.index=this.list.length-1)}size(){return this.list.length}_getCurNode(){return this.index>-1&&this.index<this.list.length?JSON.parse(JSON.stringify(this.list[this.index])):null}getCurData(){const t=this._getCurNode();return t?t.data:null}getCurTs(){const t=this._getCurNode();return t?t._t:0}_indexMove(t="back"){return new Promise((e,i)=>{let s=!1;const n=this.index,a=this.list.length,r=this.checkIsFirst(),o=this.checkIsLast();"back"===t?r?s="到头了，无法撤销":(this.isBackOrFore=!0,this.index--):o?s="到尾了，无法返回":(this.isBackOrFore=!0,this.index++),s?i(new Error(s)):e({index:n,size:a,cur:this.getCurData(),isBackOrFore:this.isBackOrFore,isFirst:r,isLast:o})})}indexBackMove(){return this._indexMove("back")}indexForeMove(){return this._indexMove("fore")}reset(){this.index=-1,this.list=[],this.isBackOrFore=!1,this.version=0,this.outside_version=0,this.inside_version=0}checkIsFirst(){return this.index<=0}checkIsLast(){return this.index>=this.list.length-1}_deepClone(t){return JSON.parse(JSON.stringify(t))}_cleanSpecialFields(t){return delete t._enable_local_history,[...t.design_data,...t.inside_design_data].forEach(t=>{delete t._selected,delete t._loaded}),t}_diff(t){const e=this._deepClone(t),i=this._deepClone(this.list[this.index].data),s=this._cleanSpecialFields(e),n=this._cleanSpecialFields(i),a={project:!1,outside:!1,inside:!1};return JSON.stringify(s)===JSON.stringify(n)||(a.project=!0,JSON.stringify(s.design_data)!==JSON.stringify(n.design_data)&&(a.outside=!0),JSON.stringify(s.inside_design_data)!==JSON.stringify(n.inside_design_data)&&(a.inside=!0)),a}record(t){return new Promise((e,i)=>{let s=!1;if(this.isBackOrFore)this.isBackOrFore=!1;else{let e={project:!1,outside:!1,inside:!1};e=-1===this.index?{project:!0,outside:!0,inside:!0}:this._diff(t),e.project&&(this._insert(t),this.version++,e.outside&&this.outside_version++,e.inside&&this.inside_version++,s=!0)}const n=this.index,a=this.list.length,r=this.checkIsFirst(),o=this.checkIsLast();e({index:n,inserted:s,size:a,isFirst:r,isLast:o})})}}},"54ca":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-modal",{attrs:{visible:t.visible,footer:null,width:560,closable:!1,zIndex:5e3,centered:!0}},[i("div",{staticClass:"main-body"},[i("span",{staticClass:"export-title"},[t._v("正在为您排队中，请稍候...")]),i("a-spin",{staticClass:"progress-bar"},[i("a-icon",{staticStyle:{"font-size":"48px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1),i("a-button",{staticClass:"cancel-button",on:{click:t.onCancel}},[t._v("取消")])],1)])],1)},n=[],a={model:{prop:"visible",event:"change"},props:{visible:{type:Boolean,default:!1}},methods:{onCancel(){this.$emit("change",!1),this.$emit("cancel")}}},r=a,o=(i("94d1"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,null,null);e["default"]=l.exports},"54f0":function(t,e,i){},"54f4":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var s=i("750b"),n=Object(s["b"])({props:{titleAccess:String,htmlColor:String,viewBox:String},setup(t,e){return()=>Object(s["c"])("svg",{attrs:{focusable:"false",viewBox:t.viewBox,color:t.htmlColor,"aria-hidden":!t.titleAccess||void 0,xmlns:"http://www.w3.org/2000/svg"}},[t.titleAccess?Object(s["c"])("title",[t.titleAccess]):null,e.slots.default()])}})},5537:function(t,e,i){},"554f":function(t,e,i){},"55c2":function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("4e90"),a=i("66ed");i("c825c");e["default"]=Object(s["b"])({props:{size:{type:Number,default:40},active:{type:Boolean,default:!1},tip:{type:String,default:""},stateAble:{type:Boolean,default:!1},menus:{type:[Object,Array],default:()=>[]},slideTitle:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},slideValue:{type:Number,default:4},slider:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},color:{type:String,default:"rgba(0,0,0,.04)"}},setup(t,e){const i=Object(s["j"])(!1),r=Object(s["j"])(!1),o=Object(s["j"])(!1),l=Object(s["j"])(!1),c=Object(s["a"])(()=>`width: ${t.size}px; height: ${t.size}px;`),h=Object(s["a"])(()=>`background: ${t.color};`);Object(s["k"])(()=>{t.stateAble||(r.value=t.active)});const d={functional:!0,render:s=>{var n,a;return s("div",{class:"box-button text-pointer flex flex-center item-center"+(t.disabled?" box-button--disabled":""),style:c.value+""+(r.value?h.value:""),on:{click:()=>{if(t.disabled)return o.value=!1,void(i.value=!1);t.menus.length?(o.value=!1,i.value=!0):t.slider&&(o.value=!1,l.value=!0)}}},[null===(n=(a=e.slots).default)||void 0===n?void 0:n.call(a)])}};return()=>Object(s["c"])("a-tooltip",{attrs:{placement:"top",visible:o.value},on:{visibleChange:t=>{i.value||(o.value=t)}}},[Object(s["c"])("template",{slot:"title"},[Object(s["c"])("span",[t.tip])]),t.slider?Object(s["c"])(a["default"],{attrs:{min:t.min,max:t.max,step:t.step,value:t.slideValue,title:t.slideTitle,visible:l.value},on:{change:t=>{e.emit("slideChange",t)},visibleChange:e=>{t.slider&&!t.disabled&&(l.value=e)}}},[Object(s["c"])(d)]):Object(s["c"])("a-popover",{class:"select-popover",attrs:{trigger:"click",overlayClassName:"box-button",visible:i.value},on:{visibleChange:e=>{t.menus.length&&!t.disabled&&(i.value=e)}}},[Object(s["c"])("template",{slot:"content"},[Object(s["c"])(n["a"],{attrs:{menus:t.menus||[]},on:{change:t=>{e.emit("menuChange",t)}}})]),Object(s["c"])(d)])])}})},"55eb":function(t,e,i){t.exports=i.p+"editor-assets/img/vid.6282cf6f.svg"},5612:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("img",{staticClass:"image-wrap",style:{opacity:""+(t.isBg?.3:1),left:t.data.bg.x+"mm",top:t.data.bg.y+"mm",width:t.data.bg.width+"mm",height:t.data.bg.height+"mm"},attrs:{src:t.data.src}})},n=[],a={props:{data:{required:!0,type:Object,default:()=>({})},isBg:{type:Boolean,default:!1}}},r=a,o=(i("a26d"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"3a60e8d1",null);e["default"]=l.exports},5651:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-spin",{attrs:{spinning:t.createLoading}},[t.$root.modeReady?i("div",{staticClass:"editor-container",style:{filter:t.showHistory?"blur(20px)":"none"},on:{contextmenu:function(t){t.preventDefault(),t.stopPropagation()}}},[i("editor-header",{on:{update:function(e){return t.saveFullTemplate({projectData:t.$root.projectData,isAuto:!1,knifeData:t.$root.knifeData})},updateHistoryShow:function(e){t.showHistory=e}}}),i("div",{staticClass:"flex flex-between editor-body"},[i("div",{staticClass:"flex flex-start editor-left",on:{mouseleave:function(e){!t.keepPin&&t.$store.commit("menu/setMenuVisible",!1)}}},[i("left-side-menu"),i("left-side-panel")],1),i("div",{staticClass:"w-100"},[i("editor-content",{attrs:{drawer:{rightDrawerOpen:t.rightDrawerOpen}}})],1),i("div",{staticClass:"flex flex-end editor-right"},[i("right-mode-panel",{ref:"rightModePanelRef",model:{value:t.rightDrawerOpen,callback:function(e){t.rightDrawerOpen=e},expression:"rightDrawerOpen"}}),i("handle-panel",{model:{value:t.handlePanelOpen,callback:function(e){t.handlePanelOpen=e},expression:"handlePanelOpen"}})],1),i("context-menu",{ref:"contextMenuRef",staticStyle:{"z-index":"1000"}})],1)],1):t._e(),i("history",{model:{value:t.showHistory,callback:function(e){t.showHistory=e},expression:"showHistory"}}),i("psd-modal",{ref:"psdModalRef"}),i("vip-paste-modal"),i("paste-modal"),i("detect-chrome-modal",{attrs:{show:t.show_dialog_checkchrome},on:{close:t.closeDialog}}),i("devtool")],1)},n=[],a=(i("466d"),i("5319"),i("ddb0"),i("5530")),r=i("6116");function o(t){const e=new Date(t),i=e.getFullYear(),s=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate();return i+"-"+s+"-"+n}var l=i("60bb"),c=i.n(l),h=i("9cd7"),d=i("6339"),u=i("4667"),p=i("8fb2"),f=i("7f87"),m=i("5254"),g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-modal",{attrs:{title:"导入psd文件",visible:t.visible,width:720,footer:null},on:{cancel:t.handleCancel,ok:t.handleOk}},[s("div",{staticClass:"main-box"},[s("div",{staticClass:"svg-area",staticStyle:{visibility:"hidden",position:"absolute"}},[s("div",{attrs:{id:"svg-box"}}),s("div",{attrs:{id:"result-view-box"}}),s("div",{attrs:{id:"svg-items-box"}})]),"initial"==t.status?s("div",{staticClass:"flex"},[s("div",{staticClass:"upload-box dashed-box",staticStyle:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},[s("div",{style:{backgroundImage:"url("+i("5606")+")",backgroundSize:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"60px",height:"60px",marginTop:"6px"},on:{drop:function(e){return e.preventDefault(),t.handleFile()},dragover:function(t){t.preventDefault()},dragenter:function(t){t.preventDefault()}}}),s("div",{staticStyle:{margin:"20px",color:"rgba(0,0,0,0.45)"}},[t._v("将文件拖拽到此处，或者")]),s("a-button",{staticStyle:{width:"120px"},on:{click:function(e){return t.$refs.fileRef.click()}}},[t._v("上传文件")]),s("input",{ref:"fileRef",staticStyle:{display:"none"},attrs:{type:"file",accept:".psd"},on:{change:t.handleFile}})],1),s("div",{staticClass:"upload-sidebar"},[s("h2",[t._v("psd格式要求")]),s("ul",[s("li",[t._v("·请将图层样式与蒙版图层栅格化")]),s("li",[t._v("·图像分辨率设置为300dpi")]),s("li",[t._v("·文件大小不超过100M")])]),s("div",{staticClass:"tips"},[s("a",{attrs:{href:"https://yun.baoxiaohe.com/static/36.psd"}},[t._v("示例psd")]),s("a",{attrs:{href:"#"}},[t._v("了解更多")])])])]):"loading"===t.status?s("div",{staticClass:"flex"},[s("div",{staticClass:"loading-box dashed-box",staticStyle:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},["psd"===t.currentExt?s("div",{staticClass:"loading-icon",style:{backgroundImage:"url("+i("5606")}}):s("div",{staticClass:"loading-icon",style:{backgroundImage:"url("+i("e3e4")+")"}}),s("div",{staticStyle:{margin:"20px",color:"rgba(0,0,0,0.65)"}},[t._v(" 正在导入文档 ")]),s("a-progress",{staticStyle:{width:"216px",margin:"0 0 20px 0"},attrs:{percent:50*(t.parseProgress/3+2*t.uploadProgress/3),showInfo:!1,strokeColor:"#ff6634"}}),s("a-button",{staticStyle:{width:"120px"},on:{click:function(e){return t.confirmCancel()}}},[t._v("取消导入")])],1)]):"fonts"===t.status?s("div",[s("div",{staticClass:"fonts-box dashed-box",staticStyle:{display:"relative"}},[s("p",[t._v("未识别的字体名")]),s("font-choice",{staticStyle:{"margin-bottom":"72px"},attrs:{fonts:t.fonts},on:{replace:t.replaceFont}}),s("a-button",{staticStyle:{position:"absolute",bottom:"32px",left:"50%",transform:"translate(-50%, 0)"},attrs:{type:"primary"},on:{click:function(e){return t.replaceMissingFonts()}}},[t._v(" 继续导入 ")])],1)]):"succeeded"===t.status?s("div",{staticClass:"flex"},[s("div",{staticClass:"loading-box dashed-box",staticStyle:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},[s("div",{staticClass:"loading-icon",style:{backgroundImage:"url("+i("5163")+")"}}),s("div",{staticStyle:{margin:"20px",color:"rgba(0,0,0,0.65)"}},[t._v("文件导入成功")]),s("a-button",{staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:function(e){return t.show()}}},[t._v("继续上传")])],1)]):t._e()])])],1)},v=[],b=(i("1276"),i("054f")),y=i("c64e"),_=i.n(y),x=(i("e40b"),i("5880")),w=i("fe94"),C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-table",{attrs:{columns:t.columns,"data-source":t.dataSource,pagination:!1,size:"middle","show-header":!1,bordered:!1},scopedSlots:t._u([{key:"column1",fn:function(e){return[i("span",{staticClass:"general-text"},[t._v(t._s(e))])]}},{key:"column3",fn:function(e){return[i("font-menu",{attrs:{placement:"left","node-type":"text",value:t.defaultFont},on:{change:function(i){var s=arguments.length,n=Array(s);while(s--)n[s]=arguments[s];return t.replaceFont.apply(void 0,[e.fontName].concat(n))}}})]}}])},[i("template",{slot:"column2"},[i("span",{staticClass:"small-text"},[t._v("可能是")])])],2)],1)},k=[],S=i("ab68"),A=i("da71"),O={components:{FontMenu:S["default"]},props:{fonts:{type:Array,default:[]}},data(){return{defaultFont:A["SIYUAN_FONT_ID"],columns:[{title:"",dataIndex:"fontName",key:"fontName",width:200,scopedSlots:{customRender:"column1"}},{title:"",key:"name",scopedSlots:{customRender:"column2"},width:200},{title:"",key:"choices",scopedSlots:{customRender:"column3"}}]}},methods:{replaceFont(t,e){this.$emit("replace",{fontName:t,newDesign:e})}},computed:{dataSource(){return this.fonts.map((t,e)=>({fontName:t,key:e}))}}},j=O,M=(i("d43b"),i("2877")),I=Object(M["a"])(j,C,k,!1,null,"b8afb916",null),T=I.exports,E=i("365c"),D=i("a3ba"),L=i("5e09"),P={components:{FontChoice:T},mixins:[D["a"],L["a"]],data(){return{visible:!1,status:"initial",parseProgress:0,uploadProgress:0,cancelLoading:!1,fonts:[],designs:[],currentExt:"psd",fontTable:{}}},computed:Object(a["a"])({},Object(x["mapState"])(["isInside"])),methods:{cleanUp(){this.cleanUpPSD(),this.cleanUpPDF()},show(){this.uploadProgress=0,this.parseProgress=0,this.cancelLoading=!0,this.status="initial",this.visible=!0,this.fontTable={},this.designs=[]},handleCancel(){this.visible=!1},handleOk(){this.visible=!1},gotoInitial(){this.show()},gotoLoading(){this.status="loading"},gotoFonts(){this.status="fonts"},gotoSucceeded(){this.designs=this.designs.filter(t=>!!t.src),this.isInside?this.$root.projectData.insideDesignData.push(...this.designs):this.$root.projectData.designData.push(...this.designs),this.$store.dispatch("editor/saveTargetDesigns",this.designs),this.status="succeeded"},async handleFile(t){let e=null;this.cancelLoading=!1,e="change"==t.type?t.target.files[0]:t.dataTransfer.files[0];const i=e.name.split(".");this.currentExt=i[i.length-1],e&&("psd"===this.currentExt&&e.size>A["MAX_PSD_FILE_SIZE"]?this.$message.error(`文件不得超过${Math.round(A["MAX_PSD_FILE_SIZE"]/1024/1024)}MB`):["pdf","ai"].includes(this.currentExt)&&e.size>A["MAX_PDF_FILE_SIZE"]?this.$message.error(`文件不得超过${Math.round(A["MAX_PDF_FILE_SIZE"]/1024/1024)}MB`):(this.gotoLoading(),"psd"===this.currentExt?this.handlePSD(t,e):this.handlePDF(e)))},async parseExistingFonts(){const t=this.designs.map(t=>"font"===t.type&&t.example).filter(t=>!!t);if(t.length>0){const e=await this.$api2.getNotExistFonts({fonts:[...new Set(t)].join(",")});if(e.data.exists)for(const t of e.data.exists)for(const e of this.designs)t.font_name===e.example&&(e.src=t.file_path,e.id=t.id,e.example=t.font_name,e.style.fontFamily="f"+t.id);return e.data.notExist||[]}return[]},replaceFont(t){this.fontTable[t.fontName]=t.newDesign},replaceMissingFonts(){for(const t of this.designs)if("font"===t.type)if(this.fontTable[t.example]){const e=this.fontTable[t.example];t.id=e.id,t.src=e.file_path,t.example=e.example,t.style.fontFamily="f"+e.id}else t.src||(t.id=E["SIYUAN_FONT_ID"],t.src=E["SIYUAN_FONT"],t.example="思源黑体-常规",t.style.fontFamily=E["SIYUAN_FONT_FAMILY"]);this.gotoSucceeded()},confirmCancel(){this.$confirm({title:"取消导入",content:"",okText:"确认",cancelText:"取消",onOk:()=>{this.cleanUp(),this.show()}})},async uploadImages(t){const e=this.designs.length;let i=0;for(const s of this.designs){if(this.cancelLoading)return this.gotoInitial(),[];if("img"===s.type){let e=null,i=null;if("png"===t){const t=this.toCanvas(s.raw);i=_()()+".png",e=Object(r["d"])(t.toDataURL("image/png")),e.name=i}else i=_()()+".svg",e=new Blob([s.raw.data],{type:"image/svg+xml"}),e.name=i;delete s.raw;const n=await b["a"].putFile(e,{xapi:"user-materials",rename:i,type:"psd-image",saveToServer:!1});n.data&&(s.src=n.data.url)}i++,this.uploadProgress=i/e}},resizeLayers(t,e,i){const s=1;let n=1,a=1;e>Object(w["a"])(this.$root.knifeData.totalX).mm2px()*s&&(n=Object(w["a"])(this.$root.knifeData.totalX).mm2px()*s/e),i>Object(w["a"])(this.$root.knifeData.totalY).mm2px()*s&&(a=Object(w["a"])(this.$root.knifeData.totalY).mm2px()*s/i);const r=Math.min(n,a);return 1===r||t.map(t=>{let e=[];"font"===t.type?e=["fontWeight","fontSize","top","left","width","height","lineHeight"]:"img"===t.type&&(e=["top","left","width","height"]);for(const i of e)t.style[i]&&(t.style[i]=t.style[i]*r);"img"===t.type&&["width","height"].forEach(e=>{t.bg&&(t.bg[e]=t.style[e])})}),t}}},R=P,z=(i("7113"),Object(M["a"])(R,g,v,!1,null,"581be584",null)),N=z.exports,B=i("9f1f"),F=i("6468"),$=i("ee5b"),U=i("87a0"),H=i("ed08"),V=i("e60e"),G=i("26a1"),W=i("5e9f"),Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("vue-context",{ref:"menu",staticClass:"no-select",attrs:{subMenuOffset:-4},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.data;return[n?[t._l(t.menus,(function(e,i){return["general"!=e.menuType||e.subMenus?"general"==e.menuType&&e.subMenus?s("li",{key:i,staticClass:"v-context__sub"},[s("a",{class:{disabled:e.disabled}},[e.icon?s("img",{staticClass:"icon",attrs:{src:e.icon,alt:""}}):t._e(),s("span",[t._v(t._s(e.label))])]),s("ul",{staticClass:"v-context-sub"},t._l(e.subMenus,(function(e,i){return s("li",{key:i,on:{click:function(i){return t.handleClick(e)}}},[s("a",{class:{disabled:e.disabled}},[e.icon?s("img",{staticClass:"icon",attrs:{src:e.icon,alt:""}}):t._e(),s("span",[t._v(t._s(e.label))]),e.shortcut?s("span",{staticClass:"shortcut"},[t._v(t._s(e.shortcut))]):t._e()])])})),0)]):"divider"===e.menuType?s("div",{key:i,staticClass:"divider"}):"label"===e.menuType?s("span",{key:i,staticClass:"sub-text"},[t._v(t._s(e.label))]):t._e():s("li",{key:i,on:{click:function(i){return t.handleClick(e)}}},[s("a",{class:{disabled:e.disabled}},[e.icon?s("img",{staticClass:"icon",attrs:{src:e.icon,alt:""}}):t._e(),e.bigIcon?s("div",{staticClass:"icon",staticStyle:{"font-size":"16px"},style:{backgroundImage:"url("+e.bigIcon+")"}}):t._e(),e.bigIconText?s("div",[t._v("Aa")]):t._e(),s("span",{class:e.textClass||""},[t._v(t._s(e.label))]),e.shortcut?s("span",{staticClass:"shortcut"},[t._v(t._s(e.shortcut))]):t._e()])])]})),t.showExtraMenus&&t.potentialDesigns.length>0?s("div",{staticClass:"layers"},[s("div",{staticClass:"divider"}),s("span",{staticClass:"sub-text"},[t._v(" 选择重叠的图层： ")]),t._l(t.potentialDesigns,(function(e){return s("li",{key:e.uuid,on:{click:function(i){return t.handleClickPotentialDesign(e)}}},["img"===e.type?s("a",[s("div",[e.src.endsWith("svg")&&e.can_set_color?s("div",{staticClass:"icon",style:{backgroundImage:"url("+t.imageThumbs[e.uuid]+")"}}):s("div",{staticClass:"icon",style:{backgroundImage:"url("+e.src+")"}}),s("div",{staticClass:"detail"},[t._v("图片")])])]):t._e(),"font"===e.type?s("a",[s("div",{staticClass:"icon"},[t._v("Aa")]),s("div",{staticClass:"detail",domProps:{innerHTML:t._s(e.value)}})]):t._e(),"barcode"===e.type?s("a",[s("div",{staticClass:"icon"},[s("img",{attrs:{src:i("9098")}})]),s("div",{staticClass:"detail"},[t._v("条形码")])]):t._e(),"qrcode"===e.type?s("a",[s("div",{staticClass:"icon",staticStyle:{"font-size":"16px"}},[s("img",{attrs:{src:i("8a83")}})]),s("div",{staticClass:"detail"},[t._v("二维码")])]):t._e(),"table"===e.type?s("a",[s("div",{staticClass:"icon"},[s("img",{attrs:{src:i("52cd")}})]),s("div",{staticClass:"detail"},[t._v("表格")])]):"group"===e.type?s("a",[s("div",{staticClass:"icon"},[s("a-icon",{attrs:{type:"folder"}})],1),s("div",{staticClass:"detail"},[t._v("组合")])]):t._e()])}))],2):t._e()]:t._e()]}}])})],1)},q=[],X=i("899b"),Q=i("3063"),Z=i("f168"),K={mixins:[Z["a"]],data(){return{design:null,imageThumbs:{},hotKey:Q["a"].isMacOs?"⌘":"Ctrl",menus:[],showExtraMenus:!1}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(x["mapState"])("editor",["potentialDesigns"])),Object(x["mapState"])(["isInside"])),Object(x["mapState"])("table",["rows","columns","editable","selected"])),{},{designs(){return this.isInside?this.$root.projectData.insideDesignData:this.$root.projectData.designData},isTable(){var t;return"table"===(null===(t=this.design)||void 0===t?void 0:t.type)},disableColumns(){return!this.columns.find(t=>t.focus)},disableRows(){return!this.rows.find(t=>t.focus)},disableMerge(){return this.selected.length<=1||!!this.selected.find(([t,e])=>this.design.table.cells[t][e].merge)},disableSplit(){if(1!==this.selected.length)return!0;const[[t,e]]=this.selected;return!this.design.table.cells[t][e].merge},disable(){return t=>"delete"===t.action&&1===this["row"===t.type?"rows":"columns"].length||("merge"===t.type?this.disableMerge:"split"===t.type?this.disableSplit:("row"===t.type||"column"===t.type)&&("row"===t.type?this.disableRows:this.disableColumns))}}),components:{VueContext:X["a"]},methods:{handleClickPotentialDesign(t){this.$store.dispatch("editor/saveTargetDesigns",[t]);const e=document.getElementById("editorContentPanel");e.focus()},show(t,e){this.design=e,this.design?this.isTable&&this.editable?(this.showExtraMenus=!1,this.menus=[{menuType:"general",actionGroup:"table",label:(this.disableSplit?"合并":"拆分")+"单元格",type:this.disableSplit?"merge":"split",action:this.disableSplit?"merge":"split",disabled:this.disableSplit&&this.disableMerge,icon:i("7e01")},{menuType:"divider"},{menuType:"general",actionGroup:"table",label:"向上插入行",type:"row",action:"decrease",disabled:this.disableRows},{menuType:"general",actionGroup:"table",label:"向下插入行",type:"row",action:"increase",disabled:this.disableRows},{menuType:"general",actionGroup:"table",label:"向左插入列",type:"column",action:"decrease",disabled:this.disableColumns},{menuType:"general",actionGroup:"table",label:"向右插入列",type:"column",action:"increase",disabled:this.disableColumns},{menuType:"divider"},{menuType:"general",actionGroup:"table",label:"删除行",type:"row",action:"delete",disabled:this.disableRows},{menuType:"general",actionGroup:"table",label:"删除列",type:"column",action:"delete",disabled:this.disableColumns}]):(this.showExtraMenus=!0,this.menus=[{label:"复制",icon:i("2384"),shortcut:this.hotKey+" + C",action:U["a"].COPY,actionGroup:"shortcut",menuType:"general"},{label:"粘贴",icon:i("fb09"),shortcut:this.hotKey+" + V",action:U["a"].PASTE,actionParams:{followMouse:!0},actionGroup:"shortcut",menuType:"general"},{label:"剪切",icon:i("e345"),shortcut:this.hotKey+" + X ",action:U["a"].CUT,actionGroup:"shortcut",menuType:"general"},{label:this.design.locked?"解锁":"锁定",icon:this.design.locked?i("4028"):i("be18"),shortcut:this.hotKey+" + L",action:this.design.locked?U["a"].UNLOCK:U["a"].LOCK,actionGroup:"shortcut",menuType:"general"},{menuType:"divider"},{label:"图层顺序",icon:i("f3a4"),menuType:"general",subMenus:[{label:"移到顶层",actionGroup:"shortcut",action:U["a"].TOP,disabled:this.designs[this.designs.length-1].uuid===this.design.uuid},{label:"上移一层",actionGroup:"shortcut",action:U["a"].MOVE_UP},{label:"下移一层",actionGroup:"shortcut",action:U["a"].MOVE_DOWN},{label:"移到底层",actionGroup:"shortcut",action:U["a"].DOWN,disabled:this.designs[0].uuid===this.design.uuid}]}]):this.menus=[{label:"粘贴",icon:i("fb09"),shortcut:this.hotKey+" + V",actionParams:{followMouse:!0},action:U["a"].PASTE,actionGroup:"shortcut",menuType:"general"}],this.$refs.menu.open(t,{design:this.design,actions:U["a"]})},handleClick(t){if("shortcut"===t.actionGroup)this.$bus.$emit("shortcut",Object(a["a"])({action:t.action},t.actionParams||{}));else if("table"===t.actionGroup){if(this.disable(t))return;const e=this["row"===t.type?"rows":"columns"].findIndex(t=>t.focus);this.$bus.$emit("table-event"+this.design.uuid,{index:e,target:t})}}},watch:{potentialDesigns(t){this.potentialDesigns.map(t=>{if("img"===t.type&&t.can_set_color){const e=document.querySelector(".imageNode_"+t.uuid);if(e){const i="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(e.outerHTML)));this.imageThumbs[t.uuid]=i}}})}}},J=K,tt=(i("a778"),Object(M["a"])(J,Y,q,!1,null,"fbe08aa6",null)),et=tt.exports,it=i("8c66"),st={components:{editorHeader:h["default"],leftSideMenu:d["default"],leftSidePanel:u["default"],rightModePanel:p["default"],editorContent:m["default"],handlePanel:f["default"],history:V["default"],PsdModal:N,VipPasteModal:B["default"],detectChromeModal:$["default"],PasteModal:F["default"],ContextMenu:et,devtool:it["default"]},data(){return{rightDrawerOpen:!0,handlePanelOpen:!0,project_id:"",workOuterId:"",project:{},changes:[],updateTime:null,timeout:null,createLoading:!1,routeType:"",showHistory:!1,show_dialog_checkchrome:!1}},created(){this.$store.dispatch("menu/fetchKeepPin")},mounted(){this.initProject(),this.fetchCrafts(),this.$bus.$on("show-design-menu",t=>{this.$refs.contextMenuRef.show(t.event,t.design)}),this.$bus.$on("show-psd-modal",()=>{this.$refs.psdModalRef.show()}),window.addEventListener("paste",this.listenSystemClipboard),this.checkChrome()},watch:{forceCreate(t){t&&(this.updateInterval(),this.$store.commit("setForceCreate",!1))},editIndex(){const t=[...this.$root.projectData.designData,...this.$root.projectData.insideDesignData];this.parseModifiedColors(t);const e=[];if(!this.currentWorkingGroup||!this.targetDesign||this.currentWorkingGroup.uuid==this.targetDesign.uuid){for(const i of this.targetDesigns){const s=this.nestedLookupDesigns(t,i);s&&e.push(s)}this.saveTargetDesigns(e)}},projectVersion(){const t=JSON.parse(this.previousProjectData||"null"),e=this.$root.projectData;if(!t)return void this[U["f"]](JSON.stringify(e));const i=Object(H["i"])(e,t);i&&0!==i.length&&(this[U["f"]](JSON.stringify(e)),this[U["I"]](i),this.$route.query.type&&"preview"===this.$route.query.type&&this.$store.state.changeTarget.length>0&&!this.createLoading&&this.$store.dispatch("saveForceCreate",this))}},beforeDestroy(){W["a"].clear(),this.$root.modeReady=!1,this.timeout&&(clearInterval(this.timeout),this.timeout=null),this.$bus.$off("show-design-menu"),this.$bus.$off("show-psd-modal"),window.removeEventListener("paste",this.listenSystemClipboard)},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(x["mapState"])(["editIndex","tubeVisible","scale","updateMaterial","updateProject","saveQueue","queries","tubePosition","projectVersion","forceCreate"])),Object(x["mapState"])("menu",["keepPin"])),Object(x["mapState"])("editor",["targetDesigns","currentWorkingGroup","targetDesign"])),Object(x["mapGetters"])(["previousProjectData","getForceCreate"])),{},{cLeft(){return this.tubePosition.left||0},cTop(){return this.tubePosition.top||0},canvasStyle(){return{position:"fixed",left:this.cLeft+"px",top:this.cTop+"px",zIndex:500}}}),methods:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(x["mapActions"])("project",["setData"])),Object(x["mapActions"])(["saveFullTemplate","saveEditType"])),Object(x["mapActions"])("property",["fetchCrafts"])),Object(x["mapActions"])("service",["shallWeTalk"])),Object(x["mapMutations"])([U["K"],U["I"],U["f"]])),Object(x["mapActions"])("editor",["saveTargetDesigns"])),{},{initProject(){this.routeType=this.$route.query.type||"",this.project_id=this.$route.query.id||"",this.workOuterId=this.$route.query.workOuterId||"",this.getProjectInfo(),""===this.routeType&&this.updateInterval(),this.$store.dispatch("saveEditType",this.routeType)},closeDialog(t){t&&localStorage.setItem("dialog.checkchrome.closeforever",!0),this.show_dialog_checkchrome=!1},checkChrome(){if(r["t"].isChrome||localStorage.getItem("dialog.checkchrome.closeforever"))return;const t=localStorage.getItem("dialog.checkchrome.lasttime"),e=o(new Date);(!t||e>t)&&(localStorage.setItem("dialog.checkchrome.lasttime",e),this.show_dialog_checkchrome=!0)},async listenSystemClipboard(t){if(!t||!t.clipboardData)return;const{items:e}=t.clipboardData;let i;for(let h=0;h<e.length;h++){const t=e[h];if(i)break;t.type.indexOf("image")>-1&&(i=t.getAsFile())}if(!i)return;const s=i.name,n=s.match(/(\.\w+)$/),a=n&&n.length>=2&&n[1],r=_()()+a,o=await b["a"].putFile(i,{xapi:"user-materials",rename:r,type:"image"});if(0!==o.errno)return;b["a"].removeStorage(),this.$bus.$emit("refreshMatierialFileList"),this.$store.dispatch("menu/saveCurrentMenuIndex",4);const l=o.data.url,c=new Image;c.src=l,c.complete?this._buildImageDesignAndPush(l,c):c.onload=()=>{this._buildImageDesignAndPush(l,c)}},_buildImageDesignAndPush(t,e){const i={type:"img",src:t,uuid:_()(),can_set_color:0,style:{position:"absolute",top:50,left:100,rotate:360,opacity:100,width:100,height:100}},{width:s,height:n}=e,a=Math.max(s/124,n/124,1);i.style.width=Math.ceil(s/a),i.style.height=Math.ceil(n/a),this.$store.dispatch("editor/setEditorTempMaterial",i)},updateInterval(){this.timeout&&clearTimeout(this.timeout),this.timeout=setInterval(()=>{"update"!==this.routeType&&"contribute"!==this.routeType&&this.saveFullTemplate({projectData:this.$root.projectData,knifeData:this.$root.knifeData})},E["UPDATE_TIME_OUT"])},handleUpdate(){"number"===typeof this.updateTime&&clearInterval(this.updateTime),this.updateProject(this.project)},_filterResponseBody(t){t=t||{};const e={inside_design_data:"[]",design_data:"[]",inside_face_background:"{}",face_background:"{}",line_guides:"[]"};for(const s in e){const i=c.a.camelCase(s),n=t[s]||e[s];t[i]="string"===typeof n?JSON.parse(n):n,delete t[s]}t.designData=t.designData.filter(t=>t.type),t.insideDesignData=t.insideDesignData.filter(t=>t.type),t.size_type||(t.size_type="id"),"{}"===t.color_hostory&&(t.color_hostory="[]");const i=t.color_hostory||"[]";return t.colorHistory="string"===typeof i?JSON.parse(i):i,[...t.designData,...t.insideDesignData].forEach(t=>{this._filter_design(t),"group"===t.type&&t.designs.forEach(t=>{this._filter_design(t)})}),t.rotate=t.rotate||0,t.totalRotate=t.rotate||0,t.project_id=t.id,t},_filter_design(t){if("font"===t.type){t.value=(t.value||"").replace(/<div>/g,""),t.value=t.value.replace(/<\/div>/g,"\n"),void 0===t.style.vertical&&(t.style.vertical=0);const{fontSize:e}=t.style;t.style.lineHeight<e&&(t.style.lineHeight=1.2*e),0==t.style.vertical?t.style.height<e&&(t.style.height=1.2*e):t.style.width<e&&(t.style.width=1.2*e)}else"img"===t.type&&(t.bg||(t.bg={x:0,y:0,width:t.style.width,height:t.style.height}))},getProjectInfo(){const t={type:this.$route.query.type};this.project_id&&(t.id=this.project_id),this.workOuterId&&(t.workOuterId=this.workOuterId),this.$api.project.info(t).then(async t=>{if(!t)return this.$message.error("项目不存在或者您没有访问权限"),void this.$router.push({path:"/"});let e=t.data;e=this._filterResponseBody(t.data),await this.getKnifes(e.bleedline),e.designData.map(t=>{Object(G["a"])(t,this.$root.knifeData.totalX,this.$root.knifeData.totalY)}),e.insideDesignData.map(t=>{Object(G["a"])(t,this.$root.knifeData.totalX,this.$root.knifeData.totalY)}),this.$root.projectData=Object(H["L"])(e),this.setData(this.$root.projectData),this.$store.commit("editor/receiveProjectData",this.$root.projectData),this.$root.modeReady=!0,this.$store.commit("render/setOutsideMaterialPending",e.designData.map(t=>t.uuid)),this.$store.commit("render/setInsideMaterialPending",e.insideDesignData.map(t=>t.uuid)),this.$store.commit("increaseProjectVersion")})},getKnifes(t){let e={id:this.project_id,bleed:t,export_type:"project"};return this.$route.query.mid?e={id:this.$route.query.mid,bleed:t,export_type:"template"}:this.$route.query.workOuterId&&(e={workOuterId:this.$route.query.workOuterId,bleed:t,export_type:"userWork"}),this.$api.project.knifes(e).then(t=>{if(t){const e=t.data;this.$root.knifeData=Object(H["f"])(e)}})},parseModifiedColors(t){for(const e of t){if("group"===e.type){this.parseModifiedColors(e.designs);continue}const t=(e.fills||[]).filter(t=>"none"!==t.color&&!~t.color.indexOf("url")),i=!W["a"].compare(e.uuid,t);i&&this.$store.commit("editor/addToUuidTable",e.uuid)}},nestedLookupDesigns(t,e){for(const i of t){if(i.uuid===e.uuid)return i;if("group"===i.type){const t=this.nestedLookupDesigns(i.designs,e);if(t)return t}}return null}})},nt=st,at=(i("9890"),Object(M["a"])(nt,s,n,!1,null,null,null));e["default"]=at.exports},5670:function(t,e,i){t.exports=i.p+"editor-assets/img/e2-active.40cb5d3f.svg"},"568c":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"editor-container",style:{width:t.$root.knifeData.totalX+100+"mm",height:t.$root.knifeData.totalY+100+"mm"}},[t.$root.modeReady?i("background",{attrs:{scale:t.scale,bleed:t.bleed,"def-color":t.defColor,fillBack:t.fillBack,active:t.active},on:{"face-click":t.faceClick}}):t._e(),t.$root.modeReady?i("foreground",{staticStyle:{"z-index":"3"},attrs:{scale:t.scale,bleed:t.bleed,"def-color":t.defColor,fillBack:t.fillBack,active:t.active}}):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.showAxiasRemark,expression:"!showAxiasRemark"}],staticClass:"editor-elements",staticStyle:{"z-index":"3"}},[t._l(t.materials,(function(e,s){return i("drag-svg",{directives:[{name:"show",rawName:"v-show",value:0===t.isInside,expression:"isInside === 0"}],key:e.uuid,ref:e.uuid+"Ref",refInFor:!0,style:{transform:t.globalTransform},attrs:{tdata:e,materials:t.materials,flag:s,lines:t.$root.projectData.lineGuides}})})),t._l(t.inside_materials,(function(e,s){return i("drag-svg",{directives:[{name:"show",rawName:"v-show",value:1===t.isInside,expression:"isInside === 1"}],key:e.uuid+"1",ref:e.uuid+"Ref",refInFor:!0,style:{transform:t.globalTransform},attrs:{tdata:e,materials:t.inside_materials,flag:s,lines:t.$root.projectData.lineGuides}})}))],2),t.withGroup?t._e():i("div",{staticClass:"editor-control"},[i("temp-group-control",{ref:"groupControlRef"})],1),i("div",{staticClass:"highlines-wrap",style:{transform:"scale("+1/t.scale+","+1/t.scale+") translate("+50*t.scale+"mm, "+50*t.scale+"mm)"}},[i("highlines")],1),i("div",{staticClass:"editor-tips avoid-clicks",style:{transform:"scale("+1/t.scale+","+1/t.scale+")\n      translate("+50*t.scale+"mm, "+50*t.scale+"mm)"}},[t.showPositionTip?i("div",[t.targetDesign?i("div",{staticClass:"svg-text-tag",style:{position:"absolute",width:"80px",left:(t.targetDesign.style.left-t.origin.x)*t.scale-25+"mm",top:(t.targetDesign.style.top-t.origin.y)*t.scale+"mm",transform:"rotate(-"+t.$root.projectData.totalRotate+"deg",height:"20px",lineHeight:"20px",fontSize:"12px",zIndex:999,borderRadius:3/t.scale+"px"}},[t._v(" "+t._s(Math.round(t.targetDesign.style.left-t.origin.x))+" , "+t._s(Math.round(t.targetDesign.style.top-t.origin.y))+" ")]):i("div",{staticClass:"svg-text-tag",style:{position:"absolute",width:"80px",left:t.targetGroup.x*t.scale-25+"mm",top:t.targetGroup.y*t.scale+"mm",transform:"rotate(-"+t.$root.projectData.totalRotate+"deg",height:"20px",lineHeight:"20px",fontSize:"12px",zIndex:999,borderRadius:3/t.scale+"px"}},[t._v(" "+t._s(Math.round(t.targetGroup.x))+" , "+t._s(Math.round(t.targetGroup.y))+" ")])]):t._e(),t.targetDesign&&t.showSizeTip?i("div",{staticClass:"svg-text-tag",style:{position:"absolute",left:(t.mousePosition.x+5)*t.scale+"px",top:(t.mousePosition.y+5)*t.scale+"px",borderRadius:"4px",height:"20px",lineHeight:"20px",transform:"rotate(-"+t.$root.projectData.totalRotate+"deg",fontSize:"12px",borderRaduis:3/t.scale+"px"}},[t._v(" "+t._s(t.computeSizeTip(t.targetDesign))+" ")]):t._e(),t.targetDesign&&t.showRotateTip?i("div",[i("div",{staticClass:"svg-text-tag",style:{position:"absolute",left:(t.targetDesign.style.left+t.targetDesign.style.width/2-t.origin.x)*t.scale+"mm",top:(t.targetDesign.style.top+t.targetDesign.style.height/2-t.origin.y)*t.scale+"mm",width:"50px",transform:"translate(-50%, -50%) rotate(-"+t.$root.projectData.totalRotate+"deg",fontSize:"12px",lineHeight:"20px",borderRadius:3/t.scale+"px"}},[t._v(" "+t._s(Math.round(t.targetDesign.style.rotate))+"° ")])]):t._e()]),i("edit-barcode",{ref:"editBarcodeRef",on:{"barcode-change":t.handleBarcodeChange}}),i("edit-qrcode",{ref:"editQrcodeRef",on:{"qrcode-change":t.handleQrcodeChange}}),t.showBlankTip?i("div",{staticClass:"blank-tip-wrap",style:{left:t.blankTipStyle.left,top:t.blankTipStyle.top,fontSize:t.blankTipStyle.fontSize,lineHeight:t.blankTipStyle.lineHeight}},[t._m(0),i("p",{staticClass:"title"},[t._v(" 可拖入文字或图片开始设计 ")]),i("p",{staticClass:"subtitle"},[t._v(" 按住空格键可拖动画布 ")])]):t._e()],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[i("i",{staticClass:"iconfont mr-4",staticStyle:{"font-size":"2em"}},[t._v("")])])}],a=(i("5319"),i("ddb0"),i("5530")),r=i("5880"),o=i("60bb"),l=i.n(o),c=i("fe94"),h=i("c64e"),d=i.n(h),u=i("b033"),p=i("365c"),f=i("87a0"),m=(i("ed08"),i("89e0")),g=i("953b"),v=i("5ce5"),b=(i("5333"),i("5e9f")),y=(i("1645"),i("464e")),_=i("2075"),x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.targetDesigns.length>1?i("div",{on:{contextmenu:function(e){return e.preventDefault(),e.stopPropagation(),t.handleContextMenu(e)}}},[i("div",t._l(t.targetDesigns,(function(e){return i("div",{key:e.uuid},[i("div",{staticClass:"box",style:{position:"absolute",width:e.style.width+"mm",height:e.style.height+"mm",left:e.style.left+50+"mm",top:e.style.top+50+"mm",outlineWidth:1.2/t.scale+"px",transform:t.transformRotate(e)},attrs:{id:"bxhGragmul"+e.uuid}})])})),0),i("div",{ref:"controlRef",staticClass:"control",style:{left:t.x+"mm",top:t.y+"mm",width:t.width+"mm",height:t.height+"mm",transform:"rotate("+t.rotate+"deg) translate(50mm, 50mm)"}},[i("div",{staticClass:"move-rect",style:"outline-width: "+1.2/t.scale+"px",on:{mousedown:t.doMove}}),i("control-point",{style:{left:0,top:0,cursor:t.calculateCursor("nw")},attrs:{scale:t.scale,type:"circle",position:{left:"-50%",top:"-50%"}},on:{resize:function(e){return t.doScale(e,"nw")}}}),i("control-point",{directives:[{name:"show",rawName:"v-show",value:t.showControlPoint,expression:"showControlPoint"}],style:{right:0,top:0,cursor:t.calculateCursor("ne")},attrs:{scale:t.scale,type:"circle",position:{right:"-50%",top:"-50%"}},on:{resize:function(e){return t.doScale(e,"ne")}}}),i("control-point",{directives:[{name:"show",rawName:"v-show",value:t.showControlPoint,expression:"showControlPoint"}],style:{left:0,bottom:0,cursor:t.calculateCursor("sw")},attrs:{scale:t.scale,type:"circle",position:{left:"-50%",bottom:"-50%"}},on:{resize:function(e){return t.doScale(e,"sw")}}}),i("control-point",{directives:[{name:"show",rawName:"v-show",value:t.showControlPoint,expression:"showControlPoint"}],style:{right:0,bottom:0,cursor:t.calculateCursor("se")},attrs:{scale:t.scale,type:"circle",position:{right:"-50%",bottom:"-50%"}},on:{resize:function(e){return t.doScale(e,"se")}}})],1)]):t._e()},w=[],C=i("ce94"),k=(i("df11"),i("575b"),i("2af2"),i("2b1a")),S=i("da71"),A=i("d323"),O=(i("650f"),{components:{ControlPoint:C["a"]},data(){return{width:0,height:0,x:0,y:0,rotate:0,rotateValue:0,cursors:["n","ne","e","se","s","sw","w","nw"],offsets:[]}},mounted(){this.$bus.$on("group-control-move",t=>{this.move(t)}),this.$bus.$on("groupControl.refreshRect",t=>{this.calculateRelativePosition()}),this.calculateRelativePosition()},beforeDestroy(){this.$bus.$off("group-control-move"),this.$bus.$off("groupControl.refreshRect")},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor",["targetDesigns","showPositionTip","currentFace","adsorbInstance"])),Object(r["mapState"])(["scale","isInside","spaceKeyDown"])),{},{globalRotate(){return this.$root.projectData.rotate},showControlPoint(){return this.width*this.scale>3&&this.height*this.scale>3},materials(){return this.isInside?this.$root.projectData.insideDesignData:this.$root.projectData.designData},designCenter(){},rotateStyle(){}}),methods:Object(a["a"])(Object(a["a"])({},Object(r["mapMutations"])("editor",["setHighLines","clearHighLines"])),{},{handleContextMenu(){},calculateCursor(t){let e=this.rotateValue+22;e+=this.globalRotate;const i=parseInt(e/45);let s=i+this.cursors.indexOf(t);s%=this.cursors.length,s<0&&(s+=this.cursors.length);const n=this.cursors[s]+"-resize";return n},calculateAngle(t){const e=t.offsetX-this.designCenter.x*S["DPI"],i=t.offsetY-this.designCenter.y*S["DPI"],s=Math.atan2(i,e)/Math.PI*180;return s+90},roundAngle(t){const e=5,i=45;t%=360,t<0&&(t+=360);const s=Math.round(t/i);return Math.abs(t-s*i)<e?s*i:t},calculatePosition(t){return"nw"==t?{x:this.x,y:this.y}:"ne"===t?{x:this.x+this.width,y:this.y}:"sw"===t?{x:this.x,y:this.y+this.height}:"se"===t?{x:this.x+this.width,y:this.y+this.height}:void 0},calculateRotation(t,e,i){},doScale(t,e){var i;this.$store.commit("editor/setShowSizeTip",!0);this.x,this.y;const s=this.width,n=this.height;log("this.width---",this.width);const a=this.cursors.indexOf(e);let r=a+4;r>=this.cursors.length&&(r%=this.cursors.length);const o=this.calculatePosition(e),l=this.calculatePosition(this.cursors[r]);log(o,l,"=====");o.x,l.x,o.y,l.y;const c=null===(i=document.getElementById("svgContainer"))||void 0===i?void 0:i.getBoundingClientRect();if(!c)return;const h={x:o.x-l.x,y:o.y-l.y},d=Math.sqrt(h.x*h.x+h.y*h.y);h.x/=d,h.y/=d,document.onmousemove=i=>{const a=this.x,r=this.y,c=this.width,d=this.height;let u=(i.clientX-t.clientX)/this.scale/S["DPI"],p=(i.clientY-t.clientY)/this.scale/S["DPI"],f=parseInt(this.globalRotate/90)%4;f<0&&(f+=4),1==f?[u,p]=[p,-u]:2==f?[u,p]=[-u,-p]:3==f&&([u,p]=[-p,u]);const m={x:(u*h.x+p*h.y)*h.x,y:(u*h.x+p*h.y)*h.y},g={x:o.x+m.x,y:o.y+m.y};if(this.applyPointBack(e,g,l,s,n),c<10&&this.width<c)return this.x=a,this.y=r,void(this.width=c);if(d<10&&this.height<d)return this.x=a,this.y=r,void(this.height=d);const v=this.width/c,b=this.getMatrix(l,v),y=[];for(const t of this.targetDesigns){const e=new A["Matrix"]([[t.style.left,t.style.top,1]]),i=e.multiply(b).elements[0],s=i[0],n=i[1],a={uuid:t.uuid,style:{width:t.style.width*v,height:t.style.height*v,left:s,top:n}};if("img"===t.type){let e={};if(t.bg){let{x:i,y:s,width:n,height:a}=t.bg;i*=v,s*=v,n*=v,a*=v,e={x:i,y:s,width:n,height:a}}else e={x:0,y:0,width:a.style.width,height:a.style.height};a.bg=e}"font"===t.type&&(a.style.fontSize=t.style.fontSize*v,a.style.lineHeight=t.style.lineHeight*v),y.push(a);const r=this.getDesignByUUID(t.uuid);for(const t in a)r.style[t]=a.style[t]}this.$store.commit("editor/updateTargetDesigns",y)},document.onmouseup=t=>{this.$store.commit("editor/setShowSizeTip",!1),document.onmousemove=null,document.onmouseup=null}},getMatrix({x:t,y:e},i){const s=new A["Matrix"]([[1,0,0],[0,1,0],[-t,-e,1]]),n=new A["Matrix"]([[i,0,0],[0,i,0],[0,0,1]]),a=new A["Matrix"]([[1,0,0],[0,1,0],[t,e,1]]);return s.multiply(n).multiply(a)},getDesignByUUID(t){const e=this.isInside?this.$root.projectData.insideDesignData:this.$root.projectData.designData;return e.find(e=>e.uuid===t)},applyPointBack(t,e,i,s,n){const a=(e.x+i.x)/2,r=(e.y+i.y)/2,o=Object(k["b"])(e.x,e.y,a,r,0),l=Object(k["b"])(i.x,i.y,a,r,0);"nw"===t?(this.width=l.x-o.x,this.height=l.y-o.y,this.x=o.x,this.y=o.y):"ne"===t?(this.width=-l.x+o.x,this.height=l.y-o.y,this.x=l.x,this.y=o.y):"se"===t?(this.width=-l.x+o.x,this.height=-l.y+o.y,this.x=l.x,this.y=l.y):"sw"===t&&(this.width=l.x-o.x,this.height=-l.y+o.y,this.x=o.x,this.y=l.y),this.$store.commit("editor/setTargetGroup",{x:this.x,y:this.y})},move(t){switch(t){case"ArrowUp":this.y-=.5;break;case"ArrowDown":this.y+=.5;break;case"ArrowLeft":this.x-=.5;break;case"ArrowRight":this.x+=.5;break}this.computeMove(),this.saveData()},transformRotate(t){const e=t.style.rotateX?-1:1,i=t.style.rotateY?-1:1,s=`scale(${e},${i}) rotate(${t.style.rotate}deg)`;return s},doMove(t){this.spaceKeyDown||(t.stopPropagation(),this.calculateRelativePosition(),this.computeMove(),0===t.button&&(this.$store.commit("editor/setShowPositionTip",!0),this.adsorbInstance.set({scale:this.scale,isInside:this.isInside,rotate:this.$root.projectData.rotate,envDesigns:this.materials.filter(t=>!this.targetDesigns.find(e=>e.uuid===t.uuid)),movingDesigns:this.targetDesigns,guideLines:this.$root.projectData.lineGuides}),document.onmousemove=this.moveThrottle(t.clientX,t.clientY),document.onmouseup=t=>{this.clearHighLines(),this.saveData(),this.$store.commit("editor/setShowPositionTip",!1),document.onmousemove=null,document.onmouseup=null}))},moveThrottle(t,e){return l.a.throttle(i=>{const s=this.adsorbInstance.calc(i.clientX-t,i.clientY-e);s.highlines&&s.highlines.length?this.setHighLines(s.highlines):this.clearHighLines(),this.x=s.selectionPosition.x,this.y=s.selectionPosition.y,this.calculateRelativePosition(),this.updateTargetDesigns(s.positionMap),this.$store.commit("editor/setTargetGroup",{x:this.x,y:this.y})},5)},updateTargetDesigns(t){const e=this.targetDesigns.map(e=>{const{uuid:i}=e,{x:s,y:n}=t[i];return{uuid:i,style:{left:s,top:n}}});this.$store.commit("editor/updateTargetDesigns",e)},computeMove(){const t=[];for(const e in this.targetDesigns){const i=this.offsets[e],s=this.targetDesigns[e];t.push({uuid:s.uuid,style:{left:this.x+i.x,top:this.y+i.y}})}this.$store.commit("editor/updateTargetDesigns",t)},saveData(){this.$store.commit("increaseCanvasVersion",this.isInside),this.$store.commit("increaseProjectVersion")},calculateRelativePosition(){var t;const e=null===(t=document.getElementById("svgContainer"))||void 0===t?void 0:t.getBoundingClientRect();if(!e)return;const i=[],s=[];for(const r of this.targetDesigns){const t=r.style.left+r.style.width/2,e=r.style.top+r.style.height/2,n=Object(k["b"])(r.style.left,r.style.top,t,e,r.style.rotate),a=Object(k["b"])(r.style.left+r.style.width,r.style.top,t,e,r.style.rotate),o=2*t-n.x,l=2*e-n.y,c=2*t-a.x,h=2*e-a.y;i.push(n.x,a.x,o,c),s.push(n.y,a.y,l,h)}this.x=Math.min(...i),this.y=Math.min(...s);const n=Math.max(...i),a=Math.max(...s);this.width=n-this.x,this.height=a-this.y,this.$store.commit("editor/setTargetGroup",{x:this.x,y:this.y}),this.offsets=[];for(const r of this.targetDesigns)this.offsets.push({x:r.style.left-this.x,y:r.style.top-this.y})}}),watch:{targetDesigns(){this.targetDesigns.length<=1||this.calculateRelativePosition()}}}),j=O,M=(i("f4b9"),i("2877")),I=Object(M["a"])(j,x,w,!1,null,"31da834a",null),T=I.exports,E=i("f168"),D=i("26a1"),L=i("b439");function P(t,e,i){const s=Object(b["b"])(Number.parseInt(t),Number.parseInt(e),Number.parseInt(i));return s.v<=.7?[255,255,255]:[120,120,120]}var R={mixins:[E["a"]],components:{dragSvg:u["default"],Background:m["default"],Foreground:g["default"],EditBarcode:y["default"],EditQrcode:_["default"],highlines:v["default"],TempGroupControl:T},props:{value:{type:Number},options:{type:Object},bleed:{type:Boolean},material:{type:Boolean,default:!1}},model:{prop:"value",event:"change"},watch:{uuidTable:{deep:!0,handler:function(t){if(0!==t.length){for(const e of t){const t=this.deepLookupDesign(e),i=this.$refs[t.uuid+"Ref"];i&&i.length>0&&t&&this.$nextTick(()=>{i[0]&&i[0].refresh&&i[0].refresh(t,e)})}this.$store.commit("editor/clearUuidTable")}}},editorTempMaterial(t){if(t){if(t=JSON.parse(JSON.stringify(t)),t.locked=!1,-1!=this.active){const e=this.$root.knifeData.faces[this.active];this.isInside?(t.style.left||(t.style.left=this.$root.knifeData.totalX-e.x-e.w+(e.w-t.style.width)/2),t.style.top||(t.style.top=e.y+(e.h-t.style.height)/2)):(t.style.left||(t.style.left=e.x+(e.w-t.style.width)/2),t.style.top||(t.style.top=e.y+(e.h-t.style.height)/2))}else t.style.left||(t.style.left=(this.$root.knifeData.totalX-t.style.width)/2),t.style.top||(t.style.top=(this.$root.knifeData.totalY-t.style.height)/2);this[this.faceMaterial].push(t),this.$store.dispatch("editor/saveTargetDesigns",[t]),this.$store.commit("increaseProjectVersion")}},async isInside(t){this.isInsideValue=t,this.faceMaterial=0===t?"materials":"inside_materials",this.$store.dispatch("editor/saveTargetDesigns",[])},targetDesign(t,e){this.showCutoutTab&&!this.loadingCutout&&(this.targetDesign&&this.targetDesign.uuid==this.currentCutoutUUID||this.$store.commit("editor/setShowCutoutTab",!1))}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])(["copyTarget","action","scale","isInside","spaceKeyDown"])),Object(r["mapState"])("editor",["editorTempMaterial","uuidTable","targetDesign","targetDesigns","targetGroup","showPositionTip","showRotateTip","showSizeTip","mouseMoved","imageSizeMap","mousePosition","contextMenuPosition","currentFace","clipBoardUUID","showAxiasRemark","currentCutoutUUID","showCutoutTab","loadingCutout","currentWorkingGroup"])),Object(r["mapGetters"])("profile",["isVip"])),Object(r["mapGetters"])("editor",["withGroup"])),{},{globalTransform(){return"translate(50mm, 50mm)"},materials(){return this.$root.projectData.designData},active(){return this.$root.knifeData.facesForSvg.findIndex(t=>t.name===this.currentFace)},inside_materials(){return this.$root.projectData.insideDesignData},fillBack(){const t=this.isInside?"inside_background":"background";return this.showAxiasRemark?"url(#svginnerPattern2)":this.$root.projectData[t]?this.$root.projectData[t].indexOf("url")>-1?"url(#svginnerPattern)":"rgba(255,255,255,1)"===this.$root.projectData[t].replace(/\s+/g,"")?"rgba(255,255,255,1)":this.$root.projectData[t]:this.material?"url(#svginnerPattern2)":"url(#svginnerPatternNullBg)"},defColor(){const t=this.isInside?"inside_background":"background",e=this.$root.projectData[t];if(this.showAxiasRemark)return this.$root.projectData.def_line_color;if(e&&e.indexOf("url")<=-1){const t=e.replace(/\s+/g,""),i=/rgba\((\d+),(\d+),(\d+),(\d+)\)/,s=i.exec(t);if(s){const t=P(s[1],s[2],s[3]);return`rgba(${t[0]}, ${t[1]},${t[2]}, 0.8)`}return this.$root.projectData.def_line_color}return this.$root.projectData.def_line_color},origin(){return this.currentWorkingGroup&&this.currentWorkingGroup.uuid!==this.targetDesign.uuid?{x:0-this.currentWorkingGroup.style.left,y:0-this.currentWorkingGroup.style.top}:{x:0,y:0}},showBlankTip(){return!this.$root.projectData.background&&((!this.$root.projectData.designData||!this.$root.projectData.designData.length)&&!(this.scale<.2))},blankTipStyle(){let{totalX:t,totalY:e}=this.$root.knifeData,i=(t+100)/2+"mm",s=(e+100)/2+"mm",n=16/this.scale+"px",a=10/this.scale+"px";return{left:i,top:s,fontSize:n,lineHeight:a}}}),data(){return{delta:0,adsorb:null,lineWidth:1,optionsCvs:this.options,faceMaterial:"materials",isInsideValue:this.isInside,dragMoreDirct:"",dragMore:0}},mounted(){this.initMaterials(),this.$bus.$on("edit-barcode",t=>{this.$refs.editBarcodeRef.show(t)}),this.$bus.$on("edit-qrcode",t=>{this.$refs.editQrcodeRef.show(t)}),this.$bus.$on("shortcut",t=>{this.handleShortcut(t)})},destroyed(){this.$bus.$off("edit-barcode"),this.$bus.$off("edit-qrcode"),this.$bus.$off("shortcut"),this.clearCurrentClipboard(),this.$store.commit("editor/setSizePanelVisible",!1),this.$store.commit("editor/setShowAxiasRemark",!1)},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapActions"])(["rollbackHistory","reRollbackHistory"])),Object(r["mapMutations"])(["setMaterialFlag"])),{},{selectMaterialsByRect(t){const e=[];for(let i in this[this.faceMaterial]){let s=this[this.faceMaterial][i];if(!0===s.locked)continue;let n=document.querySelector(`#svgDrag2${s.uuid}:not([style*="display:none"])`).getBoundingClientRect();if(0===n.width){const t=document.querySelector("#bxhGragmul"+s.uuid);t&&(n=t.getBoundingClientRect())}(t.x>=n.x&&t.x<=n.right||t.mx>=n.x&&t.mx<=n.right||t.x<n.x&&t.mx>n.right)&&(t.y>=n.y&&t.y<=n.bottom||t.my>=n.y&&t.my<=n.bottom||t.y<n.y&&t.my>n.bottom)&&e.push(s)}e.length!==this.targetDesigns.length&&this.$store.dispatch("editor/saveTargetDesigns",e)},computeSizeTip(t){const e=Math.round(this.targetDesign.style.width),i=Math.round(this.targetDesign.style.height);if("img"!==t.type||t.src.indexOf("svg")>-1)return`${e} X ${i} mm`;const s=this.imageSizeMap[t.uuid];if(!s)return`${e} X ${i} mm`;const n=Object(o["round"])(s.width/Object(c["a"])(t.style.width).mm2inch()),a=Object(o["round"])(s.height/Object(c["a"])(t.style.height).mm2inch());return Math.abs(n-a)<=1?`${e} X ${i} mm, ${n}dpi`:`${e} X ${i} mm, ${n}dpi ${a}dpi`},initMaterials(){this.clearMaterials(this.materials),this.clearMaterials(this.inside_materials)},clearMaterials(t){for(const e of t)e.uuid||(e.uuid=d()()),"font"!=e.type||e.src||(e.src=p["SIYUAN_FONT"],e.example="思源黑体-常规")},rotate(t){let e=JSON.parse(this.$root.projectData.cate.faces),i=document.getElementById("svgContainer");for(let s in e)e[s].rotate&&t===e[s].name&&(i.style.transform=`rotate(${e[s].rotate}deg)`)},handleShortcut(t){const e=t.action;try{switch(e){case f["a"].COPY:this.handleCopyMultiple();break;case f["a"].COPY_AND_PASTE:this.handleCopyMultiple(),this.handlePasteMultiple();break;case f["a"].CUT:this.handleCopyMultiple(),this.handleDelMultiple();break;case f["a"].PASTE:this.handlePasteMultiple(t);break;case f["a"].DELETE:this.handleDelMultiple();break;case f["a"].LOCK:this.handleBatchLock(!0);break;case f["a"].UNLOCK:this.handleBatchLock(!1);break;case f["a"].TOP:this.handleTop();break;case f["a"].DOWN:this.handleDown();break;case f["a"].MOVE_UP:this.handleMoveTopOne();break;case f["a"].MOVE_DOWN:this.handleMoveDownOne();break;case f["a"].ROTATE_X:this.handleBatchRotateX();break;case f["a"].ROTATE_Y:this.handleBatchRotateY();break;case f["a"].TEXT_ALIGN_LEFT:this.handleTextAlign("left");break;case f["a"].TEXT_ALIGN_CENTER:this.handleTextAlign("center");break;case f["a"].TEXT_ALIGN_RIGHT:this.handleTextAlign("right");break;case f["a"].MOVE:this.handleKeyMove(t.event);break;case f["a"].SAVE:this.handleSave();default:break}}catch(i){}},faceClick(t){if(!this.spaceKeyDown&&!this.mouseMoved){const t=document.getSelection();t.removeAllRanges(),this.$store.dispatch("editor/saveTargetDesigns",[])}this.$store.dispatch("saveIsOpt",!1)},handleCopyMultiple(){let t=[],e=this.targetDesigns[0].style.left,i=this.targetDesigns[0].style.top;for(const s of this.targetDesigns){let n=Object(L["c"])(s);n.style.left+=2.5,n.style.top+=2.5,n.sort=(Math.max(...this[this.faceMaterial].map(t=>t.sort))||0)+1,n.locked=!1,e>s.style.left&&(e=s.style.left),i>s.style.top&&(i=s.top),t.push(n)}return this.saveToClipboard({designs:t,minX:e,minY:i}),this},handlePasteMultiple(t){const e=this.getFromClipboard();if(!e.designs)return void this.$bus.$emit("show-paste-modal");if(!this.isVip&&e.crossTab)return this.$bus.$emit("show-vip-paste-modal"),void this.clearClipboard();const i=e.designs;if(t&&t.followMouse){let{x:t,y:e}=Object(D["f"])(this.contextMenuPosition.x,this.contextMenuPosition.y,this.scale);[t,e]=Object(D["c"])(this.$root.projectData.rotate,t,e,0,0,this.$root.knifeData.totalX,this.$root.knifeData.totalY);let s=Math.min(...i.map(t=>t.style.left)),n=Math.min(...i.map(t=>t.style.top));Math.max(...i.map(t=>t.style.left+t.style.width)),Math.max(...i.map(t=>t.style.top+t.style.height));i.map(i=>{i.style.left=i.style.left-s+t,i.style.top=i.style.top-n+e})}i.map(e=>{const i=t&&t.design&&Object(L["i"])(t.design)?t.design.designs:this[this.faceMaterial];return Object(L["j"])(e,i)}),this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside),this.$store.dispatch("editor/saveTargetDesigns",i),t&&t.followMouse||this.clearClipboard()},handleBarcodeChange(t){const e=this.isInside?this.$root.projectData.insideDesignData:this.$root.projectData.designData,i=e.filter(e=>e.uuid==t.uuid)[0];i.codeMode=t.codeMode,i.value=t.value,this.$store.commit("editor/addToUuidTable",i.uuid)},handleQrcodeChange(t){const e=this.isInside?this.$root.projectData.insideDesignData:this.$root.projectData.designData,i=e.filter(e=>e.uuid==t.uuid)[0];i.codeType=t.codeType,i.codeValue=t.codeValue,i.value=t.value},handleDelMultiple(){const t=[];return this.targetDesigns.forEach(e=>{if(e.locked)return;let i=this[this.faceMaterial];if(this.currentWorkingGroup){const t=Object(L["d"])(this.currentWorkingGroup);Object(L["h"])(this.currentWorkingGroup,e)&&(2===t.length?Object(L["n"])(this.currentWorkingGroup,i):i=t)}const s=Object(L["k"])(e,i);t.push(...s)}),this.$store.dispatch("editor/saveTargetDesigns",[]),this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside),this},handleRotateX(){this.validateLock();const t=this[this.faceMaterial].filter(t=>t.uuid=this.targetDesign.uuid)[0];return t.style.rotateX=!t.style.rotateX,this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside),this},handleBatchRotateY(){for(let t in this.targetDesigns)for(let e in this[this.faceMaterial])if(this.targetDesigns[t].uuid===this[this.faceMaterial][e].uuid){const t=this[this.faceMaterial][e],i=!t.style.rotateY;this.$set(t.style,"rotateY",i)}return this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside),this},handleBatchRotateX(){for(let t in this.targetDesigns)for(let e in this[this.faceMaterial])if(this.targetDesigns[t].uuid===this[this.faceMaterial][e].uuid){const t=this[this.faceMaterial][e],i=!t.style.rotateX;this.$set(t.style,"rotateX",i)}return this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside),this},handleTextAlign(t){this.validateLock();const e=this[this.faceMaterial].filter(t=>t.uuid==this.targetDesign.uuid)[0];return e.style.textAlign=t,this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside),this},handleBatchLock(t){for(let e in this.targetDesigns)for(let i in this[this.faceMaterial])this.targetDesigns[e].uuid===this[this.faceMaterial][i].uuid&&(this[this.faceMaterial][i].locked=t);return this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside),this},moveTargetToDesignedSpot(t,e){const i=this[this.faceMaterial].splice(t,1)[0];this[this.faceMaterial].splice(e,0,i)},handleTop(){const t=this[this.faceMaterial].findIndex(t=>t.uuid==this.targetDesign.uuid);return this.moveTargetToDesignedSpot(t,this[this.faceMaterial].length-1),this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside),this},handleDown(){const t=this[this.faceMaterial].findIndex(t=>t.uuid==this.targetDesign.uuid);return this.moveTargetToDesignedSpot(t,0),this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside),this},min(t,e){return t>e?e:t},max(t,e){return t>e?t:e},handleMoveTopOne(){this.validateLock();const t=this[this.faceMaterial].findIndex(t=>t.uuid==this.targetDesign.uuid);let e=t+1;return e=this.min(e,this[this.faceMaterial].length-1),this.moveTargetToDesignedSpot(t,e),this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside),this},handleMoveDownOne(){this.validateLock();const t=this[this.faceMaterial].findIndex(t=>t.uuid==this.targetDesign.uuid);let e=t-1;return e=this.max(e,0),this.moveTargetToDesignedSpot(t,e),this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside),this},validateLock(){var t;if(null===(t=this.targetDesign)||void 0===t?void 0:t.locked)throw this.$message.error("该对象被锁定"),"error"},handleKeyMove(t){const e=["ArrowUp","ArrowLeft","ArrowDown","ArrowRight"];if(-1!==["INPUT","TEXTAREA"].indexOf(t.target.tagName))return;if(-1!=["true","plaintext-only"].indexOf(t.target.contenteditable))return;let i=parseInt(this.$root.projectData.rotate/90)%e.length;i<0&&(i+=4);let s=e.indexOf(t.key)+i;s%=e.length;const n=e[s];if(this.targetDesigns&&this.targetDesigns.length>1)return void this.$refs.groupControlRef.move(n);if(!this.targetDesign)return this.dragMoreDirct=n,void(this.dragMore=this.delta++);this.validateLock();const a=this[this.faceMaterial].filter(t=>t.uuid===this.targetDesign.uuid)[0];if(a){switch(n){case"ArrowUp":a.style.top-=.5,a.y-=.5*p["DPI"];break;case"ArrowDown":a.style.top+=.5,a.y+=.5*p["DPI"];break;case"ArrowLeft":a.x-=.5*p["DPI"],a.style.left-=.5;break;case"ArrowRight":a.x+=.5*p["DPI"],a.style.left+=.5;break}this.$store.commit("increaseCanvasVersion",this.isInside)}},handleSave(){this.$store.dispatch("saveFullTemplate",{projectData:this.$root.projectData,isAuto:!1,knifeData:this.$root.knifeData})},deepLookupDesign(t){let e=[...this.$root.projectData.designData,...this.$root.projectData.insideDesignData],i=e.find(e=>e.uuid===t);if(i)return i;e=e.filter(t=>"group"===t.type);for(const s of e)if(i=s.designs.find(e=>e.uuid===t),i)return s;return null}})},z=R,N=(i("ec9f"),Object(M["a"])(z,s,n,!1,null,null,null));e["default"]=N.exports},5693:function(t,e){function i(t,e){var i,s,n,a,r,o=e.x,l=e.y,c=e.width,h=e.height,d=e.r;c<0&&(o+=c,c=-c),h<0&&(l+=h,h=-h),"number"===typeof d?i=s=n=a=d:d instanceof Array?1===d.length?i=s=n=a=d[0]:2===d.length?(i=n=d[0],s=a=d[1]):3===d.length?(i=d[0],s=a=d[1],n=d[2]):(i=d[0],s=d[1],n=d[2],a=d[3]):i=s=n=a=0,i+s>c&&(r=i+s,i*=c/r,s*=c/r),n+a>c&&(r=n+a,n*=c/r,a*=c/r),s+n>h&&(r=s+n,s*=h/r,n*=h/r),i+a>h&&(r=i+a,i*=h/r,a*=h/r),t.moveTo(o+i,l),t.lineTo(o+c-s,l),0!==s&&t.arc(o+c-s,l+s,s,-Math.PI/2,0),t.lineTo(o+c,l+h-n),0!==n&&t.arc(o+c-n,l+h-n,n,0,Math.PI/2),t.lineTo(o+a,l+h),0!==a&&t.arc(o+a,l+h-a,a,Math.PI/2,Math.PI),t.lineTo(o,l+i),0!==i&&t.arc(o+i,l+i,i,Math.PI,1.5*Math.PI)}e.buildPath=i},"56b3":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAC1ElEQVRYR+2WTUhUURTH/+fNWKSLQIhwNq2CMHJRmLuSkCKJNrnVpI97n+nGjauIB62ihavRd09YmtHCqJ0UqNEH0YcQhSFBq1pIUUQtxmjMd+IOjjyfb5jRHIPyLs+555zfPR/vHcJfPlQofkdHx/H5+fmbAKrKxPiQmRtjAbq6ulLZbHYKQHWZgufcMjPFAmit74nIEQCjzHwsDKG13glgSkQ2JRKJg/39/Y+tPiwnokZjzKMovOu67UEQXMvLYwG01udEJA3gSzKZ3NPX1/cxAjAhIoeIaMAYcyav01rn5ACuMvPpaHCtda2ITAKoLAhgXyEir+wlx3FafN+/HXbkum5rEATXAXyuqqra1dvb+9XqC8nztkqpSiKaFJFaIhoUkfZlJRgZGUmMj48/AdAAYJiZ28LBu7u7qzOZzFsA24io1Rhzw+rDcsdx2nzfH46+Xik1COAkEU2LSD2AzDIArfV5EbkI4AOAOmb+HnaklBoAcIqIJowxTaHXxcrz+lDdZ4mo3hgzrZSSJQBKqb0AngFIOo7T5Pv+/UjdD4jIAwA/iajOGPNuofFi5aG+CNe9nZmHrC4O4LV9dQkjd4GZbZZyRyn1BsDuEuyGmDlX90IAuZQUO6lUarPnedmoo2J29mPGzLNFAexcxjkLpyzSF4u1XK1dLmChAHHEGwD/dwYKdfufNG9JTai1HhWR5jgAIhozxhwu6xSUMOexV0oZ35IysAHwT2VAKbUVwDf7qMWVrNineK0y4HlecmZm5i4Au0+8ZOZ969qEWmsWkbMAPlVUVDSk0+n3ZQUIZ8513Z4gCC4R0Q+7Nfu+/8Lq1wXAdd0TQRDcygUkajHG3MnDlR3Add39dp0TkS0Aepj5cjgzZQXo7OzcMTc39xzAdiK6YoxR0YZeArDabi9mZ/8XNTU1zZ7n/SoEMLYwGsV8rVhPRE9F5Gh0zV/SAyv2uoYGvwHjVxs/ax7hCQAAAABJRU5ErkJggg=="},5726:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("c243"),n=function(t,e,i){var n=t.split("").map((function(t,i){return s.BINARIES[e[i]]})).map((function(e,i){return e?e[t[i]]:""}));if(i){var a=t.length-1;n=n.map((function(t,e){return e<a?t+i:t}))}return n.join("")};e.default=n},5727:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAVCAYAAAE1Jy4DAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFqADAAQAAAABAAAAFQAAAABbgUmKAAADT0lEQVQ4EZ1UzUtUURS/9zljmqI406RiLgpjdJxxIFzUJmoVQYSLFhEZ0QfhnyAlCAVBGzfRQqpFtC+iVas2URQa896892YYbdMHju/NGyw1P8a5/c7V+5ynSNGFmXPO73y8e3733MsYlmGVrpPUDNs7pwltmgx/ZSz3mzQylvOYFE5/lrXUWWHLU6QHl266pkJmZ71WqRuWO0xKxnQE/ZQunerPsJ1TSvelbjmv6WMSsO2fUd8DRTedGapZNMzSNXLolntHBqiPZC33CgFmoZSQjtq/bM457dvY91ffUIpulU9iByu67aW2MWcCXMwrW8qM6a6RYs4s9Jjzopl0IUQomy+nSUeRCdkG6DSwuc8E1i4ES2IVRg1o6cSBFGc8EGzY7iiC/GC0XNXqwz0+oCqQhFOHSArBNhpC9Z3xeItLeCCY9rXOlu8C7OBMe5FKRJ9Q0K5FXVMjykGsSHbAksKkpHPxzz7goTNzTf8c6dOqImbknopF9+Pb+ia1lOmfEGisqADgq0pHYlG3nUuc+Ev3xwKNUhDxjCUnEOx8YoLtD5GDTioZb8votntVVNkwMhcNu/QOrgfkR+Ig49pNls+7XdjrCIG0dNM7i0pDmxauU84ZRE9vlb2nJPqwzSUVILehDJKyYc7K+HSKVTcm0U9TrT+g0zbASjYAbhm7WCDc+LLYLn6v3AcVl9FeGNA850xSjHnphn0Qk7KO5Oe8sWE0daS5SHm1K1A4k3PibIN/APgjxMNDiURroTZ4p25ZC0crYv0l8E5RJ06ke2P5nTHEwVOaMQre5fwLQDmb8+kGB5pePBqQ4LUujRGWtUtnauvSXBAObh/V4lunJ9TryTED73FSx8Hh1EAiNlgbPDcnmjo6uH/UyrcXjl1P4QyOoda0huA5mSD4YZWoZNHzboAiU705phD1sD8Wy964iglIwbrIxi34rjWGoxfxBV0wEUEbcsxV8EBf5CFepFzFcX9R+xXLXcWkLLY0RMZUjJKg5hl87XhWCrE21FSO/5WZQukQXxNvsM+2sLYv2dfXUqJa/1SYLgJj1UkkrzDOR4TQVjmr3mJcXGCCL2l12vlkb4Qutr/+sTDeH1xHykK7UVB3u645/Kq/u9XzK+1Q/gBBquHkYwjHtAAAAABJRU5ErkJggg=="},5755:function(t,e,i){"use strict";var s=i("385c"),n=i.n(s);n.a},"575b":function(t,e,i){"use strict";var s=i("750b"),n=i("70d4"),a=i("63bf");i("79f3");const r=i("344f");e["a"]=Object(s["b"])({setup(){const t=Object(s["i"])({visible:!1,resizeVisible:!1,newprojectType:!1,newprojectValue:null});return()=>Object(s["c"])("div",{class:"newer-design"},[Object(s["c"])(a["default"],{attrs:{visible:t.resizeVisible,nptype:t.newprojectType,npvalue:t.newprojectValue},on:{npchange:e=>{t.resizeVisible=!1,t.newprojectValue=null,t.newprojectType=!1},change:e=>{t.resizeVisible=e}}}),Object(s["c"])(n["default"],{attrs:{visible:t.visible},on:{change:e=>{t.visible=e},"use-change":e=>{t.newprojectType=!0,t.newprojectValue=e,t.resizeVisible=!0}}}),Object(s["c"])("a-button",{attrs:{type:"primary"},class:"ml-auto",on:{click:()=>{t.visible=!0}}},[Object(s["c"])("img",{class:"mr-8 icon-img",attrs:{src:r,alt:""}}),"新建设计"])])}})},"57ab":function(t,e,i){},"57af":function(t,e,i){"use strict";var s=i("e73e"),n=i.n(s);n.a},"57afd":function(t,e,i){"use strict";var s=i("1e71"),n=i.n(s);n.a},"57e0":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-cascader",{attrs:{value:t.value,options:t.options,"allow-clear":!1},on:{change:t.handleChange}})],1)},n=[],a=i("0eff"),r=i.n(a),o=(i("3b15"),{data(){return{options:[]}},props:{value:{default:Array,type:Array}},model:{prop:"value",event:"change"},mounted(){this.formatAreas()},methods:{formatAreas(){this.options=this.lookup("86",1)},lookup(t,e){const i=r.a[t],s=e>=3;if(i){const t=Object.keys(i).map(t=>({value:i[t],label:i[t],isLeaf:s,children:s?null:this.lookup(t,e+1)}));return t}return[]},handleChange(t){this.$emit("change",t),this.$emit("blur",t)}}}),l=o,c=i("2877"),h=Object(c["a"])(l,s,n,!1,null,null,null);e["a"]=h.exports},"57f3":function(t,e,i){t.exports=i.p+"editor-assets/img/pp.1b60fa78.svg"},"583a":function(t,e,i){},"583f":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=i("c243"),a=i("5726"),r=c(a),o=i("e762"),l=c(o);function c(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function u(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var p=function(t){var e=t.split("").map((function(t){return+t})).reduce((function(t,e,i){return i%2?t+9*e:t+3*e}),0);return e%10},f=function(t){function e(t,i){return h(this,e),d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return u(e,t),s(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{5}$/)}},{key:"encode",value:function(){var t=n.EAN5_STRUCTURE[p(this.data)];return{data:"1011"+(0,r.default)(this.data,t,"01"),text:this.text}}}]),e}(l.default);e.default=f},"586d":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"materialRef",style:{width:t.options.style.width+"mm",height:t.options.style.height+"mm",opacity:(t.options.style.opacity||100)/100},attrs:{center:""},on:{dblclick:function(e){return e.stopPropagation(),t.$bus.$emit("edit-barcode",t.options)},mousedown:function(e){return t.$emit("mousedown",e)}}},[i("svg",{class:"barcodeNode_"+t.options.uuid,attrs:{id:"barcodeNode_"+t.options.uuid}})])},n=[],a=i("62c5"),r=i.n(a),o=i("6796"),l=i("1645"),c={mixins:[o["a"]],props:{options:{type:Object,default:Object}},mounted(){const t={fontFamily:this.options.style.fontFamily,src:this.options.src};l["a"].injectFontFamilies([t],"ownFontStyle"),this.drawCode()},methods:{refresh(){this.drawCode()},drawCode(){const t=this.options.fills||[],e=t.filter(t=>"background"===t.class)[0]||{},i=t.filter(t=>"foreground"===t.class)[0]||{},s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.classList.add("barcodeNode_"+this.options.uuid),r()(s,this.options.value,{format:this.options.codeMode,margin:5,font:this.options.style.fontFamily,background:e.color||"#ffffff",lineColor:i.color||"#000000"}),s.setAttribute("preserveAspectRatio","none"),s.style.width="100%",s.style.height="100%",this.$emit("material-loaded");while(this.$refs.materialRef.firstChild)this.$refs.materialRef.firstChild.remove();this.$refs.materialRef.appendChild(s)}}},h=c,d=(i("a8a4"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,"629dc7e3",null);e["default"]=u.exports},5894:function(t,e,i){},"58c5":function(t,e,i){},5909:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"for-not-svg-wrap"},[i("width-height-input"),i("cutout-button",{staticClass:"mt-16",attrs:{data:t.curDesign}}),i("tailor-button",{staticClass:"mt-16",attrs:{data:t.curDesign}}),i("opacity-slider",{staticClass:"mt-16"}),i("a-divider",{staticClass:"mt-24"}),i("design-common-operation",{staticClass:"mt-16"})],1)},n=[],a=i("5530"),r=i("5880"),o=i("13f9"),l=i("ae41"),c=i("20cf"),h=i("3937"),d=i("1e9d"),u={components:{widthHeightInput:o["default"],cutoutButton:l["default"],tailorButton:c["default"],opacitySlider:h["default"],designCommonOperation:d["default"]},computed:Object(a["a"])({},Object(r["mapGetters"])("editor-v2",["curDesign"]))},p=u,f=i("2877"),m=Object(f["a"])(p,s,n,!1,null,null,null);e["default"]=m.exports},"591d":function(t,e,i){"use strict";var s=i("2214"),n=i.n(s);n.a},5943:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-popover",{attrs:{placement:"topRight",overlayClassName:"tip-render-guide"}},[s("template",{slot:"content"},[s("div",{staticClass:"tip-fake-render"},[s("div",{staticClass:"fo-14"},[t._v("构图辅助线")]),s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"guide-item"},[s("div",{class:"guide-item-rect "+(0===t.VALUE?"guide-item-rect--active":""),on:{click:function(e){return t.changeValue(0)}}},[s("div",{staticClass:"flex flex-end "},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.VALUE,expression:"VALUE === 0"}],staticClass:"check-icon flex flex-center item-center"},[s("a-icon",{staticStyle:{color:"#fff","font-size":"10px",transform:"scale(0.7,0.7)"},attrs:{type:"check"}})],1)])]),s("div",{staticClass:" fo-14 mt-8 text-center"},[t._v("无")])]),s("div",{staticClass:"guide-item"},[s("div",{class:"guide-item-rect "+(1===t.VALUE?"guide-item-rect--active":""),on:{click:function(e){return t.changeValue(1)}}},[s("div",{staticClass:"flex flex-end ",staticStyle:{height:"1px"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:1===t.VALUE,expression:"VALUE === 1"}],staticClass:"check-icon flex flex-center item-center"},[s("a-icon",{staticStyle:{color:"#fff","font-size":"10px",transform:"scale(0.7,0.7)"},attrs:{type:"check"}})],1)]),s("div",{staticClass:"line1"}),s("div",{staticClass:"line2"})]),s("div",{staticClass:"fo-14 mt-8 text-center"},[t._v("九宫格")])]),s("div",{staticClass:"guide-item"},[s("div",{class:"guide-item-rect "+(2===t.VALUE?"guide-item-rect--active":""),on:{click:function(e){return t.changeValue(2)}}},[s("div",{staticClass:"flex flex-end ",staticStyle:{height:"1px"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:2===t.VALUE,expression:"VALUE === 2"}],staticClass:"check-icon flex flex-center item-center"},[s("a-icon",{staticStyle:{color:"#fff","font-size":"10px",transform:"scale(0.7,0.7)"},attrs:{type:"check"}})],1)]),s("div",{staticClass:"line3"}),s("div",{staticClass:"line4"})]),s("div",{staticClass:" fo-14 mt-8 text-center"},[t._v("黄金分割")])])])])]),s("div",{staticClass:"flex flex-center item-center guide"},[s("img",{attrs:{src:i("39f3"),width:"18px"}})])],2)},n=[],a={props:["value"],model:{prop:"value",event:"change"},data(){return{VALUE:this.value}},watch:{value(t){this.VALUE=t}},methods:{changeValue(t){this.VALUE=t,this.$emit("change",t)}}},r=a,o=(i("752c"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,null,null);e["default"]=l.exports},"595b":function(t,e,i){"use strict";var s=i("99c0"),n=i.n(s);n.a},"59d7":function(t,e,i){},"59fc":function(t,e,i){"use strict";var s=i("7848"),n=i.n(s);n.a},"5a0c":function(t,e,i){!function(e,i){t.exports=i()}(0,(function(){"use strict";var t="millisecond",e="second",i="minute",s="hour",n="day",a="week",r="month",o="quarter",l="year",c=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,h=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(t,e,i){var s=String(t);return!s||s.length>=e?t:""+Array(e+1-s.length).join(i)+t},u={s:d,z:function(t){var e=-t.utcOffset(),i=Math.abs(e),s=Math.floor(i/60),n=i%60;return(e<=0?"+":"-")+d(s,2,"0")+":"+d(n,2,"0")},m:function(t,e){var i=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(i,r),n=e-s<0,a=t.clone().add(i+(n?-1:1),r);return Number(-(i+(e-s)/(n?s-a:a-s))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(c){return{M:r,y:l,w:a,d:n,D:"date",h:s,m:i,s:e,ms:t,Q:o}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},f="en",m={};m[f]=p;var g=function(t){return t instanceof _},v=function(t,e,i){var s;if(!t)return f;if("string"==typeof t)m[t]&&(s=t),e&&(m[t]=e,s=t);else{var n=t.name;m[n]=t,s=n}return!i&&s&&(f=s),s||!i&&f},b=function(t,e){if(g(t))return t.clone();var i="object"==typeof e?e:{};return i.date=t,i.args=arguments,new _(i)},y=u;y.l=v,y.i=g,y.w=function(t,e){return b(t,{locale:e.$L,utc:e.$u,$offset:e.$offset})};var _=function(){function d(t){this.$L=this.$L||v(t.locale,null,!0),this.parse(t)}var u=d.prototype;return u.parse=function(t){this.$d=function(t){var e=t.date,i=t.utc;if(null===e)return new Date(NaN);if(y.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var s=e.match(c);if(s)return i?new Date(Date.UTC(s[1],s[2]-1,s[3]||1,s[4]||0,s[5]||0,s[6]||0,s[7]||0)):new Date(s[1],s[2]-1,s[3]||1,s[4]||0,s[5]||0,s[6]||0,s[7]||0)}return new Date(e)}(t),this.init()},u.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},u.$utils=function(){return y},u.isValid=function(){return!("Invalid Date"===this.$d.toString())},u.isSame=function(t,e){var i=b(t);return this.startOf(e)<=i&&i<=this.endOf(e)},u.isAfter=function(t,e){return b(t)<this.startOf(e)},u.isBefore=function(t,e){return this.endOf(e)<b(t)},u.$g=function(t,e,i){return y.u(t)?this[e]:this.set(i,t)},u.year=function(t){return this.$g(t,"$y",l)},u.month=function(t){return this.$g(t,"$M",r)},u.day=function(t){return this.$g(t,"$W",n)},u.date=function(t){return this.$g(t,"$D","date")},u.hour=function(t){return this.$g(t,"$H",s)},u.minute=function(t){return this.$g(t,"$m",i)},u.second=function(t){return this.$g(t,"$s",e)},u.millisecond=function(e){return this.$g(e,"$ms",t)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(t,o){var c=this,h=!!y.u(o)||o,d=y.p(t),u=function(t,e){var i=y.w(c.$u?Date.UTC(c.$y,e,t):new Date(c.$y,e,t),c);return h?i:i.endOf(n)},p=function(t,e){return y.w(c.toDate()[t].apply(c.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(e)),c)},f=this.$W,m=this.$M,g=this.$D,v="set"+(this.$u?"UTC":"");switch(d){case l:return h?u(1,0):u(31,11);case r:return h?u(1,m):u(0,m+1);case a:var b=this.$locale().weekStart||0,_=(f<b?f+7:f)-b;return u(h?g-_:g+(6-_),m);case n:case"date":return p(v+"Hours",0);case s:return p(v+"Minutes",1);case i:return p(v+"Seconds",2);case e:return p(v+"Milliseconds",3);default:return this.clone()}},u.endOf=function(t){return this.startOf(t,!1)},u.$set=function(a,o){var c,h=y.p(a),d="set"+(this.$u?"UTC":""),u=(c={},c[n]=d+"Date",c.date=d+"Date",c[r]=d+"Month",c[l]=d+"FullYear",c[s]=d+"Hours",c[i]=d+"Minutes",c[e]=d+"Seconds",c[t]=d+"Milliseconds",c)[h],p=h===n?this.$D+(o-this.$W):o;if(h===r||h===l){var f=this.clone().set("date",1);f.$d[u](p),f.init(),this.$d=f.set("date",Math.min(this.$D,f.daysInMonth())).toDate()}else u&&this.$d[u](p);return this.init(),this},u.set=function(t,e){return this.clone().$set(t,e)},u.get=function(t){return this[y.p(t)]()},u.add=function(t,o){var c,h=this;t=Number(t);var d=y.p(o),u=function(e){var i=b(h);return y.w(i.date(i.date()+Math.round(e*t)),h)};if(d===r)return this.set(r,this.$M+t);if(d===l)return this.set(l,this.$y+t);if(d===n)return u(1);if(d===a)return u(7);var p=(c={},c[i]=6e4,c[s]=36e5,c[e]=1e3,c)[d]||1,f=this.$d.getTime()+t*p;return y.w(f,this)},u.subtract=function(t,e){return this.add(-1*t,e)},u.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var i=t||"YYYY-MM-DDTHH:mm:ssZ",s=y.z(this),n=this.$locale(),a=this.$H,r=this.$m,o=this.$M,l=n.weekdays,c=n.months,d=function(t,s,n,a){return t&&(t[s]||t(e,i))||n[s].substr(0,a)},u=function(t){return y.s(a%12||12,t,"0")},p=n.meridiem||function(t,e,i){var s=t<12?"AM":"PM";return i?s.toLowerCase():s},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:y.s(o+1,2,"0"),MMM:d(n.monthsShort,o,c,3),MMMM:d(c,o),D:this.$D,DD:y.s(this.$D,2,"0"),d:String(this.$W),dd:d(n.weekdaysMin,this.$W,l,2),ddd:d(n.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(a),HH:y.s(a,2,"0"),h:u(1),hh:u(2),a:p(a,r,!0),A:p(a,r,!1),m:String(r),mm:y.s(r,2,"0"),s:String(this.$s),ss:y.s(this.$s,2,"0"),SSS:y.s(this.$ms,3,"0"),Z:s};return i.replace(h,(function(t,e){return e||f[t]||s.replace(":","")}))},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(t,c,h){var d,u=y.p(c),p=b(t),f=6e4*(p.utcOffset()-this.utcOffset()),m=this-p,g=y.m(this,p);return g=(d={},d[l]=g/12,d[r]=g,d[o]=g/3,d[a]=(m-f)/6048e5,d[n]=(m-f)/864e5,d[s]=m/36e5,d[i]=m/6e4,d[e]=m/1e3,d)[u]||m,h?g:y.a(g)},u.daysInMonth=function(){return this.endOf(r).$D},u.$locale=function(){return m[this.$L]},u.locale=function(t,e){if(!t)return this.$L;var i=this.clone(),s=v(t,e,!0);return s&&(i.$L=s),i},u.clone=function(){return y.w(this.$d,this)},u.toDate=function(){return new Date(this.valueOf())},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},d}();return b.prototype=_.prototype,b.extend=function(t,e){return t(e,_,b),b},b.locale=v,b.isDayjs=g,b.unix=function(t){return b(1e3*t)},b.en=m[f],b.Ls=m,b}))},"5a38":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAFo9M/3AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAAfklEQVQ4EcVSuxKAMAij/oCL5///no9Bv0BN79LzwpChQxlKgUCgNLbjeiAFx37eEclT4IlP1mWGiorFpeLhUMSE6F9SSkawBtPIRjtlMEDdOOhge7R9he4eLIUF9E9hKSyg7ZMvp1p3o3HLoAlqjy+Q9qAt6u/S+PgRujt4AVaxUuxw8HAwAAAAAElFTkSuQmCC"},"5a4f":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bxh-select"},[i("select",{staticClass:"bxh-select__panel",style:{width:t.twidth+"px"},domProps:{value:t.val},on:{change:t.valChange}},[t.req?i("option",{attrs:{value:""}},[t._v("请选择")]):t._e(),t._l(t.data,(function(e,s){return i("option",{key:s,domProps:{value:e[t.tprop]}},[t._v(t._s(e[t.tlabel]))])}))],2)])},n=[],a={props:{value:{default:""},options:{type:Array},width:{type:Number},label:{type:String},prop:{type:String},req:{type:Boolean,default:!0}},model:{prop:"value",event:"change"},watch:{value(t){this.val=t},val(t){this.$emit("change",t)},options(t){this.data=t},req(t){this.treq=t}},data(){return{val:this.value,data:this.options,twidth:this.width,tlabel:this.label,tprop:this.prop,treq:this.req}},methods:{valChange(t){this.$emit("change",t.target.value)}}},r=a,o=(i("ae17"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,null,null);e["a"]=l.exports},"5a6f":function(t,e,i){},"5a89":function(t,e,i){"use strict";i.d(e,"a",(function(){return Vu})),i.d(e,"b",(function(){return Ch})),i.d(e,"c",(function(){return wi})),i.d(e,"d",(function(){return Ys})),i.d(e,"e",(function(){return pn})),i.d(e,"f",(function(){return Xh})),i.d(e,"g",(function(){return ct})),i.d(e,"h",(function(){return Fs})),i.d(e,"i",(function(){return Vp})),i.d(e,"j",(function(){return f})),i.d(e,"k",(function(){return ai})),i.d(e,"l",(function(){return Ku})),i.d(e,"m",(function(){return u})),i.d(e,"n",(function(){return Uc})),i.d(e,"o",(function(){return rf})),i.d(e,"p",(function(){return Zc})),i.d(e,"q",(function(){return Jc})),i.d(e,"r",(function(){return Eu})),i.d(e,"s",(function(){return Te})),i.d(e,"t",(function(){return Ee})),i.d(e,"u",(function(){return Ph})),i.d(e,"v",(function(){return Mh})),i.d(e,"w",(function(){return Bh})),i.d(e,"x",(function(){return Nh})),i.d(e,"y",(function(){return ft})),i.d(e,"z",(function(){return gt})),i.d(e,"A",(function(){return mt})),i.d(e,"B",(function(){return Qu})),i.d(e,"C",(function(){return Qp})),i.d(e,"D",(function(){return n})),i.d(e,"E",(function(){return Hs})),i.d(e,"F",(function(){return li})),i.d(e,"G",(function(){return Yi})),i.d(e,"H",(function(){return Tn})),i.d(e,"I",(function(){return Vs})),i.d(e,"J",(function(){return Cu})),i.d(e,"K",(function(){return wu})),i.d(e,"L",(function(){return ht})),i.d(e,"M",(function(){return dt})),i.d(e,"N",(function(){return pt})),i.d(e,"O",(function(){return ut})),i.d(e,"P",(function(){return Bu})),i.d(e,"Q",(function(){return bs})),i.d(e,"R",(function(){return Up})),i.d(e,"S",(function(){return qn})),i.d(e,"T",(function(){return $p})),i.d(e,"U",(function(){return Gh})),i.d(e,"V",(function(){return Fh})),i.d(e,"W",(function(){return Lf})),i.d(e,"X",(function(){return bi})),i.d(e,"Y",(function(){return $u})),i.d(e,"Z",(function(){return Tt})),i.d(e,"ab",(function(){return It})),i.d(e,"bb",(function(){return lt})),i.d(e,"cb",(function(){return Qc})),i.d(e,"db",(function(){return wh})),i.d(e,"eb",(function(){return yh})),i.d(e,"fb",(function(){return Ni})),i.d(e,"gb",(function(){return Vf})),i.d(e,"hb",(function(){return Bp})),i.d(e,"ib",(function(){return a})),i.d(e,"jb",(function(){return Ke})),i.d(e,"kb",(function(){return np})),i.d(e,"lb",(function(){return $e})),i.d(e,"mb",(function(){return Fe})),i.d(e,"nb",(function(){return ci})),i.d(e,"ob",(function(){return yi})),i.d(e,"pb",(function(){return Hu})),i.d(e,"qb",(function(){return He})),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");const e=Object(t);for(let i=1;i<arguments.length;i++){const t=arguments[i];if(void 0!==t&&null!==t)for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e});const s="120",n={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},a={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},r=0,o=1,l=2,c=1,h=2,d=3,u=0,p=1,f=2,m=1,g=0,v=1,b=2,y=3,_=4,x=5,w=100,C=101,k=102,S=103,A=104,O=200,j=201,M=202,I=203,T=204,E=205,D=206,L=207,P=208,R=209,z=210,N=0,B=1,F=2,$=3,U=4,H=5,V=6,G=7,W=0,Y=1,q=2,X=0,Q=1,Z=2,K=3,J=4,tt=5,et=300,it=301,st=302,nt=303,at=304,rt=306,ot=307,lt=1e3,ct=1001,ht=1002,dt=1003,ut=1004,pt=1005,ft=1006,mt=1007,gt=1008,vt=1009,bt=1010,yt=1011,_t=1012,xt=1013,wt=1014,Ct=1015,kt=1016,St=1017,At=1018,Ot=1019,jt=1020,Mt=1021,It=1022,Tt=1023,Et=1024,Dt=1025,Lt=1026,Pt=1027,Rt=1028,zt=1029,Nt=1030,Bt=1031,Ft=1032,$t=1033,Ut=33776,Ht=33777,Vt=33778,Gt=33779,Wt=35840,Yt=35841,qt=35842,Xt=35843,Qt=36196,Zt=37492,Kt=37496,Jt=37808,te=37809,ee=37810,ie=37811,se=37812,ne=37813,ae=37814,re=37815,oe=37816,le=37817,ce=37818,he=37819,de=37820,ue=37821,pe=36492,fe=37840,me=37841,ge=37842,ve=37843,be=37844,ye=37845,_e=37846,xe=37847,we=37848,Ce=37849,ke=37850,Se=37851,Ae=37852,Oe=37853,je=2200,Me=2201,Ie=2202,Te=2300,Ee=2301,De=2302,Le=2400,Pe=2401,Re=2402,ze=2500,Ne=2501,Be=0,Fe=1,$e=2,Ue=3e3,He=3001,Ve=3007,Ge=3002,We=3003,Ye=3004,qe=3005,Xe=3006,Qe=3200,Ze=3201,Ke=0,Je=1,ti=7680,ei=519,ii=35044,si=35048,ni="300 es";function ai(){}Object.assign(ai.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){if(void 0===this._listeners)return;const i=this._listeners,s=i[t];if(void 0!==s){const t=s.indexOf(e);-1!==t&&s.splice(t,1)}},dispatchEvent:function(t){if(void 0===this._listeners)return;const e=this._listeners,i=e[t.type];if(void 0!==i){t.target=this;const e=i.slice(0);for(let i=0,s=e.length;i<s;i++)e[i].call(this,t)}}});const ri=[];for(let gm=0;gm<256;gm++)ri[gm]=(gm<16?"0":"")+gm.toString(16);let oi=1234567;const li={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,s=4294967295*Math.random()|0,n=ri[255&t]+ri[t>>8&255]+ri[t>>16&255]+ri[t>>24&255]+"-"+ri[255&e]+ri[e>>8&255]+"-"+ri[e>>16&15|64]+ri[e>>24&255]+"-"+ri[63&i|128]+ri[i>>8&255]+"-"+ri[i>>16&255]+ri[i>>24&255]+ri[255&s]+ri[s>>8&255]+ri[s>>16&255]+ri[s>>24&255];return n.toUpperCase()},clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,s,n){return s+(t-e)*(n-s)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e),t*t*(3-2*t))},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e),t*t*t*(t*(6*t-15)+10))},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(oi=t%2147483647),oi=16807*oi%2147483647,(oi-1)/2147483646},degToRad:function(t){return t*li.DEG2RAD},radToDeg:function(t){return t*li.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,i,s,n){const a=Math.cos,r=Math.sin,o=a(i/2),l=r(i/2),c=a((e+s)/2),h=r((e+s)/2),d=a((e-s)/2),u=r((e-s)/2),p=a((s-e)/2),f=r((s-e)/2);switch(n){case"XYX":t.set(o*h,l*d,l*u,o*c);break;case"YZY":t.set(l*u,o*h,l*d,o*c);break;case"ZXZ":t.set(l*d,l*u,o*h,o*c);break;case"XZX":t.set(o*h,l*f,l*p,o*c);break;case"YXY":t.set(l*p,o*h,l*f,o*c);break;case"ZYZ":t.set(l*f,l*p,o*h,o*c);break;default:}}};class ci{constructor(t=0,e=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6],this.y=s[1]*e+s[4]*i+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){const t=Math.atan2(-this.y,-this.x)+Math.PI;return t}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this}toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),s=Math.sin(e),n=this.x-t.x,a=this.y-t.y;return this.x=n*i-a*s+t.x,this.y=n*s+a*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class hi{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,i,s,n,a,r,o,l){const c=this.elements;return c[0]=t,c[1]=s,c[2]=r,c[3]=e,c[4]=n,c[5]=o,c[6]=i,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,s=e.elements,n=this.elements,a=i[0],r=i[3],o=i[6],l=i[1],c=i[4],h=i[7],d=i[2],u=i[5],p=i[8],f=s[0],m=s[3],g=s[6],v=s[1],b=s[4],y=s[7],_=s[2],x=s[5],w=s[8];return n[0]=a*f+r*v+o*_,n[3]=a*m+r*b+o*x,n[6]=a*g+r*y+o*w,n[1]=l*f+c*v+h*_,n[4]=l*m+c*b+h*x,n[7]=l*g+c*y+h*w,n[2]=d*f+u*v+p*_,n[5]=d*m+u*b+p*x,n[8]=d*g+u*y+p*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],s=t[2],n=t[3],a=t[4],r=t[5],o=t[6],l=t[7],c=t[8];return e*a*c-e*r*l-i*n*c+i*r*o+s*n*l-s*a*o}getInverse(t,e){const i=t.elements,s=this.elements,n=i[0],a=i[1],r=i[2],o=i[3],l=i[4],c=i[5],h=i[6],d=i[7],u=i[8],p=u*l-c*d,f=c*h-u*o,m=d*o-l*h,g=n*p+a*f+r*m;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return s[0]=p*v,s[1]=(r*d-u*a)*v,s[2]=(c*a-r*l)*v,s[3]=f*v,s[4]=(u*n-r*h)*v,s[5]=(r*o-c*n)*v,s[6]=m*v,s[7]=(a*h-d*n)*v,s[8]=(l*n-a*o)*v,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).getInverse(this).transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,s,n,a,r){const o=Math.cos(n),l=Math.sin(n);this.set(i*o,i*l,-i*(o*a+l*r)+a+t,-s*l,s*o,-s*(-l*a+o*r)+r+e,0,0,1)}scale(t,e){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.elements,n=s[0],a=s[3],r=s[6],o=s[1],l=s[4],c=s[7];return s[0]=e*n+i*o,s[3]=e*a+i*l,s[6]=e*r+i*c,s[1]=-i*n+e*o,s[4]=-i*a+e*l,s[7]=-i*r+e*c,this}translate(t,e){const i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this}equals(t){const e=this.elements,i=t.elements;for(let s=0;s<9;s++)if(e[s]!==i[s])return!1;return!0}fromArray(t,e){void 0===e&&(e=0);for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}}let di;const ui={getDataURL:function(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===di&&(di=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),di.width=t.width,di.height=t.height;const i=di.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=di}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}};let pi=0;function fi(t,e,i,s,n,a,r,o,l,c){Object.defineProperty(this,"id",{value:pi++}),this.uuid=li.generateUUID(),this.name="",this.image=void 0!==t?t:fi.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:fi.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:ct,this.wrapT=void 0!==s?s:ct,this.magFilter=void 0!==n?n:ft,this.minFilter=void 0!==a?a:gt,this.anisotropy=void 0!==l?l:1,this.format=void 0!==r?r:Tt,this.internalFormat=null,this.type=void 0!==o?o:vt,this.offset=new ci(0,0),this.repeat=new ci(1,1),this.center=new ci(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new hi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:Ue,this.version=0,this.onUpdate=null}fi.DEFAULT_IMAGE=void 0,fi.DEFAULT_MAPPING=et,fi.prototype=Object.assign(Object.create(ai.prototype),{constructor:fi,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const s=this.image;if(void 0===s.uuid&&(s.uuid=li.generateUUID()),!e&&void 0===t.images[s.uuid]){let e;if(Array.isArray(s)){e=[];for(let t=0,i=s.length;t<i;t++)e.push(ui.getDataURL(s[t]))}else e=ui.getDataURL(s);t.images[s.uuid]={uuid:s.uuid,url:e}}i.image=s.uuid}return e||(t.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==et)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case lt:t.x=t.x-Math.floor(t.x);break;case ct:t.x=t.x<0?0:1;break;case ht:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case lt:t.y=t.y-Math.floor(t.y);break;case ct:t.y=t.y<0?0:1;break;case ht:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(fi.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}});class mi{constructor(t=0,e=0,i=0,s=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=t,this.y=e,this.z=i,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,s){return this.x=t,this.y=e,this.z=i,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,s=this.z,n=this.w,a=t.elements;return this.x=a[0]*e+a[4]*i+a[8]*s+a[12]*n,this.y=a[1]*e+a[5]*i+a[9]*s+a[13]*n,this.z=a[2]*e+a[6]*i+a[10]*s+a[14]*n,this.w=a[3]*e+a[7]*i+a[11]*s+a[15]*n,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,s,n;const a=.01,r=.1,o=t.elements,l=o[0],c=o[4],h=o[8],d=o[1],u=o[5],p=o[9],f=o[2],m=o[6],g=o[10];if(Math.abs(c-d)<a&&Math.abs(h-f)<a&&Math.abs(p-m)<a){if(Math.abs(c+d)<r&&Math.abs(h+f)<r&&Math.abs(p+m)<r&&Math.abs(l+u+g-3)<r)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,o=(u+1)/2,v=(g+1)/2,b=(c+d)/4,y=(h+f)/4,_=(p+m)/4;return t>o&&t>v?t<a?(i=0,s=.707106781,n=.707106781):(i=Math.sqrt(t),s=b/i,n=y/i):o>v?o<a?(i=.707106781,s=0,n=.707106781):(s=Math.sqrt(o),i=b/s,n=_/s):v<a?(i=.707106781,s=.707106781,n=0):(n=Math.sqrt(v),i=y/n,s=_/n),this.set(i,s,n,e),this}let v=Math.sqrt((m-p)*(m-p)+(h-f)*(h-f)+(d-c)*(d-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(h-f)/v,this.z=(d-c)/v,this.w=Math.acos((l+u+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}function gi(t,e,i){this.width=t,this.height=e,this.scissor=new mi(0,0,t,e),this.scissorTest=!1,this.viewport=new mi(0,0,t,e),i=i||{},this.texture=new fi(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:ft,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function vi(t,e,i){gi.call(this,t,e,i),this.samples=4}gi.prototype=Object.assign(Object.create(ai.prototype),{constructor:gi,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),vi.prototype=Object.assign(Object.create(gi.prototype),{constructor:vi,isWebGLMultisampleRenderTarget:!0,copy:function(t){return gi.prototype.copy.call(this,t),this.samples=t.samples,this}});class bi{constructor(t=0,e=0,i=0,s=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=e,this._z=i,this._w=s}static slerp(t,e,i,s){return i.copy(t).slerp(e,s)}static slerpFlat(t,e,i,s,n,a,r){let o=i[s+0],l=i[s+1],c=i[s+2],h=i[s+3];const d=n[a+0],u=n[a+1],p=n[a+2],f=n[a+3];if(h!==f||o!==d||l!==u||c!==p){let t=1-r;const e=o*d+l*u+c*p+h*f,i=e>=0?1:-1,s=1-e*e;if(s>Number.EPSILON){const n=Math.sqrt(s),a=Math.atan2(n,e*i);t=Math.sin(t*a)/n,r=Math.sin(r*a)/n}const n=r*i;if(o=o*t+d*n,l=l*t+u*n,c=c*t+p*n,h=h*t+f*n,t===1-r){const t=1/Math.sqrt(o*o+l*l+c*c+h*h);o*=t,l*=t,c*=t,h*=t}}t[e]=o,t[e+1]=l,t[e+2]=c,t[e+3]=h}static multiplyQuaternionsFlat(t,e,i,s,n,a){const r=i[s],o=i[s+1],l=i[s+2],c=i[s+3],h=n[a],d=n[a+1],u=n[a+2],p=n[a+3];return t[e]=r*p+c*h+o*u-l*d,t[e+1]=o*p+c*d+l*h-r*u,t[e+2]=l*p+c*u+r*d-o*h,t[e+3]=c*p-r*h-o*d-l*u,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,s){return this._x=t,this._y=e,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=t._x,s=t._y,n=t._z,a=t._order,r=Math.cos,o=Math.sin,l=r(i/2),c=r(s/2),h=r(n/2),d=o(i/2),u=o(s/2),p=o(n/2);switch(a){case"XYZ":this._x=d*c*h+l*u*p,this._y=l*u*h-d*c*p,this._z=l*c*p+d*u*h,this._w=l*c*h-d*u*p;break;case"YXZ":this._x=d*c*h+l*u*p,this._y=l*u*h-d*c*p,this._z=l*c*p-d*u*h,this._w=l*c*h+d*u*p;break;case"ZXY":this._x=d*c*h-l*u*p,this._y=l*u*h+d*c*p,this._z=l*c*p+d*u*h,this._w=l*c*h-d*u*p;break;case"ZYX":this._x=d*c*h-l*u*p,this._y=l*u*h+d*c*p,this._z=l*c*p-d*u*h,this._w=l*c*h+d*u*p;break;case"YZX":this._x=d*c*h+l*u*p,this._y=l*u*h+d*c*p,this._z=l*c*p-d*u*h,this._w=l*c*h-d*u*p;break;case"XZY":this._x=d*c*h-l*u*p,this._y=l*u*h-d*c*p,this._z=l*c*p+d*u*h,this._w=l*c*h+d*u*p;break;default:}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,s=Math.sin(i);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],s=e[4],n=e[8],a=e[1],r=e[5],o=e[9],l=e[2],c=e[6],h=e[10],d=i+r+h;if(d>0){const t=.5/Math.sqrt(d+1);this._w=.25/t,this._x=(c-o)*t,this._y=(n-l)*t,this._z=(a-s)*t}else if(i>r&&i>h){const t=2*Math.sqrt(1+i-r-h);this._w=(c-o)/t,this._x=.25*t,this._y=(s+a)/t,this._z=(n+l)/t}else if(r>h){const t=2*Math.sqrt(1+r-i-h);this._w=(n-l)/t,this._x=(s+a)/t,this._y=.25*t,this._z=(o+c)/t}else{const t=2*Math.sqrt(1+h-i-r);this._w=(a-s)/t,this._x=(n+l)/t,this._y=(o+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){const i=1e-6;let s=t.dot(e)+1;return s<i?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=s),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(li.clamp(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(0===i)return this;const s=Math.min(1,e/i);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}inverse(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,s=t._y,n=t._z,a=t._w,r=e._x,o=e._y,l=e._z,c=e._w;return this._x=i*c+a*r+s*l-n*o,this._y=s*c+a*o+n*r-i*l,this._z=n*c+a*l+i*o-s*r,this._w=a*c-i*r-s*o-n*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const i=this._x,s=this._y,n=this._z,a=this._w;let r=a*t._w+i*t._x+s*t._y+n*t._z;if(r<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,r=-r):this.copy(t),r>=1)return this._w=a,this._x=i,this._y=s,this._z=n,this;const o=1-r*r;if(o<=Number.EPSILON){const t=1-e;return this._w=t*a+e*this._w,this._x=t*i+e*this._x,this._y=t*s+e*this._y,this._z=t*n+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,r),h=Math.sin((1-e)*c)/l,d=Math.sin(e*c)/l;return this._w=a*h+this._w*d,this._x=i*h+this._x*d,this._y=s*h+this._y*d,this._z=n*h+this._z*d,this._onChangeCallback(),this}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}class yi{constructor(t=0,e=0,i=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=e,this.z=i}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?this.multiplyVectors(t,e):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return!t||t.isEuler,this.applyQuaternion(xi.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(xi.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,s=this.z,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6]*s,this.y=n[1]*e+n[4]*i+n[7]*s,this.z=n[2]*e+n[5]*i+n[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,s=this.z,n=t.elements,a=1/(n[3]*e+n[7]*i+n[11]*s+n[15]);return this.x=(n[0]*e+n[4]*i+n[8]*s+n[12])*a,this.y=(n[1]*e+n[5]*i+n[9]*s+n[13])*a,this.z=(n[2]*e+n[6]*i+n[10]*s+n[14])*a,this}applyQuaternion(t){const e=this.x,i=this.y,s=this.z,n=t.x,a=t.y,r=t.z,o=t.w,l=o*e+a*s-r*i,c=o*i+r*e-n*s,h=o*s+n*i-a*e,d=-n*e-a*i-r*s;return this.x=l*o+d*-n+c*-r-h*-a,this.y=c*o+d*-a+h*-n-l*-r,this.z=h*o+d*-r+l*-a-c*-n,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,s=this.z,n=t.elements;return this.x=n[0]*e+n[4]*i+n[8]*s,this.y=n[1]*e+n[5]*i+n[9]*s,this.z=n[2]*e+n[6]*i+n[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t,e){return void 0!==e?this.crossVectors(t,e):this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,s=t.y,n=t.z,a=e.x,r=e.y,o=e.z;return this.x=s*o-n*r,this.y=n*a-i*o,this.z=i*r-s*a,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return _i.copy(this).projectOnVector(t),this.sub(_i)}reflect(t){return this.sub(_i.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(li.clamp(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,s=this.z-t.z;return e*e+i*i+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const s=Math.sin(e)*t;return this.x=s*Math.sin(i),this.y=Math.cos(e)*t,this.z=s*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=s,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const _i=new yi,xi=new bi;class wi{constructor(t,e){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==t?t:new yi(1/0,1/0,1/0),this.max=void 0!==e?e:new yi(-1/0,-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,i=1/0,s=1/0,n=-1/0,a=-1/0,r=-1/0;for(let o=0,l=t.length;o<l;o+=3){const l=t[o],c=t[o+1],h=t[o+2];l<e&&(e=l),c<i&&(i=c),h<s&&(s=h),l>n&&(n=l),c>a&&(a=c),h>r&&(r=h)}return this.min.set(e,i,s),this.max.set(n,a,r),this}setFromBufferAttribute(t){let e=1/0,i=1/0,s=1/0,n=-1/0,a=-1/0,r=-1/0;for(let o=0,l=t.count;o<l;o++){const l=t.getX(o),c=t.getY(o),h=t.getZ(o);l<e&&(e=l),c<i&&(i=c),h<s&&(s=h),l>n&&(n=l),c>a&&(a=c),h>r&&(r=h)}return this.min.set(e,i,s),this.max.set(n,a,r),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=Si.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return void 0===t&&(t=new yi),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(t=new yi),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),Ai.copy(e.boundingBox),Ai.applyMatrix4(t.matrixWorld),this.union(Ai));const i=t.children;for(let s=0,n=i.length;s<n;s++)this.expandByObject(i[s]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return void 0===e&&(e=new yi),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Si),Si.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Di),Li.subVectors(this.max,Di),Oi.subVectors(t.a,Di),ji.subVectors(t.b,Di),Mi.subVectors(t.c,Di),Ii.subVectors(ji,Oi),Ti.subVectors(Mi,ji),Ei.subVectors(Oi,Mi);let e=[0,-Ii.z,Ii.y,0,-Ti.z,Ti.y,0,-Ei.z,Ei.y,Ii.z,0,-Ii.x,Ti.z,0,-Ti.x,Ei.z,0,-Ei.x,-Ii.y,Ii.x,0,-Ti.y,Ti.x,0,-Ei.y,Ei.x,0];return!!Ci(e,Oi,ji,Mi,Li)&&(e=[1,0,0,0,1,0,0,0,1],!!Ci(e,Oi,ji,Mi,Li)&&(Pi.crossVectors(Ii,Ti),e=[Pi.x,Pi.y,Pi.z],Ci(e,Oi,ji,Mi,Li)))}clampPoint(t,e){return void 0===e&&(e=new yi),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){const e=Si.copy(t).clamp(this.min,this.max);return e.sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(Si).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(ki[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ki[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ki[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ki[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ki[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ki[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ki[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ki[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ki)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}function Ci(t,e,i,s,n){for(let a=0,r=t.length-3;a<=r;a+=3){Ri.fromArray(t,a);const r=n.x*Math.abs(Ri.x)+n.y*Math.abs(Ri.y)+n.z*Math.abs(Ri.z),o=e.dot(Ri),l=i.dot(Ri),c=s.dot(Ri);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>r)return!1}return!0}const ki=[new yi,new yi,new yi,new yi,new yi,new yi,new yi,new yi],Si=new yi,Ai=new wi,Oi=new yi,ji=new yi,Mi=new yi,Ii=new yi,Ti=new yi,Ei=new yi,Di=new yi,Li=new yi,Pi=new yi,Ri=new yi,zi=new wi;class Ni{constructor(t,e){this.center=void 0!==t?t:new yi,this.radius=void 0!==e?e:-1}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;void 0!==e?i.copy(e):zi.setFromPoints(t).getCenter(i);let s=0;for(let n=0,a=t.length;n<a;n++)s=Math.max(s,i.distanceToSquared(t[n]));return this.radius=Math.sqrt(s),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return void 0===e&&(e=new yi),e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return void 0===t&&(t=new wi),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}}const Bi=new yi,Fi=new yi,$i=new yi,Ui=new yi,Hi=new yi,Vi=new yi,Gi=new yi;class Wi{constructor(t,e){this.origin=void 0!==t?t:new yi,this.direction=void 0!==e?e:new yi(0,0,-1)}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return void 0===e&&(e=new yi),e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Bi)),this}closestPointToPoint(t,e){void 0===e&&(e=new yi),e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Bi.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Bi.copy(this.direction).multiplyScalar(e).add(this.origin),Bi.distanceToSquared(t))}distanceSqToSegment(t,e,i,s){Fi.copy(t).add(e).multiplyScalar(.5),$i.copy(e).sub(t).normalize(),Ui.copy(this.origin).sub(Fi);const n=.5*t.distanceTo(e),a=-this.direction.dot($i),r=Ui.dot(this.direction),o=-Ui.dot($i),l=Ui.lengthSq(),c=Math.abs(1-a*a);let h,d,u,p;if(c>0)if(h=a*o-r,d=a*r-o,p=n*c,h>=0)if(d>=-p)if(d<=p){const t=1/c;h*=t,d*=t,u=h*(h+a*d+2*r)+d*(a*h+d+2*o)+l}else d=n,h=Math.max(0,-(a*d+r)),u=-h*h+d*(d+2*o)+l;else d=-n,h=Math.max(0,-(a*d+r)),u=-h*h+d*(d+2*o)+l;else d<=-p?(h=Math.max(0,-(-a*n+r)),d=h>0?-n:Math.min(Math.max(-n,-o),n),u=-h*h+d*(d+2*o)+l):d<=p?(h=0,d=Math.min(Math.max(-n,-o),n),u=d*(d+2*o)+l):(h=Math.max(0,-(a*n+r)),d=h>0?n:Math.min(Math.max(-n,-o),n),u=-h*h+d*(d+2*o)+l);else d=a>0?-n:n,h=Math.max(0,-(a*d+r)),u=-h*h+d*(d+2*o)+l;return i&&i.copy(this.direction).multiplyScalar(h).add(this.origin),s&&s.copy($i).multiplyScalar(d).add(Fi),u}intersectSphere(t,e){Bi.subVectors(t.center,this.origin);const i=Bi.dot(this.direction),s=Bi.dot(Bi)-i*i,n=t.radius*t.radius;if(s>n)return null;const a=Math.sqrt(n-s),r=i-a,o=i+a;return r<0&&o<0?null:r<0?this.at(o,e):this.at(r,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return null===i?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;const i=t.normal.dot(this.direction);return i*e<0}intersectBox(t,e){let i,s,n,a,r,o;const l=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,d=this.origin;return l>=0?(i=(t.min.x-d.x)*l,s=(t.max.x-d.x)*l):(i=(t.max.x-d.x)*l,s=(t.min.x-d.x)*l),c>=0?(n=(t.min.y-d.y)*c,a=(t.max.y-d.y)*c):(n=(t.max.y-d.y)*c,a=(t.min.y-d.y)*c),i>a||n>s?null:((n>i||i!==i)&&(i=n),(a<s||s!==s)&&(s=a),h>=0?(r=(t.min.z-d.z)*h,o=(t.max.z-d.z)*h):(r=(t.max.z-d.z)*h,o=(t.min.z-d.z)*h),i>o||r>s?null:((r>i||i!==i)&&(i=r),(o<s||s!==s)&&(s=o),s<0?null:this.at(i>=0?i:s,e)))}intersectsBox(t){return null!==this.intersectBox(t,Bi)}intersectTriangle(t,e,i,s,n){Hi.subVectors(e,t),Vi.subVectors(i,t),Gi.crossVectors(Hi,Vi);let a,r=this.direction.dot(Gi);if(r>0){if(s)return null;a=1}else{if(!(r<0))return null;a=-1,r=-r}Ui.subVectors(this.origin,t);const o=a*this.direction.dot(Vi.crossVectors(Ui,Vi));if(o<0)return null;const l=a*this.direction.dot(Hi.cross(Ui));if(l<0)return null;if(o+l>r)return null;const c=-a*Ui.dot(Gi);return c<0?null:this.at(c/r,n)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}class Yi{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,i,s,n,a,r,o,l,c,h,d,u,p,f,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=s,g[1]=n,g[5]=a,g[9]=r,g[13]=o,g[2]=l,g[6]=c,g[10]=h,g[14]=d,g[3]=u,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Yi).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,s=1/qi.setFromMatrixColumn(t,0).length(),n=1/qi.setFromMatrixColumn(t,1).length(),a=1/qi.setFromMatrixColumn(t,2).length();return e[0]=i[0]*s,e[1]=i[1]*s,e[2]=i[2]*s,e[3]=0,e[4]=i[4]*n,e[5]=i[5]*n,e[6]=i[6]*n,e[7]=0,e[8]=i[8]*a,e[9]=i[9]*a,e[10]=i[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){!t||t.isEuler;const e=this.elements,i=t.x,s=t.y,n=t.z,a=Math.cos(i),r=Math.sin(i),o=Math.cos(s),l=Math.sin(s),c=Math.cos(n),h=Math.sin(n);if("XYZ"===t.order){const t=a*c,i=a*h,s=r*c,n=r*h;e[0]=o*c,e[4]=-o*h,e[8]=l,e[1]=i+s*l,e[5]=t-n*l,e[9]=-r*o,e[2]=n-t*l,e[6]=s+i*l,e[10]=a*o}else if("YXZ"===t.order){const t=o*c,i=o*h,s=l*c,n=l*h;e[0]=t+n*r,e[4]=s*r-i,e[8]=a*l,e[1]=a*h,e[5]=a*c,e[9]=-r,e[2]=i*r-s,e[6]=n+t*r,e[10]=a*o}else if("ZXY"===t.order){const t=o*c,i=o*h,s=l*c,n=l*h;e[0]=t-n*r,e[4]=-a*h,e[8]=s+i*r,e[1]=i+s*r,e[5]=a*c,e[9]=n-t*r,e[2]=-a*l,e[6]=r,e[10]=a*o}else if("ZYX"===t.order){const t=a*c,i=a*h,s=r*c,n=r*h;e[0]=o*c,e[4]=s*l-i,e[8]=t*l+n,e[1]=o*h,e[5]=n*l+t,e[9]=i*l-s,e[2]=-l,e[6]=r*o,e[10]=a*o}else if("YZX"===t.order){const t=a*o,i=a*l,s=r*o,n=r*l;e[0]=o*c,e[4]=n-t*h,e[8]=s*h+i,e[1]=h,e[5]=a*c,e[9]=-r*c,e[2]=-l*c,e[6]=i*h+s,e[10]=t-n*h}else if("XZY"===t.order){const t=a*o,i=a*l,s=r*o,n=r*l;e[0]=o*c,e[4]=-h,e[8]=l*c,e[1]=t*h+n,e[5]=a*c,e[9]=i*h-s,e[2]=s*h-i,e[6]=r*c,e[10]=n*h+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Qi,t,Zi)}lookAt(t,e,i){const s=this.elements;return ts.subVectors(t,e),0===ts.lengthSq()&&(ts.z=1),ts.normalize(),Ki.crossVectors(i,ts),0===Ki.lengthSq()&&(1===Math.abs(i.z)?ts.x+=1e-4:ts.z+=1e-4,ts.normalize(),Ki.crossVectors(i,ts)),Ki.normalize(),Ji.crossVectors(ts,Ki),s[0]=Ki.x,s[4]=Ji.x,s[8]=ts.x,s[1]=Ki.y,s[5]=Ji.y,s[9]=ts.y,s[2]=Ki.z,s[6]=Ji.z,s[10]=ts.z,this}multiply(t,e){return void 0!==e?this.multiplyMatrices(t,e):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,s=e.elements,n=this.elements,a=i[0],r=i[4],o=i[8],l=i[12],c=i[1],h=i[5],d=i[9],u=i[13],p=i[2],f=i[6],m=i[10],g=i[14],v=i[3],b=i[7],y=i[11],_=i[15],x=s[0],w=s[4],C=s[8],k=s[12],S=s[1],A=s[5],O=s[9],j=s[13],M=s[2],I=s[6],T=s[10],E=s[14],D=s[3],L=s[7],P=s[11],R=s[15];return n[0]=a*x+r*S+o*M+l*D,n[4]=a*w+r*A+o*I+l*L,n[8]=a*C+r*O+o*T+l*P,n[12]=a*k+r*j+o*E+l*R,n[1]=c*x+h*S+d*M+u*D,n[5]=c*w+h*A+d*I+u*L,n[9]=c*C+h*O+d*T+u*P,n[13]=c*k+h*j+d*E+u*R,n[2]=p*x+f*S+m*M+g*D,n[6]=p*w+f*A+m*I+g*L,n[10]=p*C+f*O+m*T+g*P,n[14]=p*k+f*j+m*E+g*R,n[3]=v*x+b*S+y*M+_*D,n[7]=v*w+b*A+y*I+_*L,n[11]=v*C+b*O+y*T+_*P,n[15]=v*k+b*j+y*E+_*R,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],s=t[8],n=t[12],a=t[1],r=t[5],o=t[9],l=t[13],c=t[2],h=t[6],d=t[10],u=t[14],p=t[3],f=t[7],m=t[11],g=t[15];return p*(+n*o*h-s*l*h-n*r*d+i*l*d+s*r*u-i*o*u)+f*(+e*o*u-e*l*d+n*a*d-s*a*u+s*l*c-n*o*c)+m*(+e*l*h-e*r*u-n*a*h+i*a*u+n*r*c-i*l*c)+g*(-s*r*c-e*o*h+e*r*d+s*a*h-i*a*d+i*o*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=e,s[14]=i),this}getInverse(t,e){const i=this.elements,s=t.elements,n=s[0],a=s[1],r=s[2],o=s[3],l=s[4],c=s[5],h=s[6],d=s[7],u=s[8],p=s[9],f=s[10],m=s[11],g=s[12],v=s[13],b=s[14],y=s[15],_=p*b*d-v*f*d+v*h*m-c*b*m-p*h*y+c*f*y,x=g*f*d-u*b*d-g*h*m+l*b*m+u*h*y-l*f*y,w=u*v*d-g*p*d+g*c*m-l*v*m-u*c*y+l*p*y,C=g*p*h-u*v*h-g*c*f+l*v*f+u*c*b-l*p*b,k=n*_+a*x+r*w+o*C;if(0===k)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/k;return i[0]=_*S,i[1]=(v*f*o-p*b*o-v*r*m+a*b*m+p*r*y-a*f*y)*S,i[2]=(c*b*o-v*h*o+v*r*d-a*b*d-c*r*y+a*h*y)*S,i[3]=(p*h*o-c*f*o-p*r*d+a*f*d+c*r*m-a*h*m)*S,i[4]=x*S,i[5]=(u*b*o-g*f*o+g*r*m-n*b*m-u*r*y+n*f*y)*S,i[6]=(g*h*o-l*b*o-g*r*d+n*b*d+l*r*y-n*h*y)*S,i[7]=(l*f*o-u*h*o+u*r*d-n*f*d-l*r*m+n*h*m)*S,i[8]=w*S,i[9]=(g*p*o-u*v*o-g*a*m+n*v*m+u*a*y-n*p*y)*S,i[10]=(l*v*o-g*c*o+g*a*d-n*v*d-l*a*y+n*c*y)*S,i[11]=(u*c*o-l*p*o-u*a*d+n*p*d+l*a*m-n*c*m)*S,i[12]=C*S,i[13]=(u*v*r-g*p*r+g*a*f-n*v*f-u*a*b+n*p*b)*S,i[14]=(g*c*r-l*v*r-g*a*h+n*v*h+l*a*b-n*c*b)*S,i[15]=(l*p*r-u*c*r+u*a*h-n*p*h-l*a*f+n*c*f)*S,this}scale(t){const e=this.elements,i=t.x,s=t.y,n=t.z;return e[0]*=i,e[4]*=s,e[8]*=n,e[1]*=i,e[5]*=s,e[9]*=n,e[2]*=i,e[6]*=s,e[10]*=n,e[3]*=i,e[7]*=s,e[11]*=n,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,s))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),s=Math.sin(e),n=1-i,a=t.x,r=t.y,o=t.z,l=n*a,c=n*r;return this.set(l*a+i,l*r-s*o,l*o+s*r,0,l*r+s*o,c*r+i,c*o-s*a,0,l*o-s*r,c*o+s*a,n*o*o+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this}compose(t,e,i){const s=this.elements,n=e._x,a=e._y,r=e._z,o=e._w,l=n+n,c=a+a,h=r+r,d=n*l,u=n*c,p=n*h,f=a*c,m=a*h,g=r*h,v=o*l,b=o*c,y=o*h,_=i.x,x=i.y,w=i.z;return s[0]=(1-(f+g))*_,s[1]=(u+y)*_,s[2]=(p-b)*_,s[3]=0,s[4]=(u-y)*x,s[5]=(1-(d+g))*x,s[6]=(m+v)*x,s[7]=0,s[8]=(p+b)*w,s[9]=(m-v)*w,s[10]=(1-(d+f))*w,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,e,i){const s=this.elements;let n=qi.set(s[0],s[1],s[2]).length();const a=qi.set(s[4],s[5],s[6]).length(),r=qi.set(s[8],s[9],s[10]).length(),o=this.determinant();o<0&&(n=-n),t.x=s[12],t.y=s[13],t.z=s[14],Xi.copy(this);const l=1/n,c=1/a,h=1/r;return Xi.elements[0]*=l,Xi.elements[1]*=l,Xi.elements[2]*=l,Xi.elements[4]*=c,Xi.elements[5]*=c,Xi.elements[6]*=c,Xi.elements[8]*=h,Xi.elements[9]*=h,Xi.elements[10]*=h,e.setFromRotationMatrix(Xi),i.x=n,i.y=a,i.z=r,this}makePerspective(t,e,i,s,n,a){const r=this.elements,o=2*n/(e-t),l=2*n/(i-s),c=(e+t)/(e-t),h=(i+s)/(i-s),d=-(a+n)/(a-n),u=-2*a*n/(a-n);return r[0]=o,r[4]=0,r[8]=c,r[12]=0,r[1]=0,r[5]=l,r[9]=h,r[13]=0,r[2]=0,r[6]=0,r[10]=d,r[14]=u,r[3]=0,r[7]=0,r[11]=-1,r[15]=0,this}makeOrthographic(t,e,i,s,n,a){const r=this.elements,o=1/(e-t),l=1/(i-s),c=1/(a-n),h=(e+t)*o,d=(i+s)*l,u=(a+n)*c;return r[0]=2*o,r[4]=0,r[8]=0,r[12]=-h,r[1]=0,r[5]=2*l,r[9]=0,r[13]=-d,r[2]=0,r[6]=0,r[10]=-2*c,r[14]=-u,r[3]=0,r[7]=0,r[11]=0,r[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let s=0;s<16;s++)if(e[s]!==i[s])return!1;return!0}fromArray(t,e){void 0===e&&(e=0);for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const qi=new yi,Xi=new Yi,Qi=new yi(0,0,0),Zi=new yi(1,1,1),Ki=new yi,Ji=new yi,ts=new yi;class es{constructor(t=0,e=0,i=0,s=es.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=t,this._y=e,this._z=i,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,s){return this._x=t,this._y=e,this._z=i,this._order=s||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e,i){const s=li.clamp,n=t.elements,a=n[0],r=n[4],o=n[8],l=n[1],c=n[5],h=n[9],d=n[2],u=n[6],p=n[10];switch(e=e||this._order,e){case"XYZ":this._y=Math.asin(s(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-r,a)):(this._x=Math.atan2(u,c),this._z=0);break;case"YXZ":this._x=Math.asin(-s(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,a),this._z=0);break;case"ZXY":this._x=Math.asin(s(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-r,c)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-s(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(u,p),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-r,c));break;case"YZX":this._z=Math.asin(s(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(o,p));break;case"XZY":this._z=Math.asin(-s(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(u,c),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-h,p),this._y=0);break;default:}return this._order=e,!1!==i&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return is.makeRotationFromQuaternion(t),this.setFromRotationMatrix(is,e,i)}setFromVector3(t,e){return this.set(t.x,t.y,t.z,e||this._order)}reorder(t){return ss.setFromEuler(this),this.setFromQuaternion(ss,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new yi(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}es.DefaultOrder="XYZ",es.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const is=new Yi,ss=new bi;class ns{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!==(this.mask&t.mask)}}let as=0;const rs=new yi,os=new bi,ls=new Yi,cs=new yi,hs=new yi,ds=new yi,us=new bi,ps=new yi(1,0,0),fs=new yi(0,1,0),ms=new yi(0,0,1),gs={type:"added"},vs={type:"removed"};function bs(){Object.defineProperty(this,"id",{value:as++}),this.uuid=li.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=bs.DefaultUp.clone();const t=new yi,e=new es,i=new bi,s=new yi(1,1,1);function n(){i.setFromEuler(e,!1)}function a(){e.setFromQuaternion(i,void 0,!1)}e._onChange(n),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Yi},normalMatrix:{value:new hi}}),this.matrix=new Yi,this.matrixWorld=new Yi,this.matrixAutoUpdate=bs.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ns,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}bs.DefaultUp=new yi(0,1,0),bs.DefaultMatrixAutoUpdate=!0,bs.prototype=Object.assign(Object.create(ai.prototype),{constructor:bs,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return os.setFromAxisAngle(t,e),this.quaternion.multiply(os),this},rotateOnWorldAxis:function(t,e){return os.setFromAxisAngle(t,e),this.quaternion.premultiply(os),this},rotateX:function(t){return this.rotateOnAxis(ps,t)},rotateY:function(t){return this.rotateOnAxis(fs,t)},rotateZ:function(t){return this.rotateOnAxis(ms,t)},translateOnAxis:function(t,e){return rs.copy(t).applyQuaternion(this.quaternion),this.position.add(rs.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(ps,t)},translateY:function(t){return this.translateOnAxis(fs,t)},translateZ:function(t){return this.translateOnAxis(ms,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(ls.getInverse(this.matrixWorld))},lookAt:function(t,e,i){t.isVector3?cs.copy(t):cs.set(t,e,i);const s=this.parent;this.updateWorldMatrix(!0,!1),hs.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ls.lookAt(hs,cs,this.up):ls.lookAt(cs,hs,this.up),this.quaternion.setFromRotationMatrix(ls),s&&(ls.extractRotation(s.matrixWorld),os.setFromRotationMatrix(ls),this.quaternion.premultiply(os.inverse()))},add:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this||t&&t.isObject3D&&(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(gs)),this},remove:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(vs)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),ls.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),ls.multiply(t.parent.matrixWorld)),t.applyMatrix4(ls),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(let i=0,s=this.children.length;i<s;i++){const s=this.children[i],n=s.getObjectByProperty(t,e);if(void 0!==n)return n}},getWorldPosition:function(t){return void 0===t&&(t=new yi),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(t=new bi),this.updateMatrixWorld(!0),this.matrixWorld.decompose(hs,t,ds),t},getWorldScale:function(t){return void 0===t&&(t=new yi),this.updateMatrixWorld(!0),this.matrixWorld.decompose(hs,us,t),t},getWorldDirection:function(t){void 0===t&&(t=new yi),this.updateMatrixWorld(!0);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1===this.visible)return;t(this);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].traverseVisible(t)},traverseAncestors:function(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){const i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,i=t.length;e<i;e++)t[e].updateWorldMatrix(!1,!0)}},toJSON:function(t){const e=void 0===t||"string"===typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function n(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){s.geometry=n(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const i=e.shapes;if(Array.isArray(i))for(let e=0,s=i.length;e<s;e++){const s=i[e];n(t.shapes,s)}else n(t.shapes,i)}}if(void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let i=0,s=this.material.length;i<s;i++)e.push(n(t.materials,this.material[i]));s.material=e}else s.material=n(t.materials,this.material);if(this.children.length>0){s.children=[];for(let e=0;e<this.children.length;e++)s.children.push(this.children[e].toJSON(t).object)}if(e){const e=a(t.geometries),s=a(t.materials),n=a(t.textures),r=a(t.images),o=a(t.shapes);e.length>0&&(i.geometries=e),s.length>0&&(i.materials=s),n.length>0&&(i.textures=n),r.length>0&&(i.images=r),o.length>0&&(i.shapes=o)}return i.object=s,i;function a(t){const e=[];for(const i in t){const s=t[i];delete s.metadata,e.push(s)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let i=0;i<t.children.length;i++){const e=t.children[i];this.add(e.clone())}return this}});const ys=new yi,_s=new yi,xs=new hi;class ws{constructor(t,e){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==t?t:new yi(1,0,0),this.constant=void 0!==e?e:0}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,s){return this.normal.set(t,e,i),this.constant=s,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const s=ys.subVectors(i,e).cross(_s.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(s,t),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return void 0===e&&(e=new yi),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){void 0===e&&(e=new yi);const i=t.delta(ys),s=this.normal.dot(i);if(0===s)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;const n=-(t.start.dot(this.normal)+this.constant)/s;return n<0||n>1?void 0:e.copy(i).multiplyScalar(n).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return void 0===t&&(t=new yi),t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||xs.getNormalMatrix(t),s=this.coplanarPoint(ys).applyMatrix4(t),n=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(n),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}const Cs=new yi,ks=new yi,Ss=new yi,As=new yi,Os=new yi,js=new yi,Ms=new yi,Is=new yi,Ts=new yi,Es=new yi;class Ds{constructor(t,e,i){this.a=void 0!==t?t:new yi,this.b=void 0!==e?e:new yi,this.c=void 0!==i?i:new yi}static getNormal(t,e,i,s){void 0===s&&(s=new yi),s.subVectors(i,e),Cs.subVectors(t,e),s.cross(Cs);const n=s.lengthSq();return n>0?s.multiplyScalar(1/Math.sqrt(n)):s.set(0,0,0)}static getBarycoord(t,e,i,s,n){Cs.subVectors(s,e),ks.subVectors(i,e),Ss.subVectors(t,e);const a=Cs.dot(Cs),r=Cs.dot(ks),o=Cs.dot(Ss),l=ks.dot(ks),c=ks.dot(Ss),h=a*l-r*r;if(void 0===n&&(n=new yi),0===h)return n.set(-2,-1,-1);const d=1/h,u=(l*o-r*c)*d,p=(a*c-r*o)*d;return n.set(1-u-p,p,u)}static containsPoint(t,e,i,s){return this.getBarycoord(t,e,i,s,As),As.x>=0&&As.y>=0&&As.x+As.y<=1}static getUV(t,e,i,s,n,a,r,o){return this.getBarycoord(t,e,i,s,As),o.set(0,0),o.addScaledVector(n,As.x),o.addScaledVector(a,As.y),o.addScaledVector(r,As.z),o}static isFrontFacing(t,e,i,s){return Cs.subVectors(i,e),ks.subVectors(t,e),Cs.cross(ks).dot(s)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,s){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[s]),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Cs.subVectors(this.c,this.b),ks.subVectors(this.a,this.b),.5*Cs.cross(ks).length()}getMidpoint(t){return void 0===t&&(t=new yi),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Ds.getNormal(this.a,this.b,this.c,t)}getPlane(t){return void 0===t&&(t=new ws),t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Ds.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,i,s,n){return Ds.getUV(t,this.a,this.b,this.c,e,i,s,n)}containsPoint(t){return Ds.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Ds.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){void 0===e&&(e=new yi);const i=this.a,s=this.b,n=this.c;let a,r;Os.subVectors(s,i),js.subVectors(n,i),Is.subVectors(t,i);const o=Os.dot(Is),l=js.dot(Is);if(o<=0&&l<=0)return e.copy(i);Ts.subVectors(t,s);const c=Os.dot(Ts),h=js.dot(Ts);if(c>=0&&h<=c)return e.copy(s);const d=o*h-c*l;if(d<=0&&o>=0&&c<=0)return a=o/(o-c),e.copy(i).addScaledVector(Os,a);Es.subVectors(t,n);const u=Os.dot(Es),p=js.dot(Es);if(p>=0&&u<=p)return e.copy(n);const f=u*l-o*p;if(f<=0&&l>=0&&p<=0)return r=l/(l-p),e.copy(i).addScaledVector(js,r);const m=c*p-u*h;if(m<=0&&h-c>=0&&u-p>=0)return Ms.subVectors(n,s),r=(h-c)/(h-c+(u-p)),e.copy(s).addScaledVector(Ms,r);const g=1/(m+f+d);return a=f*g,r=d*g,e.copy(i).addScaledVector(Os,a).addScaledVector(js,r)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const Ls={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ps={h:0,s:0,l:0},Rs={h:0,s:0,l:0};function zs(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}function Ns(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Bs(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class Fs{constructor(t,e,i){return Object.defineProperty(this,"isColor",{value:!0}),void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}set(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,e,i){return this.r=t,this.g=e,this.b=i,this}setHSL(t,e,i){if(t=li.euclideanModulo(t,1),e=li.clamp(e,0,1),i=li.clamp(i,0,1),0===e)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+e):i+e-i*e,n=2*i-s;this.r=zs(n,s,t+1/3),this.g=zs(n,s,t),this.b=zs(n,s,t-1/3)}return this}setStyle(t){function e(t){void 0!==t&&parseFloat(t)}let i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){let t;const s=i[1],n=i[2];switch(s){case"rgb":case"rgba":if(t=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,e(t[5]),this;if(t=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,e(t[5]),this;break;case"hsl":case"hsla":if(t=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){const i=parseFloat(t[1])/360,s=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100;return e(t[5]),this.setHSL(i,s,n)}break}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){const t=i[1],e=t.length;if(3===e)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===e)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=Ls[t];return void 0!==e&&this.setHex(e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t,e){void 0===e&&(e=2);const i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=Ns(t.r),this.g=Ns(t.g),this.b=Ns(t.b),this}copyLinearToSRGB(t){return this.r=Bs(t.r),this.g=Bs(t.g),this.b=Bs(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){void 0===t&&(t={h:0,s:0,l:0});const e=this.r,i=this.g,s=this.b,n=Math.max(e,i,s),a=Math.min(e,i,s);let r,o;const l=(a+n)/2;if(a===n)r=0,o=0;else{const t=n-a;switch(o=l<=.5?t/(n+a):t/(2-n-a),n){case e:r=(i-s)/t+(i<s?6:0);break;case i:r=(s-e)/t+2;break;case s:r=(e-i)/t+4;break}r/=6}return t.h=r,t.s=o,t.l=l,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,e,i){return this.getHSL(Ps),Ps.h+=t,Ps.s+=e,Ps.l+=i,this.setHSL(Ps.h,Ps.s,Ps.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpHSL(t,e){this.getHSL(Ps),t.getHSL(Rs);const i=li.lerp(Ps.h,Rs.h,e),s=li.lerp(Ps.s,Rs.s,e),n=li.lerp(Ps.l,Rs.l,e);return this.setHSL(i,s,n),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Fs.NAMES=Ls,Fs.prototype.r=1,Fs.prototype.g=1,Fs.prototype.b=1;class $s{constructor(t,e,i,s,n,a){this.a=t,this.b=e,this.c=i,this.normal=s&&s.isVector3?s:new yi,this.vertexNormals=Array.isArray(s)?s:[],this.color=n&&n.isColor?n:new Fs,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=void 0!==a?a:0}clone(){return(new this.constructor).copy(this)}copy(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(let e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(let e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}let Us=0;function Hs(){Object.defineProperty(this,"id",{value:Us++}),this.uuid=li.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=v,this.side=u,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=T,this.blendDst=E,this.blendEquation=w,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=$,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ei,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ti,this.stencilZFail=ti,this.stencilZPass=ti,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function Vs(t){Hs.call(this),this.type="MeshBasicMaterial",this.color=new Fs(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=W,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}Hs.prototype=Object.assign(Object.create(ai.prototype),{constructor:Hs,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(void 0!==t)for(const e in t){const i=t[e];if(void 0===i)continue;if("shading"===e){this.flatShading=i===m;continue}const s=this[e];void 0!==s&&(s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[e]=i)}},toJSON:function(t){const e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function s(t){const e=[];for(const i in t){const s=t[i];delete s.metadata,e.push(s)}return e}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(i.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,i.reflectivity=this.reflectivity,i.refractionRatio=this.refractionRatio,void 0!==this.combine&&(i.combine=this.combine),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==v&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==u&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.morphNormals&&(i.morphNormals=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),e){const e=s(t.textures),n=s(t.images);e.length>0&&(i.textures=e),n.length>0&&(i.images=n)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(null!==e){const t=e.length;i=new Array(t);for(let s=0;s!==t;++s)i[s]=e[s].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Hs.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Vs.prototype=Object.create(Hs.prototype),Vs.prototype.constructor=Vs,Vs.prototype.isMeshBasicMaterial=!0,Vs.prototype.copy=function(t){return Hs.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};const Gs=new yi,Ws=new ci;function Ys(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.usage=ii,this.updateRange={offset:0,count:-1},this.version=0}function qs(t,e,i){Ys.call(this,new Int8Array(t),e,i)}function Xs(t,e,i){Ys.call(this,new Uint8Array(t),e,i)}function Qs(t,e,i){Ys.call(this,new Uint8ClampedArray(t),e,i)}function Zs(t,e,i){Ys.call(this,new Int16Array(t),e,i)}function Ks(t,e,i){Ys.call(this,new Uint16Array(t),e,i)}function Js(t,e,i){Ys.call(this,new Int32Array(t),e,i)}function tn(t,e,i){Ys.call(this,new Uint32Array(t),e,i)}function en(t,e,i){Ys.call(this,new Float32Array(t),e,i)}function sn(t,e,i){Ys.call(this,new Float64Array(t),e,i)}Object.defineProperty(Ys.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Ys.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let s=0,n=this.itemSize;s<n;s++)this.array[t+s]=e.array[i+s];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){const e=this.array;let i=0;for(let s=0,n=t.length;s<n;s++){let n=t[s];void 0===n&&(n=new Fs),e[i++]=n.r,e[i++]=n.g,e[i++]=n.b}return this},copyVector2sArray:function(t){const e=this.array;let i=0;for(let s=0,n=t.length;s<n;s++){let n=t[s];void 0===n&&(n=new ci),e[i++]=n.x,e[i++]=n.y}return this},copyVector3sArray:function(t){const e=this.array;let i=0;for(let s=0,n=t.length;s<n;s++){let n=t[s];void 0===n&&(n=new yi),e[i++]=n.x,e[i++]=n.y,e[i++]=n.z}return this},copyVector4sArray:function(t){const e=this.array;let i=0;for(let s=0,n=t.length;s<n;s++){let n=t[s];void 0===n&&(n=new mi),e[i++]=n.x,e[i++]=n.y,e[i++]=n.z,e[i++]=n.w}return this},applyMatrix3:function(t){if(2===this.itemSize)for(let e=0,i=this.count;e<i;e++)Ws.fromBufferAttribute(this,e),Ws.applyMatrix3(t),this.setXY(e,Ws.x,Ws.y);else if(3===this.itemSize)for(let e=0,i=this.count;e<i;e++)Gs.fromBufferAttribute(this,e),Gs.applyMatrix3(t),this.setXYZ(e,Gs.x,Gs.y,Gs.z);return this},applyMatrix4:function(t){for(let e=0,i=this.count;e<i;e++)Gs.x=this.getX(e),Gs.y=this.getY(e),Gs.z=this.getZ(e),Gs.applyMatrix4(t),this.setXYZ(e,Gs.x,Gs.y,Gs.z);return this},applyNormalMatrix:function(t){for(let e=0,i=this.count;e<i;e++)Gs.x=this.getX(e),Gs.y=this.getY(e),Gs.z=this.getZ(e),Gs.applyNormalMatrix(t),this.setXYZ(e,Gs.x,Gs.y,Gs.z);return this},transformDirection:function(t){for(let e=0,i=this.count;e<i;e++)Gs.x=this.getX(e),Gs.y=this.getY(e),Gs.z=this.getZ(e),Gs.transformDirection(t),this.setXYZ(e,Gs.x,Gs.y,Gs.z);return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,s){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=s,this},setXYZW:function(t,e,i,s,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=s,this.array[t+3]=n,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),qs.prototype=Object.create(Ys.prototype),qs.prototype.constructor=qs,Xs.prototype=Object.create(Ys.prototype),Xs.prototype.constructor=Xs,Qs.prototype=Object.create(Ys.prototype),Qs.prototype.constructor=Qs,Zs.prototype=Object.create(Ys.prototype),Zs.prototype.constructor=Zs,Ks.prototype=Object.create(Ys.prototype),Ks.prototype.constructor=Ks,Js.prototype=Object.create(Ys.prototype),Js.prototype.constructor=Js,tn.prototype=Object.create(Ys.prototype),tn.prototype.constructor=tn,en.prototype=Object.create(Ys.prototype),en.prototype.constructor=en,sn.prototype=Object.create(Ys.prototype),sn.prototype.constructor=sn;class nn{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(t){const e=[];let i,s,n=void 0;const a=t.faces;for(s=0;s<a.length;s++){const t=a[s];t.materialIndex!==n&&(n=t.materialIndex,void 0!==i&&(i.count=3*s-i.start,e.push(i)),i={start:3*s,materialIndex:n})}void 0!==i&&(i.count=3*s-i.start,e.push(i)),this.groups=e}fromGeometry(t){const e=t.faces,i=t.vertices,s=t.faceVertexUvs,n=s[0]&&s[0].length>0,a=s[1]&&s[1].length>0,r=t.morphTargets,o=r.length;let l;if(o>0){l=[];for(let t=0;t<o;t++)l[t]={name:r[t].name,data:[]};this.morphTargets.position=l}const c=t.morphNormals,h=c.length;let d;if(h>0){d=[];for(let t=0;t<h;t++)d[t]={name:c[t].name,data:[]};this.morphTargets.normal=d}const u=t.skinIndices,p=t.skinWeights,f=u.length===i.length,m=p.length===i.length;i.length>0&&e.length;for(let g=0;g<e.length;g++){const t=e[g];this.vertices.push(i[t.a],i[t.b],i[t.c]);const v=t.vertexNormals;if(3===v.length)this.normals.push(v[0],v[1],v[2]);else{const e=t.normal;this.normals.push(e,e,e)}const b=t.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{const e=t.color;this.colors.push(e,e,e)}if(!0===n){const t=s[0][g];void 0!==t?this.uvs.push(t[0],t[1],t[2]):this.uvs.push(new ci,new ci,new ci)}if(!0===a){const t=s[1][g];void 0!==t?this.uvs2.push(t[0],t[1],t[2]):this.uvs2.push(new ci,new ci,new ci)}for(let e=0;e<o;e++){const i=r[e].vertices;l[e].data.push(i[t.a],i[t.b],i[t.c])}for(let e=0;e<h;e++){const t=c[e].vertexNormals[g];d[e].data.push(t.a,t.b,t.c)}f&&this.skinIndices.push(u[t.a],u[t.b],u[t.c]),m&&this.skinWeights.push(p[t.a],p[t.b],p[t.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}}function an(t){if(0===t.length)return-1/0;let e=t[0];for(let i=1,s=t.length;i<s;++i)t[i]>e&&(e=t[i]);return e}let rn=1;const on=new Yi,ln=new bs,cn=new yi,hn=new wi,dn=new wi,un=new yi;function pn(){Object.defineProperty(this,"id",{value:rn+=2}),this.uuid=li.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}pn.prototype=Object.assign(Object.create(ai.prototype),{constructor:pn,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(an(t)>65535?tn:Ks)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const e=(new hi).getNormalMatrix(t);i.applyNormalMatrix(e),i.needsUpdate=!0}const s=this.attributes.tangent;return void 0!==s&&(s.transformDirection(t),s.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return on.makeRotationX(t),this.applyMatrix4(on),this},rotateY:function(t){return on.makeRotationY(t),this.applyMatrix4(on),this},rotateZ:function(t){return on.makeRotationZ(t),this.applyMatrix4(on),this},translate:function(t,e,i){return on.makeTranslation(t,e,i),this.applyMatrix4(on),this},scale:function(t,e,i){return on.makeScale(t,e,i),this.applyMatrix4(on),this},lookAt:function(t){return ln.lookAt(t),ln.updateMatrix(),this.applyMatrix4(ln.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(cn).negate(),this.translate(cn.x,cn.y,cn.z),this},setFromObject:function(t){const e=t.geometry;if(t.isPoints||t.isLine){const t=new en(3*e.vertices.length,3),i=new en(3*e.colors.length,3);if(this.setAttribute("position",t.copyVector3sArray(e.vertices)),this.setAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){const t=new en(e.lineDistances.length,1);this.setAttribute("lineDistance",t.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){const e=[];for(let i=0,s=t.length;i<s;i++){const s=t[i];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new en(e,3)),this},updateFromObject:function(t){let e=t.geometry;if(t.isMesh){let t=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(t=void 0,e.elementsNeedUpdate=!1),void 0===t)return this.fromGeometry(e);t.verticesNeedUpdate=e.verticesNeedUpdate,t.normalsNeedUpdate=e.normalsNeedUpdate,t.colorsNeedUpdate=e.colorsNeedUpdate,t.uvsNeedUpdate=e.uvsNeedUpdate,t.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=t}if(!0===e.verticesNeedUpdate){const t=this.attributes.position;void 0!==t&&(t.copyVector3sArray(e.vertices),t.needsUpdate=!0),e.verticesNeedUpdate=!1}if(!0===e.normalsNeedUpdate){const t=this.attributes.normal;void 0!==t&&(t.copyVector3sArray(e.normals),t.needsUpdate=!0),e.normalsNeedUpdate=!1}if(!0===e.colorsNeedUpdate){const t=this.attributes.color;void 0!==t&&(t.copyColorsArray(e.colors),t.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){const t=this.attributes.uv;void 0!==t&&(t.copyVector2sArray(e.uvs),t.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){const t=this.attributes.lineDistance;void 0!==t&&(t.copyArray(e.lineDistances),t.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new nn).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){const e=new Float32Array(3*t.vertices.length);if(this.setAttribute("position",new Ys(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){const e=new Float32Array(3*t.normals.length);this.setAttribute("normal",new Ys(e,3).copyVector3sArray(t.normals))}if(t.colors.length>0){const e=new Float32Array(3*t.colors.length);this.setAttribute("color",new Ys(e,3).copyColorsArray(t.colors))}if(t.uvs.length>0){const e=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new Ys(e,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){const e=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new Ys(e,2).copyVector2sArray(t.uvs2))}this.groups=t.groups;for(const i in t.morphTargets){const e=[],s=t.morphTargets[i];for(let t=0,i=s.length;t<i;t++){const i=s[t],n=new en(3*i.data.length,3);n.name=i.name,e.push(n.copyVector3sArray(i.data))}this.morphAttributes[i]=e}if(t.skinIndices.length>0){const e=new en(4*t.skinIndices.length,4);this.setAttribute("skinIndex",e.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){const e=new en(4*t.skinWeights.length,4);this.setAttribute("skinWeight",e.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new wi);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)this.boundingBox.set(new yi(-1/0,-1/0,-1/0),new yi(1/0,1/0,1/0));else{if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const i=e[t];hn.setFromBufferAttribute(i),this.morphTargetsRelative?(un.addVectors(this.boundingBox.min,hn.min),this.boundingBox.expandByPoint(un),un.addVectors(this.boundingBox.max,hn.max),this.boundingBox.expandByPoint(un)):(this.boundingBox.expandByPoint(hn.min),this.boundingBox.expandByPoint(hn.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Ni);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)this.boundingSphere.set(new yi,1/0);else if(t){const i=this.boundingSphere.center;if(hn.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const i=e[t];dn.setFromBufferAttribute(i),this.morphTargetsRelative?(un.addVectors(hn.min,dn.min),hn.expandByPoint(un),un.addVectors(hn.max,dn.max),hn.expandByPoint(un)):(hn.expandByPoint(dn.min),hn.expandByPoint(dn.max))}hn.getCenter(i);let s=0;for(let e=0,n=t.count;e<n;e++)un.fromBufferAttribute(t,e),s=Math.max(s,i.distanceToSquared(un));if(e)for(let n=0,a=e.length;n<a;n++){const a=e[n],r=this.morphTargetsRelative;for(let e=0,n=a.count;e<n;e++)un.fromBufferAttribute(a,e),r&&(cn.fromBufferAttribute(t,e),un.add(cn)),s=Math.max(s,i.distanceToSquared(un))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)}},computeFaceNormals:function(){},computeVertexNormals:function(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let i=this.getAttribute("normal");if(void 0===i)i=new Ys(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(let t=0,e=i.count;t<e;t++)i.setXYZ(t,0,0,0);const s=new yi,n=new yi,a=new yi,r=new yi,o=new yi,l=new yi,c=new yi,h=new yi;if(t)for(let d=0,u=t.count;d<u;d+=3){const u=t.getX(d+0),p=t.getX(d+1),f=t.getX(d+2);s.fromBufferAttribute(e,u),n.fromBufferAttribute(e,p),a.fromBufferAttribute(e,f),c.subVectors(a,n),h.subVectors(s,n),c.cross(h),r.fromBufferAttribute(i,u),o.fromBufferAttribute(i,p),l.fromBufferAttribute(i,f),r.add(c),o.add(c),l.add(c),i.setXYZ(u,r.x,r.y,r.z),i.setXYZ(p,o.x,o.y,o.z),i.setXYZ(f,l.x,l.y,l.z)}else for(let t=0,d=e.count;t<d;t+=3)s.fromBufferAttribute(e,t+0),n.fromBufferAttribute(e,t+1),a.fromBufferAttribute(e,t+2),c.subVectors(a,n),h.subVectors(s,n),c.cross(h),i.setXYZ(t+0,c.x,c.y,c.z),i.setXYZ(t+1,c.x,c.y,c.z),i.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}},merge:function(t,e){if(!t||!t.isBufferGeometry)return;void 0===e&&(e=0);const i=this.attributes;for(const s in i){if(void 0===t.attributes[s])continue;const n=i[s],a=n.array,r=t.attributes[s],o=r.array,l=r.itemSize*e,c=Math.min(o.length,a.length-l);for(let t=0,e=l;t<c;t++,e++)a[e]=o[t]}return this},normalizeNormals:function(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)un.fromBufferAttribute(t,e),un.normalize(),t.setXYZ(e,un.x,un.y,un.z)},toNonIndexed:function(){function t(t,e){const i=t.array,s=t.itemSize,n=t.normalized,a=new i.constructor(e.length*s);let r=0,o=0;for(let l=0,c=e.length;l<c;l++){r=e[l]*s;for(let t=0;t<s;t++)a[o++]=i[r++]}return new Ys(a,s,n)}if(null===this.index)return this;const e=new pn,i=this.index.array,s=this.attributes;for(const r in s){const n=s[r],a=t(n,i);e.setAttribute(r,a)}const n=this.morphAttributes;for(const r in n){const s=[],a=n[r];for(let e=0,n=a.length;e<n;e++){const n=a[e],r=t(n,i);s.push(r)}e.morphAttributes[r]=s}e.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let r=0,o=a.length;r<o;r++){const t=a[r];e.addGroup(t.start,t.count,t.materialIndex)}return e},toJSON:function(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const o in i){const e=i[o],s=e.toJSON(t.data);""!==e.name&&(s.name=e.name),t.data.attributes[o]=s}const s={};let n=!1;for(const o in this.morphAttributes){const e=this.morphAttributes[o],i=[];for(let s=0,n=e.length;s<n;s++){const n=e[s],a=n.toJSON(t.data);""!==n.name&&(a.name=n.name),i.push(a)}i.length>0&&(s[o]=i,n=!0)}n&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const r=this.boundingSphere;return null!==r&&(t.data.boundingSphere={center:r.center.toArray(),radius:r.radius}),t},clone:function(){return(new pn).copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;null!==i&&this.setIndex(i.clone(e));const s=t.attributes;for(const l in s){const t=s[l];this.setAttribute(l,t.clone(e))}const n=t.morphAttributes;for(const l in n){const t=[],i=n[l];for(let s=0,n=i.length;s<n;s++)t.push(i[s].clone(e));this.morphAttributes[l]=t}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let l=0,c=a.length;l<c;l++){const t=a[l];this.addGroup(t.start,t.count,t.materialIndex)}const r=t.boundingBox;null!==r&&(this.boundingBox=r.clone());const o=t.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const fn=new Yi,mn=new Wi,gn=new Ni,vn=new yi,bn=new yi,yn=new yi,_n=new yi,xn=new yi,wn=new yi,Cn=new yi,kn=new yi,Sn=new yi,An=new ci,On=new ci,jn=new ci,Mn=new yi,In=new yi;function Tn(t,e){bs.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new pn,this.material=void 0!==e?e:new Vs,this.updateMorphTargets()}function En(t,e,i,s,n,a,r,o){let l;if(l=e.side===p?s.intersectTriangle(r,a,n,!0,o):s.intersectTriangle(n,a,r,e.side!==f,o),null===l)return null;In.copy(o),In.applyMatrix4(t.matrixWorld);const c=i.ray.origin.distanceTo(In);return c<i.near||c>i.far?null:{distance:c,point:In.clone(),object:t}}function Dn(t,e,i,s,n,a,r,o,l,c,h,d){vn.fromBufferAttribute(n,c),bn.fromBufferAttribute(n,h),yn.fromBufferAttribute(n,d);const u=t.morphTargetInfluences;if(e.morphTargets&&a&&u){Cn.set(0,0,0),kn.set(0,0,0),Sn.set(0,0,0);for(let t=0,e=a.length;t<e;t++){const e=u[t],i=a[t];0!==e&&(_n.fromBufferAttribute(i,c),xn.fromBufferAttribute(i,h),wn.fromBufferAttribute(i,d),r?(Cn.addScaledVector(_n,e),kn.addScaledVector(xn,e),Sn.addScaledVector(wn,e)):(Cn.addScaledVector(_n.sub(vn),e),kn.addScaledVector(xn.sub(bn),e),Sn.addScaledVector(wn.sub(yn),e)))}vn.add(Cn),bn.add(kn),yn.add(Sn)}t.isSkinnedMesh&&(t.boneTransform(c,vn),t.boneTransform(h,bn),t.boneTransform(d,yn));const p=En(t,e,i,s,vn,bn,yn,Mn);if(p){o&&(An.fromBufferAttribute(o,c),On.fromBufferAttribute(o,h),jn.fromBufferAttribute(o,d),p.uv=Ds.getUV(Mn,vn,bn,yn,An,On,jn,new ci)),l&&(An.fromBufferAttribute(l,c),On.fromBufferAttribute(l,h),jn.fromBufferAttribute(l,d),p.uv2=Ds.getUV(Mn,vn,bn,yn,An,On,jn,new ci));const t=new $s(c,h,d);Ds.getNormal(vn,bn,yn,t.normal),p.face=t}return p}Tn.prototype=Object.assign(Object.create(bs.prototype),{constructor:Tn,isMesh:!0,copy:function(t){return bs.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const t=e[i[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,i=t.length;e<i;e++){const i=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length}},raycast:function(t,e){const i=this.geometry,s=this.material,n=this.matrixWorld;if(void 0===s)return;if(null===i.boundingSphere&&i.computeBoundingSphere(),gn.copy(i.boundingSphere),gn.applyMatrix4(n),!1===t.ray.intersectsSphere(gn))return;if(fn.getInverse(n),mn.copy(t.ray).applyMatrix4(fn),null!==i.boundingBox&&!1===mn.intersectsBox(i.boundingBox))return;let a;if(i.isBufferGeometry){const n=i.index,r=i.attributes.position,o=i.morphAttributes.position,l=i.morphTargetsRelative,c=i.attributes.uv,h=i.attributes.uv2,d=i.groups,u=i.drawRange;if(null!==n)if(Array.isArray(s))for(let i=0,p=d.length;i<p;i++){const p=d[i],f=s[p.materialIndex],m=Math.max(p.start,u.start),g=Math.min(p.start+p.count,u.start+u.count);for(let i=m,s=g;i<s;i+=3){const s=n.getX(i),d=n.getX(i+1),u=n.getX(i+2);a=Dn(this,f,t,mn,r,o,l,c,h,s,d,u),a&&(a.faceIndex=Math.floor(i/3),a.face.materialIndex=p.materialIndex,e.push(a))}}else{const i=Math.max(0,u.start),d=Math.min(n.count,u.start+u.count);for(let u=i,p=d;u<p;u+=3){const i=n.getX(u),d=n.getX(u+1),p=n.getX(u+2);a=Dn(this,s,t,mn,r,o,l,c,h,i,d,p),a&&(a.faceIndex=Math.floor(u/3),e.push(a))}}else if(void 0!==r)if(Array.isArray(s))for(let i=0,p=d.length;i<p;i++){const n=d[i],p=s[n.materialIndex],f=Math.max(n.start,u.start),m=Math.min(n.start+n.count,u.start+u.count);for(let i=f,s=m;i<s;i+=3){const s=i,d=i+1,u=i+2;a=Dn(this,p,t,mn,r,o,l,c,h,s,d,u),a&&(a.faceIndex=Math.floor(i/3),a.face.materialIndex=n.materialIndex,e.push(a))}}else{const i=Math.max(0,u.start),n=Math.min(r.count,u.start+u.count);for(let d=i,u=n;d<u;d+=3){const i=d,n=d+1,u=d+2;a=Dn(this,s,t,mn,r,o,l,c,h,i,n,u),a&&(a.faceIndex=Math.floor(d/3),e.push(a))}}}else if(i.isGeometry){const n=Array.isArray(s),r=i.vertices,o=i.faces;let l;const c=i.faceVertexUvs[0];c.length>0&&(l=c);for(let i=0,h=o.length;i<h;i++){const c=o[i],h=n?s[c.materialIndex]:s;if(void 0===h)continue;const d=r[c.a],u=r[c.b],p=r[c.c];if(a=En(this,h,t,mn,d,u,p,Mn),a){if(l&&l[i]){const t=l[i];An.copy(t[0]),On.copy(t[1]),jn.copy(t[2]),a.uv=Ds.getUV(Mn,d,u,p,An,On,jn,new ci)}a.face=c,a.faceIndex=i,e.push(a)}}}}});let Ln=0;const Pn=new Yi,Rn=new bs,zn=new yi;function Nn(){Object.defineProperty(this,"id",{value:Ln+=2}),this.uuid=li.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Nn.prototype=Object.assign(Object.create(ai.prototype),{constructor:Nn,isGeometry:!0,applyMatrix4:function(t){const e=(new hi).getNormalMatrix(t);for(let i=0,s=this.vertices.length;i<s;i++){const e=this.vertices[i];e.applyMatrix4(t)}for(let i=0,s=this.faces.length;i<s;i++){const t=this.faces[i];t.normal.applyMatrix3(e).normalize();for(let i=0,s=t.vertexNormals.length;i<s;i++)t.vertexNormals[i].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return Pn.makeRotationX(t),this.applyMatrix4(Pn),this},rotateY:function(t){return Pn.makeRotationY(t),this.applyMatrix4(Pn),this},rotateZ:function(t){return Pn.makeRotationZ(t),this.applyMatrix4(Pn),this},translate:function(t,e,i){return Pn.makeTranslation(t,e,i),this.applyMatrix4(Pn),this},scale:function(t,e,i){return Pn.makeScale(t,e,i),this.applyMatrix4(Pn),this},lookAt:function(t){return Rn.lookAt(t),Rn.updateMatrix(),this.applyMatrix4(Rn.matrix),this},fromBufferGeometry:function(t){const e=this,i=null!==t.index?t.index:void 0,s=t.attributes;if(void 0===s.position)return this;const n=s.position,a=s.normal,r=s.color,o=s.uv,l=s.uv2;void 0!==l&&(this.faceVertexUvs[1]=[]);for(let d=0;d<n.count;d++)e.vertices.push((new yi).fromBufferAttribute(n,d)),void 0!==r&&e.colors.push((new Fs).fromBufferAttribute(r,d));function c(t,i,s,n){const c=void 0===r?[]:[e.colors[t].clone(),e.colors[i].clone(),e.colors[s].clone()],h=void 0===a?[]:[(new yi).fromBufferAttribute(a,t),(new yi).fromBufferAttribute(a,i),(new yi).fromBufferAttribute(a,s)],d=new $s(t,i,s,h,c,n);e.faces.push(d),void 0!==o&&e.faceVertexUvs[0].push([(new ci).fromBufferAttribute(o,t),(new ci).fromBufferAttribute(o,i),(new ci).fromBufferAttribute(o,s)]),void 0!==l&&e.faceVertexUvs[1].push([(new ci).fromBufferAttribute(l,t),(new ci).fromBufferAttribute(l,i),(new ci).fromBufferAttribute(l,s)])}const h=t.groups;if(h.length>0)for(let d=0;d<h.length;d++){const t=h[d],e=t.start,s=t.count;for(let n=e,a=e+s;n<a;n+=3)void 0!==i?c(i.getX(n),i.getX(n+1),i.getX(n+2),t.materialIndex):c(n,n+1,n+2,t.materialIndex)}else if(void 0!==i)for(let d=0;d<i.count;d+=3)c(i.getX(d),i.getX(d+1),i.getX(d+2));else for(let d=0;d<n.count;d+=3)c(d,d+1,d+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(zn).negate(),this.translate(zn.x,zn.y,zn.z),this},normalize:function(){this.computeBoundingSphere();const t=this.boundingSphere.center,e=this.boundingSphere.radius,i=0===e?1:1/e,s=new Yi;return s.set(i,0,0,-i*t.x,0,i,0,-i*t.y,0,0,i,-i*t.z,0,0,0,1),this.applyMatrix4(s),this},computeFaceNormals:function(){const t=new yi,e=new yi;for(let i=0,s=this.faces.length;i<s;i++){const s=this.faces[i],n=this.vertices[s.a],a=this.vertices[s.b],r=this.vertices[s.c];t.subVectors(r,a),e.subVectors(n,a),t.cross(e),t.normalize(),s.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);const e=new Array(this.vertices.length);for(let i=0,s=this.vertices.length;i<s;i++)e[i]=new yi;if(t){const t=new yi,i=new yi;for(let s=0,n=this.faces.length;s<n;s++){const n=this.faces[s],a=this.vertices[n.a],r=this.vertices[n.b],o=this.vertices[n.c];t.subVectors(o,r),i.subVectors(a,r),t.cross(i),e[n.a].add(t),e[n.b].add(t),e[n.c].add(t)}}else{this.computeFaceNormals();for(let t=0,i=this.faces.length;t<i;t++){const i=this.faces[t];e[i.a].add(i.normal),e[i.b].add(i.normal),e[i.c].add(i.normal)}}for(let i=0,s=this.vertices.length;i<s;i++)e[i].normalize();for(let i=0,s=this.faces.length;i<s;i++){const t=this.faces[i],s=t.vertexNormals;3===s.length?(s[0].copy(e[t.a]),s[1].copy(e[t.b]),s[2].copy(e[t.c])):(s[0]=e[t.a].clone(),s[1]=e[t.b].clone(),s[2]=e[t.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t],i=e.vertexNormals;3===i.length?(i[0].copy(e.normal),i[1].copy(e.normal),i[2].copy(e.normal)):(i[0]=e.normal.clone(),i[1]=e.normal.clone(),i[2]=e.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let e=0,i=this.faces.length;e<i;e++){const t=this.faces[e];t.__originalFaceNormal?t.__originalFaceNormal.copy(t.normal):t.__originalFaceNormal=t.normal.clone(),t.__originalVertexNormals||(t.__originalVertexNormals=[]);for(let e=0,i=t.vertexNormals.length;e<i;e++)t.__originalVertexNormals[e]?t.__originalVertexNormals[e].copy(t.vertexNormals[e]):t.__originalVertexNormals[e]=t.vertexNormals[e].clone()}const t=new Nn;t.faces=this.faces;for(let e=0,i=this.morphTargets.length;e<i;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];const t=this.morphNormals[e].faceNormals,i=this.morphNormals[e].vertexNormals;for(let e=0,s=this.faces.length;e<s;e++){const e=new yi,s={a:new yi,b:new yi,c:new yi};t.push(e),i.push(s)}}const i=this.morphNormals[e];t.vertices=this.morphTargets[e].vertices,t.computeFaceNormals(),t.computeVertexNormals();for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t],s=i.faceNormals[t],n=i.vertexNormals[t];s.copy(e.normal),n.a.copy(e.vertexNormals[0]),n.b.copy(e.vertexNormals[1]),n.c.copy(e.vertexNormals[2])}}for(let e=0,i=this.faces.length;e<i;e++){const t=this.faces[e];t.normal=t.__originalFaceNormal,t.vertexNormals=t.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new wi),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Ni),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(!t||!t.isGeometry)return;let s;const n=this.vertices.length,a=this.vertices,r=t.vertices,o=this.faces,l=t.faces,c=this.colors,h=t.colors;void 0===i&&(i=0),void 0!==e&&(s=(new hi).getNormalMatrix(e));for(let d=0,u=r.length;d<u;d++){const t=r[d],i=t.clone();void 0!==e&&i.applyMatrix4(e),a.push(i)}for(let d=0,u=h.length;d<u;d++)c.push(h[d].clone());for(let d=0,u=l.length;d<u;d++){const t=l[d];let e,a;const r=t.vertexNormals,c=t.vertexColors,h=new $s(t.a+n,t.b+n,t.c+n);h.normal.copy(t.normal),void 0!==s&&h.normal.applyMatrix3(s).normalize();for(let i=0,n=r.length;i<n;i++)e=r[i].clone(),void 0!==s&&e.applyMatrix3(s).normalize(),h.vertexNormals.push(e);h.color.copy(t.color);for(let i=0,s=c.length;i<s;i++)a=c[i],h.vertexColors.push(a.clone());h.materialIndex=t.materialIndex+i,o.push(h)}for(let d=0,u=t.faceVertexUvs.length;d<u;d++){const e=t.faceVertexUvs[d];void 0===this.faceVertexUvs[d]&&(this.faceVertexUvs[d]=[]);for(let t=0,i=e.length;t<i;t++){const i=e[t],s=[];for(let t=0,e=i.length;t<e;t++)s.push(i[t].clone());this.faceVertexUvs[d].push(s)}}},mergeMesh:function(t){t&&t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix))},mergeVertices:function(){const t={},e=[],i=[],s=4,n=Math.pow(10,s);for(let o=0,l=this.vertices.length;o<l;o++){const s=this.vertices[o],a=Math.round(s.x*n)+"_"+Math.round(s.y*n)+"_"+Math.round(s.z*n);void 0===t[a]?(t[a]=o,e.push(this.vertices[o]),i[o]=e.length-1):i[o]=i[t[a]]}const a=[];for(let o=0,l=this.faces.length;o<l;o++){const t=this.faces[o];t.a=i[t.a],t.b=i[t.b],t.c=i[t.c];const e=[t.a,t.b,t.c];for(let i=0;i<3;i++)if(e[i]===e[(i+1)%3]){a.push(o);break}}for(let o=a.length-1;o>=0;o--){const t=a[o];this.faces.splice(t,1);for(let e=0,i=this.faceVertexUvs.length;e<i;e++)this.faceVertexUvs[e].splice(t,1)}const r=this.vertices.length-e.length;return this.vertices=e,r},setFromPoints:function(t){this.vertices=[];for(let e=0,i=t.length;e<i;e++){const i=t[e];this.vertices.push(new yi(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){const t=this.faces,e=t.length;for(let o=0;o<e;o++)t[o]._id=o;function i(t,e){return t.materialIndex-e.materialIndex}t.sort(i);const s=this.faceVertexUvs[0],n=this.faceVertexUvs[1];let a,r;s&&s.length===e&&(a=[]),n&&n.length===e&&(r=[]);for(let o=0;o<e;o++){const e=t[o]._id;a&&a.push(s[e]),r&&r.push(n[e])}a&&(this.faceVertexUvs[0]=a),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){const t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){const e=this.parameters;for(const i in e)void 0!==e[i]&&(t[i]=e[i]);return t}const e=[];for(let p=0;p<this.vertices.length;p++){const t=this.vertices[p];e.push(t.x,t.y,t.z)}const i=[],s=[],n={},a=[],r={},o=[],l={};for(let p=0;p<this.faces.length;p++){const t=this.faces[p],e=!0,s=!1,n=void 0!==this.faceVertexUvs[0][p],a=t.normal.length()>0,r=t.vertexNormals.length>0,o=1!==t.color.r||1!==t.color.g||1!==t.color.b,l=t.vertexColors.length>0;let f=0;if(f=c(f,0,0),f=c(f,1,e),f=c(f,2,s),f=c(f,3,n),f=c(f,4,a),f=c(f,5,r),f=c(f,6,o),f=c(f,7,l),i.push(f),i.push(t.a,t.b,t.c),i.push(t.materialIndex),n){const t=this.faceVertexUvs[0][p];i.push(u(t[0]),u(t[1]),u(t[2]))}if(a&&i.push(h(t.normal)),r){const e=t.vertexNormals;i.push(h(e[0]),h(e[1]),h(e[2]))}if(o&&i.push(d(t.color)),l){const e=t.vertexColors;i.push(d(e[0]),d(e[1]),d(e[2]))}}function c(t,e,i){return i?t|1<<e:t&~(1<<e)}function h(t){const e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==n[e]||(n[e]=s.length/3,s.push(t.x,t.y,t.z)),n[e]}function d(t){const e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==r[e]||(r[e]=a.length,a.push(t.getHex())),r[e]}function u(t){const e=t.x.toString()+t.y.toString();return void 0!==l[e]||(l[e]=o.length/2,o.push(t.x,t.y)),l[e]}return t.data={},t.data.vertices=e,t.data.normals=s,a.length>0&&(t.data.colors=a),o.length>0&&(t.data.uvs=[o]),t.data.faces=i,t},clone:function(){return(new Nn).copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;const e=t.vertices;for(let d=0,u=e.length;d<u;d++)this.vertices.push(e[d].clone());const i=t.colors;for(let d=0,u=i.length;d<u;d++)this.colors.push(i[d].clone());const s=t.faces;for(let d=0,u=s.length;d<u;d++)this.faces.push(s[d].clone());for(let d=0,u=t.faceVertexUvs.length;d<u;d++){const e=t.faceVertexUvs[d];void 0===this.faceVertexUvs[d]&&(this.faceVertexUvs[d]=[]);for(let t=0,i=e.length;t<i;t++){const i=e[t],s=[];for(let t=0,e=i.length;t<e;t++){const e=i[t];s.push(e.clone())}this.faceVertexUvs[d].push(s)}}const n=t.morphTargets;for(let d=0,u=n.length;d<u;d++){const t={};if(t.name=n[d].name,void 0!==n[d].vertices){t.vertices=[];for(let e=0,i=n[d].vertices.length;e<i;e++)t.vertices.push(n[d].vertices[e].clone())}if(void 0!==n[d].normals){t.normals=[];for(let e=0,i=n[d].normals.length;e<i;e++)t.normals.push(n[d].normals[e].clone())}this.morphTargets.push(t)}const a=t.morphNormals;for(let d=0,u=a.length;d<u;d++){const t={};if(void 0!==a[d].vertexNormals){t.vertexNormals=[];for(let e=0,i=a[d].vertexNormals.length;e<i;e++){const i=a[d].vertexNormals[e],s={};s.a=i.a.clone(),s.b=i.b.clone(),s.c=i.c.clone(),t.vertexNormals.push(s)}}if(void 0!==a[d].faceNormals){t.faceNormals=[];for(let e=0,i=a[d].faceNormals.length;e<i;e++)t.faceNormals.push(a[d].faceNormals[e].clone())}this.morphNormals.push(t)}const r=t.skinWeights;for(let d=0,u=r.length;d<u;d++)this.skinWeights.push(r[d].clone());const o=t.skinIndices;for(let d=0,u=o.length;d<u;d++)this.skinIndices.push(o[d].clone());const l=t.lineDistances;for(let d=0,u=l.length;d<u;d++)this.lineDistances.push(l[d]);const c=t.boundingBox;null!==c&&(this.boundingBox=c.clone());const h=t.boundingSphere;return null!==h&&(this.boundingSphere=h.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class Bn extends Nn{constructor(t,e,i,s,n,a){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:s,heightSegments:n,depthSegments:a},this.fromBufferGeometry(new Fn(t,e,i,s,n,a)),this.mergeVertices()}}class Fn extends pn{constructor(t=1,e=1,i=1,s=1,n=1,a=1){super(),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:s,heightSegments:n,depthSegments:a};const r=this;s=Math.floor(s),n=Math.floor(n),a=Math.floor(a);const o=[],l=[],c=[],h=[];let d=0,u=0;function p(t,e,i,s,n,a,p,f,m,g,v){const b=a/m,y=p/g,_=a/2,x=p/2,w=f/2,C=m+1,k=g+1;let S=0,A=0;const O=new yi;for(let r=0;r<k;r++){const a=r*y-x;for(let o=0;o<C;o++){const d=o*b-_;O[t]=d*s,O[e]=a*n,O[i]=w,l.push(O.x,O.y,O.z),O[t]=0,O[e]=0,O[i]=f>0?1:-1,c.push(O.x,O.y,O.z),h.push(o/m),h.push(1-r/g),S+=1}}for(let r=0;r<g;r++)for(let t=0;t<m;t++){const e=d+t+C*r,i=d+t+C*(r+1),s=d+(t+1)+C*(r+1),n=d+(t+1)+C*r;o.push(e,i,n),o.push(i,s,n),A+=6}r.addGroup(u,A,v),u+=A,d+=S}p("z","y","x",-1,-1,i,e,t,a,n,0),p("z","y","x",1,-1,i,e,-t,a,n,1),p("x","z","y",1,1,t,i,e,s,a,2),p("x","z","y",1,-1,t,i,-e,s,a,3),p("x","y","z",1,-1,t,e,i,s,n,4),p("x","y","z",-1,-1,t,e,-i,s,n,5),this.setIndex(o),this.setAttribute("position",new en(l,3)),this.setAttribute("normal",new en(c,3)),this.setAttribute("uv",new en(h,2))}}function $n(t){const e={};for(const i in t){e[i]={};for(const s in t[i]){const n=t[i][s];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)?e[i][s]=n.clone():Array.isArray(n)?e[i][s]=n.slice():e[i][s]=n}}return e}function Un(t){const e={};for(let i=0;i<t.length;i++){const s=$n(t[i]);for(const t in s)e[t]=s[t]}return e}const Hn={clone:$n,merge:Un};var Vn="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Gn="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function Wn(t){Hs.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Vn,this.fragmentShader=Gn,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(t.attributes,this.setValues(t))}function Yn(){bs.call(this),this.type="Camera",this.matrixWorldInverse=new Yi,this.projectionMatrix=new Yi,this.projectionMatrixInverse=new Yi}function qn(t,e,i,s){Yn.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==s?s:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}Wn.prototype=Object.create(Hs.prototype),Wn.prototype.constructor=Wn,Wn.prototype.isShaderMaterial=!0,Wn.prototype.copy=function(t){return Hs.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=$n(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this},Wn.prototype.toJSON=function(t){const e=Hs.prototype.toJSON.call(this,t);e.glslVersion=this.glslVersion,e.uniforms={};for(const s in this.uniforms){const i=this.uniforms[s],n=i.value;n&&n.isTexture?e.uniforms[s]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[s]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[s]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[s]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[s]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[s]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[s]={type:"m4",value:n.toArray()}:e.uniforms[s]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const i={};for(const s in this.extensions)!0===this.extensions[s]&&(i[s]=!0);return Object.keys(i).length>0&&(e.extensions=i),e},Yn.prototype=Object.assign(Object.create(bs.prototype),{constructor:Yn,isCamera:!0,copy:function(t,e){return bs.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(t=new yi),this.updateMatrixWorld(!0);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){bs.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){bs.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),qn.prototype=Object.assign(Object.create(Yn.prototype),{constructor:qn,isPerspectiveCamera:!0,copy:function(t,e){return Yn.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){const e=.5*this.getFilmHeight()/t;this.fov=2*li.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){const t=Math.tan(.5*li.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*li.RAD2DEG*Math.atan(Math.tan(.5*li.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,s,n,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=s,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=this.near;let e=t*Math.tan(.5*li.DEG2RAD*this.fov)/this.zoom,i=2*e,s=this.aspect*i,n=-.5*s;const a=this.view;if(null!==this.view&&this.view.enabled){const t=a.fullWidth,r=a.fullHeight;n+=a.offsetX*s/t,e-=a.offsetY*i/r,s*=a.width/t,i*=a.height/r}const r=this.filmOffset;0!==r&&(n+=t*r/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+s,e,e-i,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){const e=bs.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});const Xn=90,Qn=1;function Zn(t,e,i){if(bs.call(this),this.type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return;this.renderTarget=i;const s=new qn(Xn,Qn,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new yi(1,0,0)),this.add(s);const n=new qn(Xn,Qn,t,e);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new yi(-1,0,0)),this.add(n);const a=new qn(Xn,Qn,t,e);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new yi(0,1,0)),this.add(a);const r=new qn(Xn,Qn,t,e);r.layers=this.layers,r.up.set(0,0,-1),r.lookAt(new yi(0,-1,0)),this.add(r);const o=new qn(Xn,Qn,t,e);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new yi(0,0,1)),this.add(o);const l=new qn(Xn,Qn,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new yi(0,0,-1)),this.add(l),this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();const c=t.xr.enabled,h=t.getRenderTarget();t.xr.enabled=!1;const d=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,s),t.setRenderTarget(i,1),t.render(e,n),t.setRenderTarget(i,2),t.render(e,a),t.setRenderTarget(i,3),t.render(e,r),t.setRenderTarget(i,4),t.render(e,o),i.texture.generateMipmaps=d,t.setRenderTarget(i,5),t.render(e,l),t.setRenderTarget(h),t.xr.enabled=c},this.clear=function(t,e,s,n){const a=t.getRenderTarget();for(let r=0;r<6;r++)t.setRenderTarget(i,r),t.clear(e,s,n);t.setRenderTarget(a)}}function Kn(t,e,i){Number.isInteger(e)&&(e=i),gi.call(this,t,t,e),this.texture.isWebGLCubeRenderTargetTexture=!0}function Jn(t,e,i,s,n,a,r,o,l,c,h,d){fi.call(this,null,a,r,o,l,c,s,n,h,d),this.image={data:t||null,width:e||1,height:i||1},this.magFilter=void 0!==l?l:dt,this.minFilter=void 0!==c?c:dt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}Zn.prototype=Object.create(bs.prototype),Zn.prototype.constructor=Zn,Kn.prototype=Object.create(gi.prototype),Kn.prototype.constructor=Kn,Kn.prototype.isWebGLCubeRenderTarget=!0,Kn.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=Tt,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t"},s=new Fn(5,5,5),n=new Wn({name:"CubemapFromEquirect",uniforms:$n(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:p,blending:g});n.uniforms.tEquirect.value=e;const a=new Tn(s,n),r=e.minFilter;e.minFilter===gt&&(e.minFilter=ft);const o=new Zn(1,10,this);return o.update(t,a),e.minFilter=r,a.geometry.dispose(),a.material.dispose(),this},Jn.prototype=Object.create(fi.prototype),Jn.prototype.constructor=Jn,Jn.prototype.isDataTexture=!0;const ta=new Ni,ea=new yi;class ia{constructor(t,e,i,s,n,a){this.planes=[void 0!==t?t:new ws,void 0!==e?e:new ws,void 0!==i?i:new ws,void 0!==s?s:new ws,void 0!==n?n:new ws,void 0!==a?a:new ws]}set(t,e,i,s,n,a){const r=this.planes;return r[0].copy(t),r[1].copy(e),r[2].copy(i),r[3].copy(s),r[4].copy(n),r[5].copy(a),this}clone(){return(new this.constructor).copy(this)}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const e=this.planes,i=t.elements,s=i[0],n=i[1],a=i[2],r=i[3],o=i[4],l=i[5],c=i[6],h=i[7],d=i[8],u=i[9],p=i[10],f=i[11],m=i[12],g=i[13],v=i[14],b=i[15];return e[0].setComponents(r-s,h-o,f-d,b-m).normalize(),e[1].setComponents(r+s,h+o,f+d,b+m).normalize(),e[2].setComponents(r+n,h+l,f+u,b+g).normalize(),e[3].setComponents(r-n,h-l,f-u,b-g).normalize(),e[4].setComponents(r-a,h-c,f-p,b-v).normalize(),e[5].setComponents(r+a,h+c,f+p,b+v).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),ta.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(ta)}intersectsSprite(t){return ta.center.set(0,0,0),ta.radius=.7071067811865476,ta.applyMatrix4(t.matrixWorld),this.intersectsSphere(ta)}intersectsSphere(t){const e=this.planes,i=t.center,s=-t.radius;for(let n=0;n<6;n++){const t=e[n].distanceToPoint(i);if(t<s)return!1}return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const s=e[i];if(ea.x=s.normal.x>0?t.max.x:t.min.x,ea.y=s.normal.y>0?t.max.y:t.min.y,ea.z=s.normal.z>0?t.max.z:t.min.z,s.distanceToPoint(ea)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}}function sa(){let t=null,e=!1,i=null,s=null;function n(e,a){i(e,a),s=t.requestAnimationFrame(n)}return{start:function(){!0!==e&&null!==i&&(s=t.requestAnimationFrame(n),e=!0)},stop:function(){t.cancelAnimationFrame(s),e=!1},setAnimationLoop:function(t){i=t},setContext:function(e){t=e}}}function na(t,e){const i=e.isWebGL2,s=new WeakMap;function n(e,i){const s=e.array,n=e.usage,a=t.createBuffer();t.bindBuffer(i,a),t.bufferData(i,s,n),e.onUploadCallback();let r=5126;return s instanceof Float32Array?r=5126:s instanceof Float64Array||(s instanceof Uint16Array?r=5123:s instanceof Int16Array?r=5122:s instanceof Uint32Array?r=5125:s instanceof Int32Array?r=5124:s instanceof Int8Array?r=5120:s instanceof Uint8Array&&(r=5121)),{buffer:a,type:r,bytesPerElement:s.BYTES_PER_ELEMENT,version:e.version}}function a(e,s,n){const a=s.array,r=s.updateRange;t.bindBuffer(n,e),-1===r.count?t.bufferSubData(n,0,a):(i?t.bufferSubData(n,r.offset*a.BYTES_PER_ELEMENT,a,r.offset,r.count):t.bufferSubData(n,r.offset*a.BYTES_PER_ELEMENT,a.subarray(r.offset,r.offset+r.count)),r.count=-1)}function r(t){return t.isInterleavedBufferAttribute&&(t=t.data),s.get(t)}function o(e){e.isInterleavedBufferAttribute&&(e=e.data);const i=s.get(e);i&&(t.deleteBuffer(i.buffer),s.delete(e))}function l(t,e){if(t.isGLBufferAttribute){var i=s.get(t);return void((!i||i.version<t.version)&&s.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const r=s.get(t);void 0===r?s.set(t,n(t,e)):r.version<t.version&&(a(r.buffer,t,e),r.version=t.version)}return{get:r,remove:o,update:l}}class aa extends Nn{constructor(t,e,i,s){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:s},this.fromBufferGeometry(new ra(t,e,i,s)),this.mergeVertices()}}class ra extends pn{constructor(t,e,i,s){super(),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:s},t=t||1,e=e||1;const n=t/2,a=e/2,r=Math.floor(i)||1,o=Math.floor(s)||1,l=r+1,c=o+1,h=t/r,d=e/o,u=[],p=[],f=[],m=[];for(let g=0;g<c;g++){const t=g*d-a;for(let e=0;e<l;e++){const i=e*h-n;p.push(i,-t,0),f.push(0,0,1),m.push(e/r),m.push(1-g/o)}}for(let g=0;g<o;g++)for(let t=0;t<r;t++){const e=t+l*g,i=t+l*(g+1),s=t+1+l*(g+1),n=t+1+l*g;u.push(e,i,n),u.push(i,s,n)}this.setIndex(u),this.setAttribute("position",new en(p,3)),this.setAttribute("normal",new en(f,3)),this.setAttribute("uv",new en(m,2))}}var oa="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",la="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",ca="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",ha="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",da="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",ua="vec3 transformed = vec3( position );",pa="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",fa="vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",ma="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",ga="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",va="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",ba="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",ya="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",_a="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",xa="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",wa="#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",Ca="#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",ka="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",Sa="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",Aa="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",Oa="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",ja="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",Ma="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",Ia="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",Ta="gl_FragColor = linearToOutputTexel( gl_FragColor );",Ea="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",Da="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",La="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",Pa="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",Ra="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",za="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",Na="#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",Ba="#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",Fa="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",$a="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",Ua="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",Ha="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",Va="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",Ga="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",Wa="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",Ya="#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",qa="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",Xa="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",Qa="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",Za="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",Ka="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",Ja="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",tr="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",er="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",ir="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",sr="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",nr="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",ar="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",rr="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",or="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",lr="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",cr="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",hr="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",dr="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",ur="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",pr="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",fr="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",mr="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",gr="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",vr="#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",br="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",yr="#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",_r="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",xr="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",wr="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",Cr="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",kr="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",Sr="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",Ar="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",Or="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",jr="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",Mr="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",Ir="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",Tr="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",Er="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",Dr="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",Lr="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",Pr="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",Rr="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",zr="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",Nr="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",Br="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",Fr="#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",$r="#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",Ur="#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",Hr="#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",Vr="#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",Gr="#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",Wr="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",Yr="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",qr="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",Xr="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",Qr="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Zr="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",Kr="#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Jr="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",to="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",eo="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",io="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",so="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",no="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",ao="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",ro="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",oo="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",lo="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",co="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",ho="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",uo="#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",po="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",fo="#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",mo="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",go="#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",vo="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",bo="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",yo="#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",_o="#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",xo="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",wo="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",Co="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",ko="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",So="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Ao="#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Oo="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",jo="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}";const Mo={alphamap_fragment:oa,alphamap_pars_fragment:la,alphatest_fragment:ca,aomap_fragment:ha,aomap_pars_fragment:da,begin_vertex:ua,beginnormal_vertex:pa,bsdfs:fa,bumpmap_pars_fragment:ma,clipping_planes_fragment:ga,clipping_planes_pars_fragment:va,clipping_planes_pars_vertex:ba,clipping_planes_vertex:ya,color_fragment:_a,color_pars_fragment:xa,color_pars_vertex:wa,color_vertex:Ca,common:ka,cube_uv_reflection_fragment:Sa,defaultnormal_vertex:Aa,displacementmap_pars_vertex:Oa,displacementmap_vertex:ja,emissivemap_fragment:Ma,emissivemap_pars_fragment:Ia,encodings_fragment:Ta,encodings_pars_fragment:Ea,envmap_fragment:Da,envmap_common_pars_fragment:La,envmap_pars_fragment:Pa,envmap_pars_vertex:Ra,envmap_physical_pars_fragment:Ya,envmap_vertex:za,fog_vertex:Na,fog_pars_vertex:Ba,fog_fragment:Fa,fog_pars_fragment:$a,gradientmap_pars_fragment:Ua,lightmap_fragment:Ha,lightmap_pars_fragment:Va,lights_lambert_vertex:Ga,lights_pars_begin:Wa,lights_toon_fragment:qa,lights_toon_pars_fragment:Xa,lights_phong_fragment:Qa,lights_phong_pars_fragment:Za,lights_physical_fragment:Ka,lights_physical_pars_fragment:Ja,lights_fragment_begin:tr,lights_fragment_maps:er,lights_fragment_end:ir,logdepthbuf_fragment:sr,logdepthbuf_pars_fragment:nr,logdepthbuf_pars_vertex:ar,logdepthbuf_vertex:rr,map_fragment:or,map_pars_fragment:lr,map_particle_fragment:cr,map_particle_pars_fragment:hr,metalnessmap_fragment:dr,metalnessmap_pars_fragment:ur,morphnormal_vertex:pr,morphtarget_pars_vertex:fr,morphtarget_vertex:mr,normal_fragment_begin:gr,normal_fragment_maps:vr,normalmap_pars_fragment:br,clearcoat_normal_fragment_begin:yr,clearcoat_normal_fragment_maps:_r,clearcoat_pars_fragment:xr,packing:wr,premultiplied_alpha_fragment:Cr,project_vertex:kr,dithering_fragment:Sr,dithering_pars_fragment:Ar,roughnessmap_fragment:Or,roughnessmap_pars_fragment:jr,shadowmap_pars_fragment:Mr,shadowmap_pars_vertex:Ir,shadowmap_vertex:Tr,shadowmask_pars_fragment:Er,skinbase_vertex:Dr,skinning_pars_vertex:Lr,skinning_vertex:Pr,skinnormal_vertex:Rr,specularmap_fragment:zr,specularmap_pars_fragment:Nr,tonemapping_fragment:Br,tonemapping_pars_fragment:Fr,transmissionmap_fragment:$r,transmissionmap_pars_fragment:Ur,uv_pars_fragment:Hr,uv_pars_vertex:Vr,uv_vertex:Gr,uv2_pars_fragment:Wr,uv2_pars_vertex:Yr,uv2_vertex:qr,worldpos_vertex:Xr,background_frag:Qr,background_vert:Zr,cube_frag:Kr,cube_vert:Jr,depth_frag:to,depth_vert:eo,distanceRGBA_frag:io,distanceRGBA_vert:so,equirect_frag:no,equirect_vert:ao,linedashed_frag:ro,linedashed_vert:oo,meshbasic_frag:lo,meshbasic_vert:co,meshlambert_frag:ho,meshlambert_vert:uo,meshmatcap_frag:po,meshmatcap_vert:fo,meshtoon_frag:mo,meshtoon_vert:go,meshphong_frag:vo,meshphong_vert:bo,meshphysical_frag:yo,meshphysical_vert:_o,normal_frag:xo,normal_vert:wo,points_frag:Co,points_vert:ko,shadow_frag:So,shadow_vert:Ao,sprite_frag:Oo,sprite_vert:jo},Io={common:{diffuse:{value:new Fs(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new hi},uv2Transform:{value:new hi},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ci(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Fs(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Fs(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new hi}},sprite:{diffuse:{value:new Fs(15658734)},opacity:{value:1},center:{value:new ci(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new hi}}},To={basic:{uniforms:Un([Io.common,Io.specularmap,Io.envmap,Io.aomap,Io.lightmap,Io.fog]),vertexShader:Mo.meshbasic_vert,fragmentShader:Mo.meshbasic_frag},lambert:{uniforms:Un([Io.common,Io.specularmap,Io.envmap,Io.aomap,Io.lightmap,Io.emissivemap,Io.fog,Io.lights,{emissive:{value:new Fs(0)}}]),vertexShader:Mo.meshlambert_vert,fragmentShader:Mo.meshlambert_frag},phong:{uniforms:Un([Io.common,Io.specularmap,Io.envmap,Io.aomap,Io.lightmap,Io.emissivemap,Io.bumpmap,Io.normalmap,Io.displacementmap,Io.fog,Io.lights,{emissive:{value:new Fs(0)},specular:{value:new Fs(1118481)},shininess:{value:30}}]),vertexShader:Mo.meshphong_vert,fragmentShader:Mo.meshphong_frag},standard:{uniforms:Un([Io.common,Io.envmap,Io.aomap,Io.lightmap,Io.emissivemap,Io.bumpmap,Io.normalmap,Io.displacementmap,Io.roughnessmap,Io.metalnessmap,Io.fog,Io.lights,{emissive:{value:new Fs(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Mo.meshphysical_vert,fragmentShader:Mo.meshphysical_frag},toon:{uniforms:Un([Io.common,Io.aomap,Io.lightmap,Io.emissivemap,Io.bumpmap,Io.normalmap,Io.displacementmap,Io.gradientmap,Io.fog,Io.lights,{emissive:{value:new Fs(0)}}]),vertexShader:Mo.meshtoon_vert,fragmentShader:Mo.meshtoon_frag},matcap:{uniforms:Un([Io.common,Io.bumpmap,Io.normalmap,Io.displacementmap,Io.fog,{matcap:{value:null}}]),vertexShader:Mo.meshmatcap_vert,fragmentShader:Mo.meshmatcap_frag},points:{uniforms:Un([Io.points,Io.fog]),vertexShader:Mo.points_vert,fragmentShader:Mo.points_frag},dashed:{uniforms:Un([Io.common,Io.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mo.linedashed_vert,fragmentShader:Mo.linedashed_frag},depth:{uniforms:Un([Io.common,Io.displacementmap]),vertexShader:Mo.depth_vert,fragmentShader:Mo.depth_frag},normal:{uniforms:Un([Io.common,Io.bumpmap,Io.normalmap,Io.displacementmap,{opacity:{value:1}}]),vertexShader:Mo.normal_vert,fragmentShader:Mo.normal_frag},sprite:{uniforms:Un([Io.sprite,Io.fog]),vertexShader:Mo.sprite_vert,fragmentShader:Mo.sprite_frag},background:{uniforms:{uvTransform:{value:new hi},t2D:{value:null}},vertexShader:Mo.background_vert,fragmentShader:Mo.background_frag},cube:{uniforms:Un([Io.envmap,{opacity:{value:1}}]),vertexShader:Mo.cube_vert,fragmentShader:Mo.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mo.equirect_vert,fragmentShader:Mo.equirect_frag},distanceRGBA:{uniforms:Un([Io.common,Io.displacementmap,{referencePosition:{value:new yi},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mo.distanceRGBA_vert,fragmentShader:Mo.distanceRGBA_frag},shadow:{uniforms:Un([Io.lights,Io.fog,{color:{value:new Fs(0)},opacity:{value:1}}]),vertexShader:Mo.shadow_vert,fragmentShader:Mo.shadow_frag}};function Eo(t,e,i,s,n){const a=new Fs(0);let r,o,l=0,c=null,h=0,d=null;function f(i,n,f,g){let v=!0===n.isScene?n.background:null;v&&v.isTexture&&(v=e.get(v));const b=t.xr,y=b.getSession&&b.getSession();y&&"additive"===y.environmentBlendMode&&(v=null),null===v?m(a,l):v&&v.isColor&&(m(v,1),g=!0),(t.autoClear||g)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),v&&(v.isCubeTexture||v.isWebGLCubeRenderTarget||v.isWebGLCubeRenderTargetTexture||v.mapping===rt)?(void 0===o&&(o=new Tn(new Fn(1,1,1),new Wn({name:"BackgroundCubeMaterial",uniforms:$n(To.cube.uniforms),vertexShader:To.cube.vertexShader,fragmentShader:To.cube.fragmentShader,side:p,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(o)),v.isWebGLCubeRenderTarget&&(v=v.texture),o.material.uniforms.envMap.value=v,o.material.uniforms.flipEnvMap.value=v.isCubeTexture?-1:1,c===v&&h===v.version&&d===t.toneMapping||(o.material.needsUpdate=!0,c=v,h=v.version,d=t.toneMapping),i.unshift(o,o.geometry,o.material,0,0,null)):v&&v.isTexture&&(void 0===r&&(r=new Tn(new ra(2,2),new Wn({name:"BackgroundMaterial",uniforms:$n(To.background.uniforms),vertexShader:To.background.vertexShader,fragmentShader:To.background.fragmentShader,side:u,depthTest:!1,depthWrite:!1,fog:!1})),r.geometry.deleteAttribute("normal"),Object.defineProperty(r.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(r)),r.material.uniforms.t2D.value=v,!0===v.matrixAutoUpdate&&v.updateMatrix(),r.material.uniforms.uvTransform.value.copy(v.matrix),c===v&&h===v.version&&d===t.toneMapping||(r.material.needsUpdate=!0,c=v,h=v.version,d=t.toneMapping),i.unshift(r,r.geometry,r.material,0,0,null))}function m(t,e){i.buffers.color.setClear(t.r,t.g,t.b,e,n)}return{getClearColor:function(){return a},setClearColor:function(t,e){a.set(t),l=void 0!==e?e:1,m(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(t){l=t,m(a,l)},render:f}}function Do(t,e,i,s){const n=t.getParameter(34921),a=s.isWebGL2?null:e.get("OES_vertex_array_object"),r=s.isWebGL2||null!==a,o={},l=m(null);let c=l;function h(e,s,n,a,o){let l=!1;if(r){const t=f(a,n,s);c!==t&&(c=t,u(c.object)),l=g(a,o),l&&v(a,o)}else{const t=!0===s.wireframe;c.geometry===a.id&&c.program===n.id&&c.wireframe===t||(c.geometry=a.id,c.program=n.id,c.wireframe=t,l=!0)}!0===e.isInstancedMesh&&(l=!0),null!==o&&i.update(o,34963),l&&(C(e,s,n,a),null!==o&&t.bindBuffer(34963,i.get(o).buffer))}function d(){return s.isWebGL2?t.createVertexArray():a.createVertexArrayOES()}function u(e){return s.isWebGL2?t.bindVertexArray(e):a.bindVertexArrayOES(e)}function p(e){return s.isWebGL2?t.deleteVertexArray(e):a.deleteVertexArrayOES(e)}function f(t,e,i){const s=!0===i.wireframe;let n=o[t.id];void 0===n&&(n={},o[t.id]=n);let a=n[e.id];void 0===a&&(a={},n[e.id]=a);let r=a[s];return void 0===r&&(r=m(d()),a[s]=r),r}function m(t){const e=[],i=[],s=[];for(let a=0;a<n;a++)e[a]=0,i[a]=0,s[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:i,attributeDivisors:s,object:t,attributes:{},index:null}}function g(t,e){const i=c.attributes,s=t.attributes;if(Object.keys(i).length!==Object.keys(s).length)return!0;for(const n in s){const t=i[n],e=s[n];if(void 0===t)return!0;if(t.attribute!==e)return!0;if(t.data!==e.data)return!0}return c.index!==e}function v(t,e){const i={},s=t.attributes;for(const n in s){const t=s[n],e={};e.attribute=t,t.data&&(e.data=t.data),i[n]=e}c.attributes=i,c.index=e}function b(){const t=c.newAttributes;for(let e=0,i=t.length;e<i;e++)t[e]=0}function y(t){_(t,0)}function _(i,n){const a=c.newAttributes,r=c.enabledAttributes,o=c.attributeDivisors;if(a[i]=1,0===r[i]&&(t.enableVertexAttribArray(i),r[i]=1),o[i]!==n){const a=s.isWebGL2?t:e.get("ANGLE_instanced_arrays");a[s.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,n),o[i]=n}}function x(){const e=c.newAttributes,i=c.enabledAttributes;for(let s=0,n=i.length;s<n;s++)i[s]!==e[s]&&(t.disableVertexAttribArray(s),i[s]=0)}function w(e,i,n,a,r,o){!0!==s.isWebGL2||5124!==n&&5125!==n?t.vertexAttribPointer(e,i,n,a,r,o):t.vertexAttribIPointer(e,i,n,r,o)}function C(n,a,r,o){if(!1===s.isWebGL2&&(n.isInstancedMesh||o.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;b();const l=o.attributes,c=r.getAttributes(),h=a.defaultAttributeValues;for(const e in c){const s=c[e];if(s>=0){const a=l[e];if(void 0!==a){const e=a.normalized,n=a.itemSize,r=i.get(a);if(void 0===r)continue;const l=r.buffer,c=r.type,h=r.bytesPerElement;if(a.isInterleavedBufferAttribute){const i=a.data,r=i.stride,d=a.offset;i&&i.isInstancedInterleavedBuffer?(_(s,i.meshPerAttribute),void 0===o._maxInstanceCount&&(o._maxInstanceCount=i.meshPerAttribute*i.count)):y(s),t.bindBuffer(34962,l),w(s,n,c,e,r*h,d*h)}else a.isInstancedBufferAttribute?(_(s,a.meshPerAttribute),void 0===o._maxInstanceCount&&(o._maxInstanceCount=a.meshPerAttribute*a.count)):y(s),t.bindBuffer(34962,l),w(s,n,c,e,0,0)}else if("instanceMatrix"===e){const e=i.get(n.instanceMatrix);if(void 0===e)continue;const a=e.buffer,r=e.type;_(s+0,1),_(s+1,1),_(s+2,1),_(s+3,1),t.bindBuffer(34962,a),t.vertexAttribPointer(s+0,4,r,!1,64,0),t.vertexAttribPointer(s+1,4,r,!1,64,16),t.vertexAttribPointer(s+2,4,r,!1,64,32),t.vertexAttribPointer(s+3,4,r,!1,64,48)}else if("instanceColor"===e){const e=i.get(n.instanceColor);if(void 0===e)continue;const a=e.buffer,r=e.type;_(s,1),t.bindBuffer(34962,a),t.vertexAttribPointer(s,3,r,!1,12,0)}else if(void 0!==h){const i=h[e];if(void 0!==i)switch(i.length){case 2:t.vertexAttrib2fv(s,i);break;case 3:t.vertexAttrib3fv(s,i);break;case 4:t.vertexAttrib4fv(s,i);break;default:t.vertexAttrib1fv(s,i)}}}}x()}function k(){O();for(const t in o){const e=o[t];for(const t in e){const i=e[t];for(const t in i)p(i[t].object),delete i[t];delete e[t]}delete o[t]}}function S(t){if(void 0===o[t.id])return;const e=o[t.id];for(const i in e){const t=e[i];for(const e in t)p(t[e].object),delete t[e];delete e[i]}delete o[t.id]}function A(t){for(const e in o){const i=o[e];if(void 0===i[t.id])continue;const s=i[t.id];for(const t in s)p(s[t].object),delete s[t];delete i[t.id]}}function O(){j(),c!==l&&(c=l,u(c.object))}function j(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:O,resetDefaultState:j,dispose:k,releaseStatesOfGeometry:S,releaseStatesOfProgram:A,initAttributes:b,enableAttribute:y,disableUnusedAttributes:x}}function Lo(t,e,i,s){const n=s.isWebGL2;let a;function r(t){a=t}function o(e,s){t.drawArrays(a,e,s),i.update(s,a,1)}function l(s,r,o){if(0===o)return;let l,c;if(n)l=t,c="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return;l[c](a,s,r,o),i.update(r,a,o)}this.setMode=r,this.render=o,this.renderInstances=l}function Po(t,e,i){let s;function n(){if(void 0!==s)return s;const i=e.get("EXT_texture_filter_anisotropic");return s=null!==i?t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,s}function a(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const r="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let o=void 0!==i.precision?i.precision:"highp";const l=a(o);l!==o&&(o=l);const c=!0===i.logarithmicDepthBuffer,h=t.getParameter(34930),d=t.getParameter(35660),u=t.getParameter(3379),p=t.getParameter(34076),f=t.getParameter(34921),m=t.getParameter(36347),g=t.getParameter(36348),v=t.getParameter(36349),b=d>0,y=r||!!e.get("OES_texture_float"),_=b&&y,x=r?t.getParameter(36183):0;return{isWebGL2:r,getMaxAnisotropy:n,getMaxPrecision:a,precision:o,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:d,maxTextureSize:u,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:b,floatFragmentTextures:y,floatVertexTextures:_,maxSamples:x}}function Ro(t){const e=this;let i=null,s=0,n=!1,a=!1;const r=new ws,o=new hi,l={value:null,needsUpdate:!1};function c(){l.value!==i&&(l.value=i,l.needsUpdate=s>0),e.numPlanes=s,e.numIntersection=0}function h(t,i,s,n){const a=null!==t?t.length:0;let c=null;if(0!==a){if(c=l.value,!0!==n||null===c){const e=s+4*a,n=i.matrixWorldInverse;o.getNormalMatrix(n),(null===c||c.length<e)&&(c=new Float32Array(e));for(let i=0,l=s;i!==a;++i,l+=4)r.copy(t[i]).applyMatrix4(n,o),r.normal.toArray(c,l),c[l+3]=r.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=a,e.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,a){const r=0!==t.length||e||0!==s||n;return n=e,i=h(t,a,0),s=t.length,r},this.beginShadows=function(){a=!0,h(null)},this.endShadows=function(){a=!1,c()},this.setState=function(e,r,o){const d=e.clippingPlanes,u=e.clipIntersection,p=e.clipShadows,f=t.get(e);if(!n||null===d||0===d.length||a&&!p)a?h(null):c();else{const t=a?0:s,e=4*t;let n=f.clippingState||null;l.value=n,n=h(d,r,e,o);for(let s=0;s!==e;++s)n[s]=i[s];f.clippingState=n,this.numIntersection=u?this.numPlanes:0,this.numPlanes+=t}}}function zo(t){let e=new WeakMap;function i(t,e){return e===nt?t.mapping=it:e===at&&(t.mapping=st),t}function s(s){if(s&&s.isTexture){const n=s.mapping;if(n===nt||n===at){if(e.has(s)){const t=e.get(s).texture;return i(t,s.mapping)}{const n=s.image;if(n&&n.height>0){const a=t.getRenderList(),r=t.getRenderTarget(),o=t.getRenderState(),l=new Kn(n.height/2);return l.fromEquirectangularTexture(t,s),e.set(s,l),t.setRenderTarget(r),t.setRenderList(a),t.setRenderState(o),i(l.texture,s.mapping)}return null}}}return s}function n(){e=new WeakMap}return{get:s,dispose:n}}function No(t){const e={};return{has:function(i){if(void 0!==e[i])return null!==e[i];let s;switch(i){case"WEBGL_depth_texture":s=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=t.getExtension(i)}return e[i]=s,null!==s},get:function(t){return this.has(t),e[t]}}}function Bo(t,e,i,s){const n=new WeakMap,a=new WeakMap;function r(t){const o=t.target,l=n.get(o);null!==l.index&&e.remove(l.index);for(const i in l.attributes)e.remove(l.attributes[i]);o.removeEventListener("dispose",r),n.delete(o);const c=a.get(l);c&&(e.remove(c),a.delete(l)),s.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,i.memory.geometries--}function o(t,e){let s=n.get(e);return s||(e.addEventListener("dispose",r),e.isBufferGeometry?s=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new pn).setFromObject(t)),s=e._bufferGeometry),n.set(e,s),i.memory.geometries++,s)}function l(t){const i=t.attributes;for(const n in i)e.update(i[n],34962);const s=t.morphAttributes;for(const n in s){const t=s[n];for(let i=0,s=t.length;i<s;i++)e.update(t[i],34962)}}function c(t){const i=[],s=t.index,n=t.attributes.position;let r=0;if(null!==s){const t=s.array;r=s.version;for(let e=0,s=t.length;e<s;e+=3){const s=t[e+0],n=t[e+1],a=t[e+2];i.push(s,n,n,a,a,s)}}else{const t=n.array;r=n.version;for(let e=0,s=t.length/3-1;e<s;e+=3){const t=e+0,s=e+1,n=e+2;i.push(t,s,s,n,n,t)}}const o=new(an(i)>65535?tn:Ks)(i,1);o.version=r;const l=a.get(t);l&&e.remove(l),a.set(t,o)}function h(t){const e=a.get(t);if(e){const i=t.index;null!==i&&e.version<i.version&&c(t)}else c(t);return a.get(t)}return{get:o,update:l,getWireframeAttribute:h}}function Fo(t,e,i,s){const n=s.isWebGL2;let a,r,o;function l(t){a=t}function c(t){r=t.type,o=t.bytesPerElement}function h(e,s){t.drawElements(a,s,r,e*o),i.update(s,a,1)}function d(s,l,c){if(0===c)return;let h,d;if(n)h=t,d="drawElementsInstanced";else if(h=e.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===h)return;h[d](a,l,r,s*o,c),i.update(l,a,c)}this.setMode=l,this.setIndex=c,this.render=h,this.renderInstances=d}function $o(t){const e={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function s(t,e,s){switch(i.calls++,e){case 4:i.triangles+=s*(t/3);break;case 1:i.lines+=s*(t/2);break;case 3:i.lines+=s*(t-1);break;case 2:i.lines+=s*t;break;case 0:i.points+=s*t;break;default:break}}function n(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:e,render:i,programs:null,autoReset:!0,reset:n,update:s}}function Uo(t,e){return t[0]-e[0]}function Ho(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Vo(t){const e={},i=new Float32Array(8),s=[];for(let a=0;a<8;a++)s[a]=[a,0];function n(n,a,r,o){const l=n.morphTargetInfluences,c=void 0===l?0:l.length;let h=e[a.id];if(void 0===h){h=[];for(let t=0;t<c;t++)h[t]=[t,0];e[a.id]=h}for(let t=0;t<c;t++){const e=h[t];e[0]=t,e[1]=l[t]}h.sort(Ho);for(let t=0;t<8;t++)t<c&&h[t][1]?(s[t][0]=h[t][0],s[t][1]=h[t][1]):(s[t][0]=Number.MAX_SAFE_INTEGER,s[t][1]=0);s.sort(Uo);const d=r.morphTargets&&a.morphAttributes.position,u=r.morphNormals&&a.morphAttributes.normal;let p=0;for(let t=0;t<8;t++){const e=s[t],n=e[0],r=e[1];n!==Number.MAX_SAFE_INTEGER&&r?(d&&a.getAttribute("morphTarget"+t)!==d[n]&&a.setAttribute("morphTarget"+t,d[n]),u&&a.getAttribute("morphNormal"+t)!==u[n]&&a.setAttribute("morphNormal"+t,u[n]),i[t]=r,p+=r):(d&&void 0!==a.getAttribute("morphTarget"+t)&&a.deleteAttribute("morphTarget"+t),u&&void 0!==a.getAttribute("morphNormal"+t)&&a.deleteAttribute("morphNormal"+t),i[t]=0)}const f=a.morphTargetsRelative?1:1-p;o.getUniforms().setValue(t,"morphTargetBaseInfluence",f),o.getUniforms().setValue(t,"morphTargetInfluences",i)}return{update:n}}function Go(t,e,i,s){let n=new WeakMap;function a(t){const a=s.render.frame,r=t.geometry,o=e.get(t,r);return n.get(o)!==a&&(r.isGeometry&&o.updateFromObject(t),e.update(o),n.set(o,a)),t.isInstancedMesh&&(i.update(t.instanceMatrix,34962),null!==t.instanceColor&&i.update(t.instanceColor,34962)),o}function r(){n=new WeakMap}return{update:a,dispose:r}}function Wo(t,e,i,s,n,a,r,o,l,c){t=void 0!==t?t:[],e=void 0!==e?e:it,r=void 0!==r?r:It,fi.call(this,t,e,i,s,n,a,r,o,l,c),this.flipY=!1}function Yo(t,e,i,s){fi.call(this,null),this.image={data:t||null,width:e||1,height:i||1,depth:s||1},this.magFilter=dt,this.minFilter=dt,this.wrapR=ct,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function qo(t,e,i,s){fi.call(this,null),this.image={data:t||null,width:e||1,height:i||1,depth:s||1},this.magFilter=dt,this.minFilter=dt,this.wrapR=ct,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}To.physical={uniforms:Un([To.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ci(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Fs(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Mo.meshphysical_vert,fragmentShader:Mo.meshphysical_frag},Wo.prototype=Object.create(fi.prototype),Wo.prototype.constructor=Wo,Wo.prototype.isCubeTexture=!0,Object.defineProperty(Wo.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),Yo.prototype=Object.create(fi.prototype),Yo.prototype.constructor=Yo,Yo.prototype.isDataTexture2DArray=!0,qo.prototype=Object.create(fi.prototype),qo.prototype.constructor=qo,qo.prototype.isDataTexture3D=!0;const Xo=new fi,Qo=new Yo,Zo=new qo,Ko=new Wo,Jo=[],tl=[],el=new Float32Array(16),il=new Float32Array(9),sl=new Float32Array(4);function nl(t,e,i){const s=t[0];if(s<=0||s>0)return t;const n=e*i;let a=Jo[n];if(void 0===a&&(a=new Float32Array(n),Jo[n]=a),0!==e){s.toArray(a,0);for(let s=1,n=0;s!==e;++s)n+=i,t[s].toArray(a,n)}return a}function al(t,e){if(t.length!==e.length)return!1;for(let i=0,s=t.length;i<s;i++)if(t[i]!==e[i])return!1;return!0}function rl(t,e){for(let i=0,s=e.length;i<s;i++)t[i]=e[i]}function ol(t,e){let i=tl[e];void 0===i&&(i=new Int32Array(e),tl[e]=i);for(let s=0;s!==e;++s)i[s]=t.allocateTextureUnit();return i}function ll(t,e){const i=this.cache;i[0]!==e&&(t.uniform1f(this.addr,e),i[0]=e)}function cl(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(al(i,e))return;t.uniform2fv(this.addr,e),rl(i,e)}}function hl(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else if(void 0!==e.r)i[0]===e.r&&i[1]===e.g&&i[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b);else{if(al(i,e))return;t.uniform3fv(this.addr,e),rl(i,e)}}function dl(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(al(i,e))return;t.uniform4fv(this.addr,e),rl(i,e)}}function ul(t,e){const i=this.cache,s=e.elements;if(void 0===s){if(al(i,e))return;t.uniformMatrix2fv(this.addr,!1,e),rl(i,e)}else{if(al(i,s))return;sl.set(s),t.uniformMatrix2fv(this.addr,!1,sl),rl(i,s)}}function pl(t,e){const i=this.cache,s=e.elements;if(void 0===s){if(al(i,e))return;t.uniformMatrix3fv(this.addr,!1,e),rl(i,e)}else{if(al(i,s))return;il.set(s),t.uniformMatrix3fv(this.addr,!1,il),rl(i,s)}}function fl(t,e){const i=this.cache,s=e.elements;if(void 0===s){if(al(i,e))return;t.uniformMatrix4fv(this.addr,!1,e),rl(i,e)}else{if(al(i,s))return;el.set(s),t.uniformMatrix4fv(this.addr,!1,el),rl(i,s)}}function ml(t,e,i){const s=this.cache,n=i.allocateTextureUnit();s[0]!==n&&(t.uniform1i(this.addr,n),s[0]=n),i.safeSetTexture2D(e||Xo,n)}function gl(t,e,i){const s=this.cache,n=i.allocateTextureUnit();s[0]!==n&&(t.uniform1i(this.addr,n),s[0]=n),i.setTexture2DArray(e||Qo,n)}function vl(t,e,i){const s=this.cache,n=i.allocateTextureUnit();s[0]!==n&&(t.uniform1i(this.addr,n),s[0]=n),i.setTexture3D(e||Zo,n)}function bl(t,e,i){const s=this.cache,n=i.allocateTextureUnit();s[0]!==n&&(t.uniform1i(this.addr,n),s[0]=n),i.safeSetTextureCube(e||Ko,n)}function yl(t,e){const i=this.cache;i[0]!==e&&(t.uniform1i(this.addr,e),i[0]=e)}function _l(t,e){const i=this.cache;al(i,e)||(t.uniform2iv(this.addr,e),rl(i,e))}function xl(t,e){const i=this.cache;al(i,e)||(t.uniform3iv(this.addr,e),rl(i,e))}function wl(t,e){const i=this.cache;al(i,e)||(t.uniform4iv(this.addr,e),rl(i,e))}function Cl(t,e){const i=this.cache;i[0]!==e&&(t.uniform1ui(this.addr,e),i[0]=e)}function kl(t){switch(t){case 5126:return ll;case 35664:return cl;case 35665:return hl;case 35666:return dl;case 35674:return ul;case 35675:return pl;case 35676:return fl;case 5124:case 35670:return yl;case 35667:case 35671:return _l;case 35668:case 35672:return xl;case 35669:case 35673:return wl;case 5125:return Cl;case 35678:case 36198:case 36298:case 36306:case 35682:return ml;case 35679:case 36299:case 36307:return vl;case 35680:case 36300:case 36308:case 36293:return bl;case 36289:case 36303:case 36311:case 36292:return gl}}function Sl(t,e){t.uniform1fv(this.addr,e)}function Al(t,e){t.uniform1iv(this.addr,e)}function Ol(t,e){t.uniform2iv(this.addr,e)}function jl(t,e){t.uniform3iv(this.addr,e)}function Ml(t,e){t.uniform4iv(this.addr,e)}function Il(t,e){const i=nl(e,this.size,2);t.uniform2fv(this.addr,i)}function Tl(t,e){const i=nl(e,this.size,3);t.uniform3fv(this.addr,i)}function El(t,e){const i=nl(e,this.size,4);t.uniform4fv(this.addr,i)}function Dl(t,e){const i=nl(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,i)}function Ll(t,e){const i=nl(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,i)}function Pl(t,e){const i=nl(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,i)}function Rl(t,e,i){const s=e.length,n=ol(i,s);t.uniform1iv(this.addr,n);for(let a=0;a!==s;++a)i.safeSetTexture2D(e[a]||Xo,n[a])}function zl(t,e,i){const s=e.length,n=ol(i,s);t.uniform1iv(this.addr,n);for(let a=0;a!==s;++a)i.safeSetTextureCube(e[a]||Ko,n[a])}function Nl(t){switch(t){case 5126:return Sl;case 35664:return Il;case 35665:return Tl;case 35666:return El;case 35674:return Dl;case 35675:return Ll;case 35676:return Pl;case 5124:case 35670:return Al;case 35667:case 35671:return Ol;case 35668:case 35672:return jl;case 35669:case 35673:return Ml;case 35678:case 36198:case 36298:case 36306:case 35682:return Rl;case 35680:case 36300:case 36308:case 36293:return zl}}function Bl(t,e,i){this.id=t,this.addr=i,this.cache=[],this.setValue=kl(e.type)}function Fl(t,e,i){this.id=t,this.addr=i,this.cache=[],this.size=e.size,this.setValue=Nl(e.type)}function $l(t){this.id=t,this.seq=[],this.map={}}Fl.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),rl(e,t)},$l.prototype.setValue=function(t,e,i){const s=this.seq;for(let n=0,a=s.length;n!==a;++n){const a=s[n];a.setValue(t,e[a.id],i)}};const Ul=/([\w\d_]+)(\])?(\[|\.)?/g;function Hl(t,e){t.seq.push(e),t.map[e.id]=e}function Vl(t,e,i){const s=t.name,n=s.length;Ul.lastIndex=0;while(1){const a=Ul.exec(s),r=Ul.lastIndex;let o=a[1];const l="]"===a[2],c=a[3];if(l&&(o|=0),void 0===c||"["===c&&r+2===n){Hl(i,void 0===c?new Bl(o,t,e):new Fl(o,t,e));break}{const t=i.map;let e=t[o];void 0===e&&(e=new $l(o),Hl(i,e)),i=e}}}function Gl(t,e){this.seq=[],this.map={};const i=t.getProgramParameter(e,35718);for(let s=0;s<i;++s){const i=t.getActiveUniform(e,s),n=t.getUniformLocation(e,i.name);Vl(i,n,this)}}function Wl(t,e,i){const s=t.createShader(e);return t.shaderSource(s,i),t.compileShader(s),s}Gl.prototype.setValue=function(t,e,i,s){const n=this.map[e];void 0!==n&&n.setValue(t,i,s)},Gl.prototype.setOptional=function(t,e,i){const s=e[i];void 0!==s&&this.setValue(t,i,s)},Gl.upload=function(t,e,i,s){for(let n=0,a=e.length;n!==a;++n){const a=e[n],r=i[a.id];!1!==r.needsUpdate&&a.setValue(t,r.value,s)}},Gl.seqWithValue=function(t,e){const i=[];for(let s=0,n=t.length;s!==n;++s){const n=t[s];n.id in e&&i.push(n)}return i};let Yl=0;function ql(t){const e=t.split("\n");for(let i=0;i<e.length;i++)e[i]=i+1+": "+e[i];return e.join("\n")}function Xl(t){switch(t){case Ue:return["Linear","( value )"];case He:return["sRGB","( value )"];case Ge:return["RGBE","( value )"];case Ye:return["RGBM","( value, 7.0 )"];case qe:return["RGBM","( value, 16.0 )"];case Xe:return["RGBD","( value, 256.0 )"];case Ve:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case We:return["LogLuv","( value )"];default:return["Linear","( value )"]}}function Ql(t,e,i){const s=t.getShaderParameter(e,35713),n=t.getShaderInfoLog(e).trim();if(s&&""===n)return"";const a=t.getShaderSource(e);return"THREE.WebGLShader: gl.getShaderInfoLog() "+i+"\n"+n+ql(a)}function Zl(t,e){const i=Xl(e);return"vec4 "+t+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function Kl(t,e){const i=Xl(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function Jl(t,e){let i;switch(e){case Q:i="Linear";break;case Z:i="Reinhard";break;case K:i="OptimizedCineon";break;case J:i="ACESFilmic";break;case tt:i="Custom";break;default:i="Linear"}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function tc(t){const e=[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return e.filter(sc).join("\n")}function ec(t){const e=[];for(const i in t){const s=t[i];!1!==s&&e.push("#define "+i+" "+s)}return e.join("\n")}function ic(t,e){const i={},s=t.getProgramParameter(e,35721);for(let n=0;n<s;n++){const s=t.getActiveAttrib(e,n),a=s.name;i[a]=t.getAttribLocation(e,a)}return i}function sc(t){return""!==t}function nc(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ac(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const rc=/^[ \t]*#include +<([\w\d./]+)>/gm;function oc(t){return t.replace(rc,lc)}function lc(t,e){const i=Mo[e];if(void 0===i)throw new Error("Can not resolve #include <"+e+">");return oc(i)}const cc=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,hc=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function dc(t){return t.replace(hc,pc).replace(cc,uc)}function uc(t,e,i,s){return pc(t,e,i,s)}function pc(t,e,i,s){let n="";for(let a=parseInt(e);a<parseInt(i);a++)n+=s.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return n}function fc(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function mc(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===c?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===h?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===d&&(e="SHADOWMAP_TYPE_VSM"),e}function gc(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case it:case st:e="ENVMAP_TYPE_CUBE";break;case rt:case ot:e="ENVMAP_TYPE_CUBE_UV";break}return e}function vc(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case st:case ot:e="ENVMAP_MODE_REFRACTION";break}return e}function bc(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case W:e="ENVMAP_BLENDING_MULTIPLY";break;case Y:e="ENVMAP_BLENDING_MIX";break;case q:e="ENVMAP_BLENDING_ADD";break}return e}function yc(t,e,i,s){const n=t.getContext(),a=i.defines;let r=i.vertexShader,o=i.fragmentShader;const l=mc(i),c=gc(i),h=vc(i),d=bc(i),u=t.gammaFactor>0?t.gammaFactor:1,p=i.isWebGL2?"":tc(i),f=ec(a),m=n.createProgram();let g,v,b=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?(g=[f].filter(sc).join("\n"),g.length>0&&(g+="\n"),v=[p,f].filter(sc).join("\n"),v.length>0&&(v+="\n")):(g=[fc(i),"#define SHADER_NAME "+i.shaderName,f,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+u,"#define MAX_BONES "+i.maxBones,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+h:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(sc).join("\n"),v=[p,fc(i),"#define SHADER_NAME "+i.shaderName,f,i.alphaTest?"#define ALPHATEST "+i.alphaTest+(i.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+u,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.envMap?"#define "+h:"",i.envMap?"#define "+d:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.sheen?"#define USE_SHEEN":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensionShaderTextureLOD||i.envMap)&&i.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==X?"#define TONE_MAPPING":"",i.toneMapping!==X?Mo["tonemapping_pars_fragment"]:"",i.toneMapping!==X?Jl("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",Mo["encodings_pars_fragment"],i.map?Zl("mapTexelToLinear",i.mapEncoding):"",i.matcap?Zl("matcapTexelToLinear",i.matcapEncoding):"",i.envMap?Zl("envMapTexelToLinear",i.envMapEncoding):"",i.emissiveMap?Zl("emissiveMapTexelToLinear",i.emissiveMapEncoding):"",i.lightMap?Zl("lightMapTexelToLinear",i.lightMapEncoding):"",Kl("linearToOutputTexel",i.outputEncoding),i.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(sc).join("\n")),r=oc(r),r=nc(r,i),r=ac(r,i),o=oc(o),o=nc(o,i),o=ac(o,i),r=dc(r),o=dc(o),i.isWebGL2&&!0!==i.isRawShaderMaterial&&(b="#version 300 es\n",g=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",i.glslVersion===ni?"":"out highp vec4 pc_fragColor;",i.glslVersion===ni?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const y=b+g+r,_=b+v+o,x=Wl(n,35633,y),w=Wl(n,35632,_);if(n.attachShader(m,x),n.attachShader(m,w),void 0!==i.index0AttributeName?n.bindAttribLocation(m,0,i.index0AttributeName):!0===i.morphTargets&&n.bindAttribLocation(m,0,"position"),n.linkProgram(m),t.debug.checkShaderErrors){const t=n.getProgramInfoLog(m).trim(),e=n.getShaderInfoLog(x).trim(),i=n.getShaderInfoLog(w).trim();let s=!0,a=!0;if(!1===n.getProgramParameter(m,35714)){s=!1;Ql(n,x,"vertex"),Ql(n,w,"fragment")}else""!==t||""!==e&&""!==i||(a=!1);a&&(this.diagnostics={runnable:s,programLog:t,vertexShader:{log:e,prefix:g},fragmentShader:{log:i,prefix:v}})}let C,k;return n.deleteShader(x),n.deleteShader(w),this.getUniforms=function(){return void 0===C&&(C=new Gl(n,m)),C},this.getAttributes=function(){return void 0===k&&(k=ic(n,m)),k},this.destroy=function(){s.releaseStatesOfProgram(this),n.deleteProgram(m),this.program=void 0},this.name=i.shaderName,this.id=Yl++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=w,this}function _c(t,e,i,s,n,a){const r=[],o=s.isWebGL2,l=s.logarithmicDepthBuffer,c=s.floatVertexTextures,h=s.maxVertexUniforms,d=s.vertexTextures;let u=s.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},g=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function v(t){const e=t.skeleton,i=e.bones;if(c)return 1024;{const t=h,e=Math.floor((t-20)/4),s=Math.min(e,i.length);return s<i.length?0:s}}function b(t){let e;return t?t.isTexture?e=t.encoding:t.isWebGLRenderTarget&&(e=t.texture.encoding):e=Ue,e}function y(n,r,h,g,y){const _=g.fog,x=n.isMeshStandardMaterial?g.environment:null,w=e.get(n.envMap||x),C=m[n.type],k=y.isSkinnedMesh?v(y):0;let S,A;if(null!==n.precision&&(u=s.getMaxPrecision(n.precision),n.precision),C){const t=To[C];S=t.vertexShader,A=t.fragmentShader}else S=n.vertexShader,A=n.fragmentShader;const O=t.getRenderTarget(),j={isWebGL2:o,shaderID:C,shaderName:n.type,vertexShader:S,fragmentShader:A,defines:n.defines,isRawShaderMaterial:!0===n.isRawShaderMaterial,glslVersion:n.glslVersion,precision:u,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:d,outputEncoding:null!==O?b(O.texture):t.outputEncoding,map:!!n.map,mapEncoding:b(n.map),matcap:!!n.matcap,matcapEncoding:b(n.matcap),envMap:!!w,envMapMode:w&&w.mapping,envMapEncoding:b(w),envMapCubeUV:!!w&&(w.mapping===rt||w.mapping===ot),lightMap:!!n.lightMap,lightMapEncoding:b(n.lightMap),aoMap:!!n.aoMap,emissiveMap:!!n.emissiveMap,emissiveMapEncoding:b(n.emissiveMap),bumpMap:!!n.bumpMap,normalMap:!!n.normalMap,objectSpaceNormalMap:n.normalMapType===Je,tangentSpaceNormalMap:n.normalMapType===Ke,clearcoatMap:!!n.clearcoatMap,clearcoatRoughnessMap:!!n.clearcoatRoughnessMap,clearcoatNormalMap:!!n.clearcoatNormalMap,displacementMap:!!n.displacementMap,roughnessMap:!!n.roughnessMap,metalnessMap:!!n.metalnessMap,specularMap:!!n.specularMap,alphaMap:!!n.alphaMap,gradientMap:!!n.gradientMap,sheen:!!n.sheen,transmissionMap:!!n.transmissionMap,combine:n.combine,vertexTangents:n.normalMap&&n.vertexTangents,vertexColors:n.vertexColors,vertexUvs:!!n.map||!!n.bumpMap||!!n.normalMap||!!n.specularMap||!!n.alphaMap||!!n.emissiveMap||!!n.roughnessMap||!!n.metalnessMap||!!n.clearcoatMap||!!n.clearcoatRoughnessMap||!!n.clearcoatNormalMap||!!n.displacementMap||!!n.transmissionMap,uvsVertexOnly:!(n.map||n.bumpMap||n.normalMap||n.specularMap||n.alphaMap||n.emissiveMap||n.roughnessMap||n.metalnessMap||n.clearcoatNormalMap||n.transmissionMap)&&!!n.displacementMap,fog:!!_,useFog:n.fog,fogExp2:_&&_.isFogExp2,flatShading:n.flatShading,sizeAttenuation:n.sizeAttenuation,logarithmicDepthBuffer:l,skinning:n.skinning&&k>0,maxBones:k,useVertexTexture:c,morphTargets:n.morphTargets,morphNormals:n.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numDirLightShadows:r.directionalShadowMap.length,numPointLightShadows:r.pointShadowMap.length,numSpotLightShadows:r.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:n.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.length>0,shadowMapType:t.shadowMap.type,toneMapping:n.toneMapped?t.toneMapping:X,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:n.premultipliedAlpha,alphaTest:n.alphaTest,doubleSided:n.side===f,flipSided:n.side===p,depthPacking:void 0!==n.depthPacking&&n.depthPacking,index0AttributeName:n.index0AttributeName,extensionDerivatives:n.extensions&&n.extensions.derivatives,extensionFragDepth:n.extensions&&n.extensions.fragDepth,extensionDrawBuffers:n.extensions&&n.extensions.drawBuffers,extensionShaderTextureLOD:n.extensions&&n.extensions.shaderTextureLOD,rendererExtensionFragDepth:o||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:o||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:o||i.has("EXT_shader_texture_lod"),customProgramCacheKey:n.customProgramCacheKey()};return j}function _(e){const i=[];if(e.shaderID?i.push(e.shaderID):(i.push(e.fragmentShader),i.push(e.vertexShader)),void 0!==e.defines)for(const t in e.defines)i.push(t),i.push(e.defines[t]);if(!1===e.isRawShaderMaterial){for(let t=0;t<g.length;t++)i.push(e[g[t]]);i.push(t.outputEncoding),i.push(t.gammaFactor)}return i.push(e.customProgramCacheKey),i.join()}function x(t){const e=m[t.type];let i;if(e){const t=To[e];i=Hn.clone(t.uniforms)}else i=t.uniforms;return i}function w(e,i){let s;for(let t=0,n=r.length;t<n;t++){const e=r[t];if(e.cacheKey===i){s=e,++s.usedTimes;break}}return void 0===s&&(s=new yc(t,i,e,n),r.push(s)),s}function C(t){if(0===--t.usedTimes){const e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}}return{getParameters:y,getProgramCacheKey:_,getUniforms:x,acquireProgram:w,releaseProgram:C,programs:r}}function xc(){let t=new WeakMap;function e(e){let i=t.get(e);return void 0===i&&(i={},t.set(e,i)),i}function i(e){t.delete(e)}function s(e,i,s){t.get(e)[i]=s}function n(){t=new WeakMap}return{get:e,remove:i,update:s,dispose:n}}function wc(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Cc(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function kc(t){const e=[];let i=0;const s=[],n=[],a={id:-1};function r(){i=0,s.length=0,n.length=0}function o(s,n,r,o,l,c){let h=e[i];const d=t.get(r);return void 0===h?(h={id:s.id,object:s,geometry:n,material:r,program:d.program||a,groupOrder:o,renderOrder:s.renderOrder,z:l,group:c},e[i]=h):(h.id=s.id,h.object=s,h.geometry=n,h.material=r,h.program=d.program||a,h.groupOrder=o,h.renderOrder=s.renderOrder,h.z=l,h.group=c),i++,h}function l(t,e,i,a,r,l){const c=o(t,e,i,a,r,l);(!0===i.transparent?n:s).push(c)}function c(t,e,i,a,r,l){const c=o(t,e,i,a,r,l);(!0===i.transparent?n:s).unshift(c)}function h(t,e){s.length>1&&s.sort(t||wc),n.length>1&&n.sort(e||Cc)}function d(){for(let t=i,s=e.length;t<s;t++){const i=e[t];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}}return{opaque:s,transparent:n,init:r,push:l,unshift:c,finish:d,sort:h}}function Sc(t){let e=new WeakMap;function i(i,s){const n=e.get(i);let a;return void 0===n?(a=new kc(t),e.set(i,new WeakMap),e.get(i).set(s,a)):(a=n.get(s),void 0===a&&(a=new kc(t),n.set(s,a))),a}function s(){e=new WeakMap}return{get:i,dispose:s}}function Ac(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let i;switch(e.type){case"DirectionalLight":i={direction:new yi,color:new Fs};break;case"SpotLight":i={position:new yi,direction:new yi,color:new Fs,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new yi,color:new Fs,distance:0,decay:0};break;case"HemisphereLight":i={direction:new yi,skyColor:new Fs,groundColor:new Fs};break;case"RectAreaLight":i={color:new Fs,position:new yi,halfWidth:new yi,halfHeight:new yi};break}return t[e.id]=i,i}}}function Oc(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let i;switch(e.type){case"DirectionalLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ci};break;case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ci};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ci,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=i,i}}}let jc=0;function Mc(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Ic(){const t=new Ac,e=Oc(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let o=0;o<9;o++)i.probe.push(new yi);const s=new yi,n=new Yi,a=new Yi;function r(r,o,l){let c=0,h=0,d=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let u=0,p=0,f=0,m=0,g=0,v=0,b=0,y=0;const _=l.matrixWorldInverse;r.sort(Mc);for(let w=0,C=r.length;w<C;w++){const o=r[w],l=o.color,x=o.intensity,C=o.distance,k=o.shadow&&o.shadow.map?o.shadow.map.texture:null;if(o.isAmbientLight)c+=l.r*x,h+=l.g*x,d+=l.b*x;else if(o.isLightProbe)for(let t=0;t<9;t++)i.probe[t].addScaledVector(o.sh.coefficients[t],x);else if(o.isDirectionalLight){const n=t.get(o);if(n.color.copy(o.color).multiplyScalar(o.intensity),n.direction.setFromMatrixPosition(o.matrixWorld),s.setFromMatrixPosition(o.target.matrixWorld),n.direction.sub(s),n.direction.transformDirection(_),o.castShadow){const t=o.shadow,s=e.get(o);s.shadowBias=t.bias,s.shadowNormalBias=t.normalBias,s.shadowRadius=t.radius,s.shadowMapSize=t.mapSize,i.directionalShadow[u]=s,i.directionalShadowMap[u]=k,i.directionalShadowMatrix[u]=o.shadow.matrix,v++}i.directional[u]=n,u++}else if(o.isSpotLight){const n=t.get(o);if(n.position.setFromMatrixPosition(o.matrixWorld),n.position.applyMatrix4(_),n.color.copy(l).multiplyScalar(x),n.distance=C,n.direction.setFromMatrixPosition(o.matrixWorld),s.setFromMatrixPosition(o.target.matrixWorld),n.direction.sub(s),n.direction.transformDirection(_),n.coneCos=Math.cos(o.angle),n.penumbraCos=Math.cos(o.angle*(1-o.penumbra)),n.decay=o.decay,o.castShadow){const t=o.shadow,s=e.get(o);s.shadowBias=t.bias,s.shadowNormalBias=t.normalBias,s.shadowRadius=t.radius,s.shadowMapSize=t.mapSize,i.spotShadow[f]=s,i.spotShadowMap[f]=k,i.spotShadowMatrix[f]=o.shadow.matrix,y++}i.spot[f]=n,f++}else if(o.isRectAreaLight){const e=t.get(o);e.color.copy(l).multiplyScalar(x),e.position.setFromMatrixPosition(o.matrixWorld),e.position.applyMatrix4(_),a.identity(),n.copy(o.matrixWorld),n.premultiply(_),a.extractRotation(n),e.halfWidth.set(.5*o.width,0,0),e.halfHeight.set(0,.5*o.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),i.rectArea[m]=e,m++}else if(o.isPointLight){const s=t.get(o);if(s.position.setFromMatrixPosition(o.matrixWorld),s.position.applyMatrix4(_),s.color.copy(o.color).multiplyScalar(o.intensity),s.distance=o.distance,s.decay=o.decay,o.castShadow){const t=o.shadow,s=e.get(o);s.shadowBias=t.bias,s.shadowNormalBias=t.normalBias,s.shadowRadius=t.radius,s.shadowMapSize=t.mapSize,s.shadowCameraNear=t.camera.near,s.shadowCameraFar=t.camera.far,i.pointShadow[p]=s,i.pointShadowMap[p]=k,i.pointShadowMatrix[p]=o.shadow.matrix,b++}i.point[p]=s,p++}else if(o.isHemisphereLight){const e=t.get(o);e.direction.setFromMatrixPosition(o.matrixWorld),e.direction.transformDirection(_),e.direction.normalize(),e.skyColor.copy(o.color).multiplyScalar(x),e.groundColor.copy(o.groundColor).multiplyScalar(x),i.hemi[g]=e,g++}}m>0&&(i.rectAreaLTC1=Io.LTC_1,i.rectAreaLTC2=Io.LTC_2),i.ambient[0]=c,i.ambient[1]=h,i.ambient[2]=d;const x=i.hash;x.directionalLength===u&&x.pointLength===p&&x.spotLength===f&&x.rectAreaLength===m&&x.hemiLength===g&&x.numDirectionalShadows===v&&x.numPointShadows===b&&x.numSpotShadows===y||(i.directional.length=u,i.spot.length=f,i.rectArea.length=m,i.point.length=p,i.hemi.length=g,i.directionalShadow.length=v,i.directionalShadowMap.length=v,i.pointShadow.length=b,i.pointShadowMap.length=b,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=v,i.pointShadowMatrix.length=b,i.spotShadowMatrix.length=y,x.directionalLength=u,x.pointLength=p,x.spotLength=f,x.rectAreaLength=m,x.hemiLength=g,x.numDirectionalShadows=v,x.numPointShadows=b,x.numSpotShadows=y,i.version=jc++)}return{setup:r,state:i}}function Tc(){const t=new Ic,e=[],i=[];function s(){e.length=0,i.length=0}function n(t){e.push(t)}function a(t){i.push(t)}function r(s){t.setup(e,i,s)}const o={lightsArray:e,shadowsArray:i,lights:t};return{init:s,state:o,setupLights:r,pushLight:n,pushShadow:a}}function Ec(){let t=new WeakMap;function e(e,i){let s;return!1===t.has(e)?(s=new Tc,t.set(e,new WeakMap),t.get(e).set(i,s)):!1===t.get(e).has(i)?(s=new Tc,t.get(e).set(i,s)):s=t.get(e).get(i),s}function i(){t=new WeakMap}return{get:e,dispose:i}}function Dc(t){Hs.call(this),this.type="MeshDepthMaterial",this.depthPacking=Qe,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function Lc(t){Hs.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new yi,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}Dc.prototype=Object.create(Hs.prototype),Dc.prototype.constructor=Dc,Dc.prototype.isMeshDepthMaterial=!0,Dc.prototype.copy=function(t){return Hs.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Lc.prototype=Object.create(Hs.prototype),Lc.prototype.constructor=Lc,Lc.prototype.isMeshDistanceMaterial=!0,Lc.prototype.copy=function(t){return Hs.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};var Pc="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",Rc="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function zc(t,e,i){let s=new ia;const n=new ci,a=new ci,r=new mi,o=[],l=[],h={},m={0:p,1:u,2:f},v=new Wn({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new ci},radius:{value:4}},vertexShader:Rc,fragmentShader:Pc}),b=v.clone();b.defines.HORIZONAL_PASS=1;const y=new pn;y.setAttribute("position",new Ys(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Tn(y,v),x=this;function w(i,s){const n=e.update(_);v.uniforms.shadow_pass.value=i.map.texture,v.uniforms.resolution.value=i.mapSize,v.uniforms.radius.value=i.radius,t.setRenderTarget(i.mapPass),t.clear(),t.renderBufferDirect(s,null,n,v,_,null),b.uniforms.shadow_pass.value=i.mapPass.texture,b.uniforms.resolution.value=i.mapSize,b.uniforms.radius.value=i.radius,t.setRenderTarget(i.map),t.clear(),t.renderBufferDirect(s,null,n,b,_,null)}function C(t,e,i){const s=t<<0|e<<1|i<<2;let n=o[s];return void 0===n&&(n=new Dc({depthPacking:Ze,morphTargets:t,skinning:e}),o[s]=n),n}function k(t,e,i){const s=t<<0|e<<1|i<<2;let n=l[s];return void 0===n&&(n=new Lc({morphTargets:t,skinning:e}),l[s]=n),n}function S(e,i,s,n,a,r,o){let l=null,c=C,u=e.customDepthMaterial;if(!0===n.isPointLight&&(c=k,u=e.customDistanceMaterial),void 0===u){let t=!1;!0===s.morphTargets&&(t=i.morphAttributes&&i.morphAttributes.position&&i.morphAttributes.position.length>0);let n=!1;!0===e.isSkinnedMesh&&!0===s.skinning&&(n=!0);const a=!0===e.isInstancedMesh;l=c(t,n,a)}else l=u;if(t.localClippingEnabled&&!0===s.clipShadows&&0!==s.clippingPlanes.length){const t=l.uuid,e=s.uuid;let i=h[t];void 0===i&&(i={},h[t]=i);let n=i[e];void 0===n&&(n=l.clone(),i[e]=n),l=n}return l.visible=s.visible,l.wireframe=s.wireframe,l.side=o===d?null!==s.shadowSide?s.shadowSide:s.side:null!==s.shadowSide?s.shadowSide:m[s.side],l.clipShadows=s.clipShadows,l.clippingPlanes=s.clippingPlanes,l.clipIntersection=s.clipIntersection,l.wireframeLinewidth=s.wireframeLinewidth,l.linewidth=s.linewidth,!0===n.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(n.matrixWorld),l.nearDistance=a,l.farDistance=r),l}function A(i,n,a,r,o){if(!1===i.visible)return;const l=i.layers.test(n.layers);if(l&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&o===d)&&(!i.frustumCulled||s.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,i.matrixWorld);const s=e.update(i),n=i.material;if(Array.isArray(n)){const e=s.groups;for(let l=0,c=e.length;l<c;l++){const c=e[l],h=n[c.materialIndex];if(h&&h.visible){const e=S(i,s,h,r,a.near,a.far,o);t.renderBufferDirect(a,null,s,e,i,c)}}}else if(n.visible){const e=S(i,s,n,r,a.near,a.far,o);t.renderBufferDirect(a,null,s,e,i,null)}}const c=i.children;for(let t=0,e=c.length;t<e;t++)A(c[t],n,a,r,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=c,this.render=function(e,o,l){if(!1===x.enabled)return;if(!1===x.autoUpdate&&!1===x.needsUpdate)return;if(0===e.length)return;const c=t.getRenderTarget(),h=t.getActiveCubeFace(),u=t.getActiveMipmapLevel(),p=t.state;p.setBlending(g),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(let f=0,m=e.length;f<m;f++){const c=e[f],h=c.shadow;if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;if(void 0===h)continue;n.copy(h.mapSize);const u=h.getFrameExtents();if(n.multiply(u),a.copy(h.mapSize),(n.x>i||n.y>i)&&(n.x>i&&(a.x=Math.floor(i/u.x),n.x=a.x*u.x,h.mapSize.x=a.x),n.y>i&&(a.y=Math.floor(i/u.y),n.y=a.y*u.y,h.mapSize.y=a.y)),null===h.map&&!h.isPointLightShadow&&this.type===d){const t={minFilter:ft,magFilter:ft,format:Tt};h.map=new gi(n.x,n.y,t),h.map.texture.name=c.name+".shadowMap",h.mapPass=new gi(n.x,n.y,t),h.camera.updateProjectionMatrix()}if(null===h.map){const t={minFilter:dt,magFilter:dt,format:Tt};h.map=new gi(n.x,n.y,t),h.map.texture.name=c.name+".shadowMap",h.camera.updateProjectionMatrix()}t.setRenderTarget(h.map),t.clear();const m=h.getViewportCount();for(let t=0;t<m;t++){const e=h.getViewport(t);r.set(a.x*e.x,a.y*e.y,a.x*e.z,a.y*e.w),p.viewport(r),h.updateMatrices(c,t),s=h.getFrustum(),A(o,l,h.camera,c,this.type)}h.isPointLightShadow||this.type!==d||w(h,l),h.needsUpdate=!1}x.needsUpdate=!1,t.setRenderTarget(c,h,u)}}function Nc(t,e,i){const s=i.isWebGL2;function n(){let e=!1;const i=new mi;let s=null;const n=new mi(0,0,0,0);return{setMask:function(i){s===i||e||(t.colorMask(i,i,i,i),s=i)},setLocked:function(t){e=t},setClear:function(e,s,a,r,o){!0===o&&(e*=r,s*=r,a*=r),i.set(e,s,a,r),!1===n.equals(i)&&(t.clearColor(e,s,a,r),n.copy(i))},reset:function(){e=!1,s=null,n.set(-1,0,0,0)}}}function a(){let e=!1,i=null,s=null,n=null;return{setTest:function(t){t?vt(2929):bt(2929)},setMask:function(s){i===s||e||(t.depthMask(s),i=s)},setFunc:function(e){if(s!==e){if(e)switch(e){case N:t.depthFunc(512);break;case B:t.depthFunc(519);break;case F:t.depthFunc(513);break;case $:t.depthFunc(515);break;case U:t.depthFunc(514);break;case H:t.depthFunc(518);break;case V:t.depthFunc(516);break;case G:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);s=e}},setLocked:function(t){e=t},setClear:function(e){n!==e&&(t.clearDepth(e),n=e)},reset:function(){e=!1,i=null,s=null,n=null}}}function c(){let e=!1,i=null,s=null,n=null,a=null,r=null,o=null,l=null,c=null;return{setTest:function(t){e||(t?vt(2960):bt(2960))},setMask:function(s){i===s||e||(t.stencilMask(s),i=s)},setFunc:function(e,i,r){s===e&&n===i&&a===r||(t.stencilFunc(e,i,r),s=e,n=i,a=r)},setOp:function(e,i,s){r===e&&o===i&&l===s||(t.stencilOp(e,i,s),r=e,o=i,l=s)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,i=null,s=null,n=null,a=null,r=null,o=null,l=null,c=null}}}const h=new n,d=new a,u=new c;let m={},W=null,Y=null,q=null,X=null,Q=null,Z=null,K=null,J=null,tt=null,et=!1,it=null,st=null,nt=null,at=null,rt=null;const ot=t.getParameter(35661);let lt=!1,ct=0;const ht=t.getParameter(7938);-1!==ht.indexOf("WebGL")?(ct=parseFloat(/^WebGL\ ([0-9])/.exec(ht)[1]),lt=ct>=1):-1!==ht.indexOf("OpenGL ES")&&(ct=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(ht)[1]),lt=ct>=2);let dt=null,ut={};const pt=new mi,ft=new mi;function mt(e,i,s){const n=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let r=0;r<s;r++)t.texImage2D(i+r,0,6408,1,1,0,6408,5121,n);return a}const gt={};function vt(e){!0!==m[e]&&(t.enable(e),m[e]=!0)}function bt(e){!1!==m[e]&&(t.disable(e),m[e]=!1)}function yt(e){return W!==e&&(t.useProgram(e),W=e,!0)}gt[3553]=mt(3553,3553,1),gt[34067]=mt(34067,34069,6),h.setClear(0,0,0,1),d.setClear(1),u.setClear(0),vt(2929),d.setFunc($),kt(!1),St(o),vt(2884),wt(g);const _t={[w]:32774,[C]:32778,[k]:32779};if(s)_t[S]=32775,_t[A]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(_t[S]=t.MIN_EXT,_t[A]=t.MAX_EXT)}const xt={[O]:0,[j]:1,[M]:768,[T]:770,[z]:776,[P]:774,[D]:772,[I]:769,[E]:771,[R]:775,[L]:773};function wt(e,i,s,n,a,r,o,l){if(e!==g){if(Y||(vt(3042),Y=!0),e===x)a=a||i,r=r||s,o=o||n,i===X&&a===K||(t.blendEquationSeparate(_t[i],_t[a]),X=i,K=a),s===Q&&n===Z&&r===J&&o===tt||(t.blendFuncSeparate(xt[s],xt[n],xt[r],xt[o]),Q=s,Z=n,J=r,tt=o),q=e,et=null;else if(e!==q||l!==et){if(X===w&&K===w||(t.blendEquation(32774),X=w,K=w),l)switch(e){case v:t.blendFuncSeparate(1,771,1,771);break;case b:t.blendFunc(1,1);break;case y:t.blendFuncSeparate(0,0,769,771);break;case _:t.blendFuncSeparate(0,768,0,770);break;default:break}else switch(e){case v:t.blendFuncSeparate(770,771,1,771);break;case b:t.blendFunc(770,1);break;case y:t.blendFunc(0,769);break;case _:t.blendFunc(0,768);break;default:break}Q=null,Z=null,J=null,tt=null,q=e,et=l}}else Y&&(bt(3042),Y=!1)}function Ct(t,e){t.side===f?bt(2884):vt(2884);let i=t.side===p;e&&(i=!i),kt(i),t.blending===v&&!1===t.transparent?wt(g):wt(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),d.setFunc(t.depthFunc),d.setTest(t.depthTest),d.setMask(t.depthWrite),h.setMask(t.colorWrite);const s=t.stencilWrite;u.setTest(s),s&&(u.setMask(t.stencilWriteMask),u.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),u.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Ot(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function kt(e){it!==e&&(e?t.frontFace(2304):t.frontFace(2305),it=e)}function St(e){e!==r?(vt(2884),e!==st&&(e===o?t.cullFace(1029):e===l?t.cullFace(1028):t.cullFace(1032))):bt(2884),st=e}function At(e){e!==nt&&(lt&&t.lineWidth(e),nt=e)}function Ot(e,i,s){e?(vt(32823),at===i&&rt===s||(t.polygonOffset(i,s),at=i,rt=s)):bt(32823)}function jt(t){t?vt(3089):bt(3089)}function Mt(e){void 0===e&&(e=33984+ot-1),dt!==e&&(t.activeTexture(e),dt=e)}function It(e,i){null===dt&&Mt();let s=ut[dt];void 0===s&&(s={type:void 0,texture:void 0},ut[dt]=s),s.type===e&&s.texture===i||(t.bindTexture(e,i||gt[e]),s.type=e,s.texture=i)}function Tt(){const e=ut[dt];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)}function Et(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){}}function Dt(){try{t.texImage2D.apply(t,arguments)}catch(e){}}function Lt(){try{t.texImage3D.apply(t,arguments)}catch(e){}}function Pt(e){!1===pt.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),pt.copy(e))}function Rt(e){!1===ft.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),ft.copy(e))}function zt(){m={},dt=null,ut={},W=null,q=null,it=null,st=null,h.reset(),d.reset(),u.reset()}return{buffers:{color:h,depth:d,stencil:u},enable:vt,disable:bt,useProgram:yt,setBlending:wt,setMaterial:Ct,setFlipSided:kt,setCullFace:St,setLineWidth:At,setPolygonOffset:Ot,setScissorTest:jt,activeTexture:Mt,bindTexture:It,unbindTexture:Tt,compressedTexImage2D:Et,texImage2D:Dt,texImage3D:Lt,scissor:Pt,viewport:Rt,reset:zt}}function Bc(t,e,i,s,n,a,r){const o=n.isWebGL2,l=(n.maxTextures,n.maxCubemapSize),c=n.maxTextureSize,h=n.maxSamples,d=new WeakMap;let u,p=!1;try{p="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(K){}function f(t,e){return p?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function m(t,e,i,s){let n=1;if((t.width>s||t.height>s)&&(n=s/Math.max(t.width,t.height)),n<1||!0===e){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const s=e?li.floorPowerOfTwo:Math.floor,a=s(n*t.width),r=s(n*t.height);void 0===u&&(u=f(a,r));const o=i?f(a,r):u;o.width=a,o.height=r;const l=o.getContext("2d");return l.drawImage(t,0,0,a,r),o}return t}return t}function g(t){return li.isPowerOfTwo(t.width)&&li.isPowerOfTwo(t.height)}function v(t){return!o&&(t.wrapS!==ct||t.wrapT!==ct||t.minFilter!==dt&&t.minFilter!==ft)}function b(t,e){return t.generateMipmaps&&e&&t.minFilter!==dt&&t.minFilter!==ft}function y(e,i,n,a){t.generateMipmap(e);const r=s.get(i);r.__maxMipLevel=Math.log(Math.max(n,a))*Math.LOG2E}function _(i,s,n){if(!1===o)return s;if(null!==i&&void 0!==t[i])return t[i];let a=s;return 6403===s&&(5126===n&&(a=33326),5131===n&&(a=33325),5121===n&&(a=33321)),6407===s&&(5126===n&&(a=34837),5131===n&&(a=34843),5121===n&&(a=32849)),6408===s&&(5126===n&&(a=34836),5131===n&&(a=34842),5121===n&&(a=32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||e.get("EXT_color_buffer_float"),a}function x(t){return t===dt||t===ut||t===pt?9728:9729}function w(t){const e=t.target;e.removeEventListener("dispose",w),k(e),e.isVideoTexture&&d.delete(e),r.memory.textures--}function C(t){const e=t.target;e.removeEventListener("dispose",C),S(e),r.memory.textures--}function k(e){const i=s.get(e);void 0!==i.__webglInit&&(t.deleteTexture(i.__webglTexture),s.remove(e))}function S(e){const i=s.get(e),n=s.get(e.texture);if(e){if(void 0!==n.__webglTexture&&t.deleteTexture(n.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(i.__webglFramebuffer[e]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[e]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&t.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer);s.remove(e.texture),s.remove(e)}}let A=0;function O(){A=0}function j(){const t=A;return A+=1,t}function M(t,e){const n=s.get(t);if(t.isVideoTexture&&Y(t),t.version>0&&n.__version!==t.version){const i=t.image;if(void 0===i);else if(!1!==i.complete)return void N(n,t,e)}i.activeTexture(33984+e),i.bindTexture(3553,n.__webglTexture)}function I(t,e){const n=s.get(t);t.version>0&&n.__version!==t.version?N(n,t,e):(i.activeTexture(33984+e),i.bindTexture(35866,n.__webglTexture))}function T(t,e){const n=s.get(t);t.version>0&&n.__version!==t.version?N(n,t,e):(i.activeTexture(33984+e),i.bindTexture(32879,n.__webglTexture))}function E(e,n){if(6!==e.image.length)return;const r=s.get(e);if(e.version>0&&r.__version!==e.version){z(r,e),i.activeTexture(33984+n),i.bindTexture(34067,r.__webglTexture),t.pixelStorei(37440,e.flipY);const s=e&&(e.isCompressedTexture||e.image[0].isCompressedTexture),c=e.image[0]&&e.image[0].isDataTexture,h=[];for(let t=0;t<6;t++)h[t]=s||c?c?e.image[t].image:e.image[t]:m(e.image[t],!1,!0,l);const d=h[0],u=g(d)||o,p=a.convert(e.format),f=a.convert(e.type),v=_(e.internalFormat,p,f);let x;if(R(34067,e,u),s){for(let t=0;t<6;t++){x=h[t].mipmaps;for(let s=0;s<x.length;s++){const n=x[s];e.format!==Tt&&e.format!==It?null!==p&&i.compressedTexImage2D(34069+t,s,v,n.width,n.height,0,n.data):i.texImage2D(34069+t,s,v,n.width,n.height,0,p,f,n.data)}}r.__maxMipLevel=x.length-1}else{x=e.mipmaps;for(let t=0;t<6;t++)if(c){i.texImage2D(34069+t,0,v,h[t].width,h[t].height,0,p,f,h[t].data);for(let e=0;e<x.length;e++){const s=x[e],n=s.image[t].image;i.texImage2D(34069+t,e+1,v,n.width,n.height,0,p,f,n.data)}}else{i.texImage2D(34069+t,0,v,p,f,h[t]);for(let e=0;e<x.length;e++){const s=x[e];i.texImage2D(34069+t,e+1,v,p,f,s.image[t])}}r.__maxMipLevel=x.length}b(e,u)&&y(34067,e,d.width,d.height),r.__version=e.version,e.onUpdate&&e.onUpdate(e)}else i.activeTexture(33984+n),i.bindTexture(34067,r.__webglTexture)}function D(t,e){i.activeTexture(33984+e),i.bindTexture(34067,s.get(t).__webglTexture)}const L={[lt]:10497,[ct]:33071,[ht]:33648},P={[dt]:9728,[ut]:9984,[pt]:9986,[ft]:9729,[mt]:9985,[gt]:9987};function R(i,a,r){r?(t.texParameteri(i,10242,L[a.wrapS]),t.texParameteri(i,10243,L[a.wrapT]),32879!==i&&35866!==i||t.texParameteri(i,32882,L[a.wrapR]),t.texParameteri(i,10240,P[a.magFilter]),t.texParameteri(i,10241,P[a.minFilter])):(t.texParameteri(i,10242,33071),t.texParameteri(i,10243,33071),32879!==i&&35866!==i||t.texParameteri(i,32882,33071),a.wrapS!==ct||a.wrapT,t.texParameteri(i,10240,x(a.magFilter)),t.texParameteri(i,10241,x(a.minFilter)),a.minFilter!==dt&&a.minFilter);const l=e.get("EXT_texture_filter_anisotropic");if(l){if(a.type===Ct&&null===e.get("OES_texture_float_linear"))return;if(a.type===kt&&null===(o||e.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||s.get(a).__currentAnisotropy)&&(t.texParameterf(i,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,n.getMaxAnisotropy())),s.get(a).__currentAnisotropy=a.anisotropy)}}function z(e,i){void 0===e.__webglInit&&(e.__webglInit=!0,i.addEventListener("dispose",w),e.__webglTexture=t.createTexture(),r.memory.textures++)}function N(e,s,n){let r=3553;s.isDataTexture2DArray&&(r=35866),s.isDataTexture3D&&(r=32879),z(e,s),i.activeTexture(33984+n),i.bindTexture(r,e.__webglTexture),t.pixelStorei(37440,s.flipY),t.pixelStorei(37441,s.premultiplyAlpha),t.pixelStorei(3317,s.unpackAlignment);const l=v(s)&&!1===g(s.image),h=m(s.image,l,!1,c),d=g(h)||o,u=a.convert(s.format);let p,f=a.convert(s.type),x=_(s.internalFormat,u,f);R(r,s,d);const w=s.mipmaps;if(s.isDepthTexture)x=6402,o?x=s.type===Ct?36012:s.type===wt?33190:s.type===jt?35056:33189:s.type,s.format===Lt&&6402===x&&s.type!==_t&&s.type!==wt&&(s.type=_t,f=a.convert(s.type)),s.format===Pt&&6402===x&&(x=34041,s.type!==jt&&(s.type=jt,f=a.convert(s.type))),i.texImage2D(3553,0,x,h.width,h.height,0,u,f,null);else if(s.isDataTexture)if(w.length>0&&d){for(let t=0,e=w.length;t<e;t++)p=w[t],i.texImage2D(3553,t,x,p.width,p.height,0,u,f,p.data);s.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else i.texImage2D(3553,0,x,h.width,h.height,0,u,f,h.data),e.__maxMipLevel=0;else if(s.isCompressedTexture){for(let t=0,e=w.length;t<e;t++)p=w[t],s.format!==Tt&&s.format!==It?null!==u&&i.compressedTexImage2D(3553,t,x,p.width,p.height,0,p.data):i.texImage2D(3553,t,x,p.width,p.height,0,u,f,p.data);e.__maxMipLevel=w.length-1}else if(s.isDataTexture2DArray)i.texImage3D(35866,0,x,h.width,h.height,h.depth,0,u,f,h.data),e.__maxMipLevel=0;else if(s.isDataTexture3D)i.texImage3D(32879,0,x,h.width,h.height,h.depth,0,u,f,h.data),e.__maxMipLevel=0;else if(w.length>0&&d){for(let t=0,e=w.length;t<e;t++)p=w[t],i.texImage2D(3553,t,x,u,f,p);s.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else i.texImage2D(3553,0,x,u,f,h),e.__maxMipLevel=0;b(s,d)&&y(r,s,h.width,h.height),e.__version=s.version,s.onUpdate&&s.onUpdate(s)}function B(e,n,r,o){const l=a.convert(n.texture.format),c=a.convert(n.texture.type),h=_(n.texture.internalFormat,l,c);i.texImage2D(o,0,h,n.width,n.height,0,l,c,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,r,o,s.get(n.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function F(e,i,s){if(t.bindRenderbuffer(36161,e),i.depthBuffer&&!i.stencilBuffer){let n=33189;if(s){const e=i.depthTexture;e&&e.isDepthTexture&&(e.type===Ct?n=36012:e.type===wt&&(n=33190));const s=W(i);t.renderbufferStorageMultisample(36161,s,n,i.width,i.height)}else t.renderbufferStorage(36161,n,i.width,i.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(i.depthBuffer&&i.stencilBuffer){if(s){const e=W(i);t.renderbufferStorageMultisample(36161,e,35056,i.width,i.height)}else t.renderbufferStorage(36161,34041,i.width,i.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=a.convert(i.texture.format),n=a.convert(i.texture.type),r=_(i.texture.internalFormat,e,n);if(s){const e=W(i);t.renderbufferStorageMultisample(36161,e,r,i.width,i.height)}else t.renderbufferStorage(36161,r,i.width,i.height)}t.bindRenderbuffer(36161,null)}function $(e,i){const n=i&&i.isWebGLCubeRenderTarget;if(n)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");s.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),M(i.depthTexture,0);const a=s.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===Lt)t.framebufferTexture2D(36160,36096,3553,a,0);else{if(i.depthTexture.format!==Pt)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,a,0)}}function U(e){const i=s.get(e),n=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(n)throw new Error("target.depthTexture not supported in Cube render targets");$(i.__webglFramebuffer,e)}else if(n){i.__webglDepthbuffer=[];for(let s=0;s<6;s++)t.bindFramebuffer(36160,i.__webglFramebuffer[s]),i.__webglDepthbuffer[s]=t.createRenderbuffer(),F(i.__webglDepthbuffer[s],e,!1)}else t.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),F(i.__webglDepthbuffer,e,!1);t.bindFramebuffer(36160,null)}function H(e){const n=s.get(e),l=s.get(e.texture);e.addEventListener("dispose",C),l.__webglTexture=t.createTexture(),r.memory.textures++;const c=!0===e.isWebGLCubeRenderTarget,h=!0===e.isWebGLMultisampleRenderTarget,d=g(e)||o;if(!o||e.texture.format!==It||e.texture.type!==Ct&&e.texture.type!==kt||(e.texture.format=Tt),c){n.__webglFramebuffer=[];for(let e=0;e<6;e++)n.__webglFramebuffer[e]=t.createFramebuffer()}else if(n.__webglFramebuffer=t.createFramebuffer(),h&&o){n.__webglMultisampledFramebuffer=t.createFramebuffer(),n.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,n.__webglColorRenderbuffer);const i=a.convert(e.texture.format),s=a.convert(e.texture.type),r=_(e.texture.internalFormat,i,s),o=W(e);t.renderbufferStorageMultisample(36161,o,r,e.width,e.height),t.bindFramebuffer(36160,n.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,n.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(n.__webglDepthRenderbuffer=t.createRenderbuffer(),F(n.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}if(c){i.bindTexture(34067,l.__webglTexture),R(34067,e.texture,d);for(let t=0;t<6;t++)B(n.__webglFramebuffer[t],e,36064,34069+t);b(e.texture,d)&&y(34067,e.texture,e.width,e.height),i.bindTexture(34067,null)}else i.bindTexture(3553,l.__webglTexture),R(3553,e.texture,d),B(n.__webglFramebuffer,e,36064,3553),b(e.texture,d)&&y(3553,e.texture,e.width,e.height),i.bindTexture(3553,null);e.depthBuffer&&U(e)}function V(t){const e=t.texture,n=g(t)||o;if(b(e,n)){const n=t.isWebGLCubeRenderTarget?34067:3553,a=s.get(e).__webglTexture;i.bindTexture(n,a),y(n,e,t.width,t.height),i.bindTexture(n,null)}}function G(e){if(e.isWebGLMultisampleRenderTarget&&o){const i=s.get(e);t.bindFramebuffer(36008,i.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,i.__webglFramebuffer);const n=e.width,a=e.height;let r=16384;e.depthBuffer&&(r|=256),e.stencilBuffer&&(r|=1024),t.blitFramebuffer(0,0,n,a,0,0,n,a,r,9728),t.bindFramebuffer(36160,i.__webglMultisampledFramebuffer)}}function W(t){return o&&t.isWebGLMultisampleRenderTarget?Math.min(h,t.samples):0}function Y(t){const e=r.render.frame;d.get(t)!==e&&(d.set(t,e),t.update())}let q=!1,X=!1;function Q(t,e){t&&t.isWebGLRenderTarget&&(!1===q&&(q=!0),t=t.texture),M(t,e)}function Z(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===X&&(X=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?E(t,e):D(t,e)}this.allocateTextureUnit=j,this.resetTextureUnits=O,this.setTexture2D=M,this.setTexture2DArray=I,this.setTexture3D=T,this.setTextureCube=E,this.setTextureCubeDynamic=D,this.setupRenderTarget=H,this.updateRenderTargetMipmap=V,this.updateMultisampleRenderTarget=G,this.safeSetTexture2D=Q,this.safeSetTextureCube=Z}function Fc(t,e,i){const s=i.isWebGL2;function n(t){let i;if(t===vt)return 5121;if(t===St)return 32819;if(t===At)return 32820;if(t===Ot)return 33635;if(t===bt)return 5120;if(t===yt)return 5122;if(t===_t)return 5123;if(t===xt)return 5124;if(t===wt)return 5125;if(t===Ct)return 5126;if(t===kt)return s?5131:(i=e.get("OES_texture_half_float"),null!==i?i.HALF_FLOAT_OES:null);if(t===Mt)return 6406;if(t===It)return 6407;if(t===Tt)return 6408;if(t===Et)return 6409;if(t===Dt)return 6410;if(t===Lt)return 6402;if(t===Pt)return 34041;if(t===Rt)return 6403;if(t===zt)return 36244;if(t===Nt)return 33319;if(t===Bt)return 33320;if(t===Ft)return 36248;if(t===$t)return 36249;if(t===Ut||t===Ht||t===Vt||t===Gt){if(i=e.get("WEBGL_compressed_texture_s3tc"),null===i)return null;if(t===Ut)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Ht)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Vt)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Gt)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===Wt||t===Yt||t===qt||t===Xt){if(i=e.get("WEBGL_compressed_texture_pvrtc"),null===i)return null;if(t===Wt)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===Yt)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===qt)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===Xt)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===Qt)return i=e.get("WEBGL_compressed_texture_etc1"),null!==i?i.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===Zt||t===Kt)&&(i=e.get("WEBGL_compressed_texture_etc"),null!==i)){if(t===Zt)return i.COMPRESSED_RGB8_ETC2;if(t===Kt)return i.COMPRESSED_RGBA8_ETC2_EAC}return t===Jt||t===te||t===ee||t===ie||t===se||t===ne||t===ae||t===re||t===oe||t===le||t===ce||t===he||t===de||t===ue||t===fe||t===me||t===ge||t===ve||t===be||t===ye||t===_e||t===xe||t===we||t===Ce||t===ke||t===Se||t===Ae||t===Oe?(i=e.get("WEBGL_compressed_texture_astc"),null!==i?t:null):t===pe?(i=e.get("EXT_texture_compression_bptc"),null!==i?t:null):t===jt?s?34042:(i=e.get("WEBGL_depth_texture"),null!==i?i.UNSIGNED_INT_24_8_WEBGL:null):void 0}return{convert:n}}function $c(t){qn.call(this),this.cameras=t||[]}function Uc(){bs.call(this),this.type="Group"}function Hc(){this._targetRay=null,this._grip=null,this._hand=null}function Vc(t,e){const i=this;let s=null,n=1,a=null,r="local-floor",o=null;const l=[],c=new Map,h=new qn;h.layers.enable(1),h.viewport=new mi;const d=new qn;d.layers.enable(2),d.viewport=new mi;const u=[h,d],p=new $c;p.layers.enable(1),p.layers.enable(2);let f=null,m=null;function g(t){const e=c.get(t.inputSource);e&&e.dispatchEvent({type:t.type})}function v(){c.forEach((function(t,e){t.disconnect(e)})),c.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),A.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function b(t){a=t,A.setContext(s),A.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}function y(t){const e=s.inputSources;for(let i=0;i<l.length;i++)c.set(e[i],l[i]);for(let i=0;i<t.removed.length;i++){const e=t.removed[i],s=c.get(e);s&&(s.dispatchEvent({type:"disconnected",data:e}),c.delete(e))}for(let i=0;i<t.added.length;i++){const e=t.added[i],s=c.get(e);s&&s.dispatchEvent({type:"connected",data:e})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=l[t];return void 0===e&&(e=new Hc,l[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=l[t];return void 0===e&&(e=new Hc,l[t]=e),e.getGripSpace()},this.getHand=function(t){let e=l[t];return void 0===e&&(e=new Hc,l[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){n=t,i.isPresenting},this.setReferenceSpaceType=function(t){r=t,i.isPresenting},this.getReferenceSpace=function(){return a},this.getSession=function(){return s},this.setSession=function(t){if(s=t,null!==s){s.addEventListener("select",g),s.addEventListener("selectstart",g),s.addEventListener("selectend",g),s.addEventListener("squeeze",g),s.addEventListener("squeezestart",g),s.addEventListener("squeezeend",g),s.addEventListener("end",v);const t=e.getContextAttributes();!0!==t.xrCompatible&&e.makeXRCompatible();const i={antialias:t.antialias,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:n},a=new XRWebGLLayer(s,e,i);s.updateRenderState({baseLayer:a}),s.requestReferenceSpace(r).then(b),s.addEventListener("inputsourceschange",y)}};const _=new yi,x=new yi;function w(t,e,i){_.setFromMatrixPosition(e.matrixWorld),x.setFromMatrixPosition(i.matrixWorld);const s=_.distanceTo(x),n=e.projectionMatrix.elements,a=i.projectionMatrix.elements,r=n[14]/(n[10]-1),o=n[14]/(n[10]+1),l=(n[9]+1)/n[5],c=(n[9]-1)/n[5],h=(n[8]-1)/n[0],d=(a[8]+1)/a[0],u=r*h,p=r*d,f=s/(-h+d),m=f*-h;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);const g=r+f,v=o+f,b=u-m,y=p+(s-m),w=l*o/v*g,C=c*o/v*g;t.projectionMatrix.makePerspective(b,y,w,C,g,v)}function C(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}this.getCamera=function(t){p.near=d.near=h.near=t.near,p.far=d.far=h.far=t.far,f===p.near&&m===p.far||(s.updateRenderState({depthNear:p.near,depthFar:p.far}),f=p.near,m=p.far);const e=t.parent,i=p.cameras;C(p,e);for(let s=0;s<i.length;s++)C(i[s],e);t.matrixWorld.copy(p.matrixWorld);const n=t.children;for(let s=0,a=n.length;s<a;s++)n[s].updateMatrixWorld(!0);return 2===i.length?w(p,h,d):p.projectionMatrix.copy(h.projectionMatrix),p};let k=null;function S(e,i){if(o=i.getViewerPose(a),null!==o){const e=o.views,i=s.renderState.baseLayer;t.setFramebuffer(i.framebuffer);let n=!1;e.length!==p.cameras.length&&(p.cameras.length=0,n=!0);for(let t=0;t<e.length;t++){const s=e[t],a=i.getViewport(s),r=u[t];r.matrix.fromArray(s.transform.matrix),r.projectionMatrix.fromArray(s.projectionMatrix),r.viewport.set(a.x,a.y,a.width,a.height),0===t&&p.matrix.copy(r.matrix),!0===n&&p.cameras.push(r)}}const n=s.inputSources;for(let t=0;t<l.length;t++){const e=l[t],s=n[t];e.update(s,i,a)}k&&k(e,i)}const A=new sa;A.setAnimationLoop(S),this.setAnimationLoop=function(t){k=t},this.dispose=function(){}}function Gc(t){function e(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function i(t,e,i,p){e.isMeshBasicMaterial?s(t,e):e.isMeshLambertMaterial?(s(t,e),l(t,e)):e.isMeshToonMaterial?(s(t,e),h(t,e)):e.isMeshPhongMaterial?(s(t,e),c(t,e)):e.isMeshStandardMaterial?(s(t,e),e.isMeshPhysicalMaterial?u(t,e):d(t,e)):e.isMeshMatcapMaterial?(s(t,e),f(t,e)):e.isMeshDepthMaterial?(s(t,e),m(t,e)):e.isMeshDistanceMaterial?(s(t,e),g(t,e)):e.isMeshNormalMaterial?(s(t,e),v(t,e)):e.isLineBasicMaterial?(n(t,e),e.isLineDashedMaterial&&a(t,e)):e.isPointsMaterial?r(t,e,i,p):e.isSpriteMaterial?o(t,e):e.isShadowMaterial?(t.color.value.copy(e.color),t.opacity.value=e.opacity):e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)}function s(e,i){e.opacity.value=i.opacity,i.color&&e.diffuse.value.copy(i.color),i.emissive&&e.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(e.map.value=i.map),i.alphaMap&&(e.alphaMap.value=i.alphaMap),i.specularMap&&(e.specularMap.value=i.specularMap);const s=t.get(i).envMap;if(s){e.envMap.value=s,e.flipEnvMap.value=s.isCubeTexture?-1:1,e.reflectivity.value=i.reflectivity,e.refractionRatio.value=i.refractionRatio;const n=t.get(s).__maxMipLevel;void 0!==n&&(e.maxMipLevel.value=n)}let n,a;i.lightMap&&(e.lightMap.value=i.lightMap,e.lightMapIntensity.value=i.lightMapIntensity),i.aoMap&&(e.aoMap.value=i.aoMap,e.aoMapIntensity.value=i.aoMapIntensity),i.map?n=i.map:i.specularMap?n=i.specularMap:i.displacementMap?n=i.displacementMap:i.normalMap?n=i.normalMap:i.bumpMap?n=i.bumpMap:i.roughnessMap?n=i.roughnessMap:i.metalnessMap?n=i.metalnessMap:i.alphaMap?n=i.alphaMap:i.emissiveMap?n=i.emissiveMap:i.clearcoatMap?n=i.clearcoatMap:i.clearcoatNormalMap?n=i.clearcoatNormalMap:i.clearcoatRoughnessMap&&(n=i.clearcoatRoughnessMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix)),i.aoMap?a=i.aoMap:i.lightMap&&(a=i.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),e.uv2Transform.value.copy(a.matrix))}function n(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}function a(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function r(t,e,i,s){let n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*i,t.scale.value=.5*s,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function o(t,e){let i;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?i=e.map:e.alphaMap&&(i=e.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}function l(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function c(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===p&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===p&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function h(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===p&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===p&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function d(e,i){e.roughness.value=i.roughness,e.metalness.value=i.metalness,i.roughnessMap&&(e.roughnessMap.value=i.roughnessMap),i.metalnessMap&&(e.metalnessMap.value=i.metalnessMap),i.emissiveMap&&(e.emissiveMap.value=i.emissiveMap),i.bumpMap&&(e.bumpMap.value=i.bumpMap,e.bumpScale.value=i.bumpScale,i.side===p&&(e.bumpScale.value*=-1)),i.normalMap&&(e.normalMap.value=i.normalMap,e.normalScale.value.copy(i.normalScale),i.side===p&&e.normalScale.value.negate()),i.displacementMap&&(e.displacementMap.value=i.displacementMap,e.displacementScale.value=i.displacementScale,e.displacementBias.value=i.displacementBias);const s=t.get(i).envMap;s&&(e.envMapIntensity.value=i.envMapIntensity)}function u(t,e){d(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen),e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===p&&t.clearcoatNormalScale.value.negate()),t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap)}function f(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===p&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===p&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function m(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function g(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}function v(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===p&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===p&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:i}}function Wc(t){t=t||{};const e=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),i=void 0!==t.context?t.context:null,s=void 0!==t.alpha&&t.alpha,n=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,r=void 0!==t.antialias&&t.antialias,o=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,c=void 0!==t.powerPreference?t.powerPreference:"default",h=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let d=null,u=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Ue,this.physicallyCorrectLights=!1,this.toneMapping=X,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const p=this;let f=!1,m=null,g=0,v=0,b=null,y=null,_=-1,x=null,w=null;const C=new mi,k=new mi;let S=null,A=e.width,O=e.height,j=1,M=null,I=null;const T=new mi(0,0,A,O),E=new mi(0,0,A,O);let D=!1;const L=new ia;let P=!1,R=!1;const z=new Yi,N=new yi,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function F(){return null===b?j:1}let $,U,H,V,G,W,Y,q,Q,Z,K,J,tt,et,it,st,nt,at,rt,ot,lt,ct=i;function ht(t,i){for(let s=0;s<t.length;s++){const n=t[s],a=e.getContext(n,i);if(null!==a)return a}return null}try{const t={alpha:s,depth:n,stencil:a,antialias:r,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:h};if(e.addEventListener("webglcontextlost",ft,!1),e.addEventListener("webglcontextrestored",mt,!1),null===ct){const e=["webgl2","webgl","experimental-webgl"];if(!0===p.isWebGL1Renderer&&e.shift(),ct=ht(e,t),null===ct)throw ht(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ct.getShaderPrecisionFormat&&(ct.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Lt){throw Lt}function dt(){$=new No(ct),U=new Po(ct,$,t),!1===U.isWebGL2&&($.get("WEBGL_depth_texture"),$.get("OES_texture_float"),$.get("OES_texture_half_float"),$.get("OES_texture_half_float_linear"),$.get("OES_standard_derivatives"),$.get("OES_element_index_uint"),$.get("OES_vertex_array_object"),$.get("ANGLE_instanced_arrays")),$.get("OES_texture_float_linear"),ot=new Fc(ct,$,U),H=new Nc(ct,$,U),H.scissor(k.copy(E).multiplyScalar(j).floor()),H.viewport(C.copy(T).multiplyScalar(j).floor()),V=new $o(ct),G=new xc,W=new Bc(ct,$,H,G,U,ot,V),Y=new zo(p),q=new na(ct,U),lt=new Do(ct,$,q,U),Q=new Bo(ct,q,V,lt),Z=new Go(ct,Q,q,V),nt=new Vo(ct),it=new Ro(G),K=new _c(p,Y,$,U,lt,it),J=new Gc(G),tt=new Sc(G),et=new Ec,st=new Eo(p,Y,H,Z,o),at=new Lo(ct,$,V,U),rt=new Fo(ct,$,V,U),V.programs=K.programs,p.capabilities=U,p.extensions=$,p.properties=G,p.renderLists=tt,p.state=H,p.info=V}dt();const ut=new Vc(p,ct);this.xr=ut;const pt=new zc(p,Z,U.maxTextureSize);function ft(t){t.preventDefault(),f=!0}function mt(){f=!1,dt()}function gt(t){const e=t.target;e.removeEventListener("dispose",gt),bt(e)}function bt(t){yt(t),G.remove(t)}function yt(t){const e=G.get(t).program;void 0!==e&&K.releaseProgram(e)}function _t(t,e){t.render((function(t){p.renderBufferImmediate(t,e)}))}this.shadowMap=pt,this.getContext=function(){return ct},this.getContextAttributes=function(){return ct.getContextAttributes()},this.forceContextLoss=function(){const t=$.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=$.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return j},this.setPixelRatio=function(t){void 0!==t&&(j=t,this.setSize(A,O,!1))},this.getSize=function(t){return void 0===t&&(t=new ci),t.set(A,O)},this.setSize=function(t,i,s){ut.isPresenting||(A=t,O=i,e.width=Math.floor(t*j),e.height=Math.floor(i*j),!1!==s&&(e.style.width=t+"px",e.style.height=i+"px"),this.setViewport(0,0,t,i))},this.getDrawingBufferSize=function(t){return void 0===t&&(t=new ci),t.set(A*j,O*j).floor()},this.setDrawingBufferSize=function(t,i,s){A=t,O=i,j=s,e.width=Math.floor(t*s),e.height=Math.floor(i*s),this.setViewport(0,0,t,i)},this.getCurrentViewport=function(t){return void 0===t&&(t=new mi),t.copy(C)},this.getViewport=function(t){return t.copy(T)},this.setViewport=function(t,e,i,s){t.isVector4?T.set(t.x,t.y,t.z,t.w):T.set(t,e,i,s),H.viewport(C.copy(T).multiplyScalar(j).floor())},this.getScissor=function(t){return t.copy(E)},this.setScissor=function(t,e,i,s){t.isVector4?E.set(t.x,t.y,t.z,t.w):E.set(t,e,i,s),H.scissor(k.copy(E).multiplyScalar(j).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(t){H.setScissorTest(D=t)},this.setOpaqueSort=function(t){M=t},this.setTransparentSort=function(t){I=t},this.getClearColor=function(){return st.getClearColor()},this.setClearColor=function(){st.setClearColor.apply(st,arguments)},this.getClearAlpha=function(){return st.getClearAlpha()},this.setClearAlpha=function(){st.setClearAlpha.apply(st,arguments)},this.clear=function(t,e,i){let s=0;(void 0===t||t)&&(s|=16384),(void 0===e||e)&&(s|=256),(void 0===i||i)&&(s|=1024),ct.clear(s)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ft,!1),e.removeEventListener("webglcontextrestored",mt,!1),tt.dispose(),et.dispose(),G.dispose(),Y.dispose(),Z.dispose(),lt.dispose(),ut.dispose(),St.stop()},this.renderBufferImmediate=function(t,e){lt.initAttributes();const i=G.get(t);t.hasPositions&&!i.position&&(i.position=ct.createBuffer()),t.hasNormals&&!i.normal&&(i.normal=ct.createBuffer()),t.hasUvs&&!i.uv&&(i.uv=ct.createBuffer()),t.hasColors&&!i.color&&(i.color=ct.createBuffer());const s=e.getAttributes();t.hasPositions&&(ct.bindBuffer(34962,i.position),ct.bufferData(34962,t.positionArray,35048),lt.enableAttribute(s.position),ct.vertexAttribPointer(s.position,3,5126,!1,0,0)),t.hasNormals&&(ct.bindBuffer(34962,i.normal),ct.bufferData(34962,t.normalArray,35048),lt.enableAttribute(s.normal),ct.vertexAttribPointer(s.normal,3,5126,!1,0,0)),t.hasUvs&&(ct.bindBuffer(34962,i.uv),ct.bufferData(34962,t.uvArray,35048),lt.enableAttribute(s.uv),ct.vertexAttribPointer(s.uv,2,5126,!1,0,0)),t.hasColors&&(ct.bindBuffer(34962,i.color),ct.bufferData(34962,t.colorArray,35048),lt.enableAttribute(s.color),ct.vertexAttribPointer(s.color,3,5126,!1,0,0)),lt.disableUnusedAttributes(),ct.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,i,s,n,a){null===e&&(e=B);const r=n.isMesh&&n.matrixWorld.determinant()<0,o=It(t,e,s,n);H.setMaterial(s,r);let l=i.index;const c=i.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let h,d=1;!0===s.wireframe&&(l=Q.getWireframeAttribute(i),d=2),(s.morphTargets||s.morphNormals)&&nt.update(n,i,s,o),lt.setup(n,s,o,i,l);let u=at;null!==l&&(h=q.get(l),u=rt,u.setIndex(h));const p=null!==l?l.count:c.count,f=i.drawRange.start*d,m=i.drawRange.count*d,g=null!==a?a.start*d:0,v=null!==a?a.count*d:1/0,b=Math.max(f,g),y=Math.min(p,f+m,g+v)-1,_=Math.max(0,y-b+1);if(0!==_){if(n.isMesh)!0===s.wireframe?(H.setLineWidth(s.wireframeLinewidth*F()),u.setMode(1)):u.setMode(4);else if(n.isLine){let t=s.linewidth;void 0===t&&(t=1),H.setLineWidth(t*F()),n.isLineSegments?u.setMode(1):n.isLineLoop?u.setMode(2):u.setMode(3)}else n.isPoints?u.setMode(0):n.isSprite&&u.setMode(4);if(n.isInstancedMesh)u.renderInstances(b,_,n.count);else if(i.isInstancedBufferGeometry){const t=Math.min(i.instanceCount,i._maxInstanceCount);u.renderInstances(b,_,t)}else u.render(b,_)}},this.compile=function(t,e){u=et.get(t,e),u.init(),t.traverse((function(t){t.isLight&&(u.pushLight(t),t.castShadow&&u.pushShadow(t))})),u.setupLights(e);const i=new WeakMap;t.traverse((function(e){const s=e.material;if(s)if(Array.isArray(s))for(let n=0;n<s.length;n++){const a=s[n];!1===i.has(a)&&(Mt(a,t,e),i.set(a))}else!1===i.has(s)&&(Mt(s,t,e),i.set(s))}))};let xt=null;function wt(t){ut.isPresenting||xt&&xt(t)}const St=new sa;function At(t,e,i,s){if(!1===t.visible)return;const n=t.layers.test(e.layers);if(n)if(t.isGroup)i=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)u.pushLight(t),t.castShadow&&u.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||L.intersectsSprite(t)){s&&N.setFromMatrixPosition(t.matrixWorld).applyMatrix4(z);const e=Z.update(t),n=t.material;n.visible&&d.push(t,e,n,i,N.z,null)}}else if(t.isImmediateRenderObject)s&&N.setFromMatrixPosition(t.matrixWorld).applyMatrix4(z),d.push(t,null,t.material,i,N.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==V.render.frame&&(t.skeleton.update(),t.skeleton.frame=V.render.frame),!t.frustumCulled||L.intersectsObject(t))){s&&N.setFromMatrixPosition(t.matrixWorld).applyMatrix4(z);const e=Z.update(t),n=t.material;if(Array.isArray(n)){const s=e.groups;for(let a=0,r=s.length;a<r;a++){const r=s[a],o=n[r.materialIndex];o&&o.visible&&d.push(t,e,o,i,N.z,r)}}else n.visible&&d.push(t,e,n,i,N.z,null)}const a=t.children;for(let r=0,o=a.length;r<o;r++)At(a[r],e,i,s)}function Ot(t,e,i){const s=!0===e.isScene?e.overrideMaterial:null;for(let n=0,a=t.length;n<a;n++){const a=t[n],r=a.object,o=a.geometry,l=null===s?a.material:s,c=a.group;if(i.isArrayCamera){w=i;const t=i.cameras;for(let i=0,s=t.length;i<s;i++){const s=t[i];r.layers.test(s.layers)&&(H.viewport(C.copy(s.viewport)),u.setupLights(s),jt(r,e,s,o,l,c))}}else w=null,jt(r,e,i,o,l,c)}}function jt(t,e,i,s,n,a){if(t.onBeforeRender(p,e,i,s,n,a),u=et.get(e,w||i),t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){const s=It(i,e,n,t);H.setMaterial(n),lt.reset(),_t(t,s)}else p.renderBufferDirect(i,e,s,n,t,a);t.onAfterRender(p,e,i,s,n,a),u=et.get(e,w||i)}function Mt(t,e,i){!0!==e.isScene&&(e=B);const s=G.get(t),n=u.state.lights,a=u.state.shadowsArray,r=n.state.version,o=K.getParameters(t,n.state,a,e,i),l=K.getProgramCacheKey(o);let c=s.program,h=!0;if(void 0===c)t.addEventListener("dispose",gt);else if(c.cacheKey!==l)yt(t);else if(s.lightsStateVersion!==r)h=!1;else{if(void 0!==o.shaderID){const i=t.isMeshStandardMaterial?e.environment:null;return void(s.envMap=Y.get(t.envMap||i))}h=!1}h&&(o.uniforms=K.getUniforms(t),t.onBeforeCompile(o,p),c=K.acquireProgram(o,l),s.program=c,s.uniforms=o.uniforms,s.outputEncoding=o.outputEncoding);const d=s.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(s.numClippingPlanes=it.numPlanes,s.numIntersection=it.numIntersection,d.clippingPlanes=it.uniform),s.environment=t.isMeshStandardMaterial?e.environment:null,s.fog=e.fog,s.envMap=Y.get(t.envMap||s.environment),s.needsLights=Dt(t),s.lightsStateVersion=r,s.needsLights&&(d.ambientLightColor.value=n.state.ambient,d.lightProbe.value=n.state.probe,d.directionalLights.value=n.state.directional,d.directionalLightShadows.value=n.state.directionalShadow,d.spotLights.value=n.state.spot,d.spotLightShadows.value=n.state.spotShadow,d.rectAreaLights.value=n.state.rectArea,d.ltc_1.value=n.state.rectAreaLTC1,d.ltc_2.value=n.state.rectAreaLTC2,d.pointLights.value=n.state.point,d.pointLightShadows.value=n.state.pointShadow,d.hemisphereLights.value=n.state.hemi,d.directionalShadowMap.value=n.state.directionalShadowMap,d.directionalShadowMatrix.value=n.state.directionalShadowMatrix,d.spotShadowMap.value=n.state.spotShadowMap,d.spotShadowMatrix.value=n.state.spotShadowMatrix,d.pointShadowMap.value=n.state.pointShadowMap,d.pointShadowMatrix.value=n.state.pointShadowMatrix);const f=s.program.getUniforms(),m=Gl.seqWithValue(f.seq,d);s.uniformsList=m}function It(t,e,i,s){!0!==e.isScene&&(e=B),W.resetTextureUnits();const n=e.fog,a=i.isMeshStandardMaterial?e.environment:null,r=null===b?p.outputEncoding:b.texture.encoding,o=Y.get(i.envMap||a),l=G.get(i),c=u.state.lights;if(!0===P&&(!0===R||t!==x)){const e=t===x&&i.id===_;it.setState(i,t,e)}i.version===l.__version?i.fog&&l.fog!==n||l.environment!==a||l.needsLights&&l.lightsStateVersion!==c.state.version?Mt(i,e,s):void 0===l.numClippingPlanes||l.numClippingPlanes===it.numPlanes&&l.numIntersection===it.numIntersection?(l.outputEncoding!==r||l.envMap!==o)&&Mt(i,e,s):Mt(i,e,s):(Mt(i,e,s),l.__version=i.version);let h=!1,d=!1,f=!1;const m=l.program,g=m.getUniforms(),v=l.uniforms;if(H.useProgram(m.program)&&(h=!0,d=!0,f=!0),i.id!==_&&(_=i.id,d=!0),h||x!==t){if(g.setValue(ct,"projectionMatrix",t.projectionMatrix),U.logarithmicDepthBuffer&&g.setValue(ct,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),x!==t&&(x=t,d=!0,f=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const e=g.map.cameraPosition;void 0!==e&&e.setValue(ct,N.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&g.setValue(ct,"isOrthographic",!0===t.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||i.skinning)&&g.setValue(ct,"viewMatrix",t.matrixWorldInverse)}if(i.skinning){g.setOptional(ct,s,"bindMatrix"),g.setOptional(ct,s,"bindMatrixInverse");const t=s.skeleton;if(t){const e=t.bones;if(U.floatVertexTextures){if(void 0===t.boneTexture){let i=Math.sqrt(4*e.length);i=li.ceilPowerOfTwo(i),i=Math.max(i,4);const s=new Float32Array(i*i*4);s.set(t.boneMatrices);const n=new Jn(s,i,i,Tt,Ct);t.boneMatrices=s,t.boneTexture=n,t.boneTextureSize=i}g.setValue(ct,"boneTexture",t.boneTexture,W),g.setValue(ct,"boneTextureSize",t.boneTextureSize)}else g.setOptional(ct,t,"boneMatrices")}}return(d||l.receiveShadow!==s.receiveShadow)&&(l.receiveShadow=s.receiveShadow,g.setValue(ct,"receiveShadow",s.receiveShadow)),d&&(g.setValue(ct,"toneMappingExposure",p.toneMappingExposure),l.needsLights&&Et(v,f),n&&i.fog&&J.refreshFogUniforms(v,n),J.refreshMaterialUniforms(v,i,j,O),Gl.upload(ct,l.uniformsList,v,W)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Gl.upload(ct,l.uniformsList,v,W),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&g.setValue(ct,"center",s.center),g.setValue(ct,"modelViewMatrix",s.modelViewMatrix),g.setValue(ct,"normalMatrix",s.normalMatrix),g.setValue(ct,"modelMatrix",s.matrixWorld),m}function Et(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function Dt(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}St.setAnimationLoop(wt),"undefined"!==typeof window&&St.setContext(window),this.setAnimationLoop=function(t){xt=t,ut.setAnimationLoop(t),null===t?St.stop():St.start()},this.render=function(t,e){let i,s;if(void 0!==arguments[2]&&(i=arguments[2]),void 0!==arguments[3]&&(s=arguments[3]),void 0!==e&&!0!==e.isCamera)return;if(!0===f)return;lt.resetDefaultState(),_=-1,x=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===ut.enabled&&!0===ut.isPresenting&&(e=ut.getCamera(e)),!0===t.isScene&&t.onBeforeRender(p,t,e,i||b),u=et.get(t,e),u.init(),z.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),L.setFromProjectionMatrix(z),R=this.localClippingEnabled,P=it.init(this.clippingPlanes,R,e),d=tt.get(t,e),d.init(),At(t,e,0,p.sortObjects),d.finish(),!0===p.sortObjects&&d.sort(M,I),!0===P&&it.beginShadows();const n=u.state.shadowsArray;pt.render(n,t,e),u.setupLights(e),!0===P&&it.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==i&&this.setRenderTarget(i),st.render(d,t,e,s);const a=d.opaque,r=d.transparent;a.length>0&&Ot(a,t,e),r.length>0&&Ot(r,t,e),!0===t.isScene&&t.onAfterRender(p,t,e),null!==b&&(W.updateRenderTargetMipmap(b),W.updateMultisampleRenderTarget(b)),H.buffers.depth.setTest(!0),H.buffers.depth.setMask(!0),H.buffers.color.setMask(!0),H.setPolygonOffset(!1),d=null,u=null},this.setFramebuffer=function(t){m!==t&&null===b&&ct.bindFramebuffer(36160,t),m=t},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return v},this.getRenderList=function(){return d},this.setRenderList=function(t){d=t},this.getRenderState=function(){return u},this.setRenderState=function(t){u=t},this.getRenderTarget=function(){return b},this.setRenderTarget=function(t,e=0,i=0){b=t,g=e,v=i,t&&void 0===G.get(t).__webglFramebuffer&&W.setupRenderTarget(t);let s=m,n=!1;if(t){const i=G.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(s=i[e],n=!0):s=t.isWebGLMultisampleRenderTarget?G.get(t).__webglMultisampledFramebuffer:i,C.copy(t.viewport),k.copy(t.scissor),S=t.scissorTest}else C.copy(T).multiplyScalar(j).floor(),k.copy(E).multiplyScalar(j).floor(),S=D;if(y!==s&&(ct.bindFramebuffer(36160,s),y=s),H.viewport(C),H.scissor(k),H.setScissorTest(S),n){const s=G.get(t.texture);ct.framebufferTexture2D(36160,36064,34069+e,s.__webglTexture,i)}},this.readRenderTargetPixels=function(t,e,i,s,n,a,r){if(!t||!t.isWebGLRenderTarget)return;let o=G.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==r&&(o=o[r]),o){let r=!1;o!==y&&(ct.bindFramebuffer(36160,o),r=!0);try{const o=t.texture,l=o.format,c=o.type;if(l!==Tt&&ot.convert(l)!==ct.getParameter(35739))return;if(c!==vt&&ot.convert(c)!==ct.getParameter(35738)&&(c!==Ct||!(U.isWebGL2||$.get("OES_texture_float")||$.get("WEBGL_color_buffer_float")))&&(c!==kt||!(U.isWebGL2?$.get("EXT_color_buffer_float"):$.get("EXT_color_buffer_half_float"))))return;36053===ct.checkFramebufferStatus(36160)&&e>=0&&e<=t.width-s&&i>=0&&i<=t.height-n&&ct.readPixels(e,i,s,n,ot.convert(l),ot.convert(c),a)}finally{r&&ct.bindFramebuffer(36160,y)}}},this.copyFramebufferToTexture=function(t,e,i){void 0===i&&(i=0);const s=Math.pow(2,-i),n=Math.floor(e.image.width*s),a=Math.floor(e.image.height*s),r=ot.convert(e.format);W.setTexture2D(e,0),ct.copyTexImage2D(3553,i,r,t.x,t.y,n,a,0),H.unbindTexture()},this.copyTextureToTexture=function(t,e,i,s){void 0===s&&(s=0);const n=e.image.width,a=e.image.height,r=ot.convert(i.format),o=ot.convert(i.type);W.setTexture2D(i,0),ct.pixelStorei(37440,i.flipY),ct.pixelStorei(37441,i.premultiplyAlpha),ct.pixelStorei(3317,i.unpackAlignment),e.isDataTexture?ct.texSubImage2D(3553,s,t.x,t.y,n,a,r,o,e.image.data):e.isCompressedTexture?ct.compressedTexSubImage2D(3553,s,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,r,e.mipmaps[0].data):ct.texSubImage2D(3553,s,t.x,t.y,r,o,e.image),0===s&&i.generateMipmaps&&ct.generateMipmap(3553),H.unbindTexture()},this.initTexture=function(t){W.setTexture2D(t,0),H.unbindTexture()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Yc(t){Wc.call(this,t)}$c.prototype=Object.assign(Object.create(qn.prototype),{constructor:$c,isArrayCamera:!0}),Uc.prototype=Object.assign(Object.create(bs.prototype),{constructor:Uc,isGroup:!0}),Object.assign(Hc.prototype,{constructor:Hc,getHandSpace:function(){if(null===this._hand&&(this._hand=new Uc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let t=0;t<=window.XRHand.LITTLE_PHALANX_TIP;t++){const t=new Uc;t.matrixAutoUpdate=!1,t.visible=!1,this._hand.joints.push(t),this._hand.add(t)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new Uc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new Uc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(t,e,i){let s=null,n=null,a=null;const r=this._targetRay,o=this._grip,l=this._hand;if(t)if(l&&t.hand){a=!0;for(let s=0;s<=window.XRHand.LITTLE_PHALANX_TIP;s++)if(t.hand[s]){const n=e.getJointPose(t.hand[s],i),a=l.joints[s];null!==n&&(a.matrix.fromArray(n.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.jointRadius=n.radius),a.visible=null!==n;const r=l.joints[window.XRHand.INDEX_PHALANX_TIP],o=l.joints[window.XRHand.THUMB_PHALANX_TIP],c=r.position.distanceTo(o.position),h=.02,d=.005;l.inputState.pinching&&c>h+d?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&c<=h-d&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}}else null!==r&&(s=e.getPose(t.targetRaySpace,i),null!==s&&(r.matrix.fromArray(s.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale))),null!==o&&t.gripSpace&&(n=e.getPose(t.gripSpace,i),null!==n&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale)));return null!==r&&(r.visible=null!==s),null!==o&&(o.visible=null!==n),null!==l&&(l.visible=null!==a),this}}),Object.assign(Vc.prototype,ai.prototype),Yc.prototype=Object.assign(Object.create(Wc.prototype),{constructor:Yc,isWebGL1Renderer:!0});class qc{constructor(t,e){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new Fs(t),this.density=void 0!==e?e:25e-5}clone(){return new qc(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Xc{constructor(t,e,i){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new Fs(t),this.near=void 0!==e?e:1,this.far=void 0!==i?i:1e3}clone(){return new Xc(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Qc extends bs{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}function Zc(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=ii,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=li.generateUUID()}Object.defineProperty(Zc.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Zc.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,i){t*=this.stride,i*=e.stride;for(let s=0,n=this.stride;s<n;s++)this.array[t+s]=e.array[i+s];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=li.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new Zc(e,this.stride);return i.setUsage(this.usage),i},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=li.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const Kc=new yi;function Jc(t,e,i,s){this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=!0===s}function th(t){Hs.call(this),this.type="SpriteMaterial",this.color=new Fs(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}let eh;Object.defineProperties(Jc.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}}),Object.assign(Jc.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(let e=0,i=this.data.count;e<i;e++)Kc.x=this.getX(e),Kc.y=this.getY(e),Kc.z=this.getZ(e),Kc.applyMatrix4(t),this.setXYZ(e,Kc.x,Kc.y,Kc.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this},setXYZ:function(t,e,i,s){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=s,this},setXYZW:function(t,e,i,s,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=s,this.data.array[t+3]=n,this},clone:function(t){if(void 0===t){const t=[];for(let e=0;e<this.count;e++){const i=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[i+e])}return new Ys(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Jc(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(t){if(void 0===t){const t=[];for(let e=0;e<this.count;e++){const i=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[i+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),th.prototype=Object.create(Hs.prototype),th.prototype.constructor=th,th.prototype.isSpriteMaterial=!0,th.prototype.copy=function(t){return Hs.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};const ih=new yi,sh=new yi,nh=new yi,ah=new ci,rh=new ci,oh=new Yi,lh=new yi,ch=new yi,hh=new yi,dh=new ci,uh=new ci,ph=new ci;function fh(t){if(bs.call(this),this.type="Sprite",void 0===eh){eh=new pn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new Zc(t,5);eh.setIndex([0,1,2,0,2,3]),eh.setAttribute("position",new Jc(e,3,0,!1)),eh.setAttribute("uv",new Jc(e,2,3,!1))}this.geometry=eh,this.material=void 0!==t?t:new th,this.center=new ci(.5,.5)}function mh(t,e,i,s,n,a){ah.subVectors(t,i).addScalar(.5).multiply(s),void 0!==n?(rh.x=a*ah.x-n*ah.y,rh.y=n*ah.x+a*ah.y):rh.copy(ah),t.copy(e),t.x+=rh.x,t.y+=rh.y,t.applyMatrix4(oh)}fh.prototype=Object.assign(Object.create(bs.prototype),{constructor:fh,isSprite:!0,raycast:function(t,e){t.camera,sh.setFromMatrixScale(this.matrixWorld),oh.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),nh.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&sh.multiplyScalar(-nh.z);const i=this.material.rotation;let s,n;0!==i&&(n=Math.cos(i),s=Math.sin(i));const a=this.center;mh(lh.set(-.5,-.5,0),nh,a,sh,s,n),mh(ch.set(.5,-.5,0),nh,a,sh,s,n),mh(hh.set(.5,.5,0),nh,a,sh,s,n),dh.set(0,0),uh.set(1,0),ph.set(1,1);let r=t.ray.intersectTriangle(lh,ch,hh,!1,ih);if(null===r&&(mh(ch.set(-.5,.5,0),nh,a,sh,s,n),uh.set(0,1),r=t.ray.intersectTriangle(lh,hh,ch,!1,ih),null===r))return;const o=t.ray.origin.distanceTo(ih);o<t.near||o>t.far||e.push({distance:o,point:ih.clone(),uv:Ds.getUV(ih,lh,ch,hh,dh,uh,ph,new ci),face:null,object:this})},copy:function(t){return bs.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}});const gh=new yi,vh=new yi;function bh(){bs.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function yh(t,e){t&&t.isGeometry,Tn.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Yi,this.bindMatrixInverse=new Yi}bh.prototype=Object.assign(Object.create(bs.prototype),{constructor:bh,isLOD:!0,copy:function(t){bs.prototype.copy.call(this,t,!1);const e=t.levels;for(let i=0,s=e.length;i<s;i++){const t=e[i];this.addLevel(t.object.clone(),t.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);const i=this.levels;let s;for(s=0;s<i.length;s++)if(e<i[s].distance)break;return i.splice(s,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){const e=this.levels;if(e.length>0){let i,s;for(i=1,s=e.length;i<s;i++)if(t<e[i].distance)break;return e[i-1].object}return null},raycast:function(t,e){const i=this.levels;if(i.length>0){gh.setFromMatrixPosition(this.matrixWorld);const i=t.ray.origin.distanceTo(gh);this.getObjectForDistance(i).raycast(t,e)}},update:function(t){const e=this.levels;if(e.length>1){gh.setFromMatrixPosition(t.matrixWorld),vh.setFromMatrixPosition(this.matrixWorld);const i=gh.distanceTo(vh)/t.zoom;let s,n;for(e[0].object.visible=!0,s=1,n=e.length;s<n;s++){if(!(i>=e[s].distance))break;e[s-1].object.visible=!1,e[s].object.visible=!0}for(this._currentLevel=s-1;s<n;s++)e[s].object.visible=!1}},toJSON:function(t){const e=bs.prototype.toJSON.call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const i=this.levels;for(let s=0,n=i.length;s<n;s++){const t=i[s];e.object.levels.push({object:t.object.uuid,distance:t.distance})}return e}}),yh.prototype=Object.assign(Object.create(Tn.prototype),{constructor:yh,isSkinnedMesh:!0,copy:function(t){return Tn.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const t=new mi,e=this.geometry.attributes.skinWeight;for(let i=0,s=e.count;i<s;i++){t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.w=e.getW(i);const s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Tn.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode&&this.bindMatrixInverse.getInverse(this.bindMatrix)},boneTransform:function(){const t=new yi,e=new mi,i=new mi,s=new yi,n=new Yi;return function(a,r){const o=this.skeleton,l=this.geometry;e.fromBufferAttribute(l.attributes.skinIndex,a),i.fromBufferAttribute(l.attributes.skinWeight,a),t.fromBufferAttribute(l.attributes.position,a).applyMatrix4(this.bindMatrix),r.set(0,0,0);for(let c=0;c<4;c++){const a=i.getComponent(c);if(0!==a){const i=e.getComponent(c);n.multiplyMatrices(o.bones[i].matrixWorld,o.boneInverses[i]),r.addScaledVector(s.copy(t).applyMatrix4(n),a)}}return r.applyMatrix4(this.bindMatrixInverse)}}()});const _h=new Yi,xh=new Yi;function wh(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Yi)}}function Ch(){bs.call(this),this.type="Bone"}Object.assign(wh.prototype,{calculateInverses:function(){this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++){const e=new Yi;this.bones[t]&&e.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(e)}},pose:function(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.getInverse(this.boneInverses[t])}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}},update:function(){const t=this.bones,e=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let n=0,a=t.length;n<a;n++){const s=t[n]?t[n].matrixWorld:xh;_h.multiplyMatrices(s,e[n]),_h.toArray(i,16*n)}void 0!==s&&(s.needsUpdate=!0)},clone:function(){return new wh(this.bones,this.boneInverses)},getBoneByName:function(t){for(let e=0,i=this.bones.length;e<i;e++){const i=this.bones[e];if(i.name===t)return i}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),Ch.prototype=Object.assign(Object.create(bs.prototype),{constructor:Ch,isBone:!0});const kh=new Yi,Sh=new Yi,Ah=[],Oh=new Tn;function jh(t,e,i){Tn.call(this,t,e),this.instanceMatrix=new Ys(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}function Mh(t){Hs.call(this),this.type="LineBasicMaterial",this.color=new Fs(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}jh.prototype=Object.assign(Object.create(Tn.prototype),{constructor:jh,isInstancedMesh:!0,copy:function(t){return Tn.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),this.count=t.count,this},setColorAt:function(t,e){null===this.instanceColor&&(this.instanceColor=new Ys(new Float32Array(3*this.count),3)),e.toArray(this.instanceColor.array,3*t)},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){const i=this.matrixWorld,s=this.count;if(Oh.geometry=this.geometry,Oh.material=this.material,void 0!==Oh.material)for(let n=0;n<s;n++){this.getMatrixAt(n,kh),Sh.multiplyMatrices(i,kh),Oh.matrixWorld=Sh,Oh.raycast(t,Ah);for(let t=0,i=Ah.length;t<i;t++){const i=Ah[t];i.instanceId=n,i.object=this,e.push(i)}Ah.length=0}},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),Mh.prototype=Object.create(Hs.prototype),Mh.prototype.constructor=Mh,Mh.prototype.isLineBasicMaterial=!0,Mh.prototype.copy=function(t){return Hs.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};const Ih=new yi,Th=new yi,Eh=new Yi,Dh=new Wi,Lh=new Ni;function Ph(t,e,i){bs.call(this),this.type="Line",this.geometry=void 0!==t?t:new pn,this.material=void 0!==e?e:new Mh,this.updateMorphTargets()}Ph.prototype=Object.assign(Object.create(bs.prototype),{constructor:Ph,isLine:!0,copy:function(t){return bs.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry){if(null===t.index){const e=t.attributes.position,i=[0];for(let t=1,s=e.count;t<s;t++)Ih.fromBufferAttribute(e,t-1),Th.fromBufferAttribute(e,t),i[t]=i[t-1],i[t]+=Ih.distanceTo(Th);t.setAttribute("lineDistance",new en(i,1))}}else if(t.isGeometry){const e=t.vertices,i=t.lineDistances;i[0]=0;for(let t=1,s=e.length;t<s;t++)i[t]=i[t-1],i[t]+=e[t-1].distanceTo(e[t])}return this},raycast:function(t,e){const i=this.geometry,s=this.matrixWorld,n=t.params.Line.threshold;if(null===i.boundingSphere&&i.computeBoundingSphere(),Lh.copy(i.boundingSphere),Lh.applyMatrix4(s),Lh.radius+=n,!1===t.ray.intersectsSphere(Lh))return;Eh.getInverse(s),Dh.copy(t.ray).applyMatrix4(Eh);const a=n/((this.scale.x+this.scale.y+this.scale.z)/3),r=a*a,o=new yi,l=new yi,c=new yi,h=new yi,d=this&&this.isLineSegments?2:1;if(i.isBufferGeometry){const s=i.index,n=i.attributes,a=n.position.array;if(null!==s){const i=s.array;for(let s=0,n=i.length-1;s<n;s+=d){const n=i[s],d=i[s+1];o.fromArray(a,3*n),l.fromArray(a,3*d);const u=Dh.distanceSqToSegment(o,l,h,c);if(u>r)continue;h.applyMatrix4(this.matrixWorld);const p=t.ray.origin.distanceTo(h);p<t.near||p>t.far||e.push({distance:p,point:c.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this})}}else for(let i=0,u=a.length/3-1;i<u;i+=d){o.fromArray(a,3*i),l.fromArray(a,3*i+3);const s=Dh.distanceSqToSegment(o,l,h,c);if(s>r)continue;h.applyMatrix4(this.matrixWorld);const n=t.ray.origin.distanceTo(h);n<t.near||n>t.far||e.push({distance:n,point:c.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else if(i.isGeometry){const s=i.vertices,n=s.length;for(let i=0;i<n-1;i+=d){const n=Dh.distanceSqToSegment(s[i],s[i+1],h,c);if(n>r)continue;h.applyMatrix4(this.matrixWorld);const a=t.ray.origin.distanceTo(h);a<t.near||a>t.far||e.push({distance:a,point:c.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const t=e[i[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,i=t.length;e<i;e++){const i=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length}}});const Rh=new yi,zh=new yi;function Nh(t,e){Ph.call(this,t,e),this.type="LineSegments"}function Bh(t,e){Ph.call(this,t,e),this.type="LineLoop"}function Fh(t){Hs.call(this),this.type="PointsMaterial",this.color=new Fs(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}Nh.prototype=Object.assign(Object.create(Ph.prototype),{constructor:Nh,isLineSegments:!0,computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry){if(null===t.index){const e=t.attributes.position,i=[];for(let t=0,s=e.count;t<s;t+=2)Rh.fromBufferAttribute(e,t),zh.fromBufferAttribute(e,t+1),i[t]=0===t?0:i[t-1],i[t+1]=i[t]+Rh.distanceTo(zh);t.setAttribute("lineDistance",new en(i,1))}}else if(t.isGeometry){const e=t.vertices,i=t.lineDistances;for(let t=0,s=e.length;t<s;t+=2)Rh.copy(e[t]),zh.copy(e[t+1]),i[t]=0===t?0:i[t-1],i[t+1]=i[t]+Rh.distanceTo(zh)}return this}}),Bh.prototype=Object.assign(Object.create(Ph.prototype),{constructor:Bh,isLineLoop:!0}),Fh.prototype=Object.create(Hs.prototype),Fh.prototype.constructor=Fh,Fh.prototype.isPointsMaterial=!0,Fh.prototype.copy=function(t){return Hs.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};const $h=new Yi,Uh=new Wi,Hh=new Ni,Vh=new yi;function Gh(t,e){bs.call(this),this.type="Points",this.geometry=void 0!==t?t:new pn,this.material=void 0!==e?e:new Fh,this.updateMorphTargets()}function Wh(t,e,i,s,n,a,r){const o=Uh.distanceSqToPoint(t);if(o<i){const i=new yi;Uh.closestPointToPoint(t,i),i.applyMatrix4(s);const l=n.ray.origin.distanceTo(i);if(l<n.near||l>n.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:i,index:e,face:null,object:r})}}function Yh(t,e,i,s,n,a,r,o,l){fi.call(this,t,e,i,s,n,a,r,o,l),this.format=void 0!==r?r:It,this.minFilter=void 0!==a?a:ft,this.magFilter=void 0!==n?n:ft,this.generateMipmaps=!1;const c=this;function h(){c.needsUpdate=!0,t.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(h)}function qh(t,e,i,s,n,a,r,o,l,c,h,d){fi.call(this,null,a,r,o,l,c,s,n,h,d),this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Xh(t,e,i,s,n,a,r,o,l){fi.call(this,t,e,i,s,n,a,r,o,l),this.needsUpdate=!0}function Qh(t,e,i,s,n,a,r,o,l,c){if(c=void 0!==c?c:Lt,c!==Lt&&c!==Pt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&c===Lt&&(i=_t),void 0===i&&c===Pt&&(i=jt),fi.call(this,null,s,n,a,r,o,c,i,l),this.image={width:t,height:e},this.magFilter=void 0!==r?r:dt,this.minFilter=void 0!==o?o:dt,this.flipY=!1,this.generateMipmaps=!1}Gh.prototype=Object.assign(Object.create(bs.prototype),{constructor:Gh,isPoints:!0,copy:function(t){return bs.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){const i=this.geometry,s=this.matrixWorld,n=t.params.Points.threshold;if(null===i.boundingSphere&&i.computeBoundingSphere(),Hh.copy(i.boundingSphere),Hh.applyMatrix4(s),Hh.radius+=n,!1===t.ray.intersectsSphere(Hh))return;$h.getInverse(s),Uh.copy(t.ray).applyMatrix4($h);const a=n/((this.scale.x+this.scale.y+this.scale.z)/3),r=a*a;if(i.isBufferGeometry){const n=i.index,a=i.attributes,o=a.position.array;if(null!==n){const i=n.array;for(let n=0,a=i.length;n<a;n++){const a=i[n];Vh.fromArray(o,3*a),Wh(Vh,a,r,s,t,e,this)}}else for(let i=0,l=o.length/3;i<l;i++)Vh.fromArray(o,3*i),Wh(Vh,i,r,s,t,e,this)}else{const n=i.vertices;for(let i=0,a=n.length;i<a;i++)Wh(n[i],i,r,s,t,e,this)}},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const t=e[i[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,i=t.length;e<i;e++){const i=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length}}}),Yh.prototype=Object.assign(Object.create(fi.prototype),{constructor:Yh,isVideoTexture:!0,update:function(){const t=this.image,e="requestVideoFrameCallback"in t;!1===e&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),qh.prototype=Object.create(fi.prototype),qh.prototype.constructor=qh,qh.prototype.isCompressedTexture=!0,Xh.prototype=Object.create(fi.prototype),Xh.prototype.constructor=Xh,Xh.prototype.isCanvasTexture=!0,Qh.prototype=Object.create(fi.prototype),Qh.prototype.constructor=Qh,Qh.prototype.isDepthTexture=!0;class Zh extends pn{constructor(t){super(),this.type="WireframeGeometry";const e=[],i=[0,0],s={},n=["a","b","c"];if(t&&t.isGeometry){const a=t.faces;for(let t=0,e=a.length;t<e;t++){const e=a[t];for(let t=0;t<3;t++){const a=e[n[t]],r=e[n[(t+1)%3]];i[0]=Math.min(a,r),i[1]=Math.max(a,r);const o=i[0]+","+i[1];void 0===s[o]&&(s[o]={index1:i[0],index2:i[1]})}}for(const i in s){const n=s[i];let a=t.vertices[n.index1];e.push(a.x,a.y,a.z),a=t.vertices[n.index2],e.push(a.x,a.y,a.z)}}else if(t&&t.isBufferGeometry){const n=new yi;if(null!==t.index){const a=t.attributes.position,r=t.index;let o=t.groups;0===o.length&&(o=[{start:0,count:r.count,materialIndex:0}]);for(let t=0,e=o.length;t<e;++t){const e=o[t],n=e.start,a=e.count;for(let t=n,o=n+a;t<o;t+=3)for(let e=0;e<3;e++){const n=r.getX(t+e),a=r.getX(t+(e+1)%3);i[0]=Math.min(n,a),i[1]=Math.max(n,a);const o=i[0]+","+i[1];void 0===s[o]&&(s[o]={index1:i[0],index2:i[1]})}}for(const t in s){const i=s[t];n.fromBufferAttribute(a,i.index1),e.push(n.x,n.y,n.z),n.fromBufferAttribute(a,i.index2),e.push(n.x,n.y,n.z)}}else{const i=t.attributes.position;for(let t=0,s=i.count/3;t<s;t++)for(let a=0;a<3;a++){const s=3*t+a;n.fromBufferAttribute(i,s),e.push(n.x,n.y,n.z);const r=3*t+(a+1)%3;n.fromBufferAttribute(i,r),e.push(n.x,n.y,n.z)}}}this.setAttribute("position",new en(e,3))}}function Kh(t,e,i){Nn.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:i},this.fromBufferGeometry(new Jh(t,e,i)),this.mergeVertices()}function Jh(t,e,i){pn.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:i};const s=[],n=[],a=[],r=[],o=1e-5,l=new yi,c=new yi,h=new yi,d=new yi,u=new yi;t.length;const p=e+1;for(let f=0;f<=i;f++){const s=f/i;for(let i=0;i<=e;i++){const p=i/e;t(p,s,c),n.push(c.x,c.y,c.z),p-o>=0?(t(p-o,s,h),d.subVectors(c,h)):(t(p+o,s,h),d.subVectors(h,c)),s-o>=0?(t(p,s-o,h),u.subVectors(c,h)):(t(p,s+o,h),u.subVectors(h,c)),l.crossVectors(d,u).normalize(),a.push(l.x,l.y,l.z),r.push(p,s)}}for(let f=0;f<i;f++)for(let t=0;t<e;t++){const e=f*p+t,i=f*p+t+1,n=(f+1)*p+t+1,a=(f+1)*p+t;s.push(e,i,a),s.push(i,n,a)}this.setIndex(s),this.setAttribute("position",new en(n,3)),this.setAttribute("normal",new en(a,3)),this.setAttribute("uv",new en(r,2))}Kh.prototype=Object.create(Nn.prototype),Kh.prototype.constructor=Kh,Jh.prototype=Object.create(pn.prototype),Jh.prototype.constructor=Jh;class td extends Nn{constructor(t,e,i,s){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:s},this.fromBufferGeometry(new ed(t,e,i,s)),this.mergeVertices()}}class ed extends pn{constructor(t,e,i,s){super(),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:s},i=i||1,s=s||0;const n=[],a=[];function r(t){const i=new yi,s=new yi,n=new yi;for(let a=0;a<e.length;a+=3)u(e[a+0],i),u(e[a+1],s),u(e[a+2],n),o(i,s,n,t)}function o(t,e,i,s){const n=Math.pow(2,s),a=[];for(let r=0;r<=n;r++){a[r]=[];const s=t.clone().lerp(i,r/n),o=e.clone().lerp(i,r/n),l=n-r;for(let t=0;t<=l;t++)a[r][t]=0===t&&r===n?s:s.clone().lerp(o,t/l)}for(let r=0;r<n;r++)for(let t=0;t<2*(n-r)-1;t++){const e=Math.floor(t/2);t%2===0?(d(a[r][e+1]),d(a[r+1][e]),d(a[r][e])):(d(a[r][e+1]),d(a[r+1][e+1]),d(a[r+1][e]))}}function l(t){const e=new yi;for(let i=0;i<n.length;i+=3)e.x=n[i+0],e.y=n[i+1],e.z=n[i+2],e.normalize().multiplyScalar(t),n[i+0]=e.x,n[i+1]=e.y,n[i+2]=e.z}function c(){const t=new yi;for(let e=0;e<n.length;e+=3){t.x=n[e+0],t.y=n[e+1],t.z=n[e+2];const i=m(t)/2/Math.PI+.5,s=g(t)/Math.PI+.5;a.push(i,1-s)}p(),h()}function h(){for(let t=0;t<a.length;t+=6){const e=a[t+0],i=a[t+2],s=a[t+4],n=Math.max(e,i,s),r=Math.min(e,i,s);n>.9&&r<.1&&(e<.2&&(a[t+0]+=1),i<.2&&(a[t+2]+=1),s<.2&&(a[t+4]+=1))}}function d(t){n.push(t.x,t.y,t.z)}function u(e,i){const s=3*e;i.x=t[s+0],i.y=t[s+1],i.z=t[s+2]}function p(){const t=new yi,e=new yi,i=new yi,s=new yi,r=new ci,o=new ci,l=new ci;for(let c=0,h=0;c<n.length;c+=9,h+=6){t.set(n[c+0],n[c+1],n[c+2]),e.set(n[c+3],n[c+4],n[c+5]),i.set(n[c+6],n[c+7],n[c+8]),r.set(a[h+0],a[h+1]),o.set(a[h+2],a[h+3]),l.set(a[h+4],a[h+5]),s.copy(t).add(e).add(i).divideScalar(3);const d=m(s);f(r,h+0,t,d),f(o,h+2,e,d),f(l,h+4,i,d)}}function f(t,e,i,s){s<0&&1===t.x&&(a[e]=t.x-1),0===i.x&&0===i.z&&(a[e]=s/2/Math.PI+.5)}function m(t){return Math.atan2(t.z,-t.x)}function g(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}r(s),l(i),c(),this.setAttribute("position",new en(n,3)),this.setAttribute("normal",new en(n.slice(),3)),this.setAttribute("uv",new en(a,2)),0===s?this.computeVertexNormals():this.normalizeNormals()}}class id extends Nn{constructor(t,e){super(),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new sd(t,e)),this.mergeVertices()}}class sd extends ed{constructor(t,e){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,s,t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class nd extends Nn{constructor(t,e){super(),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new ad(t,e)),this.mergeVertices()}}class ad extends ed{constructor(t,e){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,s,t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class rd extends Nn{constructor(t,e){super(),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new od(t,e)),this.mergeVertices()}}class od extends ed{constructor(t,e){const i=(1+Math.sqrt(5))/2,s=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,n,t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class ld extends Nn{constructor(t,e){super(),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new cd(t,e)),this.mergeVertices()}}class cd extends ed{constructor(t,e){const i=(1+Math.sqrt(5))/2,s=1/i,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-i,0,-s,i,0,s,-i,0,s,i,-s,-i,0,-s,i,0,s,-i,0,s,i,0,-i,0,-s,i,0,-s,-i,0,s,i,0,s],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(n,a,t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class hd extends Nn{constructor(t,e,i,s,n,a){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:s,closed:n};const r=new dd(t,e,i,s,n);this.tangents=r.tangents,this.normals=r.normals,this.binormals=r.binormals,this.fromBufferGeometry(r),this.mergeVertices()}}class dd extends pn{constructor(t,e,i,s,n){super(),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:s,closed:n},e=e||64,i=i||1,s=s||8,n=n||!1;const a=t.computeFrenetFrames(e,n);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const r=new yi,o=new yi,l=new ci;let c=new yi;const h=[],d=[],u=[],p=[];function f(){for(let t=0;t<e;t++)m(t);m(!1===n?e:0),v(),g()}function m(n){c=t.getPointAt(n/e,c);const l=a.normals[n],u=a.binormals[n];for(let t=0;t<=s;t++){const e=t/s*Math.PI*2,n=Math.sin(e),a=-Math.cos(e);o.x=a*l.x+n*u.x,o.y=a*l.y+n*u.y,o.z=a*l.z+n*u.z,o.normalize(),d.push(o.x,o.y,o.z),r.x=c.x+i*o.x,r.y=c.y+i*o.y,r.z=c.z+i*o.z,h.push(r.x,r.y,r.z)}}function g(){for(let t=1;t<=e;t++)for(let e=1;e<=s;e++){const i=(s+1)*(t-1)+(e-1),n=(s+1)*t+(e-1),a=(s+1)*t+e,r=(s+1)*(t-1)+e;p.push(i,n,r),p.push(n,a,r)}}function v(){for(let t=0;t<=e;t++)for(let i=0;i<=s;i++)l.x=t/e,l.y=i/s,u.push(l.x,l.y)}f(),this.setIndex(p),this.setAttribute("position",new en(h,3)),this.setAttribute("normal",new en(d,3)),this.setAttribute("uv",new en(u,2))}toJSON(){const t=pn.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t}}class ud extends Nn{constructor(t,e,i,s,n,a,r){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:s,p:n,q:a},this.fromBufferGeometry(new pd(t,e,i,s,n,a)),this.mergeVertices()}}class pd extends pn{constructor(t,e,i,s,n,a){super(),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:s,p:n,q:a},t=t||1,e=e||.4,i=Math.floor(i)||64,s=Math.floor(s)||8,n=n||2,a=a||3;const r=[],o=[],l=[],c=[],h=new yi,d=new yi,u=new yi,p=new yi,f=new yi,m=new yi,g=new yi;for(let b=0;b<=i;++b){const r=b/i*n*Math.PI*2;v(r,n,a,t,u),v(r+.01,n,a,t,p),m.subVectors(p,u),g.addVectors(p,u),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let t=0;t<=s;++t){const n=t/s*Math.PI*2,a=-e*Math.cos(n),r=e*Math.sin(n);h.x=u.x+(a*g.x+r*f.x),h.y=u.y+(a*g.y+r*f.y),h.z=u.z+(a*g.z+r*f.z),o.push(h.x,h.y,h.z),d.subVectors(h,u).normalize(),l.push(d.x,d.y,d.z),c.push(b/i),c.push(t/s)}}for(let b=1;b<=i;b++)for(let t=1;t<=s;t++){const e=(s+1)*(b-1)+(t-1),i=(s+1)*b+(t-1),n=(s+1)*b+t,a=(s+1)*(b-1)+t;r.push(e,i,a),r.push(i,n,a)}function v(t,e,i,s,n){const a=Math.cos(t),r=Math.sin(t),o=i/e*t,l=Math.cos(o);n.x=s*(2+l)*.5*a,n.y=s*(2+l)*r*.5,n.z=s*Math.sin(o)*.5}this.setIndex(r),this.setAttribute("position",new en(o,3)),this.setAttribute("normal",new en(l,3)),this.setAttribute("uv",new en(c,2))}}class fd extends Nn{constructor(t,e,i,s,n){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:s,arc:n},this.fromBufferGeometry(new md(t,e,i,s,n)),this.mergeVertices()}}class md extends pn{constructor(t,e,i,s,n){super(),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:s,arc:n},t=t||1,e=e||.4,i=Math.floor(i)||8,s=Math.floor(s)||6,n=n||2*Math.PI;const a=[],r=[],o=[],l=[],c=new yi,h=new yi,d=new yi;for(let u=0;u<=i;u++)for(let a=0;a<=s;a++){const p=a/s*n,f=u/i*Math.PI*2;h.x=(t+e*Math.cos(f))*Math.cos(p),h.y=(t+e*Math.cos(f))*Math.sin(p),h.z=e*Math.sin(f),r.push(h.x,h.y,h.z),c.x=t*Math.cos(p),c.y=t*Math.sin(p),d.subVectors(h,c).normalize(),o.push(d.x,d.y,d.z),l.push(a/s),l.push(u/i)}for(let u=1;u<=i;u++)for(let t=1;t<=s;t++){const e=(s+1)*u+t-1,i=(s+1)*(u-1)+t-1,n=(s+1)*(u-1)+t,r=(s+1)*u+t;a.push(e,i,r),a.push(i,n,r)}this.setIndex(a),this.setAttribute("position",new en(r,3)),this.setAttribute("normal",new en(o,3)),this.setAttribute("uv",new en(l,2))}}const gd={triangulate:function(t,e,i){i=i||2;const s=e&&e.length,n=s?e[0]*i:t.length;let a=vd(t,0,n,i,!0);const r=[];if(!a||a.next===a.prev)return r;let o,l,c,h,d,u,p;if(s&&(a=kd(t,e,a,i)),t.length>80*i){o=c=t[0],l=h=t[1];for(let e=i;e<n;e+=i)d=t[e],u=t[e+1],d<o&&(o=d),u<l&&(l=u),d>c&&(c=d),u>h&&(h=u);p=Math.max(c-o,h-l),p=0!==p?1/p:0}return yd(a,r,i,o,l,p),r}};function vd(t,e,i,s,n){let a,r;if(n===Yd(t,e,i,s)>0)for(a=e;a<i;a+=s)r=Vd(a,t[a],t[a+1],r);else for(a=i-s;a>=e;a-=s)r=Vd(a,t[a],t[a+1],r);return r&&Rd(r,r.next)&&(Gd(r),r=r.next),r}function bd(t,e){if(!t)return t;e||(e=t);let i,s=t;do{if(i=!1,s.steiner||!Rd(s,s.next)&&0!==Pd(s.prev,s,s.next))s=s.next;else{if(Gd(s),s=e=s.prev,s===s.next)break;i=!0}}while(i||s!==e);return e}function yd(t,e,i,s,n,a,r){if(!t)return;!r&&a&&Md(t,s,n,a);let o,l,c=t;while(t.prev!==t.next)if(o=t.prev,l=t.next,a?xd(t,s,n,a):_d(t))e.push(o.i/i),e.push(t.i/i),e.push(l.i/i),Gd(t),t=l.next,c=l.next;else if(t=l,t===c){r?1===r?(t=wd(bd(t),e,i),yd(t,e,i,s,n,a,2)):2===r&&Cd(t,e,i,s,n,a):yd(bd(t),e,i,s,n,a,1);break}}function _d(t){const e=t.prev,i=t,s=t.next;if(Pd(e,i,s)>=0)return!1;let n=t.next.next;while(n!==t.prev){if(Dd(e.x,e.y,i.x,i.y,s.x,s.y,n.x,n.y)&&Pd(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function xd(t,e,i,s){const n=t.prev,a=t,r=t.next;if(Pd(n,a,r)>=0)return!1;const o=n.x<a.x?n.x<r.x?n.x:r.x:a.x<r.x?a.x:r.x,l=n.y<a.y?n.y<r.y?n.y:r.y:a.y<r.y?a.y:r.y,c=n.x>a.x?n.x>r.x?n.x:r.x:a.x>r.x?a.x:r.x,h=n.y>a.y?n.y>r.y?n.y:r.y:a.y>r.y?a.y:r.y,d=Td(o,l,e,i,s),u=Td(c,h,e,i,s);let p=t.prevZ,f=t.nextZ;while(p&&p.z>=d&&f&&f.z<=u){if(p!==t.prev&&p!==t.next&&Dd(n.x,n.y,a.x,a.y,r.x,r.y,p.x,p.y)&&Pd(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==t.prev&&f!==t.next&&Dd(n.x,n.y,a.x,a.y,r.x,r.y,f.x,f.y)&&Pd(f.prev,f,f.next)>=0)return!1;f=f.nextZ}while(p&&p.z>=d){if(p!==t.prev&&p!==t.next&&Dd(n.x,n.y,a.x,a.y,r.x,r.y,p.x,p.y)&&Pd(p.prev,p,p.next)>=0)return!1;p=p.prevZ}while(f&&f.z<=u){if(f!==t.prev&&f!==t.next&&Dd(n.x,n.y,a.x,a.y,r.x,r.y,f.x,f.y)&&Pd(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function wd(t,e,i){let s=t;do{const n=s.prev,a=s.next.next;!Rd(n,a)&&zd(n,s,s.next,a)&&$d(n,a)&&$d(a,n)&&(e.push(n.i/i),e.push(s.i/i),e.push(a.i/i),Gd(s),Gd(s.next),s=t=a),s=s.next}while(s!==t);return bd(s)}function Cd(t,e,i,s,n,a){let r=t;do{let t=r.next.next;while(t!==r.prev){if(r.i!==t.i&&Ld(r,t)){let o=Hd(r,t);return r=bd(r,r.next),o=bd(o,o.next),yd(r,e,i,s,n,a),void yd(o,e,i,s,n,a)}t=t.next}r=r.next}while(r!==t)}function kd(t,e,i,s){const n=[];let a,r,o,l,c;for(a=0,r=e.length;a<r;a++)o=e[a]*s,l=a<r-1?e[a+1]*s:t.length,c=vd(t,o,l,s,!1),c===c.next&&(c.steiner=!0),n.push(Ed(c));for(n.sort(Sd),a=0;a<n.length;a++)Ad(n[a],i),i=bd(i,i.next);return i}function Sd(t,e){return t.x-e.x}function Ad(t,e){if(e=Od(t,e),e){const i=Hd(e,t);bd(e,e.next),bd(i,i.next)}}function Od(t,e){let i=e;const s=t.x,n=t.y;let a,r=-1/0;do{if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){const t=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=s&&t>r){if(r=t,t===s){if(n===i.y)return i;if(n===i.next.y)return i.next}a=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!a)return null;if(s===r)return a;const o=a,l=a.x,c=a.y;let h,d=1/0;i=a;do{s>=i.x&&i.x>=l&&s!==i.x&&Dd(n<c?s:r,n,l,c,n<c?r:s,n,i.x,i.y)&&(h=Math.abs(n-i.y)/(s-i.x),$d(i,t)&&(h<d||h===d&&(i.x>a.x||i.x===a.x&&jd(a,i)))&&(a=i,d=h)),i=i.next}while(i!==o);return a}function jd(t,e){return Pd(t.prev,t,e.prev)<0&&Pd(e.next,t,t.next)<0}function Md(t,e,i,s){let n=t;do{null===n.z&&(n.z=Td(n.x,n.y,e,i,s)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,Id(n)}function Id(t){let e,i,s,n,a,r,o,l,c=1;do{i=t,t=null,a=null,r=0;while(i){for(r++,s=i,o=0,e=0;e<c;e++)if(o++,s=s.nextZ,!s)break;l=c;while(o>0||l>0&&s)0!==o&&(0===l||!s||i.z<=s.z)?(n=i,i=i.nextZ,o--):(n=s,s=s.nextZ,l--),a?a.nextZ=n:t=n,n.prevZ=a,a=n;i=s}a.nextZ=null,c*=2}while(r>1);return t}function Td(t,e,i,s,n){return t=32767*(t-i)*n,e=32767*(e-s)*n,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function Ed(t){let e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function Dd(t,e,i,s,n,a,r,o){return(n-r)*(e-o)-(t-r)*(a-o)>=0&&(t-r)*(s-o)-(i-r)*(e-o)>=0&&(i-r)*(a-o)-(n-r)*(s-o)>=0}function Ld(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Fd(t,e)&&($d(t,e)&&$d(e,t)&&Ud(t,e)&&(Pd(t.prev,t,e.prev)||Pd(t,e.prev,e))||Rd(t,e)&&Pd(t.prev,t,t.next)>0&&Pd(e.prev,e,e.next)>0)}function Pd(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function Rd(t,e){return t.x===e.x&&t.y===e.y}function zd(t,e,i,s){const n=Bd(Pd(t,e,i)),a=Bd(Pd(t,e,s)),r=Bd(Pd(i,s,t)),o=Bd(Pd(i,s,e));return n!==a&&r!==o||(!(0!==n||!Nd(t,i,e))||(!(0!==a||!Nd(t,s,e))||(!(0!==r||!Nd(i,t,s))||!(0!==o||!Nd(i,e,s)))))}function Nd(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function Bd(t){return t>0?1:t<0?-1:0}function Fd(t,e){let i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&zd(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function $d(t,e){return Pd(t.prev,t,t.next)<0?Pd(t,e,t.next)>=0&&Pd(t,t.prev,e)>=0:Pd(t,e,t.prev)<0||Pd(t,t.next,e)<0}function Ud(t,e){let i=t,s=!1;const n=(t.x+e.x)/2,a=(t.y+e.y)/2;do{i.y>a!==i.next.y>a&&i.next.y!==i.y&&n<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(s=!s),i=i.next}while(i!==t);return s}function Hd(t,e){const i=new Wd(t.i,t.x,t.y),s=new Wd(e.i,e.x,e.y),n=t.next,a=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,s.next=i,i.prev=s,a.next=s,s.prev=a,s}function Vd(t,e,i,s){const n=new Wd(t,e,i);return s?(n.next=s.next,n.prev=s,s.next.prev=n,s.next=n):(n.prev=n,n.next=n),n}function Gd(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Wd(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Yd(t,e,i,s){let n=0;for(let a=e,r=i-s;a<i;a+=s)n+=(t[r]-t[a])*(t[a+1]+t[r+1]),r=a;return n}const qd={area:function(t){const e=t.length;let i=0;for(let s=e-1,n=0;n<e;s=n++)i+=t[s].x*t[n].y-t[n].x*t[s].y;return.5*i},isClockWise:function(t){return qd.area(t)<0},triangulateShape:function(t,e){const i=[],s=[],n=[];Xd(t),Qd(i,t);let a=t.length;e.forEach(Xd);for(let o=0;o<e.length;o++)s.push(a),a+=e[o].length,Qd(i,e[o]);const r=gd.triangulate(i,s);for(let o=0;o<r.length;o+=3)n.push(r.slice(o,o+3));return n}};function Xd(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Qd(t,e){for(let i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}class Zd extends Nn{constructor(t,e){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Kd(t,e)),this.mergeVertices()}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,i=this.parameters.options;return tu(e,i,t)}}class Kd extends pn{constructor(t,e){super(),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const i=this,s=[],n=[];for(let r=0,o=t.length;r<o;r++){const e=t[r];a(e)}function a(t){const a=[],r=void 0!==e.curveSegments?e.curveSegments:12,o=void 0!==e.steps?e.steps:1;let l=void 0!==e.depth?e.depth:100,c=void 0===e.bevelEnabled||e.bevelEnabled,h=void 0!==e.bevelThickness?e.bevelThickness:6,d=void 0!==e.bevelSize?e.bevelSize:h-2,u=void 0!==e.bevelOffset?e.bevelOffset:0,p=void 0!==e.bevelSegments?e.bevelSegments:3;const f=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:Jd;void 0!==e.amount&&(l=e.amount);let g,v,b,y,_,x=!1;f&&(g=f.getSpacedPoints(o),x=!0,c=!1,v=f.computeFrenetFrames(o,!1),b=new yi,y=new yi,_=new yi),c||(p=0,h=0,d=0,u=0);const w=t.extractPoints(r);let C=w.shape;const k=w.holes,S=!qd.isClockWise(C);if(S){C=C.reverse();for(let t=0,e=k.length;t<e;t++){const e=k[t];qd.isClockWise(e)&&(k[t]=e.reverse())}}const A=qd.triangulateShape(C,k),O=C;for(let e=0,i=k.length;e<i;e++){const t=k[e];C=C.concat(t)}function j(t,e,i){return e.clone().multiplyScalar(i).add(t)}const M=C.length,I=A.length;function T(t,e,i){let s,n,a;const r=t.x-e.x,o=t.y-e.y,l=i.x-t.x,c=i.y-t.y,h=r*r+o*o,d=r*c-o*l;if(Math.abs(d)>Number.EPSILON){const d=Math.sqrt(h),u=Math.sqrt(l*l+c*c),p=e.x-o/d,f=e.y+r/d,m=i.x-c/u,g=i.y+l/u,v=((m-p)*c-(g-f)*l)/(r*c-o*l);s=p+r*v-t.x,n=f+o*v-t.y;const b=s*s+n*n;if(b<=2)return new ci(s,n);a=Math.sqrt(b/2)}else{let t=!1;r>Number.EPSILON?l>Number.EPSILON&&(t=!0):r<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(o)===Math.sign(c)&&(t=!0),t?(s=-o,n=r,a=Math.sqrt(h)):(s=r,n=o,a=Math.sqrt(h/2))}return new ci(s/a,n/a)}const E=[];for(let e=0,i=O.length,s=i-1,n=e+1;e<i;e++,s++,n++)s===i&&(s=0),n===i&&(n=0),E[e]=T(O[e],O[s],O[n]);const D=[];let L,P=E.concat();for(let e=0,i=k.length;e<i;e++){const t=k[e];L=[];for(let e=0,i=t.length,s=i-1,n=e+1;e<i;e++,s++,n++)s===i&&(s=0),n===i&&(n=0),L[e]=T(t[e],t[s],t[n]);D.push(L),P=P.concat(L)}for(let e=0;e<p;e++){const t=e/p,i=h*Math.cos(t*Math.PI/2),s=d*Math.sin(t*Math.PI/2)+u;for(let e=0,n=O.length;e<n;e++){const t=j(O[e],E[e],s);F(t.x,t.y,-i)}for(let e=0,n=k.length;e<n;e++){const t=k[e];L=D[e];for(let e=0,n=t.length;e<n;e++){const n=j(t[e],L[e],s);F(n.x,n.y,-i)}}}const R=d+u;for(let e=0;e<M;e++){const t=c?j(C[e],P[e],R):C[e];x?(y.copy(v.normals[0]).multiplyScalar(t.x),b.copy(v.binormals[0]).multiplyScalar(t.y),_.copy(g[0]).add(y).add(b),F(_.x,_.y,_.z)):F(t.x,t.y,0)}for(let e=1;e<=o;e++)for(let t=0;t<M;t++){const i=c?j(C[t],P[t],R):C[t];x?(y.copy(v.normals[e]).multiplyScalar(i.x),b.copy(v.binormals[e]).multiplyScalar(i.y),_.copy(g[e]).add(y).add(b),F(_.x,_.y,_.z)):F(i.x,i.y,l/o*e)}for(let e=p-1;e>=0;e--){const t=e/p,i=h*Math.cos(t*Math.PI/2),s=d*Math.sin(t*Math.PI/2)+u;for(let e=0,n=O.length;e<n;e++){const t=j(O[e],E[e],s);F(t.x,t.y,l+i)}for(let e=0,n=k.length;e<n;e++){const t=k[e];L=D[e];for(let e=0,n=t.length;e<n;e++){const n=j(t[e],L[e],s);x?F(n.x,n.y+g[o-1].y,g[o-1].x+i):F(n.x,n.y,l+i)}}}function z(){const t=s.length/3;if(c){let t=0,e=M*t;for(let i=0;i<I;i++){const t=A[i];$(t[2]+e,t[1]+e,t[0]+e)}t=o+2*p,e=M*t;for(let i=0;i<I;i++){const t=A[i];$(t[0]+e,t[1]+e,t[2]+e)}}else{for(let t=0;t<I;t++){const e=A[t];$(e[2],e[1],e[0])}for(let t=0;t<I;t++){const e=A[t];$(e[0]+M*o,e[1]+M*o,e[2]+M*o)}}i.addGroup(t,s.length/3-t,0)}function N(){const t=s.length/3;let e=0;B(O,e),e+=O.length;for(let i=0,s=k.length;i<s;i++){const t=k[i];B(t,e),e+=t.length}i.addGroup(t,s.length/3-t,1)}function B(t,e){let i=t.length;while(--i>=0){const s=i;let n=i-1;n<0&&(n=t.length-1);for(let t=0,i=o+2*p;t<i;t++){const i=M*t,a=M*(t+1),r=e+s+i,o=e+n+i,l=e+n+a,c=e+s+a;U(r,o,l,c)}}}function F(t,e,i){a.push(t),a.push(e),a.push(i)}function $(t,e,n){H(t),H(e),H(n);const a=s.length/3,r=m.generateTopUV(i,s,a-3,a-2,a-1);V(r[0]),V(r[1]),V(r[2])}function U(t,e,n,a){H(t),H(e),H(a),H(e),H(n),H(a);const r=s.length/3,o=m.generateSideWallUV(i,s,r-6,r-3,r-2,r-1);V(o[0]),V(o[1]),V(o[3]),V(o[1]),V(o[2]),V(o[3])}function H(t){s.push(a[3*t+0]),s.push(a[3*t+1]),s.push(a[3*t+2])}function V(t){n.push(t.x),n.push(t.y)}z(),N()}this.setAttribute("position",new en(s,3)),this.setAttribute("uv",new en(n,2)),this.computeVertexNormals()}toJSON(){const t=pn.prototype.toJSON.call(this),e=this.parameters.shapes,i=this.parameters.options;return tu(e,i,t)}}const Jd={generateTopUV:function(t,e,i,s,n){const a=e[3*i],r=e[3*i+1],o=e[3*s],l=e[3*s+1],c=e[3*n],h=e[3*n+1];return[new ci(a,r),new ci(o,l),new ci(c,h)]},generateSideWallUV:function(t,e,i,s,n,a){const r=e[3*i],o=e[3*i+1],l=e[3*i+2],c=e[3*s],h=e[3*s+1],d=e[3*s+2],u=e[3*n],p=e[3*n+1],f=e[3*n+2],m=e[3*a],g=e[3*a+1],v=e[3*a+2];return Math.abs(o-h)<.01?[new ci(r,1-l),new ci(c,1-d),new ci(u,1-f),new ci(m,1-v)]:[new ci(o,1-l),new ci(h,1-d),new ci(p,1-f),new ci(g,1-v)]}};function tu(t,e,i){if(i.shapes=[],Array.isArray(t))for(let s=0,n=t.length;s<n;s++){const e=t[s];i.shapes.push(e.uuid)}else i.shapes.push(t.uuid);return void 0!==e.extrudePath&&(i.options.extrudePath=e.extrudePath.toJSON()),i}class eu extends Nn{constructor(t,e){super(),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new iu(t,e)),this.mergeVertices()}}class iu extends Kd{constructor(t,e){e=e||{};const i=e.font;if(!i||!i.isFont)return new Nn;const s=i.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),super(s,e),this.type="TextBufferGeometry"}}class su extends Nn{constructor(t,e,i,s,n,a,r){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:s,phiLength:n,thetaStart:a,thetaLength:r},this.fromBufferGeometry(new nu(t,e,i,s,n,a,r)),this.mergeVertices()}}class nu extends pn{constructor(t,e,i,s,n,a,r){super(),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:s,phiLength:n,thetaStart:a,thetaLength:r},t=t||1,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),s=void 0!==s?s:0,n=void 0!==n?n:2*Math.PI,a=void 0!==a?a:0,r=void 0!==r?r:Math.PI;const o=Math.min(a+r,Math.PI);let l=0;const c=[],h=new yi,d=new yi,u=[],p=[],f=[],m=[];for(let g=0;g<=i;g++){const u=[],v=g/i;let b=0;0==g&&0==a?b=.5/e:g==i&&o==Math.PI&&(b=-.5/e);for(let i=0;i<=e;i++){const o=i/e;h.x=-t*Math.cos(s+o*n)*Math.sin(a+v*r),h.y=t*Math.cos(a+v*r),h.z=t*Math.sin(s+o*n)*Math.sin(a+v*r),p.push(h.x,h.y,h.z),d.copy(h).normalize(),f.push(d.x,d.y,d.z),m.push(o+b,1-v),u.push(l++)}c.push(u)}for(let g=0;g<i;g++)for(let t=0;t<e;t++){const e=c[g][t+1],s=c[g][t],n=c[g+1][t],r=c[g+1][t+1];(0!==g||a>0)&&u.push(e,s,r),(g!==i-1||o<Math.PI)&&u.push(s,n,r)}this.setIndex(u),this.setAttribute("position",new en(p,3)),this.setAttribute("normal",new en(f,3)),this.setAttribute("uv",new en(m,2))}}class au extends Nn{constructor(t,e,i,s,n,a){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:s,thetaStart:n,thetaLength:a},this.fromBufferGeometry(new ru(t,e,i,s,n,a)),this.mergeVertices()}}class ru extends pn{constructor(t,e,i,s,n,a){super(),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:s,thetaStart:n,thetaLength:a},t=t||.5,e=e||1,n=void 0!==n?n:0,a=void 0!==a?a:2*Math.PI,i=void 0!==i?Math.max(3,i):8,s=void 0!==s?Math.max(1,s):1;const r=[],o=[],l=[],c=[];let h=t;const d=(e-t)/s,u=new yi,p=new ci;for(let f=0;f<=s;f++){for(let t=0;t<=i;t++){const s=n+t/i*a;u.x=h*Math.cos(s),u.y=h*Math.sin(s),o.push(u.x,u.y,u.z),l.push(0,0,1),p.x=(u.x/e+1)/2,p.y=(u.y/e+1)/2,c.push(p.x,p.y)}h+=d}for(let f=0;f<s;f++){const t=f*(i+1);for(let e=0;e<i;e++){const s=e+t,n=s,a=s+i+1,o=s+i+2,l=s+1;r.push(n,a,l),r.push(a,o,l)}}this.setIndex(r),this.setAttribute("position",new en(o,3)),this.setAttribute("normal",new en(l,3)),this.setAttribute("uv",new en(c,2))}}class ou extends Nn{constructor(t,e,i,s){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:s},this.fromBufferGeometry(new lu(t,e,i,s)),this.mergeVertices()}}class lu extends pn{constructor(t,e,i,s){super(),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:s},e=Math.floor(e)||12,i=i||0,s=s||2*Math.PI,s=li.clamp(s,0,2*Math.PI);const n=[],a=[],r=[],o=1/e,l=new yi,c=new ci;for(let h=0;h<=e;h++){const n=i+h*o*s,d=Math.sin(n),u=Math.cos(n);for(let i=0;i<=t.length-1;i++)l.x=t[i].x*d,l.y=t[i].y,l.z=t[i].x*u,a.push(l.x,l.y,l.z),c.x=h/e,c.y=i/(t.length-1),r.push(c.x,c.y)}for(let h=0;h<e;h++)for(let e=0;e<t.length-1;e++){const i=e+h*t.length,s=i,a=i+t.length,r=i+t.length+1,o=i+1;n.push(s,a,o),n.push(a,r,o)}if(this.setIndex(n),this.setAttribute("position",new en(a,3)),this.setAttribute("uv",new en(r,2)),this.computeVertexNormals(),s===2*Math.PI){const i=this.attributes.normal.array,s=new yi,n=new yi,a=new yi,r=e*t.length*3;for(let e=0,o=0;e<t.length;e++,o+=3)s.x=i[o+0],s.y=i[o+1],s.z=i[o+2],n.x=i[r+o+0],n.y=i[r+o+1],n.z=i[r+o+2],a.addVectors(s,n).normalize(),i[o+0]=i[r+o+0]=a.x,i[o+1]=i[r+o+1]=a.y,i[o+2]=i[r+o+2]=a.z}}}class cu extends Nn{constructor(t,e){super(),this.type="ShapeGeometry","object"===typeof e&&(e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new hu(t,e)),this.mergeVertices()}toJSON(){const t=Nn.prototype.toJSON.call(this),e=this.parameters.shapes;return du(e,t)}}class hu extends pn{constructor(t,e){super(),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;const i=[],s=[],n=[],a=[];let r=0,o=0;if(!1===Array.isArray(t))l(t);else for(let c=0;c<t.length;c++)l(t[c]),this.addGroup(r,o,c),r+=o,o=0;function l(t){const r=s.length/3,l=t.extractPoints(e);let c=l.shape;const h=l.holes;!1===qd.isClockWise(c)&&(c=c.reverse());for(let e=0,i=h.length;e<i;e++){const t=h[e];!0===qd.isClockWise(t)&&(h[e]=t.reverse())}const d=qd.triangulateShape(c,h);for(let e=0,i=h.length;e<i;e++){const t=h[e];c=c.concat(t)}for(let e=0,i=c.length;e<i;e++){const t=c[e];s.push(t.x,t.y,0),n.push(0,0,1),a.push(t.x,t.y)}for(let e=0,s=d.length;e<s;e++){const t=d[e],s=t[0]+r,n=t[1]+r,a=t[2]+r;i.push(s,n,a),o+=3}}this.setIndex(i),this.setAttribute("position",new en(s,3)),this.setAttribute("normal",new en(n,3)),this.setAttribute("uv",new en(a,2))}toJSON(){const t=pn.prototype.toJSON.call(this),e=this.parameters.shapes;return du(e,t)}}function du(t,e){if(e.shapes=[],Array.isArray(t))for(let i=0,s=t.length;i<s;i++){const s=t[i];e.shapes.push(s.uuid)}else e.shapes.push(t.uuid);return e}class uu extends pn{constructor(t,e){super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;const i=[],s=Math.cos(li.DEG2RAD*e),n=[0,0],a={};let r,o,l;const c=["a","b","c"];let h;t.isBufferGeometry?(h=new Nn,h.fromBufferGeometry(t)):h=t.clone(),h.mergeVertices(),h.computeFaceNormals();const d=h.vertices,u=h.faces;for(let p=0,f=u.length;p<f;p++){const t=u[p];for(let e=0;e<3;e++)r=t[c[e]],o=t[c[(e+1)%3]],n[0]=Math.min(r,o),n[1]=Math.max(r,o),l=n[0]+","+n[1],void 0===a[l]?a[l]={index1:n[0],index2:n[1],face1:p,face2:void 0}:a[l].face2=p}for(l in a){const t=a[l];if(void 0===t.face2||u[t.face1].normal.dot(u[t.face2].normal)<=s){let e=d[t.index1];i.push(e.x,e.y,e.z),e=d[t.index2],i.push(e.x,e.y,e.z)}}this.setAttribute("position",new en(i,3))}}class pu extends Nn{constructor(t,e,i,s,n,a,r,o){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:s,heightSegments:n,openEnded:a,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new fu(t,e,i,s,n,a,r,o)),this.mergeVertices()}}class fu extends pn{constructor(t,e,i,s,n,a,r,o){super(),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:s,heightSegments:n,openEnded:a,thetaStart:r,thetaLength:o};const l=this;t=void 0!==t?t:1,e=void 0!==e?e:1,i=i||1,s=Math.floor(s)||8,n=Math.floor(n)||1,a=void 0!==a&&a,r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI;const c=[],h=[],d=[],u=[];let p=0;const f=[],m=i/2;let g=0;function v(){const a=new yi,v=new yi;let b=0;const y=(e-t)/i;for(let l=0;l<=n;l++){const c=[],g=l/n,b=g*(e-t)+t;for(let t=0;t<=s;t++){const e=t/s,n=e*o+r,l=Math.sin(n),f=Math.cos(n);v.x=b*l,v.y=-g*i+m,v.z=b*f,h.push(v.x,v.y,v.z),a.set(l,y,f).normalize(),d.push(a.x,a.y,a.z),u.push(e,1-g),c.push(p++)}f.push(c)}for(let t=0;t<s;t++)for(let e=0;e<n;e++){const i=f[e][t],s=f[e+1][t],n=f[e+1][t+1],a=f[e][t+1];c.push(i,s,a),c.push(s,n,a),b+=6}l.addGroup(g,b,0),g+=b}function b(i){const n=p,a=new ci,f=new yi;let v=0;const b=!0===i?t:e,y=!0===i?1:-1;for(let t=1;t<=s;t++)h.push(0,m*y,0),d.push(0,y,0),u.push(.5,.5),p++;const _=p;for(let t=0;t<=s;t++){const e=t/s,i=e*o+r,n=Math.cos(i),l=Math.sin(i);f.x=b*l,f.y=m*y,f.z=b*n,h.push(f.x,f.y,f.z),d.push(0,y,0),a.x=.5*n+.5,a.y=.5*l*y+.5,u.push(a.x,a.y),p++}for(let t=0;t<s;t++){const e=n+t,s=_+t;!0===i?c.push(s,s+1,e):c.push(s+1,s,e),v+=3}l.addGroup(g,v,!0===i?1:2),g+=v}v(),!1===a&&(t>0&&b(!0),e>0&&b(!1)),this.setIndex(c),this.setAttribute("position",new en(h,3)),this.setAttribute("normal",new en(d,3)),this.setAttribute("uv",new en(u,2))}}class mu extends pu{constructor(t,e,i,s,n,a,r){super(0,t,e,i,s,n,a,r),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:s,openEnded:n,thetaStart:a,thetaLength:r}}}class gu extends fu{constructor(t,e,i,s,n,a,r){super(0,t,e,i,s,n,a,r),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:s,openEnded:n,thetaStart:a,thetaLength:r}}}class vu extends Nn{constructor(t,e,i,s){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:s},this.fromBufferGeometry(new bu(t,e,i,s)),this.mergeVertices()}}class bu extends pn{constructor(t,e,i,s){super(),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:s},t=t||1,e=void 0!==e?Math.max(3,e):8,i=void 0!==i?i:0,s=void 0!==s?s:2*Math.PI;const n=[],a=[],r=[],o=[],l=new yi,c=new ci;a.push(0,0,0),r.push(0,0,1),o.push(.5,.5);for(let h=0,d=3;h<=e;h++,d+=3){const n=i+h/e*s;l.x=t*Math.cos(n),l.y=t*Math.sin(n),a.push(l.x,l.y,l.z),r.push(0,0,1),c.x=(a[d]/t+1)/2,c.y=(a[d+1]/t+1)/2,o.push(c.x,c.y)}for(let h=1;h<=e;h++)n.push(h,h+1,0);this.setIndex(n),this.setAttribute("position",new en(a,3)),this.setAttribute("normal",new en(r,3)),this.setAttribute("uv",new en(o,2))}}var yu=Object.freeze({__proto__:null,WireframeGeometry:Zh,ParametricGeometry:Kh,ParametricBufferGeometry:Jh,TetrahedronGeometry:id,TetrahedronBufferGeometry:sd,OctahedronGeometry:nd,OctahedronBufferGeometry:ad,IcosahedronGeometry:rd,IcosahedronBufferGeometry:od,DodecahedronGeometry:ld,DodecahedronBufferGeometry:cd,PolyhedronGeometry:td,PolyhedronBufferGeometry:ed,TubeGeometry:hd,TubeBufferGeometry:dd,TorusKnotGeometry:ud,TorusKnotBufferGeometry:pd,TorusGeometry:fd,TorusBufferGeometry:md,TextGeometry:eu,TextBufferGeometry:iu,SphereGeometry:su,SphereBufferGeometry:nu,RingGeometry:au,RingBufferGeometry:ru,PlaneGeometry:aa,PlaneBufferGeometry:ra,LatheGeometry:ou,LatheBufferGeometry:lu,ShapeGeometry:cu,ShapeBufferGeometry:hu,ExtrudeGeometry:Zd,ExtrudeBufferGeometry:Kd,EdgesGeometry:uu,ConeGeometry:mu,ConeBufferGeometry:gu,CylinderGeometry:pu,CylinderBufferGeometry:fu,CircleGeometry:vu,CircleBufferGeometry:bu,BoxGeometry:Bn,BoxBufferGeometry:Fn});function _u(t){Hs.call(this),this.type="ShadowMaterial",this.color=new Fs(0),this.transparent=!0,this.setValues(t)}function xu(t){Wn.call(this,t),this.type="RawShaderMaterial"}function wu(t){Hs.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Fs(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fs(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ke,this.normalScale=new ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}function Cu(t){wu.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ci(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}function ku(t){Hs.call(this),this.type="MeshPhongMaterial",this.color=new Fs(16777215),this.specular=new Fs(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fs(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ke,this.normalScale=new ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=W,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Su(t){Hs.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Fs(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fs(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ke,this.normalScale=new ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Au(t){Hs.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ke,this.normalScale=new ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ou(t){Hs.call(this),this.type="MeshLambertMaterial",this.color=new Fs(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fs(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=W,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function ju(t){Hs.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Fs(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ke,this.normalScale=new ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Mu(t){Mh.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}_u.prototype=Object.create(Hs.prototype),_u.prototype.constructor=_u,_u.prototype.isShadowMaterial=!0,_u.prototype.copy=function(t){return Hs.prototype.copy.call(this,t),this.color.copy(t.color),this},xu.prototype=Object.create(Wn.prototype),xu.prototype.constructor=xu,xu.prototype.isRawShaderMaterial=!0,wu.prototype=Object.create(Hs.prototype),wu.prototype.constructor=wu,wu.prototype.isMeshStandardMaterial=!0,wu.prototype.copy=function(t){return Hs.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},Cu.prototype=Object.create(wu.prototype),Cu.prototype.constructor=Cu,Cu.prototype.isMeshPhysicalMaterial=!0,Cu.prototype.copy=function(t){return wu.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new Fs).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this},ku.prototype=Object.create(Hs.prototype),ku.prototype.constructor=ku,ku.prototype.isMeshPhongMaterial=!0,ku.prototype.copy=function(t){return Hs.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Su.prototype=Object.create(Hs.prototype),Su.prototype.constructor=Su,Su.prototype.isMeshToonMaterial=!0,Su.prototype.copy=function(t){return Hs.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Au.prototype=Object.create(Hs.prototype),Au.prototype.constructor=Au,Au.prototype.isMeshNormalMaterial=!0,Au.prototype.copy=function(t){return Hs.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ou.prototype=Object.create(Hs.prototype),Ou.prototype.constructor=Ou,Ou.prototype.isMeshLambertMaterial=!0,Ou.prototype.copy=function(t){return Hs.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},ju.prototype=Object.create(Hs.prototype),ju.prototype.constructor=ju,ju.prototype.isMeshMatcapMaterial=!0,ju.prototype.copy=function(t){return Hs.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Mu.prototype=Object.create(Mh.prototype),Mu.prototype.constructor=Mu,Mu.prototype.isLineDashedMaterial=!0,Mu.prototype.copy=function(t){return Mh.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Iu=Object.freeze({__proto__:null,ShadowMaterial:_u,SpriteMaterial:th,RawShaderMaterial:xu,ShaderMaterial:Wn,PointsMaterial:Fh,MeshPhysicalMaterial:Cu,MeshStandardMaterial:wu,MeshPhongMaterial:ku,MeshToonMaterial:Su,MeshNormalMaterial:Au,MeshLambertMaterial:Ou,MeshDepthMaterial:Dc,MeshDistanceMaterial:Lc,MeshBasicMaterial:Vs,MeshMatcapMaterial:ju,LineDashedMaterial:Mu,LineBasicMaterial:Mh,Material:Hs});const Tu={arraySlice:function(t,e,i){return Tu.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==i?i:t.length)):t.slice(e,i)},convertArray:function(t,e,i){return!t||!i&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,i){return t[e]-t[i]}const i=t.length,s=new Array(i);for(let n=0;n!==i;++n)s[n]=n;return s.sort(e),s},sortedArray:function(t,e,i){const s=t.length,n=new t.constructor(s);for(let a=0,r=0;r!==s;++a){const s=i[a]*e;for(let i=0;i!==e;++i)n[r++]=t[s+i]}return n},flattenJSON:function(t,e,i,s){let n=1,a=t[0];while(void 0!==a&&void 0===a[s])a=t[n++];if(void 0===a)return;let r=a[s];if(void 0!==r)if(Array.isArray(r))do{r=a[s],void 0!==r&&(e.push(a.time),i.push.apply(i,r)),a=t[n++]}while(void 0!==a);else if(void 0!==r.toArray)do{r=a[s],void 0!==r&&(e.push(a.time),r.toArray(i,i.length)),a=t[n++]}while(void 0!==a);else do{r=a[s],void 0!==r&&(e.push(a.time),i.push(r)),a=t[n++]}while(void 0!==a)},subclip:function(t,e,i,s,n){n=n||30;const a=t.clone();a.name=e;const r=[];for(let l=0;l<a.tracks.length;++l){const t=a.tracks[l],e=t.getValueSize(),o=[],c=[];for(let a=0;a<t.times.length;++a){const r=t.times[a]*n;if(!(r<i||r>=s)){o.push(t.times[a]);for(let i=0;i<e;++i)c.push(t.values[a*e+i])}}0!==o.length&&(t.times=Tu.convertArray(o,t.times.constructor),t.values=Tu.convertArray(c,t.values.constructor),r.push(t))}a.tracks=r;let o=1/0;for(let l=0;l<a.tracks.length;++l)o>a.tracks[l].times[0]&&(o=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*o);return a.resetDuration(),a},makeClipAdditive:function(t,e,i,s){void 0===e&&(e=0),void 0===i&&(i=t),(void 0===s||s<=0)&&(s=30);const n=t.tracks.length,a=e/s;for(let r=0;r<n;++r){const e=i.tracks[r],s=e.ValueTypeName;if("bool"===s||"string"===s)continue;const n=t.tracks.find((function(t){return t.name===e.name&&t.ValueTypeName===s}));if(void 0===n)continue;let o=0;const l=e.getValueSize();e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const h=n.getValueSize();n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);const d=e.times.length-1;let u;if(a<=e.times[0]){const t=o,i=l-o;u=Tu.arraySlice(e.values,t,i)}else if(a>=e.times[d]){const t=d*l+o,i=t+l-o;u=Tu.arraySlice(e.values,t,i)}else{const t=e.createInterpolant(),i=o,s=l-o;t.evaluate(a),u=Tu.arraySlice(t.resultBuffer,i,s)}if("quaternion"===s){const t=(new bi).fromArray(u).normalize().conjugate();t.toArray(u)}const p=n.times.length;for(let t=0;t<p;++t){const e=t*h+c;if("quaternion"===s)bi.multiplyQuaternionsFlat(n.values,e,u,0,n.values,e);else{const t=h-2*c;for(let i=0;i<t;++i)n.values[e+i]-=u[i]}}}return t.blendMode=Ne,t}};function Eu(t,e,i,s){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==s?s:new e.constructor(i),this.sampleValues=e,this.valueSize=i}function Du(t,e,i,s){Eu.call(this,t,e,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Lu(t,e,i,s){Eu.call(this,t,e,i,s)}function Pu(t,e,i,s){Eu.call(this,t,e,i,s)}function Ru(t,e,i,s){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Tu.convertArray(e,this.TimeBufferType),this.values=Tu.convertArray(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}function zu(t,e,i){Ru.call(this,t,e,i)}function Nu(t,e,i,s){Ru.call(this,t,e,i,s)}function Bu(t,e,i,s){Ru.call(this,t,e,i,s)}function Fu(t,e,i,s){Eu.call(this,t,e,i,s)}function $u(t,e,i,s){Ru.call(this,t,e,i,s)}function Uu(t,e,i,s){Ru.call(this,t,e,i,s)}function Hu(t,e,i,s){Ru.call(this,t,e,i,s)}function Vu(t,e,i,s){this.name=t,this.tracks=i,this.duration=void 0!==e?e:-1,this.blendMode=void 0!==s?s:ze,this.uuid=li.generateUUID(),this.duration<0&&this.resetDuration()}function Gu(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Bu;case"vector":case"vector2":case"vector3":case"vector4":return Hu;case"color":return Nu;case"quaternion":return $u;case"bool":case"boolean":return zu;case"string":return Uu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function Wu(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Gu(t.type);if(void 0===t.times){const e=[],i=[];Tu.flattenJSON(t.keys,e,i,"value"),t.times=e,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(Eu.prototype,{evaluate:function(t){const e=this.parameterPositions;let i=this._cachedIndex,s=e[i],n=e[i-1];t:{e:{let a;i:{s:if(!(t<s)){for(let a=i+2;;){if(void 0===s){if(t<n)break s;return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,t,n)}if(i===a)break;if(n=s,s=e[++i],t<s)break e}a=e.length;break i}if(t>=n)break t;{const r=e[1];t<r&&(i=2,n=r);for(let a=i-2;;){if(void 0===n)return this._cachedIndex=0,this.beforeStart_(0,t,s);if(i===a)break;if(s=n,n=e[--i-1],t>=n)break e}a=i,i=0}}while(i<a){const s=i+a>>>1;t<e[s]?a=s:i=s+1}if(s=e[i],n=e[i-1],void 0===n)return this._cachedIndex=0,this.beforeStart_(0,t,s);if(void 0===s)return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,n,t)}this._cachedIndex=i,this.intervalChanged_(i,n,s)}return this.interpolate_(i,n,t,s)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){const e=this.resultBuffer,i=this.sampleValues,s=this.valueSize,n=t*s;for(let a=0;a!==s;++a)e[a]=i[n+a];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Eu.prototype,{beforeStart_:Eu.prototype.copySampleValue_,afterEnd_:Eu.prototype.copySampleValue_}),Du.prototype=Object.assign(Object.create(Eu.prototype),{constructor:Du,DefaultSettings_:{endingStart:Le,endingEnd:Le},intervalChanged_:function(t,e,i){const s=this.parameterPositions;let n=t-2,a=t+1,r=s[n],o=s[a];if(void 0===r)switch(this.getSettings_().endingStart){case Pe:n=t,r=2*e-i;break;case Re:n=s.length-2,r=e+s[n]-s[n+1];break;default:n=t,r=i}if(void 0===o)switch(this.getSettings_().endingEnd){case Pe:a=t,o=2*i-e;break;case Re:a=1,o=i+s[1]-s[0];break;default:a=t-1,o=e}const l=.5*(i-e),c=this.valueSize;this._weightPrev=l/(e-r),this._weightNext=l/(o-i),this._offsetPrev=n*c,this._offsetNext=a*c},interpolate_:function(t,e,i,s){const n=this.resultBuffer,a=this.sampleValues,r=this.valueSize,o=t*r,l=o-r,c=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,u=this._weightNext,p=(i-e)/(s-e),f=p*p,m=f*p,g=-d*m+2*d*f-d*p,v=(1+d)*m+(-1.5-2*d)*f+(-.5+d)*p+1,b=(-1-u)*m+(1.5+u)*f+.5*p,y=u*m-u*f;for(let _=0;_!==r;++_)n[_]=g*a[c+_]+v*a[l+_]+b*a[o+_]+y*a[h+_];return n}}),Lu.prototype=Object.assign(Object.create(Eu.prototype),{constructor:Lu,interpolate_:function(t,e,i,s){const n=this.resultBuffer,a=this.sampleValues,r=this.valueSize,o=t*r,l=o-r,c=(i-e)/(s-e),h=1-c;for(let d=0;d!==r;++d)n[d]=a[l+d]*h+a[o+d]*c;return n}}),Pu.prototype=Object.assign(Object.create(Eu.prototype),{constructor:Pu,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Ru,{toJSON:function(t){const e=t.constructor;let i;if(void 0!==e.toJSON)i=e.toJSON(t);else{i={name:t.name,times:Tu.convertArray(t.times,Array),values:Tu.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(i.interpolation=e)}return i.type=t.ValueTypeName,i}}),Object.assign(Ru.prototype,{constructor:Ru,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Ee,InterpolantFactoryMethodDiscrete:function(t){return new Pu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Lu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Du(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){let e;switch(t){case Te:e=this.InterpolantFactoryMethodDiscrete;break;case Ee:e=this.InterpolantFactoryMethodLinear;break;case De:e=this.InterpolantFactoryMethodSmooth;break}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Te;case this.InterpolantFactoryMethodLinear:return Ee;case this.InterpolantFactoryMethodSmooth:return De}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t){const e=this.times;for(let i=0,s=e.length;i!==s;++i)e[i]+=t}return this},scale:function(t){if(1!==t){const e=this.times;for(let i=0,s=e.length;i!==s;++i)e[i]*=t}return this},trim:function(t,e){const i=this.times,s=i.length;let n=0,a=s-1;while(n!==s&&i[n]<t)++n;while(-1!==a&&i[a]>e)--a;if(++a,0!==n||a!==s){n>=a&&(a=Math.max(a,1),n=a-1);const t=this.getValueSize();this.times=Tu.arraySlice(i,n,a),this.values=Tu.arraySlice(this.values,n*t,a*t)}return this},validate:function(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(t=!1);const i=this.times,s=this.values,n=i.length;0===n&&(t=!1);let a=null;for(let r=0;r!==n;r++){const e=i[r];if("number"===typeof e&&isNaN(e)){t=!1;break}if(null!==a&&a>e){t=!1;break}a=e}if(void 0!==s&&Tu.isTypedArray(s))for(let r=0,o=s.length;r!==o;++r){const e=s[r];if(isNaN(e)){t=!1;break}}return t},optimize:function(){const t=Tu.arraySlice(this.times),e=Tu.arraySlice(this.values),i=this.getValueSize(),s=this.getInterpolation()===De,n=t.length-1;let a=1;for(let r=1;r<n;++r){let n=!1;const o=t[r],l=t[r+1];if(o!==l&&(1!==r||o!==o[0]))if(s)n=!0;else{const t=r*i,s=t-i,a=t+i;for(let r=0;r!==i;++r){const i=e[t+r];if(i!==e[s+r]||i!==e[a+r]){n=!0;break}}}if(n){if(r!==a){t[a]=t[r];const s=r*i,n=a*i;for(let t=0;t!==i;++t)e[n+t]=e[s+t]}++a}}if(n>0){t[a]=t[n];for(let t=n*i,s=a*i,r=0;r!==i;++r)e[s+r]=e[t+r];++a}return a!==t.length?(this.times=Tu.arraySlice(t,0,a),this.values=Tu.arraySlice(e,0,a*i)):(this.times=t,this.values=e),this},clone:function(){const t=Tu.arraySlice(this.times,0),e=Tu.arraySlice(this.values,0),i=this.constructor,s=new i(this.name,t,e);return s.createInterpolant=this.createInterpolant,s}}),zu.prototype=Object.assign(Object.create(Ru.prototype),{constructor:zu,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Te,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Nu.prototype=Object.assign(Object.create(Ru.prototype),{constructor:Nu,ValueTypeName:"color"}),Bu.prototype=Object.assign(Object.create(Ru.prototype),{constructor:Bu,ValueTypeName:"number"}),Fu.prototype=Object.assign(Object.create(Eu.prototype),{constructor:Fu,interpolate_:function(t,e,i,s){const n=this.resultBuffer,a=this.sampleValues,r=this.valueSize,o=(i-e)/(s-e);let l=t*r;for(let c=l+r;l!==c;l+=4)bi.slerpFlat(n,0,a,l-r,a,l,o);return n}}),$u.prototype=Object.assign(Object.create(Ru.prototype),{constructor:$u,ValueTypeName:"quaternion",DefaultInterpolation:Ee,InterpolantFactoryMethodLinear:function(t){return new Fu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Uu.prototype=Object.assign(Object.create(Ru.prototype),{constructor:Uu,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Te,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Hu.prototype=Object.assign(Object.create(Ru.prototype),{constructor:Hu,ValueTypeName:"vector"}),Object.assign(Vu,{parse:function(t){const e=[],i=t.tracks,s=1/(t.fps||1);for(let n=0,a=i.length;n!==a;++n)e.push(Wu(i[n]).scale(s));return new Vu(t.name,t.duration,e,t.blendMode)},toJSON:function(t){const e=[],i=t.tracks,s={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let n=0,a=i.length;n!==a;++n)e.push(Ru.toJSON(i[n]));return s},CreateFromMorphTargetSequence:function(t,e,i,s){const n=e.length,a=[];for(let r=0;r<n;r++){let t=[],o=[];t.push((r+n-1)%n,r,(r+1)%n),o.push(0,1,0);const l=Tu.getKeyframeOrder(t);t=Tu.sortedArray(t,1,l),o=Tu.sortedArray(o,1,l),s||0!==t[0]||(t.push(n),o.push(o[0])),a.push(new Bu(".morphTargetInfluences["+e[r].name+"]",t,o).scale(1/i))}return new Vu(t,-1,a)},findByName:function(t,e){let i=t;if(!Array.isArray(t)){const e=t;i=e.geometry&&e.geometry.animations||e.animations}for(let s=0;s<i.length;s++)if(i[s].name===e)return i[s];return null},CreateClipsFromMorphTargetSequences:function(t,e,i){const s={},n=/^([\w-]*?)([\d]+)$/;for(let r=0,o=t.length;r<o;r++){const e=t[r],i=e.name.match(n);if(i&&i.length>1){const t=i[1];let n=s[t];n||(s[t]=n=[]),n.push(e)}}const a=[];for(const r in s)a.push(Vu.CreateFromMorphTargetSequence(r,s[r],e,i));return a},parseAnimation:function(t,e){if(!t)return null;const i=function(t,e,i,s,n){if(0!==i.length){const a=[],r=[];Tu.flattenJSON(i,a,r,s),0!==a.length&&n.push(new t(e,a,r))}},s=[],n=t.name||"default",a=t.fps||30,r=t.blendMode;let o=t.length||-1;const l=t.hierarchy||[];for(let h=0;h<l.length;h++){const t=l[h].keys;if(t&&0!==t.length)if(t[0].morphTargets){const e={};let i;for(i=0;i<t.length;i++)if(t[i].morphTargets)for(let s=0;s<t[i].morphTargets.length;s++)e[t[i].morphTargets[s]]=-1;for(const n in e){const e=[],a=[];for(let s=0;s!==t[i].morphTargets.length;++s){const s=t[i];e.push(s.time),a.push(s.morphTarget===n?1:0)}s.push(new Bu(".morphTargetInfluence["+n+"]",e,a))}o=e.length*(a||1)}else{const n=".bones["+e[h].name+"]";i(Hu,n+".position",t,"pos",s),i($u,n+".quaternion",t,"rot",s),i(Hu,n+".scale",t,"scl",s)}}if(0===s.length)return null;const c=new Vu(n,o,s,r);return c}}),Object.assign(Vu.prototype,{resetDuration:function(){const t=this.tracks;let e=0;for(let i=0,s=t.length;i!==s;++i){const t=this.tracks[i];e=Math.max(e,t.times[t.times.length-1])}return this.duration=e,this},trim:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new Vu(this.name,this.duration,t,this.blendMode)}});const Yu={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function qu(t,e,i){const s=this;let n=!1,a=0,r=0,o=void 0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){r++,!1===n&&void 0!==s.onStart&&s.onStart(t,a,r),n=!0},this.itemEnd=function(t){a++,void 0!==s.onProgress&&s.onProgress(t,a,r),a===r&&(n=!1,void 0!==s.onLoad&&s.onLoad())},this.itemError=function(t){void 0!==s.onError&&s.onError(t)},this.resolveURL=function(t){return o?o(t):t},this.setURLModifier=function(t){return o=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,i=l.length;e<i;e+=2){const i=l[e],s=l[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return s}return null}}const Xu=new qu;function Qu(t){this.manager=void 0!==t?t:Xu,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Qu.prototype,{load:function(){},loadAsync:function(t,e){const i=this;return new Promise((function(s,n){i.load(t,s,e,n)}))},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});const Zu={};function Ku(t){Qu.call(this,t)}function Ju(t){Qu.call(this,t)}function tp(t){Qu.call(this,t)}function ep(t){Qu.call(this,t)}function ip(t){Qu.call(this,t)}function sp(t){Qu.call(this,t)}function np(t){Qu.call(this,t)}function ap(){this.type="Curve",this.arcLengthDivisions=200}function rp(t,e,i,s,n,a,r,o){ap.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=i||1,this.yRadius=s||1,this.aStartAngle=n||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=r||!1,this.aRotation=o||0}function op(t,e,i,s,n,a){rp.call(this,t,e,i,i,s,n,a),this.type="ArcCurve"}function lp(){let t=0,e=0,i=0,s=0;function n(n,a,r,o){t=n,e=r,i=-3*n+3*a-2*r-o,s=2*n-2*a+r+o}return{initCatmullRom:function(t,e,i,s,a){n(e,i,a*(i-t),a*(s-e))},initNonuniformCatmullRom:function(t,e,i,s,a,r,o){let l=(e-t)/a-(i-t)/(a+r)+(i-e)/r,c=(i-e)/r-(s-e)/(r+o)+(s-i)/o;l*=r,c*=r,n(e,i,l,c)},calc:function(n){const a=n*n,r=a*n;return t+e*n+i*a+s*r}}}Ku.prototype=Object.assign(Object.create(Qu.prototype),{constructor:Ku,load:function(t,e,i,s){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const n=this,a=Yu.get(t);if(void 0!==a)return n.manager.itemStart(t),setTimeout((function(){e&&e(a),n.manager.itemEnd(t)}),0),a;if(void 0!==Zu[t])return void Zu[t].push({onLoad:e,onProgress:i,onError:s});const r=/^data:(.*?)(;base64)?,(.*)$/,o=t.match(r);let l;if(o){const i=o[1],a=!!o[2];let r=o[3];r=decodeURIComponent(r),a&&(r=atob(r));try{let s;const a=(this.responseType||"").toLowerCase();switch(a){case"arraybuffer":case"blob":const t=new Uint8Array(r.length);for(let i=0;i<r.length;i++)t[i]=r.charCodeAt(i);s="blob"===a?new Blob([t.buffer],{type:i}):t.buffer;break;case"document":const e=new DOMParser;s=e.parseFromString(r,i);break;case"json":s=JSON.parse(r);break;default:s=r;break}setTimeout((function(){e&&e(s),n.manager.itemEnd(t)}),0)}catch(c){setTimeout((function(){s&&s(c),n.manager.itemError(t),n.manager.itemEnd(t)}),0)}}else{Zu[t]=[],Zu[t].push({onLoad:e,onProgress:i,onError:s}),l=new XMLHttpRequest,l.open("GET",t,!0),l.addEventListener("load",(function(e){const i=this.response,s=Zu[t];if(delete Zu[t],200===this.status||0===this.status){this.status,Yu.add(t,i);for(let t=0,e=s.length;t<e;t++){const e=s[t];e.onLoad&&e.onLoad(i)}n.manager.itemEnd(t)}else{for(let t=0,i=s.length;t<i;t++){const i=s[t];i.onError&&i.onError(e)}n.manager.itemError(t),n.manager.itemEnd(t)}}),!1),l.addEventListener("progress",(function(e){const i=Zu[t];for(let t=0,s=i.length;t<s;t++){const s=i[t];s.onProgress&&s.onProgress(e)}}),!1),l.addEventListener("error",(function(e){const i=Zu[t];delete Zu[t];for(let t=0,s=i.length;t<s;t++){const s=i[t];s.onError&&s.onError(e)}n.manager.itemError(t),n.manager.itemEnd(t)}),!1),l.addEventListener("abort",(function(e){const i=Zu[t];delete Zu[t];for(let t=0,s=i.length;t<s;t++){const s=i[t];s.onError&&s.onError(e)}n.manager.itemError(t),n.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(l.responseType=this.responseType),void 0!==this.withCredentials&&(l.withCredentials=this.withCredentials),l.overrideMimeType&&l.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const t in this.requestHeader)l.setRequestHeader(t,this.requestHeader[t]);l.send(null)}return n.manager.itemStart(t),l},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}}),Ju.prototype=Object.assign(Object.create(Qu.prototype),{constructor:Ju,load:function(t,e,i,s){const n=this,a=new Ku(n.manager);a.setPath(n.path),a.setRequestHeader(n.requestHeader),a.load(t,(function(i){try{e(n.parse(JSON.parse(i)))}catch(a){s&&s(a),n.manager.itemError(t)}}),i,s)},parse:function(t){const e=[];for(let i=0;i<t.length;i++){const s=Vu.parse(t[i]);e.push(s)}return e}}),tp.prototype=Object.assign(Object.create(Qu.prototype),{constructor:tp,load:function(t,e,i,s){const n=this,a=[],r=new qh;r.image=a;const o=new Ku(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader);let l=0;function c(c){o.load(t[c],(function(t){const i=n.parse(t,!0);a[c]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},l+=1,6===l&&(1===i.mipmapCount&&(r.minFilter=ft),r.format=i.format,r.needsUpdate=!0,e&&e(r))}),i,s)}if(Array.isArray(t))for(let h=0,d=t.length;h<d;++h)c(h);else o.load(t,(function(t){const i=n.parse(t,!0);if(i.isCubemap){const t=i.mipmaps.length/i.mipmapCount;for(let e=0;e<t;e++){a[e]={mipmaps:[]};for(let t=0;t<i.mipmapCount;t++)a[e].mipmaps.push(i.mipmaps[e*i.mipmapCount+t]),a[e].format=i.format,a[e].width=i.width,a[e].height=i.height}}else r.image.width=i.width,r.image.height=i.height,r.mipmaps=i.mipmaps;1===i.mipmapCount&&(r.minFilter=ft),r.format=i.format,r.needsUpdate=!0,e&&e(r)}),i,s);return r}}),ep.prototype=Object.assign(Object.create(Qu.prototype),{constructor:ep,load:function(t,e,i,s){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const n=this,a=Yu.get(t);if(void 0!==a)return n.manager.itemStart(t),setTimeout((function(){e&&e(a),n.manager.itemEnd(t)}),0),a;const r=document.createElementNS("http://www.w3.org/1999/xhtml","img");function o(){r.removeEventListener("load",o,!1),r.removeEventListener("error",l,!1),Yu.add(t,this),e&&e(this),n.manager.itemEnd(t)}function l(e){r.removeEventListener("load",o,!1),r.removeEventListener("error",l,!1),s&&s(e),n.manager.itemError(t),n.manager.itemEnd(t)}return r.addEventListener("load",o,!1),r.addEventListener("error",l,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(r.crossOrigin=this.crossOrigin),n.manager.itemStart(t),r.src=t,r}}),ip.prototype=Object.assign(Object.create(Qu.prototype),{constructor:ip,load:function(t,e,i,s){const n=new Wo,a=new ep(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let r=0;function o(i){a.load(t[i],(function(t){n.images[i]=t,r++,6===r&&(n.needsUpdate=!0,e&&e(n))}),void 0,s)}for(let l=0;l<t.length;++l)o(l);return n}}),sp.prototype=Object.assign(Object.create(Qu.prototype),{constructor:sp,load:function(t,e,i,s){const n=this,a=new Jn,r=new Ku(this.manager);return r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setPath(this.path),r.load(t,(function(t){const i=n.parse(t);i&&(void 0!==i.image?a.image=i.image:void 0!==i.data&&(a.image.width=i.width,a.image.height=i.height,a.image.data=i.data),a.wrapS=void 0!==i.wrapS?i.wrapS:ct,a.wrapT=void 0!==i.wrapT?i.wrapT:ct,a.magFilter=void 0!==i.magFilter?i.magFilter:ft,a.minFilter=void 0!==i.minFilter?i.minFilter:ft,a.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.format&&(a.format=i.format),void 0!==i.type&&(a.type=i.type),void 0!==i.mipmaps&&(a.mipmaps=i.mipmaps,a.minFilter=gt),1===i.mipmapCount&&(a.minFilter=ft),a.needsUpdate=!0,e&&e(a,i))}),i,s),a}}),np.prototype=Object.assign(Object.create(Qu.prototype),{constructor:np,load:function(t,e,i,s){const n=new fi,a=new ep(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,(function(i){n.image=i;const s=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);n.format=s?It:Tt,n.needsUpdate=!0,void 0!==e&&e(n)}),i,s),n}}),Object.assign(ap.prototype,{getPoint:function(){return null},getPointAt:function(t,e){const i=this.getUtoTmapping(t);return this.getPoint(i,e)},getPoints:function(t){void 0===t&&(t=5);const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);const e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},getLength:function(){const t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let i,s=this.getPoint(0),n=0;e.push(0);for(let a=1;a<=t;a++)i=this.getPoint(a/t),n+=i.distanceTo(s),e.push(n),s=i;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){const i=this.getLengths();let s=0;const n=i.length;let a;a=e||t*i[n-1];let r,o=0,l=n-1;while(o<=l)if(s=Math.floor(o+(l-o)/2),r=i[s]-a,r<0)o=s+1;else{if(!(r>0)){l=s;break}l=s-1}if(s=l,i[s]===a)return s/(n-1);const c=i[s],h=i[s+1],d=h-c,u=(a-c)/d,p=(s+u)/(n-1);return p},getTangent:function(t,e){const i=1e-4;let s=t-i,n=t+i;s<0&&(s=0),n>1&&(n=1);const a=this.getPoint(s),r=this.getPoint(n),o=e||(a.isVector2?new ci:new yi);return o.copy(r).sub(a).normalize(),o},getTangentAt:function(t,e){const i=this.getUtoTmapping(t);return this.getTangent(i,e)},computeFrenetFrames:function(t,e){const i=new yi,s=[],n=[],a=[],r=new yi,o=new Yi;for(let u=0;u<=t;u++){const e=u/t;s[u]=this.getTangentAt(e,new yi),s[u].normalize()}n[0]=new yi,a[0]=new yi;let l=Number.MAX_VALUE;const c=Math.abs(s[0].x),h=Math.abs(s[0].y),d=Math.abs(s[0].z);c<=l&&(l=c,i.set(1,0,0)),h<=l&&(l=h,i.set(0,1,0)),d<=l&&i.set(0,0,1),r.crossVectors(s[0],i).normalize(),n[0].crossVectors(s[0],r),a[0].crossVectors(s[0],n[0]);for(let u=1;u<=t;u++){if(n[u]=n[u-1].clone(),a[u]=a[u-1].clone(),r.crossVectors(s[u-1],s[u]),r.length()>Number.EPSILON){r.normalize();const t=Math.acos(li.clamp(s[u-1].dot(s[u]),-1,1));n[u].applyMatrix4(o.makeRotationAxis(r,t))}a[u].crossVectors(s[u],n[u])}if(!0===e){let e=Math.acos(li.clamp(n[0].dot(n[t]),-1,1));e/=t,s[0].dot(r.crossVectors(n[0],n[t]))>0&&(e=-e);for(let i=1;i<=t;i++)n[i].applyMatrix4(o.makeRotationAxis(s[i],e*i)),a[i].crossVectors(s[i],n[i])}return{tangents:s,normals:n,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),rp.prototype=Object.create(ap.prototype),rp.prototype.constructor=rp,rp.prototype.isEllipseCurve=!0,rp.prototype.getPoint=function(t,e){const i=e||new ci,s=2*Math.PI;let n=this.aEndAngle-this.aStartAngle;const a=Math.abs(n)<Number.EPSILON;while(n<0)n+=s;while(n>s)n-=s;n<Number.EPSILON&&(n=a?0:s),!0!==this.aClockwise||a||(n===s?n=-s:n-=s);const r=this.aStartAngle+t*n;let o=this.aX+this.xRadius*Math.cos(r),l=this.aY+this.yRadius*Math.sin(r);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),i=o-this.aX,s=l-this.aY;o=i*t-s*e+this.aX,l=i*e+s*t+this.aY}return i.set(o,l)},rp.prototype.copy=function(t){return ap.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},rp.prototype.toJSON=function(){const t=ap.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},rp.prototype.fromJSON=function(t){return ap.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},op.prototype=Object.create(rp.prototype),op.prototype.constructor=op,op.prototype.isArcCurve=!0;const cp=new yi,hp=new lp,dp=new lp,up=new lp;function pp(t,e,i,s){ap.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=i||"centripetal",this.tension=void 0!==s?s:.5}function fp(t,e,i,s,n){const a=.5*(s-e),r=.5*(n-i),o=t*t,l=t*o;return(2*i-2*s+a+r)*l+(-3*i+3*s-2*a-r)*o+a*t+i}function mp(t,e){const i=1-t;return i*i*e}function gp(t,e){return 2*(1-t)*t*e}function vp(t,e){return t*t*e}function bp(t,e,i,s){return mp(t,e)+gp(t,i)+vp(t,s)}function yp(t,e){const i=1-t;return i*i*i*e}function _p(t,e){const i=1-t;return 3*i*i*t*e}function xp(t,e){return 3*(1-t)*t*t*e}function wp(t,e){return t*t*t*e}function Cp(t,e,i,s,n){return yp(t,e)+_p(t,i)+xp(t,s)+wp(t,n)}function kp(t,e,i,s){ap.call(this),this.type="CubicBezierCurve",this.v0=t||new ci,this.v1=e||new ci,this.v2=i||new ci,this.v3=s||new ci}function Sp(t,e,i,s){ap.call(this),this.type="CubicBezierCurve3",this.v0=t||new yi,this.v1=e||new yi,this.v2=i||new yi,this.v3=s||new yi}function Ap(t,e){ap.call(this),this.type="LineCurve",this.v1=t||new ci,this.v2=e||new ci}function Op(t,e){ap.call(this),this.type="LineCurve3",this.v1=t||new yi,this.v2=e||new yi}function jp(t,e,i){ap.call(this),this.type="QuadraticBezierCurve",this.v0=t||new ci,this.v1=e||new ci,this.v2=i||new ci}function Mp(t,e,i){ap.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new yi,this.v1=e||new yi,this.v2=i||new yi}function Ip(t){ap.call(this),this.type="SplineCurve",this.points=t||[]}pp.prototype=Object.create(ap.prototype),pp.prototype.constructor=pp,pp.prototype.isCatmullRomCurve3=!0,pp.prototype.getPoint=function(t,e){const i=e||new yi,s=this.points,n=s.length,a=(n-(this.closed?0:1))*t;let r,o,l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/n)+1)*n:0===c&&l===n-1&&(l=n-2,c=1),this.closed||l>0?r=s[(l-1)%n]:(cp.subVectors(s[0],s[1]).add(s[0]),r=cp);const h=s[l%n],d=s[(l+1)%n];if(this.closed||l+2<n?o=s[(l+2)%n]:(cp.subVectors(s[n-1],s[n-2]).add(s[n-1]),o=cp),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(r.distanceToSquared(h),t),i=Math.pow(h.distanceToSquared(d),t),s=Math.pow(d.distanceToSquared(o),t);i<1e-4&&(i=1),e<1e-4&&(e=i),s<1e-4&&(s=i),hp.initNonuniformCatmullRom(r.x,h.x,d.x,o.x,e,i,s),dp.initNonuniformCatmullRom(r.y,h.y,d.y,o.y,e,i,s),up.initNonuniformCatmullRom(r.z,h.z,d.z,o.z,e,i,s)}else"catmullrom"===this.curveType&&(hp.initCatmullRom(r.x,h.x,d.x,o.x,this.tension),dp.initCatmullRom(r.y,h.y,d.y,o.y,this.tension),up.initCatmullRom(r.z,h.z,d.z,o.z,this.tension));return i.set(hp.calc(c),dp.calc(c),up.calc(c)),i},pp.prototype.copy=function(t){ap.prototype.copy.call(this,t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},pp.prototype.toJSON=function(){const t=ap.prototype.toJSON.call(this);t.points=[];for(let e=0,i=this.points.length;e<i;e++){const i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},pp.prototype.fromJSON=function(t){ap.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push((new yi).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},kp.prototype=Object.create(ap.prototype),kp.prototype.constructor=kp,kp.prototype.isCubicBezierCurve=!0,kp.prototype.getPoint=function(t,e){const i=e||new ci,s=this.v0,n=this.v1,a=this.v2,r=this.v3;return i.set(Cp(t,s.x,n.x,a.x,r.x),Cp(t,s.y,n.y,a.y,r.y)),i},kp.prototype.copy=function(t){return ap.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},kp.prototype.toJSON=function(){const t=ap.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},kp.prototype.fromJSON=function(t){return ap.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Sp.prototype=Object.create(ap.prototype),Sp.prototype.constructor=Sp,Sp.prototype.isCubicBezierCurve3=!0,Sp.prototype.getPoint=function(t,e){const i=e||new yi,s=this.v0,n=this.v1,a=this.v2,r=this.v3;return i.set(Cp(t,s.x,n.x,a.x,r.x),Cp(t,s.y,n.y,a.y,r.y),Cp(t,s.z,n.z,a.z,r.z)),i},Sp.prototype.copy=function(t){return ap.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Sp.prototype.toJSON=function(){const t=ap.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Sp.prototype.fromJSON=function(t){return ap.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Ap.prototype=Object.create(ap.prototype),Ap.prototype.constructor=Ap,Ap.prototype.isLineCurve=!0,Ap.prototype.getPoint=function(t,e){const i=e||new ci;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i},Ap.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Ap.prototype.getTangent=function(t,e){const i=e||new ci;return i.copy(this.v2).sub(this.v1).normalize(),i},Ap.prototype.copy=function(t){return ap.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Ap.prototype.toJSON=function(){const t=ap.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Ap.prototype.fromJSON=function(t){return ap.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Op.prototype=Object.create(ap.prototype),Op.prototype.constructor=Op,Op.prototype.isLineCurve3=!0,Op.prototype.getPoint=function(t,e){const i=e||new yi;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i},Op.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Op.prototype.copy=function(t){return ap.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Op.prototype.toJSON=function(){const t=ap.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Op.prototype.fromJSON=function(t){return ap.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},jp.prototype=Object.create(ap.prototype),jp.prototype.constructor=jp,jp.prototype.isQuadraticBezierCurve=!0,jp.prototype.getPoint=function(t,e){const i=e||new ci,s=this.v0,n=this.v1,a=this.v2;return i.set(bp(t,s.x,n.x,a.x),bp(t,s.y,n.y,a.y)),i},jp.prototype.copy=function(t){return ap.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},jp.prototype.toJSON=function(){const t=ap.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},jp.prototype.fromJSON=function(t){return ap.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Mp.prototype=Object.create(ap.prototype),Mp.prototype.constructor=Mp,Mp.prototype.isQuadraticBezierCurve3=!0,Mp.prototype.getPoint=function(t,e){const i=e||new yi,s=this.v0,n=this.v1,a=this.v2;return i.set(bp(t,s.x,n.x,a.x),bp(t,s.y,n.y,a.y),bp(t,s.z,n.z,a.z)),i},Mp.prototype.copy=function(t){return ap.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Mp.prototype.toJSON=function(){const t=ap.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Mp.prototype.fromJSON=function(t){return ap.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Ip.prototype=Object.create(ap.prototype),Ip.prototype.constructor=Ip,Ip.prototype.isSplineCurve=!0,Ip.prototype.getPoint=function(t,e){const i=e||new ci,s=this.points,n=(s.length-1)*t,a=Math.floor(n),r=n-a,o=s[0===a?a:a-1],l=s[a],c=s[a>s.length-2?s.length-1:a+1],h=s[a>s.length-3?s.length-1:a+2];return i.set(fp(r,o.x,l.x,c.x,h.x),fp(r,o.y,l.y,c.y,h.y)),i},Ip.prototype.copy=function(t){ap.prototype.copy.call(this,t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push(i.clone())}return this},Ip.prototype.toJSON=function(){const t=ap.prototype.toJSON.call(this);t.points=[];for(let e=0,i=this.points.length;e<i;e++){const i=this.points[e];t.points.push(i.toArray())}return t},Ip.prototype.fromJSON=function(t){ap.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push((new ci).fromArray(i))}return this};var Tp=Object.freeze({__proto__:null,ArcCurve:op,CatmullRomCurve3:pp,CubicBezierCurve:kp,CubicBezierCurve3:Sp,EllipseCurve:rp,LineCurve:Ap,LineCurve3:Op,QuadraticBezierCurve:jp,QuadraticBezierCurve3:Mp,SplineCurve:Ip});function Ep(){ap.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Dp(t){Ep.call(this),this.type="Path",this.currentPoint=new ci,t&&this.setFromPoints(t)}function Lp(t){Dp.call(this,t),this.uuid=li.generateUUID(),this.type="Shape",this.holes=[]}function Pp(t,e){bs.call(this),this.type="Light",this.color=new Fs(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Rp(t,e,i){Pp.call(this,t,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(bs.DefaultUp),this.updateMatrix(),this.groundColor=new Fs(e)}function zp(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new ci(512,512),this.map=null,this.mapPass=null,this.matrix=new Yi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ia,this._frameExtents=new ci(1,1),this._viewportCount=1,this._viewports=[new mi(0,0,1,1)]}function Np(){zp.call(this,new qn(50,1,.5,500))}function Bp(t,e,i,s,n,a){Pp.call(this,t,e),this.type="SpotLight",this.position.copy(bs.DefaultUp),this.updateMatrix(),this.target=new bs,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==s?s:Math.PI/3,this.penumbra=void 0!==n?n:0,this.decay=void 0!==a?a:1,this.shadow=new Np}function Fp(){zp.call(this,new qn(90,1,.5,500)),this._frameExtents=new ci(4,2),this._viewportCount=6,this._viewports=[new mi(2,1,1,1),new mi(0,1,1,1),new mi(3,1,1,1),new mi(1,1,1,1),new mi(3,0,1,1),new mi(1,0,1,1)],this._cubeDirections=[new yi(1,0,0),new yi(-1,0,0),new yi(0,0,1),new yi(0,0,-1),new yi(0,1,0),new yi(0,-1,0)],this._cubeUps=[new yi(0,1,0),new yi(0,1,0),new yi(0,1,0),new yi(0,1,0),new yi(0,0,1),new yi(0,0,-1)]}function $p(t,e,i,s){Pp.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==s?s:1,this.shadow=new Fp}function Up(t,e,i,s,n,a){Yn.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==i?i:1,this.bottom=void 0!==s?s:-1,this.near=void 0!==n?n:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Hp(){zp.call(this,new Up(-5,5,5,-5,.5,500))}function Vp(t,e){Pp.call(this,t,e),this.type="DirectionalLight",this.position.copy(bs.DefaultUp),this.updateMatrix(),this.target=new bs,this.shadow=new Hp}function Gp(t,e){Pp.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function Wp(t,e,i,s){Pp.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==i?i:10,this.height=void 0!==s?s:10}Ep.prototype=Object.assign(Object.create(ap.prototype),{constructor:Ep,add:function(t){this.curves.push(t)},closePath:function(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Ap(e,t))},getPoint:function(t){const e=t*this.getLength(),i=this.getCurveLengths();let s=0;while(s<i.length){if(i[s]>=e){const t=i[s]-e,n=this.curves[s],a=n.getLength(),r=0===a?0:1-t/a;return n.getPointAt(r)}s++}return null},getLength:function(){const t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let i=0,s=this.curves.length;i<s;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;const e=[];let i;for(let s=0,n=this.curves;s<n.length;s++){const a=n[s],r=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,o=a.getPoints(r);for(let t=0;t<o.length;t++){const s=o[t];i&&i.equals(s)||(e.push(s),i=s)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(t){ap.prototype.copy.call(this,t),this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){const t=ap.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e<i;e++){const i=this.curves[e];t.curves.push(i.toJSON())}return t},fromJSON:function(t){ap.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const i=t.curves[e];this.curves.push((new Tp[i.type]).fromJSON(i))}return this}}),Dp.prototype=Object.assign(Object.create(Ep.prototype),{constructor:Dp,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){const i=new Ap(this.currentPoint.clone(),new ci(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,i,s){const n=new jp(this.currentPoint.clone(),new ci(t,e),new ci(i,s));return this.curves.push(n),this.currentPoint.set(i,s),this},bezierCurveTo:function(t,e,i,s,n,a){const r=new kp(this.currentPoint.clone(),new ci(t,e),new ci(i,s),new ci(n,a));return this.curves.push(r),this.currentPoint.set(n,a),this},splineThru:function(t){const e=[this.currentPoint.clone()].concat(t),i=new Ip(e);return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,i,s,n,a){const r=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(t+r,e+o,i,s,n,a),this},absarc:function(t,e,i,s,n,a){return this.absellipse(t,e,i,i,s,n,a),this},ellipse:function(t,e,i,s,n,a,r,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,i,s,n,a,r,o),this},absellipse:function(t,e,i,s,n,a,r,o){const l=new rp(t,e,i,s,n,a,r,o);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(t){return Ep.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){const t=Ep.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Ep.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Lp.prototype=Object.assign(Object.create(Dp.prototype),{constructor:Lp,getPointsHoles:function(t){const e=[];for(let i=0,s=this.holes.length;i<s;i++)e[i]=this.holes[i].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Dp.prototype.copy.call(this,t),this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const i=t.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){const t=Dp.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e<i;e++){const i=this.holes[e];t.holes.push(i.toJSON())}return t},fromJSON:function(t){Dp.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const i=t.holes[e];this.holes.push((new Dp).fromJSON(i))}return this}}),Pp.prototype=Object.assign(Object.create(bs.prototype),{constructor:Pp,isLight:!0,copy:function(t){return bs.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){const e=bs.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Rp.prototype=Object.assign(Object.create(Pp.prototype),{constructor:Rp,isHemisphereLight:!0,copy:function(t){return Pp.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(zp.prototype,{_projScreenMatrix:new Yi,_lightPositionWorld:new yi,_lookTarget:new yi,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){const e=this.camera,i=this.matrix,s=this._projScreenMatrix,n=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(t.matrixWorld),e.position.copy(a),n.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(n),e.updateMatrixWorld(),s.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(s),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(e.projectionMatrix),i.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Np.prototype=Object.assign(Object.create(zp.prototype),{constructor:Np,isSpotLightShadow:!0,updateMatrices:function(t){const e=this.camera,i=2*li.RAD2DEG*t.angle,s=this.mapSize.width/this.mapSize.height,n=t.distance||e.far;i===e.fov&&s===e.aspect&&n===e.far||(e.fov=i,e.aspect=s,e.far=n,e.updateProjectionMatrix()),zp.prototype.updateMatrices.call(this,t)}}),Bp.prototype=Object.assign(Object.create(Pp.prototype),{constructor:Bp,isSpotLight:!0,copy:function(t){return Pp.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Fp.prototype=Object.assign(Object.create(zp.prototype),{constructor:Fp,isPointLightShadow:!0,updateMatrices:function(t,e){void 0===e&&(e=0);const i=this.camera,s=this.matrix,n=this._lightPositionWorld,a=this._lookTarget,r=this._projScreenMatrix;n.setFromMatrixPosition(t.matrixWorld),i.position.copy(n),a.copy(i.position),a.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(a),i.updateMatrixWorld(),s.makeTranslation(-n.x,-n.y,-n.z),r.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r)}}),$p.prototype=Object.assign(Object.create(Pp.prototype),{constructor:$p,isPointLight:!0,copy:function(t){return Pp.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Up.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Up,isOrthographicCamera:!0,copy:function(t,e){return Yn.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,i,s,n,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=s,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let n=i-t,a=i+t,r=s+e,o=s-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=t*this.view.offsetX,a=n+t*this.view.width,r-=e*this.view.offsetY,o=r-e*this.view.height}this.projectionMatrix.makeOrthographic(n,a,r,o,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){const e=bs.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Hp.prototype=Object.assign(Object.create(zp.prototype),{constructor:Hp,isDirectionalLightShadow:!0,updateMatrices:function(t){zp.prototype.updateMatrices.call(this,t)}}),Vp.prototype=Object.assign(Object.create(Pp.prototype),{constructor:Vp,isDirectionalLight:!0,copy:function(t){return Pp.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Gp.prototype=Object.assign(Object.create(Pp.prototype),{constructor:Gp,isAmbientLight:!0}),Wp.prototype=Object.assign(Object.create(Pp.prototype),{constructor:Wp,isRectAreaLight:!0,copy:function(t){return Pp.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){const e=Pp.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}});class Yp{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new yi)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const i=t.x,s=t.y,n=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScaledVector(a[1],.488603*s),e.addScaledVector(a[2],.488603*n),e.addScaledVector(a[3],.488603*i),e.addScaledVector(a[4],i*s*1.092548),e.addScaledVector(a[5],s*n*1.092548),e.addScaledVector(a[6],.315392*(3*n*n-1)),e.addScaledVector(a[7],i*n*1.092548),e.addScaledVector(a[8],.546274*(i*i-s*s)),e}getIrradianceAt(t,e){const i=t.x,s=t.y,n=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScaledVector(a[1],1.023328*s),e.addScaledVector(a[2],1.023328*n),e.addScaledVector(a[3],1.023328*i),e.addScaledVector(a[4],.858086*i*s),e.addScaledVector(a[5],.858086*s*n),e.addScaledVector(a[6],.743125*n*n-.247708),e.addScaledVector(a[7],.858086*i*n),e.addScaledVector(a[8],.429043*(i*i-s*s)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e){void 0===e&&(e=0);const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(t,e+3*s);return this}toArray(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(t,e+3*s);return t}static getBasisAt(t,e){const i=t.x,s=t.y,n=t.z;e[0]=.282095,e[1]=.488603*s,e[2]=.488603*n,e[3]=.488603*i,e[4]=1.092548*i*s,e[5]=1.092548*s*n,e[6]=.315392*(3*n*n-1),e[7]=1.092548*i*n,e[8]=.546274*(i*i-s*s)}}function qp(t,e){Pp.call(this,void 0,e),this.type="LightProbe",this.sh=void 0!==t?t:new Yp}function Xp(t){Qu.call(this,t),this.textures={}}qp.prototype=Object.assign(Object.create(Pp.prototype),{constructor:qp,isLightProbe:!0,copy:function(t){return Pp.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){const e=Pp.prototype.toJSON.call(this,t);return e.object.sh=this.sh.toArray(),e}}),Xp.prototype=Object.assign(Object.create(Qu.prototype),{constructor:Xp,load:function(t,e,i,s){const n=this,a=new Ku(n.manager);a.setPath(n.path),a.setRequestHeader(n.requestHeader),a.load(t,(function(i){try{e(n.parse(JSON.parse(i)))}catch(a){s&&s(a),n.manager.itemError(t)}}),i,s)},parse:function(t){const e=this.textures;function i(t){return e[t],e[t]}const s=new Iu[t.type];if(void 0!==t.uuid&&(s.uuid=t.uuid),void 0!==t.name&&(s.name=t.name),void 0!==t.color&&s.color.setHex(t.color),void 0!==t.roughness&&(s.roughness=t.roughness),void 0!==t.metalness&&(s.metalness=t.metalness),void 0!==t.sheen&&(s.sheen=(new Fs).setHex(t.sheen)),void 0!==t.emissive&&s.emissive.setHex(t.emissive),void 0!==t.specular&&s.specular.setHex(t.specular),void 0!==t.shininess&&(s.shininess=t.shininess),void 0!==t.clearcoat&&(s.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(s.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(s.fog=t.fog),void 0!==t.flatShading&&(s.flatShading=t.flatShading),void 0!==t.blending&&(s.blending=t.blending),void 0!==t.combine&&(s.combine=t.combine),void 0!==t.side&&(s.side=t.side),void 0!==t.opacity&&(s.opacity=t.opacity),void 0!==t.transparent&&(s.transparent=t.transparent),void 0!==t.alphaTest&&(s.alphaTest=t.alphaTest),void 0!==t.depthTest&&(s.depthTest=t.depthTest),void 0!==t.depthWrite&&(s.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(s.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(s.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(s.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(s.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(s.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(s.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(s.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(s.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(s.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(s.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(s.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(s.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(s.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(s.rotation=t.rotation),1!==t.linewidth&&(s.linewidth=t.linewidth),void 0!==t.dashSize&&(s.dashSize=t.dashSize),void 0!==t.gapSize&&(s.gapSize=t.gapSize),void 0!==t.scale&&(s.scale=t.scale),void 0!==t.polygonOffset&&(s.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(s.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(s.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(s.skinning=t.skinning),void 0!==t.morphTargets&&(s.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(s.morphNormals=t.morphNormals),void 0!==t.dithering&&(s.dithering=t.dithering),void 0!==t.vertexTangents&&(s.vertexTangents=t.vertexTangents),void 0!==t.visible&&(s.visible=t.visible),void 0!==t.toneMapped&&(s.toneMapped=t.toneMapped),void 0!==t.userData&&(s.userData=t.userData),void 0!==t.vertexColors&&("number"===typeof t.vertexColors?s.vertexColors=t.vertexColors>0:s.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const n in t.uniforms){const e=t.uniforms[n];switch(s.uniforms[n]={},e.type){case"t":s.uniforms[n].value=i(e.value);break;case"c":s.uniforms[n].value=(new Fs).setHex(e.value);break;case"v2":s.uniforms[n].value=(new ci).fromArray(e.value);break;case"v3":s.uniforms[n].value=(new yi).fromArray(e.value);break;case"v4":s.uniforms[n].value=(new mi).fromArray(e.value);break;case"m3":s.uniforms[n].value=(new hi).fromArray(e.value);break;case"m4":s.uniforms[n].value=(new Yi).fromArray(e.value);break;default:s.uniforms[n].value=e.value}}if(void 0!==t.defines&&(s.defines=t.defines),void 0!==t.vertexShader&&(s.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(s.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(const n in t.extensions)s.extensions[n]=t.extensions[n];if(void 0!==t.shading&&(s.flatShading=1===t.shading),void 0!==t.size&&(s.size=t.size),void 0!==t.sizeAttenuation&&(s.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(s.map=i(t.map)),void 0!==t.matcap&&(s.matcap=i(t.matcap)),void 0!==t.alphaMap&&(s.alphaMap=i(t.alphaMap)),void 0!==t.bumpMap&&(s.bumpMap=i(t.bumpMap)),void 0!==t.bumpScale&&(s.bumpScale=t.bumpScale),void 0!==t.normalMap&&(s.normalMap=i(t.normalMap)),void 0!==t.normalMapType&&(s.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),s.normalScale=(new ci).fromArray(e)}return void 0!==t.displacementMap&&(s.displacementMap=i(t.displacementMap)),void 0!==t.displacementScale&&(s.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(s.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(s.roughnessMap=i(t.roughnessMap)),void 0!==t.metalnessMap&&(s.metalnessMap=i(t.metalnessMap)),void 0!==t.emissiveMap&&(s.emissiveMap=i(t.emissiveMap)),void 0!==t.emissiveIntensity&&(s.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(s.specularMap=i(t.specularMap)),void 0!==t.envMap&&(s.envMap=i(t.envMap)),void 0!==t.envMapIntensity&&(s.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(s.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(s.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(s.lightMap=i(t.lightMap)),void 0!==t.lightMapIntensity&&(s.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(s.aoMap=i(t.aoMap)),void 0!==t.aoMapIntensity&&(s.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(s.gradientMap=i(t.gradientMap)),void 0!==t.clearcoatMap&&(s.clearcoatMap=i(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(s.clearcoatRoughnessMap=i(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(s.clearcoatNormalMap=i(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(s.clearcoatNormalScale=(new ci).fromArray(t.clearcoatNormalScale)),void 0!==t.transmission&&(s.transmission=t.transmission),void 0!==t.transmissionMap&&(s.transmissionMap=i(t.transmissionMap)),s},setTextures:function(t){return this.textures=t,this}});const Qp={decodeText:function(t){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let s=0,n=t.length;s<n;s++)e+=String.fromCharCode(t[s]);try{return decodeURIComponent(escape(e))}catch(i){return e}},extractUrlBase:function(t){const e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function Zp(){pn.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function Kp(t,e,i,s){"number"===typeof i&&(s=i,i=!1),Ys.call(this,t,e,i),this.meshPerAttribute=s||1}function Jp(t){Qu.call(this,t)}Zp.prototype=Object.assign(Object.create(pn.prototype),{constructor:Zp,isInstancedBufferGeometry:!0,copy:function(t){return pn.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const t=pn.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}),Kp.prototype=Object.assign(Object.create(Ys.prototype),{constructor:Kp,isInstancedBufferAttribute:!0,copy:function(t){return Ys.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){const t=Ys.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Jp.prototype=Object.assign(Object.create(Qu.prototype),{constructor:Jp,load:function(t,e,i,s){const n=this,a=new Ku(n.manager);a.setPath(n.path),a.setRequestHeader(n.requestHeader),a.load(t,(function(i){try{e(n.parse(JSON.parse(i)))}catch(a){s&&s(a),n.manager.itemError(t)}}),i,s)},parse:function(t){const e={},i={};function s(t,i){if(void 0!==e[i])return e[i];const s=t.interleavedBuffers,a=s[i],r=n(t,a.buffer),o=new tf[a.type](r),l=new Zc(o,a.stride);return l.uuid=a.uuid,e[i]=l,l}function n(t,e){if(void 0!==i[e])return i[e];const s=t.arrayBuffers,n=s[e],a=new Uint32Array(n).buffer;return i[e]=a,a}const a=t.isInstancedBufferGeometry?new Zp:new pn,r=t.data.index;if(void 0!==r){const t=new tf[r.type](r.array);a.setIndex(new Ys(t,1))}const o=t.data.attributes;for(const u in o){const e=o[u];let i;if(e.isInterleavedBufferAttribute){const n=s(t.data,e.data);i=new Jc(n,e.itemSize,e.offset,e.normalized)}else{const t=new tf[e.type](e.array),s=e.isInstancedBufferAttribute?Kp:Ys;i=new s(t,e.itemSize,e.normalized)}void 0!==e.name&&(i.name=e.name),a.setAttribute(u,i)}const l=t.data.morphAttributes;if(l)for(const u in l){const e=l[u],i=[];for(let n=0,a=e.length;n<a;n++){const a=e[n];let r;if(a.isInterleavedBufferAttribute){const e=s(t.data,a.data);r=new Jc(e,a.itemSize,a.offset,a.normalized)}else{const t=new tf[a.type](a.array);r=new Ys(t,a.itemSize,a.normalized)}void 0!==a.name&&(r.name=a.name),i.push(r)}a.morphAttributes[u]=i}const c=t.data.morphTargetsRelative;c&&(a.morphTargetsRelative=!0);const h=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==h)for(let u=0,p=h.length;u!==p;++u){const t=h[u];a.addGroup(t.start,t.count,t.materialIndex)}const d=t.data.boundingSphere;if(void 0!==d){const t=new yi;void 0!==d.center&&t.fromArray(d.center),a.boundingSphere=new Ni(t,d.radius)}return t.name&&(a.name=t.name),t.userData&&(a.userData=t.userData),a}});const tf={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function ef(t){Qu.call(this,t)}ef.prototype=Object.assign(Object.create(Qu.prototype),{constructor:ef,load:function(t,e,i,s){const n=this,a=""===this.path?Qp.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const r=new Ku(n.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.load(t,(function(t){let i=null;try{i=JSON.parse(t)}catch(r){return void(void 0!==s&&s(r))}const a=i.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()&&n.parse(i,e)}),i,s)},parse:function(t,e){const i=this.parseShape(t.shapes),s=this.parseGeometries(t.geometries,i),n=this.parseImages(t.images,(function(){void 0!==e&&e(o)})),a=this.parseTextures(t.textures,n),r=this.parseMaterials(t.materials,a),o=this.parseObject(t.object,s,r);return t.animations&&(o.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(o),o},parseShape:function(t){const e={};if(void 0!==t)for(let i=0,s=t.length;i<s;i++){const s=(new Lp).fromJSON(t[i]);e[s.uuid]=s}return e},parseGeometries:function(t,e){const i={};let s;if(void 0!==t){const n=new Jp;for(let a=0,r=t.length;a<r;a++){let r;const o=t[a];switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":r=new yu[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":r=new yu[o.type](o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":r=new yu[o.type](o.radius,o.segments,o.thetaStart,o.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":r=new yu[o.type](o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":r=new yu[o.type](o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":r=new yu[o.type](o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":r=new yu[o.type](o.radius,o.detail);break;case"RingGeometry":case"RingBufferGeometry":r=new yu[o.type](o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":r=new yu[o.type](o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":r=new yu[o.type](o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q);break;case"TubeGeometry":case"TubeBufferGeometry":r=new yu[o.type]((new Tp[o.path.type]).fromJSON(o.path),o.tubularSegments,o.radius,o.radialSegments,o.closed);break;case"LatheGeometry":case"LatheBufferGeometry":r=new yu[o.type](o.points,o.segments,o.phiStart,o.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":r=new yu[o.type](o.vertices,o.indices,o.radius,o.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":s=[];for(let i=0,n=o.shapes.length;i<n;i++){const t=e[o.shapes[i]];s.push(t)}r=new yu[o.type](s,o.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":s=[];for(let i=0,n=o.shapes.length;i<n;i++){const t=e[o.shapes[i]];s.push(t)}const t=o.options.extrudePath;void 0!==t&&(o.options.extrudePath=(new Tp[t.type]).fromJSON(t)),r=new yu[o.type](s,o.options);break;case"BufferGeometry":case"InstancedBufferGeometry":r=n.parse(o);break;case"Geometry":break;default:continue}r.uuid=o.uuid,void 0!==o.name&&(r.name=o.name),!0===r.isBufferGeometry&&void 0!==o.userData&&(r.userData=o.userData),i[o.uuid]=r}}return i},parseMaterials:function(t,e){const i={},s={};if(void 0!==t){const n=new Xp;n.setTextures(e);for(let e=0,a=t.length;e<a;e++){const a=t[e];if("MultiMaterial"===a.type){const t=[];for(let e=0;e<a.materials.length;e++){const s=a.materials[e];void 0===i[s.uuid]&&(i[s.uuid]=n.parse(s)),t.push(i[s.uuid])}s[a.uuid]=t}else void 0===i[a.uuid]&&(i[a.uuid]=n.parse(a)),s[a.uuid]=i[a.uuid]}}return s},parseAnimations:function(t){const e=[];for(let i=0;i<t.length;i++){const s=t[i],n=Vu.parse(s);void 0!==s.uuid&&(n.uuid=s.uuid),e.push(n)}return e},parseImages:function(t,e){const i=this,s={};let n;function a(t){return i.manager.itemStart(t),n.load(t,(function(){i.manager.itemEnd(t)}),void 0,(function(){i.manager.itemError(t),i.manager.itemEnd(t)}))}if(void 0!==t&&t.length>0){const r=new qu(e);n=new ep(r),n.setCrossOrigin(this.crossOrigin);for(let e=0,n=t.length;e<n;e++){const n=t[e],r=n.url;if(Array.isArray(r)){s[n.uuid]=[];for(let t=0,e=r.length;t<e;t++){const e=r[t],o=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:i.resourcePath+e;s[n.uuid].push(a(o))}}else{const t=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n.url)?n.url:i.resourcePath+n.url;s[n.uuid]=a(t)}}}return s},parseTextures:function(t,e){function i(t,e){return"number"===typeof t?t:e[t]}const s={};if(void 0!==t)for(let n=0,a=t.length;n<a;n++){const a=t[n];let r;a.image,e[a.image],r=Array.isArray(e[a.image])?new Wo(e[a.image]):new fi(e[a.image]),r.needsUpdate=!0,r.uuid=a.uuid,void 0!==a.name&&(r.name=a.name),void 0!==a.mapping&&(r.mapping=i(a.mapping,sf)),void 0!==a.offset&&r.offset.fromArray(a.offset),void 0!==a.repeat&&r.repeat.fromArray(a.repeat),void 0!==a.center&&r.center.fromArray(a.center),void 0!==a.rotation&&(r.rotation=a.rotation),void 0!==a.wrap&&(r.wrapS=i(a.wrap[0],nf),r.wrapT=i(a.wrap[1],nf)),void 0!==a.format&&(r.format=a.format),void 0!==a.type&&(r.type=a.type),void 0!==a.encoding&&(r.encoding=a.encoding),void 0!==a.minFilter&&(r.minFilter=i(a.minFilter,af)),void 0!==a.magFilter&&(r.magFilter=i(a.magFilter,af)),void 0!==a.anisotropy&&(r.anisotropy=a.anisotropy),void 0!==a.flipY&&(r.flipY=a.flipY),void 0!==a.premultiplyAlpha&&(r.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(r.unpackAlignment=a.unpackAlignment),s[a.uuid]=r}return s},parseObject:function(t,e,i){let s,n,a;function r(t){return e[t],e[t]}function o(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let s=0,n=t.length;s<n;s++){const n=t[s];i[n],e.push(i[n])}return e}return i[t],i[t]}}switch(t.type){case"Scene":s=new Qc,void 0!==t.background&&Number.isInteger(t.background)&&(s.background=new Fs(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?s.fog=new Xc(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(s.fog=new qc(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":s=new qn(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(s.focus=t.focus),void 0!==t.zoom&&(s.zoom=t.zoom),void 0!==t.filmGauge&&(s.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(s.filmOffset=t.filmOffset),void 0!==t.view&&(s.view=Object.assign({},t.view));break;case"OrthographicCamera":s=new Up(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(s.zoom=t.zoom),void 0!==t.view&&(s.view=Object.assign({},t.view));break;case"AmbientLight":s=new Gp(t.color,t.intensity);break;case"DirectionalLight":s=new Vp(t.color,t.intensity);break;case"PointLight":s=new $p(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":s=new Wp(t.color,t.intensity,t.width,t.height);break;case"SpotLight":s=new Bp(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":s=new Rp(t.color,t.groundColor,t.intensity);break;case"LightProbe":s=(new qp).fromJSON(t);break;case"SkinnedMesh":case"Mesh":n=r(t.geometry),a=o(t.material),s=new Tn(n,a);break;case"InstancedMesh":n=r(t.geometry),a=o(t.material);const e=t.count,i=t.instanceMatrix;s=new jh(n,a,e),s.instanceMatrix=new Ys(new Float32Array(i.array),16);break;case"LOD":s=new bh;break;case"Line":s=new Ph(r(t.geometry),o(t.material),t.mode);break;case"LineLoop":s=new Bh(r(t.geometry),o(t.material));break;case"LineSegments":s=new Nh(r(t.geometry),o(t.material));break;case"PointCloud":case"Points":s=new Gh(r(t.geometry),o(t.material));break;case"Sprite":s=new fh(o(t.material));break;case"Group":s=new Uc;break;default:s=new bs}if(s.uuid=t.uuid,void 0!==t.name&&(s.name=t.name),void 0!==t.matrix?(s.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(s.matrixAutoUpdate=t.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(void 0!==t.position&&s.position.fromArray(t.position),void 0!==t.rotation&&s.rotation.fromArray(t.rotation),void 0!==t.quaternion&&s.quaternion.fromArray(t.quaternion),void 0!==t.scale&&s.scale.fromArray(t.scale)),void 0!==t.castShadow&&(s.castShadow=t.castShadow),void 0!==t.receiveShadow&&(s.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(s.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(s.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(s.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&s.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(s.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(s.visible=t.visible),void 0!==t.frustumCulled&&(s.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(s.renderOrder=t.renderOrder),void 0!==t.userData&&(s.userData=t.userData),void 0!==t.layers&&(s.layers.mask=t.layers),void 0!==t.children){const n=t.children;for(let t=0;t<n.length;t++)s.add(this.parseObject(n[t],e,i))}if("LOD"===t.type){void 0!==t.autoUpdate&&(s.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const i=e[t],n=s.getObjectByProperty("uuid",i.object);void 0!==n&&s.addLevel(n,i.distance)}}return s}});const sf={UVMapping:et,CubeReflectionMapping:it,CubeRefractionMapping:st,EquirectangularReflectionMapping:nt,EquirectangularRefractionMapping:at,CubeUVReflectionMapping:rt,CubeUVRefractionMapping:ot},nf={RepeatWrapping:lt,ClampToEdgeWrapping:ct,MirroredRepeatWrapping:ht},af={NearestFilter:dt,NearestMipmapNearestFilter:ut,NearestMipmapLinearFilter:pt,LinearFilter:ft,LinearMipmapNearestFilter:mt,LinearMipmapLinearFilter:gt};function rf(t){Qu.call(this,t),this.options={premultiplyAlpha:"none"}}function of(){this.type="ShapePath",this.color=new Fs,this.subPaths=[],this.currentPath=null}function lf(t){this.type="Font",this.data=t}function cf(t,e,i){const s=Array.from?Array.from(t):String(t).split(""),n=e/i.resolution,a=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*n,r=[];let o=0,l=0;for(let c=0;c<s.length;c++){const t=s[c];if("\n"===t)o=0,l-=a;else{const e=hf(t,n,o,l,i);o+=e.offsetX,r.push(e.path)}}return r}function hf(t,e,i,s,n){const a=n.glyphs[t]||n.glyphs["?"];if(!a)return;const r=new of;let o,l,c,h,d,u,p,f;if(a.o){const t=a._cachedOutline||(a._cachedOutline=a.o.split(" "));for(let n=0,a=t.length;n<a;){const a=t[n++];switch(a){case"m":o=t[n++]*e+i,l=t[n++]*e+s,r.moveTo(o,l);break;case"l":o=t[n++]*e+i,l=t[n++]*e+s,r.lineTo(o,l);break;case"q":c=t[n++]*e+i,h=t[n++]*e+s,d=t[n++]*e+i,u=t[n++]*e+s,r.quadraticCurveTo(d,u,c,h);break;case"b":c=t[n++]*e+i,h=t[n++]*e+s,d=t[n++]*e+i,u=t[n++]*e+s,p=t[n++]*e+i,f=t[n++]*e+s,r.bezierCurveTo(d,u,p,f,c,h);break}}}return{offsetX:a.ha*e,path:r}}function df(t){Qu.call(this,t)}let uf;rf.prototype=Object.assign(Object.create(Qu.prototype),{constructor:rf,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(t,e,i,s){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const n=this,a=Yu.get(t);if(void 0!==a)return n.manager.itemStart(t),setTimeout((function(){e&&e(a),n.manager.itemEnd(t)}),0),a;fetch(t).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,n.options)})).then((function(i){Yu.add(t,i),e&&e(i),n.manager.itemEnd(t)})).catch((function(e){s&&s(e),n.manager.itemError(t),n.manager.itemEnd(t)})),n.manager.itemStart(t)}}),Object.assign(of.prototype,{moveTo:function(t,e){return this.currentPath=new Dp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,i,s){return this.currentPath.quadraticCurveTo(t,e,i,s),this},bezierCurveTo:function(t,e,i,s,n,a){return this.currentPath.bezierCurveTo(t,e,i,s,n,a),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function i(t){const e=[];for(let i=0,s=t.length;i<s;i++){const s=t[i],n=new Lp;n.curves=s.curves,e.push(n)}return e}function s(t,e){const i=e.length;let s=!1;for(let n=i-1,a=0;a<i;n=a++){let i=e[n],r=e[a],o=r.x-i.x,l=r.y-i.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(i=e[a],o=-o,r=e[n],l=-l),t.y<i.y||t.y>r.y)continue;if(t.y===i.y){if(t.x===i.x)return!0}else{const e=l*(t.x-i.x)-o*(t.y-i.y);if(0===e)return!0;if(e<0)continue;s=!s}}else{if(t.y!==i.y)continue;if(r.x<=t.x&&t.x<=i.x||i.x<=t.x&&t.x<=r.x)return!0}}return s}const n=qd.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===e)return i(a);let r,o,l;const c=[];if(1===a.length)return o=a[0],l=new Lp,l.curves=o.curves,c.push(l),c;let h=!n(a[0].getPoints());h=t?!h:h;const d=[],u=[];let p,f,m=[],g=0;u[g]=void 0,m[g]=[];for(let v=0,b=a.length;v<b;v++)o=a[v],p=o.getPoints(),r=n(p),r=t?!r:r,r?(!h&&u[g]&&g++,u[g]={s:new Lp,p:p},u[g].s.curves=o.curves,h&&g++,m[g]=[]):m[g].push({h:o,p:p[0]});if(!u[0])return i(a);if(u.length>1){let t=!1;const e=[];for(let i=0,s=u.length;i<s;i++)d[i]=[];for(let i=0,n=u.length;i<n;i++){const n=m[i];for(let a=0;a<n.length;a++){const r=n[a];let o=!0;for(let n=0;n<u.length;n++)s(r.p,u[n].p)&&(i!==n&&e.push({froms:i,tos:n,hole:a}),o?(o=!1,d[n].push(r)):t=!0);o&&d[i].push(r)}}e.length>0&&(t||(m=d))}for(let v=0,b=u.length;v<b;v++){l=u[v].s,c.push(l),f=m[v];for(let t=0,e=f.length;t<e;t++)l.holes.push(f[t].h)}return c}}),Object.assign(lf.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);const i=[],s=cf(t,e,this.data);for(let n=0,a=s.length;n<a;n++)Array.prototype.push.apply(i,s[n].toShapes());return i}}),df.prototype=Object.assign(Object.create(Qu.prototype),{constructor:df,load:function(t,e,i,s){const n=this,a=new Ku(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.load(t,(function(t){let i;try{i=JSON.parse(t)}catch(a){i=JSON.parse(t.substring(65,t.length-2))}const s=n.parse(i);e&&e(s)}),i,s)},parse:function(t){return new lf(t)}});const pf={getContext:function(){return void 0===uf&&(uf=new(window.AudioContext||window.webkitAudioContext)),uf},setContext:function(t){uf=t}};function ff(t){Qu.call(this,t)}function mf(t,e,i){qp.call(this,void 0,i);const s=(new Fs).set(t),n=(new Fs).set(e),a=new yi(s.r,s.g,s.b),r=new yi(n.r,n.g,n.b),o=Math.sqrt(Math.PI),l=o*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(r).multiplyScalar(o),this.sh.coefficients[1].copy(a).sub(r).multiplyScalar(l)}function gf(t,e){qp.call(this,void 0,e);const i=(new Fs).set(t);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}ff.prototype=Object.assign(Object.create(Qu.prototype),{constructor:ff,load:function(t,e,i,s){const n=this,a=new Ku(n.manager);a.setResponseType("arraybuffer"),a.setPath(n.path),a.setRequestHeader(n.requestHeader),a.load(t,(function(i){try{const t=i.slice(0),s=pf.getContext();s.decodeAudioData(t,(function(t){e(t)}))}catch(a){s&&s(a),n.manager.itemError(t)}}),i,s)}}),mf.prototype=Object.assign(Object.create(qp.prototype),{constructor:mf,isHemisphereLightProbe:!0,copy:function(t){return qp.prototype.copy.call(this,t),this},toJSON:function(t){const e=qp.prototype.toJSON.call(this,t);return e}}),gf.prototype=Object.assign(Object.create(qp.prototype),{constructor:gf,isAmbientLightProbe:!0,copy:function(t){return qp.prototype.copy.call(this,t),this},toJSON:function(t){const e=qp.prototype.toJSON.call(this,t);return e}});const vf=new Yi,bf=new Yi;function yf(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new qn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new qn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(yf.prototype,{update:function(t){const e=this._cache,i=e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep;if(i){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;const i=t.projectionMatrix.clone(),s=e.eyeSep/2,n=s*e.near/e.focus,a=e.near*Math.tan(li.DEG2RAD*e.fov*.5)/e.zoom;let r,o;bf.elements[12]=-s,vf.elements[12]=s,r=-a*e.aspect+n,o=a*e.aspect+n,i.elements[0]=2*e.near/(o-r),i.elements[8]=(o+r)/(o-r),this.cameraL.projectionMatrix.copy(i),r=-a*e.aspect-n,o=a*e.aspect-n,i.elements[0]=2*e.near/(o-r),i.elements[8]=(o+r)/(o-r),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(bf),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(vf)}});new yi,new bi,new yi,new yi;class _f extends bs{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t){if(void 0===t&&(t=0),!0===this.isPlaying)return;if(!1===this.hasPlaybackControl)return;this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1!==this.hasPlaybackControl&&this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}new yi,new bi,new yi,new yi;class xf{constructor(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let i=0;i<e.length;i++)t+=e[i];return t/e.length}}function wf(t,e,i){let s,n,a;switch(this.binding=t,this.valueSize=i,e){case"quaternion":s=this._slerp,n=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":s=this._select,n=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:s=this._lerp,n=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=n,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(wf.prototype,{accumulate:function(t,e){const i=this.buffer,s=this.valueSize,n=t*s+s;let a=this.cumulativeWeight;if(0===a){for(let t=0;t!==s;++t)i[n+t]=i[t];a=e}else{a+=e;const t=e/a;this._mixBufferRegion(i,n,0,t,s)}this.cumulativeWeight=a},accumulateAdditive:function(t){const e=this.buffer,i=this.valueSize,s=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,s,0,t,i),this.cumulativeWeightAdditive+=t},apply:function(t){const e=this.valueSize,i=this.buffer,s=t*e+e,n=this.cumulativeWeight,a=this.cumulativeWeightAdditive,r=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,n<1){const t=e*this._origIndex;this._mixBufferRegion(i,s,t,1-n,e)}a>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*e,1,e);for(let o=e,l=e+e;o!==l;++o)if(i[o]!==i[o+e]){r.setValue(i,s);break}},saveOriginalState:function(){const t=this.binding,e=this.buffer,i=this.valueSize,s=i*this._origIndex;t.getValue(e,s);for(let n=i,a=s;n!==a;++n)e[n]=e[s+n%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_setAdditiveIdentityNumeric:function(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]},_select:function(t,e,i,s,n){if(s>=.5)for(let a=0;a!==n;++a)t[e+a]=t[i+a]},_slerp:function(t,e,i,s){bi.slerpFlat(t,e,t,e,t,i,s)},_slerpAdditive:function(t,e,i,s,n){const a=this._workIndex*n;bi.multiplyQuaternionsFlat(t,a,t,e,t,i),bi.slerpFlat(t,e,t,e,t,a,s)},_lerp:function(t,e,i,s,n){const a=1-s;for(let r=0;r!==n;++r){const n=e+r;t[n]=t[n]*a+t[i+r]*s}},_lerpAdditive:function(t,e,i,s,n){for(let a=0;a!==n;++a){const n=e+a;t[n]=t[n]+t[i+a]*s}}});const Cf="\\[\\]\\.:\\/",kf=new RegExp("["+Cf+"]","g"),Sf="[^"+Cf+"]",Af="[^"+Cf.replace("\\.","")+"]",Of=/((?:WC+[\/:])*)/.source.replace("WC",Sf),jf=/(WCOD+)?/.source.replace("WCOD",Af),Mf=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Sf),If=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Sf),Tf=new RegExp("^"+Of+jf+Mf+If+"$"),Ef=["material","materials","bones"];function Df(t,e,i){const s=i||Lf.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,s)}function Lf(t,e,i){this.path=e,this.parsedPath=i||Lf.parseTrackName(e),this.node=Lf.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Pf(){this.uuid=li.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let i=0,s=arguments.length;i!==s;++i)t[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}Object.assign(Df.prototype,{getValue:function(t,e){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];void 0!==s&&s.getValue(t,e)},setValue:function(t,e){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,n=i.length;s!==n;++s)i[s].setValue(t,e)},bind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()},unbind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}),Object.assign(Lf,{Composite:Df,create:function(t,e,i){return t&&t.isAnimationObjectGroup?new Lf.Composite(t,e,i):new Lf(t,e,i)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(kf,"")},parseTrackName:function(t){const e=Tf.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const t=i.nodeName.substring(s+1);-1!==Ef.indexOf(t)&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=t)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i},findNode:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(e);if(void 0!==i)return i}if(t.children){const i=function(t){for(let s=0;s<t.length;s++){const n=t[s];if(n.name===e||n.uuid===e)return n;const a=i(n.children);if(a)return a}return null},s=i(t.children);if(s)return s}return null}}),Object.assign(Lf.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){const i=this.resolvedProperty;for(let s=0,n=i.length;s!==n;++s)t[e++]=i[s]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){const i=this.resolvedProperty;for(let s=0,n=i.length;s!==n;++s)i[s]=t[e++]},function(t,e){const i=this.resolvedProperty;for(let s=0,n=i.length;s!==n;++s)i[s]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){const i=this.resolvedProperty;for(let s=0,n=i.length;s!==n;++s)i[s]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){let t=this.node;const e=this.parsedPath,i=e.objectName,s=e.propertyName;let n=e.propertyIndex;if(t||(t=Lf.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return;if(i){let s=e.objectIndex;switch(i){case"materials":if(!t.material)return;if(!t.material.materials)return;t=t.material.materials;break;case"bones":if(!t.skeleton)return;t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===s){s=e;break}break;default:if(void 0===t[i])return;t=t[i]}if(void 0!==s){if(void 0===t[s])return;t=t[s]}}const a=t[s];if(void 0===a){e.nodeName;return}let r=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?r=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(r=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==n){if("morphTargetInfluences"===s){if(!t.geometry)return;if(!t.geometry.isBufferGeometry)return;if(!t.geometry.morphAttributes)return;void 0!==t.morphTargetDictionary[n]&&(n=t.morphTargetDictionary[n])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=n}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][r]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Lf.prototype,{_getValue_unbound:Lf.prototype.getValue,_setValue_unbound:Lf.prototype.setValue}),Object.assign(Pf.prototype,{isAnimationObjectGroup:!0,add:function(){const t=this._objects,e=this._indicesByUUID,i=this._paths,s=this._parsedPaths,n=this._bindings,a=n.length;let r=void 0,o=t.length,l=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const h=arguments[c],d=h.uuid;let u=e[d];if(void 0===u){u=o++,e[d]=u,t.push(h);for(let t=0,e=a;t!==e;++t)n[t].push(new Lf(h,i[t],s[t]))}else if(u<l){r=t[u];const o=--l,c=t[o];e[c.uuid]=u,t[u]=c,e[d]=o,t[o]=h;for(let t=0,e=a;t!==e;++t){const e=n[t],a=e[o];let r=e[u];e[u]=a,void 0===r&&(r=new Lf(h,i[t],s[t])),e[o]=r}}else t[u]}this.nCachedObjects_=l},remove:function(){const t=this._objects,e=this._indicesByUUID,i=this._bindings,s=i.length;let n=this.nCachedObjects_;for(let a=0,r=arguments.length;a!==r;++a){const r=arguments[a],o=r.uuid,l=e[o];if(void 0!==l&&l>=n){const a=n++,c=t[a];e[c.uuid]=l,t[l]=c,e[o]=a,t[a]=r;for(let t=0,e=s;t!==e;++t){const e=i[t],s=e[a],n=e[l];e[l]=s,e[a]=n}}}this.nCachedObjects_=n},uncache:function(){const t=this._objects,e=this._indicesByUUID,i=this._bindings,s=i.length;let n=this.nCachedObjects_,a=t.length;for(let r=0,o=arguments.length;r!==o;++r){const o=arguments[r],l=o.uuid,c=e[l];if(void 0!==c)if(delete e[l],c<n){const r=--n,o=t[r],l=--a,h=t[l];e[o.uuid]=c,t[c]=o,e[h.uuid]=r,t[r]=h,t.pop();for(let t=0,e=s;t!==e;++t){const e=i[t],s=e[r],n=e[l];e[c]=s,e[r]=n,e.pop()}}else{const n=--a,r=t[n];e[r.uuid]=c,t[c]=r,t.pop();for(let t=0,e=s;t!==e;++t){const e=i[t];e[c]=e[n],e.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){const i=this._bindingsIndicesByPath;let s=i[t];const n=this._bindings;if(void 0!==s)return n[s];const a=this._paths,r=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,h=new Array(l);s=n.length,i[t]=s,a.push(t),r.push(e),n.push(h);for(let d=c,u=o.length;d!==u;++d){const i=o[d];h[d]=new Lf(i,t,e)}return h},unsubscribe_:function(t){const e=this._bindingsIndicesByPath,i=e[t];if(void 0!==i){const s=this._paths,n=this._parsedPaths,a=this._bindings,r=a.length-1,o=a[r],l=t[r];e[l]=i,a[i]=o,a.pop(),n[i]=n[r],n.pop(),s[i]=s[r],s.pop()}}});class Rf{constructor(t,e,i,s){this._mixer=t,this._clip=e,this._localRoot=i||null,this.blendMode=s||e.blendMode;const n=e.tracks,a=n.length,r=new Array(a),o={endingStart:Le,endingEnd:Le};for(let l=0;l!==a;++l){const t=n[l].createInterpolant(null);r[l]=t,t.settings=o}this._interpolantSettings=o,this._interpolants=r,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Me,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){const i=this._clip.duration,s=t._clip.duration,n=s/i,a=i/s;t.warp(1,n,e),this.warp(a,1,e)}return this}crossFadeTo(t,e,i){return t.crossFadeFrom(this,e,i)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){const s=this._mixer,n=s.time,a=this.timeScale;let r=this._timeScaleInterpolant;null===r&&(r=s._lendControlInterpolant(),this._timeScaleInterpolant=r);const o=r.parameterPositions,l=r.sampleValues;return o[0]=n,o[1]=n+i,l[0]=t/a,l[1]=e/a,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,i,s){if(!this.enabled)return void this._updateWeight(t);const n=this._startTime;if(null!==n){const s=(t-n)*i;if(s<0||0===i)return;this._startTime=null,e=i*s}e*=this._updateTimeScale(t);const a=this._updateTime(e),r=this._updateWeight(t);if(r>0){const t=this._interpolants,e=this._propertyBindings;switch(this.blendMode){case Ne:for(let i=0,s=t.length;i!==s;++i)t[i].evaluate(a),e[i].accumulateAdditive(r);break;case ze:default:for(let i=0,n=t.length;i!==n;++i)t[i].evaluate(a),e[i].accumulate(s,r)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const i=this._weightInterpolant;if(null!==i){const s=i.evaluate(t)[0];e*=s,t>i.parameterPositions[1]&&(this.stopFading(),0===s&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const i=this._timeScaleInterpolant;if(null!==i){const s=i.evaluate(t)[0];e*=s,t>i.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,i=this.loop;let s=this.time+t,n=this._loopCount;const a=i===Ie;if(0===t)return-1===n?s:a&&1===(1&n)?e-s:s;if(i===je){-1===n&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(s>=e)s=e;else{if(!(s<0)){this.time=s;break t}s=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===n&&(t>=0?(n=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),s>=e||s<0){const i=Math.floor(s/e);s-=e*i,n+=Math.abs(i);const r=this.repetitions-n;if(r<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=t>0?e:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===r){const e=t<0;this._setEndings(e,!e,a)}else this._setEndings(!1,!1,a);this._loopCount=n,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:i})}}else this.time=s;if(a&&1===(1&n))return e-s}return s}_setEndings(t,e,i){const s=this._interpolantSettings;i?(s.endingStart=Pe,s.endingEnd=Pe):(s.endingStart=t?this.zeroSlopeAtStart?Pe:Le:Re,s.endingEnd=e?this.zeroSlopeAtEnd?Pe:Le:Re)}_scheduleFading(t,e,i){const s=this._mixer,n=s.time;let a=this._weightInterpolant;null===a&&(a=s._lendControlInterpolant(),this._weightInterpolant=a);const r=a.parameterPositions,o=a.sampleValues;return r[0]=n,o[0]=e,r[1]=n+t,o[1]=i,this}}function zf(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}zf.prototype=Object.assign(Object.create(ai.prototype),{constructor:zf,_bindAction:function(t,e){const i=t._localRoot||this._root,s=t._clip.tracks,n=s.length,a=t._propertyBindings,r=t._interpolants,o=i.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let h=0;h!==n;++h){const t=s[h],n=t.name;let l=c[n];if(void 0!==l)a[h]=l;else{if(l=a[h],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,o,n));continue}const s=e&&e._propertyBindings[h].binding.parsedPath;l=new wf(Lf.create(i,n,s),t.ValueTypeName,t.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,o,n),a[h]=l}r[h].resultBuffer=l.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,i=t._clip.uuid,s=this._actionsByClip[i];this._bindAction(t,s&&s.knownActions[0]),this._addInactiveAction(t,i,e)}const e=t._propertyBindings;for(let t=0,i=e.length;t!==i;++t){const i=e[t];0===i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,i=e.length;t!==i;++t){const i=e[t];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,i){const s=this._actions,n=this._actionsByClip;let a=n[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,n[e]=a;else{const e=a.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=s.length,s.push(t),a.actionByRoot[i]=t},_removeInactiveAction:function(t){const e=this._actions,i=e[e.length-1],s=t._cacheIndex;i._cacheIndex=s,e[s]=i,e.pop(),t._cacheIndex=null;const n=t._clip.uuid,a=this._actionsByClip,r=a[n],o=r.knownActions,l=o[o.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),t._byClipCacheIndex=null;const h=r.actionByRoot,d=(t._localRoot||this._root).uuid;delete h[d],0===o.length&&delete a[n],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){const e=t._propertyBindings;for(let i=0,s=e.length;i!==s;++i){const t=e[i];0===--t.referenceCount&&this._removeInactiveBinding(t)}},_lendAction:function(t){const e=this._actions,i=t._cacheIndex,s=this._nActiveActions++,n=e[s];t._cacheIndex=s,e[s]=t,n._cacheIndex=i,e[i]=n},_takeBackAction:function(t){const e=this._actions,i=t._cacheIndex,s=--this._nActiveActions,n=e[s];t._cacheIndex=s,e[s]=t,n._cacheIndex=i,e[i]=n},_addInactiveBinding:function(t,e,i){const s=this._bindingsByRootAndName,n=this._bindings;let a=s[e];void 0===a&&(a={},s[e]=a),a[i]=t,t._cacheIndex=n.length,n.push(t)},_removeInactiveBinding:function(t){const e=this._bindings,i=t.binding,s=i.rootNode.uuid,n=i.path,a=this._bindingsByRootAndName,r=a[s],o=e[e.length-1],l=t._cacheIndex;o._cacheIndex=l,e[l]=o,e.pop(),delete r[n],0===Object.keys(r).length&&delete a[s]},_lendBinding:function(t){const e=this._bindings,i=t._cacheIndex,s=this._nActiveBindings++,n=e[s];t._cacheIndex=s,e[s]=t,n._cacheIndex=i,e[i]=n},_takeBackBinding:function(t){const e=this._bindings,i=t._cacheIndex,s=--this._nActiveBindings,n=e[s];t._cacheIndex=s,e[s]=t,n._cacheIndex=i,e[i]=n},_lendControlInterpolant:function(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let i=t[e];return void 0===i&&(i=new Lu(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=e,t[e]=i),i},_takeBackControlInterpolant:function(t){const e=this._controlInterpolants,i=t.__cacheIndex,s=--this._nActiveControlInterpolants,n=e[s];t.__cacheIndex=s,e[s]=t,n.__cacheIndex=i,e[i]=n},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,i){const s=e||this._root,n=s.uuid;let a="string"===typeof t?Vu.findByName(s,t):t;const r=null!==a?a.uuid:t,o=this._actionsByClip[r];let l=null;if(void 0===i&&(i=null!==a?a.blendMode:ze),void 0!==o){const t=o.actionByRoot[n];if(void 0!==t&&t.blendMode===i)return t;l=o.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new Rf(this,a,e,i);return this._bindAction(c,l),this._addInactiveAction(c,r,n),c},existingAction:function(t,e){const i=e||this._root,s=i.uuid,n="string"===typeof t?Vu.findByName(i,t):t,a=n?n.uuid:t,r=this._actionsByClip[a];return void 0!==r&&r.actionByRoot[s]||null},stopAllAction:function(){const t=this._actions,e=this._nActiveActions;for(let i=e-1;i>=0;--i)t[i].stop();return this},update:function(t){t*=this.timeScale;const e=this._actions,i=this._nActiveActions,s=this.time+=t,n=Math.sign(t),a=this._accuIndex^=1;for(let l=0;l!==i;++l){const i=e[l];i._update(s,t,n,a)}const r=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)r[l].apply(a);return this},setTime:function(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){const e=this._actions,i=t.uuid,s=this._actionsByClip,n=s[i];if(void 0!==n){const t=n.knownActions;for(let i=0,s=t.length;i!==s;++i){const s=t[i];this._deactivateAction(s);const n=s._cacheIndex,a=e[e.length-1];s._cacheIndex=null,s._byClipCacheIndex=null,a._cacheIndex=n,e[n]=a,e.pop(),this._removeInactiveBindingsForAction(s)}delete s[i]}},uncacheRoot:function(t){const e=t.uuid,i=this._actionsByClip;for(const a in i){const t=i[a].actionByRoot,s=t[e];void 0!==s&&(this._deactivateAction(s),this._removeInactiveAction(s))}const s=this._bindingsByRootAndName,n=s[e];if(void 0!==n)for(const a in n){const t=n[a];t.restoreOriginalState(),this._removeInactiveBinding(t)}},uncacheAction:function(t,e){const i=this.existingAction(t,e);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}});class Nf{constructor(t){"string"===typeof t&&(t=arguments[1]),this.value=t}clone(){return new Nf(void 0===this.value.clone?this.value:this.value.clone())}}function Bf(t,e,i){Zc.call(this,t,e),this.meshPerAttribute=i||1}function Ff(t,e,i,s,n){this.buffer=t,this.type=e,this.itemSize=i,this.elementSize=s,this.count=n,this.version=0}function $f(t,e,i,s){this.ray=new Wi(t,e),this.near=i||0,this.far=s||1/0,this.camera=null,this.layers=new ns,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return this.Points}}})}function Uf(t,e){return t.distance-e.distance}function Hf(t,e,i,s){if(t.layers.test(e.layers)&&t.raycast(e,i),!0===s){const s=t.children;for(let t=0,n=s.length;t<n;t++)Hf(s[t],e,i,!0)}}Bf.prototype=Object.assign(Object.create(Zc.prototype),{constructor:Bf,isInstancedInterleavedBuffer:!0,copy:function(t){return Zc.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){const e=Zc.prototype.clone.call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(t){const e=Zc.prototype.toJSON.call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}),Object.defineProperty(Ff.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Ff.prototype,{isGLBufferAttribute:!0,setBuffer:function(t){return this.buffer=t,this},setType:function(t,e){return this.type=t,this.elementSize=e,this},setItemSize:function(t){return this.itemSize=t,this},setCount:function(t){return this.count=t,this}}),Object.assign($f.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera&&(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e)},intersectObject:function(t,e,i){const s=i||[];return Hf(t,this,s,e),s.sort(Uf),s},intersectObjects:function(t,e,i){const s=i||[];if(!1===Array.isArray(t))return s;for(let n=0,a=t.length;n<a;n++)Hf(t[n],this,s,e);return s.sort(Uf),s}});class Vf{constructor(t=1,e=0,i=0){return this.radius=t,this.phi=e,this.theta=i,this}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}clone(){return(new this.constructor).copy(this)}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(li.clamp(e/this.radius,-1,1))),this}}const Gf=new ci;class Wf{constructor(t,e){Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==t?t:new ci(1/0,1/0),this.max=void 0!==e?e:new ci(-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=Gf.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return void 0===t&&(t=new ci),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(t=new ci),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return void 0===e&&(e=new ci),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return void 0===e&&(e=new ci),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){const e=Gf.copy(t).clamp(this.min,this.max);return e.sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Yf=new yi,qf=new yi;class Xf{constructor(t,e){this.start=void 0!==t?t:new yi,this.end=void 0!==e?e:new yi}set(t,e){return this.start.copy(t),this.end.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return void 0===t&&(t=new yi),t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return void 0===t&&(t=new yi),t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return void 0===e&&(e=new yi),this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){Yf.subVectors(t,this.start),qf.subVectors(this.end,this.start);const i=qf.dot(qf),s=qf.dot(Yf);let n=s/i;return e&&(n=li.clamp(n,0,1)),n}closestPointToPoint(t,e,i){const s=this.closestPointToPointParameter(t,e);return void 0===i&&(i=new yi),this.delta(i).multiplyScalar(s).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}function Qf(t){bs.call(this),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Qf.prototype=Object.create(bs.prototype),Qf.prototype.constructor=Qf,Qf.prototype.isImmediateRenderObject=!0;new yi;const Zf=new yi,Kf=new Yi,Jf=new Yi;class tm extends Nh{constructor(t){const e=em(t),i=new pn,s=[],n=[],a=new Fs(0,0,1),r=new Fs(0,1,0);for(let l=0;l<e.length;l++){const t=e[l];t.parent&&t.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),n.push(a.r,a.g,a.b),n.push(r.r,r.g,r.b))}i.setAttribute("position",new en(s,3)),i.setAttribute("color",new en(n,3));const o=new Mh({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,o),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,i=this.geometry,s=i.getAttribute("position");Jf.getInverse(this.root.matrixWorld);for(let n=0,a=0;n<e.length;n++){const t=e[n];t.parent&&t.parent.isBone&&(Kf.multiplyMatrices(Jf,t.matrixWorld),Zf.setFromMatrixPosition(Kf),s.setXYZ(a,Zf.x,Zf.y,Zf.z),Kf.multiplyMatrices(Jf,t.parent.matrixWorld),Zf.setFromMatrixPosition(Kf),s.setXYZ(a+1,Zf.x,Zf.y,Zf.z),a+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}function em(t){const e=[];t&&t.isBone&&e.push(t);for(let i=0;i<t.children.length;i++)e.push.apply(e,em(t.children[i]));return e}new yi,new Fs,new Fs;class im extends Nh{constructor(t,e,i,s){t=t||10,e=e||10,i=new Fs(void 0!==i?i:4473924),s=new Fs(void 0!==s?s:8947848);const n=e/2,a=t/e,r=t/2,o=[],l=[];for(let d=0,u=0,p=-r;d<=e;d++,p+=a){o.push(-r,0,p,r,0,p),o.push(p,0,-r,p,0,r);const t=d===n?i:s;t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3}const c=new pn;c.setAttribute("position",new en(o,3)),c.setAttribute("color",new en(l,3));const h=new Mh({vertexColors:!0,toneMapped:!1});super(c,h),this.type="GridHelper"}}new yi,new yi,new yi;new yi,new Yn;new wi;new yi;const sm=4,nm=8,am=(Math.pow(2,nm),[.125,.215,.35,.446,.526,.582]),rm=nm-sm+1+am.length,{_lodPlanes:om,_sizeLods:lm,_sigmas:cm}=(new Up,um());const hm=(1+Math.sqrt(5))/2,dm=1/hm;new yi(1,1,1),new yi(-1,1,1),new yi(1,1,-1),new yi(-1,1,-1),new yi(0,hm,dm),new yi(0,hm,-dm),new yi(dm,0,hm),new yi(-dm,0,hm),new yi(hm,dm,0),new yi(-hm,dm,0);function um(){const t=[],e=[],i=[];let s=nm;for(let n=0;n<rm;n++){const a=Math.pow(2,s);e.push(a);let r=1/a;n>nm-sm?r=am[n-nm+sm-1]:0==n&&(r=0),i.push(r);const o=1/(a-1),l=-o/2,c=1+o/2,h=[l,l,c,l,c,c,l,l,c,c,l,c],d=6,u=6,p=3,f=2,m=1,g=new Float32Array(p*u*d),v=new Float32Array(f*u*d),b=new Float32Array(m*u*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,i=t>2?0:-1,s=[e,i,0,e+2/3,i,0,e+2/3,i+1,0,e,i,0,e+2/3,i+1,0,e,i+1,0];g.set(s,p*u*t),v.set(h,f*u*t);const n=[t,t,t,t,t,t];b.set(n,m*u*t)}const y=new pn;y.setAttribute("position",new Ys(g,p)),y.setAttribute("uv",new Ys(v,f)),y.setAttribute("faceIndex",new Ys(b,m)),t.push(y),s>sm&&s--}return{_lodPlanes:t,_sizeLods:e,_sigmas:i}}function pm(t){pp.call(this,t),this.type="catmullrom",this.closed=!0}function fm(t){pp.call(this,t),this.type="catmullrom"}function mm(t){pp.call(this,t),this.type="catmullrom"}ap.create=function(t,e){return t.prototype=Object.create(ap.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Ep.prototype,{createPointsGeometry:function(t){const e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){const e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){const e=new Nn;for(let i=0,s=t.length;i<s;i++){const s=t[i];e.vertices.push(new yi(s.x,s.y,s.z||0))}return e}}),Object.assign(Dp.prototype,{fromPoints:function(t){return this.setFromPoints(t)}}),pm.prototype=Object.create(pp.prototype),fm.prototype=Object.create(pp.prototype),mm.prototype=Object.create(pp.prototype),Object.assign(mm.prototype,{initFromArray:function(){},getControlPointsArray:function(){},reparametrizeByArcLength:function(){}}),im.prototype.setColors=function(){},tm.prototype.update=function(){},Object.assign(Qu.prototype,{extractUrlBase:function(t){return Qp.extractUrlBase(t)}}),Qu.Handlers={add:function(){},get:function(){}},Object.assign(ef.prototype,{setTexturePath:function(t){return this.setResourcePath(t)}}),Object.assign(Wf.prototype,{center:function(t){return this.getCenter(t)},empty:function(){return this.isEmpty()},isIntersectionBox:function(t){return this.intersectsBox(t)},size:function(t){return this.getSize(t)}}),Object.assign(wi.prototype,{center:function(t){return this.getCenter(t)},empty:function(){return this.isEmpty()},isIntersectionBox:function(t){return this.intersectsBox(t)},isIntersectionSphere:function(t){return this.intersectsSphere(t)},size:function(t){return this.getSize(t)}}),Object.assign(Ni.prototype,{empty:function(){return this.isEmpty()}}),ia.prototype.setFromMatrix=function(t){return this.setFromProjectionMatrix(t)},Xf.prototype.center=function(t){return this.getCenter(t)},Object.assign(li,{random16:function(){return Math.random()},nearestPowerOfTwo:function(t){return li.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return li.ceilPowerOfTwo(t)}}),Object.assign(hi.prototype,{flattenToArrayOffset:function(t,e){return this.toArray(t,e)},multiplyVector3:function(t){return t.applyMatrix3(this)},multiplyVector3Array:function(){},applyToBufferAttribute:function(t){return t.applyMatrix3(this)},applyToVector3Array:function(){}}),Object.assign(Yi.prototype,{extractPosition:function(t){return this.copyPosition(t)},flattenToArrayOffset:function(t,e){return this.toArray(t,e)},getPosition:function(){return(new yi).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return this.makeRotationFromQuaternion(t)},multiplyToArray:function(){},multiplyVector3:function(t){return t.applyMatrix4(this)},multiplyVector4:function(t){return t.applyMatrix4(this)},multiplyVector3Array:function(){},rotateAxis:function(t){t.transformDirection(this)},crossVector:function(t){return t.applyMatrix4(this)},translate:function(){},rotateX:function(){},rotateY:function(){},rotateZ:function(){},rotateByAxis:function(){},applyToBufferAttribute:function(t){return t.applyMatrix4(this)},applyToVector3Array:function(){},makeFrustum:function(t,e,i,s,n,a){return this.makePerspective(t,e,s,i,n,a)}}),ws.prototype.isIntersectionLine=function(t){return this.intersectsLine(t)},bi.prototype.multiplyVector3=function(t){return t.applyQuaternion(this)},Object.assign(Wi.prototype,{isIntersectionBox:function(t){return this.intersectsBox(t)},isIntersectionPlane:function(t){return this.intersectsPlane(t)},isIntersectionSphere:function(t){return this.intersectsSphere(t)}}),Object.assign(Ds.prototype,{area:function(){return this.getArea()},barycoordFromPoint:function(t,e){return this.getBarycoord(t,e)},midpoint:function(t){return this.getMidpoint(t)},normal:function(t){return this.getNormal(t)},plane:function(t){return this.getPlane(t)}}),Object.assign(Ds,{barycoordFromPoint:function(t,e,i,s,n){return Ds.getBarycoord(t,e,i,s,n)},normal:function(t,e,i,s){return Ds.getNormal(t,e,i,s)}}),Object.assign(Lp.prototype,{extractAllPoints:function(t){return this.extractPoints(t)},extrude:function(t){return new Zd(this,t)},makeGeometry:function(t){return new cu(this,t)}}),Object.assign(ci.prototype,{fromAttribute:function(t,e,i){return this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return this.manhattanDistanceTo(t)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(yi.prototype,{setEulerFromRotationMatrix:function(){},setEulerFromQuaternion:function(){},getPositionFromMatrix:function(t){return this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return this.setFromMatrixColumn(e,t)},applyProjection:function(t){return this.applyMatrix4(t)},fromAttribute:function(t,e,i){return this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return this.manhattanDistanceTo(t)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(mi.prototype,{fromAttribute:function(t,e,i){return this.fromBufferAttribute(t,e,i)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(Nn.prototype,{computeTangents:function(){},computeLineDistances:function(){},applyMatrix:function(t){return this.applyMatrix4(t)}}),Object.assign(bs.prototype,{getChildByName:function(t){return this.getObjectByName(t)},renderDepth:function(){},translate:function(t,e){return this.translateOnAxis(e,t)},getWorldRotation:function(){},applyMatrix:function(t){return this.applyMatrix4(t)}}),Object.defineProperties(bs.prototype,{eulerOrder:{get:function(){return this.rotation.order},set:function(t){this.rotation.order=t}},useQuaternion:{get:function(){},set:function(){}}}),Object.assign(Tn.prototype,{setDrawMode:function(){}}),Object.defineProperties(Tn.prototype,{drawMode:{get:function(){return Be},set:function(){}}}),Object.defineProperties(bh.prototype,{objects:{get:function(){return this.levels}}}),Object.defineProperty(wh.prototype,"useVertexTexture",{get:function(){},set:function(){}}),yh.prototype.initBones=function(){},Object.defineProperty(ap.prototype,"__arcLengthDivisions",{get:function(){return this.arcLengthDivisions},set:function(t){this.arcLengthDivisions=t}}),qn.prototype.setLens=function(t,e){void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Pp.prototype,{onlyShadow:{set:function(){}},shadowCameraFov:{set:function(t){this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){}},shadowBias:{set:function(t){this.shadow.bias=t}},shadowDarkness:{set:function(){}},shadowMapWidth:{set:function(t){this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){this.shadow.mapSize.height=t}}}),Object.defineProperties(Ys.prototype,{length:{get:function(){return this.array.length}},dynamic:{get:function(){return this.usage===si},set:function(){this.setUsage(si)}}}),Object.assign(Ys.prototype,{setDynamic:function(t){return this.setUsage(!0===t?si:ii),this},copyIndicesArray:function(){},setArray:function(){}}),Object.assign(pn.prototype,{addIndex:function(t){this.setIndex(t)},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(this.setIndex(e),this):this.setAttribute(t,e):this.setAttribute(t,new Ys(arguments[1],arguments[2]))},addDrawCall:function(t,e,i){this.addGroup(t,e)},clearDrawCalls:function(){this.clearGroups()},computeTangents:function(){},computeOffsets:function(){},removeAttribute:function(t){return this.deleteAttribute(t)},applyMatrix:function(t){return this.applyMatrix4(t)}}),Object.defineProperties(pn.prototype,{drawcalls:{get:function(){return this.groups}},offsets:{get:function(){return this.groups}}}),Object.defineProperties(Zp.prototype,{maxInstancedCount:{get:function(){return this.instanceCount},set:function(t){this.instanceCount=t}}}),Object.defineProperties($f.prototype,{linePrecision:{get:function(){return this.params.Line.threshold},set:function(t){this.params.Line.threshold=t}}}),Object.defineProperties(Zc.prototype,{dynamic:{get:function(){return this.usage===si},set:function(t){this.setUsage(t)}}}),Object.assign(Zc.prototype,{setDynamic:function(t){return this.setUsage(!0===t?si:ii),this},setArray:function(){}}),Object.assign(Kd.prototype,{getArrays:function(){},addShapeList:function(){},addShape:function(){}}),Object.assign(Qc.prototype,{dispose:function(){}}),Object.defineProperties(Nf.prototype,{dynamic:{set:function(){}},onUpdate:{value:function(){return this}}}),Object.defineProperties(Hs.prototype,{wrapAround:{get:function(){},set:function(){}},overdraw:{get:function(){},set:function(){}},wrapRGB:{get:function(){return new Fs}},shading:{get:function(){},set:function(t){this.flatShading=t===m}},stencilMask:{get:function(){return this.stencilFuncMask},set:function(t){this.stencilFuncMask=t}}}),Object.defineProperties(ku.prototype,{metal:{get:function(){return!1},set:function(){}}}),Object.defineProperties(Cu.prototype,{transparency:{get:function(){return this.transmission},set:function(t){this.transmission=t}}}),Object.defineProperties(Wn.prototype,{derivatives:{get:function(){return this.extensions.derivatives},set:function(t){this.extensions.derivatives=t}}}),Object.assign(Wc.prototype,{clearTarget:function(t,e,i,s){this.setRenderTarget(t),this.clear(e,i,s)},animate:function(t){this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return this.getRenderTarget()},getMaxAnisotropy:function(){return this.capabilities.getMaxAnisotropy()},getPrecision:function(){return this.capabilities.precision},resetGLState:function(){return this.state.reset()},supportsFloatTextures:function(){return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){this.setScissorTest(t)},initMaterial:function(){},addPrePlugin:function(){},addPostPlugin:function(){},updateShadowMap:function(){},setFaceCulling:function(){},allocTextureUnit:function(){},setTexture:function(){},setTexture2D:function(){},setTextureCube:function(){},getActiveMipMapLevel:function(){return this.getActiveMipmapLevel()}}),Object.defineProperties(Wc.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){this.shadowMap.type=t}},shadowMapCullFace:{get:function(){},set:function(){}},context:{get:function(){return this.getContext()}},vr:{get:function(){return this.xr}},gammaInput:{get:function(){return!1},set:function(){}},gammaOutput:{get:function(){return!1},set:function(t){this.outputEncoding=!0===t?He:Ue}},toneMappingWhitePoint:{get:function(){return 1},set:function(){}}}),Object.defineProperties(zc.prototype,{cullFace:{get:function(){},set:function(){}},renderReverseSided:{get:function(){},set:function(){}},renderSingleSided:{get:function(){},set:function(){}}}),Object.defineProperties(gi.prototype,{wrapS:{get:function(){return this.texture.wrapS},set:function(t){this.texture.wrapS=t}},wrapT:{get:function(){return this.texture.wrapT},set:function(t){this.texture.wrapT=t}},magFilter:{get:function(){return this.texture.magFilter},set:function(t){this.texture.magFilter=t}},minFilter:{get:function(){return this.texture.minFilter},set:function(t){this.texture.minFilter=t}},anisotropy:{get:function(){return this.texture.anisotropy},set:function(t){this.texture.anisotropy=t}},offset:{get:function(){return this.texture.offset},set:function(t){this.texture.offset=t}},repeat:{get:function(){return this.texture.repeat},set:function(t){this.texture.repeat=t}},format:{get:function(){return this.texture.format},set:function(t){this.texture.format=t}},type:{get:function(){return this.texture.type},set:function(t){this.texture.type=t}},generateMipmaps:{get:function(){return this.texture.generateMipmaps},set:function(t){this.texture.generateMipmaps=t}}}),Object.defineProperties(_f.prototype,{load:{value:function(t){const e=this,i=new ff;return i.load(t,(function(t){e.setBuffer(t)})),this}},startTime:{set:function(){}}}),xf.prototype.getData=function(){return this.getFrequencyData()},Zn.prototype.updateCubeMap=function(t,e){return this.update(t,e)};ui.crossOrigin=void 0,ui.loadTexture=function(t,e,i,s){const n=new np;n.setCrossOrigin(this.crossOrigin);const a=n.load(t,i,void 0,s);return e&&(a.mapping=e),a},ui.loadTextureCube=function(t,e,i,s){const n=new ip;n.setCrossOrigin(this.crossOrigin);const a=n.load(t,i,void 0,s);return e&&(a.mapping=e),a},ui.loadCompressedTexture=function(){},ui.loadCompressedTextureCube=function(){};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:s}}))},"5ab7":function(t,e,i){const s=i("3e15"),n=t=>new Promise((e,i)=>{const s=new FileReader;s.onload=()=>{e(s.result)},s.onerror=({target:{error:{code:t}}})=>{i(Error("File could not be read! Code="+t))},s.readAsArrayBuffer(t)});t.exports=async t=>{let e=t;if("undefined"===typeof t)return new Uint8Array;if("string"===typeof t)if(/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(t))e=atob(t.split(",")[1]).split("").map(t=>t.charCodeAt(0));else{const i=await fetch(s(t));e=await i.arrayBuffer()}else(t instanceof File||t instanceof Blob)&&(e=await n(t));return new Uint8Array(e)}},"5abb":function(t,e,i){"use strict";var s=i("4c03"),n=i.n(s);n.a},"5bbb":function(t,e,i){t.exports=i("faa1").EventEmitter},"5bdb":function(t,e,i){},"5c17":function(t,e,i){},"5c54":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pl-12 mt-24 env-light"},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{class:"fo-14 tag-item "+(1===t.tagCurrent?"tag-item--active":""),on:{click:function(e){return t.changetag(1)}}},[t._v(" 颜色 ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],class:"fo-14 tag-item "+(0===t.tagCurrent?"tag-item--active":""),on:{click:function(e){return t.changetag(0)}}},[t._v(" 图片 ")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"slide mt-4",style:{left:4+64*t.tagCurrent+"px"}}),0===t.tagCurrent?s("a-popover",{attrs:{trigger:"click",placement:"bottomRight",overlayClassName:"render-bg-item-pop"}},[s("template",{slot:"content"},[s("scrollbar",{attrs:{maxHeight:258},on:{reachBottom:function(e){return t.getList(!0)}}},[s("div",{staticClass:"flex flex-start flex-wrap"},t._l(t.list,(function(e,i){return s("div",{key:i,staticClass:"light-item mr-8",style:{backgroundImage:"url("+t.thumbImg(e.params.display_img,104,78,90)+")",height:"78px"},on:{click:function(i){return t.chooseHdr(e)}}})})),0),t.list.length>0&&t.list.length>=t.count?s("div",{staticClass:"mt-12 fo-12 fo-gray text-center"},[t._v(" 没有更多了 ")]):t._e(),0===t.list.length?s("div",{staticClass:"text-center mt-40"},[s("img",{attrs:{src:i("e597"),width:"155px"}}),s("div",{staticClass:"fo-12 fo-gray mt-16"},[t._v("暂无环境图哦~")])]):t._e()])],1),s("div",{staticClass:"mt-16"},[s("div",{staticClass:"bg-picker pointer",style:{backgroundImage:"url("+t.showEnvImg+")"}}),s("div",{staticClass:"bg-content flex flex-end item-center"},[s("div",{staticClass:"flex flex-end item-center pointer"},[s("div",{staticClass:"fo-12"},[t._v("替换")]),s("a-icon",{staticClass:"fo-10 ml-4",style:{transform:"scale(0.8,0.8)"},attrs:{type:"down"}})],1)])])],2):s("div",{staticClass:"mt-16 env-light-color"},[s("pallet",{attrs:{value:t.envColor,title:"环境光颜色",historyColors:[],showPrint:!1,showTakeColor:!1,showOpacity:!1,placement:"bottomRight"},on:{confirm:t.colorConfirmLight}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tagCurrent,expression:"tagCurrent === 1"}],staticStyle:{width:"216px"}},[s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"fo-12 pfow "},[t._v("亮度")]),s("div",{staticClass:"light-render-input"},[s("input",{staticClass:"light-render-input",domProps:{value:t.lightPowerValue+t.lightPowerUnit},on:{focus:function(e){t.lightPowerUnit="",e.target.select()},blur:t.lightPowerInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.lightPowerInput(e)}}})])]),s("a-slider",{staticStyle:{"margin-top":"5px"},attrs:{max:200,min:0,step:1,"tip-formatter":function(t){return t+"%"}},on:{change:t.lightPowerChange,afterChange:function(e){return t.$emit("attch-history")}},model:{value:t.lightPowerValue,callback:function(e){t.lightPowerValue=e},expression:"lightPowerValue"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tagCurrent,expression:"tagCurrent === 0"}],staticStyle:{width:"216px"}},[s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"fo-12 pfow "},[t._v("亮度")]),s("div",{staticClass:"light-render-input"},[s("input",{staticClass:"light-render-input",domProps:{value:t.envPowerValue+t.envPowerUnit},on:{focus:function(e){t.envPowerUnit="",e.target.select()},blur:t.envPowerInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.envPowerInput(e)}}})])]),s("a-slider",{staticStyle:{"margin-top":"5px"},attrs:{max:200,min:0,step:1,"tip-formatter":function(t){return t+"%"}},on:{change:t.envPowerChange,afterChange:function(e){return t.$emit("attch-history")}},model:{value:t.envPowerValue,callback:function(e){t.envPowerValue=e},expression:"envPowerValue"}})],1)],1)},n=[],a=(i("841c"),i("7018")),r=i("6116"),o=(i("cac7"),i("365c")),l={components:{Pallet:a["a"]},data(){return{tagCurrent:1,envColor:"rgba(248,248,248,1)",lightPowerValue:70,envPowerValue:60,lightPowerUnit:"%",envPowerUnit:"%",envUrl:"",showEnvImg:"",list:[],count:0,query:{current:1,pageSize:10,is_show:1,type:"shine"}}},mounted(){this.$bus.$on("initEnvLight",t=>{this.tagCurrent="hdr"===t.type?0:1,this.lightPowerValue=parseInt(100*("number"===typeof t.intensity?t.intensity:.6)),this.envPowerValue=parseInt(100*("number"===typeof t.envLightIntensity?t.envLightIntensity:.6)),this.envColor=t.color||"rgba(248,248,248,1)",t.envUrl?(this.envUrl=t.envUrl||"",this.search()):this.list.length}),this.getList(!1)},methods:{thumbImg:r["C"],search(){Object(o["getRenderBg"])({current:1,pageSize:10,type:"shine",path:this.envUrl}).then(t=>{200===t.code&&t.data.length>=1&&(this.showEnvImg=t.data[0].params.display_img)})},chooseHdr(t,e=!0){this.envUrl=t.path,this.showEnvImg=t.params.display_img,e&&(this.envPowerValue=parseInt(100*t.params.light)),this.emitChange()},getList(t){this.count>0&&this.count<=this.list.length||(t?this.query.currentPage+=1:this.query.currentPage=1,Object(o["getRenderBg"])(this.query).then(e=>{200===e.code&&(this.list=t?this.list.concat(e.data):e.data,!this.envUrl&&this.list>0&&this.emitChange(this.list[0]),this.count=e.total)}))},changetag(t){this.tagCurrent!==t&&(this.tagCurrent=t,0===this.tagCurrent&&!this.envUrl&&this.list.length>0&&this.chooseHdr(this.list[0],!1))},colorConfirmLight(t){this.envColor=t.rgba,this.emitChange()},clearNoNum:r["c"],lightPowerInput(t){"blur"===t.type&&(this.lightPowerUnit="%");let e=0;t.target.value&&(e=parseFloat(this.clearNoNum(t.target.value))),e>100&&(e=100),e<0&&(e=0),this.lightPowerValue!=e&&(this.lightPowerValue=e,this.emitChange())},lightPowerChange(t){this.lightPowerValue=t,this.emitChange()},envPowerInput(t){"blur"===t.type&&(this.envPowerUnit="%");let e=0;t.target.value&&(e=parseFloat(this.clearNoNum(t.target.value))),e>100&&(e=100),e<0&&(e=0),this.envPowerValue!=e&&(this.envPowerValue=e,this.emitChange())},envPowerChange(t){this.envPowerValue=t,this.emitChange()},emitChange(){this.$bus.$emit("envLightChange",{envLightIntensity:this.envPowerValue/100,envUrl:this.envUrl,color:this.envColor,intensity:this.lightPowerValue/100})}}},c=l,h=(i("01b2"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,null,null);e["default"]=d.exports},"5c7a":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pl-12 mt-24 env-light"},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{class:"fo-14 tag-item "+(1===t.tagCurrent?"tag-item--active":""),on:{click:function(e){return t.changetag(1)}}},[t._v(" 颜色 ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],class:"fo-14 tag-item "+(0===t.tagCurrent?"tag-item--active":""),on:{click:function(e){return t.changetag(0)}}},[t._v(" 图片 ")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"slide mt-4",style:{left:4+64*t.tagCurrent+"px"}}),0===t.tagCurrent?s("a-popover",{attrs:{trigger:"click",placement:"bottomRight",overlayClassName:"render-bg-item-pop"}},[s("template",{slot:"content"},[s("scrollbar",{attrs:{maxHeight:258},on:{reachBottom:function(e){return t.getList(!0)}}},[s("div",{staticClass:"flex flex-start flex-wrap"},t._l(t.list,(function(e,i){return s("div",{key:i,staticClass:"light-item mr-8",style:{backgroundImage:"url("+t.thumbImg(e.params.display_img,104,78,90)+")",height:"78px"},on:{click:function(i){return t.chooseHdr(e)}}})})),0),t.list.length>0&&t.list.length>=t.count?s("div",{staticClass:"mt-12 fo-12 fo-gray text-center"},[t._v(" 没有更多了 ")]):t._e(),0===t.list.length?s("div",{staticClass:"text-center mt-40"},[s("img",{attrs:{src:i("e597"),width:"155px"}}),s("div",{staticClass:"fo-12 fo-gray mt-16"},[t._v("暂无环境图哦~")])]):t._e()])],1),s("div",{staticClass:"mt-16"},[s("div",{staticClass:"bg-picker pointer",style:{backgroundImage:"url("+t.showEnvImg+")"}}),s("div",{staticClass:"bg-content flex flex-end item-center"},[s("div",{staticClass:"flex flex-end item-center pointer"},[s("div",{staticClass:"fo-12"},[t._v("替换")]),s("a-icon",{staticClass:"fo-10 ml-4",style:{transform:"scale(0.8,0.8)"},attrs:{type:"down"}})],1)])])],2):s("div",{staticClass:"mt-16 env-light-color"},[s("pallet",{attrs:{value:t.envColor,title:"环境光颜色",historyColors:[],showPrint:!1,showTakeColor:!1,showOpacity:!1,placement:"bottomRight"},on:{confirm:t.colorConfirmLight}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tagCurrent,expression:"tagCurrent === 1"}],staticStyle:{width:"216px"}},[s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"fo-12 pfow "},[t._v("亮度")]),s("div",{staticClass:"light-render-input"},[s("input",{staticClass:"light-render-input",domProps:{value:t.lightPowerValue+t.lightPowerUnit},on:{focus:function(e){t.lightPowerUnit="",e.target.select()},blur:t.lightPowerInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.lightPowerInput(e)}}})])]),s("a-slider",{staticStyle:{"margin-top":"5px"},attrs:{max:200,min:0,step:1,"tip-formatter":function(t){return t+"%"}},on:{change:t.lightPowerChange,afterChange:function(e){return t.$emit("attch-history")}},model:{value:t.lightPowerValue,callback:function(e){t.lightPowerValue=e},expression:"lightPowerValue"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tagCurrent,expression:"tagCurrent === 0"}],staticStyle:{width:"216px"}},[s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"fo-12 pfow "},[t._v("亮度")]),s("div",{staticClass:"light-render-input"},[s("input",{staticClass:"light-render-input",domProps:{value:t.envPowerValue+t.envPowerUnit},on:{focus:function(e){t.envPowerUnit="",e.target.select()},blur:t.envPowerInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.envPowerInput(e)}}})])]),s("a-slider",{staticStyle:{"margin-top":"5px"},attrs:{max:200,min:0,step:1,"tip-formatter":function(t){return t+"%"}},on:{change:t.envPowerChange,afterChange:function(e){return t.$emit("attch-history")}},model:{value:t.envPowerValue,callback:function(e){t.envPowerValue=e},expression:"envPowerValue"}})],1)],1)},n=[],a=(i("841c"),i("7018")),r=i("6116"),o=(i("cac7"),i("365c")),l={components:{Pallet:a["a"]},data(){return{tagCurrent:1,envColor:"rgba(248,248,248,1)",lightPowerValue:70,envPowerValue:60,lightPowerUnit:"%",envPowerUnit:"%",envUrl:"",showEnvImg:"",list:[],count:0,query:{current:1,pageSize:10,is_show:1,type:"shine"}}},mounted(){this.$bus.$on("initEnvLight",t=>{this.tagCurrent="hdr"===t.type?0:1,this.lightPowerValue=parseInt(100*("number"===typeof t.intensity?t.intensity:.6)),this.envPowerValue=parseInt(100*("number"===typeof t.envLightIntensity?t.envLightIntensity:.6)),this.envColor=t.color||"rgba(248,248,248,1)",t.envUrl?(this.envUrl=t.envUrl||"",this.search()):this.list.length}),this.getList(!1)},methods:{thumbImg:r["C"],search(){Object(o["getRenderBg"])({current:1,pageSize:10,type:"shine",path:this.envUrl}).then(t=>{200===t.code&&t.data.length>=1&&(this.showEnvImg=t.data[0].params.display_img)})},chooseHdr(t,e=!0){this.envUrl=t.path,this.showEnvImg=t.params.display_img,e&&(this.envPowerValue=parseInt(100*t.params.light)),this.emitChange()},getList(t){this.count>0&&this.count<=this.list.length||(t?this.query.currentPage+=1:this.query.currentPage=1,Object(o["getRenderBg"])(this.query).then(e=>{200===e.code&&(this.list=t?this.list.concat(e.data):e.data,!this.envUrl&&this.list>0&&this.emitChange(this.list[0]),this.count=e.total)}))},changetag(t){this.tagCurrent!==t&&(this.tagCurrent=t,0===this.tagCurrent&&!this.envUrl&&this.list.length>0&&this.chooseHdr(this.list[0],!1))},colorConfirmLight(t){this.envColor=t.rgba,this.emitChange()},clearNoNum:r["c"],lightPowerInput(t){"blur"===t.type&&(this.lightPowerUnit="%");let e=0;t.target.value&&(e=parseFloat(this.clearNoNum(t.target.value))),e>100&&(e=100),e<0&&(e=0),this.lightPowerValue!=e&&(this.lightPowerValue=e,this.emitChange())},lightPowerChange(t){this.lightPowerValue=t,this.emitChange()},envPowerInput(t){"blur"===t.type&&(this.envPowerUnit="%");let e=0;t.target.value&&(e=parseFloat(this.clearNoNum(t.target.value))),e>100&&(e=100),e<0&&(e=0),this.envPowerValue!=e&&(this.envPowerValue=e,this.emitChange())},envPowerChange(t){this.envPowerValue=t,this.emitChange()},emitChange(){this.$bus.$emit("envLightChange",{envLightIntensity:this.envPowerValue/100,envUrl:this.envUrl,color:this.envColor,intensity:this.lightPowerValue/100})}}},c=l,h=(i("ad0c"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,null,null);e["default"]=d.exports},"5ce5":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap"},[t._l(t.highlines,(function(e,s){return[i("div",{key:s,staticClass:"absolute highline",style:{left:e.x*t.scale+"mm",top:e.y*t.scale+"mm",width:0==e.width?"1px":e.width*t.scale+"mm",height:0==e.height?"1px":e.height*t.scale+"mm",transform:"scale(1,"+(t.scale>1?1/t.scale:1)+") translate(-0.5px,-0.5px)"}})]}))],2)},n=[],a=i("5530"),r=i("5880"),o={computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor",["highlines"])),Object(r["mapState"])(["scale"])),data(){return{}}},l=o,c=(i("8626"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,"7fabcfc8",null);e["default"]=h.exports},"5cef":function(t,e,i){},"5d22":function(t,e,i){t.exports=i.p+"editor-assets/img/cross-tab-paste.fdb7117f.gif"},"5d2b":function(t,e,i){},"5d89":function(t,e,i){},"5dad":function(t,e,i){t.exports=i.p+"editor-assets/img/lz.24e07531.svg"},"5e68":function(t,e,i){var s=i("6d8b"),n=i("2cf4c"),a=n.devicePixelRatio,r=i("2b61"),o=i("dc2f");function l(){return!1}function c(t,e,i){var n=s.createCanvas(),a=e.getWidth(),r=e.getHeight(),o=n.style;return o&&(o.position="absolute",o.left=0,o.top=0,o.width=a+"px",o.height=r+"px",n.setAttribute("data-zr-dom-id",t)),n.width=a*i,n.height=r*i,n}var h=function(t,e,i){var n;i=i||a,"string"===typeof t?n=c(t,e,i):s.isObject(t)&&(n=t,t=n.id),this.id=t,this.dom=n;var r=n.style;r&&(n.onselectstart=l,r["-webkit-user-select"]="none",r["user-select"]="none",r["-webkit-touch-callout"]="none",r["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",r["padding"]=0,r["margin"]=0,r["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=i};h.prototype={constructor:h,__dirty:!0,__used:!1,__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var t=this.dpr;this.domBack=c("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},resize:function(t,e){var i=this.dpr,s=this.dom,n=s.style,a=this.domBack;n&&(n.width=t+"px",n.height=e+"px"),s.width=t*i,s.height=e*i,a&&(a.width=t*i,a.height=e*i,1!==i&&this.ctxBack.scale(i,i))},clear:function(t,e){var i,s=this.dom,n=this.ctx,a=s.width,l=s.height,c=(e=e||this.clearColor,this.motionBlur&&!t),h=this.lastFrameAlpha,d=this.dpr;(c&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(s,0,0,a/d,l/d)),n.clearRect(0,0,a,l),e&&"transparent"!==e)&&(e.colorStops?(i=e.__canvasGradient||r.getGradient(n,e,{x:0,y:0,width:a,height:l}),e.__canvasGradient=i):e.image&&(i=o.prototype.getCanvasPattern.call(e,n)),n.save(),n.fillStyle=i||e,n.fillRect(0,0,a,l),n.restore());if(c){var u=this.domBack;n.save(),n.globalAlpha=h,n.drawImage(u,0,0,a,l),n.restore()}}};var d=h;t.exports=d},"5e76":function(t,e,i){var s=i("d51b"),n=new s(50);function a(t){if("string"===typeof t){var e=n.get(t);return e&&e.image}return t}function r(t,e,i,s,a){if(t){if("string"===typeof t){if(e&&e.__zrImageSrc===t||!i)return e;var r=n.get(t),c={hostEl:i,cb:s,cbPayload:a};return r?(e=r.image,!l(e)&&r.pending.push(c)):(e=new Image,e.onload=e.onerror=o,n.put(t,e.__cachedImgObj={image:e,pending:[c]}),e.src=e.__zrImageSrc=t),e}return t}return e}function o(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var i=t.pending[e],s=i.cb;s&&s(this,i.cbPayload),i.hostEl.dirty()}t.pending.length=0}function l(t){return t&&t.width&&t.height}e.findExistImage=a,e.createOrUpdateImage=r,e.isImageReady=l},"5e9b":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isPro?t._e():i("div",{staticClass:"devcanvas-btn",class:[{active:t.showDevCanvas}],on:{click:t.onSwitch}},[t._v(" 调试 ")])},n=[],a={data(){return{showDevCanvas:!1}},computed:{isPro(){return!0}},mounted(){const t=localStorage.getItem("showDevCanvas");this.showDevCanvas=!("1"!==t),setTimeout(()=>{this.setCanvasVisible(this.showDevCanvas)},2e3)},methods:{onSwitch(){this.showDevCanvas=!this.showDevCanvas},setCanvasVisible(t){const e=document.querySelectorAll(".J_dev_canvas");for(let i=0;i<e.length;i++)e[i].style.display=t?"block":"none"}},watch:{showDevCanvas(t){localStorage.setItem("showDevCanvas",t?"1":"0"),this.setCanvasVisible(t)}}},r=a,o=(i("04b4"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"3e175956",null);e["default"]=l.exports},"5e9f":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"a",(function(){return a}));i("ddb0");var s=i("ade3");function n(t,e,i){1===arguments.length&&(e=t.g,i=t.b,t=t.r);var s,n=Math.max(t,e,i),a=Math.min(t,e,i),r=n-a,o=0===n?0:r/n,l=n/255;switch(n){case a:s=0;break;case t:s=e-i+r*(e<i?6:0),s/=6*r;break;case e:s=i-t+2*r,s/=6*r;break;case i:s=t-e+4*r,s/=6*r;break}return{h:s,s:o,v:l}}class a{static compare(t,e){const i=this.record.get(t);return this.record.set(t,e),!i||i.reduce((t,i,s)=>t&&i===e[s],!0)}static clear(){this.record=new Map}}Object(s["a"])(a,"record",new Map)},"5eb5":function(t,e,i){},"5f99":function(t,e,i){},"5ff5":function(t,e,i){"use strict";var s=i("8160"),n=i.n(s);n.a},"607d":function(t,e,i){var s=i("1fab");e.Dispatcher=s;var n=i("22d1"),a=i("65ed"),r=a.isCanvasEl,o=a.transformCoordWithViewport,l="undefined"!==typeof window&&!!window.addEventListener,c=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,h=[];function d(t,e,i,s){return i=i||{},s||!n.canvasSupported?u(t,e,i):n.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(i.zrX=e.layerX,i.zrY=e.layerY):null!=e.offsetX?(i.zrX=e.offsetX,i.zrY=e.offsetY):u(t,e,i),i}function u(t,e,i){if(n.domSupported&&t.getBoundingClientRect){var s=e.clientX,a=e.clientY;if(r(t)){var l=t.getBoundingClientRect();return i.zrX=s-l.left,void(i.zrY=a-l.top)}if(o(h,t,s,a))return i.zrX=h[0],void(i.zrY=h[1])}i.zrX=i.zrY=0}function p(t){return t||window.event}function f(t,e,i){if(e=p(e),null!=e.zrX)return e;var s=e.type,n=s&&s.indexOf("touch")>=0;if(n){var a="touchend"!==s?e.targetTouches[0]:e.changedTouches[0];a&&d(t,a,e,i)}else d(t,e,e,i),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;var r=e.button;return null==e.which&&void 0!==r&&c.test(e.type)&&(e.which=1&r?1:2&r?3:4&r?2:0),e}function m(t,e,i,s){l?t.addEventListener(e,i,s):t.attachEvent("on"+e,i)}function g(t,e,i,s){l?t.removeEventListener(e,i,s):t.detachEvent("on"+e,i)}var v=l?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};function b(t){return 2===t.which||3===t.which}function y(t){return t.which>1}e.clientToLocal=d,e.getNativeEvent=p,e.normalizeEvent=f,e.addEventListener=m,e.removeEventListener=g,e.stop=v,e.isMiddleOrRightButtonOnMouseUpDown=b,e.notLeftMouse=y},"60b0":function(t,e,i){"use strict";var s=i("d10b"),n=i.n(s);n.a},"60bd":function(t,e,i){"use strict";var s=i("5373"),n=i.n(s);n.a},6118:function(t,e,i){"use strict";var s=i("66a8"),n=i.n(s);n.a},6126:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"editor-menu"},[i("ul",{class:["editor-menus",t.active?"menu-active":""]},t._l(t.menu,(function(e,s){return i("li",{key:s,class:"editor-menu__item "+(s===t.left_side_cur_menu_index&&"active")+" "+(t.hover===s&&"hover-active"),on:{mousemove:function(e){t.hover=s},mouseleave:function(e){t.hover=-1},click:function(i){return t.onMenuClick(e,s)}}},[i("img",{attrs:{src:s===t.left_side_cur_menu_index?e.icondef:e.icon}}),i("div",{class:[s===t.left_side_cur_menu_index?"fo-theme":"","text-center mt-4"]},[t._v(" "+t._s(e.title)+" ")])])})),0),t.isCompanyDomain?i("avatar-for-enterprise"):t._e(),t.isCompanyDomain?t._e():i("avatar-for-www"),i("help")],1)},n=[],a=(i("ddb0"),i("5530")),r=i("bd16"),o=i("b74a"),l=i("717d"),c=i("5880"),h={components:{avatarForWww:r["default"],avatarForEnterprise:o["default"],help:l["default"]},props:{current:{type:Number,default:0}},data(){return{lampColor:"#888CA2",active:!1,visible:!1,hover:-1,showShortcut:!1}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(c["mapState"])("profile",["accessToken"])),Object(c["mapGetters"])("profile",["isVip"])),Object(c["mapState"])("enterprise",["isCompanyDomain","enterprise_info"])),Object(c["mapState"])("editor-v2",["left_side_cur_menu_index"])),{},{menu(){const t=[{code:"material",title:"素材",icon:i("0cee"),icondef:i("3497"),needLogin:!0},{code:"font",title:"文字",icon:i("32ad"),icondef:i("5670"),needLogin:!0},{icon:i("8aeb"),icondef:i("2f01"),title:"背景",code:"background",needLogin:!0},{code:"tool",title:"工具",icon:i("4343"),icondef:i("500c"),needLogin:!0},{code:"upload",title:"上传",icon:i("acc7"),icondef:i("1409"),needLogin:!0}];return this.isCompanyDomain?[...t,{code:"enterprise",title:"企业",icon:i("92ff"),icondef:i("a083"),needLogin:!0}]:[{code:"template",title:"模板",icon:i("6656"),icondef:i("9c9d"),needLogin:!1},...t]}}),mounted(){this.autoSelectMenu(this.isCompanyDomain)},beforeDestroy(){this.noTalk()},methods:Object(a["a"])(Object(a["a"])({},Object(c["mapActions"])("service",["shallWeTalk","noTalk"])),{},{autoSelectMenu(t){t?this.$store.commit("editor-v2/set_left_side_cur_menu_index",0):this.$route.query.id||this.$route.query.workOuterId?this.$store.commit("editor-v2/set_left_side_cur_menu_index",1):this.$store.commit("editor-v2/set_left_side_cur_menu_index",0)},showLoginDialog(){this.$store.commit("profile/SET_SHOW_LOGIN_MODAL",!0)},onAvatarVisibleChange(t){this.accessToken||(this.showAvatarPopover=!1,this.showLoginDialog())},onMenuClick(t,e){!t.needLogin||this.accessToken?this.left_side_cur_menu_index===e?(this.$store.commit("editor-v2/set_left_side_show",!1),this.$store.commit("editor-v2/set_left_side_cur_menu_index",-1)):(this.$store.commit("editor-v2/set_left_side_show",!0),this.$store.commit("editor-v2/set_left_side_cur_menu_index",e)):this.showLoginDialog()},navgateTo(t){window.open(t,"_blank")}}),watch:{isCompanyDomain(t){this.autoSelectMenu(t)},visible(t){t&&this.$nextTick(()=>{this.shallWeTalk()})}}},d=h,u=(i("7d6b"),i("2877")),p=Object(u["a"])(d,s,n,!1,null,"455ad8f8",null);e["default"]=p.exports},6168:function(t,e,i){"use strict";var s=i("8561"),n=i.n(s);n.a},"61ab":function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"a",(function(){return n}));const s=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n={cellWidth:100,cellHeight:30,row:30,span:26}},6206:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.project_data?i("div",{ref:"mainContainerRef",staticClass:"element-image-wrap",style:{width:t.data.style.width+"mm",height:t.data.style.height+"mm"},on:{mousedown:function(e){return t.$emit("mousedown",e)}}},[t.isSvg?t._e():i("img",{ref:"imgRef",class:["imageNode_"+t.data.uuid,"avoid-clicks"],style:{position:"absolute",left:(t.data.bg?t.data.bg.x:0)+"mm",top:(t.data.bg?t.data.bg.y:0)+"mm",width:(t.data.bg?t.data.bg.width:t.data.style.width)+"mm",height:(t.data.bg?t.data.bg.height:t.data.style.height)+"mm",display:"block",opacity:[void 0,"",null].includes(t.data.style.opacity)?1:t.data.style.opacity/100},attrs:{src:t.data.src,"data-src":t.data.src},on:{load:t.recordImageSize}})]):t._e()},n=[],a=(i("5319"),i("1276"),i("ddb0"),i("5530")),r=i("821e"),o=i("cebe"),l=i.n(o),c=i("5880"),h=i("60bb"),d=i.n(h);const u=5;var p={props:{value:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})},transform:{type:String,default:""}},data(){return{xml:null,svg:null}},mounted(){this.loadImage().then(t=>{if(this.$emit("loaded"),this.isSvg){let e=t.data.replace(/="&lt;[^"]+&gt;"/g,'=""');e=e.replace(/data-name="[^"]*(\s)[^"]*"/g,'data-name=""'),this.xml=e;const i=new DOMParser;this.svg=i.parseFromString(this.xml,"image/svg+xml").children[0];const s="imageNode_"+this.data.uuid;this.svg.classList.add(s),this.setSVGAttribute(),this.$refs.mainContainerRef&&this.$refs.mainContainerRef.appendChild(this.svg)}this.refresh()},t=>{this.$emit("loaded")})},computed:Object(a["a"])(Object(a["a"])({},Object(c["mapState"])("editor-v2",["scale","project_data","element_craft_list"])),{},{isInside(){return!this.is_outside},crafts(){return this.element_craft_list},isSvg(){return this.data.src.indexOf(".svg")>-1}}),methods:{setSVGAttribute(){this.svg.style.width="100%",this.svg.style.height="100%",this.svg.setAttribute("preserveAspectRatio","none"),this.svg.style.display="block";const t=this.svg.getAttribute("viewBox");if(t){const i=t.split(" ");if(4===i.length)try{const t=i[2]-i[0],e=i[3]-i[1];this.svg.getAttribute("width")||this.svg.setAttribute("width",t),this.svg.getAttribute("height")||this.svg.setAttribute("height",e)}catch(e){}}if(!this.svg.getAttribute("viewBox")){const t=this.svg.getAttribute("width"),e=this.svg.getAttribute("height");this.svg.setAttribute("viewBox",`0 0 ${t} ${e}`)}},loadImage(){return l.a.get(this.data.src)},refresh(){this.isSvg&&this.$nextTick(()=>{this.redrawSvg(),this.$store.commit("increaseCanvasVersion",this.isInside)})},redrawSvg(){if(!this.svg)return;this.setSVGAttribute(),this.svg.style.backgroundColor=this.data.style.backgroundColor||null,this.svg.style.opacity=[null,void 0,""].includes(this.data.style.opacity)?1:this.data.style.opacity/100;let t=[];t=r["a"].filterSvg(this.svg,this.data,this.crafts),r["a"].defsPattern(this.svg,this.data);let e=null;if(this.data.style.craft)for(const i of this.crafts)this.data.style.craft===i.id&&"specular"===i.type&&(e=i.color);r["a"].drawColor(t,this.svg,e),this.data.fills||this.updateDesignFills(t),this.$store.commit("increaseCanvasVersion",this.isInside)},updateDesignFills(t){let e=this.project_data.inside_design_data;for(const i in e)if(e[i].uuid===this.data.uuid){if(t.length>u){this.$set(e[i],"can_set_color",0);break}this.$set(e[i],"fills",t);break}e=this.project_data.design_data;for(const i in e)if(e[i].uuid===this.data.uuid){if(t.length>u){this.$set(e[i],"can_set_color",0);break}this.$set(e[i],"fills",t);break}},recordImageSize(t){this.$store.commit("editor-v2/insert_image_design_size_map_item",{uuid:this.data.uuid,width:t.target.naturalWidth,height:t.target.naturalHeight})},debounceRedrawSvg:d.a.debounce(t=>{t.redrawSvg()},10)},watch:{"data.fills":{handler(t,e){this.debounceRedrawSvg(this)},deep:!0},"data.style.opacity":{handler(){this.debounceRedrawSvg(this)},deep:!0}}},f=p,m=(i("df40"),i("2877")),g=Object(m["a"])(f,s,n,!1,null,"b9d83468",null);e["default"]=g.exports},"620b":function(t,e,i){var s=i("401b"),n=s.distance;function a(t,e,i,s,n,a,r){var o=.5*(i-t),l=.5*(s-e);return(2*(e-i)+o+l)*r+(-3*(e-i)-2*o-l)*a+o*n+e}function r(t,e){for(var i=t.length,s=[],r=0,o=1;o<i;o++)r+=n(t[o-1],t[o]);var l=r/2;l=l<i?i:l;for(o=0;o<l;o++){var c,h,d,u=o/(l-1)*(e?i:i-1),p=Math.floor(u),f=u-p,m=t[p%i];e?(c=t[(p-1+i)%i],h=t[(p+1)%i],d=t[(p+2)%i]):(c=t[0===p?p:p-1],h=t[p>i-2?i-1:p+1],d=t[p>i-3?i-1:p+2]);var g=f*f,v=f*g;s.push([a(c[0],m[0],h[0],d[0],f,g,v),a(c[1],m[1],h[1],d[1],f,g,v)])}return s}t.exports=r},6218:function(t,e,i){"use strict";var s=i("b6e5"),n=i.n(s);n.a},6232:function(t,e,i){},"627d":function(t,e,i){"use strict";var s=i("ec44"),n=i.n(s);n.a},"62c5":function(t,e,i){"use strict";var s=i("ff84"),n=_(s),a=i("fd7c"),r=_(a),o=i("a2b0"),l=_(o),c=i("79f1"),h=_(c),d=i("b1d8"),u=_(d),p=i("5261"),f=_(p),m=i("bd8a"),g=_(m),v=i("dca2"),b=i("ca32"),y=_(b);function _(t){return t&&t.__esModule?t:{default:t}}var x=function(){},w=function(t,e,i){var s=new x;if("undefined"===typeof t)throw Error("No element to render on was provided.");return s._renderProperties=(0,u.default)(t),s._encodings=[],s._options=y.default,s._errorHandler=new g.default(s),"undefined"!==typeof e&&(i=i||{},i.format||(i.format=A()),s.options(i)[i.format](e,i).render()),s};for(var C in w.getModule=function(t){return n.default[t]},n.default)n.default.hasOwnProperty(C)&&k(n.default,C);function k(t,e){x.prototype[e]=x.prototype[e.toUpperCase()]=x.prototype[e.toLowerCase()]=function(i,s){var n=this;return n._errorHandler.wrapBarcodeCall((function(){s.text="undefined"===typeof s.text?void 0:""+s.text;var a=(0,r.default)(n._options,s);a=(0,f.default)(a);var o=t[e],l=S(i,o,a);return n._encodings.push(l),n}))}}function S(t,e,i){t=""+t;var s=new e(t,i);if(!s.valid())throw new v.InvalidInputException(s.constructor.name,t);var n=s.encode();n=(0,l.default)(n);for(var a=0;a<n.length;a++)n[a].options=(0,r.default)(i,n[a].options);return n}function A(){return n.default["CODE128"]?"CODE128":Object.keys(n.default)[0]}function O(t,e,i){e=(0,l.default)(e);for(var s=0;s<e.length;s++)e[s].options=(0,r.default)(i,e[s].options),(0,h.default)(e[s].options);(0,h.default)(i);var n=t.renderer,a=new n(t.element,e,i);a.render(),t.afterRender&&t.afterRender()}x.prototype.options=function(t){return this._options=(0,r.default)(this._options,t),this},x.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this},x.prototype.init=function(){var t;if(this._renderProperties)for(var e in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){t=this._renderProperties[e];var i=(0,r.default)(this._options,t.options);"auto"==i.format&&(i.format=A()),this._errorHandler.wrapBarcodeCall((function(){var e=i.value,s=n.default[i.format.toUpperCase()],a=S(e,s,i);O(t,a,i)}))}},x.prototype.render=function(){if(!this._renderProperties)throw new v.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)O(this._renderProperties[t],this._encodings,this._options);else O(this._renderProperties,this._encodings,this._options);return this},x.prototype._defaults=y.default,"undefined"!==typeof window&&(window.JsBarcode=w),"undefined"!==typeof jQuery&&(jQuery.fn.JsBarcode=function(t,e){var i=[];return jQuery(this).each((function(){i.push(this)})),w(i,t,e)}),t.exports=w},"62da":function(t,e,i){var s=i("cbe5"),n=s.extend({type:"droplet",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var i=e.cx,s=e.cy,n=e.width,a=e.height;t.moveTo(i,s+n),t.bezierCurveTo(i+n,s+n,i+3*n/2,s-n/3,i,s-a),t.bezierCurveTo(i-3*n/2,s-n/3,i-n,s+n,i,s+n),t.closePath()}});t.exports=n},6316:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div")},n=[],a=i("2877"),r={},o=Object(a["a"])(r,s,n,!1,null,null,null);e["default"]=o.exports},6321:function(t,e,i){"use strict";var s=i("f2eb"),n=i.n(s);n.a},"632a":function(t,e,i){},6339:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"editor-menu"},[s("ul",{class:["editor-menus",t.active?"menu-active":""]},t._l(t.menu,(function(e,i){return s("li",{key:i,class:"editor-menu__item "+(i===t.currentMenuIndex&&"active")+" "+(t.hover===i&&"hover-active"),on:{mousemove:function(e){t.hover=i},mouseleave:function(e){t.hover=-1},click:function(e){return t.$store.dispatch("menu/saveCurrentMenuIndex",i)}}},[s("img",{attrs:{src:i===t.currentMenuIndex?e.icondef:e.icon}}),s("div",{class:[i===t.currentMenuIndex?"fo-theme":"","text-center mt-4"]},[t._v(" "+t._s(e.title)+" ")])])})),0),s("a-popover",{attrs:{trigger:"click",placement:"topRight","overlay-class-name":"ant-no-padding"}},[s("template",{slot:"content"},[s("div",{staticClass:"editor-avatar-item flex flex-start item-center",on:{click:function(e){return t.navgateTo("/mydesign",!1)}}},[s("svg",{staticClass:"icon",attrs:{t:"1597147159454",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9613",width:"16",height:"16"}},[s("path",{attrs:{d:"M347.072 98.56l7.168 6.4 100.544 100.544a32 32 0 0 1-40.832 48.96l-4.48-3.648-100.48-100.608a24 24 0 0 0-29.632-3.456l-4.352 3.456-116.8 116.8a24 24 0 0 0-3.456 29.632l3.456 4.352L227.2 369.92a31.744 31.744 0 0 1 2.944-4.8l3.84-4.352 83.968-80a32 32 0 0 1 47.936 41.984l-3.84 4.352-83.968 80a32 32 0 0 1-8.064 5.632l49.92 49.92 332.224-332.16a144 144 0 0 1 195.392-7.68l8.32 7.68 37.568 37.632a144 144 0 0 1 0 203.648L561.152 704l58.88 58.752 81.28-81.408a32 32 0 0 1 49.024 40.832l-3.712 4.48-81.408 81.344 57.792 57.792a24 24 0 0 0 29.632 3.456l4.352-3.456 116.8-116.8a24 24 0 0 0 3.456-29.632l-3.456-4.352-117.44-117.376a32 32 0 0 1 40.832-48.96l4.48 3.712 117.376 117.376c32.064 32.064 34.176 82.752 6.4 117.312l-6.4 7.168-116.8 116.8a88 88 0 0 1-117.312 6.4l-7.168-6.4-161.856-161.856-131.712 131.84c-11.52 11.52-25.984 19.584-41.728 23.36l-9.6 1.728-133.44 16.704a88 88 0 0 1-98.24-98.24l16.64-133.504c2.496-19.392 11.328-37.44 25.152-51.264l131.712-131.84L112.96 346.24a88 88 0 0 1-6.4-117.312l6.4-7.168L229.76 104.96a88 88 0 0 1 117.312-6.4z m463.488 77.248a80 80 0 0 0-113.152 0l-509.184 509.248a24 24 0 0 0-6.848 13.952l-16.64 133.504a24 24 0 0 0 26.752 26.816l133.504-16.64a24 24 0 0 0 13.952-6.912l509.248-509.184a80 80 0 0 0 0-113.152z","p-id":"9614"}})]),s("div",{staticClass:"fo-14 ml-12"},[t._v("设计方案")])]),s("div",{staticClass:"editor-avatar-item flex flex-start item-center",on:{click:function(e){return t.navgateTo("/mycollect",!1)}}},[s("svg",{staticClass:"icon",attrs:{t:"1597147352640",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10310",width:"16",height:"16"}},[s("path",{attrs:{d:"M695.808 105.728c-60.48 4.48-114.816 41.984-173.184 106.56L512 224.32l-10.624-11.968C439.168 143.36 381.44 105.28 316.032 105.28 159.36 105.28 32 233.6 32 391.232c0 76.992 22.464 126.08 78.72 207.36 43.52 63.04 116.8 135.296 208.832 212.096l32.832 26.944c42.816 34.56 81.024 63.36 108.672 83.008 27.264 19.456 81.792 25.472 115.84-0.64l30.72-24.128c11.52-9.152 24.32-19.584 38.592-31.104l46.72-39.04c28.672-24.512 52.672-45.888 71.872-64.256l23.68-23.104c48.64-48.448 102.784-107.904 124.8-139.712 56.192-81.28 78.72-130.432 78.72-207.424 0-157.632-127.36-285.952-284.032-285.952l-12.16 0.448z m12.16 63.552c121.216 0 220.032 99.52 220.032 221.952 0 60.288-18.048 99.648-67.392 171.008-22.528 32.64-89.472 104.768-139.968 152.96-27.52 26.24-65.92 59.648-114.944 100.032l-48.768 39.104c-6.912 5.504-13.248 10.432-19.008 14.848-8.704 6.656-33.28 3.968-39.744-0.64l-21.888-15.936a2484.032 2484.032 0 0 1-99.584-77.696l-16.192-13.376C272.64 688.192 202.88 619.328 163.392 562.24 114.048 490.88 96 451.52 96 391.232c0-122.432 98.816-221.952 220.032-221.952 51.008 0 106.496 44.672 171.008 125.056 12.8 16 37.12 16 49.92 0 64.576-80.384 120.064-125.056 171.008-125.056z","p-id":"10311"}})]),s("div",{staticClass:"fo-14 ml-12"},[t._v("收藏夹")])]),s("div",{staticClass:"editor-avatar-item flex flex-start item-center",on:{click:function(e){return t.navgateTo("/orders",!1)}}},[s("svg",{staticClass:"icon",attrs:{t:"1597147329299",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10078",width:"16",height:"16"}},[s("path",{attrs:{d:"M896 256a64 64 0 0 1 63.552 56.512L960 320v544a96 96 0 0 1-86.784 95.552L864 960H320a64 64 0 0 1-64-64 32 32 0 0 1 63.488-5.76L320 896h544a32 32 0 0 0 31.488-26.24L896 864V320l-5.76-0.512A32 32 0 0 1 896 256z m-192-160A96 96 0 0 1 800 192v512a96 96 0 0 1-96 96H192A96 96 0 0 1 96 704V192A96 96 0 0 1 192 96z m0 64H192a32 32 0 0 0-32 32v512a32 32 0 0 0 32 32h512a32 32 0 0 0 32-32V192a32 32 0 0 0-32-32zM576 512a32 32 0 0 1 5.76 63.488L576 576H320a32 32 0 0 1-5.76-63.488L320 512h256z m0-192a32 32 0 0 1 5.76 63.488L576 384H320a32 32 0 0 1-5.76-63.488L320 320h256z","p-id":"10079"}})]),s("div",{staticClass:"fo-14 ml-12"},[t._v("订单与发票")])]),s("div",{staticClass:"editor-avatar-item flex flex-start item-center",on:{click:function(e){return t.navgateTo("/personalcenter",!1)}}},[s("svg",{staticClass:"icon",attrs:{t:"1597147228687",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9845",width:"16",height:"16"}},[s("path",{attrs:{d:"M699.264 96H324.736a96 96 0 0 0-82.88 47.616l-186.688 320a96 96 0 0 0 0 96.768l186.688 320a96 96 0 0 0 82.88 47.616h374.528a96 96 0 0 0 82.88-47.616l186.688-320a96 96 0 0 0 0-96.768l-186.688-320a96 96 0 0 0-82.88-47.616z m-374.528 64h374.528a32 32 0 0 1 27.648 15.872l186.624 320a32 32 0 0 1 0 32.256l-186.624 320a32 32 0 0 1-27.648 15.872H324.736a32 32 0 0 1-27.648-15.872l-186.624-320a32 32 0 0 1 0-32.256l186.624-320a32 32 0 0 1 27.648-15.872z","p-id":"9846"}}),s("path",{attrs:{d:"M512 352A160 160 0 0 1 672 512a32 32 0 1 1-64 0A96 96 0 1 0 512 608a32 32 0 0 1 0 64 160 160 0 0 1 0-320z","p-id":"9847"}})]),s("div",{staticClass:"fo-14 ml-12"},[t._v("账号设置")])])]),s("div",{staticClass:"editor-menu-avatar2"},[t.user.avatar_url?t._e():s("img",{class:"avatar--"+t.vip.type,attrs:{src:i("131e")}}),t.user.avatar_url?s("img",{class:"avatar--"+t.vip.type,attrs:{src:t.user.avatar_url}}):t._e(),s("div",{staticStyle:{height:"1px"}},[t.isVip?"personal"===t.vip.type?s("img",{staticClass:"avatar-flag",attrs:{src:i("25a3"),alt:""}}):s("img",{staticClass:"avatar-flag",attrs:{src:i("1c5f"),alt:""}}):s("img",{staticClass:"avatar-flag",attrs:{src:i("d79b"),alt:""}})]),s("div",{staticClass:"fo-12 fo-gray text-center mt-4"},[t._v("我的")])])],2),s("a-popover",{attrs:{trigger:"click",placement:"topRight","overlay-class-name":"ant-no-padding menu-pop"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[s("template",{slot:"content"},[t.showShortcut?t._e():s("div",[s("div",{staticClass:"editor-avatar-item flex flex-start item-center",on:{click:function(e){return t.navgateTo("https://help.baoxiaohe.com/category/shipin/",!0)}}},[s("i",{staticClass:"iconfont icon-xinshoujiaocheng"}),s("div",{staticClass:"fo-14 ml-12"},[t._v("新手教程")])]),s("div",{staticClass:"editor-avatar-item flex flex-start item-center",on:{click:function(e){return t.navgateTo("https://help.baoxiaohe.com/support/",!0)}}},[s("img",{attrs:{src:i("a8ca"),width:"16px",height:"16px",alt:""}}),s("div",{staticClass:"fo-14 ml-12"},[t._v("帮助中心")])]),s("div",{staticClass:"editor-avatar-item flex flex-start item-center",on:{click:function(e){t.showShortcut=!0}}},[s("svg",{staticClass:"icon",attrs:{t:"1590739054858",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3624",width:"16",height:"16"}},[s("path",{attrs:{d:"M830.016 398.592V304h-92.608v94.592h92.608z m-92.608 144h92.608V448.128h-92.608V542.72z m-48.512-144V304H596.288v94.592h92.608z m-92.608 144h92.608V448.128H596.288V542.72z m-282.176 193.664h374.784V639.36H314.112v96.832zM173.056 398.592H265.6V304H173.056v94.592zM265.6 542.72V448.064H173.056V542.72H265.6z m141.184 0V448.192H314.176V542.72h92.608z m0-144V304.064H314.176v94.528l92.608 0.064z m141.056 144V448.192H455.232V542.72H547.84z m0-144V304.064H455.232v94.528l92.608 0.064z m330.688-254.656c24.96 0 46.72 10.752 65.024 32.192 18.368 21.504 27.52 46.848 27.52 76.032V771.712c0 29.248-9.152 54.592-27.52 76.032-18.368 21.504-40.064 32.256-65.024 32.256H124.608c-24.96 0-46.72-10.752-65.024-32.256A113.152 113.152 0 0 1 32 771.712V252.224c0-29.184 9.216-54.528 27.52-76.032 18.432-21.504 40.128-32.192 65.088-32.192h753.92z","p-id":"3625",fill:"#474a5b"}})]),s("div",{staticClass:"fo-14 ml-12"},[t._v("快捷键")])]),s("Service",[s("div",{staticClass:"editor-avatar-item flex flex-start item-center"},[s("svg",{staticClass:"icon",attrs:{t:"1590739033108",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3434",width:"16",height:"16"}},[s("path",{attrs:{d:"M182.912 569.984c0 187.52 146.56 340.096 327.04 340.096 147.2 0 271.36-101.184 313.216-239.808-30.4 12.928-61.824 22.4-95.232 30.912-40.384 9.472-82.816 15.936-126.72 19.904a58.688 58.688 0 0 1-53.76 36.928H482.048c-32 0-58.88-27.456-58.88-61.312 0-33.92 26.432-61.376 58.88-61.376h65.28c22.4 0 41.92 12.992 51.84 31.936a734.08 734.08 0 0 0 117.76-18.432 613.248 613.248 0 0 0 119.168-42.432c0.96-11.456 1.92-24.448 1.92-36.864 0-187.008-146.56-339.584-327.04-339.584-181.568 0-328.128 152.576-328.128 340.032z m784.896-139.584a500.16 500.16 0 0 0-119.232-208c-85.248-89.216-203.904-144.576-335.104-144.576-131.136 0-249.28 55.36-335.104 144.64a495.744 495.744 0 0 0-119.68 207.936H42.24c-38.4 0-42.24 24.512-42.24 64.384V608c0 39.872 3.84 81.216 42.24 81.216h91.776V440.32a410.88 410.88 0 0 1 97.28-162.56A388.352 388.352 0 0 1 513.92 155.136c110.72 0 210.944 46.336 283.264 122.176a409.984 409.984 0 0 1 93.76 155.072v257.28h90.752c38.4 0 42.24-41.792 42.24-81.664V494.272c0.512-39.872-3.84-63.872-41.728-63.872h-14.464z","p-id":"3435",fill:"#474a5b"}})]),s("div",{staticClass:"fo-14 ml-12"},[t._v("在线客服")])])]),s("div",{staticClass:"editor-avatar-item flex flex-start item-center",on:{click:function(e){return t.navgateTo("https://www.wenjuan.com/s/7fuAF3/",!0)}}},[s("svg",{staticClass:"icon",attrs:{t:"1590739189883",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3814",width:"16",height:"16"}},[s("path",{attrs:{d:"M508.544 64C260.48 64 64 243.2 64 460.288 64 584.384 132.928 708.48 236.288 780.8l-13.76 134.4s3.456 65.472 58.56 37.888c62.08-30.976 151.68-96.448 151.68-96.448 27.52 3.392 55.104 6.848 82.688 6.848 296.32 0 444.544-192.96 444.544-410.048C960 236.288 756.672 64 508.544 64z m-151.68 448a50.752 50.752 0 0 1-51.648-51.712c0-27.52 24.128-51.648 51.712-51.648 27.52 0 51.712 24.128 51.712 51.648 0 27.584-24.128 51.712-51.712 51.712zM529.28 512a52.992 52.992 0 0 1-51.648-51.712c0-27.52 24.064-51.648 51.648-51.648 27.584 0 51.712 24.128 51.712 51.648 0 27.584-24.128 51.712-51.712 51.712z m172.352 0a52.992 52.992 0 0 1-51.712-51.712c0-27.52 24.128-51.648 51.712-51.648 27.52 0 51.648 24.128 51.648 51.648 0 27.584-24.128 51.712-51.648 51.712z","p-id":"3815",fill:"#474a5b"}})]),s("div",{staticClass:"fo-14 ml-12"},[t._v("反馈与建议")])])],1),s("helper",{model:{value:t.showShortcut,callback:function(e){t.showShortcut=e},expression:"showShortcut"}})],1),s("div",{staticClass:"editor-menu-avatar"},[s("svg",{attrs:{width:"30px",height:"30px",viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},on:{mousemove:function(e){t.lampColor="#ff6634"},mouseleave:function(e){t.lampColor="#888CA2"}}},[s("title",[t._v("编组 69")]),s("g",{attrs:{id:"编辑器2",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[s("g",{attrs:{id:"属性1备份-6",transform:"translate(-12.000000, -844.000000)"}},[s("g",{attrs:{id:"编组-69",transform:"translate(12.000000, 844.000000)"}},[s("rect",{attrs:{id:"矩形",fill:t.lampColor,opacity:"0.899999976",x:"0",y:"0",width:"24",height:"24",rx:"12"}}),s("g",{attrs:{id:"灯泡",transform:"translate(4.000000, 4.000000)",fill:"#fff","fill-rule":"nonzero"}},[s("path",{attrs:{d:"M3.06578482,2.72506567 L3.06578481,2.72506567 C2.86241895,2.52170449 2.53269982,2.52170762 2.32933864,2.7250735 C2.12597747,2.92843936 2.1259806,3.25815849 2.32934646,3.46151967 L3.06580045,4.19797365 L3.06580044,4.19797365 C3.2691663,4.40133951 3.59888856,4.40133951 3.80225442,4.19797365 C4.00562029,3.99460779 4.00562029,3.66488553 3.80225443,3.46151967 C3.80225443,3.46151967 3.80225443,3.46151967 3.80225443,3.46151967 L3.06580045,2.72506569 L3.06578482,2.72506567 Z M12.8937181,2.72506567 L12.1572641,3.46151965 L12.1572641,3.46151965 C11.9538983,3.66488551 11.9538983,3.99460777 12.1572642,4.19797363 C12.36063,4.40133949 12.6903523,4.40133949 12.8937181,4.19797363 L13.6301565,3.46151965 L13.6301565,3.46151965 C13.8335223,3.25815848 13.8335255,2.92843935 13.6301643,2.72507348 C13.4268031,2.52170762 13.097084,2.5217045 12.8937181,2.72506566 L12.8937181,2.72506567 Z M1.76940831,6.81553918 L0.740828987,6.81553918 L0.740828965,6.81553918 C0.456789572,6.81553918 0.226531491,7.04579726 0.226531491,7.32983665 C0.226531491,7.61387605 0.456789572,7.84413512 0.740828965,7.84413512 L1.77725205,7.84413512 L1.77725206,7.84413512 C2.06073833,7.84468695 2.29099641,7.61532449 2.29155051,7.33183822 C2.29155051,7.3311709 2.29155051,7.33050358 2.29155051,7.32983626 L2.29155051,7.32983657 C2.28844298,7.04403311 2.05522582,6.81432659 1.7694083,6.81555472 L1.76940831,6.81553918 Z M15.2199083,6.81553918 L14.1834853,6.81553918 L14.1834852,6.81553918 C13.8994458,6.81553918 13.6691878,7.04579726 13.6691878,7.32983665 C13.6691878,7.61387605 13.8994458,7.84413413 14.1834852,7.84413413 L15.2199083,7.84413413 L15.2199083,7.84413413 C15.5039477,7.84413413 15.7342058,7.61387605 15.7342058,7.32983665 C15.7342058,7.04579726 15.5039477,6.81553918 15.2199083,6.81553918 L15.2199083,6.81553918 Z M7.45822743,0.865532257 L7.45822743,1.90220534 L7.45822743,1.90220542 C7.45822743,2.18624012 7.68848238,2.41649508 7.97251709,2.41649508 C8.2565518,2.41649508 8.48680675,2.18624012 8.48680675,1.90220542 L8.48680675,0.865532335 L8.48680675,0.865532335 C8.48680675,0.581497629 8.2565518,0.351242674 7.97251709,0.351242674 C7.68848238,0.351242674 7.45822743,0.581497629 7.45822743,0.865532335 L7.45822743,0.865532257 Z M3.32797223,8.10507193 L3.32797223,8.10532123 C3.32797223,10.6747617 5.41092816,12.7577173 7.98036865,12.7577173 C10.5498091,12.7577173 12.6327647,10.6747617 12.6327647,8.10532123 C12.6327647,5.53588074 10.5498091,3.45292453 7.98036865,3.45292453 C7.98028532,3.45292453 7.98020199,3.45292453 7.98011866,3.45292453 L7.98011891,3.45292453 C5.4121628,3.45156949 3.32933225,5.53220887 3.32797223,8.10016498 C3.32797223,8.10180106 3.32797223,8.10343714 3.32797223,8.10507322 L3.32797223,8.10507193 Z M6.94442996,15.352721 L6.94442993,15.3527063 C6.94483214,15.635252 7.17420676,15.8639741 7.45675241,15.8635725 C7.45740078,15.8635716 7.45804915,15.8635695 7.45869752,15.8635661 L8.49513622,15.8635661 L8.49513621,15.8635661 C8.77720373,15.8696089 9.01076181,15.6458471 9.01680557,15.3637811 C9.02284837,15.0817136 8.79908656,14.8481555 8.51702061,14.8421117 C8.50972713,14.8419626 8.50243116,14.8419626 8.49513762,14.8421117 L7.45821454,14.8421117 L7.45821453,14.8421117 C7.1811767,14.8354226 6.95117175,15.0545823 6.94448268,15.3316201 C6.94431287,15.3386528 6.94429098,15.3456883 6.94441702,15.3527219 L6.94442996,15.352721 Z M5.90750687,13.7934067 L5.90750688,13.7934077 C5.90790908,14.0759533 6.13728371,14.3046755 6.41982935,14.3042745 C6.42048816,14.3042745 6.42114696,14.3042745 6.42180576,14.3042745 L9.53109062,14.3042745 L9.5310906,14.3042745 C9.81322999,14.3042745 10.0419506,14.0755483 10.0419506,13.7934073 C10.0419506,13.5112679 9.81323155,13.2825474 9.5310906,13.2825474 L6.42891512,13.2825474 C6.14416478,13.2825474 5.90677388,13.5103601 5.90677388,13.7934073 L5.90750687,13.7934067 Z M3.32797223,8.10507193 L3.32797223,8.10532123 C3.32797223,10.6747617 5.41092816,12.7577173 7.98036865,12.7577173 C10.5498091,12.7577173 12.6327647,10.6747617 12.6327647,8.10532123 C12.6327647,5.53588074 10.5498091,3.45292453 7.98036865,3.45292453 C7.98028532,3.45292453 7.98020199,3.45292453 7.98011866,3.45292453 L7.98011891,3.45292453 C5.4121628,3.45156949 3.32933225,5.53220887 3.32797223,8.10016498 C3.32797223,8.10180106 3.32797223,8.10343714 3.32797223,8.10507322 L3.32797223,8.10507193 Z M6.94442996,15.352721 L6.94442996,15.3527196 C6.94388502,15.6362059 7.17325366,15.8664577 7.45673993,15.867004 C7.45739681,15.867004 7.45805369,15.867004 7.45871057,15.867004 L8.49514928,15.867004 L8.49514927,15.867004 C8.77917929,15.867004 9.00943112,15.6367512 9.00943112,15.3527212 C9.00943112,15.0686912 8.77917929,14.8384393 8.49514927,14.8384393 C8.49514926,14.8384393 8.49514925,14.8384393 8.49514924,14.8384393 L7.45822616,14.8384393 C7.1734602,14.8305799 6.94394431,15.0593771 6.94394431,15.3527212 L6.94442996,15.352721 Z M5.90750197,13.7934067 L5.90750197,13.7934058 C5.90628045,14.0768889 6.13509464,14.3076923 6.41857935,14.3089237 C6.41965419,14.3089237 6.42072904,14.3089237 6.42180388,14.3089237 L9.53108875,14.3089237 L9.53108873,14.3089237 C9.81512343,14.3089237 10.0453784,14.0786677 10.0453784,13.794633 C10.0453784,13.5105983 9.81512343,13.2803411 9.53108873,13.2803411 L6.42891324,13.2803411 L6.42891325,13.2803411 C6.14385042,13.2795132 5.91127515,13.5083686 5.90750197,13.7934065 L5.90750197,13.7934067 Z",id:"形状"}})])])])])]),s("div",{staticClass:"fo-12 fo-gray text-center"},[t._v("帮助")])])],2)],1)},n=[],a=i("5530"),r=i("a33f"),o=i("5880"),l=i("0d67"),c=i("9393"),h={components:{helper:r["default"],Service:l["a"]},mixins:[c["a"]],props:{current:{type:Number,default:0}},watch:{visible(t){t&&this.$nextTick(()=>{this.shallWeTalk()})}},data(){return{lampColor:"#888CA2",active:!1,visible:!1,hover:-1,showShortcut:!1,menu:[{icon:i("0cee"),icondef:i("3497"),title:"素材"},{icon:i("32ad"),icondef:i("5670"),title:"文字"},{icon:i("8aeb"),icondef:i("2f01"),title:"背景"},{icon:i("4343"),icondef:i("500c"),title:"工具"},{icon:i("acc7"),icondef:i("1409"),title:"上传"}]}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(o["mapGetters"])("profile",["isVip"])),Object(o["mapState"])("profile",["user"])),Object(o["mapState"])("menu",["currentMenuIndex"])),beforeDestroy(){this.noTalk()},methods:Object(a["a"])(Object(a["a"])({},Object(o["mapActions"])("service",["shallWeTalk","noTalk"])),{},{navgateTo(t,e){const i=t;window.open(i,"_blank")}})},d=h,u=(i("68ec"),i("2877")),p=Object(u["a"])(d,s,n,!1,null,null,null);e["default"]=p.exports},6395:function(t,e,i){},"63bf":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-modal",{attrs:{centered:"",title:"材质与尺寸",width:580,footer:null,"z-index":3e3},on:{change:function(e){return t.$emit("change",t.visibleValue)}},model:{value:t.visibleValue,callback:function(e){t.visibleValue=e},expression:"visibleValue"}},[s("div",{staticClass:"editor-resize__model"},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"fo-14"},[t._v("材质：")]),s("a-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择材质"},on:{change:t.scienceChange},model:{value:t.project.science_id,callback:function(e){t.$set(t.project,"science_id",e)},expression:"project.science_id"}},t._l(t.science,(function(e,i){return s("a-select-option",{key:i,attrs:{label:e.science_name,value:e.id}},[s("div",{staticClass:"flex flex-start item-center",staticStyle:{width:"100%"}},[s("img",{attrs:{src:e.science_image+"?imageView2/1/w/25/h/25/q/50"}}),s("div",{staticClass:"ml-8"},[t._v(t._s(e.science_name))])])])})),1),s("a",{staticClass:"ml-12",attrs:{href:"https://help.baoxiaohe.com/d/27",target:"_blank"}},[s("img",{staticClass:"question-icon",attrs:{src:i("7347")}})]),s("div",{staticClass:"fo-14",staticStyle:{"margin-left":"36px"}},[t._v("纸厚：")]),s("a-input",{staticStyle:{width:"160px"},attrs:{disabled:t.thinkdisabled,placeholder:"请输入纸厚"},on:{change:t.depthChange},model:{value:t.project.thickness,callback:function(e){t.$set(t.project,"thickness",e)},expression:"project.thickness"}}),s("div",{staticClass:"ml-8 fo-gray"},[t._v("mm")])],1),s("div",{staticClass:"flex flex-start item-center mt-16"},[s("div",{staticClass:"fo-14"},[t._v("类型：")]),s("a-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.changeSizeDepth},model:{value:t.sizeType,callback:function(e){t.sizeType=e},expression:"sizeType"}},[s("a-select-option",{attrs:{label:"内尺寸",value:"id"}},[t._v("内尺寸")]),s("a-select-option",{attrs:{label:"外尺寸",value:"ed"}},[t._v("外尺寸")]),s("a-select-option",{attrs:{label:"制造尺寸",value:"dm"}},[t._v("制造尺寸")])],1),s("a",{staticClass:"ml-12",attrs:{href:"https://help.baoxiaohe.com/d/24",target:"_blank"}},[s("img",{staticClass:"question-icon",attrs:{src:i("7347")}})])],1),s("div",{staticClass:"mt-16 flex flex-start"},[s("div",[t._v("尺寸：")]),s("div",{staticClass:"size-panel"},[s("div",{staticClass:"size-panel__header flex flex-start item-center"},[t.lengthDisable?t._e():s("div",{staticClass:"size-panel__input flex flex-start item-center"},[s("input",{attrs:{disabled:t.lengthDisable,placeholder:"请输入长aaaa"},domProps:{value:t.formSize.length},on:{blur:t.lengthBlur}}),s("div",[t._v("mm")])]),s("div",{staticClass:"size-panel__short"}),t.widthDisable?t._e():s("div",{staticClass:"size-panel__input flex flex-start item-center"},[s("input",{attrs:{disabled:t.widthDisable,placeholder:"请输入宽"},domProps:{value:t.formSize.width},on:{blur:t.widthBlur}}),s("div",[t._v("mm")])]),s("div",{staticClass:"size-panel__short"}),t.heightDisable?t._e():s("div",{staticClass:"size-panel__input flex flex-start item-center"},[s("input",{attrs:{disabled:t.heightDisable,placeholder:"请输入高"},domProps:{value:t.formSize.height},on:{blur:t.heightBlur}}),s("div",[t._v("mm")])])]),s("div",{staticClass:"size-panel__exm"},t._l(t.default_size,(function(e,i){return s("div",{key:i,class:"size-panel__exm__item flex flex-start item-center "+(t.sizeFlag==i&&"size-panel__exm__item--active"),on:{click:function(e){return t.clickItemSize(i)}}},[s("div",{staticClass:"fo-14"},[t._v("L: "+t._s(e.length)+"mm")]),s("div",{staticClass:"fo-14 ml-12"},[t._v("W: "+t._s(e.width)+"mm")]),s("div",{staticClass:"fo-14 ml-12"},[t._v("H: "+t._s(e.height)+"mm")])])})),0)])]),s("div",{staticClass:"fo-14 fo-gray mt-16"},[t._v("生产场景下，非标准尺寸可能会导致成本增高")]),s("div",{staticClass:"w-100 model-footer flex flex-center item-center pb-24"},[s("a-button",{staticStyle:{width:"88px"},on:{click:function(e){t.visibleValue=!1}}},[t._v("取消")]),s("a-button",{staticClass:"ml-24",attrs:{type:"primary",loading:t.loading},on:{click:t.fetchSize}},[t._v("确认"+t._s(t.newprojectType?"新建":"调整"))])],1)])])],1)},n=[],a=(i("5319"),i("5530")),r=i("f2a3"),o=i("05ed"),l=i("d1cf"),c=i("365c"),h=(i("5880"),i("ed08"),{components:{model:r["a"],numberInput:o["a"]},model:{prop:"visible",event:"change"},props:{visible:{type:Boolean,require:!0,default:!1},nptype:{},npvalue:{}},watch:{nptype(t){this.newprojectType=t,this.load=!1},npvalue:{handler(t,e){this.newprojectValue=t,this.cate_id=t.cate_id,this.getCateInfo(),this.science.length>0&&this.setDefScience()},deep:!0},visible(t){this.visibleValue=t,t&&(this.load||(this.load=!0,this.$root.projectData&&this.$root.projectData.id&&this.getCateInfo(),this.getScienceCate()))},visibleValue(t){!t&&this.newprojectType&&(this.load=!1,this.newprojectType=!1),this.$emit("change",t)},rsa(t){this.shouldFormat=!!Object.keys(this.rsa).length},project(){this.dimensioning&&this.dimensioning.setDepths(this.project.thickness,this.project.inless,this.project.outless)}},computed:{extendSize(){var t;return(null===(t=this.npvalue)||void 0===t?void 0:t.width)?this.npvalue:this.project},width(){return this.extendSize.width},height(){return this.extendSize.height},length(){return this.extendSize.length}},data(){return{visibleValue:this.visible,sizeType:"id",sizeTypePre:"id",locked:!1,load:!1,sizeFlag:-1,rsa:{},shouldFormat:!1,loading:!1,newprojectType:this.nptype,cate_id:"",newprojectValue:this.newprojectValue,thinkdisabled:!1,formSize:{length:"",width:"",height:""},oriSize:{},project:{length:500,width:300,height:100,science_id:"",thickness:""},scienceFlag:0,length_limit:[],width_limit:[],height_limit:[],default_size:[],lengthDisable:!1,widthDisable:!1,heightDisable:!1,science:[],cate:{},dimensioning:null}},methods:{depthChange(t){const{value:e}=t.target;this.sizeTypePre="id",this.project.inless=e/2,this.project.outless=e/2,this.changeSizeDepth(this.sizeTypePre)},clickItemSize(t){this.sizeFlag=t;const e=this.default_size[t];this.formSize={length:e.length,width:e.width,height:e.height}},scienceChange(t){let e=0;for(const i in this.science)this.science[i].id==t&&(e=i,0===this.science[i].can_set?this.thinkdisabled=!0:this.thinkdisabled=!1);this.project.science_id=t,this.project.science_image=this.science[e].science_image,this.project.science_name=this.science[e].science_name,this.sizeTypePre="id",this.project.thickness=this.science[e].thickness,this.project.inless=this.science[e].inless,this.project.outless=this.science[e].outless,this.changeSizeDepth(this.sizeType)},changeSizeDepth(t){this.dimensioning.setDepths(this.project.thickness,this.project.inless,this.project.outless);const{l:e,w:i,h:s}=this.dimensioning.getLimits(t);this.length_limit=e,this.height_limit=s,this.width_limit=i,this.sizeType=t,this.setRsa(),this.sizeTypePre=t},setRsa(){this.rsa=this.$root.knifeData?"ed"===this.sizeType?JSON.parse(JSON.stringify(this.$root.knifeData.getOutSizeAdd)):"dm"===this.sizeType?JSON.parse(JSON.stringify(this.$root.knifeData.getKnifeSizeAdd)):{}:{}},fetchSize(){if(!this.project.science_id)return void this.$message.error("请选择材质");this.loading=!0;const t=Object(a["a"])({},this.formSize);let{width:e,height:i,length:s}=t;if(this.shouldFormat){const{w:t,h:n,l:a}=this.dimensioning.filterSize(this.rsa,s,e,i,-1);e=t,i=n,s=a}this.newprojectType?Object(c["createDesignByBlank"])({length:s,width:e,height:i,size_type:this.sizeType,thickness:this.project.thickness,inless:this.project.inless,outless:this.project.outless,science_id:this.project.science_id,science_name:this.project.science_name,cate_id:this.cate_id}).then(t=>{this.loading=!1,t&&(this.visibleValue=!1,window.location.href="/design?id="+t.data.id+"&type=blank")}):(this.project.size_type=this.sizeType,this.project.length=s,this.project.width=e,this.project.height=i,Object(c["updateAll"])({project_id:this.project.project_id,id:this.project.id,length:s,size_type:this.sizeType,width:e,height:i,thickness:this.project.thickness,inless:this.project.inless,outless:this.project.outless,science_id:this.project.science_id,science_name:this.project.science_name}).then(t=>{this.$api.project.knifes({id:this.project.project_id,bleed:this.project.bleedline,dpi:c["DPI"]}).then(t=>{t&&(this.loading=!1,this.visibleValue=!1)})}))},getCateInfo(){this.$api.project.cateInfo({project_id:this.cate_id||this.$root.projectData.id,type:this.cate_id?"new":null}).then(t=>{if(t){this.dimensioning=new l["a"](t.data.lengthLimit,t.data.widthLimit,t.data.heightLimit,t.data.defaultSize,this.newprojectType?this.newprojectValue.knife:this.$root.knifeData),this.dimensioning.setDepths(this.project.thickness,this.project.inless,this.project.outless);const e=this.dimensioning.getLimits("id");this.length_limit=e.l,this.width_limit=e.w,this.height_limit=e.h,0==this.length_limit[0]&&0==this.length_limit[1]&&(this.lengthDisable=!0),0==this.width_limit[0]&&0==this.width_limit[1]&&(this.widthDisable=!0),0==this.height_limit[0]&&0==this.height_limit[1]&&(this.heightDisable=!0),this.default_size=this.dimensioning.getDefaultSizes("id"),this.cate=t.data,this.sizeType=this.project.size_type||"id",this.setRsa();let i=this.width,s=this.height,n=this.length;this.$nextTick(()=>{if(this.shouldFormat){const{w:t,h:e,l:a}=this.dimensioning.filterSize(this.rsa,n,i,s,1);i=t,s=e,n=a}this.formSize.width=i,this.formSize.height=s,this.formSize.length=n})}})},getScienceCate(){this.$api.material.science({science_type:1,currentPage:1,pageSize:1e3}).then(t=>{t&&(this.science=t.data.data,""!==this.project.science_id&&this.project.science_id||this.science.length>0&&(this.setDefScience(),0===this.science[0].can_set&&(this.thinkdisabled=!0)))})},setDefScience(){let t=-1;if(this.newprojectValue)for(const e in this.science)this.science[e].id===this.newprojectValue.def_science_id&&(t=e);-1===t?(this.project.science_id=this.science[0].id,this.project.thickness=this.science[0].thickness,this.project.outless=this.science[0].outless,this.project.inless=this.science[0].inless):(this.project.science_id=this.science[t].id,this.project.thickness=this.science[t].thickness,this.project.outless=this.science[t].outless,this.project.inless=this.science[t].inless)},lengthBlur(t){const e=parseInt(t.target.value.replace(/[^\d]/g,""));this.formSize.length=this.ckeckLimit(e,"length","长度")},widthBlur(t){const e=parseInt(t.target.value.replace(/[^\d]/g,""));this.formSize.width=this.ckeckLimit(e,"width","宽度")},heightBlur(t){const e=parseInt(t.target.value.replace(/[^\d]/g,""));this.formSize.height=this.ckeckLimit(e,"height","高度")},ckeckLimit(t,e,i){let s=0;return t>=parseInt(this[e+"_limit"][0])&&t<=parseInt(this[e+"_limit"][1])?s=t:t<parseInt(this[e+"_limit"][0])?(s=parseInt(this[e+"_limit"][0]),this.$message.warning({content:i+"最小值为"+this[e+"_limit"][0],duration:1})):(s=parseInt(this[e+"_limit"][1]),this.$message.warning({content:i+"最大值为"+this[e+"_limit"][1],duration:1})),s}}}),d=h,u=(i("f7f64"),i("2877")),p=Object(u["a"])(d,s,n,!1,null,null,null);e["default"]=p.exports},"63eb":function(t,e,i){t.exports=i.p+"editor-assets/img/like-a.ef0eed3b.svg"},"641e":function(t,e,i){"use strict";var s=i("7235"),n=i.n(s);n.a},6428:function(t,e,i){"use strict";var s=i("d7bc"),n=i.n(s);n.a},6466:function(t,e,i){"use strict";var s=i("dfa9"),n=i.n(s);n.a},6468:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{title:"温馨提示",visible:t.visible,width:480,footer:null},on:{cancel:t.handleCancel}},[i("div",{staticClass:"main-box"},[t._v("站外粘贴请使用快捷键 "+t._s(t.hotKey)+"+V")])])},n=[],a=i("3063"),r={data(){return{hotKey:a["a"].isMacOs?"⌘":"Ctrl",visible:!1}},methods:{handleCancel(){this.visible=!1},handleOk(){this.visible=!1}},mounted(){this.$bus.$on("show-paste-modal",t=>{this.visible=!0})},destroyed(){this.$bus.$off("show-paste-modal")}},o=r,l=(i("c1d5"),i("2877")),c=Object(l["a"])(o,s,n,!1,null,"e7e3824e",null);e["default"]=c.exports},6472:function(t,e,i){"use strict";var s=i("0e83"),n=i.n(s);n.a},"64db":function(t,e,i){},"650c":function(t,e,i){"use strict";var s=i("e35d"),n=i.n(s);n.a},"650f":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));i("2532"),i("1276"),i("ddb0");var s=i("5530");class n{constructor(t){this.DPI=t.DPI,this.totalX=t.totalX,this.totalY=t.totalY,this.designSorbFlag=void 0===t.designSorbFlag||t.designSorbFlag,this.foldLineSorbFlag=void 0===t.foldLineSorbFlag||t.foldLineSorbFlag,this.faceCenterSorbFlag=void 0===t.faceCenterSorbFlag||t.faceCenterSorbFlag,this.guideLineSorbFlag=void 0===t.guideLineSorbFlag||t.guideLineSorbFlag,this.faces=JSON.parse(JSON.stringify(t.faces||[])),this.faces.forEach(t=>{t.center={x:t.x+t.w/2,y:t.y+t.h/2}}),this.outerFoldLines=t.foldLines.filter(t=>t.x1==t.x2||t.y1==t.y2).map(t=>{const{x1:e,x2:i,y1:n,y2:a}=t;let r;r=t.x1==t.x2?"v":"h";const o=i-e,l=a-n;return Object(s["a"])(Object(s["a"])({},t),{},{type:r,width:o,height:l})}),this.innerFoldLines=this.outerFoldLines.map(t=>{const{x1:e,x2:i}=t;return Object.assign({},t,{x1:this.totalX-i,x2:this.totalX-e})})}set(t){this.scale=t.scale||1,this.threshold=Math.max(1.6/this.scale,1/this.DPI),this.isInside=t.isInside||0,this.rotate=t.rotate||0,this.envDesigns=t.envDesigns||[],this.envRects=this.envDesigns.map(t=>this._designStyle2Rect(t.style)),this._setMovingDesigns(t.movingDesigns),this._setGuideLines(t.guideLines,this.rotate,this.totalX,this.totalY)}_initEveryMove(){this.highlines=[],this.input_offset_mm={},this.collision_offset_delta={x:0,y:0}}_setGuideLines(t,e,i,s){const n={x:i/2,y:s/2},a=Math.PI*e/180;this.guideLines=t.map(t=>{let{x:r,y:o,type:l}=t;"y"==l?o=s/2:r=i/2;let{x:c,y:h}=this._translate_axis(n.x,n.y,r,o,-a);return 90!=e&&270!=e||(l="x"==l?"y":"x"),"x"==l?c=0:h=0,{type:l,x:c,y:h}})}_translate_axis(t,e,i,s,n){return{x:(i-t)*Math.cos(n)+(s-e)*Math.sin(n)+t,y:(s-e)*Math.cos(n)+(i-t)*Math.sin(n)+e}}_designStyle2Rect(t){const{left:e,top:i,width:s,height:n,rotate:a}=t,r=e+s,o=i+n,l={x:e+s/2,y:i+n/2},c=Math.PI*a/180,h=[[e,i],[e,o],[r,i],[r,o]].map(t=>this._translate_axis(l.x,l.y,t[0],t[1],c)),d={left:Math.min(...h.map(t=>t.x)),right:Math.max(...h.map(t=>t.x)),top:Math.min(...h.map(t=>t.y)),bottom:Math.max(...h.map(t=>t.y))};return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}_refreshMovingRect(t){const{freezeMovingRect:e}=this;return this.movingRect=Object.assign({},e,{left:e.left+t.x,right:e.right+t.x,top:e.top+t.y,bottom:e.bottom+t.y}),this.movingRect}_setMovingDesigns(t){this.freezeMovingDesigns=JSON.parse(JSON.stringify(t));let e={};const i=t.map(t=>this._designStyle2Rect(t.style));if(1===i.length)e=i[0];else{const t={left:Math.min(...i.map(t=>t.left)),top:Math.min(...i.map(t=>t.top)),right:Math.max(...i.map(t=>t.right)),bottom:Math.max(...i.map(t=>t.bottom))};t.width=t.right-t.left,t.height=t.bottom-t.top,e=t}this.movingRect=e,this.freezeMovingRect=Object.assign({},e)}_parse_moveoffset(t,e){const{scale:i,rotate:s,DPI:n}=this;let a=t/(i*n),r=e/(i*n);return 90===s?[a,r]=[r,-a]:180===s?[a,r]=[-a,-r]:270===s&&([a,r]=[-r,a]),{x:a,y:r}}_build_result(){const{input_offset_mm:t,collision_offset_delta:e,highlines:i,freezeMovingDesigns:s,movingRect:n}=this,a={selectionPosition:{x:n.left,y:n.top},highlines:i},r={x:t.x-e.x,y:t.y-e.y};if(1==s.length){const t=s[0];a.x=t.style.left+r.x,a.y=t.style.top+r.y}else{const t={};s.forEach(e=>{const{uuid:i}=e,{left:s,top:n,width:a,height:o}=e.style;t[i]={x:s+r.x,y:n+r.y}}),a.positionMap=t}return a}calc(t,e){this._initEveryMove(),this.input_offset_mm=this._parse_moveoffset(t,e);const i=this._refreshMovingRect(this.input_offset_mm);return this._checkCollisionWithEnvDesigns(i),this._checkCollisionWithFaces(i),this._checkCollisionWithFoldLines(i),this._checkCollisionWithGuideLines(i),this._build_result()}_checkCollisionWithFaces(t){if(!this.faceCenterSorbFlag)return;const{highlines:e,threshold:i}=this,s=[t.left,t.right,t.left+t.width/2],n=[t.top,t.bottom,t.top+t.height/2];this.faces.forEach(e=>{if(!this._point_in_face({x:t.left+t.width/2,y:t.top+t.height/2},e))return!1;const i=Math.min(t.top,e.y),a=Math.max(t.bottom,e.y+e.h),r=Math.min(t.left,e.x),o=Math.max(t.right,e.x+e.w);let l=e.center.x;s.forEach(t=>{this._check_x_axis(t,l,!0,i,a)}),l=e.center.y,n.forEach(t=>{this._check_y_axis(t,l,!0,r,o)})})}_get_moving_face(t){const e={x:t.left+t.width/2,y:t.top+t.height/2};return this.faces.find(t=>e.x>t.x&&e.x<t.x+t.w&&e.y>t.y&&e.y<t.y+t.h)}_point_in_face(t,e){return t.x>e.x&&t.x<e.x+e.w&&t.y>e.y&&t.y<e.y+e.h}_checkCollisionWithEnvDesigns(t){if(!this.designSorbFlag)return;const e=this._get_moving_face(t);this.envRects.forEach(i=>{if(e&&!this._point_in_face({x:i.left+i.width/2,y:i.top+i.height/2},e))return!1;const s=[t.left,t.right,t.left+t.width/2],n=[t.top,t.bottom,t.top+t.height/2],a=[i.left,i.right,i.left+i.width/2],r=[i.top,i.bottom,i.top+i.height/2],o=Math.min(t.top,i.top),l=Math.max(t.bottom,i.bottom),c=Math.min(t.left,i.left),h=Math.max(t.right,i.right);a.forEach(t=>{s.forEach(e=>{this._check_x_axis(e,t,!0,o,l)})}),r.forEach(t=>{n.forEach(e=>{this._check_y_axis(e,t,!0,c,h)})})})}_check_x_axis(t,e,i=!0,s,n){const a=t-e;Math.abs(a)<this.threshold&&(!this.collision_offset_delta.x||Math.abs(a-this.collision_offset_delta.x)<1e-4)&&(this.collision_offset_delta.x=a,i&&this.highlines.push({x:e,y:s,width:0,height:n-s}))}_check_y_axis(t,e,i=!0,s,n){const a=t-e;Math.abs(a)<this.threshold&&(!this.collision_offset_delta.y||Math.abs(a-this.collision_offset_delta.y)<1e-4)&&(this.collision_offset_delta.y=a,i&&this.highlines.push({x:s,y:e,width:n-s,height:0}))}_checkCollisionWithGuideLines(t){this.guideLineSorbFlag&&this.guideLines.forEach(e=>{const i=[t.left,t.right,t.left+t.width/2],s=[t.top,t.bottom,t.top+t.height/2];if("y"==e.type){const t=e.x;i.forEach(e=>{this._check_x_axis(e,t,!1)})}if("x"==e.type){const t=e.y;s.forEach(e=>{this._check_y_axis(e,t,!1)})}})}_checkCollisionWithFoldLines(t){if(!this.foldLineSorbFlag)return;const{isInside:e,outerFoldLines:i,innerFoldLines:s}=this;let n=[];n=e?s:i,n.forEach(e=>{const i=[t.left,t.right,t.left+t.width/2],s=[t.top,t.bottom,t.top+t.height/2],n=Math.min(t.top,e.y1),a=Math.max(t.bottom,e.y2),r=Math.min(t.left,e.x1),o=Math.max(t.right,e.x2),l=this._get_current_facenames(t.left+t.width/2,t.top+t.height/2),c=e.name.split("_").some(t=>l.includes(t));if(!c)return!1;if("v"==e.type){const t=e.x1;i.forEach(e=>{this._check_x_axis(e,t,!0,n,a)})}if("h"==e.type){const t=e.y1;s.forEach(e=>{this._check_y_axis(e,t,!0,r,o)})}})}_get_current_facenames(t,e){return this.faces.map(i=>t<i.x||t>i.x+i.w||e<i.y||e>i.y+i.h?"":i.name).filter(t=>!!t)}}},"65d7":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.p1&&t.p2?i("g",{staticClass:"clickable",on:{click:function(e){return t.$emit("click")}}},[i("path",{attrs:{d:t.computePath(),stroke:t.textColor,"stroke-width":t.arrowWidth,"stroke-linecap":"round","stroke-opacity":t.fillOpacity}}),i("text",{attrs:{x:t.textLocation[0],fill:t.textColor,y:t.textLocation[1],"text-anchor":t.textAnchor,"font-size":t.fontSize}},[t._v(" "+t._s(t.currentText)+" ")])]):t._e()},n=[],a=i("5530"),r=i("5880"),o=i("d323"),l={props:{p1:{type:[Object,String],default:null},p2:{type:[Object,String],default:null},lineName:{type:String,default:""},lineLength:{type:String,default:0},currentAxiasRemark:{type:String,default:null}},data(){return{arrowDegree:.25*Math.PI,textColor:"#ff6634",b0:null,b1:null,b2:null,b3:null,b4:null,b5:null}},methods:{computePath(){const t=this.sqrt(this.p1,this.p2),e=[-t/2,0],i=[Math.cos(this.arrowDegree)*this.arrowLength+e[0],Math.sin(this.arrowDegree)*this.arrowLength],s=[i[0],-i[1]],n=[-i[0],i[1]],a=[-i[0],-i[1]],r=[-e[0],0],o=[(this.p1.x+this.p2.x)/2,(this.p1.y+this.p2.y)/2];let l=.5*Math.PI;this.p1.x!=this.p2.x&&(l=Math.atan((this.p1.y-this.p2.y)/(this.p1.x-this.p2.x)));const c=this.transform(e,o,l),h=this.transform(i,o,l),d=this.transform(s,o,l),u=this.transform(n,o,l),p=this.transform(a,o,l),f=this.transform(r,o,l);return`M${c[0]},${c[1]} L${h[0]},${h[1]}       M${c[0]},${c[1]} L${d[0]},${d[1]}       M${c[0]},${c[1]} L${f[0]},${f[1]}       M${f[0]},${f[1]} L${u[0]},${u[1]}       M${f[0]},${f[1]} L${p[0]},${p[1]} `},sqrt(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},transform(t,e,i){const s=new o["Matrix"]([[1,0,e[0]],[0,1,e[1]],[0,0,1]]),n=new o["Matrix"]([[Math.cos(i),Math.sin(i),0],[-Math.sin(i),Math.cos(i),0],[0,0,1]]),a=new o["Vector"]([[t[0]],[t[1]],[1]]),r=s.multiply(n).multiply(a).elements;return[r[0],r[1]]}},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])(["scale"])),{},{arrowLength(){return 2/this.scale},arrowWidth(){return.4/this.scale},fontSize(){return 4/this.scale},textOffset(){return 6/this.scale},textLocation(){if(!this.p1||!this.p2)return[0,0];const t=[(this.p1.x+this.p2.x)/2,(this.p1.y+this.p2.y)/2];return this.p1.y==this.p2.y?[t[0],t[1]+this.textOffset]:[t[0]+this.textOffset,t[1]]},textAnchor(){return"middle"},currentText(){const t={W:"宽",H:"高",L:"长"};return t[this.lineName]||this.lineName},dashArray(){const t={L:"length",W:"width",H:"height"};return t[this.lineName]===this.currentAxiasRemark?"":`${3/this.scale}, ${3/this.scale}`},fillOpacity(){const t={L:"length",W:"width",H:"height"};return t[this.lineName]===this.currentAxiasRemark?1:.6},currentLineStyle(){}})},c=l,h=i("2877"),d=Object(h["a"])(c,s,n,!1,null,null,null);e["default"]=d.exports},"65ed":function(t,e,i){var s=i("22d1"),n=i("84ec"),a=n.buildTransformer,r="___zrEVENTSAVED",o=[];function l(t,e,i,s,n){return c(o,e,s,n,!0)&&c(t,i,o[0],o[1])}function c(t,e,i,n,a){if(e.getBoundingClientRect&&s.domSupported&&!u(e)){var o=e[r]||(e[r]={}),l=h(e,o),c=d(l,o,a);if(c)return c(t,i,n),!0}return!1}function h(t,e){var i=e.markers;if(i)return i;i=e.markers=[];for(var s=["left","right"],n=["top","bottom"],a=0;a<4;a++){var r=document.createElement("div"),o=r.style,l=a%2,c=(a>>1)%2;o.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",s[l]+":0",n[c]+":0",s[1-l]+":auto",n[1-c]+":auto",""].join("!important;"),t.appendChild(r),i.push(r)}return i}function d(t,e,i){for(var s=i?"invTrans":"trans",n=e[s],r=e.srcCoords,o=!0,l=[],c=[],h=0;h<4;h++){var d=t[h].getBoundingClientRect(),u=2*h,p=d.left,f=d.top;l.push(p,f),o=o&&r&&p===r[u]&&f===r[u+1],c.push(t[h].offsetLeft,t[h].offsetTop)}return o&&n?n:(e.srcCoords=l,e[s]=i?a(c,l):a(l,c))}function u(t){return"CANVAS"===t.nodeName.toUpperCase()}e.transformLocalCoord=l,e.transformCoordWithViewport=c,e.isCanvasEl=u},6610:function(t,e,i){"use strict";var s=i("5bdb"),n=i.n(s);n.a},6656:function(t,e,i){t.exports=i.p+"editor-assets/img/left-side-menu_template.0256617a.svg"},"66a8":function(t,e,i){},"66be":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video",style:{width:t.width+"px",height:t.height+"px"}},[i("div",{staticClass:"video-panel flex flex-center item-center",style:{width:t.width+"px",height:t.height-80+"px"}},[t.videoFlag>-1?i("video",{staticClass:"video-control",style:{width:t.size.width+"px",height:t.size.height+"px"},attrs:{controls:"",src:t.videos[t.videoFlag].videoPath}}):t._e()]),i("div",{staticClass:"video-opt flex flex-center "},[i("a-button",{staticClass:"ml-12 fo-14",staticStyle:{width:"200px"},attrs:{size:"large",type:"primary"},on:{click:function(e){t.showVideoRenderModel=!0}}},[t._v("一键替换并拍摄")])],1),i("video-render-model",{model:{value:t.showVideoRenderModel,callback:function(e){t.showVideoRenderModel=e},expression:"showVideoRenderModel"}})],1)},n=[],a=i("5530"),r=i("3809"),o=i("5880"),l={components:{videoRenderModel:r["default"]},props:{width:{type:Number,default:0},height:{type:Number,default:0}},data(){return{showVideoRenderModel:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(o["mapGetters"])("render",["videos","videoFlag"])),{},{size(){const t=16/9;let e=this.width-100,i=e/t;return i>this.height-180&&(i=this.height-180,e=i*t),{width:e,height:i}}})},c=l,h=(i("6a46"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,"c7cca2c8",null);e["default"]=d.exports},"66ed":function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("bf60"),a=i("ed08");i("583a");e["default"]=Object(s["b"])({props:{title:{type:String,default:""},max:{type:Number,default:100},min:{type:Number,default:0},step:{type:Number,default:1},visible:{type:Boolean,default:!1},value:{type:Number,default:0}},setup(t,e){const i=Object(s["j"])(t.value),{title:r,max:o,min:l,step:c}=t;return Object(s["k"])(()=>t.value,()=>{i.value=t.value}),()=>{var h,d;return Object(s["c"])("a-popover",{attrs:{visible:t.visible,trigger:"click"},on:{visibleChange:t=>{e.emit("visibleChange",t)}}},[Object(s["c"])("template",{slot:"content"},[Object(s["c"])("div",{class:"pop-slider flex item-center"},[Object(s["c"])("div",{class:"title"},[r]),Object(s["c"])("div",{class:"slide-container"},[Object(s["c"])(n["default"],{attrs:{min:l,max:o,step:c,value:Object(a["k"])(i.value)},on:{change:t=>{i.value=Object(a["H"])(t).target},confirm:t=>{e.emit("change",Object(a["H"])(t).target)}}})]),Object(s["c"])("a-input-number",{attrs:{value:i.value,min:0,max:o},on:{change:t=>{i.value=t},blur:t=>{e.emit("change",t.target.value)}}})])]),null===(h=(d=e.slots).default)||void 0===h?void 0:h.call(d)])}}})},"678b":function(t,e,i){},6796:function(t,e,i){"use strict";e["a"]={methods:{resize(){},refresh(){},dblclick(){}}}},6799:function(t,e,i){},"67c5":function(t){t.exports=JSON.parse('{"name":"@ffmpeg/ffmpeg","version":"0.9.7","description":"FFmpeg WebAssembly version","main":"src/index.js","types":"src/index.d.ts","directories":{"example":"examples"},"scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","prepublishOnly":"npm run build","lint":"eslint src","wait":"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node --experimental-wasm-threads --experimental-wasm-bulk-memory node_modules/.bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},"browser":{"./src/node/index.js":"./src/browser/index.js"},"repository":{"type":"git","url":"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},"keywords":["ffmpeg","WebAssembly","video"],"author":"Jerome Wu <jeromewus@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},"engines":{"node":">=12.16.1"},"homepage":"https://github.com/ffmpegwasm/ffmpeg.wasm#readme","dependencies":{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},"devDependencies":{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.8.5","@types/emscripten":"^1.39.4","babel-loader":"^8.1.0","chai":"^4.2.0","cors":"^2.8.5","eslint":"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1","express":"^4.17.1","mocha":"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.2.0","webpack":"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"}}')},"685a":function(t,e,i){},6881:function(t,e,i){"use strict";e["a"]={parseArcCommand(t,e,i,s,n,a,r,o){s=s*Math.PI/180,e=Math.abs(e),i=Math.abs(i);const l=(r.x-o.x)/2,c=(r.y-o.y)/2,h=Math.cos(s)*l+Math.sin(s)*c,d=-Math.sin(s)*l+Math.cos(s)*c;let u=e*e,p=i*i;const f=h*h,m=d*d,g=f/u+m/p;if(g>1){const t=Math.sqrt(g);e*=t,i*=t,u=e*e,p=i*i}const v=u*m+p*f,b=(u*p-v)/v;let y=Math.sqrt(Math.max(0,b));n===a&&(y=-y);const _=y*e*d/i,x=-y*i*h/e,w=Math.cos(s)*_-Math.sin(s)*x+(r.x+o.x)/2,C=Math.sin(s)*_+Math.cos(s)*x+(r.y+o.y)/2,k=this.svgAngle(1,0,(h-_)/e,(d-x)/i),S=this.svgAngle((h-_)/e,(d-x)/i,(-h-_)/e,(-d-x)/i)%(2*Math.PI);t.absellipse(w,C,e,i,k,k+S,0===a,s)},svgAngle(t,e,i,s){const n=t*i+e*s,a=Math.sqrt(t*t+e*e)*Math.sqrt(i*i+s*s);let r=Math.acos(Math.max(-1,Math.min(1,n/a)));return t*s-e*i<0&&(r=-r),r}}},"68ab":function(t,e,i){var s=i("4a3f"),n=s.quadraticProjectPoint;function a(t,e,i,s,a,r,o,l,c){if(0===o)return!1;var h=o;if(c>e+h&&c>s+h&&c>r+h||c<e-h&&c<s-h&&c<r-h||l>t+h&&l>i+h&&l>a+h||l<t-h&&l<i-h&&l<a-h)return!1;var d=n(t,e,i,s,a,r,l,c,null);return d<=h/2}e.containStroke=a},"68ea":function(t,e,i){t.exports=i.p+"editor-assets/img/ang6-b.10c5c971.svg"},"68ec":function(t,e,i){"use strict";var s=i("a98a"),n=i.n(s);n.a},6925:function(t,e,i){t.exports=i.p+"editor-assets/img/del-d.e4422243.svg"},"697e":function(t,e,i){var s=i("de00"),n=i("22d1"),a=i("6d8b"),r=i("d2cf"),o=i("afa06"),l=i("ed21"),c=i("30a3"),h=i("cdaa"),d=!n.canvasSupported,u={canvas:l},p={},f="4.3.0";function m(t,e){var i=new _(s(),t,e);return p[i.id]=i,i}function g(t){if(t)t.dispose();else{for(var e in p)p.hasOwnProperty(e)&&p[e].dispose();p={}}return this}function v(t){return p[t]}function b(t,e){u[t]=e}function y(t){delete p[t]}var _=function(t,e,i){i=i||{},this.dom=e,this.id=t;var s=this,l=new o,p=i.renderer;if(d){if(!u.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");p="vml"}else p&&u[p]||(p="canvas");var f=new u[p](e,l,i,t);this.storage=l,this.painter=f;var m=n.node||n.worker?null:new h(f.getViewportRoot(),f.root);this.handler=new r(l,f,m,f.root),this.animation=new c({stage:{update:a.bind(this.flush,this)}}),this.animation.start(),this._needsRefresh;var g=l.delFromStorage,v=l.addToStorage;l.delFromStorage=function(t){g.call(l,t),t&&t.removeSelfFromZr(s)},l.addToStorage=function(t){v.call(l,t),t.addSelfToZr(s)}};_.prototype={constructor:_,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer&&this.painter.configLayer(t,e),this._needsRefresh=!0},setBackgroundColor:function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var t;this._needsRefresh&&(t=!0,this.refreshImmediately()),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately()),t&&this.trigger("rendered")},addHover:function(t,e){if(this.painter.addHover){var i=this.painter.addHover(t,e);return this.refreshHover(),i}},removeHover:function(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e)},setCursorStyle:function(t){this.handler.setCursorStyle(t)},findHover:function(t,e){return this.handler.findHover(t,e)},on:function(t,e,i){this.handler.on(t,e,i)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,y(this.id)}},e.version=f,e.init=m,e.dispose=g,e.getInstance=v,e.registerPainter=b},6984:function(t,e,i){},"699c":function(t,e,i){},"6a07":function(t,e,i){"use strict";var s=i("4229"),n=i.n(s);n.a},"6a46":function(t,e,i){"use strict";var s=i("a026"),n=i.n(s);n.a},"6b02":function(t,e,i){},"6b13":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box-resizeable-wrap"},[i("div",{staticClass:"flex flex-center item-center resizeable",style:{width:t.width+"px",height:t.width+"px"},attrs:{title:t.item.file_name,id:t.idPrefix+t.item.id},on:{mousedown:function(e){return t.$emit("mousedown",e)}}},[i("img",{staticClass:"avoid-clicks",attrs:{src:t.item.file_path+(t.item.file_path.indexOf("svg")>-1?"":"?imageView2/0/w/124/h/124/q/70|imageslim")},on:{load:t.adjustShape}})])])},n=[],a={props:{item:{type:Object,default:null},index:{type:Number,default:0},idPrefix:{type:String,default:""},width:{type:Number,default:124}},methods:{adjustShape(t){const e=t.target;e.width>=e.height?(e.style.width="100%",e.style.height="auto",e.style.maxHeight=null):(e.style.height="100%",e.style.width="auto",e.style.maxWidth=null)}}},r=a,o=(i("341d"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"bb75429a",null);e["default"]=l.exports},"6b17":function(t,e,i){"use strict";i.r(e);i("ddb0");var s=i("750b"),n=i("ed08"),a=i("7e00"),r=i("5a0c"),o=i.n(r);i("404d");e["default"]=Object(s["b"])({props:{target:{type:[Object,Object],default:()=>({})},width:{type:String,default:"256px"}},setup(t){const[e,{setTrue:i,setFalse:r}]=Object(n["I"])(!1);return()=>{var l,c,h;return Object(s["c"])("div",{class:"target-wrap",style:{width:t.width}},[Object(s["c"])("div",{class:"image-wrap",on:{mouseenter:i,mouseleave:r}},[t.target.overdue?Object(s["c"])("div",{class:"overdue"},["已过期"]):"",Object(s["c"])("div",{class:"image-preview "+(e.value?"":"active"),style:{width:t.width,height:t.width}}),Object(s["c"])("img",{class:"target-image",style:{width:t.width,height:t.width},attrs:{src:Object(n["F"])(null===(l=t.target.material)||void 0===l?void 0:l.url,500,500),alt:""}})]),Object(s["c"])("div",{class:"flex item-center mt-26 flex-between target-bottom"},[Object(s["c"])("div",{class:"title"},[null===(c=t.target.material)||void 0===c?void 0:c.name]),Object(s["c"])("div",{class:"desc"},[a["menus"][null===(h=t.target.material)||void 0===h?void 0:h.type].value," /"," ",o()(parseInt(t.target.createTime)).format("MM/DD HH:mm")])])])}}})},"6b4b":function(t,e,i){t.exports=i.p+"editor-assets/img/play2.d6c5203d.svg"},"6b56":function(t,e,i){"use strict";var s=i("170c"),n=i.n(s);n.a},"6b6b":function(t,e,i){t.exports=i.p+"editor-assets/img/arrange-right.00aedfd2.svg"},"6ca2":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-popover",{attrs:{"overlay-class-name":"ant-no-padding",placement:"bottom",width:"160",transition:t.transition,trigger:t.triggler},on:{show:function(e){return t.handleChange(!0)},hide:function(e){return t.handleChange(!1)}},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("template",{slot:"content"},[i("MenuList",{attrs:{menus:t.menus},on:{change:t.handleClick}})],1),i("div",{on:{click:function(e){t.visible=!0}}},[t._t("default")],2)],2)},n=[],a=i("4e90"),r={components:{MenuList:a["a"]},data(){return{visible:!1}},watch:{value(t){this.visible=t}},computed:{transition(){return"el-zoom-in-"+this.animate}},props:{value:{type:Boolean,default:!1},menus:{type:[Object,Array],default:()=>[]},animate:{type:String,default:"top"},triggler:{type:String,default:"manual"}},methods:{handleClick(t){this.visible=!1,this.$emit("handleClick",t)},handleChange(t){this.$emit("change",t)}}},o=r,l=i("2877"),c=Object(l["a"])(o,s,n,!1,null,null,null);e["a"]=c.exports},"6cb4":function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("0c6d"),a=i("0869"),r=(i("1a87"),i("eb1e"));const o=t=>Array.isArray(t)&&0===t.length,l=i("99f1"),c=3;e["default"]=Object(s["b"])({setup(t,e){const i=t=>{f.value=null,h.value=!0};let h=Object(s["j"])(!1);const d=Object(s["j"])([]),u=Object(s["j"])(1),p=Object(s["j"])(!1),f=Object(s["j"])(null),m=Object(s["j"])(0),g=Object(s["a"])(()=>o(d.value)),v=async t=>{const{data:e,total:i}=await Object(n["Wb"])({current:1,pageSize:100});d.value=e,p.value=!0,m.value=i},b=Object(s["a"])(()=>{if(null===f.value||o(d.value))return"";const t=d.value[f.value];return t?t.id:""}),y=(t,i)=>{f.value=t,e.emit("change",i,t)},_=(t,e)=>{h.value=!0},x=async(t,e)=>{try{const{data:t}=await Object(n["H"])(e.id);f.value,k(t,e)}catch(i){}},w=()=>{h.value=!1},C=async()=>{const{data:t,total:e}=await Object(n["Wb"])({current:1,pageSize:3});d.value=t,u.value+=1,m.value=e},k=async(t,e)=>{p.value?await v():await C(),e.isDefault&&S()},S=()=>{if(o(d.value))return;const t=d.value.findIndex(t=>t.isDefault),e=Math.max(t,0);y(e,d.value[e])};return Object(s["f"])(async()=>{await C(),setTimeout(S)}),()=>Object(s["c"])("div",{class:"address-picker"},[Object(s["c"])("div",{class:"picker-item-container"},[d.value.map((t,e)=>Object(s["c"])(a["default"],{key:t.id,attrs:{active:f.value===e,address:t},on:{click:()=>y(e,t),dblclick:()=>_(e,t),remove:()=>x(e,t),edit:()=>_(e,t)}}))]),Object(s["c"])("div",{class:"flex",style:"justify-content:space-between;"},[!p.value&&m.value.length>c&&Object(s["c"])("a",{attrs:{href:"javascript:void(0);"},class:"show-all-button",on:{click:v}},["显示全部"," ",Object(s["c"])("img",{attrs:{src:l},style:"vertical-align:text-top; width:16px; height:16px;"})]),Object(s["c"])("div"),Object(s["c"])("a",{attrs:{href:"javascript:void(0);"},class:"add-new-button",on:{click:i}},["+新增收货地址"])]),Object(s["c"])(r["default"],{attrs:{visible:h.value,id:b.value,isFirst:g.value},on:{cancel:w,success:k}})])}})},"6cfe":function(t,e,i){(function(e){const s=i("3e15"),{devDependencies:n}=i("67c5");t.exports={corePath:"undefined"!==typeof e&&"development"===Object({NODE_ENV:"production",BASE_URL:"/"}).FFMPEG_ENV?s("/node_modules/@ffmpeg/core/dist/ffmpeg-core.js"):`https://unpkg.com/@ffmpeg/core@${n["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`}}).call(this,i("4362"))},"6d49":function(t,e,i){"use strict";var s=i("dc06"),n=i.n(s);n.a},"6d57":function(t,e,i){},"6d570":function(t,e,i){t.exports=i.p+"editor-assets/img/cream.e01c2641.svg"},"6d69":function(t,e,i){},"6d8b":function(t,e){var i={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},s={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},n=Object.prototype.toString,a=Array.prototype,r=a.forEach,o=a.filter,l=a.slice,c=a.map,h=a.reduce,d={};function u(t,e){"createCanvas"===t&&(b=null),d[t]=e}function p(t){if(null==t||"object"!==typeof t)return t;var e=t,a=n.call(t);if("[object Array]"===a){if(!X(t)){e=[];for(var r=0,o=t.length;r<o;r++)e[r]=p(t[r])}}else if(s[a]){if(!X(t)){var l=t.constructor;if(t.constructor.from)e=l.from(t);else{e=new l(t.length);for(r=0,o=t.length;r<o;r++)e[r]=p(t[r])}}}else if(!i[a]&&!X(t)&&!N(t))for(var c in e={},t)t.hasOwnProperty(c)&&(e[c]=p(t[c]));return e}function f(t,e,i){if(!P(e)||!P(t))return i?p(e):t;for(var s in e)if(e.hasOwnProperty(s)){var n=t[s],a=e[s];!P(a)||!P(n)||E(a)||E(n)||N(a)||N(n)||R(a)||R(n)||X(a)||X(n)?!i&&s in t||(t[s]=p(e[s],!0)):f(n,a,i)}return t}function m(t,e){for(var i=t[0],s=1,n=t.length;s<n;s++)i=f(i,t[s],e);return i}function g(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function v(t,e,i){for(var s in e)e.hasOwnProperty(s)&&(i?null!=e[s]:null==t[s])&&(t[s]=e[s]);return t}var b,y=function(){return d.createCanvas()};function _(){return b||(b=y().getContext("2d")),b}function x(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var i=0,s=t.length;i<s;i++)if(t[i]===e)return i}return-1}function w(t,e){var i=t.prototype;function s(){}for(var n in s.prototype=e.prototype,t.prototype=new s,i)i.hasOwnProperty(n)&&(t.prototype[n]=i[n]);t.prototype.constructor=t,t.superClass=e}function C(t,e,i){t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,v(t,e,i)}function k(t){if(t)return"string"!==typeof t&&"number"===typeof t.length}function S(t,e,i){if(t&&e)if(t.forEach&&t.forEach===r)t.forEach(e,i);else if(t.length===+t.length)for(var s=0,n=t.length;s<n;s++)e.call(i,t[s],s,t);else for(var a in t)t.hasOwnProperty(a)&&e.call(i,t[a],a,t)}function A(t,e,i){if(t&&e){if(t.map&&t.map===c)return t.map(e,i);for(var s=[],n=0,a=t.length;n<a;n++)s.push(e.call(i,t[n],n,t));return s}}function O(t,e,i,s){if(t&&e){if(t.reduce&&t.reduce===h)return t.reduce(e,i,s);for(var n=0,a=t.length;n<a;n++)i=e.call(s,i,t[n],n,t);return i}}function j(t,e,i){if(t&&e){if(t.filter&&t.filter===o)return t.filter(e,i);for(var s=[],n=0,a=t.length;n<a;n++)e.call(i,t[n],n,t)&&s.push(t[n]);return s}}function M(t,e,i){if(t&&e)for(var s=0,n=t.length;s<n;s++)if(e.call(i,t[s],s,t))return t[s]}function I(t,e){var i=l.call(arguments,2);return function(){return t.apply(e,i.concat(l.call(arguments)))}}function T(t){var e=l.call(arguments,1);return function(){return t.apply(this,e.concat(l.call(arguments)))}}function E(t){return"[object Array]"===n.call(t)}function D(t){return"function"===typeof t}function L(t){return"[object String]"===n.call(t)}function P(t){var e=typeof t;return"function"===e||!!t&&"object"===e}function R(t){return!!i[n.call(t)]}function z(t){return!!s[n.call(t)]}function N(t){return"object"===typeof t&&"number"===typeof t.nodeType&&"object"===typeof t.ownerDocument}function B(t){return t!==t}function F(t){for(var e=0,i=arguments.length;e<i;e++)if(null!=arguments[e])return arguments[e]}function $(t,e){return null!=t?t:e}function U(t,e,i){return null!=t?t:null!=e?e:i}function H(){return Function.call.apply(l,arguments)}function V(t){if("number"===typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t}function G(t,e){if(!t)throw new Error(e)}function W(t){return null==t?null:"function"===typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}d.createCanvas=function(){return document.createElement("canvas")};var Y="__ec_primitive__";function q(t){t[Y]=!0}function X(t){return t[Y]}function Q(t){var e=E(t);this.data={};var i=this;function s(t,s){e?i.set(t,s):i.set(s,t)}t instanceof Q?t.each(s):t&&S(t,s)}function Z(t){return new Q(t)}function K(t,e){for(var i=new t.constructor(t.length+e.length),s=0;s<t.length;s++)i[s]=t[s];var n=t.length;for(s=0;s<e.length;s++)i[s+n]=e[s];return i}function J(){}Q.prototype={constructor:Q,get:function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},set:function(t,e){return this.data[t]=e},each:function(t,e){for(var i in void 0!==e&&(t=I(t,e)),this.data)this.data.hasOwnProperty(i)&&t(this.data[i],i)},removeKey:function(t){delete this.data[t]}},e.$override=u,e.clone=p,e.merge=f,e.mergeAll=m,e.extend=g,e.defaults=v,e.createCanvas=y,e.getContext=_,e.indexOf=x,e.inherits=w,e.mixin=C,e.isArrayLike=k,e.each=S,e.map=A,e.reduce=O,e.filter=j,e.find=M,e.bind=I,e.curry=T,e.isArray=E,e.isFunction=D,e.isString=L,e.isObject=P,e.isBuiltInObject=R,e.isTypedArray=z,e.isDom=N,e.eqNaN=B,e.retrieve=F,e.retrieve2=$,e.retrieve3=U,e.slice=H,e.normalizeCssArray=V,e.assert=G,e.trim=W,e.setAsPrimitive=q,e.isPrimitive=X,e.createHashMap=Z,e.concatArray=K,e.noop=J},"6d9e":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showTipsFor("resizeTip")&&!t.tmpHideResizeTip?i("div",{staticClass:"tips"},[i("div",{staticClass:"h-line",staticStyle:{width:"300px",top:"330px",right:"30px"}}),i("div",{staticClass:"v-line",staticStyle:{height:"23px",right:"330px",top:"330px"}}),i("div",{staticClass:"v-line",staticStyle:{height:"8px",right:"30px",top:"330px"}}),i("div",{staticClass:"r-line",staticStyle:{width:"42px",height:"42px",top:"337px",right:"9px","pointer-events":"none"}}),i("div",{staticClass:"card"},[i("p",{staticClass:"title"},[t._v("编辑可修改尺寸和材质")]),i("a-button",{staticClass:"ok",attrs:{type:"link"},on:{click:t.IKnow}},[t._v("知道了")])],1)]):t._e()},n=[],a=i("3357"),r=(i("4981"),{mixins:[a["a"]],data(){return{tmpHideResizeTip:!1}},methods:{IKnow(){this.hideTipsFor("resizeTip")},tmpHide(){this.tmpHideResizeTip=!0}}}),o=r,l=(i("75f7"),i("2877")),c=Object(l["a"])(o,s,n,!1,null,"0d60551d",null);e["default"]=c.exports},"6e53":function(t,e,i){"use strict";function s(t){for(var e=0,i=0;i<t.length;i++){var s=parseInt(t[i]);(i+t.length)%2===0?e+=s:e+=2*s%10+Math.floor(2*s/10)}return(10-e%10)%10}function n(t){for(var e=0,i=[2,3,4,5,6,7],s=0;s<t.length;s++){var n=parseInt(t[t.length-1-s]);e+=i[s%i.length]*n}return(11-e%11)%11}Object.defineProperty(e,"__esModule",{value:!0}),e.mod10=s,e.mod11=n},"6f1f":function(t,e,i){},"6f24":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("4b23"),n=o(s),a=i("bb5d"),r=o(a);function o(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function h(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var d=function(t){function e(t,i){if(l(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(t))var s=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,r.default)(t),i));else s=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return c(s)}return h(e,t),e}(n.default);e.default=d},"6f4c":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"support-wrap"},[i("i",{staticClass:"iconfont icon-logo-mini"}),t._v(" 包小盒技术支持 ")])}],a={computed:{show(){return!1}}},r=a,o=(i("c7c1"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"746c3757",null);e["default"]=l.exports},7018:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"color"},[t.tvisible?s("div",{staticClass:"color-tubing"},[t.$root.modeReady?s("Tubing",{on:{confirm:t.handleChoose}}):t._e()],1):t._e(),t.disabled?s("span",[s("div",{class:["my-color-picker",t.colorSize?"my-color-picker--"+t.colorSize:""]},[s("div",{class:["my-color-picker__color-inner color-picker",t.visible?"my-color-picker-active":""],style:{backgroundColor:t.displayedColor,width:"100%",height:"100%"}})])]):s("a-popover",{attrs:{placement:t.placement,trigger:"click",overlayClassName:"ant-no-padding m-pallet-wrapper"},on:{visibleChange:t.handleVisible},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.optionalColors.length>0?s("div",{staticClass:"sketch-container",attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"color-container"},[t._l(t.optionalColors,(function(e,i){return s("div",{key:i,staticClass:"color-item",style:{backgroundColor:e},on:{click:function(i){return t.handleChoose(e)}}})})),s("a-popover",{attrs:{placement:"bottom",trigger:"click",overlayClassName:"ant-no-padding"}},[s("div",{staticClass:"color-item",style:{backgroundImage:"url("+i("9140")+")",backgroundRepeat:"no-repeat"}}),s("div",{staticClass:"sketch-container",attrs:{slot:"content"},slot:"content"},[s("Sketch",{ref:"sketch",attrs:{cmykStringify:t.cmyk,historyColors:t.historyColors,showOpacity:t.showOpacity,title:t.title},on:{onHistory:t.handleHistory,confirm:t.handleConfirm,tubing:t.handleTubing},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}})],1)])],2)]):t._e(),0==t.optionalColors.length?s("div",{staticClass:"sketch-container",attrs:{slot:"content"},slot:"content"},[s("Sketch",{ref:"sketch",attrs:{showPrint:t.showPrint,showTakeColor:t.showTakeColor,cmykStringify:t.cmyk,title:t.title,historyColors:t.historyColors,showOpacity:t.showOpacity},on:{onHistory:t.handleHistory,confirm:t.handleConfirm,tubing:t.handleTubing},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}})],1):t._e(),s("div",{class:["my-color-picker",t.colorSize?"my-color-picker--"+t.colorSize:""]},[s("div",{class:["my-color-picker__color-inner color-picker",t.visible?"my-color-picker-active":""],style:{backgroundColor:t.value?t.displayedColor:"",backgroundImage:t.value?"":"url("+i("9140")+")",backgroundRepeat:"no-repeat",backgroundSize:"contain",width:"100%",height:"100%"}})])])],1)},n=[],a=i("5530"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:["vc-sketch",t.disableAlpha?"vc-sketch__disable-alpha":""],attrs:{role:"application","aria-label":"Sketch color picker"}},[s("div",[t._v(t._s(t.title))]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showPrint,expression:"showPrint"}],staticClass:"flex flex-between flex-item-center"},[t.agora||t.canAdjust?s("div",{staticClass:"desc"},[t.agora?s("span",[t._v("启动CMYK印刷智能引擎")]):s("span",{staticClass:"fo-success"},[t._v("该颜色支持印刷")])]):s("div",{staticClass:"desc"},[s("span",{staticClass:"fo-danger"},[t._v("该颜色可能无法印刷")]),s("span",{staticClass:"text-custom",staticStyle:{color:"#1976D2","margin-left":"4px"},on:{click:t.doAdjust}},[t._v("调整")])])]),s("div",{staticClass:"flex mt-16"},[s("div",{staticClass:"vc-sketch-saturation-wrap"},[s("saturation",{on:{change:t.childChange,confirm:t.handleConfirm},model:{value:t.colors,callback:function(e){t.colors=e},expression:"colors"}})],1),s("div",{staticClass:"vc-sketch-hue-wrap"},[s("hue",{attrs:{direction:"vertical"},on:{change:t.childChange,confirm:t.handleConfirm},model:{value:t.colors,callback:function(e){t.colors=e},expression:"colors"}})],1),t.disableAlpha?t._e():s("div",{directives:[{name:"show",rawName:"v-show",value:t.showOpacity,expression:"showOpacity"}],staticClass:"vc-sketch-alpha-wrap"},[s("alpha",{on:{change:t.childChange,confirm:function(e){t.cmykLock=!0,t.handleConfirm()}},model:{value:t.colors,callback:function(e){t.colors=e},expression:"colors"}})],1)]),s("div",{staticClass:"flex sketch-body item-center mt-16"},[s("a-dropdown",{attrs:{overlayClassName:"sketch-dropdown"}},[s("a",{staticClass:"ant-dropdown-link",on:{click:function(t){return t.preventDefault()}}},[s("span",[t._v(t._s(t.checkedColor))]),t._v(" "),s("a-icon",{attrs:{type:"down"}})],1),s("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},t._l(t.colorType,(function(e){return s("a-menu-item",{key:e.key,on:{click:function(i){return t.handleChecked(e.key)}}},[t._v(t._s(e.value))])})),1)],1),"2"===t.checked?s("Input",{staticStyle:{width:"123px"},attrs:{value:t.colors.hex,size:"small"},on:{change:t.handleHexColor}}):"3"===t.checked?s("div",{staticClass:"flex item-center"},[s("Input",{attrs:{value:t.colors.rgba.r,customStyle:"width:37px;margin-left:3px",size:"small",placeholder:"R"},on:{change:function(e){return t.inputChange({r:e})}}}),s("Input",{attrs:{value:t.colors.rgba.g,customStyle:"width:37px;margin-left:3px",size:"small",placeholder:"G"},on:{change:function(e){return t.inputChange({g:e})}}}),s("Input",{attrs:{value:t.colors.rgba.b,customStyle:"width:37px;margin-left:3px",size:"small",placeholder:"B"},on:{change:function(e){return t.inputChange({b:e})}}})],1):t._e(),s("span",{directives:[{name:"show",rawName:"v-show",value:t.showOpacity,expression:"showOpacity"}],staticClass:"opacity-container"},[s("Input",{attrs:{value:t.opacity,customStyle:"width:45px;margin-left:5px;text-align:left",size:"small"},on:{change:function(e){return t.handleOpacity(e)}}}),s("span",{staticClass:"ant-suffix"},[t._v("%")])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showTakeColor,expression:"showTakeColor"}],staticClass:"color-picker text-custom",staticStyle:{"margin-left":"12px"},on:{click:t.handleTubing}},[s("img",{staticStyle:{width:"16px",height:"16px","margin-top":"5px"},attrs:{src:i("cc8d"),alt:""}})])],1),s("div",{staticClass:"vc-sketch-presets",attrs:{role:"group","aria-label":"A color preset, pick one to set as current color"}},[[s("div",{staticClass:"vc-sketch-presets-color btn-save",on:{click:function(e){return t.handleSave()}}},[t._v(" + ")])],t._l(t.presetColors,(function(e,i){return[t.isTransparent(e)?s("div",{key:i,staticClass:"vc-sketch-presets-color",attrs:{"aria-label":"Color:"+e.rgba},on:{click:function(i){return t.handleRgb(e)}}},[s("checkboard")],1):s("div",{key:i,staticClass:"vc-sketch-presets-color",style:{background:e.rgba},attrs:{"aria-label":"Color:"+e.rgba},on:{click:function(i){return t.handleRgb(e)}}})]}))],2)])},o=[],l=(i("5319"),i("ddb0"),i("98bd9")),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vc-editable-input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],ref:"input",staticClass:"vc-input__input",attrs:{"aria-labelledby":t.labelId},domProps:{value:t.val},on:{keydown:t.handleKeyDown,input:[function(e){e.target.composing||(t.val=e.target.value)},t.update]}}),i("span",{staticClass:"vc-input__label",attrs:{for:t.label,id:t.labelId}},[t._v(t._s(t.labelSpanText))]),i("span",{staticClass:"vc-input__desc"},[t._v(t._s(t.desc))])])},h=[],d=(i("25f0"),{name:"editableInput",props:{label:String,labelText:String,desc:String,value:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get(){return this.value},set(t){if(!(void 0!==this.max&&+t>this.max))return t;this.$refs.input.value=this.max}},labelId(){return`input__label__${this.label}__${Math.random().toString().slice(2,5)}`},labelSpanText(){return this.labelText||this.label}},methods:{update(t){this.handleChange(t.target.value)},handleChange(t){let e={};e[this.label]=t,(void 0===e.hex&&void 0===e["#"]||t.length>5)&&this.$emit("change",e)},handleKeyDown(t){let e=this.val,i=Number(e);if(i){let s=this.arrowOffset||1;38===t.keyCode&&(e=i+s,this.handleChange(e),t.preventDefault()),40===t.keyCode&&(e=i-s,this.handleChange(e),t.preventDefault())}}}}),u=d,p=(i("88f0"),i("2877")),f=Object(p["a"])(u,c,h,!1,null,null,null),m=f.exports,g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"vc-saturation",style:{background:t.bgColor},on:{mousedown:t.handleMouseDown,touchmove:t.handleChange,touchstart:t.handleChange,contextmenu:function(e){return e.preventDefault(),t.handleContext(e)}}},[i("div",{staticClass:"vc-saturation--white"}),i("div",{staticClass:"vc-saturation--black"}),i("div",{staticClass:"vc-saturation-pointer",style:{top:t.pointerTop,left:t.pointerLeft}},[i("div",{staticClass:"vc-saturation-circle"})])])},v=[],b=i("53a5"),y=i.n(b),_=i("84a2"),x=i.n(_),w={name:"Saturation",props:{value:Object},computed:{colors(){return this.value},bgColor(){return`hsl(${this.colors.hsv.h}, 100%, 50%)`},pointerTop(){return-100*this.colors.hsv.v+2+100+"%"},pointerLeft(){return 100*this.colors.hsv.s+"%"}},methods:{throttle:x()((t,e)=>{t(e)},20,{leading:!0,trailing:!1}),handleContext(){return window.event.returnValue=!1,!1},handleChange(t,e){if(2!==t.button){!e&&t.preventDefault();var i=this.$refs.container,s=i.clientWidth,n=i.clientHeight;if(i){var a=i.getBoundingClientRect().left+window.pageXOffset,r=i.getBoundingClientRect().top+window.pageYOffset,o=t.pageX||(t.touches?t.touches[0].pageX:0),l=t.pageY||(t.touches?t.touches[0].pageY:0),c=y()(o-a,0,s),h=y()(l-r,0,n),d=c/s,u=y()(-h/n+1,0,1);this.throttle(this.onChange,{h:this.colors.hsv.h,s:d,v:u,a:this.colors.hsv.a,source:"hsva"})}}},onChange(t){this.$emit("change",t)},handleMouseDown(t){2!==t.button&&(window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp))},handleMouseUp(t){this.unbindEventListeners(),this.$emit("confirm",1)},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}},C=w,k=(i("a2d2"),Object(p["a"])(C,g,v,!1,null,null,null)),S=k.exports,A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["vc-hue",t.directionClass]},[i("div",{ref:"container",staticClass:"vc-hue-container",attrs:{role:"slider","aria-valuenow":t.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360"},on:{mousedown:t.handleMouseDown,touchmove:t.handleChange,touchstart:t.handleChange}},[i("div",{staticClass:"vc-hue-pointer",style:{top:t.pointerTop,left:t.pointerLeft},attrs:{role:"presentation"}},[i("div",{staticClass:"vc-hue-picker"})])])])},O=[],j={name:"Hue",props:{value:Object,direction:{type:String,default:"horizontal"}},data(){return{oldHue:0,pullDirection:""}},computed:{colors(){const t=this.value.hsl.h;return 0!==t&&t-this.oldHue>0&&(this.pullDirection="right"),0!==t&&t-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=t,this.value},directionClass(){return{"vc-hue--horizontal":"horizontal"===this.direction,"vc-hue--vertical":"vertical"===this.direction}},pointerTop(){if("vertical"===this.direction){if(0===this.colors.hsl.h&&"right"===this.pullDirection)return 0;const t=-100*this.colors.hsl.h/360+100;return t>94?"94%":t+"%"}return 0},pointerLeft(){return"vertical"===this.direction?0:0===this.colors.hsl.h&&"right"===this.pullDirection?"100%":100*this.colors.hsl.h/360+"%"}},methods:{handleChange(t,e){!e&&t.preventDefault();var i=this.$refs.container,s=i.clientWidth,n=i.clientHeight;if(i){var a,r,o=i.getBoundingClientRect().left+window.pageXOffset,l=i.getBoundingClientRect().top+window.pageYOffset,c=t.pageX||(t.touches?t.touches[0].pageX:0),h=t.pageY||(t.touches?t.touches[0].pageY:0),d=c-o,u=h-l;"vertical"===this.direction?(u<0?a=360:u>n-5?a=0:(r=-100*u/n+100,a=360*r/100),this.colors.hsl.h!==a&&this.$emit("change",{h:a,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(d<0?a=0:d>s?a=360:(r=100*d/s,a=360*r/100),this.colors.hsl.h!==a&&this.$emit("change",{h:a,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))}},handleMouseDown(t){this.handleChange(t,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(t){this.unbindEventListeners(),this.$emit("confirm",1)},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}},M=j,I=(i("aa4e"),Object(p["a"])(M,A,O,!1,null,null,null)),T=I.exports,E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vc-alpha"},[i("div",{staticClass:"vc-alpha-checkboard-wrap"},[i("checkboard")],1),i("div",{staticClass:"vc-alpha-gradient",style:{background:t.gradientColor}}),i("div",{ref:"container",staticClass:"vc-alpha-container",on:{mousedown:t.handleMouseDown,touchmove:t.handleChange,touchstart:t.handleChange}},[i("div",{staticClass:"vc-alpha-pointer",style:{top:95*t.colors.a+"%"}},[i("div",{staticClass:"vc-alpha-picker"})])])])},D=[],L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vc-checkerboard",style:t.bgStyle})},P=[];let R={};var z={name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle(){return{"background-image":"url("+B(this.white,this.grey,this.size)+")"}}}};function N(t,e,i){if("undefined"===typeof document)return null;var s=document.createElement("canvas");s.width=s.height=2*i;var n=s.getContext("2d");return n?(n.fillStyle=t,n.fillRect(0,0,s.width,s.height),n.fillStyle=e,n.fillRect(0,0,i,i),n.translate(i,i),n.fillRect(0,0,i,i),s.toDataURL()):null}function B(t,e,i){var s=t+","+e+","+i;if(R[s])return R[s];var n=N(t,e,i);return R[s]=n,n}var F=z,$=(i("5abb"),Object(p["a"])(F,L,P,!1,null,null,null)),U=$.exports,H={name:"Alpha",props:{value:Object,onChange:Function},components:{checkboard:U},computed:{colors(){return this.value},gradientColor(){var t=this.colors.rgba,e=[t.r,t.g,t.b].join(",");return"linear-gradient(to bottom, rgba("+e+", 0) 0%, rgba("+e+", 1) 100%)"}},methods:{handleChange(t,e){!e&&t.preventDefault();var i=this.$refs.container,s=(i.clientWidth,i.clientHeight);if(i){i.getBoundingClientRect().left,window.pageXOffset;var n,a=i.getBoundingClientRect().top+window.pageYOffset,r=(t.pageX||t.touches&&t.touches[0].pageX,t.pageY||(t.touches?t.touches[0].pageY:0)),o=r-a;n=o<0?0:o>s?1:Math.round(100*o/s)/100,this.colors.a!==n&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:n,source:"rgba"})}},handleMouseDown(t){this.handleChange(t,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners(),this.$emit("confirm")},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}},V=H,G=(i("436b"),Object(p["a"])(V,E,D,!1,null,null,null)),W=G.exports,Y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-input",{style:t.customStyle,attrs:{value:t.insert,size:t.size},on:{change:t.handleChange,blur:t.doChange,pressEnter:t.doChange}})},q=[],X={props:{value:{default:""},customStyle:{type:String,default:""},placeholder:{type:String,default:""},size:{type:String,default:""}},data(){return{insert:this.value,preview:this.value}},watch:{value(t){this.insert=this.preview=""+t}},methods:{handleChange(t){this.insert=t.target.value},doChange(t){this.$emit("change",t.target.value),this.$nextTick(()=>{this.insert=this.preview})}}},Q=X,Z=Object(p["a"])(Q,Y,q,!1,null,"83042b88",null),K=Z.exports,J=i("ed08"),tt=i("5880"),et=i("365c");const it=/[^\d]/g,st=Object(J["t"])(it),nt=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,at=(Object(J["s"])(nt),[{key:"2",value:"HEX"},{key:"3",value:"RGB"}]);var rt={name:"Sketch",mixins:[l["b"]],components:{saturation:S,hue:T,alpha:W,"ed-in":m,checkboard:U,Input:K},watch:{colors(){this.opacity=""+Math.round(100*this.colors.a)},cmykStringify(t){t||(this.cmyk={c:0,m:0,y:0,k:100})}},data(){return{colorType:at,agora:!0,checked:"2",opacity:"100",match:!1,visible:!1,color:[],cmyk:{c:0,m:0,y:0,k:100},cmykLock:!1}},props:{cmykStringify:{type:String,default:""},value:{type:[Object,Object],default:()=>({})},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1},historyColors:{type:[Object,Array],default:()=>[]},showPrint:{type:Boolean,default:!0},showTakeColor:{type:Boolean,default:!0},showOpacity:{type:Boolean,default:!0},title:{type:String,default:""}},computed:Object(a["a"])({inCMYK(){const{r:t,g:e,b:i,a:s}=this.colors.rgba;return!1},presetColors(){return this.$root.projectData.colorHistory},canAdjust(){return!this.color.length},checkedColor(){var t;return null===(t=this.colorType.find(t=>t.key===this.checked))||void 0===t?void 0:t.value},hex(){let t;return t=this.colors.a<1?this.colors.hex8:this.colors.hex,t.replace("#","")},activeColor(){var t=this.colors.rgba;return"rgba("+[t.r,t.g,t.b,t.a].join(",")+")"}},Object(tt["mapState"])(["tubingColor"])),async mounted(){this.cmykStringify?this.cmyk=JSON.parse(this.cmykStringify):setTimeout(()=>{const t=JSON.parse(JSON.stringify(this.colors));this.cmyk=t.cmyk},100),setTimeout(()=>{this.agora=!1},100)},methods:{handleTubing(){this.$emit("tubing")},handleRgb(t){t&&t.rgba?(this.colorChange(t.rgba),this.$nextTick(()=>{this.cmyk=t.cmyk})):this.colorChange(t),this.handleConfirm()},handleConfirm(){if(this.cmykLock)this.cmykLock=!1;else{const t=JSON.parse(JSON.stringify(this.colors));this.cmyk=t.cmyk}setTimeout(()=>{this.$emit("confirm",{color:this.colors,cmyk:this.cmyk})},0)},async handleAdjust(){const{r:t,g:e,b:i}=this.colors.rgba;this.color=await Object(et["adjustCMYK"])({r:t,g:e,b:i})},doAdjust(){const[t,e,i]=this.color;this.inputChange({r:t,g:e,b:i}),this.color=[]},handleChoose(t){this.visible=!1,this.handleHexColor(t)},handleHexColor(t){this.handlePreset({hex:t})},insertCmyk(t){},handleSave(){const t=[...this.presetColors];15===t.length&&t.pop();const e=JSON.parse(JSON.stringify(this.cmyk));t.unshift({rgba:this.rgbaStringify(this.colors.rgba),cmyk:e}),this.$set(this.$root.projectData,"colorHistory",t)},rgbaStringify(t){return`rgba(${t.r},${t.g},${t.b},${t.a})`},handleChecked(t){this.checked=t},handlePreset(t){this.colorChange({hex:t.hex,source:"hex",a:t.a}),this.handleConfirm()},handleOpacity(t){this.cmykLock=!0,t=st(t),t=~~t>100?100:~~t<0?0:t,this.opacity=""+t;const e=~~t/100;this.colorChange({h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:e,source:"rgba"}),this.handleConfirm()},childChange(t){this.colorChange(t)},isNotEmpty(t){return!!t||"number"===typeof t},hasCmyk(t){return this.isNotEmpty(t.c)||this.isNotEmpty(t.m)||this.isNotEmpty(t.y)||this.isNotEmpty(t.k)},inputChange(t){t&&(this.hasCmyk(t)&&(this.cmykLock=!0),"number"===typeof t.c&&t.c>100&&(this.cmyk.c=100),"number"===typeof t.m&&t.m>100&&(this.cmyk.m=100),"number"===typeof t.y&&t.y>100&&(this.cmyk.y=100),"number"===typeof t.k&&t.k>100&&(this.cmyk.k=100),t.hex?this.isValidHex(t.hex)&&(this.colorChange({hex:t.hex,source:"hex"}),this.handleConfirm()):t.r||t.g||t.b||t.a?(this.colorChange({r:t.r||this.colors.rgba.r,g:t.g||this.colors.rgba.g,b:t.b||this.colors.rgba.b,a:t.a||this.colors.rgba.a,source:"rgba"}),this.handleConfirm()):this.hasCmyk(t)&&(this.colorChange({c:t.c||this.cmyk.c,m:t.m||this.cmyk.m,y:t.y||this.cmyk.y,k:t.k||this.cmyk.k,a:t.a||this.colors.rgba.a,source:"cmyk"}),this.handleConfirm()))}}},ot=rt,lt=(i("6118"),Object(p["a"])(ot,r,o,!1,null,null,null)),ct=lt.exports,ht=i("87a0"),dt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.$root.modeReady?i("div",{staticClass:"tubing"},[i("div",{staticClass:"preview-background",style:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px",background:"rgba(0,0,0,.4)"}},[i("canvas",{ref:"canvasRef",staticStyle:{position:"fixed","z-index":"1000"},style:{transform:"rotate("+this.$root.projectData.rotate+"deg)"},attrs:{id:"tubeCanvas"}})]),i("div",{staticClass:"color-picker",style:{cursor:"crosshair",position:"fixed",display:"block",width:t.windowWidth+"px",height:t.windowHeight+"px",left:"0px",top:"0px"},on:{mousedown:t.handleMouse,mousemove:t.handleMouse,mouseleave:function(e){t.showSelect=!1},click:t.handleClick,contextmenu:function(e){return e.preventDefault(),t.handleClick(e)}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showSelect||!0,expression:"showSelect || true"}],staticClass:"color-picker-selected",style:t.selectPosition,on:{mousemove:t.handleMouse}},[i("div",{staticClass:"color-picker-data"},t._l(t.matrix,(function(e,s){return i("div",{key:s,staticClass:"colors"},t._l(e,(function(t,e){return i("div",{key:e,class:t.isActive?"color-active":"color-content-wrapper",style:{backgroundColor:t.backgroundColor,zIndex:t.isActive?1:0}})})),0)})),0),i("input",{directives:[{name:"model",rawName:"v-model",value:t.activeHex,expression:"activeHex"}],staticClass:"color-hex",attrs:{type:"text",id:"cat_pick_color_color_hex"},domProps:{value:t.activeHex},on:{input:function(e){e.target.composing||(t.activeHex=e.target.value)}}})])]):t._e()},ut=[],pt=i("5aa7"),ft=(i("54c2"),i("fe94")),mt=(i("cc8d"),{data(){return{top:0,left:0,windowWidth:0,windowHeight:0,selectWidth:"100vw",selectHeight:"100vh",canvasWidth:0,canvasHeight:0,status:!1,matrix:[],activeHex:"",copy:!1,content:null,showSelect:!0}},computed:Object(a["a"])(Object(a["a"])({},Object(tt["mapState"])(["scale","tubePosition","isInside"])),{},{position(){return`width:${this.selectWidth}px;height:${this.selectHeight}px`},selectPosition(){return`top: ${this.top+10}px;left:${this.left+10}px;display:block;`},cLeft(){return this.tubePosition.left||0},cTop(){return this.tubePosition.top||0}}),beforeDestroy(){window.removeEventListener("keydown",this.onKeyDown)},mounted(){var t;window.addEventListener("keydown",this.onKeyDown),this.windowWidth=document.body.clientWidth,this.windowHeight=document.body.clientHeight;let e=null===(t=document.getElementById("svgContainer"))||void 0===t?void 0:t.getBoundingClientRect();e&&(this[ht["z"]]({left:e.x+Object(ft["a"])(50).mm2px()*this.scale,top:e.y+Object(ft["a"])(50).mm2px()*this.scale}),this.$nextTick(()=>{this.drawCanvas()}))},methods:Object(a["a"])(Object(a["a"])({},Object(tt["mapMutations"])([ht["z"]])),{},{onKeyDown(t){"Escape"===t.key&&this.$emit("confirm")},pixelToRgba(t){const e="rgba("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]/255+")";return{rgba:e,r:t[0],g:t[1],b:t[2]}},rgbToHex(t,e,i){return((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},handleClick(t){if(2===t.button)return void this.$emit("confirm");const e=document.getElementById("cat_pick_color_color_hex");e.focus(),e.select(),document.execCommand("copy"),this.copy=!0,this.$emit("confirm",this.activeHex),setTimeout((function(){this.status=!1}),400)},chunks(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],i=[],s=0;s<t.length;s+=e)i.push(t.slice(s,s+e));return i},getComputedLeftTop(t,e,i,s){const n=this.$root.projectData.rotate;return 90===n||270===n?[t+i/2-s/2,e+s/2-i/2]:[t,e]},getComputedXY(t,e,i,s){const n=this.$root.projectData.rotate;return 0===n?[t,e]:90==n?[e,i-t]:180===n?[i-t,s-e]:[s-e,t]},async drawCanvas(){var t;const e=null===(t=document.querySelector("#svgContainer"))||void 0===t?void 0:t.getBoundingClientRect();if(!e)return;const i=this.$refs.canvasRef,s=e.width-100*et["DPI"]*this.scale,n=e.height-100*et["DPI"]*this.scale,[a,r]=this.getComputedLeftTop(e.x,e.y,s,n);i.style.left=a+50*et["DPI"]*this.scale+"px",i.style.top=r+50*et["DPI"]*this.scale+"px",i.width=s,i.height=n,90!==this.$root.projectData.rotate&&270!==this.$root.projectData.rotate||(i.height=s,i.width=n),this.content=i.getContext("2d");const o=new pt["a"](this.$root.projectData,this.$root.knifeData);await o.draw(i.width,i.height,1*this.scale*et["DPI"],this.isInside?"in":"out",i),this.canvasWidth=s,this.canvasHeight=n,this.$nextTick(()=>{i.style.display="block"})},handleMouse(t){var e=this;if(this.showSelect=!0,"mousemove"===t.type||"mousedown"===t.type){let i=t.clientX-this.cLeft,s=t.clientY-this.cTop;[i,s]=this.getComputedXY(i,s,this.canvasWidth,this.canvasHeight),i=parseInt(i),s=parseInt(s);let n=i-5,a=s-5;if(this.content){let t="",r=this.content.getImageData(n,a,11,11),o=this.chunks(r.data,4),l=this.chunks(o.map((function(t){return e.pixelToRgba(t)})),11);this.matrix=l.map((r,o)=>r.map((r,l)=>{var c=n+l,h=a+o,d=i===c&&s===h;return d&&(t=e.rgbToHex(r.r,r.g,r.b).toUpperCase()),{isActive:d,backgroundColor:r.rgba}})),this.activeHex="#"+t}this.top=t.clientY,this.left=t.clientX}}})}),gt=mt,vt=(i("c9b8"),Object(p["a"])(gt,dt,ut,!1,null,"bb3f1486",null)),bt=vt.exports,yt={components:{Sketch:ct,Tubing:bt},computed:{displayedColor(){return this.value||"rgba(0,0,0,1)"},colorSize(){return this.size},colorDisabled(){return this.disabled}},data(){return{color:{},showPanelColor:!1,showPicker:!1,visible:!1,tvisible:!1}},watch:{value(t){this.color=Object(l["a"])(t),this.$nextTick(()=>{var t;null===(t=this.$refs.sketch)||void 0===t||t.handleAdjust()})}},props:{cmyk:{type:String,default:""},title:{type:String,default:""},value:{type:String,default:"rgba(0,0,0,1)"},size:{type:String,default:"medium"},disabled:{type:Boolean,default:!1},historyColors:{type:[Object,Array],default:()=>[]},optionalColors:{type:Array,default:Array},showPrint:{type:Boolean,default:!0},showTakeColor:{type:Boolean,default:!0},placement:{type:String,default:"bottom"},showOpacity:{type:Boolean,default:!0}},async mounted(){this.color=Object(l["a"])(this.value)},methods:Object(a["a"])(Object(a["a"])({},Object(tt["mapMutations"])([ht["A"]])),{},{handleHide(){this.visible=!1},handleChoose(t){this.tvisible=!1,t&&(this.color=Object(l["a"])(t),this.$nextTick(()=>{this.visible=!0,this.handleConfirm({color:this.color,cmyk:""}),this[ht["A"]](!1)}))},handleTubing(){this[ht["A"]](!0),this.visible=!1,this.tvisible=!0},handleVisible(t){t?this.handleShow():this.handleHide()},handleShow(){this.visible=!0},handleHistory(t){this.$emit("history",t)},handleConfirm({color:t,cmyk:e}){this.$emit("confirm",{rgba:this.displayedRgb(t),cmyk:JSON.stringify(e)})},handleTrigger(){this.colorDisabled||(this.showPicker=!this.showPicker)},confirmValue(t){this.$emit("onConfirm",t)},displayedRgb(t){const{r:e,g:i,b:s,a:n}=t.rgba;return`rgba(${e}, ${i}, ${s}, ${n})`}})},_t=yt,xt=(i("269d"),Object(p["a"])(_t,s,n,!1,null,null,null));e["a"]=xt.exports},7041:function(t,e,i){"use strict";var s=i("6f1f"),n=i.n(s);n.a},"709c":function(t,e,i){},"70ab":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"fo-14 bold title"},[t._v("操作")]),s("div",{staticClass:"flex flex-start item-center px-12"},[s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",{staticClass:"fo-12"},[t._v("复制")])]),s("div",{staticClass:"opt-btn ml-4",on:{click:t.copyClick}},[s("img",{attrs:{src:i("f522")}})])],2),s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",{staticClass:"fo-12"},[t._v("删除")])]),s("div",{staticClass:"opt-btn ml-4 ",on:{click:function(e){return t.delClick()}}},[s("img",{attrs:{src:i("6925")}})])],2)],1),s("div",{staticClass:"mt-24 flex flex-between item-center light-color px-16"},[s("div",{staticClass:"fo-14 pfow"},[t._v("灯光颜色")]),s("Pallet",{attrs:{value:t.lightColor,title:"灯光颜色",historyColors:[],showPrint:!1,showTakeColor:!1,showOpacity:!1,placement:"topRight"},on:{confirm:t.colorConfirmLight}})],1),s("div",{staticClass:"px-16"},[s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"fo-12 pfow "},[t._v("旋转")]),s("div",{staticClass:"light-render-input"},[s("input",{staticClass:"light-render-input",domProps:{value:t.lightPositionValue+t.lightPositionUnit},on:{focus:function(e){t.lightPositionUnit="",e.target.select()},blur:t.lightPositionInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.lightPositionInput(e)}}})])]),s("a-slider",{staticStyle:{"margin-top":"5px"},attrs:{max:360,min:0,step:1,"tip-formatter":function(t){return t+"°"}},on:{change:t.lightPositionChange,afterChange:function(e){return t.$emit("attch-history")}},model:{value:t.lightPositionValue,callback:function(e){t.lightPositionValue=e},expression:"lightPositionValue"}})],1),s("div",{staticClass:"px-16"},[s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"fo-12 pfow "},[t._v("亮度")]),s("div",{staticClass:"light-render-input"},[s("input",{staticClass:"light-render-input",domProps:{value:t.lightPowerValue+t.lightPowerUnit},on:{focus:function(e){t.lightPowerUnit="",e.target.select()},blur:t.lightPowerInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.lightPowerInput(e)}}})])]),s("a-slider",{staticStyle:{"margin-top":"5px"},attrs:{max:1e3,min:0,step:1,"tip-formatter":function(t){return t+"%"}},on:{change:t.lightPowerChange,afterChange:function(e){return t.$emit("attch-history")}},model:{value:t.lightPowerValue,callback:function(e){t.lightPowerValue=e},expression:"lightPowerValue"}})],1),s("div",{staticClass:"px-12"},[s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"fo-12 pfow "},[t._v("高度")]),s("div",{staticClass:"light-render-input"},[s("input",{staticClass:"light-render-input",domProps:{value:t.lightHeightValue+t.lightHeightUnit},on:{focus:function(e){t.lightHeightUnit="",e.target.select()},blur:t.lightHeightInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.lightHeightInput(e)}}})])]),s("a-slider",{staticStyle:{"margin-top":"5px"},attrs:{max:5,min:0,step:.01,"tip-formatter":function(t){return t+"m"}},on:{change:t.lightHeightChange,afterChange:function(e){return t.$emit("attch-history")}},model:{value:t.lightHeightValue,callback:function(e){t.lightHeightValue=e},expression:"lightHeightValue"}})],1)])},n=[],a=i("6116"),r=i("7018"),o={components:{Pallet:r["a"]},data(){return{lightColor:"rgba(255,255,255,1)",lightPositionValue:45,lightPowerValue:100,lightHeightValue:2.5,lightPositionUnit:"°",lightPowerUnit:"%",lightHeightUnit:"m"}},mounted(){this.getCurrentLight()},beforeDestroy(){this.$bus.$off("getCurrentLight")},methods:{copyClick(){this.$bus.$emit("doLightCopy")},delClick(){this.$bus.$emit("doLightDel")},getCurrentLight(){this.$bus.$on("getCurrentLight",t=>{this.lightHeightValue=t.position.y,this.intensity=100*t.light.intensity;const e=Math.atan2(t.position.z,t.position.x);let i=e/(2*Math.PI)*360;i+=180,i<0&&(i+=360),i>=360&&(i-=360),this.lightPositionValue=parseInt(i),this.lightColor=t.light.color})},colorConfirmLight(t){this.lightColor=t.rgba,this.$bus.$emit("lightCurrentColorChange",t.rgba)},lightPositionInput(t){"blur"===t.type&&(this.lightPositionUnit="°");let e=0;t.target.value&&(e=parseInt(Object(a["c"])(t.target.value))),e>360&&(e=360),e<0&&(e=0),this.lightPositionValue!=e&&(this.lightPositionValue=e),this.lightPositionChange(e)},lightPositionChange(t){const e=5*Math.cos((t+90)*Math.PI/180),i=5*-Math.sin((t+90)*Math.PI/180);this.$bus.$emit("lightCurrentPositionChange",{x:i,z:e})},lightPowerInput(t){"blur"===t.type&&(this.lightPowerUnit="%");let e=0;t.target.value&&(e=parseFloat(Object(a["c"])(t.target.value))),e>100&&(e=100),e<0&&(e=0),this.lightPowerValue!=e&&(this.lightPowerValue=e),this.lightPowerChange(e)},lightPowerChange(t){this.$bus.$emit("lightCurrentPowerChange",t/100)},lightHeightInput(t){"blur"===t.type&&(this.lightHeightUnit="m");let e=0;t.target.value&&(e=parseFloat(Object(a["c"])(t.target.value))),e>5&&(e=5),e<0&&(e=0),this.lightHeightValue!=e&&(this.lightHeightValue=e),this.lightHeightChange(e)},lightHeightChange(t){this.$bus.$emit("lightCurrentHeightChange",t)}}},l=o,c=i("2877"),h=Object(c["a"])(l,s,n,!1,null,null,null);e["default"]=h.exports},"70b0":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=i("4b23"),a=o(n),r=i("f08e");function o(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function h(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var d=function(t){function e(t,i){return l(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r.B_START_CHAR+t,i))}return h(e,t),s(e,[{key:"valid",value:function(){return new RegExp("^"+r.B_CHARS+"+$").test(this.data)}}]),e}(a.default);e.default=d},"70bf":function(t,e,i){t.exports=i.p+"editor-assets/img/ro-d.c8bc0173.svg"},"70ce":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.data.style?i("section",{staticClass:"flex flex-between mt-16",staticStyle:{"flex-wrap":"wrap"}},[i("a-tooltip",[i("template",{slot:"title"},[t._v("文字竖排")]),i("div",{class:"box-button "+(t.data.style.vertical?"actived":""),on:{click:t.onSwitchStyleV}},[i("i",{staticClass:"iconfont"},[t._v("")])])],2)],1):t._e()},n=[],a=i("5530"),r=i("5880"),o={props:["data"],computed:Object(a["a"])({},Object(r["mapState"])(["scale","isInside"])),methods:{onSwitchStyleV(){this.data.style.vertical=1-this.data.style.vertical||0;let t=this.data.style.width,e=this.data.style.height;this.data.style.width=e,this.data.style.height=t,this.$store.commit("increaseCanvasVersion",this.isInside)}}},l=o,c=(i("9300"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,"270a3648",null);e["default"]=h.exports},"70d4":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"editpr-newpro"},[s("a-modal",{attrs:{centered:"",title:"新建设计",footer:null,width:"928px"},on:{close:function(e){t.dialogVisible=!1}},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[s("div",{staticClass:"w-100 flex flex-end item-center"},[s("div",{staticClass:"mysesign-btn flex flex-center item-center"},[s("img",{attrs:{src:i("222b")}}),s("div",{staticClass:"fo-14 ml-4 fo-theme",on:{click:t.toBlankWinodw}},[t._v("我的设计")])]),s("a-input-search",{staticClass:"ml-8",staticStyle:{width:"200px",height:"36px"},attrs:{placeholder:"搜索 模型编号/关键词"},on:{search:t.onSearch},model:{value:t.query.keyword,callback:function(e){t.$set(t.query,"keyword",e)},expression:"query.keyword"}})],1),s("div",{staticClass:"mt-16 editpr-newpro__panel "},[s("div",{class:"flag-item fo-14 "+(-1===t.cateFlag&&"flag-item-active"),on:{click:function(e){return t.changeCate(-1,"")}}},[t._v(" 全部 ")]),t._l(t.cate,(function(e,i){return s("div",{key:i,class:"flag-item fo-14 "+(t.cateFlag===i&&"flag-item-active"),on:{click:function(s){return t.changeCate(i,e.id)}}},[t._v(" "+t._s(e.cate_name)+" ")])}))],2),s("a-spin",{attrs:{spinning:t.loading}},[s("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"}),s("div",{staticClass:"editpr-newpro__content flex flex-start flex-wrap"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&0===t.list.length,expression:"!loading && list.length === 0"}],staticClass:"nodata flex flex-center item-center"},[s("div",[s("img",{attrs:{src:i("e597")}}),s("div",{staticClass:"fo-14 mt-12 text-center"},[t._v("暂无模型，去别处逛逛~")])])]),t._l(t.list,(function(e,i){return s("div",{key:i,staticClass:"good-item"},[s("Good",{attrs:{good:e},on:{open:function(i){return t.createBlank(e)},collect:t.handleCollect}})],1)}))],2)],1),s("div",{staticClass:"flex flex-end mt-16"},[s("a-pagination",{attrs:{size:"small",total:t.query.count,defaultPageSize:t.query.pageSize,showQuickJumper:""},on:{change:t.handlePagination},model:{value:t.query.currentPage,callback:function(e){t.$set(t.query,"currentPage",e)},expression:"query.currentPage"}})],1)],1)],1)},n=[],a=(i("1276"),i("5530")),r=i("abfd"),o=i("365c"),l=(i("5880"),{props:["visible"],components:{Good:r["default"]},data(){return{dialogVisible:this.visible,query:{keyword:"",cate_id:"",currentPage:1,pageSize:8,count:0},onload:!1,cateFlag:-1,cate:[],list:[],loading:!1,kload:!1}},model:{prop:"visible",event:"change"},watch:{visible(t){this.dialogVisible=t,t&&!this.onload&&(this.getCate(),this.getList(),this.onload=!0)},dialogVisible(t){this.$emit("change",t)}},methods:{handleCollect(t){Object(o["addTempCollection"])({type_id:t}).then(t=>{this.getList(),this.$message.success("操作成功")}).catch(t=>{this.$message.error("操作失败")})},toBlankWinodw(){window.open("/mydesign")},changeCate(t,e){this.cateFlag=t,this.query.cate_id=e,this.query.currentPage=1,this.getList()},onSearch(t){this.query.currentPage=1,this.query.keyword=t,this.getList()},getCate(){this.$api.templates.cateList({currentPage:1,pageSize:100,field:"id,cate_name"}).then(t=>{t&&(this.cate=t.data.data)})},handlePagination(){this.getList()},getList(){this.loading=!0,this.$api.templates.getBlankModel(this.query).then(t=>{t&&(this.query.count=t.data.count,this.list=t.data.data.map(t=>Object(a["a"])(Object(a["a"])({},t),{keyArr:t.keywords?t.keywords.split(","):[],flag:0})))}).finally(()=>{this.loading=!1})},createBlank(t){this.$api.material.science({science_type:1,currentPage:1,pageSize:1e3}).then(e=>{if(!e)return;const i=e.data.data,s=i.find(e=>e.id===t.def_science_id);s&&Object(o["createDesignByBlank"])({length:t.length,width:t.width,height:t.height,size_type:"id",thickness:s.thickness,science_id:t.def_science_id,science_name:s.science_name,cate_id:t.cate_id}).then(t=>{this.loading=!1,t&&(this.visibleValue=!1,window.location.href="/design?id="+t.data.id+"&type=blank")})})}}}),c=l,h=(i("c27a"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,null,null);e["default"]=d.exports},7113:function(t,e,i){"use strict";var s=i("bdc2"),n=i.n(s);n.a},"716d":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAAC+W0ztAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAACAElEQVRYCWNgGOmAkdwAyCzo8GT8zzgTpP8/4//06RMqtpNjFgs5mkB6wJb//y8LZjOAHSJHjllM5GgC64FajsEm0UDyHUCiRbiUjzpgNARGQ4Cogig0NJRZTMxc5tUruSerV4f9xZWlYOJZWQ08bGz8vBMmFD6HieGiCUZBQkGDgKikybn/zH8eiEreu5yT062IyzCQeGZ+eygDC8ezX/9+PsvK75yITy1IjqADuP9yRAJLez2oQZp/mf4ewOWIrPyucGARvQyolhes/v//vIKCfkmoXqwUQQf8+/8PJRiBtZccyBHopoEsZ/j/bwlQHDlaP//69fEzulpkPlG1YXZe54L/DP/jkTViYf8BiiFb/gdYS0ZNn1i5GotauBDBEACpFBX6nsTwn2ERXBd2BorlDIxMMYQsBxnDjN0sVNEDBw789/ay2fT1G4siAyODPqosBu8PyPJpE8tWYshgESDKASB9RDqCJMtB5hLtACIcQbLlJDsA2RHfvrOoAvm6ILH/DAx/GUkIdpAeGCAqF8AUo9OZOR1RTIwMSowsjDum9JefQZcfEnyUEMjNbTf8y8jUAgxUcdq4nvEl8/9/NZMnV56HmY+cd0ERuRxouTpMkvr0f5AdykBzNWBmoxdEAjAJGtIodqA4gImRKRsYJy9pZTnIbJAdtDJ/1NyhGQIAjKWfq+iDKo4AAAAASUVORK5CYII="},"717d":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-popover",{attrs:{trigger:"click",placement:"topRight","overlay-class-name":"ant-no-padding"}},[s("template",{slot:"content"},[t.showShortcutPanel?t._e():s("div",{staticClass:"menu"},[s("div",{staticClass:"menu-item",on:{click:function(e){return t.goLink("https://help.baoxiaohe.com/category/shipin/")}}},[s("i",{staticClass:"iconfont icon-xinshoujiaocheng"}),s("div",{staticClass:"title"},[t._v("新手教程")])]),s("div",{staticClass:"menu-item",on:{click:function(e){return t.goLink("https://help.baoxiaohe.com/support/")}}},[s("img",{attrs:{src:i("8fb1"),alt:""}}),s("div",{staticClass:"title"},[t._v("帮助中心")])]),s("div",{staticClass:"menu-item",on:{click:function(e){t.showShortcutPanel=!0}}},[s("img",{attrs:{src:i("3bf5")}}),s("div",{staticClass:"title"},[t._v("快捷键")])]),s("Service",[s("div",{staticClass:"menu-item"},[s("img",{attrs:{src:i("457e")}}),s("div",{staticClass:"title"},[t._v("在线客服")])])]),s("div",{staticClass:"menu-item",on:{click:function(e){return t.goLink("https://www.wenjuan.com/s/7fuAF3/")}}},[s("img",{attrs:{src:i("fcde")}}),s("div",{staticClass:"title"},[t._v("反馈与建议")])])],1),t.showShortcutPanel?s("div",{staticClass:"shortcut-panel"},[s("div",{staticClass:"item flex flex-between"},[s("div",[t._v("快捷键")]),s("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){t.showShortcutPanel=!1}}})]),t._l(t.$data.$shortcuts,(function(e,i){return s("div",{key:i,staticClass:"item flex flex-between item-center"},[s("div",{staticClass:"fo-14 bold"},[t._v(t._s(e.label))]),s("div",{staticClass:"fo-14"},[t._v(t._s(t.isMac?e.mac:e.win))])])}))],2):t._e()]),s("div",{staticClass:"btn-wrap",on:{mouseenter:function(e){t.isHover=!0},mouseleave:function(e){t.isHover=!1}}},[t.isHover?s("img",{attrs:{src:i("1df2")}}):t._e(),t.isHover?t._e():s("img",{attrs:{src:i("d4c2")}}),s("div",{staticClass:"fo-12 fo-gray text-center"},[t._v("帮助")])])],2)},n=[],a=i("0d67"),r={components:{Service:a["a"]},data(){return{isHover:!1,showShortcutPanel:!1,$shortcuts:[{label:"撤销",mac:"⌘ + Z",win:"Ctrl + Z"},{label:"恢复",mac:"⌘ + Shift + Z",win:"Ctrl + Shift + Z"},{label:"全选",mac:"⌘ + A",win:"Ctrl + A"},{label:"复制",mac:"⌘ + C",win:"Ctrl + C"},{label:"粘贴",mac:"⌘ + V",win:"Ctrl + V"},{label:"剪切",mac:"⌘ + X",win:"Ctrl + X"},{label:"保存",mac:"⌘ + S",win:"Ctrl + S"},{label:"锁定/取消锁定",mac:"⌘ + L",win:"Ctrl + L"},{label:"移动画布",mac:"空格 + 鼠标拖拽",win:"空格 + 鼠标拖拽"},{label:"移动元素",mac:"←↑↓→",win:"←↑↓→"}]}},computed:{isMac(){const t=navigator.userAgent.toLowerCase();return/macintosh|mac os x/i.test(t)}},methods:{goLink(t){window.open(t,"_blank")}}},o=r,l=(i("ed71"),i("2877")),c=Object(l["a"])(o,s,n,!1,null,"35e9017f",null);e["default"]=c.exports},"71b0":function(t,e,i){},"71b6":function(t,e,i){"use strict";var s=i("40b6"),n=i.n(s);n.a},"721a":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=i("fd7c"),a=o(n),r=i("ab5b");function o(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=function(){function t(e,i,s){l(this,t),this.canvas=e,this.encodings=i,this.options=s}return s(t,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var t=0;t<this.encodings.length;t++){var e=(0,a.default)(this.options,this.encodings[t].options);this.drawCanvasBarcode(e,this.encodings[t]),this.drawCanvasText(e,this.encodings[t]),this.moveCanvasDrawing(this.encodings[t])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var t=this.canvas.getContext("2d");t.save(),(0,r.calculateEncodingAttributes)(this.encodings,this.options,t);var e=(0,r.getTotalWidthOfEncodings)(this.encodings),i=(0,r.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=e+this.options.marginLeft+this.options.marginRight,this.canvas.height=i,t.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(t.fillStyle=this.options.background,t.fillRect(0,0,this.canvas.width,this.canvas.height)),t.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(t,e){var i,s=this.canvas.getContext("2d"),n=e.data;i="top"==t.textPosition?t.marginTop+t.fontSize+t.textMargin:t.marginTop,s.fillStyle=t.lineColor;for(var a=0;a<n.length;a++){var r=a*t.width+e.barcodePadding;"1"===n[a]?s.fillRect(r,i,t.width,t.height):n[a]&&s.fillRect(r,i,t.width,t.height*n[a])}}},{key:"drawCanvasText",value:function(t,e){var i,s,n=this.canvas.getContext("2d"),a=t.fontOptions+" "+t.fontSize+"px "+t.font;t.displayValue&&(s="top"==t.textPosition?t.marginTop+t.fontSize-t.textMargin:t.height+t.textMargin+t.marginTop+t.fontSize,n.font=a,"left"==t.textAlign||e.barcodePadding>0?(i=0,n.textAlign="left"):"right"==t.textAlign?(i=e.width-1,n.textAlign="right"):(i=e.width/2,n.textAlign="center"),n.fillText(e.text,i,s))}},{key:"moveCanvasDrawing",value:function(t){var e=this.canvas.getContext("2d");e.translate(t.width,0)}},{key:"restoreCanvas",value:function(){var t=this.canvas.getContext("2d");t.restore()}}]),t}();e.default=c},7235:function(t,e,i){},7262:function(t,e,i){"use strict";var s=i("7984"),n=i.n(s);n.a},"72e5":function(t,e,i){},"72f9":function(t,e,i){},7347:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEhklEQVRYR8VXXWxTZRh+n9PvdFP5EWjL2Aj4MxliYhQhwQt1MyEaTNzWihf+XHijAb3RaIwRB4LcGCUxBkw0xitJjLalJhAixs1oImaiF+JCkUQz2WRtwbiibj2n5zHfOWtdR3vaLjE7d+ec9+f5nvf3gzT48KcNQfvnXA/IB0luoKAdlHatTsg4hOMARgh8qm4KDeKWkUIjplFPiEfDbcUpDhDyKClL6snr/4BMgvJhoBV78UD2gp9OTQA81tliT0++LA6fo/Aazwh+AHhEAuorVbTHZBnG3c9/sN0OqA4p2neR6BPh7a604C8xcEC1LNmPbeemqwGpCkCf2p6WJMkt3onwiQqYu9A7nm6EAabau+yi9RrJh2b0T6oW6a/GxhUAmIrcahedo6SsFsEvIsYjwdjEyUYcz5UpxFduEXEOi/B6QM4rI7ANfRM/zparAOCdnMPaOYAvlQRjiI5dnI/zkg4THStsKcRJ3uOCaMHm2UyUAbgxn/pzSNPuOl+zZis2nbLqOWc8tErWrs35yfK7O0x7dPSEBwInVevS7lJOlAFYycheOs4rmnYTwc1+J2cycqNNviXCu0lZDJEiRc4YMAZUNJOoBlozYbEw7IbDMPaZ/ZkBL1F1HWvqp+Scl+2BO/1ibiXbusUpHqPwqqpZDeMFM5p5o9o/LyeK3+jqUK3SqUPhArDjoUOOyA6d7WY0u70W7Txxw1I7P3naS1C3OhJCOUVIJ8jHKGJC8I9SrZ3o/c0r0TmPlQh/rKvDEHlHxXI74Xa4dCarm4ypguv9Ss1Ohh92HH40Q92AGcvtK9kvJCM7xHEO6XdDjKiKZZJVQ5Fq77LswhndrFRXJAzrSOQ+Fp3juskEY9mNfklXyhNAqCgdiOV+L2f7jGEXnGG8aPZnXq9lqxAPf6+bFQLG/bCT4YOOw52A7Dajub1+ANwYovi+AQyp/uzTs2WtRGQr6XzmfjPkqWB/7t1atqxEaICUVw0Dh2AlQoOkdEOpe83eC4P1yq4qrcdXL7f+nvpaKDcDmFYtcp3fDLBSbT207S8AGUIhEU4Luc6EdCGaO9ssAJ2YVj4/JORtM/Q/b/Zn3vSzw0RonUVJC3AWVjycp3CRuRyL0ZO93AwAcnvATg5+rhl09WC8F4xmnqxng4PhRdYl5iG4/B8AtWIJetP5esqz/xcSoWeFcmDm22Ez+szjwB6nng2muhZb9sVJQPLzDsHM6UeplxLIiNl67cZaI3cuoMoQzDMJ9cjV9ewyD+wyo9n99U5e+l+RhM2UYQX9qVWbxLaG3apDoE9FJ1INA6gowyYa0WwHHOxW9qXTLwmMKbXs6rfR8+tUowAqGlEzrbhRB74lOLcVa+FGh1FFCNyu6Bz0Op+xM9g38W0jAK8YRlqpmXFcclJqYF79SzoYza2vB6DmONaKzSwkrnw8dJ4iHZ5/GTNjOXdE13p8FxKXhSZXMjuxspdS/MADEHjCrwoaWsnKoWhiKSX3GCK7CYB+J29oKS0ZWNC1vAxiIS8mZRALeTWr6HgLdTmdm1T/1/X8Xyw7/IQb7G0rAAAAAElFTkSuQmCC"},"73b3":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"template-panel-wrap"},[s("div",{staticClass:"flex item-center"},[t.isRecommended?t._e():s("a-icon",{staticClass:"mr-10",attrs:{type:"left"},on:{click:t.onSwitchRecommended}}),s("div",{staticClass:"search-wrap flex item-center px-12 pr-8"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.templateQuery.keywords,expression:"templateQuery.keywords"}],staticClass:"fo-14",attrs:{type:"text",placeholder:"输入模板关键字"},domProps:{value:t.templateQuery.keywords},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearchTemplate(e)},input:function(e){e.target.composing||t.$set(t.templateQuery,"keywords",e.target.value)}}}),s("img",{staticClass:"ml-auto",attrs:{src:i("bb14")},on:{click:t.onSearchTemplate}})])],1),t.isRecommended?s("perfect-scrollbar",{staticClass:"scrollbar-wrap"},[t.recommendedModels&&t.recommendedModels.length?s("div",{staticClass:"title-wrap"},[s("div",{staticClass:"title"},[t._v("空白模板")]),s("div",{staticClass:"more",on:{click:t.onClickMoreModel}},[t._v(" 更多 "),s("i",{staticClass:"iconfont icon-jiantouyou1 f-12"})])]):t._e(),s("model-list",{attrs:{data:t.recommendedModels},on:{click:t.onChooseModel}}),t._l(t.recommendedTemplateRes,(function(e,i){return s("div",{key:i},[e.templates&&e.templates.length?s("div",{staticClass:"title-wrap"},[s("div",{staticClass:"title"},[t._v(t._s(e.tags.name))]),s("div",{staticClass:"more",on:{click:t.onClickMoreTemplate}},[t._v(" 更多 "),s("i",{staticClass:"iconfont icon-jiantouyou1 f-12"})])]):t._e(),s("template-list",{attrs:{data:e.templates.slice(0,4)},on:{click:t.onChooseTemplate}})],1)}))],2):t._e(),t.isModel?s("perfect-scrollbar",{staticClass:"scrollbar-wrap",on:{"ps-y-reach-end":t.onAjaxMoreModel}},[s("model-list",{attrs:{data:t.modelRes.list},on:{click:t.onChooseModel}}),t.modelRes.list&&t.modelRes.list.length?s("div",{staticClass:"c-999 text-center mt-12"},[t.loading?s("span",[t._v("加载中...")]):t._e(),t.loading||t.modelRes.hasMore?t._e():s("span",[t._v("没有更多了")])]):t._e(),t.modelRes.list.length?t._e():s("no-data")],1):t._e(),t.isTemplate?s("perfect-scrollbar",{staticClass:"scrollbar-wrap",on:{"ps-y-reach-end":t.onAjaxMoreTemplate}},[s("template-list",{attrs:{data:t.templateRes.list},on:{click:t.onChooseTemplate}}),t.templateRes.list&&t.templateRes.list.length?s("div",{staticClass:"c-999 text-center mt-12"},[t.loading?s("span",[t._v("加载中...")]):t._e(),t.loading||t.templateRes.hasMore?t._e():s("span",[t._v("没有更多了")])]):t._e(),t.templateRes.list.length?t._e():s("no-data")],1):t._e(),s("a-modal",{attrs:{visible:!!t.createProjectForm.id,width:480,"overlay-class-name":"ant-no-padding",title:"创建新的设计"},on:{ok:t.handleOk,cancel:t.handleCancel}},[s("div",{staticClass:"template-panel__ant-model-wrap"},[s("div",{staticClass:"text"},[t._v("确定保存当前设计，并创建新的设计吗 ？")])])])],1)},n=[],a=(i("ddb0"),i("5530")),r=i("8537"),o=i("2269"),l=i("c44a"),c=i("5880"),h=i("c6d2"),d={components:{templateList:r["default"],modelList:o["default"],noData:l["default"]},data(){return{templateQuery:{category:"",tagIds:"",keywords:"",current:1,pageSize:20},templateRes:{list:[],hasMore:!0},modelQuery:{current:1,pageSize:20},modelRes:{list:[],hasMore:!0},loading:!1,recommendedTemplateRes:{},recommendedModels:[],curTab:"recommended",createProjectForm:{type:"",id:"",item:{}}}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(c["mapState"])("profile",["accessToken"])),Object(c["mapState"])("editor-v2",["project_data","knife_data","localHistory","last_saved_local_history_ts"])),{},{isRecommended(){return"recommended"===this.curTab},isTemplate(){return"template"===this.curTab},isModel(){return"model"===this.curTab},id(){return this.$route.query.id}}),mounted(){this.isRecommended?(this.ajaxRecommendedModels(),this.ajaxRecommendedTemplates()):this.ajaxTemplates()},methods:{onSwitchMergeCurDesign(t){this.is_merge_cur_design=t.target.checked},showConfirmModel(t,e,i){this.createProjectForm.type=t,this.createProjectForm.id=e,this.createProjectForm.item=i},async saveProjectAndScreenshot({knifeData:t,projectData:e,isAuto:i=!0}){try{const s=JSON.parse(JSON.stringify(e));s.isAuto=i?1:0;const n=await Object(h["a"])(t,s);if(1e3===n.errno)return!1;n.data&&n.data.url&&(s.screenshot=n.data.url),this._saveProject(s)}catch(s){}},_saveProject(t){[...t.design_data,...t.inside_design_data].forEach(t=>{t._selected=!1,t._loaded=!1});const e={project_id:t.id,project_name:t.project_name,background:t.background,background_filter:t.background_filter,background_cmyk:t.background_cmyk,cate_id:t.cate_id,color_history:JSON.stringify(t.color_history),design_data:JSON.stringify(t.design_data),face_background:JSON.stringify(t.face_background),inside_design_data:JSON.stringify(t.inside_design_data),inside_face_background:JSON.stringify(t.inside_face_background),inside_background:t.inside_background,inside_background_filter:t.inside_background_filter,inside_background_cmyk:t.inside_background_cmyk,membrane_id:t.membrane_id,line_guides:JSON.stringify(t.line_guides),is_temp:t.is_temp,isAuto:t.isAuto,rotate:t.rotate%360,show_bleed_line:t.show_bleed_line,show_material:t.show_material};t.screenshot&&"string"===typeof t.screenshot&&(e.screenshot=t.screenshot),e.editType=this.type,this.$store.commit("editor-v2/set_project_is_saving",!0),this.$http.put("/api/v2/projects",e).then(t=>{if(200!==t.code)return this.$message.error(t.msg||"操作失败"),void this.$store.commit("editor-v2/set_project_is_saving",!1);this.$store.commit("editor-v2/set_project_last_saved_ts",Date.now()),this.$store.commit("editor-v2/set_project_is_saving",!1)})},async handleOk(t){await this.saveProjectAndScreenshot({projectData:this.project_data,knifeData:this.knife_data,isAuto:!1});const{type:e,id:i,item:s}=this.createProjectForm;"model"===e?this.ajaxCreateNewProjectFromModel(i):"template"===e&&this.goTemplateProject(s),this.handleCancel()},handleCancel(){this.createProjectForm.type="",this.createProjectForm.id=null,this.createProjectForm.item={}},onClickMoreModel(){this.curTab="model"},onClickMoreTemplate(){this.curTab="template"},onSwitchRecommended(){this.curTab="recommended"},ajaxRecommendedModels(){this.loading=!0,this.$http.get("/api/v2/blanks/",{current:1,pageSize:4}).then(t=>{const{code:e,data:i,msg:s}=t;200!==e?this.$message.error(s):this.recommendedModels=i}).finally(()=>{this.loading=!1})},ajaxRecommendedTemplates(){this.$http.get("/api/v2/home/templates/popularity").then(t=>{const{code:e,data:i,msg:s}=t;200!==e?this.$message.error(s):this.recommendedTemplateRes=i})},ajaxModels(){this.loading=!0,this.$http.get("/api/v2/blanks/",this.modelQuery).then(t=>{const{code:e,data:i,msg:s}=t;200!==e?this.$message.error(s):i&&i.length?this.modelRes.list=[...this.modelRes.list,...i]:this.modelRes.hasMore=!1}).finally(()=>{this.loading=!1})},onAjaxMoreModel(){!this.loading&&this.modelRes.hasMore&&(this.modelQuery.current++,this.ajaxModels())},ajaxTemplates(){this.loading=!0,this.$http.get("/api/v2/modes",this.templateQuery).then(t=>{const{code:e,data:i,msg:s}=t;200!==e?this.$message.error(s):i&&i.length?this.templateRes.list=[...this.templateRes.list,...i]:this.templateRes.hasMore=!1}).finally(()=>{this.loading=!1})},onAjaxMoreTemplate(){!this.loading&&this.templateRes.hasMore&&(this.templateQuery.current++,this.ajaxTemplates())},onSearchTemplate(){this.loading||(this.curTab="template",this.templateRes.list=[],this.templateRes.hasMore=!0,this.templateQuery.current=1,this.ajaxTemplates())},onChooseModel(t){this.accessToken?t.id&&(this.id&&this.hasUnsavedChange()?this.showConfirmModel("model",t.id,t):this.ajaxCreateNewProjectFromModel(t.id)):this.showLoginDialog()},onChooseTemplate(t){this.accessToken?t.id&&(this.id&&this.hasUnsavedChange()?this.showConfirmModel("template",t.id,t):this.goTemplateProject(t)):this.showLoginDialog()},hasUnsavedChange(){return!!(!/baoxiaohe/.test(navigator.userAgent)&&this.localHistory&&this.localHistory.size()>0&&this.localHistory.getCurTs()!==this.last_saved_local_history_ts)},goTemplateProject(t){this.$router.push({path:"/design-v2",query:{id:t.project_id,mid:t.id,type:"preview"}})},ajaxCreateNewProjectFromTemplate(t){this.loading=!0,this.$http.post("/api/v2/projects",{project_type:2,template_id:parseInt(t)}).then(t=>{const{code:e,data:i,msg:s}=t;200!==e?this.$message.error(s||"接口返回错误"):this.$router.push({path:"/design-v2?id="+i.id})}).finally(()=>{this.loading=!1})},ajaxCreateNewProjectFromModel(t){this.loading=!0,this.$http.post("/api/v2/projects",{project_type:4,model_id:parseInt(t)}).then(t=>{const{code:e,data:i,msg:s}=t;200!==e?this.$message.error(s||"接口返回错误"):(log(i.id),this.$router.push({path:"/design-v2?id="+i.id}))}).finally(()=>{this.loading=!1})},showLoginDialog(){this.$store.commit("profile/SET_SHOW_LOGIN_MODAL",!0)}}},u=d,p=(i("6466"),i("c037"),i("2877")),f=Object(p["a"])(u,s,n,!1,null,"0652ef9a",null);e["default"]=f.exports},7406:function(t,e,i){t.exports=i.p+"editor-assets/img/render-camera.41d4ca55.svg"},7472:function(t,e,i){},"74c3":function(t,e,i){},"74cb":function(t,e){var i={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,i=.1,s=.4;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=s/4):e=s*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/s))},elasticOut:function(t){var e,i=.1,s=.4;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=s/4):e=s*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/s)+1)},elasticInOut:function(t){var e,i=.1,s=.4;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=s/4):e=s*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/s)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/s)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-i.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*i.bounceIn(2*t):.5*i.bounceOut(2*t-1)+.5}},s=i;t.exports=s},"74f4":function(t,e,i){"use strict";var s=i("408b"),n=i.n(s);n.a},"752b":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("721a"),n=c(s),a=i("be5e"),r=c(a),o=i("4ced"),l=c(o);function c(t){return t&&t.__esModule?t:{default:t}}e.default={CanvasRenderer:n.default,SVGRenderer:r.default,ObjectRenderer:l.default}},"752c":function(t,e,i){"use strict";var s=i("5eb5"),n=i.n(s);n.a},"754b":function(t,e,i){t.exports=i.p+"editor-assets/img/layer-dark.2808346d.svg"},"75aa":function(t,e,i){},"75f7":function(t,e,i){"use strict";var s=i("cf2e"),n=i.n(s);n.a},"76a5":function(t,e,i){var s=i("19eb"),n=i("6d8b"),a=i("e86a"),r=i("a73c5"),o=i("82eb"),l=o.ContextCachedBy,c=function(t){s.call(this,t)};c.prototype={constructor:c,type:"text",brush:function(t,e){var i=this.style;this.__dirty&&r.normalizeTextStyle(i,!0),i.fill=i.stroke=i.shadowBlur=i.shadowColor=i.shadowOffsetX=i.shadowOffsetY=null;var s=i.text;null!=s&&(s+=""),r.needDrawText(s,i)?(this.setTransform(t),r.renderText(this,t,s,i,null,e),this.restoreTransform(t)):t.__attrCachedBy=l.NONE},getBoundingRect:function(){var t=this.style;if(this.__dirty&&r.normalizeTextStyle(t,!0),!this._rect){var e=t.text;null!=e?e+="":e="";var i=a.getBoundingRect(t.text+"",t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.textLineHeight,t.rich);if(i.x+=t.x||0,i.y+=t.y||0,r.getStroke(t.textStroke,t.textStrokeWidth)){var s=t.textStrokeWidth;i.x-=s/2,i.y-=s/2,i.width+=s,i.height+=s}this._rect=i}return this._rect}},n.inherits(c,s);var h=c;t.exports=h},"76ca":function(t,e,i){t.exports=i.p+"editor-assets/img/d1.a8172215.svg"},"772a":function(t,e,i){"use strict";var s=i("2c06"),n=i.n(s);n.a},"77a8":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{visible:t.visible,title:"修改"+("image"===t.renderType?"图片":"视频")+"名称",width:300,zIndex:6002,footer:null,centered:""},on:{cancel:function(e){return t.$emit("change",!1)}}},[i("a-input",{attrs:{size:"large"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),i("a-button",{staticClass:"mt-20",attrs:{type:"primary",block:"",size:"large",loading:t.loading},on:{click:t.submit}},[t._v("提交修改")])],1)},n=[],a=i("5530"),r=i("5880"),o=i("365c"),l={model:{prop:"visible",event:"change"},props:{visible:{type:Boolean},name:{type:String},tempId:{type:Number}},computed:Object(a["a"])({},Object(r["mapGetters"])("render",["renderType"])),watch:{name(t){this.title=t}},data(){return{title:this.name,loading:!1}},methods:{submit(){this.title?(this.loading=!0,"image"===this.renderType?this.$api.project.renderImageUpdate({id:this.tempId,filename:this.title}).then(t=>{this.loading=!1,0===t.errno&&(this.$message.success(t.errmsg),this.$emit("update-success",{name:this.title,id:this.tempId}),this.$emit("change",!1))}):Object(o["taskInfoUpdate"])({task_id:this.tempId,title:this.title}).then(t=>{this.loading=!1,200===t.code&&(this.$message.success("修改成功"),this.$store.dispatch("render/saveUpdateName",{id:this.tempId,title:this.title}),this.$emit("change",!1))})):this.$message.error("请输入名称")}}},c=l,h=i("2877"),d=Object(h["a"])(c,s,n,!1,null,null,null);e["default"]=d.exports},"77c1":function(t,e,i){t.exports=i.p+"editor-assets/img/check.b83c382c.svg"},"77c6":function(t,e,i){},"77e8":function(t,e,i){t.exports=i.p+"editor-assets/img/light.83632cf2.svg"},7805:function(t,e,i){},7844:function(t,e,i){},7848:function(t,e,i){},"784e":function(t,e,i){},7877:function(t,e,i){},7892:function(t,e,i){"use strict";var s=i("a0b2"),n=i.n(s);n.a},7893:function(t,e,i){"use strict";var s=i("0c98"),n=i.n(s);n.a},"78da":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.previewImage?i("div",{staticClass:"preview"},[i("div",{staticClass:"big-image",style:{backgroundImage:"url("+t.previewImage+")"}})]):t._e()},n=[],a=i("5530"),r=i("5aa7"),o=i("5880"),l={data(){return{previewImage:null}},computed:Object(a["a"])({},Object(o["mapState"])("property",["crafts"])),methods:{async initImage(){const t=new r["a"](this.$root.projectData,this.$root.knifeData,!1),e=document.createElement("canvas"),i=260,s=this.$root.knifeData.totalX,n=this.$root.knifeData.totalY;s>=n?(e.width=i,e.height=i/s*n):(e.height=i,e.width=i/n*s);const a=e.width/s;await t.draw(e.width,e.height,a,"out",e,"",this.crafts),this.previewImage=e.toDataURL()}}},c=l,h=(i("8ac0"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,"1750a92d",null);e["default"]=d.exports},7910:function(t,e,i){},7984:function(t,e,i){},"79b2":function(t,e,i){"use strict";var s=i("4063"),n=i.n(s);n.a},"79f1":function(t,e,i){"use strict";function s(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=s},"79f3":function(t,e,i){},"7a01":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.p1&&t.p2?i("g",{staticClass:"clickable",on:{click:function(e){return t.$emit("click")}}},[i("path",{attrs:{d:t.computePath(),stroke:t.textColor,"stroke-width":t.arrowWidth,"stroke-linecap":"round","stroke-opacity":t.fillOpacity}}),i("text",{attrs:{x:t.textLocation[0],fill:t.textColor,y:t.textLocation[1],"text-anchor":t.textAnchor,"font-size":t.fontSize}},[t._v(" "+t._s(t.currentText)+" ")])]):t._e()},n=[],a=i("5530"),r=i("5880"),o=i("d323"),l={props:{p1:{type:[Object,String],default:null},p2:{type:[Object,String],default:null},lineName:{type:String,default:""},lineLength:{type:String,default:""},currentAxiasRemark:{type:String,default:null}},data(){return{arrowDegree:.25*Math.PI,textColor:"#ff6634",b0:null,b1:null,b2:null,b3:null,b4:null,b5:null}},methods:{computePath(){const t=this.sqrt(this.p1,this.p2),e=[-t/2,0],i=[Math.cos(this.arrowDegree)*this.arrowLength+e[0],Math.sin(this.arrowDegree)*this.arrowLength],s=[i[0],-i[1]],n=[-i[0],i[1]],a=[-i[0],-i[1]],r=[-e[0],0],o=[(this.p1.x+this.p2.x)/2,(this.p1.y+this.p2.y)/2];let l=.5*Math.PI;this.p1.x!=this.p2.x&&(l=Math.atan((this.p1.y-this.p2.y)/(this.p1.x-this.p2.x)));const c=this.transform(e,o,l),h=this.transform(i,o,l),d=this.transform(s,o,l),u=this.transform(n,o,l),p=this.transform(a,o,l),f=this.transform(r,o,l);return`M${c[0]},${c[1]} L${h[0]},${h[1]}       M${c[0]},${c[1]} L${d[0]},${d[1]}       M${c[0]},${c[1]} L${f[0]},${f[1]}       M${f[0]},${f[1]} L${u[0]},${u[1]}       M${f[0]},${f[1]} L${p[0]},${p[1]} `},sqrt(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},transform(t,e,i){const s=new o["Matrix"]([[1,0,e[0]],[0,1,e[1]],[0,0,1]]),n=new o["Matrix"]([[Math.cos(i),Math.sin(i),0],[-Math.sin(i),Math.cos(i),0],[0,0,1]]),a=new o["Vector"]([[t[0]],[t[1]],[1]]),r=s.multiply(n).multiply(a).elements;return[r[0],r[1]]}},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["scale"])),{},{arrowLength(){return 2/this.scale},arrowWidth(){return.4/this.scale},fontSize(){return 4/this.scale},textOffset(){return 6/this.scale},textLocation(){if(!this.p1||!this.p2)return[0,0];const t=[(this.p1.x+this.p2.x)/2,(this.p1.y+this.p2.y)/2];return this.p1.y==this.p2.y?[t[0],t[1]+this.textOffset]:[t[0]+this.textOffset,t[1]]},textAnchor(){return"middle"},currentText(){const t={W:"宽",H:"高",L:"长"};return t[this.lineName]||this.lineName},dashArray(){const t={L:"length",W:"width",H:"height"};return t[this.lineName]===this.currentAxiasRemark?"":`${3/this.scale}, ${3/this.scale}`},fillOpacity(){const t={L:"length",W:"width",H:"height"};return t[this.lineName]===this.currentAxiasRemark?1:.6}})},c=l,h=i("2877"),d=Object(h["a"])(c,s,n,!1,null,"73ef4beb",null);e["default"]=d.exports},"7a35":function(t,e,i){t.exports=i.p+"editor-assets/img/risk-close.23080d41.svg"},"7a411":function(t,e,i){"use strict";var s=i("a3a3"),n=i.n(s);n.a},"7a71":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAIZ0lEQVRYR82YeWxUxx3HvzOzp/fwgg/MEQlHiY1BNESqFNU0VVGaitrYTapEbdUjTShN5QMr/Sc0qSj/ULWKmiZAwTFRo4IqNVVOfJC0QqQlltK6qGnB/BGnKWBIUJ2CsXffvnOmmnnv7b71gddO/uDJltdv58185vs75vd7BDf5RW5yPnwiwOgbj91Gub2JULKCC9QQ8BoIwgXnE4LSCUrIFQgxkm/Zf2mpQpQNKIQg8Td/dA/lzqMc/C7bsldzzmk5C1PGbEbpOCF4mxB6MN+y/51ynpNjFgSMD3VtJiC7Lcve4nAnHJyYMYZIJAJGKQiloNSdjjscDpe/DizTAue8hIcylg8zdtxxxG6z/dejN4KdF7Dijz3t3ObPmoax1p8gFA4jWZFALB5zwZgroBCisIb87P4nCvdty4ZpWjAMHVo+rzagLgIRDoXPkhDt1LfuPzUX6CxAqZgQ4hXTtGrlA5RSVKbTSCZTiETDcFk8BB9G/vUg5Tfu5+IYf2EFL4SCzWsacprmD0MozM4Lwh60Wg/8PQg6G/B497ChG83SfJWZDDKVaRDiKyV3TtQiRdW8z8S97+0AvKBqAN7fhNqYALc5NC2HXC6vno1E2FG99dB3ywKsrV2BVCpZYrqiOT0zlizoKid3rL5VrC5I0A1mbQzA9HQWuaxWJuBg97BhGs21NSuQSvuAwlVE/bgQvkJFc7oKRgmDzq15fNOdwwV2/VA+k83mlgDoKVgwpytNYWJ/cj8gWiqbsL/+a6CEYNM/n8I12zVbiT/KKXhpQMlJlwRYU1ODVCpVMDH3drxr5RZUslggWFzy5aEK3JtpVONPZ8cx5egFtbyYxkj2IvZd/nNBOR81O52DltMQirCj5oI+6JnYB5zpM8Pru1EXKYLfKIfN/G7w6ih+MPZ718oB/5UKarn84gGTSdcHfTPJidszGxAnIZXi4ySM3bd8WY3Ze+lPmLZ1tbhU8/E198AWDn5yfgiOp/64cRWnpj4oRrjnArmctnjA6mppYgko/cg3kgt7a2QZ4jSiYA7U34/6WBUeP9+Ps9pHKog+n7oVT9xyL/6V+xAPvfc7dc/mDq7aWolP+pG+SMDOYcO0ml3AhOfoPqDrNa82PIxNidWLsS5Gpi+ifbSvJG357qNlNWha2Sb2AauRTCZKc5jnO682uoDv5SdgCQcZFlcqXXfyKjAqQ3GECcOElUUmFMeaaAYj0xfw1dHDalzh1PH8UObAvKaX64NFwEQQMHDGvtb4iAJsPvOs8scjt39b5cZt5/qgORYGNuxAVTiBR8deVP7Ye/vXFWD72b45E7cMkEUDVlVVIZlKFo+0QNS9ts4F/MWlE+haeTcSLIKnL5/Erz58S/nrA1WfwVP194EQ4K3J9/GlZY2lgN4p4zvO0gCrqyCjuJBsC8WAwOuN27EpuRoGtxGlIRWlH5lTJT5ZHU4gRsPIOQYSLKoA284+N7vyEUKpV7aCscHOYdO0mpdLBRMV/slUzFsoAj55YRCrI2l0rLwbJreR46aCTLEoQoThN1fewUX9KvasbSkBnFmeFQBD7KjZtkCxEBvqets0zM3SxAkfcMahf2zd95WC7ecOK4VObOzCSx+/i54PXlEKvdz0CD6Xrkfn2B9UEPU1fBMjUxew7WzvrACRG9I0HboMkhA7YrYdeihoilnlVmywa8g0za8sW74MqWTSS6qlFcnr67bjzuQaD9DEiY2duGRM4h9Zt/WQcNLECpA76Gv0AM/0FoIkeABoOR163gCL0H1Wa2/PDQErBrtf0E3je7JITWfSbpqRBzyBKt0JISgAjvYps0oF57o6xl5UG+xt+IZSsPXMoeI5HKjCZZoxDQs0Evqx3Xrw5zdWsL97h2kbfbFYDNU1Ve5Yr8xyd81xrGmHUrBttA9j+gS+mL7NH+aNFypANqfr0VRRh43JVfjL5Pt4YPT52YUugOuTWdUG0Dj7gr31UEnpP7ui7n9stWHnLkml6lbWFRqhYHLtX18EPD097u7Aq6gL5ZUATt6xE02JOgX90/8M4OBluXZpu+A4DqYnc6pQv3MNoqc/2+cWk941Z9MUHei4bFn2qnRlSpVcpVHHlToUBJpjgrsHqjuGBBooAWxMrEKGxfDv/McYN66VnEp+UyX9T5qXhejfrLbeu2a6ytyAg109lmk+IxumupUrVMLlXqFZAhJI3p4nFIuBgFv4rjGzzJI+PXVdNk4CNBzZam878GZZgHvEHrp34L//c2w7I1NNZSZdqOH8RRSbr5gH6rYB8/UggbLNg9eyeVimLdvXMau9t2GuQJu3L5btp2mZpwQHSaVTSCQrZvcTwZ54jn64tCjw2yc3K8i8ZxgWCCV2iGK90fbc2KIA5eDYGzu/Y+r6b2WfVFmZRrxClvqBnmJG8xOM+JmnhZ/3JKahGdB1UwUGjYgtdsthtw+Y41rw1UdkqHuvbRhPyGdl455OpyB75vlaStV6+j2ytwF/T7blIJ/X4diOgmOMbbfaDr0wH5y8vyCgAjvetcs2zZ+Bg8iIScRjiFfEpXkCfui2pDNrPXnXcTgM3VAmVS5K4DBKH7bae4/eCK5sQAV5rHMDKF6yLWudP2k0FkU8FpOFZsnbBr9xly+ODMNUgaAupRr9a4jZD+Zbni/rlVxZCgZ3GRvo2MKBp23bvsPr4REOh9QLpXAkpIbqUi3dgGN7L4moAjsFEuuxWp95dyHVgt8vGtB/OHb8h2uFQ39p2859Qgj18oYyqgpW4b1ukxFKKTsSZWxXtmX/xGLA/LFLBvQnqDnZkbyexZNc8J3c4RUKlLJJMLK3ob5237kNe9wicYnXJwb011XJvf/KtyjDNaO1d2CJPLMe+9QAPy2gmfPc9ID/B5E9qHT4UBM/AAAAAElFTkSuQmCC"},"7a89":function(t,e,i){},"7a8f":function(t,e,i){},"7acd":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-modal",{attrs:{visible:t.visible,footer:null,width:560,closable:!1}},[i("div",{staticClass:"main-body"},[i("span",{staticClass:"export-title"},[t._v(t._s(t.failed?"导出失败":"正在导出"+t.taskName+"..."))]),i("a-spin",{staticClass:"progress-bar"},[i("a-icon",{staticStyle:{"font-size":"48px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1),i("a-button",{staticClass:"cancel-button",on:{click:t.onCancel}},[t._v("取消")])],1)]),i("success-modal",{ref:"successModalRef"})],1)},n=[],a=i("989b"),r=i("49c5"),o={components:{SuccessModal:r["default"]},data(){return{taskId:null,timer:null,failed:!1,visible:!1,filename:"",taskName:""}},beforeDestroy(){clearInterval(this.timer)},methods:{show(t,e,i){this.taskId=t,this.visible=!0,this.timer=setInterval(()=>this.checkPdf(t),3e3),this.filename=e,this.taskName=i},onCancel(){this.timer&&clearInterval(this.timer),this.visible=!1},checkPdf(t){this.timer&&this.$api2.checkPdf({task_id:this.taskId}).then(t=>{if(2===t.data.status){const e="包小盒_"+this.filename+".pdf";clearInterval(this.timer),Object(a["b"])(t.data.file_path,e).then(()=>{this.visible=!1,this.$refs.successModalRef.show()})}else 3===t.data.status&&(this.$message.error("导出失败"),this.failed=!0,this.loading=!1,clearInterval(this.timer))})}}},l=o,c=(i("a1c7"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,null,null);e["default"]=h.exports},"7b0f":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:{width:t.options.style.width+"mm",height:t.options.style.height+"mm"}},[i("div",{ref:"edit",staticClass:"editable",style:{width:t.options.style.vertical?"auto":t.dwidth,minHeight:t.options.style.vertical?"auto":t.minHeight,height:t.options.style.vertical?t.dheight:"auto",minWidth:t.options.style.vertical?t.minWidth:"auto",lineHeight:t.minHeight,display:t.options.style.display||"block",fontSize:t.fontSize+"px",fontFamily:t.options.style.fontFamily,textAlign:t.options.style.textAlign,color:t.fontColor,cursor:t.editable?"text":"",fontWeight:t.options.style.fontWeight,fontStyle:t.options.style.fontStyle||"normal",opacity:t.options.style.opacity/100,outline:"none",lineBreak:"anywhere",overflowWrap:"anywhere",wordBreak:"break-all",whiteSpace:"break-spaces",transform:"scale("+t.fontScale+")",transformOrigin:"0 0",writingMode:t.options.style.vertical?"vertical-rl":"horizontal-tb",userSelect:this.editable?"":"none"},attrs:{id:"dragFont"+t.options.uuid,xmlns:"http://www.w3.org/1999/xhtml",autofocus:"autofocus",contenteditable:t.editable},domProps:{innerHTML:t._s(t.options.value)},on:{input:t.inputChange,blur:t.inputBlur,focus:t.focus,keydown:t.onKeydown,mousedown:t.onMousedown,click:t.onClick,dblclick:t.dblclick}})])},n=[],a=(i("ddb0"),i("5530")),r=i("27d6"),o=i.n(r),l=i("1645"),c=i("ed08"),h=i("5880"),d=i("6796"),u=i("fe94"),p=i("365c"),f={mixins:[d["a"]],props:{options:{type:Object},textEditable:{type:Boolean,default:!1}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(h["mapState"])(["scale","isInside"])),Object(h["mapState"])("property",["crafts"])),{},{fontColor(){let t=this.options.style.color||"#000000";if(this.options.style.craft)for(let e of this.crafts)this.options.style.craft===e.id&&"specular"===e.type&&(t=e.color);return t},fontSize(){const t=Object(u["a"])(this.options.style.fontSize).mm2px();return t<12?12:t},fontScale(){const t=Object(u["a"])(this.options.style.fontSize).mm2px();return t>12?1:t/12},dwidth(){return this.options.style.width/this.fontScale+"mm"},dheight(){return this.options.style.height/this.fontScale+"mm"},minHeight(){return this.options.style.lineHeight/this.fontScale+"mm"},minWidth(){return this.options.style.lineHeight/this.fontScale+"mm"},canSelect(){return this.editable?{}:{userSelect:"none"}}}),watch:{textEditable(t){this.editable=t},editable(t){this.$emit("editable-change",t)}},data(){return{editable:this.textEditable,fontTrue:0}},mounted(){this.initFont()},methods:{refresh(){this.inputChange()},onKeydown(t){this.editable&&t.stopPropagation()},focus(t){const e=document.createRange();e.selectNodeContents(this.$refs.edit);let i=window.getSelection();i.removeAllRanges(),i.addRange(e)},onMousedown(t){this.editable?t.stopPropagation():this.$emit("mousedown",t)},onClick(t){this.editable&&t.stopPropagation()},createRange(t,e,i){if(i||(i=document.createRange(),i.selectNode(t),i.setStart(t,0)),0===e.count)i.setEnd(t,e.count);else if(t&&e.count>0)if(t.nodeType===Node.TEXT_NODE)t.textContent.length<e.count?e.count-=t.textContent.length:(i.setEnd(t,e.count),e.count=0);else for(var s=0;s<t.childNodes.length;s++)if(i=createRange(t.childNodes[s],e,i),0===e.count)break;return i},setCurrentCursorPosition(t){if(t>=0){var e=window.getSelection();range=createRange(document.getElementById("dragFont"+this.options.uuid).parentNode,{count:t}),range&&(range.collapse(!1),e.removeAllRanges(),e.addRange(range))}},async dblclick(t){if(this.options.locked)return void this.$message.error("该对象已锁定");const e=!!window.chrome;this.editable=!e||"plaintext-only",this.$store.dispatch("saveShowMaterialTip",!1),await Object(c["D"])(0),this.$refs.edit.focus()},inputChange(t){let e=document.getElementById("dragFont"+this.options.uuid);if(e){if(this.options.style.vertical){const t=e.offsetWidth/p["DPI"],i=e.offsetHeight/p["DPI"];let s=this.options.style.height/i;this.options.style.width=t*s}else{const t=e.offsetWidth/p["DPI"],i=e.offsetHeight/p["DPI"];let s=this.options.style.width/t;this.options.style.height=i*s}if(t)try{for(const e of t.target.children)e.removeAttribute("style")}catch(i){}}},inputBlur(t){const e=t.target.innerText;this.options.value=e,this.editable=!1,this.$emit("change",this.options),this.$store.commit("increaseCanvasVersion",this.isInside)},initFont(){const t={fontFamily:this.options.style.fontFamily,src:this.options.src};l["a"].injectFontFamilies([t],"ownFontStyle"),this.options.style.fontFamily?o.a.load({custom:{families:[this.options.style.fontFamily],timeout:1e4},active:async()=>{this.$emit("material-loaded")},inactive:async()=>{this.$emit("material-loaded")}}):this.$emit("material-loaded")}}},m=f,g=(i("a1d4"),i("2877")),v=Object(g["a"])(m,s,n,!1,null,null,null);e["default"]=v.exports},"7b2b":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAAEEfUpiAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAAxklEQVRYCWNgIAQYQQqy8jr+wxQywRjE04zI+kHaUMxgZGTchmELsuEgBcj8gWLjdeS0SRVgecocR7kVlJtAmQ+AuuHhgB7txJhMlXAk2wWgpDZ1Yrk3MS6lrRqyvQByFlUCkbb+I8Z0cBhk53du/f//vxcxGmBqYP4HlzOkaoYZMkzo0UCkQkSOBiIVAnHIGwEvk0E+IadyIycEYGUZSC9Gu4kcA0nSw8iwlST1o4ppHQKjiZDWITxqPsEQGE2EBINo2CsAAMlUUNHTC4GMAAAAAElFTkSuQmCC"},"7b71":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"mainContainerRef",style:{width:t.options.style.width+"mm",height:t.options.style.height+"mm",overflow:"hidden"},on:{mousedown:function(e){return t.$emit("mousedown",e)}}},[t.isSvg?t._e():i("img",{ref:"imgRef",class:["imageNode_"+t.options.uuid,"avoid-clicks"],style:{position:"absolute",left:(t.options.bg?t.options.bg.x:0)+"mm",top:(t.options.bg?t.options.bg.y:0)+"mm",width:(t.options.bg?t.options.bg.width:t.options.style.width)+"mm",height:(t.options.bg?t.options.bg.height:t.options.style.height)+"mm",display:"block",opacity:[void 0,"",null].includes(t.options.style.opacity)?1:t.options.style.opacity/100},attrs:{src:t.options.src,"data-src":t.options.src},on:{load:t.recordImageSize}})])},n=[],a=(i("5319"),i("1276"),i("ddb0"),i("5530")),r=i("821e"),o=i("cebe"),l=i.n(o),c=i("5880"),h=i("6796");i("365c");const d=5;var u={mixins:[h["a"]],props:{value:{type:Object},options:{type:Object},transform:{type:String}},data(){return{xml:null,svg:null}},mounted(){this.loadImage().then(t=>{if(this.$emit("material-loaded"),this.isSvg){let e=t.data.replace(/="&lt;[^"]+&gt;"/g,'=""');e=e.replace(/data-name="[^"]*(\s)[^"]*"/g,'data-name=""'),this.xml=e;const i=new DOMParser;this.svg=i.parseFromString(this.xml,"image/svg+xml").children[0];const s="imageNode_"+this.options.uuid;this.svg.classList.add(s),this.setSVGAttribute(),this.$refs.mainContainerRef&&this.$refs.mainContainerRef.appendChild(this.svg)}this.refresh()},t=>{this.$emit("material-loaded")})},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(c["mapState"])(["isInside"])),Object(c["mapState"])("property",["crafts"])),{},{isSvg(){return this.options.src.indexOf(".svg")>-1}}),methods:{setSVGAttribute(){this.svg.style.width="100%",this.svg.style.height="100%",this.svg.setAttribute("preserveAspectRatio","none"),this.svg.style.display="block";const t=this.svg.getAttribute("viewBox");if(t){const i=t.split(" ");if(4===i.length)try{const t=i[2]-i[0],e=i[3]-i[1];this.svg.getAttribute("width")||this.svg.setAttribute("width",t),this.svg.getAttribute("height")||this.svg.setAttribute("height",e)}catch(e){}}if(!this.svg.getAttribute("viewBox")){const t=this.svg.getAttribute("width"),e=this.svg.getAttribute("height");this.svg.setAttribute("viewBox",`0 0 ${t} ${e}`)}},loadImage(){return l.a.get(this.options.src)},refresh(){this.isSvg&&this.$nextTick(()=>{this.redrawSvg(),this.$store.commit("increaseCanvasVersion",this.isInside)})},redrawSvg(){this.setSVGAttribute(),this.svg.style.backgroundColor=this.options.style.backgroundColor||null,this.svg.style.opacity=[null,void 0,""].includes(this.options.style.opacity)?1:this.options.style.opacity/100;let t=[];t=r["a"].filterSvg(this.svg,this.options,this.crafts),r["a"].defsPattern(this.svg,this.options);let e=null;if(this.options.style.craft)for(const i of this.crafts)this.options.style.craft===i.id&&"specular"===i.type&&(e=i.color);r["a"].drawColor(t,this.svg,e),this.updateDesignFills(t),this.$store.commit("increaseCanvasVersion",this.isInside)},updateDesignFills(t){let e=this.$root.projectData.insideDesignData;for(const i in e)if(e[i].uuid===this.options.uuid){if(t.length>d){this.$set(e[i],"can_set_color",0);break}this.$set(e[i],"fills",t);break}e=this.$root.projectData.designData;for(const i in e)if(e[i].uuid===this.options.uuid){if(t.length>d){this.$set(e[i],"can_set_color",0);break}this.$set(e[i],"fills",t);break}},recordImageSize(t){this.$store.commit("editor/setImageSize",{uuid:this.options.uuid,width:t.target.naturalWidth,height:t.target.naturalHeight})}}},p=u,f=(i("3d71"),i("2877")),m=Object(f["a"])(p,s,n,!1,null,null,null);e["default"]=m.exports},"7b9c":function(t,e,i){t.exports=i.p+"editor-assets/img/logo.b195495a.svg"},"7c17":function(t,e,i){},"7cb9":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pharmacode=void 0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=i("e762"),a=r(n);function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=function(t){function e(t,i){o(this,e);var s=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return s.number=parseInt(t,10),s}return c(e,t),s(e,[{key:"encode",value:function(){var t=this.number,e="";while(!isNaN(t)&&0!=t)t%2===0?(e="11100"+e,t=(t-2)/2):(e="100"+e,t=(t-1)/2);return e=e.slice(0,-2),{data:e,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(a.default);e.pharmacode=h},"7d4c":function(t,e,i){},"7d6a":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8rAyMDOwM3AzCCSmFxc4BgQ4ANUwgCjUcG3a0DVQHBZF2RWsk+Gw6di6SNzf8pas661X4epHgVwpaQWJwPpP0CcllxQVMLAwJgCZCuXlxSA2B1AtkgR0FFA9hwQOx3C3gBiJ0HYR8BqQoKcgewbQLZAckYi0AzGF0C2ThKSeDoSG2ovCPC4uPr4KAQYmRhaehBwLumgJLWiBEQ75xdUFmWmZ5QoOAJDKVXBMy9ZT0fByMDIkIEBFOYQ1Z9vgMOSUYwDIZbylIHBOBcoqIEQyxJgYNj9jYFBcCtCTP0h0FtzGRgOBBQkFiXCHcD4jaU4zdgIwubezsDAOu3//8/hDAzsmgwMf6////97+///f5cxMDDfAur9BgChvV9IjNFJ/AAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAADqADAAQAAAABAAAADgAAAACeOBvAAAACwElEQVQoFU2SS0wTURSG/zuPTjvTaQfaUmxr0kGl1qjE18JIXPiIuHFhlA1xoYmJcatL15po3OneBRoT4yPGuDC+UYH4QqkPBAoUBfqaUqal05m21ymGxLO5Z/H95yT3fAT/FaUf+MTrr+0lrbo7t6ifrdUghsJt12Sh9iresT9NVNVYxbnVpvkOP3h15M6d0YtbVWtdCyqs7PdBK5g3bt0bnz7Wp121keurPNNsKKUkOzOwIzG+eGX9FqWzi+isOJUHPzaL8HSC9Jzep34c0c/nfj2KN9lmZiUITIQ/Dg4NPX5TVrvdGnLf8oBFUdNNpN5NILaUwKTGRt8MjQ9rc7cjK0FKX3DF0Yd9U3kHx3AsSikNjGWBc3FgeALepube/oASkPBp0pTdHvcpe6vAJJ5N+Ap/Mr0BRYDFeuDfpaLiFcDvjKDt6Da4u6JYs2cDCpqBtWHZHjzRl0k9C3MNq6wsFevqpijFZMaJkc95ROIRlMayoHkTvChgIVvD80ELJ3sF5JJTgYbEtDCcYHBWve5spVl0xSWMPfkNbjqDOktBBAKxuIwv/e8RijgR5DVULUIkiSGcQ2g3iKe0aM92Hd/nwIUX2/F8YB4x2YAimRhdVjCrhXHmhMv+SgrJL1ccstfgnDIV64bHl03lsNlXxv3+GF6+bUEw5IKb02EO8DgU9aInnkMhpcMTCnp4F+MmlM660j+fXtDTM+f0uZwgKyJ8He0w9RJq9knkkB9Lv9MozJcgrfEb7oD/clvnwUsMIWsrUlv3TcLKRV9nBER0oVyqwoQTjCgik1ywT8qhNRaFVaXLvNJxlxDV+GdO9VvMr7YuM6zQYB086lULDctEpVAErdVBOFsW2rCCGyN5jq2sawqwok9To7mx/s5CMrm3Wi4ednulOMtAYXgHZXgh7fAEvtct67Ec6hhUggeSzeBf7zMvB0DuucwAAAAASUVORK5CYII="},"7d6b":function(t,e,i){"use strict";var s=i("0596"),n=i.n(s);n.a},"7d6d":function(t,e){var i={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1};function s(t,e,s){return i.hasOwnProperty(e)?s*t.dpr:s}t.exports=s},"7d72":function(t,e,i){"use strict";var s=i("8707").Buffer,n=s.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(t){if(!t)return"utf8";var e;while(1)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function r(t){var e=a(t);if("string"!==typeof e&&(s.isEncoding===n||!n(t)))throw new Error("Unknown encoding: "+t);return e||t}function o(t){var e;switch(this.encoding=r(t),this.encoding){case"utf16le":this.text=f,this.end=m,e=4;break;case"utf8":this.fillLast=d,e=4;break;case"base64":this.text=g,this.end=v,e=3;break;default:return this.write=b,void(this.end=y)}this.lastNeed=0,this.lastTotal=0,this.lastChar=s.allocUnsafe(e)}function l(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function c(t,e,i){var s=e.length-1;if(s<i)return 0;var n=l(e[s]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--s<i||-2===n?0:(n=l(e[s]),n>=0?(n>0&&(t.lastNeed=n-2),n):--s<i||-2===n?0:(n=l(e[s]),n>=0?(n>0&&(2===n?n=0:t.lastNeed=n-3),n):0))}function h(t,e,i){if(128!==(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!==(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!==(192&e[2]))return t.lastNeed=2,"�"}}function d(t){var e=this.lastTotal-this.lastNeed,i=h(this,t,e);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){var i=c(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var s=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,s),t.toString("utf8",e,s)}function p(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function f(t,e){if((t.length-e)%2===0){var i=t.toString("utf16le",e);if(i){var s=i.charCodeAt(i.length-1);if(s>=55296&&s<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function m(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function g(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function v(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function b(t){return t.toString(this.encoding)}function y(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(e=this.fillLast(t),void 0===e)return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},o.prototype.end=p,o.prototype.text=u,o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},"7d88":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-modal",{attrs:{centered:"",visible:t.visible,title:"编辑条形码"},on:{cancel:t.handleCancel}},[i("a-form-model",{ref:"formRef",attrs:{model:t.form,rules:t.rules,"label-col":{span:6},"wrapper-col":{span:14}}},[i("a-form-model-item",{attrs:{label:"码制"}},[i("a-select",{attrs:{options:t.options},on:{change:t.handleChange},model:{value:t.form.codeMode,callback:function(e){t.$set(t.form,"codeMode",e)},expression:"form.codeMode"}},[i("a-tooltip",{attrs:{slot:"suffixIcon",placement:"right"},slot:"suffixIcon"},[i("template",{slot:"title"},[t._v(t._s(t.desc))]),i("a-icon",{staticStyle:{color:"rgba(0, 0, 0, 0.45)","font-size":"14px"},attrs:{type:"info-circle"}})],2)],1)],1),i("a-form-model-item",{attrs:{label:"码值",prop:"value"}},[i("a-input",{attrs:{placeholder:"请输入码值"},on:{focus:t.onFocus,change:function(e){return t.drawCode()}},model:{value:t.form.value,callback:function(e){t.$set(t.form,"value",e)},expression:"form.value"}},[i("a-tooltip",{attrs:{slot:"suffix",placement:"right"},slot:"suffix"},[i("template",{slot:"title"},[t._v(t._s(t.requirements))]),i("a-icon",{staticStyle:{color:"rgba(0, 0, 0, 0.45)"},attrs:{type:"info-circle"}})],2)],1)],1)],1),i("div",{staticClass:"barcode"},[i("svg",{directives:[{name:"show",rawName:"v-show",value:!t.hasError&&t.form.value,expression:"!hasError && form.value"}],ref:"barcodeRef",attrs:{id:"modal-barcode",preserveAspectRatio:"none"}})]),i("template",{slot:"footer"},[i("a-button",{key:"back",on:{click:t.handleCancel}},[t._v(" 取消 ")]),i("a-button",{key:"submit",attrs:{type:"primary",disabled:t.hasError},on:{click:t.onSubmit}},[t._v(" 保存并使用 ")])],1)],2)},n=[],a=i("5530"),r=i("5880"),o=i("62c5"),l=i.n(o),c={props:{visible:{required:!0,type:Boolean,default:!1},data:{required:!0,type:Object}},data(){return{hasError:!1,form:{codeMode:"EAN13",value:"0000000000000"},rules:{value:[{validator:this.validateBarcode,trigger:"change"}]},regs:{CODE128:/^[-A-Z0-9.\s$/+%]{1,49}$/,CODE39:/^[-A-Z0-9.\s$/+%]{1,43}$/,EAN13:/^\d{13}$/,EAN8:/^\d{8}$/},options:[{label:"EAN13",value:"EAN13",requirements:"由13个数字组成",desc:"European Article Number (欧洲物品编码的缩写)，其中共计13位代码的EAN-13是比较通用的一般终端产品的条形码协议和标准，主要应用于超级市场和其它零售业，为EAN的标准编码型式"},{label:"EAN8",value:"EAN8",requirements:"由8个数字组成",desc:"European Article Number (欧洲物品编码的缩写)由前缀码、厂商识别码、7位商品项目代码和1位校验码组成，其为国际物品编码协会制定的一种商品用条码，通用于全世界。EAN-8是EAN-13的缩短版，属EAN的简易编码型式"},{label:"CODE128",value:"CODE128",requirements:"允许字符：数字0到9、大写英文字母、加号、减号、句号、空格、美元符、正斜杠、百分号",desc:"Code 128码是1981年引入的一种高密度条码，广泛应用在企业内部管理、生产流程、物流控制系统方面的条码码制，由于其优良的特性在管理信息系统的设计中被广泛使用，CODE128码是应用最广泛的条码码制之一"},{label:"CODE39",value:"CODE39",requirements:"26个大写字母（A - Z），十个数字（0 - 9），连接号(-),句号（.）,空格,美圆符号($),斜扛(/),加号(+)以及百分号(%)。",desc:"Code 39，也被称为3 of 9 code，USD-3或者LOGMARS，是使用最为广泛的条形码格式之一。由于编制简单、能够对任意长度的数据进行编码、支持设备广泛等特性而被广泛采用"}]}},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["knife_data","project_data","scale"])),{},{desc(){const{codeMode:t}=this.form,e=this.options.find(e=>e.value===t);return e&&e.desc||""},requirements(){const{codeMode:t}=this.form,e=this.options.find(e=>e.value===t);return e&&e.requirements||""}}),mounted(){this.initForm()},methods:{onSubmit(){this.$emit("callback",Object.assign({},this.data,this.form)),this.handleCancel()},handleCancel(){this.form={codeMode:"EAN13",value:"0000000000000"},this.hasError=!1,this.desc="",this.$refs.formRef.resetFields(),this.$nextTick(()=>{this.$refs.barcodeRef.innerHTML=""}),this.$emit("close")},handleChange(t){this.drawCode(t)},drawCode(t){this.form.value=this.form.value.toUpperCase(),t=t||this.form.codeMode,this.$refs.formRef.validate()},validateBarcode(t,e,i){const s=this.form.codeMode,n=this.regs[s];n.test(this.form.value)?l()("#modal-barcode",this.form.value,{format:s,margin:5,font:this.data.style.fontFamily,valid:t=>{this.$nextTick(()=>{const t=this.$refs.barcodeRef;t.setAttribute("respectAspectRatio","none"),t.style.maxHeight="100%",t.style.maxWidth="100%",t.style.margin="10px auto"}),t?(this.hasError=!1,i()):(this.hasError=!0,i(new Error("校验位不正确")))}}):(this.hasError=!0,i(new Error("码值不符合要求")))},onFocus(){"0000000000000"===this.form.value&&(this.form.value="")},initForm(){const{value:t,codeType:e,codeMode:i}=this.data;Object.assign(this.form,{value:t,codeType:e,codeMode:i})}},watch:{visible(t){t&&this.initForm()}}},h=c,d=(i("4e315"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,"76371d90",null);e["default"]=u.exports},"7d98":function(t,e,i){t.exports=i.p+"editor-assets/img/risk-detect-sign.6416e9af.svg"},"7de1":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"mode-item-con flex flex-center item-center mb-8",on:{click:function(e){return t.onChooseModel(t.mode)}}},[i("img",{attrs:{src:t.mode.screenshot}})]),i("a-modal",{attrs:{visible:!!t.createProjectForm.id,width:480,"overlay-class-name":"ant-no-padding",title:"创建新的设计"},on:{ok:t.handleOk,cancel:t.handleCancel}},[i("div",{staticClass:"template-panel__ant-model-wrap"},[i("div",{staticClass:"text"},[t._v("确定保存当前设计，并创建新的设计吗 ？")])])])],1)},n=[],a=(i("ddb0"),i("5530")),r=i("5880"),o=i("c6d2"),l={computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("profile",["accessToken"])),Object(r["mapState"])("editor-v2",["project_data","knife_data","localHistory","last_saved_local_history_ts"])),{},{id(){return this.$route.query.id}}),props:{mode:{type:Object,default:()=>{}}},data(){return{createProjectForm:{type:"",id:"",item:{}}}},methods:{goTemplateProject(t){this.$router.push({path:"/design-v2",query:{id:t.project_id,mid:t.id,type:"preview"}})},hasUnsavedChange(){return!!(!/baoxiaohe/.test(navigator.userAgent)&&this.localHistory&&this.localHistory.size()>1&&this.localHistory.getCurTs()!==this.last_saved_local_history_ts)},onChooseModel(t){this.accessToken?t.project_id&&(this.id&&this.hasUnsavedChange()?this.showConfirmModel("template",t.project_id,t):this.$router.push({path:"/design-v2?id="+t.project_id})):this.showLoginDialog()},showConfirmModel(t,e,i){this.createProjectForm.type=t,this.createProjectForm.id=e,this.createProjectForm.item=i},handleCancel(){this.createProjectForm.type="",this.createProjectForm.id=null,this.createProjectForm.item={}},showLoginDialog(){this.$store.commit("profile/SET_SHOW_LOGIN_MODAL",!0)},async handleOk(t){await this.saveProjectAndScreenshot({projectData:this.project_data,knifeData:this.knife_data,isAuto:!1});const{type:e,id:i,item:s}=this.createProjectForm;"model"===e?this.ajaxCreateNewProjectFromModel(i):"template"===e&&this.goTemplateProject(s),this.handleCancel()},async saveProjectAndScreenshot({knifeData:t,projectData:e,isAuto:i=!0}){try{const s=JSON.parse(JSON.stringify(e));s.isAuto=i?1:0;const n=await Object(o["a"])(t,s);if(1e3===n.errno)return!1;n.data&&n.data.url&&(s.screenshot=n.data.url),this._saveProject(s)}catch(s){}},_saveProject(t){[...t.design_data,...t.inside_design_data].forEach(t=>{t._selected=!1,t._loaded=!1});const e={project_id:t.id,project_name:t.project_name,background:t.background,background_filter:t.background_filter,background_cmyk:t.background_cmyk,cate_id:t.cate_id,color_history:JSON.stringify(t.color_history),design_data:JSON.stringify(t.design_data),face_background:JSON.stringify(t.face_background),inside_design_data:JSON.stringify(t.inside_design_data),inside_face_background:JSON.stringify(t.inside_face_background),inside_background:t.inside_background,inside_background_filter:t.inside_background_filter,inside_background_cmyk:t.inside_background_cmyk,membrane_id:t.membrane_id,line_guides:JSON.stringify(t.line_guides),is_temp:t.is_temp,isAuto:t.isAuto,rotate:t.rotate%360,show_bleed_line:t.show_bleed_line,show_material:t.show_material};t.screenshot&&"string"===typeof t.screenshot&&(e.screenshot=t.screenshot),e.editType=this.type,this.$store.commit("editor-v2/set_project_is_saving",!0),this.$http.put("/api/v2/projects",e).then(t=>{if(200!==t.code)return this.$message.error(t.msg||"操作失败"),void this.$store.commit("editor-v2/set_project_is_saving",!1);this.$store.commit("editor-v2/set_project_last_saved_ts",Date.now()),this.$store.commit("editor-v2/set_project_is_saving",!1),this.$emit("uploadTemplate")})}}},c=l,h=(i("60bd"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,"1cb03fb7",null);e["default"]=d.exports},"7dec":function(t,e,i){},"7e00":function(t,e,i){"use strict";i.r(e),i.d(e,"menus",(function(){return u}));var s=i("5530"),n=i("750b"),a=i("365c"),r=i("6b17"),o=i("3ccf"),l=i("28f2"),c=i("a362"),h=i("4794"),d=i("f160");i("39fe");const u=[{key:"",value:"全部购买"},{key:"1",value:"方案"},{key:"2",value:"模型"}];e["default"]=Object(n["b"])({setup(t,e){const i=Object(n["j"])({currentPage:1,pageSize:10,material_type:""}),p=e.vuex.mapState("layout",["width"]),f=Object(n["a"])(()=>(p.width.value-80)/5),m=Object(n["j"])(!1),g=Object(n["j"])(!1),v=Object(n["j"])({}),{data:b,refetch:y}=Object(o["c"])(a["getBoughtList"],{variables:i.value});return Object(n["k"])(()=>i.value,()=>{y({variables:i.value})},{lazy:!0}),()=>{var t;return Object(n["c"])("div",{class:"bought-wrap"},[Object(n["c"])(l["default"],{attrs:{visible:m.value,target:v.value},on:{close:()=>m.value=!1,submit:()=>{m.value=!1,g.value=!0}}}),Object(n["c"])(c["default"],{attrs:{target:v.value,visible:g.value},on:{close:()=>g.value=!1}}),Object(n["c"])("a-tabs",{attrs:{activeKey:i.value.material_type,animated:!1},on:{change:t=>{i.value=Object(s["a"])(Object(s["a"])({},i.value),{},{material_type:t,currentPage:1})}}},[u.map(t=>{var e,i;return Object(n["c"])("a-tab-pane",{key:t.key,attrs:{tab:t.value}},[Object(n["c"])("ul",{class:"flex flex-wrap item-center"},[(null===(e=b.value)||void 0===e?void 0:e.data.length)?null===(i=b.value)||void 0===i?void 0:i.data.map((t,e)=>Object(n["c"])("li",{class:"mt-32 "+(e%5===4?"":"mr-20"),key:t.id,on:{click:()=>{m.value=!0,v.value=t}}},[Object(n["c"])(r["default"],{attrs:{target:t,width:f.value+"px"}})])):Object(n["c"])(h["a"])])])})]),Object(n["c"])(d["a"],{attrs:{total:null===(t=b.value)||void 0===t?void 0:t.count},on:{change:t=>{i.value=Object(s["a"])(Object(s["a"])({},i.value),{},{currentPage:t})}}})])}}})},"7e01":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAv0lEQVRYR2NkGGDAOMD2MxB0QGZBhyfjf8aZDP//y1LFsYyMj/8z/k+fPqFiO8g8gg7Iyu98RDXLYT5gZHw8bWK5HHEOyOv4D1I4bVIFQccSE0JZaOYRNBRdAzGW4FMz6gCcIUDr1A6LFpwOoHVqJ+wAHKkd5mJyEx967sEdAqMOGA2B0RAYDYHREBi0IUCvJhmulg+tq2l4k4zWTS9ctemoAwZRCNA4tRNMA7RO7QQdQG6bj1J9BHtGlFpASD8AQZwoMETXG6MAAAAASUVORK5CYII="},"7ef2":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-spin",{attrs:{spinning:t.globalLoading}},[s("div",{ref:"galleryRef",staticClass:"editor-gallery"},[s("div",{staticClass:"px-8"},[s("div",{staticClass:"flex item-center"},[t.isSearch?s("a-icon",{staticClass:"mr-10",attrs:{type:"left"},on:{click:t.refreshSearch}}):t._e(),s("div",{staticClass:"gallery-search flex item-center px-12 pr-8"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"fo-14",attrs:{type:"text",placeholder:"输入素材关键字"},domProps:{value:t.keyword},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch(e)},input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),s("img",{staticClass:"ml-auto",attrs:{src:i("bb14")},on:{click:t.handleSearch}})])],1),t.isSearch?t._e():s("div",{staticClass:"tags-group flex mt-16"},t._l(t.tags,(function(e,i){return s("div",{key:i,class:"tags-group__tags fo-14 "+(i===t.tagsFlag&&"tags-group--active"),on:{click:function(e){return t.changeTags(i)}}},[t._v(" "+t._s(e)+" ")])})),0),s("div",{staticClass:"line mt-16"}),!t.isCurrent||t.tagsFlag||t.isSearch?t._e():s("div",{staticClass:"gallery-simple"},[s("div",{staticClass:"icon-list mt-10"},[s("div",{staticClass:"flex item-center flex-between"},[s("div",{staticClass:"left flex item-center text-pointer",on:{click:function(e){t.current=null}}},[s("a-icon",{staticStyle:{width:"6px",height:"6px",color:"#abafb6","margin-bottom":"6px"},attrs:{type:"left"}}),s("div",{staticClass:"title ml-8 mt-2"},[t._v(t._s(t.currentTarget.name))])],1),t.showAllBtn?s("div",{staticClass:"right flex item-center text-pointer",on:{click:function(e){t.showAll=!t.showAll}}},[s("div",{staticClass:"more fo-12"},[t._v(" "+t._s(t.category[t.cateCurrent]?t.category[t.cateCurrent].name:"全部")+" ")]),s("img",{style:"width:12px;height:12px; "+(t.showAll?"transform: rotate(180deg)":""),attrs:{src:i("2d41"),alt:""}})]):t._e()]),s("transition",{attrs:{name:"fade"}},[t.showAll?s("div",{staticClass:"scene-list scene-tab"},[s("Category",{attrs:{current:t.cateCurrent,category:t.category},on:{change:t.changeSubcate}})],1):t._e()])],1)])]),t.isCurrent||t.isSearch||t.tagsFlag?t._e():s("scrollbar",{attrs:{"max-height":t.sceneHeight}},[s("div",{staticClass:"page-simples px-12"},t._l(t.templates,(function(e,n){return s("div",{key:n,staticClass:"scene-container mt-10"},[s("div",{staticClass:"scene-content flex item-center flex-between"},[s("div",{staticClass:"scene-title fo-14"},[t._v(" "+t._s(e.name)+" ")]),s("div",{staticClass:"more fo-12 text-pointer",on:{click:function(e){return t.handleCurrent(n)}}},[s("span",[t._v("更多")]),s("a-icon",{staticClass:"fo-12",attrs:{type:"right"}})],1)]),s("div",{staticClass:"flex flex-wrap w-256 search-results flex-between"},t._l(e.materials,(function(a,r){return s("div",{key:r,staticClass:"gallery-content-ov mb-8"},[s("div",{staticClass:"gallery-content-ov-panel flex flex-end"},[s("div",{staticClass:"rect flex flex-center item-center",on:{click:function(e){return t.onCollectMaterial(n,r)}}},[a.is_liked?s("img",{attrs:{src:i("f46f")}}):s("img",{attrs:{src:i("d9e2")}})])]),s("div",{staticClass:"gallery-content__image"},[s("resizeable",{attrs:{item:a,index:r,width:80,"id-prefix":"galleryItem"},on:{mousedown:function(i){return t.onDragMaterialToGraph(i,e.name,a)}}})],1)])})),0)])})),0)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isCurrent||t.isSearch||t.tagsFlag,expression:"isCurrent || isSearch || tagsFlag"}],ref:"galleryContent",staticClass:"gallery-content mt-16",style:{height:t.contentHeight+"px",scrollbarWidth:"thin"},attrs:{id:"galleryContent"}},[t.isEmpty?s("div",{staticClass:"no-data"},[s("Nodata")],1):s("div",{staticClass:"pl-8"},[!t.isCurrent||t.tagsFlag||t.isSearch?t._e():s("div",{ref:"sceneList",staticClass:"scene-list mb-16"},[s("Category",{attrs:{current:t.cateCurrent,category:t.category},on:{change:t.changeSubcate}})],1),s("div",{staticClass:"flex flex-wrap w-256 search-results"},t._l(t.materials,(function(e,n){return s("div",{key:n,staticClass:"gallery-content-ov mb-8 mr-6"},[s("div",{staticClass:"gallery-content-ov-panel flex flex-end"},[s("div",{staticClass:"rect flex flex-center item-center",on:{click:function(e){return t.onCollectMaterial(n)}}},[t.tagsFlag||e.is_liked?s("img",{attrs:{src:i("f46f")}}):s("img",{attrs:{src:i("d9e2")}})])]),s("div",{staticClass:"gallery-content__image"},[s("resizeable",{attrs:{item:e,index:n,width:80,"id-prefix":"galleryItem"},on:{mousedown:function(i){return t.onDragMaterialToGraph(i,t.currentTarget.name,e)}}})],1)])})),0),s("div",{directives:[{name:"show",rawName:"v-show",value:t.simpleLoading,expression:"simpleLoading"}],staticClass:"text-center my-16"},[s("a-spin",{staticClass:"text-center"},[s("a-icon",{staticClass:"spin-icon-load",attrs:{type:"loading",size:"20",color:"#FF6634"}})],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.noMore,expression:"noMore"}],staticClass:"text-center fo-12 fo-gray"},[t._v("没有更多了")])])])],1)])},n=[],a=(i("ddb0"),i("5530")),r=i("5880"),o=i("26a1"),l=i("1b67"),c=i("4794"),h=i("c64e"),d=i.n(h),u=i("6b13"),p=i("18ed"),f=i("365c"),m={components:{Resizeable:u["default"],Nodata:c["a"],Category:p["default"]},props:{load:{type:Boolean,default:!1}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["knife_data","project_data","scale"])),Object(r["mapState"])("material",{globalLoading:"loading",templates:"templates",materials:"materials",category:"category",noMore:"noMore",tagsFlag:"tagsFlag"})),Object(r["mapGetters"])("material",["isEmpty","simpleLoading"])),{},{height(){return 500},isCurrent(){return"number"===typeof this.current},currentTarget(){return this.isCurrent?this.templates[this.current]:{}},contentHeight(){const t=this.isSearch?90:0;return window.innerHeight+t-220},sceneHeight(){return window.innerHeight-170}}),data(){return{tags:["全部素材","我的收藏"],topCates:[],topCatesFlag:-1,locked:!1,search:!1,cateCurrent:-1,isSearch:!1,subCates:[],keyword:"",timeout:null,current:null,showAll:!1,showTagsAll:!1,visibleShowTagsAll:!1,refresh:0,showAllBtn:!1,query:{currentPage:1,pageSize:30,file_type:"image",keyword:"",top_cate:"",sub_cate:""},queryCount:100,cateQuery:{currentPage:1,pageSize:10,type:"image",top_cate:"",count:""},imgData:[],loading:!0,nextLoading:!1,tempImg:null,tempShow:!0,rotate:0,layer:{},curDragPosition:{}}},mounted(){this.listenGallery(),this.fetchAllFilesAndCates()},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapMutations"])("material",[l["b"],l["c"],l["a"],l["d"],l["e"]])),Object(r["mapActions"])("material",["fetchAllFilesAndCates","fetchCategories","fetchMaterials","fetchMaterialsMore"])),{},{handleReachBottom(){},handleCurrent(t){this.current=t,this.$refs.galleryContent.scrollTop=0,this.cateCurrent=-1,this.fetchCategories(this.currentTarget.id),this[l["b"]]({current:1,top_cate:this.currentTarget.id,sub_cate:"",keyword:""}),this.fetchMaterials(!0)},onCollectMaterial(t,e){const i="number"===typeof e?this.templates[t].materials[e]:this.materials[t];this.$api.material.collectAdd({type:1,type_id:i.id||i.file_id}).then(i=>{i&&(this.tagsFlag?this[l["e"]](t):("number"===typeof e?this[l["d"]]({index:t,indd:e}):this[l["a"]](t),this.$message.success(i.errmsg)))})},async init(){this.listenGallery(),this.cateQuery.top_cate=null,await this.getCate(),this.query.top_cate=this.topCates[0].id,this.cateQuery.top_cate=this.topCates[0].id,await this.getCate(this.topCates[0].id),await this.getImgList()},openLeftSidePanel(){this.$store.commit("editor-v2/set_left_side_show",!0),this.$route.query.id||this.$route.query.workOuterId?this.$store.commit("editor-v2/set_left_side_cur_menu_index",1):this.$store.commit("editor-v2/set_left_side_cur_menu_index",0)},onDragMaterialToGraph(t,e,i){var s,n;if(!this.project_data.id)return this.$message.info("请选择一个模板开始设计"),void this.openLeftSidePanel();const a=null===(s=t.target.children[0])||void 0===s?void 0:s.getBoundingClientRect();if(!a)return!1;if(0!==t.button)return!1;this.tempShow=!0,this.tempImg=i.file_path;const r=document.getElementById("galleryItem"+i.id),l=null===(n=t.target)||void 0===n?void 0:n.getBoundingClientRect();if(!l)return;const c=t.clientX,h=t.clientY;r.style.position="fixed",r.style.left=l.x+"px",r.style.top=l.y+"px",r.style.zIndex=1e4;const u=l.x,p=l.y;document.onmousemove=t=>{const e=t.clientX-c,i=t.clientY-h;return r.style.left=u+e+"px",r.style.top=p+i+"px",!1},document.onmouseup=s=>{var n,l;const c=null===(n=s.target.querySelector("img"))||void 0===n?void 0:n.getBoundingClientRect();if(!Object(o["b"])(s,t,this.$refs.galleryRef))return r.style.position="static",r.style.zIndex="auto",document.onmousemove=null,void(document.onmouseup=null);this.$track({category:"AdoptMaterial",action:e,label:i.file_path});const h=null===(l=document.getElementById("svgContainer"))||void 0===l?void 0:l.getBoundingClientRect(),u=d()(),p={type:"img",src:i.file_path,id:i.id,uuid:u,can_set_color:i.can_set_color||0,style:{position:"absolute",top:50,left:100,width:a.width/f["DPI"]/this.scale,height:a.height/f["DPI"]/this.scale,rotate:360-this.project_data.rotate||0,opacity:100},bg:{x:0,y:0,width:a.width/f["DPI"]/this.scale,height:a.height/f["DPI"]/this.scale}},m=(c.x-h.x)/this.scale,g=(c.y-h.y)/this.scale;[p.style.left,p.style.top]=Object(o["c"])(this.project_data.rotate,m/f["DPI"],g/f["DPI"],p.style.width,p.style.height,this.knife_data.totalX,this.knife_data.totalY),Object(o["d"])(s,t)&&(p.style.left=this.knife_data.totalX/2,p.style.top=this.knife_data.totalY/2),this.$store.commit("editor-v2/insertDesignItem",p),r.style.position="static",r.style.zIndex="auto",document.onmousemove=null,document.onmouseup=null}},handleLoad(){this.queryCount>this.imgData.length&&(this.query.currentPage+=1,this.getImgList())},shouldShowAllBtn(t){var e;const i=null===(e=this.$refs.sceneList)||void 0===e?void 0:e.getBoundingClientRect();i&&(t.target.scrollTop>i.height?this.showAllBtn=!0:(this.showAllBtn=!1,this.showAll=!1))},listenGallery(){const t=document.getElementById("galleryContent");t&&(t.onscroll=t=>{this.shouldShowAllBtn(t),t.target.clientHeight+t.target.scrollTop>=t.target.scrollHeight-1&&this.fetchMaterialsMore()})},async changeTopcate(t){this.topCatesFlag=t,this.query.top_cate=this.topCates[t].id,this.cateQuery.pageSize=10,this.query.sub_cate="",this.query.currentPage=1,await this.getCate(this.topCates[t].id),await this.getImgList()},async changeSubcate(t){const e=this.category[t];this.$refs.galleryContent.scrollTop=0,this.cateCurrent=t,-1===t?this[l["b"]]({top_cate:this.currentTarget.id,sub_cate:"",current:1}):this[l["b"]]({top_cate:"",sub_cate:e.id,current:1}),this.fetchMaterials(!0)},imageResize(t){},changeTags(t){this[l["c"]](t),this[l["b"]]({top_cate:"",sub_cate:"",current:1}),this.fetchMaterials(!0)},refreshSearch(){this.keyword="",this.handleSearch()},handleSearch(){this.isSearch=!!this.keyword,this.$refs.galleryContent.scrollTop=0,this[l["b"]]({current:1,top_cate:"",sub_cate:"",keyword:this.keyword}),this.fetchMaterials(!0)},searchInput(t){this[l["b"]]({keyword:t.target.value})},async getCate(t){t?(this.cateQuery.top_cate!==t&&(this.cateQuery.currentPage=1),this.cateQuery.top_cate=t):this.cateQuery.currentPage=1;const e=await this.$api.material.getGalleryCateList(this.cateQuery);if(e)if(t){if(1===this.cateQuery.currentPage)this.subCates=e.data.data;else{const t=[...this.subCates,...e.data.data];this.$nextTick(()=>{this.subCates=t})}this.cateQuery.count=e.data.count}else this.topCates=e.data.data},async getImgList(){this.locked=!0,1===this.query.currentPage?this.loading=!0:this.nextLoading=!0;const t=this.tagsFlag?this.$api.collection.list:this.$api.material.list;try{const e=await t(this.query);e&&(this.tagsFlag&&e.data.data.forEach(t=>{t.selected=!0}),1===this.query.currentPage?this.imgData=e.data.data:this.imgData=this.imgData.concat(e.data.data),this.queryCount=e.data.count),1===this.query.currentPage?this.loading=!1:this.nextLoading=!1}finally{this.locked=!1}}})},g=m,v=(i("27f7"),i("2877")),b=Object(v["a"])(g,s,n,!1,null,null,null);e["default"]=b.exports},"7f41":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"element-group-wrap",style:{width:t.data.style.width+"mm",height:t.data.style.height+"mm"},on:{mousedown:function(e){return t.$emit("mousedown",e)}}},[t._l(t.data.designs,(function(e,s){return i("div",{key:e.uuid,staticClass:"childen-wrap",style:{left:e.style.left+"mm",top:e.style.top+"mm",width:e.style.width+"mm",height:e.style.height+"mm",transform:"rotate("+e.style.rotate+"deg)"}},[i(t.getElementComponentNameByType(e.type),{key:"group-item-"+e.uuid,tag:"component",attrs:{data:e},on:{mousedown:function(e){return t.$emit("mousedown",e)},loaded:function(e){return t.onChildLoaded(s)}}})],1)})),"group"==t.data.type?t._l(t.data.designs,(function(e,s){return i("div",{key:"group-element-control"+s,class:"group-item "+(e._selected?"selected":""),style:{position:"absolute",left:e.style.left+"mm",top:e.style.top+"mm",width:e.style.width+"mm",height:e.style.height+"mm",transform:"rotate("+e.style.rotate+"deg)",overflow:"visible"},attrs:{id:"group-element-control"+s},on:{mousedown:function(e){return t.$emit("mousedown",e)},dblclick:function(i){return i.stopPropagation(),t.handleDblclick(i,e)},contextmenu:function(i){return i.stopPropagation(),i.preventDefault(),t.handleSingleContextMenu(i,e)}}})})):t._e()],2)},n=[],a=i("6206"),r=i("fb6b"),o=i("b308"),l=i("0530"),c=i("68df"),h={components:{elementImage:a["default"],elementFont:r["default"],elementQrcode:o["default"],elementBarcode:l["default"],elementTable:c["default"]},props:{data:{type:Object,default:()=>({})}},mounted(){this.$emit("loaded")},methods:{getElementComponentNameByType(t){const e={img:"elementImage",font:"elementFont",qrcode:"elementQrcode",barcode:"elementBarcode",table:"elementTable"};return e[t]},onChildLoaded(t){this.$emit("childLoaded",t)},handleDblclick(t,e){this.$store.commit("editor-v2/singleSelectDesignIncludeDeep",e.uuid)},handleSingleContextMenu(t,e){this.$bus.$emit("show-design-menu",{event:t,design:e})}}},d=h,u=(i("a0b8"),i("2877")),p=Object(u["a"])(d,s,n,!1,null,"41b538de",null);e["default"]=p.exports},"7f87":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:"editor-handle-container editor-handle-container--"+(t.visible?"open":"close"),style:{height:t.height+"px",top:t.top+"px"},on:{mouseover:function(e){t.showTip=!0},mouseout:function(e){t.showTip=!1}}},[s("div",{staticClass:"header-opt flex flex-start item-center pt-4 pl-4"},t._l(t.tags,(function(e,i){return s("div",{key:i,class:"header-opt-tag "+(i===t.tagsFlag?"header-opt-tag--active":""),on:{click:function(e){t.tagsFlag=i}}},[t._v(" "+t._s(e)+" ")])})),0),s("div",{staticClass:"contant-overflow",style:t.heightStyle},[s("div",{staticClass:"contant-out flex flex-between"},[s("div",{staticClass:"contant-out__left",style:t.heightStyle},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showTip||!t.visible,expression:"showTip || !visible"}],staticClass:"btn-drawer flex flex-center item-center",style:{top:(t.height-80)/2-24+"px"},on:{click:function(e){t.visible=!t.visible}}},[s("img",{class:t.visible?"":"img",attrs:{src:i("e149")}})])]),s("div",{staticClass:"contant-out__right",style:t.heightStyle},[s("scrollbar",{attrs:{"max-height":t.height-40}},[s("div",{staticClass:"contant-out__right-main",attrs:{id:"contantout"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tagsFlag,expression:"tagsFlag === 0"}],staticClass:"px-16 py-28"},[t.isCup?s("settingsForCup",{attrs:{bg:t.background,isWorld:t.isWorld},on:{open:function(e){return t.$store.commit("editor/setSizePanelVisible",!0)},edit:t.handleEdit,confirm:t.handleBackground}}):t._e(),t.isBox?s("settings",{attrs:{bg:t.background,isWorld:t.isWorld},on:{open:function(e){return t.$store.commit("editor/setSizePanelVisible",!0)},edit:t.handleEdit,confirm:t.handleBackground}}):t._e()],1),s("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tagsFlag,expression:"tagsFlag === 1"}],staticClass:"property-container"},[t.targetDesigns.length>1||1===t.targetDesigns.length&&t.targetDesign?s("property",{attrs:{multiple:t.targetDesigns.length>1,opts:t.opts,design:t.targetDesign||{}},on:{change:t.designChange,silentChange:t.silentDesignChange,opacity:t.handleOpacity}}):t._e()],1)])])],1)])]),s("div",{staticClass:"fix-bottom",style:{right:24+(t.visible?220:0)+"px"}},[s("div",{staticClass:"inline-block"},[s("Tags",{attrs:{fields:t.sizes,value:""+t.isInside},on:{change:t.handleChangeSize}})],1),s("a-tooltip",{attrs:{placement:"top",trigger:"hover"}},[s("template",{slot:"title"},[s("span",[t._v("旋转画布")])]),s("div",{staticClass:"knife-btn flex flex-center item-center pointer",on:{click:function(e){return t.handleRotate(90)}}},[s("img",{attrs:{src:i("4e47")}})])],2),s("a-tooltip",{attrs:{placement:"top",visible:!t.showKnifeChoose&&t.knifeVisible,trigger:"hover"}},[s("template",{slot:"title"},[s("span",[t._v("区域选择")])]),s("div",{staticClass:"knife-btn flex flex-center item-center pointer",on:{click:function(e){t.showKnifeChoose=!t.showKnifeChoose},mousemove:function(e){t.knifeVisible=!0},mouseleave:function(e){t.knifeVisible=!1}}},[s("img",{attrs:{src:i("1937")}})])],2)],1),t.$root.modeReady?s("knifefaces",{attrs:{right:t.visible?244:24},model:{value:t.showKnifeChoose,callback:function(e){t.showKnifeChoose=e},expression:"showKnifeChoose"}}):t._e(),s("transition",{attrs:{name:"move"}},[t.isBox?s("size",{directives:[{name:"show",rawName:"v-show",value:t.isWorld&&t.sizePanelVisible,expression:"isWorld && sizePanelVisible"}],attrs:{height:t.height},on:{close:function(e){return t.$store.commit("editor/setSizePanelVisible",!1)}}}):t._e(),t.isCup?s("sizeForCup",{directives:[{name:"show",rawName:"v-show",value:t.isWorld&&t.sizePanelVisible,expression:"isWorld && sizePanelVisible"}],on:{close:function(e){return t.$store.commit("editor/setSizePanelVisible",!1)}}}):t._e()],1)],1)},n=[],a=(i("8a79"),i("5530")),r=i("5880"),o=i("9639"),l=i("de03"),c=i("f356"),h=i("b4df"),d=i("08d1"),u=i("30ee"),p=i("f2f7"),f=(i("365c"),i("750b")),m=(i("a97c"),Object(f["b"])({props:{fields:{type:[Object,Array],default:()=>[]},value:{default:""}},setup(t,e){const i=Object(f["j"])("");Object(f["k"])([()=>t.fields,()=>t.value],()=>{t.value?i.value=t.value:t.fields.length&&(i.value=t.fields[0].key)});const s=Object(f["a"])(()=>i.value?t.fields.findIndex(t=>t.key===i.value):0);return()=>Object(f["c"])("div",{class:"b-tags-wrapper"},[Object(f["c"])("div",{class:"radio-container"},[Object(f["c"])("div",{class:"radio-preview",style:{transform:`translate(${100*s.value}%,0)`}})]),Object(f["c"])("ul",{class:"radio-content flex"},[t.fields.map((t,n)=>Object(f["c"])("li",{key:n,class:"text-pointer "+(s.value===n?"active":""),on:{click:()=>{i.value=t.key,e.emit("change",t.key)}}},[t.value]))])])}})),g=i("3ef4"),v=i("b439"),b={components:{property:o["default"],faces:l["default"],knifefaces:d["default"],settings:c["default"],settingsForCup:h["default"],size:u["default"],sizeForCup:p["default"],Tags:m},props:["value"],model:{prop:"value",event:"change"},watch:{value(t){this.visible=t},visible(t){this.$emit("change",t)},targetDesigns(t){this.tagsFlag=t.length>0?1:0},sizePanelVisible(){0!==this.$root.projectData.cate.complex_type?this.$store.commit("editor/setShowAxiasRemark",!1):this.$store.commit("editor/setShowAxiasRemark",this.sizePanelVisible),this.sizePanelVisible||this.$store.commit("editor/setCurrentAxiasRemark",null)}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])(["isInside"])),Object(r["mapState"])("editor",["targetDesign","targetDesigns","currentFace","sizePanelVisible","currentWorkingGroup"])),Object(r["mapState"])("table",["selected"])),Object(r["mapGetters"])("project",["isCup","isBox"])),{},{activeDesignType(){const{targetDesign:t}=this;return t?t.type:""},isGroup(){return this.targetDesigns.length>1||"group"===this.activeDesignType},opts(){if(!this.targetDesigns.length)return{};let t=this.targetDesign;const e={showBottom:!0,showDelete:!0,fills:[],optionalColors:[],showMultipleLayer:this.isGroup};if(!t)return e;if(["img","qrcode","barcode"].includes(t.type)&&(e.showResize=!0),["barcode","qrcode"].includes(t.type)&&(e.showColor=!0),"img"===t.type&&(e.showOpacity=!0,t.src&&t.src.endsWith(".svg")&&t.can_set_color&&(e.showColor=!0),t.src.endsWith("svg")||(e.showCutout=!0)),~["font","barcode","table"].indexOf(t.type)&&(e.showFont=!0),"barcode"===t.type&&(e.showEditBarcode=!0,e.optionalColors=["#FFAA00","#FF4D4F","#025FFF","#52C41A"]),"table"===t.type){var i,s;e.isTable=!0,e.showFontSize=!0,e.showColor=!0;const n=this.selected[0]||[],a=n[0],r=n[1];let o="";const l=g["a"].getLineKeysByCoord(a,r,a+1,r+1);l.forEach(e=>{var i;const s=(null===(i=t.table.lines[e])||void 0===i?void 0:i.color)||"";!o&&s&&"transparent"!==s&&(o=s)}),e.fills=[(null===(i=t.table.cells[a])||void 0===i||null===(s=i[r])||void 0===s?void 0:s.background)||"#fff",o||"#fff"]}return(e.showFont||e.showColor&&!["qrcode"].includes(t.type))&&(e.showCraft=!0),"font"===t.type&&(e.showFontSize=!0),e},currentDesign(){return this.designs.find(t=>{var e;return t.uuid===(null===(e=this.targetDesign)||void 0===e?void 0:e.uuid)})||{}},designs(){return this.isInside?this.$root.projectData.insideDesignData:this.$root.projectData.designData},background(){let t="";return t=this.isWorld?this.isInside?this.$root.projectData.inside_background:this.$root.projectData.background:this.isInside?this.$root.projectData.insideFaceBackground[this.currentFace]?this.$root.projectData.insideFaceBackground[this.currentFace].rgba:"":this.$root.projectData.faceBackground[this.currentFace]?this.$root.projectData.faceBackground[this.currentFace].rgba:"",{rgba:t||"",cmyk:""}},heightStyle(){return{height:this.height-40+"px"}},isWorld(){return null===this.currentFace},tags(){const t=[this.isWorld?"画布":this.currentFace],e={img:"图片",font:"文字",barcode:"条形码",qrcode:"二维码",table:"表格",group:"组合"};if(this.isGroup)this.activeDesignType?t[1]=e[this.activeDesignType]:t[1]="组合";else{const i=this.targetDesigns[0];i&&t.push(e[i.type])}return t}}),data(){return{sizes:[{key:"0",value:"正面"},{key:"1",value:"背面"}],knifeVisible:!1,height:window.innerHeight-52-220-8,top:280,visible:this.value,tagsFlag:0,showKnifeChoose:!0,showTip:!1}},mounted(){this.resize()},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapMutations"])(["editor"])),Object(r["mapActions"])(["saveReloadMode","saveIsInside"])),{},{handleChangeSize(t){this.saveIsInside(~~t),this.$store.commit("editor/toggleCurrentFace",null)},handleEdit(){this.$emit("resize")},handleRotate(t){this.$root.projectData.totalRotate+=t;let e=this.$root.projectData.totalRotate%360;e<0&&(e+=360),this.$root.projectData.rotate=e},handleBackground(t){const e=this.$root.projectData;this.isWorld&&this.isInside?e.inside_background=t.rgba:this.isWorld&&!this.isInside?e.background=t.rgba:this.isWorld||(this.isInside?this.$set(e.insideFaceBackground,this.currentFace,t):this.$set(e.faceBackground,this.currentFace,t)),this.$store.commit("increaseCanvasVersion",this.isInside),this.$store.commit("increaseProjectVersion"),this.saveReloadMode()},resize(){window.onresize=()=>{this.height=window.innerHeight-52-220-8}},designChange(t,e){const i=this.currentWorkingGroup?Object(v["d"])(this.currentWorkingGroup):this.designs;Object(v["b"])(t,i);const s=this.targetDesign.uuid;i.forEach(t=>{t.uuid==s&&(this.targetDesign.style=t.style)}),e&&"resize"===e&&Object(v["l"])(this.currentWorkingGroup),this.$store.commit("increaseCanvasVersion",this.isInside),this.$store.commit("increaseProjectVersion"),this.$store.dispatch("editor/saveTargetDesigns",[t])},silentDesignChange(t){const e=this.currentWorkingGroup?Object(v["d"])(this.currentWorkingGroup):this.designs;Object(v["b"])(t,e),this.$store.commit("increaseCanvasVersion",this.isInside),this.$store.commit("increaseProjectVersion")},handleOpacity(t){this.currentWorkingGroup?Object(v["d"])(this.currentWorkingGroup):this.designs;this.targetDesigns.map(e=>{e.style.opacity=t,"img"===e.type&&this.$store.commit("editor/addToUuidTable",e.uuid)}),this.$store.commit("increaseCanvasVersion",this.isInside),this.$store.commit("increaseProjectVersion")}})},y=b,_=(i("105d"),i("2877")),x=Object(_["a"])(y,s,n,!1,null,"884b7fa0",null);e["default"]=x.exports},"7fa4":function(t,e,i){"use strict";var s=i("b9fb"),n=i.n(s);n.a},"7fad":function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("cb04");i("95ef");const a=i("15a5");e["default"]=Object(s["b"])({props:{nickname:{type:String,default:""},mobile:{type:String,default:""}},setup(t,e){const i=Object(s["j"])(!1),r=()=>{e.emit("refresh")};return()=>Object(s["c"])("div",{class:"thirdaccount"},[Object(s["c"])("h3",{class:"thirdaccount-title"},["第三方账号"]),Object(s["c"])("div",{class:"thirdaccount-content"},[Object(s["c"])("img",{attrs:{src:a,alt:""}}),Object(s["c"])("span",{class:"thirdaccount-content-title"},["微信："]),Object(s["c"])("span",{class:t.nickname?"wechatname":"wechatname text-gray"},[t.nickname||"暂无绑定微信"]),t.nickname?Object(s["c"])("a-button",{on:{click:()=>{t.mobile?i.value=!0:e.root.$message.error("请先绑定手机")}}},["解除绑定"]):Object(s["c"])("a-button",{attrs:{type:"primary"},on:{click:()=>{i.value=!0}}},["立即绑定"]),Object(s["c"])("a-modal",{attrs:{centered:!0,title:t.nickname?"解绑微信":"绑定微信",visible:i.value,footer:!1,destroyOnClose:!0},on:{cancel:()=>i.value=!1}},[Object(s["c"])(n["default"],{attrs:{type:t.nickname?"relieve":"bind"},on:{close:()=>{i.value=!1,r()}}})])])])}})},"7fc1":function(t,e,i){"use strict";var s=i("adae"),n=i.n(s);n.a},"7fef":function(t,e,i){},8021:function(t,e,i){"use strict";var s=i("fd17"),n=i.n(s);n.a},"805f":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("124f"),n=r(s),a=i("6e53");function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=function(t){function e(t,i){return o(this,e),t+=(0,a.mod11)(t),t+=(0,a.mod10)(t),l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return c(e,t),e}(n.default);e.default=h},8067:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-input-number",{ref:"inputControl",class:t.customClass,style:t.customStyle,attrs:{min:t.min,max:t.max,step:t.step,formatter:t.formatter,parser:t.parser,value:t.innerNumber},on:{change:t.onChange,pressEnter:t.handlePressEnter,focus:t.onFocus,blur:t.onBlur}})},n=[],a=(i("8a79"),i("1276"),i("ed08")),r={name:"InputNumberWithControl",data(){return{innerNumber:"",showUnit:!0}},watch:{outerNumber(t){this.innerNumber!==this.outerNumber&&(this.innerNumber=this.outerNumber)},innerNumber(t){(t>this.max||t<this.min)&&this.$emit("error")}},props:{min:{type:Number,default:0},max:{type:Number,default:1e4},outerNumber:{type:Number,default:0},step:{type:Number,default:.1},unit:{type:String,default:"mm"},precise:{type:Number,default:1},customStyle:{type:[Object,Object],default:()=>({})},customClass:{type:String,default:""}},mounted(){this.innerNumber=this.outerNumber},methods:{onChange(t){const e=String(t).split(" ")[0];this.innerNumber=e},onStep(t){const e=String(t).split(" ")[0];this.innerNumber=e,this.$emit("change",this.innerNumber)},onFocus(){this.showUnit=!1},onBlur(){this.showUnit=!0,this.innerNumber=Math.round(Math.pow(10,this.precise)*this.innerNumber)/Math.pow(10,this.precise),this.$emit("change",this.innerNumber)},handlePressEnter(){this.$refs.inputControl.blur(),this.$emit("change",this.innerNumber)},parser(t){let e=t.split(" ")[0];return e.endsWith(this.unit)&&(e=e.split(this.unit)[0]),this.innerNumber=e,e},formatter(t){return isNaN(t)?this.min:!Object(a["p"])(this.innerNumber)&&this.showUnit?`${this.innerNumber} ${this.unit}`:""+this.innerNumber}}},o=r,l=i("2877"),c=Object(l["a"])(o,s,n,!1,null,null,null);e["default"]=c.exports},8160:function(t,e,i){},8175:function(t,e,i){},"818c":function(t,e,i){},"81be":function(t,e,i){},"82eb":function(t,e){var i={NONE:0,STYLE_BIND:1,PLAIN_TEXT:2},s=9;e.ContextCachedBy=i,e.WILL_BE_RESTORED=s},"82ed":function(t,e,i){"use strict";var s=i("336a"),n=i.n(s);n.a},"831f":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-input-number",{ref:"inputControl",class:t.customClass,style:t.customStyle,attrs:{min:t.min,max:t.max,step:t.step,formatter:t.formatter,parser:t.parser,value:t.innerNumber},on:{change:t.onChange,pressEnter:t.handlePressEnter,focus:t.onFocus,blur:t.onBlur}})},n=[],a=(i("8a79"),i("1276"),i("ed08")),r={name:"InputNumberWithControl",data(){return{innerNumber:"",showUnit:!0}},watch:{outerNumber(t){this.innerNumber!==this.outerNumber&&(this.innerNumber=this.outerNumber)},innerNumber(t){(t>this.max||t<this.min)&&this.$emit("error")}},props:{min:{type:Number,default:0},max:{type:Number,default:1e4},outerNumber:{type:Number,default:0},step:{type:Number,default:.1},unit:{type:String,default:"mm"},precise:{type:Number,default:1},customStyle:{type:[Object,Object],default:()=>({})},customClass:{type:String,default:""}},mounted(){this.innerNumber=this.outerNumber},methods:{onChange(t){let e=String(t).split(" ")[0];this.innerNumber=e},onStep(t){let e=String(t).split(" ")[0];this.innerNumber=e,this.$emit("change",this.innerNumber)},onFocus(){this.showUnit=!1},onBlur(){this.showUnit=!0,this.innerNumber=Math.round(Math.pow(10,this.precise)*this.innerNumber)/Math.pow(10,this.precise),this.$emit("change",this.innerNumber)},handlePressEnter(){this.$refs.inputControl.blur(),this.$emit("change",this.innerNumber)},parser(t){let e=t.split(" ")[0];return e.endsWith(this.unit)&&(e=e.split(this.unit)[0]),this.innerNumber=e,e},formatter(t){return isNaN(t)?this.min:!Object(a["p"])(this.innerNumber)&&this.showUnit?`${this.innerNumber} ${this.unit}`:""+this.innerNumber}}},o=r,l=i("2877"),c=Object(l["a"])(o,s,n,!1,null,null,null);e["default"]=c.exports},8379:function(t,e,i){t.exports=i.p+"editor-assets/img/arrange-vcenter.e1c1cfed.svg"},"83dd":function(t,e,i){"use strict";var s=i("2e14"),n=i.n(s);n.a},"84ec":function(t,e){var i=Math.log(2);function s(t,e,n,a,r,o){var l=a+"-"+r,c=t.length;if(o.hasOwnProperty(l))return o[l];if(1===e){var h=Math.round(Math.log((1<<c)-1&~r)/i);return t[n][h]}var d=a|1<<n,u=n+1;while(a&1<<u)u++;for(var p=0,f=0,m=0;f<c;f++){var g=1<<f;g&r||(p+=(m%2?-1:1)*t[n][f]*s(t,e-1,u,d,r|g,o),m++)}return o[l]=p,p}function n(t,e){var i=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],n={},a=s(i,8,0,0,0,n);if(0!==a){for(var r=[],o=0;o<8;o++)for(var l=0;l<8;l++)null==r[l]&&(r[l]=0),r[l]+=((o+l)%2?-1:1)*s(i,7,0===o?1:0,1<<o,1<<l,n)/a*e[o];return function(t,e,i){var s=e*r[6]+i*r[7]+1;t[0]=(e*r[0]+i*r[1]+r[2])/s,t[1]=(e*r[3]+i*r[4]+r[5])/s}}}e.buildTransformer=n},8506:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-modal",{attrs:{footer:null,title:"下单印刷（一个起印）",width:900},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[s("div",{staticClass:"main-content"},[s("a-row",{attrs:{type:"flex",justify:"space-between"}},[s("a-col",[s("preview",{ref:"previewRef"})],1),s("a-col",{staticClass:"product-details box"},[s("div",{staticClass:"title"},[t._v("包装详情")]),s("div",{staticClass:"contents"},[s("div",{staticClass:"content line"},[s("div",{staticClass:"content-name"},[t._v("品名：")]),s("div",{staticClass:"content-value"},[t._v(t._s(t.productName))])]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v(t._s(t.sizeTypeName)+"：")]),s("div",{staticClass:"content-value"},[t._v(t._s(t.sizeValue)+" mm")])]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("展开面积：")]),s("div",{staticClass:"content-value"},[t._v(" "+t._s(t.knifeData.totalX.toFixed(2))+"mm X "+t._s(t.knifeData.totalY.toFixed(2))+"mm ")])]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("材质：")]),s("div",{staticClass:"content-value"},[t._v(t._s(t.materialScience))])]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("表面工艺：")]),s("div",{staticClass:"content-value"},[t._v(t._s(t.surfaceScience))])]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("特殊工艺：")]),s("div",{staticClass:"content-value"},[t._l(t.specialCrafts,(function(e,i){return s("span",{key:i,staticClass:"craft-list"},[s("div",{staticClass:"color-box",style:{backgroundColor:e.color}}),t._v(" 局部"+t._s(e.craftTitle)),i<t.specialCrafts.length-1?[t._v("，")]:t._e()],2)})),0===t.specialCrafts.length?s("span",[t._v("无")]):t._e()],2)]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("印刷风险检测：")]),s("div",{staticClass:"content-value"},[t.hasRisk?s("a-tooltip",{attrs:{placement:"topRight"}},[s("template",{slot:"title"},[s("span",[t._v("建议返回调整图片文字的分辨率")])]),t.hasRisk?s("span",{staticClass:"has-risk"},[t._v("存在印刷风险")]):t._e()],2):s("span",{staticClass:"no-risk"},[t._v("已检测，无风险")])],1)])])])],1),s("div",{staticClass:"price-details box mt-32"},[s("div",{staticClass:"title"},[t._v("价格详情")]),t.priceSummary?s("a-row",{staticClass:"price-content"},[s("a-col",{staticClass:"price-box",attrs:{span:4}},[s("div",{staticClass:"left-aligned-line"},[s("div",{staticClass:"price-key"},[t._v("单价：")]),s("div",{staticClass:"price-value"},[s("span",{staticClass:"money unit-price"},[t._v(t._s(((t.priceSummary.payFee+t.subsidyMoney)/t.priceSummary.count).toFixed(2)))]),t._v(" 元/个 ")])]),s("div",{staticClass:"left-aligned-line"},[s("div",{staticClass:"price-key"},[t._v("数量：")]),s("div",{staticClass:"price-value"},[s("a-input-number",{attrs:{min:1,max:t.maxCount,formatter:t.numberFormatter,parser:t.numberFormatter},on:{change:function(e){t.productCount=t.handleIntegerChange.apply(void 0,arguments)}},model:{value:t.productCount,callback:function(e){t.productCount=e},expression:"productCount"}})],1)]),s("div",{staticClass:"left-aligned-line"},[s("div",{staticClass:"price-key"},[t._v("开机费：")]),s("div",{staticClass:"price-value"},[t._v(t._s(0)+"元/次")])]),s("div",{staticClass:"left-aligned-line"},[s("div",{staticClass:"price-key"},[t._v("补贴：")]),s("div",{staticClass:"subsidy fo-p fo-14 mr-20"},[t._v(t._s(-t.subsidyMoney)+"元")]),s("div",{staticStyle:{"line-height":"16px"}},[s("img",{attrs:{src:i("a743")}})])])]),s("a-col",{staticClass:"price-discount-box price-box",attrs:{offset:2,span:8}},[t._l(t.discounts,(function(e,i){return s("div",{key:i,staticClass:"price-discount-list"},[void 0!==e.min?[t._v(" "+t._s(e.min)),e.max?s("span",[t._v("-"+t._s(e.max))]):t._e(),t._v("元: "+t._s(10*e.discount)+"折 ")]:t._e()],2)})),[s("a-popover",[t._v(" 制作数量大于50或金额超过1000时， 添加 "),s("span",{staticClass:"text-pointer",staticStyle:{color:"#00b578"}},[t._v("客服微信")]),t._v(" 获得更低报价 "),s("template",{slot:"content"},[s("img",{staticStyle:{width:"200px",heigth:"200px"},attrs:{src:"https://yun.baoxiaohe.com/static/bwqrcode.jpg"}})])],2)]],2),s("a-col",{staticClass:"customer-service-tips",attrs:{offset:1,span:6}},[s("img",{staticStyle:{width:"100px",heigth:"100px"},attrs:{src:"https://yun.baoxiaohe.com/static/bwqrcode.jpg"}}),s("div",{staticClass:"mt-10"},[t._v("如有疑问请咨询客服")])])],1):s("a-row",{attrs:{type:"flex",align:"middle",justify:"center"}},[s("a-col",{staticClass:"mt-10 customer-service-tips-empty"},[s("img",{staticStyle:{width:"110px",heigth:"110px"},attrs:{src:"https://yun.baoxiaohe.com/static/bwqrcode.jpg"}}),s("div",{staticClass:"mt-10"},[t._v("如有疑问请咨询客服")])])],1)],1),t.priceSummary?s("a-row",{staticClass:"summary mt-30",staticStyle:{position:"relative"},attrs:{type:"flex",justify:"space-between",align:"bottom"}},[s("a-col",[s("a-popover",{attrs:{title:"金额明细","overlay-class-name":"summary-in-detail-popover"}},[s("template",{slot:"content"},[s("div",{staticClass:"summary-in-detail"},[s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("原价：")]),s("div",{staticClass:"content-value"},[t._v(" "+t._s(((t.priceSummary.payFee+t.subsidyMoney)/t.priceSummary.count/t.discount).toFixed(2))+" 元 x "+t._s(t.priceSummary.count)+" 个 ")])]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("折扣：")]),s("div",{staticClass:"content-value"},[t._v(" "+t._s(t.humanDiscounts(t.discount))+" ")])]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("开机费：")]),s("div",{staticClass:"content-value"},[t._v(t._s(0))])]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("邮费：")]),s("div",{staticClass:"content-value"},[t._v("顺丰到付")])]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("补贴：")]),s("div",{staticClass:"subsidy fo-p fo-14"},[t._v(t._s(-t.subsidyMoney)+"元")])])])]),s("a-icon",{staticClass:"mr-8 text-pointer",attrs:{type:"menu"}})],2),t._v(" 印刷总价：¥ "),s("span",{staticClass:"money summary-money"},[t._v(t._s(t.priceSummary.payFee))]),s("span",{staticClass:"tips"},[t._v("（不含运费）")])],1),s("a-col",[s("a-button",{attrs:{type:"primary"},on:{click:t.gotoPrepay}},[t._v("立即下单")])],1)],1):t._e()],1)])],1)},n=[],a=(i("25f0"),i("ddb0"),i("5530")),r=i("365c"),o=i("4212"),l=i("5880"),c=i("9cfe"),h=i("ed08"),d=i("57e0"),u={props:{},components:{Preview:c["default"],AddressPicker:d["a"]},data(){return{visible:!1,maxCount:100,productCount:1,priceSummary:null,hasRisk:!1}},mounted(){},methods:{show({hasRisk:t}){this.visible=!0,this.hasRisk=t,this.$store.dispatch("property/fetchMaterialSciences"),this.$store.dispatch("property/fetchSurfaceSciences"),this.$store.dispatch("property/fetchCrafts"),this.prepareData(),this.$nextTick(()=>{this.$refs.previewRef.initImage()})},debounceHandleIntegerChange:t=>Object(h["g"])((void 0).handleIntegerChange(t),1e3),handleIntegerChange(t){t=(t||1).toString();let e=1;const i=/^\d+/.exec(t);return i.length>0&&(e=parseInt(i[0])),this.prepareData(),e},numberFormatter(t){return parseInt(t)>this.maxCount?this.maxCount:t},hide(){this.visible=!1},humanDiscounts(t){return 1===t?"无":(t*=10,Number.isInteger(t)?t+"折":Math.round(10*t)/10+"折")},prepareData(){this.$api2.calculateProductOrder({project_id:this.project_data.id,count:this.productCount}).then(t=>{this.priceSummary=t.data})},gotoPrepay(){this.$router.push(`/preorder?project_id=${this.project_data.id}&count=${this.productCount}`)}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(l["mapState"])("property",["materialSciences","surfaceSciences"])),Object(l["mapState"])("editor-v2",["project_data","knife_data","isCup","scale","is_outside","last_saved_local_history_ts","element_craft_list"])),{},{crafts(){return this.element_craft_list},projectData(){return this.project_data},knifeData(){return this.knife_data},productName(){const t=this.project_data.extend_attrs||{},e=[t.trademark,t.productName,this.project_data.project_name];return e.filter(t=>t).join("")},sizeTypeName(){var t;return null===(t=r["SIZE_TYPES"].filter(t=>t.key===this.project_data.size_type)[0])||void 0===t?void 0:t.value},sizeValue(){let t=this.knife_data.size;"dm"===this.project_data.size_type?t=this.knife_data.knifeSize:"ed"===this.project_data.size_type&&(t=this.knife_data.outSize);const e=Object(o["a"])(t.L,t.W,t.H,t.like),i=e.join("x");return i},materialScience(){var t;return null===(t=(this.materialSciences||[]).filter(t=>t.id===this.project_data.science_id)[0])||void 0===t?void 0:t.name},surfaceScience(){var t;return(null===(t=(this.surfaceSciences||[]).filter(t=>t.id===this.project_data.membrane_id)[0])||void 0===t?void 0:t.name)||"无"},specialCrafts(){const t=[...this.project_data.design_data,...this.project_data.inside_design_data].filter(t=>t.style.craft),e={};for(const s of t)e[s.style.craft]?e[s.style.craft].push(s):e[s.style.craft]=[s];const i=[];for(const s of Object.keys(e)){const t=this.crafts.find(t=>t.id==s);t&&i.push({craftTitle:t.name,color:t.color,area:Math.round(e[s].map(t=>t.style.width*t.style.height).reduce((t,e)=>t+e))})}return i},discounts(){var t,e;const i=(null===(t=this.priceSummary)||void 0===t||null===(e=t.saleInfo)||void 0===e?void 0:e.list)||[];if(0===i.length)return[];const s=[];for(let n=0;n<i.length-1;n++)s.push({min:i[n].min,max:i[n+1].min-.01,discount:i[n].discount,info:i[n].info});return s.push({min:i[i.length-1].min,info:i[i.length-1].info,discount:i[i.length-1].discount}),s},subsidyMoney(){var t,e,i;return null===(t=this.priceSummary)||void 0===t||null===(e=t.saleInfo)||void 0===e||null===(i=e.use)||void 0===i?void 0:i.subsidy},discount(){var t,e,i;return null===(t=this.priceSummary)||void 0===t||null===(e=t.saleInfo)||void 0===e||null===(i=e.use)||void 0===i?void 0:i.discount}})},p=u,f=(i("5755"),i("50e4"),i("2877")),m=Object(f["a"])(p,s,n,!1,null,"48b69f53",null);e["default"]=m.exports},8536:function(t,e,i){t.exports=i.p+"editor-assets/img/lig-a.80f79f5a.svg"},8537:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.data&&t.data.length?i("div",{staticClass:"template-list-wrap"},t._l(t.data,(function(e,s){return i("div",{key:"template-item-"+s,staticClass:"item",on:{click:function(i){return t.$emit("click",e)}}},[i("a-popover",{attrs:{placement:"right","overlay-class-name":"ant-no-padding"}},[i("template",{slot:"content"},[i("div",{staticClass:"template-list-wrap__a-popover-content"},[i("div",{staticClass:"p-20"},[i("div",{staticClass:"title"},[t._v(" "+t._s(e.title)+" ")]),parseFloat(e.price)>0?i("div",{staticClass:"price-wrap"},[i("span",{staticClass:"price"},[t._v(" ¥"+t._s(e.price)+" ")]),t._v(" 起 ")]):t._e()]),e.keywords?[i("a-divider",{staticClass:"my-1"}),i("div",{staticClass:"p-12"},t._l(e.keywords.split(","),(function(e,s){return i("span",{key:"keyword-"+s,staticClass:"keyword"},[t._v(" "+t._s(e)+" ")])})),0)]:t._e()],2)]),i("div",{staticClass:"btn-shenglue-wrap",on:{click:function(t){t.stopPropagation(),t.preventDefault()}}},[i("i",{staticClass:"iconfont icon-shenglve"})])],2),i("div",{staticClass:"item-image",style:{"background-image":"url("+t.$filters.limit(e.image,{width:400})+")"}}),i("div",{staticClass:"item-title"},[t._v(" "+t._s(e.title)+" ")])],1)})),0):t._e()},n=[],a={props:{data:{type:Array,default:()=>[]}},data(){return{showPopover:!1}}},r=a,o=(i("3332"),i("effe"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"579b222c",null);e["default"]=l.exports},8561:function(t,e,i){},"857d":function(t,e){var i=2*Math.PI;function s(t){return t%=i,t<0&&(t+=i),t}e.normalizeRadian=s},"858f":function(t,e,i){},8599:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABhklEQVRYR+3XoU8dQRDH8c8TOFIBIUE1qcKDwoDCgGiCIOArETQEWVULAYHjD4DgEGBQNCQo8KgmVU0aKggOQ7a5Sy73try9Y+FCYN172Z357vxm9mZ6Ol69jv2LAQxhDYsYyQT4B0fYwX3VZgxgA18yOa6b2cPmIIBzjGEFV5lAJrGPv5geBHBdbJjI5Lw0E7Ubk+AdoB6BoF3QsM0KORRyKazWEnQO0ObmsTOtI5ALIEQyrFKSfz9esgqiF3kVAClJWM32RpKlRKApwCesV57cC2zhZ4wsBaDJjYLzQ3yoHbrFUgwiN8Au5vAD3wqI75jBKVbrt8kNcIlhzOJ34WwcZ7jD1HMDBL1DExMD6PsUp74Dg5KwWgHbmP+PBCf42iYCTQA+4gCjNUc3WMavNgBNqiDsDRChp1woDh4XvWCf81QJmgKU+5Mam9xVUIUtAar/9b2YbwLg0eY2FoGylp/alifZyTWYxL6GsQEnKQfK0exzMaCkVEEMIGYnCSDFYbY9nU/HD89iYSHPC27XAAAAAElFTkSuQmCC"},"85a2":function(t,e,i){"use strict";var s=i("9956"),n=i.n(s);n.a},"85bb":function(t,e,i){},"85bd":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"download-pop"},[s("div",{staticClass:"flex flex-between pop-header"},[0===t.page?s("div",{staticClass:"fo-18 bold"},[s("span",{staticClass:"current text-pointer"},[t._v(" 导出设计 ")])]):t._e(),1===t.page?s("a-page-header",{staticStyle:{padding:"0"},attrs:{title:"返回"},on:{back:t.backToUp}}):t._e(),s("div",{staticClass:"fo-16 pointer",on:{click:function(e){t.visible=!1}}},[s("a-icon",{staticStyle:{color:"#aaa"},attrs:{type:"close"}})],1)],1),s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.page,expression:"page === 0"}]},[s("a-form-model",{ref:"pdfExportFormRef",attrs:{model:t.form,rules:t.pdfExportRules}},[s("div",{staticClass:"flex flex-between item-center mt-24 mb-12"},[s("div",{staticClass:"fo-14 bold"},[t._v("文件类型")]),s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[t._v(" 印刷PDF文件包含结构图及高清印刷设计，你可以使用Adobe Illustrator继续编辑； "),s("br"),t._v("印刷使用 CMYK色彩模式，和在电脑屏幕上的显示效果存在色差。 ")]),s("img",{attrs:{src:i("5151")}})],2)],1),s("a-select",{staticStyle:{width:"100%"},attrs:{"dropdown-class-name":"download-options","option-label-prop":"label"},on:{change:t.exportTypeSelect},model:{value:t.exportType,callback:function(e){t.exportType=e},expression:"exportType"}},[s("a-select-option",{attrs:{value:"design",label:"印刷PDF"}},[s("div",{staticClass:"label"},[s("div",{staticClass:"tip-title"},[t._v("印刷PDF")]),s("div",{staticClass:"tips"},[t._v("用于高清印刷生产")])])]),s("a-select-option",{attrs:{value:"frame",label:"结构PDF"}},[s("div",{staticClass:"label"},[s("div",{staticClass:"tip-title"},[t._v("结构PDF")]),s("div",{staticClass:"tips"},[t._v("用于制作模具或生产切割")])])])],1),"design"===t.exportType?s("a-select",{staticClass:"mt-8",staticStyle:{width:"100%"},attrs:{"dropdown-class-name":"download-options","option-label-prop":"label"},on:{change:t.exportTypeSelect},model:{value:t.colorMode,callback:function(e){t.colorMode=e},expression:"colorMode"}},[s("a-select-option",{attrs:{value:"CMYK",label:"CMYK模式"}},[s("div",{staticClass:"tip-title"},[t._v("CMYK模式")])]),s("a-select-option",{attrs:{value:"RGB",label:"RGB模式"}},[s("div",{staticClass:"tip-title"},[t._v("RGB模式")])])],1):t._e(),s("div",{staticClass:"flex flex-between item-center mt-24 mb-12"},[s("div",{staticClass:"fo-14 bold"},[t._v("备注")])]),s("a-form-model-item",{ref:"remark",attrs:{prop:"remark"}},[s("a-textarea",{attrs:{placeholder:"说明工艺材质或其他要求...","auto-size":{minRows:2,maxRows:4}},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),t.vipPrice>0?s("div",[t.payList.length>0?s("div",{staticClass:"mt-24 mb-12 flex flex-start item-center pointer",on:{click:function(e){t.payShow=!t.payShow}}},[s("div",{staticClass:"fo-14 bold"},[t._v(t._s(t.payList.length)+" 个需支付")])]):t._e(),t._l(t.payList,(function(e,i){return s("div",{key:i},[["template","work"].includes(e.type)?s("div",{staticClass:"mt-12 flex flex-between item-center"},[t._m(0,!0),s("a-input",{staticStyle:{width:"238px"},attrs:{value:e.label,"read-only":!0},scopedSlots:t._u([{key:"suffix",fn:function(){return[s("div",[e.originalPrice?s("span",{staticStyle:{"text-decoration":"line-through",color:"#999","font-size":"12px"}},[t._v(" ¥"+t._s(e.originalPrice)+" ")]):t._e(),s("span",[t._v("¥"+t._s(e.price))])])]},proxy:!0}],null,!0)})],1):t._e(),"blank"===e.type?s("div",{staticClass:"mt-12 flex flex-between item-center"},[t._m(1,!0),s("a-select",{staticStyle:{width:"238px"},attrs:{"dropdown-class-name":"download-options","option-label-prop":"label"},on:{change:t.blankModeChange},model:{value:t.blankModeActive,callback:function(e){t.blankModeActive=e},expression:"blankModeActive"}},t._l(e.selects,(function(e,i){return s("a-select-option",{key:i,attrs:{value:i,label:e.label}},[s("div",{staticClass:"label"},[s("div",{staticClass:"flex flex-between item-center"},[s("div",{staticClass:"fo-14 bold"},[t._v(t._s(e.divLabel))]),s("div",{staticClass:"fo-14 bold"},[t._v("¥"+t._s(e.price))])]),s("div",{staticClass:"flex flex-between item-center fo-gray",staticStyle:{"margin-top":"-12px"}},[s("div",{staticClass:"fo-12"},[t._v(t._s(e.divSub))]),e.price<e.oriPrice?s("div",{staticClass:"fo-12 line-through"},[t._v(" ¥"+t._s(e.oriPrice)+" ")]):t._e()])])])})),1)],1):t._e()])}))],2):t._e(),t.vipPrice>0&&"success"!==t.status?s("div",{staticClass:"mt-48"},[t.isVip?s("div",[s("a-button",{attrs:{type:"primary",block:""},on:{click:function(e){t.status="",t.createFlag(t.vipPrice)}}},[t._v("VIP专享价 ￥"+t._s(t.vipPrice)+" "),s("span",{staticClass:"fo-12 ml-8",staticStyle:{"text-decoration":"line-through"}},[t._v("原价 ￥"+t._s(t.payPrice))])])],1):s("div",[s("a-button",{style:{width:t.payList.some((function(t){return"work"===t.type}))?"":"138px"},attrs:{block:"",loading:t.orderLoading},on:{click:function(e){t.status="",t.createFlag(t.payPrice)}}},[t._v("结算 ¥"+t._s(t.payPrice))]),t.payList.some((function(t){return"work"===t.type}))?t._e():s("a-button",{staticClass:"ml-12",style:{background:"linear-gradient(135deg,#fff0e2, #fce1be)",border:"none",color:"#91692C",width:"138px"},attrs:{type:"primary",block:"",loading:t.orderLoading},on:{click:t.showPersonalVip}},[t._v("会员专享 ¥"+t._s(t.vipPrice))])],1),t._m(2)]):s("div",{staticClass:"mt-48"},[s("a-button",{attrs:{type:"primary",block:""},on:{click:t.exportPdf}},[t._v("导出")])],1)],1),1===t.page?s("div",{staticClass:"mt-16"},[s("div",{staticClass:"fo-14 text-center"},[t._v("结算金额:")]),s("div",{staticClass:"fo-14 text-center"},[s("span",{staticClass:"fo-26 bold fo-theme"},[t._v("¥"+t._s(this.isVip?t.vipPrice:t.payPrice))])]),s("div",{staticClass:"qrcode-panel text-center"},[s("img",{attrs:{src:t.qrcode,width:"180px"}}),"overdue"===t.status?s("div",{staticClass:"qrcode-panel--mask flex flex-center item-center"},[s("a-button",{attrs:{icon:"reload"},on:{click:function(e){t.status="",t.createFlag()}}},[t._v("刷新")])],1):t._e()]),t._m(3),s("div",{staticClass:"fo-12 ml-4 text-center mt-8"},[t._v("使用手机扫码支付")])]):t._e()]),s("export-pdf-progress-modal",{ref:"pdfProgressRef"})],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pay-icon flex flex-center item-center"},[s("img",{staticClass:"pay-icon-img",staticStyle:{width:"16px",height:"16px"},attrs:{src:i("32b8")}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pay-icon flex flex-center item-center"},[s("img",{staticClass:"pay-icon-img",attrs:{src:i("76ca"),alt:""}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fo-14 fo-gray mt-12"},[t._v(" 支付即视为您已阅读并同意 "),i("a",{staticClass:"fo-theme pointer",attrs:{href:"https://help.baoxiaohe.com/support/archives/300/",target:"_blank"}},[t._v("授权许可协议")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex flex-center item-center"},[s("img",{staticClass:"mr-4",attrs:{src:i("d3e2"),width:"26px",alt:""}}),s("img",{attrs:{src:i("c96f"),width:"26px",alt:""}})])}],a=(i("5319"),i("ddb0"),i("5530")),r=i("5880"),o=i("d055"),l=i.n(o),c=i("0d67"),h=i("7acd"),d=i("9393"),u={props:["value"],mixins:[d["a"]],components:{Service:c["a"],ExportPdfProgressModal:h["default"]},model:{prop:"value",event:"change"},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("profile",["vip"])),Object(r["mapState"])("profile",["user"])),Object(r["mapGetters"])("profile",["isVip"])),Object(r["mapState"])("editor-v2",["project_data","knife_data","isCup","scale","is_outside","last_saved_local_history_ts","element_craft_list"])),{},{crafts(){return this.element_craft_list}}),data(){return{page:0,pageType:0,payShow:!1,exportType:"design",colorMode:"CMYK",visible:this.value,payList:[],blankModeActive:0,payPrice:0,vipPrice:0,orderLoading:!1,qrcode:"",orderFlag:"",intv:null,status:"",pdfExportRules:{remark:[{min:0,max:50,message:"长度不能超过50",trigger:"change"}]},form:{remark:""}}},watch:{value(t){this.visible=t,t&&this.getCheck()},visible(t){this.$emit("change",t),t||(clearInterval(this.intv),this.page=0)}},mounted(){this.getCheck()},methods:{async exportPdf(){this.$refs.pdfExportFormRef.validate(t=>{if(t){this.$emit("change",!1),this.$track({category:"ExportPDF",action:"click",label:`${this.exportType}-${this.colorMode}`}),this.$store.commit("increaseProjectVersion");let t=null;t="frame"===this.exportType?this.$api2.exportKnife({id:this.project_data.id,export_type:"project",remark:this.form.remark.replace(/\s/g,""),color_mode:"RGB"}):this.$api2.exportDesign({id:this.project_data.id,export_type:"project",remark:this.form.remark.replace(/\s/g,""),color_mode:this.colorMode}),t.then(t=>{200==t.code?this.$refs.pdfProgressRef.show(t.data.task_id,this.project_data.project_name,"设计方案"):this.$message.error(t.msg)})}else;})},backToUp(){this.page=0,clearInterval(this.intv)},getStatus(t){this.intv=setInterval(()=>{this.$api2.getOrderFlagStatus({flag:this.orderFlag}).then(e=>{if(e){const i=e.data.status;this.status=i,"overdue"!==i&&"success"!==i||(clearInterval(this.intv),"success"===i&&(this.$track({category:"purchase",affiliation:"Google online store",action:"purchase-export",label:"pay-"+this.project_data.id,value:t}),this.page=0,this.getCheck(),this.exportPdf()))}else clearInterval(this.intv)})},3e3)},createFlag(t){this.orderLoading=!0,this.$api2.createCopyrightOrder({orderType:"copyright",projectId:this.$route.query.id,exportType:"frame"==this.exportType?2:1,blankModeActive:this.blankModeActive}).then(e=>{this.orderLoading=!1,e&&(this.orderFlag=e.data.flag,this.getQrcode(),this.getStatus(t),this.page=1)})},getQrcode(){let t="https://"+window.location.host.replace("www.","");t=t.indexOf("localhost")>-1||t.indexOf("127.0.0.1")>-1||t.indexOf("www.test.baoxiaohe.com")>-1?"https://m.test.baoxiaohe.com":"https://m.baoxiaohe.com",l.a.toDataURL(`${t}/pay/unifiedorder?flag=${this.orderFlag}`).then(t=>{this.qrcode=t}).catch(t=>{})},sumprice(){let t=0,e=0;for(const i of this.payList)"design"===this.exportType&&["template","work"].includes(i.type)&&(t+=parseFloat(i.price),e+=parseFloat(i.vipPrice));this.payPrice=Math.round(100*t)/100,this.vipPrice=0===e?this.vipPrice=e:.5*this.payPrice},getCheck(){this.$api.project.exportCheck({id:this.$route.query.id,export_type:"project",content_type:"design"===this.exportType?"design":"knife"}).then(t=>{t&&(this.payList=t.data,this.sumprice())})},blankModeChange(){this.sumprice()},exportTypeSelect(t){this.getCheck()}}},p=u,f=(i("97ac"),i("2877")),m=Object(f["a"])(p,s,n,!1,null,null,null);e["default"]=m.exports},"85cd":function(t,e,i){"use strict";var s=i("0e11"),n=i.n(s);n.a},8626:function(t,e,i){"use strict";var s=i("9156"),n=i.n(s);n.a},8640:function(t,e,i){"use strict";var s=i("9df1"),n=i.n(s);n.a},8663:function(t,e,i){"use strict";i.r(e);i("b680");var s=i("5530"),n=i("750b"),a=i("365c"),r=i("3ccf"),o=i("c991"),l=i("ca9b"),c=i("f4b1"),h=i("5a0c"),d=i.n(h),u=(i("fda5"),i("1fd7")),p=i("29bf"),f=i("3112"),m=i("262e"),g=i("de66");function v(t,e=0){return t?d()(parseInt(t)+e).format("YYYY-MM-DD HH:mm:ss"):""}e["default"]=Object(n["b"])({setup(t,e){const{data:i,loading:h}=Object(r["c"])(a["getOrderDetail"],{variables:e.route.params.id}),d=Object(n["a"])(()=>{var t;return(null===(t=i.value)||void 0===t?void 0:t.data)||{}}),b=Object(n["a"])(()=>{const t=(null===d||void 0===d?void 0:d.value)?d.value.payInfo:[];return t?t instanceof Array?t:[t]:null}),y=Object(n["a"])(()=>{var t;return"vip"===(null===(t=d.value)||void 0===t?void 0:t.orderType)}),_=Object(n["a"])(()=>{var t;return"success"===(null===(t=d.value)||void 0===t?void 0:t.payStatus)?3:1}),x={functional:!0,render:(t,{props:e})=>{const{target:{price:i,discount:s,label:n}}=e,a=(parseFloat(i)/s).toFixed(2);return t("div",{class:"paid-item-container"},[t("div",{class:"flex item-center "},[t("div",{class:"content",style:{width:"500px",textAlign:"left"}},[n]),t("div",{class:"content"},[t("div",["￥",i]),t("div",{class:"ft-gray"},["￥",a])]),t("div",{class:"content"},["x1"]),t("div",{class:"content"},["¥ ",i])]),t("a-divider")])}};return()=>{var t,i,r,w,C,k,S,A,O,j,M,I,T,E,D,L,P,R,z,N,B,F,$,U,H,V,G,W,Y,q,X,Q,Z,K,J;return Object(n["c"])("a-spin",{attrs:{spinning:h.value}},[Object(n["c"])(l["default"]),Object(n["c"])("div",{class:"order-detail-wrapper pt-34"},[Object(n["c"])("div",{class:"detail-wrapper"},[Object(n["c"])("div",{class:"detail-container"},[Object(n["c"])("a-breadcrumb",{attrs:{separator:">"}},[Object(n["c"])("a-breadcrumb-item",[Object(n["c"])("a",{attrs:{href:"/"}},["首页"])]),Object(n["c"])("a-breadcrumb-item",[Object(n["c"])("a",{attrs:{href:"/orders"}},["我的订单"])])])]),b.value?Object(n["c"])("div",{class:"mt-34 bg-white mb-54"},[Object(n["c"])("div",{class:"p-32"},[Object(n["c"])("div",{class:"detail-container"},[Object(n["c"])("span",{class:"ft-gray"},["订单状态: ",o["orderStatus"][null===(t=d.value)||void 0===t?void 0:t.payStatus]]),d.value&&"close"!==(null===(i=d.value)||void 0===i?void 0:i.payStatus)&&(Object(u["isOrderTypePrint"])(d.value)?Object(n["c"])(f["default"],{props:Object(s["a"])({},Object(u["getStepStatusProps"])(d.value))}):Object(n["c"])("a-steps",{attrs:{current:_.value-1,progressDot:t=>{const e="finish"===t.status;return Object(n["c"])("div",{class:"dot "+(e?"":_.value>t.index?"active":"disabled")},[e?Object(n["c"])("a-icon",{attrs:{type:"check"}}):t.index+1])}}},[Object(n["c"])("a-step",{attrs:{title:"wait"===(null===(r=d.value)||void 0===r?void 0:r.payStatus)?"未付款":"已付款",description:"wait"!==(null===(w=d.value)||void 0===w?void 0:w.payStatus)?v(null===(C=d.value)||void 0===C?void 0:C.successTime):`请在${v((null===(k=d.value)||void 0===k?void 0:k.createTime)+o["TWO_HOURS"])} 前付款`}}),Object(n["c"])("a-step",{attrs:{title:"wait"===(null===(S=d.value)||void 0===S?void 0:S.payStatus)?"未收货":"确认收货",description:"wait"!==(null===(A=d.value)||void 0===A?void 0:A.payStatus)&&v(null===(O=d.value)||void 0===O?void 0:O.successTime)}})]))]),Object(n["c"])("div",{class:"pt-32"},[Object(n["c"])("a-divider")]),Object(n["c"])("div",{class:"order-info flex"},[Object(n["c"])("div",{class:"left"},[Object(n["c"])("div",{class:"sub-title mb-24"},["订单信息"]),Object(n["c"])("div",{class:"content"},[Object(n["c"])("div",{class:"field"},["订单编号:"]),Object(n["c"])("div",{class:"description"},[null===(j=d.value)||void 0===j?void 0:j.orderNo])]),Object(n["c"])("div",{class:"content"},[Object(n["c"])("div",{class:"field"},["下单时间:"]),Object(n["c"])("div",{class:"description"},[v(null===(M=d.value)||void 0===M?void 0:M.createTime)])]),d.value&&Object(u["translatePayType"])(d.value)&&Object(n["c"])("div",{class:"content"},[Object(n["c"])("div",{class:"field"},["支付方式:"]),Object(n["c"])("div",{class:"description"},[Object(u["translatePayType"])(d.value)])])])]),Object(n["c"])("div",{class:"pt-32"},[Object(n["c"])("a-divider")]),d.value&&(Object(u["isOrderTypePrint"])(d.value)?Object(n["c"])(p["default"],{attrs:{data:Object(u["forgePriceDataFromPrintOrder"])(d.value),images:[d.value.screenshot],message:Object(u["getPayInfo"])(d.value).message}}):Object(n["c"])("div",{class:"goods-info-wrap"},[Object(n["c"])("div",{class:"sub-title"},["商品信息"]),Object(n["c"])("div",{class:"good-container-wrap mt-24"},[Object(n["c"])("div",{class:"p-16 flex"},[Object(n["c"])("div",{class:"good-img"},[Object(n["c"])("img",{attrs:{src:1===(null===(I=d.value)||void 0===I?void 0:I.payInfo[0].vipType)?a["NORMAL_VIP"]:2===(null===(T=d.value)||void 0===T?void 0:T.payInfo[0].vipType)?a["PROD_VIP"]:null===(E=d.value)||void 0===E?void 0:E.screenshot,alt:""}})]),Object(n["c"])("div",{class:"good-name ml-24"},[Object(n["c"])("div",{class:"flex item-center"},[Object(n["c"])("span",{class:"title"},[null===(D=d.value)||void 0===D||null===(L=D.project)||void 0===L?void 0:L.projectName])]),Object(n["c"])("div",{class:"ft-gray mt-18"},["copyright"===(null===(P=d.value)||void 0===P?void 0:P.orderType)?`${null===(R=d.value)||void 0===R||null===(z=R.project)||void 0===z?void 0:z.scienceName} / ${null===(N=d.value)||void 0===N||null===(B=N.project)||void 0===B?void 0:B.length}×${null===(F=d.value)||void 0===F||null===($=F.project)||void 0===$?void 0:$.width}×${null===(U=d.value)||void 0===U||null===(H=U.project)||void 0===H?void 0:H.height}mm`:null===(V=((null===(G=d.value)||void 0===G?void 0:G.payInfo)||[])[0])||void 0===V?void 0:V.label])]),"copyright"===(null===(W=d.value)||void 0===W?void 0:W.orderType)&&Object(n["c"])("div",{class:"ml-auto"},["单购作品结算(印刷PDF)"])])]),Object(n["c"])("div",{class:"paid mt-24 flex flex-between"},[Object(n["c"])("span",[y.value?"":"版权","付费点"])]),Object(n["c"])("a-divider"),null===(Y=b.value)||void 0===Y?void 0:Y.map((t,e)=>Object(n["c"])(x,{key:e,attrs:{target:t}})),Object(n["c"])("div",{class:"paid-sum flex float-right text-right"},[Object(n["c"])("div",{class:"content"},[Object(n["c"])("div",[y.value?"原价:":b.value.length+"个版权付费点，总共金额:"]),Object(n["c"])("div",["优惠:"])]),Object(n["c"])("div",{class:"content"},[Object(n["c"])("div",["¥",(parseFloat(null===(q=d.value)||void 0===q?void 0:q.totalFee)+parseFloat(null===(X=d.value)||void 0===X?void 0:X.discount)).toFixed(2)]),Object(n["c"])("div",["-¥",null===(Q=d.value)||void 0===Q?void 0:Q.discount])])]),Object(n["c"])("div",{class:"clearfix"})])),Object(n["c"])("div",{class:"order-bottom py-40 flex item-center px-32",style:"background-color:white; box-shadow:none; padding:0;"},[Object(n["c"])("div"),Object(n["c"])("div",{class:"ml-auto text-right"},[Object(n["c"])("span",["success"===(null===(Z=d.value)||void 0===Z?void 0:Z.payStatus)?"实":"应","付款： ¥ "]),Object(n["c"])("span",{class:"sum"},[null===(K=d.value)||void 0===K?void 0:K.totalFee]),Object(n["c"])("br"),d.value&&Object(u["isOrderTypePrint"])(d.value)&&Object(n["c"])(m["default"],{attrs:{address:Object(u["getAddress"])(d.value)}}),"wait"===(null===(J=d.value)||void 0===J?void 0:J.payStatus)?Object(n["c"])("a-button",{class:"mt-32",attrs:{type:"primary",size:"large"},on:{click:()=>{var t,i;e.router.push({path:"/pay",query:{order_num:null===(t=d.value)||void 0===t?void 0:t.orderNo,total_fee:null===(i=d.value)||void 0===i?void 0:i.totalFee}})}}},["去付款"]):""])])]),d.value&&Object(n["c"])(g["default"],{attrs:{type:Object(u["isOrderTypePrint"])(d.value)?"print":"normal"}})]):""]),")"]),Object(n["c"])(c["default"])])}}})},"866c":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"element-wrap",style:{left:t.data.style.left+"mm",top:t.data.style.top+"mm",width:t.data.style.width+"mm",height:t.data.style.height+"mm",transform:"rotate("+t.data.style.rotate+"deg) scale("+(t.data.style.rotateX?-1:1)+","+(t.data.style.rotateY?-1:1)+")"},on:{contextmenu:function(e){return e.stopPropagation(),e.preventDefault(),t.handleContextMenu(e)}}},[t.cur_tailor_uuid!=t.data.uuid?i("single-control",{attrs:{data:t.data}}):t._e(),t.curDesigns&&1==t.curDesigns.length?i("div",{directives:[{name:"show",rawName:"v-show",value:t.moving,expression:"moving"}],staticClass:"move-tip",style:{transform:"scale("+1/t.scale+") rotate(-"+(t.project_data.rotate+t.data.style.rotate)+"deg",borderRadius:3/t.scale+"px"}},[t._v(" "+t._s(Math.round(t.data.style.left))+" , "+t._s(Math.round(t.data.style.top))+" ")]):t._e(),i(t.elementComponentName,{tag:"component",attrs:{id:"element"+t.data.uuid,data:t.data},on:{mousedown:t.onElementMouseDown,loaded:t.onLoaded,childLoaded:t.onChildLoaded}}),t.isImageAndNotSvg&&t.data._selected?i("tailor-control",{directives:[{name:"show",rawName:"v-show",value:t.cur_tailor_uuid==t.data.uuid,expression:"cur_tailor_uuid == data.uuid"}]}):t._e()],1)},n=[],a=i("5530"),r=i("6206"),o=i("fb6b"),l=i("7f41"),c=i("b308"),h=i("0530"),d=i("68df"),u=i("5880"),p=i("a048"),f=i("13b3"),m=i("60bb"),g=i.n(m),v={components:{elementImage:r["default"],elementFont:o["default"],elementGroup:l["default"],elementQrcode:c["default"],elementBarcode:h["default"],elementTable:d["default"],SingleControl:p["default"],tailorControl:f["default"]},props:{data:{required:!0,type:Object,default:()=>({})},index:{required:!0,type:Number,default:0}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(u["mapState"])("editor-v2",["scale","is_outside","adsorbInstance","project_data","knife_data","localHistory","show_axis_remark","space_key_pressed","canvas_move_button_pressed","cur_tailor_uuid"])),Object(u["mapGetters"])("editor-v2",["curDesigns","design_data","isSingleSelected"])),{},{elementComponentName(){const t={img:"elementImage",font:"elementFont",group:"elementGroup",qrcode:"elementQrcode",barcode:"elementBarcode",table:"elementTable"};return t[this.data.type]},isImageAndNotSvg(){const{type:t,src:e}=this.data;return"img"===t&&!/\.svg$/.test(e)}}),data(){return{moving:!1}},methods:{onElementMouseDown(t){if(this.space_key_pressed||this.canvas_move_button_pressed)return;if(0!==t.button)return;const{uuid:e}=this.data;t.ctrlKey||t.metaKey||t.shiftKey?(this.data._selected=!0,this.curDesigns.forEach(t=>{t.locked&&(t._selected=!1)})):this.$store.commit("editor-v2/singleSelectDesign",e),this.moving=!0,document.body.style.cursor="move",this.adsorbInstance.set({scale:this.scale,isInside:!this.is_outside,rotate:this.project_data.rotate,envDesigns:this.design_data.filter(t=>!t._selected),movingDesigns:this.curDesigns,guideLines:this.project_data.line_guides}),document.onmousemove=this.moveThrottle(t.clientX,t.clientY),document.onmouseup=t=>{this.$store.commit("editor-v2/set_enable_local_history",!0),this.localHistory.record(this.project_data),this.clearHighLines(),this.moving=!1,document.body.style.cursor="default",document.onmousemove=null,document.onmouseup=null},t.stopPropagation()},moveThrottle(t,e){return g.a.throttle(i=>{if(this.data.locked)return;this.$store.commit("editor-v2/set_enable_local_history",!1);const s=this.adsorbInstance.calc(i.clientX-t,i.clientY-e);return this.data.style.left=s.x,this.data.style.top=s.y,s.highlines&&s.highlines.length?this.$store.commit("editor-v2/set_high_lines",s.highlines):this.clearHighLines(),!1},5)},clearHighLines(){this.$store.commit("editor-v2/set_high_lines",[])},onLoaded(){this.data._loaded=!0},onChildLoaded(t){"group"===this.data.type&&(this.data.designs[t]._loaded=!0)},handleContextMenu(t){const{data:e}=this;this.$store.commit("editor-v2/singleSelectDesign",e.uuid);const{clientX:i,clientY:s}=t,n=this.design_data.map(t=>{const e=document.getElementById("element"+t.uuid);if(e){const n=e.getBoundingClientRect(),{x:a,y:r,width:o,height:l}=n;if(i>=a&&i<=a+o&&s>=r&&s<=r+l)return t}}).filter(t=>!!t);this.$bus.$emit("show-design-menu",{event:t,design:e,sameLayerDesigns:n})}}},b=v,y=(i("1da4"),i("2877")),_=Object(y["a"])(b,s,n,!1,null,"675fc9a7",null);e["default"]=_.exports},"86f9":function(t,e,i){},8707:function(t,e,i){
    /*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
    var s=i("1c35"),n=s.Buffer;function a(t,e){for(var i in t)e[i]=t[i]}function r(t,e,i){return n(t,e,i)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=s:(a(s,e),e.Buffer=r),r.prototype=Object.create(n.prototype),a(n,r),r.from=function(t,e,i){if("number"===typeof t)throw new TypeError("Argument must not be a number");return n(t,e,i)},r.alloc=function(t,e,i){if("number"!==typeof t)throw new TypeError("Argument must be a number");var s=n(t);return void 0!==e?"string"===typeof i?s.fill(e,i):s.fill(e):s.fill(0),s},r.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return n(t)},r.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return s.SlowBuffer(t)}},8727:function(t,e){var i="http://www.w3.org/2000/svg";function s(t){return document.createElementNS(i,t)}e.createElement=s},8728:function(t,e){function i(t,e,i,s,n,a){if(a>e&&a>s||a<e&&a<s)return 0;if(s===e)return 0;var r=s<e?1:-1,o=(a-e)/(s-e);1!==o&&0!==o||(r=s<e?.5:-.5);var l=o*(i-t)+t;return l===n?1/0:l>n?r:0}t.exports=i},8767:function(t,e,i){},"87b1":function(t,e,i){var s=i("cbe5"),n=i("4fac"),a=s.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){n.buildPath(t,e,!0)}});t.exports=a},"87dd":function(t,e,i){t.exports=i.p+"editor-assets/img/del-w.589f1d59.svg"},8861:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("124f"),n=r(s),a=i("6e53");function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=function(t){function e(t,i){return o(this,e),t+=(0,a.mod10)(t),t+=(0,a.mod10)(t),l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return c(e,t),e}(n.default);e.default=h},"888b":function(t,e,i){t.exports=i.p+"editor-assets/img/unpin.9a74baea.svg"},"88d7":function(t,e,i){},"88f0":function(t,e,i){"use strict";var s=i("4a31"),n=i.n(s);n.a},8923:function(t,e,i){},8975:function(t,e,i){"use strict";var s=i("58c5"),n=i.n(s);n.a},"897a":function(t,e,i){var s=i("22d1"),n=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];function a(t){return s.browser.ie&&s.browser.version>=11?function(){var e,i=this.__clipPaths,s=this.style;if(i)for(var a=0;a<i.length;a++){var r=i[a],o=r&&r.shape,l=r&&r.type;if(o&&("sector"===l&&o.startAngle===o.endAngle||"rect"===l&&(!o.width||!o.height))){for(var c=0;c<n.length;c++)n[c][2]=s[n[c][0]],s[n[c][0]]=n[c][1];e=!0;break}}if(t.apply(this,arguments),e)for(c=0;c<n.length;c++)s[n[c][0]]=n[c][2]}:t}t.exports=a},"899b":function(t,e,i){"use strict";i.d(e,"a",(function(){return S}));var s=i("8bbf"),n=i.n(s),a="2.2.2",r=/^2\./.test(n.a.version);r||n.a.util.warn("VueClickaway "+a+" only supports Vue 2.x, and does not support Vue "+n.a.version);var o="_vue_clickaway_handler";function l(t,e,i){c(t);var s=i.context,n=e.value;if("function"===typeof n){var a=!1;setTimeout((function(){a=!0}),0),t[o]=function(e){var i=e.path||(e.composedPath?e.composedPath():void 0);if(a&&(i?i.indexOf(t)<0:!t.contains(e.target)))return n.call(s,e)},document.documentElement.addEventListener("click",t[o],!1)}}function c(t){document.documentElement.removeEventListener("click",t[o],!1),delete t[o]}var h={bind:l,update:function(t,e){e.value!==e.oldValue&&l(t,e)},unbind:c};Array.from||(Array.from=t=>[].slice.call(t)),Array.isArray||(Array.isArray=t=>"[object Array]"===Object.prototype.toString.call(t));const d=Array.from,u=Array.isArray,p={ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40},f=(t,e)=>!(!t||"function"!==typeof t.contains)&&t.contains(e),m=(t,e,i)=>{t&&t.addEventListener&&t.addEventListener(e,i)},g=(t,e,i)=>{t&&t.removeEventListener&&t.removeEventListener(e,i)},v=t=>(t||[]).filter(_),b=t=>y(t)?t.getBoundingClientRect():null,y=t=>Boolean(t&&t.nodeType===Node.ELEMENT_NODE),_=t=>{if(!y(t)||!f(document.body,t))return!1;if("none"===t.style.display)return!1;const e=b(t);return Boolean(e&&e.height>0&&e.width>0)},x=(t,e)=>d((y(e)?e:document).querySelectorAll(t)),w=(t,e,i)=>{e&&y(t)&&t.setAttribute(e,i)},C=(t,e)=>{let i=t.parentElement;while(null!==i&&!i.classList.contains(e))i=i.parentElement;return i},k=(t,e={},i={},s={})=>{const n=i[t]||s[t];return"function"===typeof n?n(e):n};var S={directives:{onClickaway:h},props:{closeOnClick:{type:Boolean,default:!0},closeOnScroll:{type:Boolean,default:!0},lazy:{type:Boolean,default:!1},itemSelector:{type:[String,Array],default:()=>[".v-context-item",".v-context > li > a"]},role:{type:String,default:"menu"},subMenuOffset:{type:Number,default:10},useScrollHeight:{type:Boolean,default:!1},useScrollWidth:{type:Boolean,default:!1},heightOffset:{type:Number,default:25},widthOffset:{type:Number,default:25},tag:{type:String,default:"ul"}},computed:{style(){return this.show?{top:this.top+"px",left:this.left+"px"}:null}},data(){return{top:null,left:null,show:!1,data:null,localItemSelector:"",activeSubMenu:null}},created(){this.localItemSelector=this.mapItemSelector(this.itemSelector)},beforeDestroy(){this.closeOnScroll&&this.removeScrollEventListener()},methods:{addScrollEventListener(){m(window,"scroll",this.close)},addHoverEventListener(t){t.querySelectorAll(".v-context__sub").forEach(t=>{m(t,"mouseenter",this.openSubMenu),m(t,"mouseleave",this.closeSubMenu)})},close(){if(this.show){while(null!==this.activeSubMenu)C(this.activeSubMenu,"v-context__sub").dispatchEvent(new Event("mouseleave"));this.resetData(),this.removeHoverEventListener(this.$el),this.closeOnScroll&&this.removeScrollEventListener(),this.$emit("close")}},focusItem(t,e){const i=e.find((e,i)=>i===t);i&&i.focus()},focusNext(t,e){this.show&&(t.preventDefault(),t.stopPropagation(),this.$nextTick(()=>{const i=this.getItems();if(i.length<1)return;let s=i.indexOf(t.target);e&&s>0?s--:!e&&s<i.length-1&&s++,s<0&&(s=0),this.focusItem(s,i)}))},getItems(){return v(x(this.localItemSelector,this.activeSubMenu||this.$el))},mapItemSelector(t){return u(t)&&(t=t.map(t=>t+":not(.disabled):not([disabled])").join(", ")),t},onClick(){this.close()},onKeydown(t){const e=t.keyCode;if(e===p.ESC)this.close();else if(e===p.DOWN)this.focusNext(t,!1);else if(e===p.UP)this.focusNext(t,!0);else if(e===p.RIGHT){const e=C(t.target,"v-context__sub");e&&e.getElementsByClassName("v-context")[0]!==this.activeSubMenu&&(e.dispatchEvent(new Event("mouseenter")),this.focusNext(t,!1))}else if(e===p.LEFT){if(!this.activeSubMenu)return;const t=C(this.activeSubMenu,"v-context__sub");t.dispatchEvent(new Event("mouseleave"));const e=this.getItems(),i=e.indexOf(t.getElementsByTagName("a")[0]);this.focusItem(i,e)}},open(t,e){this.data=e,this.show=!0,this.$nextTick(()=>{[this.top,this.left]=this.positionMenu(t.clientY,t.clientX,this.$el),this.$el.focus(),this.setItemRoles(),this.addHoverEventListener(this.$el),this.closeOnScroll&&this.addScrollEventListener(),this.$emit("open",t,this.data,this.top,this.left)})},openSubMenu(t){const e=this.getSubMenuElementByEvent(t),i=C(e.parentElement,"v-context"),s=b(t.target);if(this.activeSubMenu!==i)while(null!==this.activeSubMenu&&this.activeSubMenu!==i&&this.activeSubMenu!==e)C(this.activeSubMenu,"v-context__sub").dispatchEvent(new Event("mouseleave"));e.style.display="block";let[n,a]=this.positionMenu(s.top,s.right-this.subMenuOffset,e);e.style.left=a+"px",e.style.top=n+"px",this.activeSubMenu=e},closeSubMenu(t){const e=this.getSubMenuElementByEvent(t),i=C(e,"v-context");if(this.activeSubMenu!==e)while(null!==this.activeSubMenu&&this.activeSubMenu!==e)C(this.activeSubMenu,"v-context__sub").dispatchEvent(new Event("mouseleave"));e.style.display="none",this.activeSubMenu=i&&C(i,"v-context__sub")?i:null},getSubMenuElementByEvent(t){return t.target.getElementsByTagName("ul")[0]},positionMenu(t,e,i){const s=this.useScrollHeight?i.scrollHeight:i.offsetHeight,n=window.innerHeight-s-this.heightOffset,a=this.useScrollWidth?i.scrollWidth:i.offsetWidth,r=window.innerWidth-a-this.widthOffset;return t>n&&(t=n),e>r&&(e=r),[t,e]},removeScrollEventListener(){g(window,"scroll",this.close)},removeHoverEventListener(t){t.querySelectorAll(".v-context__sub").forEach(t=>{g(t,"mouseenter",this.openSubMenu),g(t,"mouseleave",this.closeSubMenu)})},resetData(){this.top=null,this.left=null,this.data=null,this.show=!1},setItemRoles(){x(this.localItemSelector,this.$el).forEach(t=>{w(t,"role","menuitem"),w(t,"tabindex","-1")})}},watch:{closeOnScroll(t,e){t!==e&&(t&&this.show?this.addScrollEventListener():this.removeScrollEventListener())},itemSelector(t,e){t!==e&&(this.localItemSelector=this.mapItemSelector(t))}},render(t){if(this.lazy&&!this.show)return t(!1);const e={"!contextmenu":t=>{t.preventDefault()},keydown:this.onKeydown};this.closeOnClick&&(e.click=this.onClick);const i=[{name:"on-clickaway",value:this.close,rawName:"v-on-clickaway"}];return this.lazy||i.push({name:"show",value:this.show,rawName:"v-show",expression:"show"}),t(this.tag,{staticClass:"v-context",style:this.style,attrs:{tabindex:"-1",role:this.role,"aria-hidden":this.lazy?null:String(!this.show)},on:e,directives:i},[k("default",{data:this.data},this.$scopedSlots,this.$slots)])}}},"89a2":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function t(e,i,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},a=i("c243"),r=i("bdfe"),o=l(r);function l(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function d(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(t){var e=t.substr(0,12).split("").map((function(t){return+t})).reduce((function(t,e,i){return i%2?t+3*e:t+e}),0);return(10-e%10)%10},p=function(t){function e(t,i){c(this,e),-1!==t.search(/^[0-9]{12}$/)&&(t+=u(t));var s=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return s.lastChar=i.lastChar,s}return d(e,t),s(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{13}$/)&&+this.data[12]===u(this.data)}},{key:"leftText",value:function(){return n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var t=this.data.substr(1,6),i=a.EAN13_STRUCTURE[this.data[0]];return n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,t,i)}},{key:"rightText",value:function(){return n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var t=this.data.substr(7,6);return n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,t,"RRRRRR")}},{key:"encodeGuarded",value:function(){var t=n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(t.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(t.push({data:"00"}),t.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),t}}]),e}(o.default);e.default=p},"89e0":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.$root.knifeData.folds?s("svg",{staticClass:"editor-background",style:{width:t.$root.knifeData.totalX+100+"mm",height:t.$root.knifeData.totalY+100+"mm",transform:"scale("+(t.isInside?-1:1)+",1)",position:"absolute"},attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[s("defs",[s("pattern",{attrs:{id:"svginnerPatternNullBg",patternUnits:"userSpaceOnUse",height:15/t.scale,width:15/t.scale}},[s("image",{attrs:{x:"0",y:"0",height:15/t.scale,width:15/t.scale,"xlink:href":i("5a38")}})]),s("pattern",{attrs:{id:"svginnerPattern",patternUnits:"userSpaceOnUse",height:200/t.DPI,width:200/t.DPI}},[t.backgroundImage?s("image",{attrs:{x:"0",y:"0",height:200/t.DPI,width:200/t.DPI,"xlink:href":t.backgroundImage}}):t._e()]),s("pattern",{attrs:{id:"svginnerPattern2",patternUnits:"userSpaceOnUse",height:"128",width:"128"}},[s("image",{attrs:{x:"0",y:"0",width:128,height:128,"xlink:href":t.$root.projectData.science_image,preserveAspectRatio:"none"}})])]),s("g",[s("line",t._b({attrs:{x1:50-4/t.scale-t.bleedDelta+"mm",x2:50-t.bleedDelta+"mm","stroke-width":.5/t.scale,stroke:"#aaaaaa"}},"line",t.topHorizontalY,!1)),s("line",t._b({attrs:{x1:50-t.bleedDelta+"mm",x2:50-t.bleedDelta+"mm","stroke-width":.5/t.scale,stroke:"#aaaaaa"}},"line",t.topVerticalY,!1)),s("line",t._b({attrs:{x1:t.offsetX(t.$root.knifeData.totalX+50+4/t.scale,t.bleedDelta),x2:t.offsetX(t.$root.knifeData.totalX+50,t.bleedDelta),"stroke-width":.5/t.scale,stroke:"#aaaaaa"}},"line",t.topHorizontalY,!1)),s("line",t._b({attrs:{x1:t.offsetX(t.$root.knifeData.totalX+50,t.bleedDelta),x2:t.offsetX(t.$root.knifeData.totalX+50,t.bleedDelta),"stroke-width":.5/t.scale,stroke:"#aaaaaa"}},"line",t.topVerticalY,!1)),s("line",t._b({attrs:{x1:50-4/t.scale-t.bleedDelta+"mm",x2:50-t.bleedDelta+"mm","stroke-width":.5/t.scale,stroke:"#aaaaaa"}},"line",t.bottomHorizontalY,!1)),s("line",t._b({attrs:{x1:50-t.bleedDelta+"mm",x2:50-t.bleedDelta+"mm","stroke-width":.5/t.scale,stroke:"#aaaaaa"}},"line",t.bottomVerticalY,!1)),s("line",t._b({attrs:{x1:t.offsetX(t.$root.knifeData.totalX+50+4/t.scale,t.bleedDelta),x2:t.offsetX(t.$root.knifeData.totalX+50,t.bleedDelta),"stroke-width":.5/t.scale,stroke:"#aaaaaa"}},"line",t.bottomHorizontalY,!1)),s("line",t._b({attrs:{x1:t.offsetX(t.$root.knifeData.totalX+50,t.bleedDelta),x2:t.offsetX(t.$root.knifeData.totalX+50,t.bleedDelta),"stroke-width":.5/t.scale,stroke:"#aaaaaa"}},"line",t.bottomVerticalY,!1))]),s("svg",{attrs:{x:"40mm",y:"40mm",width:"1mm",height:"1mm",overflow:"visible",viewBox:"0 0 1 1"}},[t.bleed?s("g",[s("path",{staticClass:"svg-cutting",style:{fill:-1===t.active?t.fillBack:"#e1e1e1"},attrs:{transform:"translate("+(10-parseInt(t.$root.projectData.bleedline))+","+(10-parseInt(t.$root.projectData.bleedline))+")","stroke-width":.25/t.scale,stroke:t.fillBack===t.defColor?"#e1e1e1":t.defColor,d:t.$root.knifeData.bleedsForSvg}})]):t._e(),s("g",{attrs:{id:"svgContainerMode"}},t._l(t.$root.knifeData.facesForSvg,(function(e,i){return s("path",{key:"path"+i,class:"svg-face svg-face--active "+(t.active==i&&"svg-face--active"),attrs:{transform:t.globalTransform,"stroke-width":.25/t.scale,fill:t.colorForFace(e.name,i),d:e.d,id:"knifeFace_"+e.name},on:{dblclick:function(i){return t.dbClick(e)},click:function(e){return t.$emit("face-click",e)}}})})),0),-1!=t.active?s("g",t._l(t.$root.knifeData.facesForSvg,(function(e,i){return s("g",{key:"path"+i},[t.active!=i?s("path",{staticClass:"svg-face-mask",style:{fill:"#e1e1e1"},attrs:{transform:t.globalTransform,"stroke-width":.25/t.scale,d:e.d,id:e.name}}):t._e()])})),0):t._e()])]):t._e()},n=[],a=(i("5319"),i("5530")),r=i("5880"),o=i("da71"),l={props:{scale:{type:Number,default:1},bleed:{type:Boolean,default:!0},defColor:{type:String,default:""},fillBack:{type:String,default:""},active:{type:Number,default:-1}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])(["isInside"])),Object(r["mapState"])("editor",["showAxiasRemark"])),{},{backgroundImage(){let t=this.isInside?this.$root.projectData.inside_background:this.$root.projectData.background;return(t||"").replace(/url\(|\)/g,"")},DPI(){return o["DPI"]},globalTransform(){return"translate(10,10)"},fillTable(){return this.isInside?this.$root.projectData.insideFaceBackground:this.$root.projectData.faceBackground},bleedDelta(){return Number(this.$root.projectData.bleedline)},topHorizontalY(){return{y1:this.offsetY(50,-1*this.bleedDelta),y2:this.offsetY(50,-1*this.bleedDelta)}},topVerticalY(){return{y1:this.offsetY(50-4/this.scale,-1*this.bleedDelta),y2:this.offsetY(50,-1*this.bleedDelta)}},bottomVerticalY(){return{y1:this.offsetY(this.$root.knifeData.totalY+50),y2:this.offsetY(this.$root.knifeData.totalY+50+4/this.scale)}},bottomHorizontalY(){return{y1:this.offsetY(this.$root.knifeData.totalY+50),y2:this.offsetY(this.$root.knifeData.totalY+50)}}}),methods:{offsetY(t,e){return"undefined"===typeof e&&(e=this.bleedDelta),t+e+"mm"},offsetX(t,e){return"undefined"===typeof e&&(e=this.bleedDelta),t+e+"mm"},dbClick(t){this.$store.commit("editor/toggleCurrentFace",t.name)},colorForFace(t,e){return this.showAxiasRemark?this.fillBack:this.fillTable[t]&&this.fillTable[t].rgba?this.fillTable[t]&&this.fillTable[t].rgba:"url(#svginnerPattern)"==this.fillBack?this.active==e?this.fillBack:"transparent":this.fillBack}}},c=l,h=(i("8aae"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,null,null);e["default"]=d.exports},"89f0":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg-icon",[i("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.752 8.526C16.409 5.623 13.965 3.372 11 3.372S5.59 5.623 5.249 8.525c-2.394.551-4.18 2.715-4.18 5.3 0 3.002 2.409 5.436 5.38 5.436h9.102l.193-.003c2.882-.103 5.186-2.496 5.186-5.433 0-2.585-1.786-4.749-4.178-5.299zm-9.67.148a3.973 3.973 0 017.862.18l.132 1.112 1.093.249.165.042a3.577 3.577 0 01-.836 7.016l-.157.002h-8.71l-.17-.004a3.575 3.575 0 01-.63-7.057l1.093-.249.132-1.112.026-.18z",fill:"#636C78"}}),i("circle",{attrs:{cx:"7.5",cy:"13.25",r:"1.25",fill:"#636C78"}},[i("animate",{attrs:{attributeName:"r",values:"1.25;0;1.25",dur:"1s",repeatCount:"indefinite",begin:"0"}})]),i("circle",{attrs:{cx:"11",cy:"13.25",r:"1.25",fill:"#636C78"}},[i("animate",{attrs:{attributeName:"r",values:"1.25;0;1.25",dur:"1s",repeatCount:"indefinite",begin:"0.2s"}})]),i("circle",{attrs:{cx:"14.5",cy:"13.25",r:"1.25",fill:"#636C78"}},[i("animate",{attrs:{attributeName:"r",values:"1.25;0;1.25",dur:"1s",repeatCount:"indefinite",begin:"0.4s"}})])])},n=[],a=i("54f4"),r={name:"IconSaving",components:{SvgIcon:a["a"]}},o=r,l=i("2877"),c=Object(l["a"])(o,s,n,!1,null,null,null);e["a"]=c.exports},"8a49":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-button",{staticClass:"mb-16",attrs:{block:"",size:"small"},on:{click:t.goBack}},[t._v(" 返回全部面 ")]),i("select-background-color",{attrs:{color:t.background},on:{confirm:t.onSetCurFaceBackground}})],1)},n=[],a=i("5530"),r=i("5880"),o=i("accc"),l={components:{selectBackgroundColor:o["default"]},data(){return{}},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["project_data","cur_face_name","is_outside"])),{},{background(){return this.is_outside?this.project_data.background:this.project_data.inside_background}}),methods:{goBack(){this.$store.commit("editor-v2/set_cur_face_name","")},onSetCurFaceBackground(t){this.$store.commit("editor-v2/set_cur_face_background",{rgba:t,cmyk:""})}}},c=l,h=i("2877"),d=Object(h["a"])(c,s,n,!1,null,null,null);e["default"]=d.exports},"8a58":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showBlankTip?i("div",{staticClass:"blank-canvas-tip-wrap",style:{transform:"translate(-50%, -50%) scale("+1/t.scale+") rotate("+-t.project_data.rotate+"deg)"}},[t._m(0),i("p",{staticClass:"title"},[t._v("可拖入文字或图片开始设计")]),i("p",{staticClass:"subtitle"},[t._v("按住空格键可拖动画布")])]):t._e()},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"icon"},[i("i",{staticClass:"iconfont icon-tupiantianjia mr-4"})])}],a=i("5530"),r=i("5880"),o={computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["project_data","knife_data","scale"])),Object(r["mapGetters"])("editor-v2",["background","design_data"])),{},{showBlankTip(){const{background:t,design_data:e}=this;return!t&&((!e||!e.length)&&!(this.scale<.2))}})},l=o,c=(i("4d36"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,"3acf59d8",null);e["default"]=h.exports},"8a65":function(t,e,i){},"8a71":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-modal",{attrs:{title:"VIP用户支持跨画布粘贴",visible:t.visible,width:480,footer:null},on:{cancel:t.handleCancel}},[s("div",{staticClass:"main-box"},[t._v(" VIP会员用户可享受跨画布复制粘贴权益，轻松快捷做设计～ "),s("img",{staticClass:"upgrade-animation",staticStyle:{width:"100%"},attrs:{src:i("5d22"),alt:""}}),s("div",{staticClass:"upgrade-footer"},[s("a-button",{staticClass:"upgrade-button",attrs:{type:"primary"},on:{click:t.handleOk}},[t._v(" 升级成会员 ")])],1)])])},n=[],a=i("9393"),r={mixins:[a["a"]],data(){return{visible:!1}},methods:{handleCancel(){this.visible=!1},handleOk(){this.visible=!1,this.showPersonalVip()}},mounted(){this.$bus.$on("show-vip-paste-modal",t=>{this.visible=!0})},destroyed(){this.$bus.$off("show-vip-paste-modal")}},o=r,l=(i("b3cb"),i("2877")),c=Object(l["a"])(o,s,n,!1,null,"753fcb7b",null);e["default"]=c.exports},"8a83":function(t,e,i){t.exports=i.p+"editor-assets/img/qrcode-right.7ca590ee.svg"},"8a94":function(t,e,i){"use strict";var s=i("6984"),n=i.n(s);n.a},"8aae":function(t,e,i){"use strict";var s=i("b13d"),n=i.n(s);n.a},"8ac0":function(t,e,i){"use strict";var s=i("fd50"),n=i.n(s);n.a},"8aeb":function(t,e,i){t.exports=i.p+"editor-assets/img/e3.e1547ff6.svg"},"8b5c":function(t,e,i){},"8b9e":function(t,e,i){"use strict";var s=i("dfee"),n=i.n(s);n.a},"8ba7":function(t,e,i){},"8be1":function(t,e,i){},"8be9":function(t,e,i){},"8bef":function(t,e,i){t.exports=i.p+"editor-assets/img/p2.2333f64d.svg"},"8c66":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showMyself?i("div",{staticClass:"devtool-wrap",class:[{wide:t.showDevCanvas,fold:!t.showDevCanvas}]},[i("a-button",{staticClass:"btn",attrs:{type:"primary",size:"small"},on:{click:t.onSwitch}},[t._v(" 本地调试:"+t._s(t.showDevCanvas?"收起":"展开")+"canvas ")])],1):t._e()},n=[],a={data(){return{showMyself:!1,showDevCanvas:!1}},mounted(){const t=localStorage.getItem("showDevCanvas");this.showDevCanvas=!("1"!=t),setTimeout(()=>{this.setCanvasVisible(this.showDevCanvas)},2e3)},methods:{onSwitch(){this.showDevCanvas=!this.showDevCanvas},setCanvasVisible(t){let e=document.querySelectorAll(".J_dev_canvas");for(let i=0;i<e.length;i++)e[i].style.display=t?"block":"none"}},watch:{showDevCanvas(t){localStorage.setItem("showDevCanvas",t?"1":"0"),this.setCanvasVisible(t)}}},r=a,o=(i("6168"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"5eaeccd4",null);e["default"]=l.exports},"8cbd":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAFSUlEQVRYR62XfYhUZRTGf8+dxlz33jECtezLyij7o8giMrOSIjctKMhKsJyZXQqLPqi/ykopKynMvj+23NnVIMmwDw0pw8yKKKi2QorMVoU+jdS546q7O/fEe3f2o91mZ9TOX8Pc55zzvOeec97niirNZpIg5U8m4hJgEnAUaBTQDuxA/IjxIcWu97Vs7y9VhkWVgDaTGoJUA2Z3AeMq4YEu0CqirsfU0v5lJfyQBCwbTMJoAU4pBepCfE5k60Fb45N7VgOMwXQOcCkwtoQtAk9TCOdpJXvLESlLwLL+rZieAhJAAfECFJ9UU/uv5YIZiGxwJcY9wHndOGslYXV6Zc8f/+X3nwQsG9yN8TguIHxG5N2glt1b4nCzRxxN0psMOglxJJHtRfyJ531JIv+1GumMiaRrb0d6FOQqtJlk8SI1tv82kMQgApZOTQdbg+Lkq0iG1zOWIttTs8DmYpxfIjb4QMZOZMuxw5aoeddWSwdTEO8CAfAJbeFUbXA90mf/ImCzascw3PsOGAW2jrbCdI6vPR1PTUhnV2qovufm3vkiCoWHGelPIdI6jMMwPaTm/APlCWT9JZjujJvLojPwNBmTa8La6pP3Q5q9j1e4Bvy7Mc0HaycZje//KnorYA21Y+hSG1INnt1GFHf5KiB5UMn7nNbTkbyaYR2bQMcCS5QL3UjH1kcg488FPd99ei6Mxw1Sh5i8J42bpm1gTwC/kguPFdgAAsFq4Aog173luPz/SR5HiZBdi2ll96HtPpKJFWrcvUWWrj0Kz3sJY0Zp5h2BdNlOr8TKosuQ9zJwwgDoaoxzEEeX9sN+pFmybLAWo65S3Cqf7yIZjqYruBzj7Sp8fpBl/H2gw6sAVwO5V7nw0XhhZYINwEVDOon9skwQN8OhmXWAFpML5/U0l9WnZhDZmgpxOw6cgGF4bMVojfe81EqU2KjmXbv6J7MFeGzzt4KOG4JE1QQ+wvQmilpJJlvVuHN3NRWzrP8cplsOkYAeVC4/v5qEAzGWCRoANxHlrEOW9t04DCuD2EZbOH7gBVItGcsEbq+4/VLOdsiyqQ8wczJrsIl31RS6IAdllvWnYlpfco6ANuDkvmBaKEsPH4eSzcAFsa6TniWyZ0uL6Cflwh41dMAkStfxxpLjOySpp4NFiHqkh2jKz++7C2aS0EqcjHIz7O7w6e4nkXdKjxg5UAZW788k0uu4yTGmqCX81NL+fKT78TRaS/N/l1NEpxLxBSKFWKSm0EmsIc1uIkmHfy97Cgt7D5INFmPcBXpaufwdsbL2g+/dhaRceLELWF4T1gdXEvEWsIfO4ql6tVtOWbb2TEjMg2g9xl+gI5CdgXEVeI3K5RfGuJsYQWfgZNzPWHiJmtlnGf9m0IugOuXy7w1JIA4Sl5Bm0Drlwqt6SmCZ1DTMXkCcWPrPidaH1RQu6sWk/SVIZ1ETXqHnKViDP4GiPsP0uZrz03pwlb8L5ow8G6+41IkT5QoP9iZw1cv4E/A8nxH5b/QM+/sI+k47jmZY4ZFYpM4ZeTJe9B5mwykyUcsLf1ZNIK6EW6vbU7OxaK1yhR0V+6GhdkyPDLf6VB2RLQPbT0SdWgqb+vtXrEC5ZHZjzTF4yTOh+JWa9/w+EGeZERMh4Zr3mljad3Ver+X7tg/EHRQBm5OagRe9ARoeN2nENGpsM52cRsTFmGYgzgV+x/QI4/LPaQFuEQ2ygyMw+K53wb04urkPFW1AvM5v4Wta29cb/yOB1Aqw63oDxvLbW4bYTDH/rRu5Sn1yQE046P26959I5sBcmT/G0xy31apN2h/3Dw5ZEIjIpiRDAAAAAElFTkSuQmCC"},"8cdb":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"notfound"},[i("Header"),i("div",{staticClass:"flex item-center flex-center notfound-container"},[i("img",{attrs:{src:"//cdn.baoxiaohe.com/51145fd6-0d81-4f55-8980-7ee9368fd46b.png",alt:""}}),i("div",{staticClass:"message-info ml-80"},[i("div",{staticClass:"title"},[t._v("啊哦！好像迷路了~")]),i("div",{staticClass:"descript mt-40"},[t._v(" 网页无法打开，网址有错误或已失效，建议你返回首页或联系客服哦~(错误代码：404) ")]),i("a-button",{staticClass:"mt-80",on:{click:t.backHome}},[t._v("返回首页")])],1)])],1)},n=[],a=i("ca9b"),r={components:{Header:a["default"]},methods:{backHome(){this.$router.push("/")}}},o=r,l=(i("ed81"),i("2877")),c=Object(l["a"])(o,s,n,!1,null,"09ee920e",null);e["default"]=c.exports},"8d18":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"fo-14 bold title"},[t._v("操作")]),s("div",{staticClass:"flex flex-start item-center px-12"},[s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",{staticClass:"fo-12"},[t._v("复制")])]),s("div",{staticClass:"opt-btn ml-4",on:{click:t.copyClick}},[s("img",{attrs:{src:i("f522")}})])],2),s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",{staticClass:"fo-12"},[t._v("删除")])]),s("div",{staticClass:"opt-btn ml-4 ",on:{click:function(e){return t.delClick()}}},[s("img",{attrs:{src:i("6925")}})])],2)],1),s("div",{staticClass:"mt-24 flex flex-between item-center light-color px-16"},[s("div",{staticClass:"fo-14 pfow"},[t._v("灯光颜色")]),s("Pallet",{attrs:{value:t.lightColor,title:"灯光颜色",historyColors:[],showPrint:!1,showTakeColor:!1,showOpacity:!1,placement:"topRight"},on:{confirm:t.colorConfirmLight}})],1),s("div",{staticClass:"px-16"},[s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"fo-12 pfow "},[t._v("旋转")]),s("div",{staticClass:"light-render-input"},[s("input",{staticClass:"light-render-input",domProps:{value:t.lightPositionValue+t.lightPositionUnit},on:{focus:function(e){t.lightPositionUnit="",e.target.select()},blur:t.lightPositionInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.lightPositionInput(e)}}})])]),s("a-slider",{staticStyle:{"margin-top":"5px"},attrs:{max:360,min:0,step:1,"tip-formatter":function(t){return t+"°"}},on:{change:t.lightPositionChange,afterChange:function(e){return t.$emit("attch-history")}},model:{value:t.lightPositionValue,callback:function(e){t.lightPositionValue=e},expression:"lightPositionValue"}})],1),s("div",{staticClass:"px-16"},[s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"fo-12 pfow "},[t._v("亮度")]),s("div",{staticClass:"light-render-input"},[s("input",{staticClass:"light-render-input",domProps:{value:t.lightPowerValue+t.lightPowerUnit},on:{focus:function(e){t.lightPowerUnit="",e.target.select()},blur:t.lightPowerInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.lightPowerInput(e)}}})])]),s("a-slider",{staticStyle:{"margin-top":"5px"},attrs:{max:1e3,min:0,step:1,"tip-formatter":function(t){return t+"%"}},on:{change:t.lightPowerChange,afterChange:function(e){return t.$emit("attch-history")}},model:{value:t.lightPowerValue,callback:function(e){t.lightPowerValue=e},expression:"lightPowerValue"}})],1),s("div",{staticClass:"px-12"},[s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"fo-12 pfow "},[t._v("高度")]),s("div",{staticClass:"light-render-input"},[s("input",{staticClass:"light-render-input",domProps:{value:t.lightHeightValue+t.lightHeightUnit},on:{focus:function(e){t.lightHeightUnit="",e.target.select()},blur:t.lightHeightInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.lightHeightInput(e)}}})])]),s("a-slider",{staticStyle:{"margin-top":"5px"},attrs:{max:5,min:0,step:.01,"tip-formatter":function(t){return t+"m"}},on:{change:t.lightHeightChange,afterChange:function(e){return t.$emit("attch-history")}},model:{value:t.lightHeightValue,callback:function(e){t.lightHeightValue=e},expression:"lightHeightValue"}})],1)])},n=[],a=i("6116"),r=i("7018"),o={components:{Pallet:r["a"]},data(){return{lightColor:"rgba(255,255,255,1)",lightPositionValue:45,lightPowerValue:100,lightHeightValue:2.5,lightPositionUnit:"°",lightPowerUnit:"%",lightHeightUnit:"m"}},mounted(){this.getCurrentLight()},beforeDestroy(){this.$bus.$off("getCurrentLight")},methods:{copyClick(){this.$bus.$emit("doLightCopy")},delClick(){this.$bus.$emit("doLightDel")},getCurrentLight(){this.$bus.$on("getCurrentLight",t=>{this.lightHeightValue=t.position.y,this.intensity=100*t.light.intensity;const e=Math.atan2(t.position.z,t.position.x);let i=e/(2*Math.PI)*360;i+=180,i<0&&(i+=360),i>=360&&(i-=360),this.lightPositionValue=parseInt(i),this.lightColor=t.light.color})},colorConfirmLight(t){this.lightColor=t.rgba,this.$bus.$emit("lightCurrentColorChange",t.rgba)},lightPositionInput(t){"blur"===t.type&&(this.lightPositionUnit="°");let e=0;t.target.value&&(e=parseInt(Object(a["c"])(t.target.value))),e>360&&(e=360),e<0&&(e=0),this.lightPositionValue!=e&&(this.lightPositionValue=e),this.lightPositionChange(e)},lightPositionChange(t){const e=5*Math.cos((t+90)*Math.PI/180),i=5*-Math.sin((t+90)*Math.PI/180);this.$bus.$emit("lightCurrentPositionChange",{x:i,z:e})},lightPowerInput(t){"blur"===t.type&&(this.lightPowerUnit="%");let e=0;t.target.value&&(e=parseFloat(Object(a["c"])(t.target.value))),e>100&&(e=100),e<0&&(e=0),this.lightPowerValue!=e&&(this.lightPowerValue=e),this.lightPowerChange(e)},lightPowerChange(t){this.$bus.$emit("lightCurrentPowerChange",t/100)},lightHeightInput(t){"blur"===t.type&&(this.lightHeightUnit="m");let e=0;t.target.value&&(e=parseFloat(Object(a["c"])(t.target.value))),e>5&&(e=5),e<0&&(e=0),this.lightHeightValue!=e&&(this.lightHeightValue=e),this.lightHeightChange(e)},lightHeightChange(t){this.$bus.$emit("lightCurrentHeightChange",t)}}},l=o,c=i("2877"),h=Object(c["a"])(l,s,n,!1,null,null,null);e["default"]=h.exports},"8d32":function(t,e,i){var s=i("cbe5"),n=s.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i=e.cx,s=e.cy,n=Math.max(e.r,0),a=e.startAngle,r=e.endAngle,o=e.clockwise,l=Math.cos(a),c=Math.sin(a);t.moveTo(l*n+i,c*n+s),t.arc(i,s,n,a,r,!o)}});t.exports=n},"8d87":function(t,e,i){"use strict";i.r(e);var s=i("750b");i("9e78");e["default"]=Object(s["b"])({props:{active:{type:Boolean,default:!1},type:{type:String,default:""}},setup(t,e){const i=Object(s["a"])(()=>{let e="noselect template-btn";return"text"!==t.type&&t.type,"box-bg"===t.type&&(e+=" nomal-background"),t.active&&(e+=" tempalte-btn-active",e+="text"===t.type?"":" template-bg-active"),e});return()=>Object(s["c"])("div",{class:""+i.value,on:{click:()=>e.emit("click")}},[Object(s["c"])("div",{class:"flex item-center flex-center"},[Object.keys(e.slots).map(t=>e.slots[t]())])])}})},"8e51":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MSI1110=e.MSI1010=e.MSI11=e.MSI10=e.MSI=void 0;var s=i("124f"),n=p(s),a=i("4727"),r=p(a),o=i("4461"),l=p(o),c=i("8861"),h=p(c),d=i("805f"),u=p(d);function p(t){return t&&t.__esModule?t:{default:t}}e.MSI=n.default,e.MSI10=r.default,e.MSI11=l.default,e.MSI1010=h.default,e.MSI1110=u.default},"8e93":function(t,e,i){"use strict";i.r(e);var s=i("750b");i("4fa7");e["default"]=Object(s["b"])({props:{value:{type:Number,default:1},unit:{type:String,default:""},align:{type:String,default:"center"},min:{type:Number,default:1}},setup(t,e){const i=Object(s["j"])(!1),n=Object(s["j"])(t.value),a=()=>{i.value=!1,e.emit("confirm",n.value)};return Object(s["k"])(()=>t.value,()=>{n.value=t.value}),()=>Object(s["c"])("div",{class:"no-border-input-wrapper",style:{textAlign:t.align}},[Object(s["c"])("input",{ref:"insert",directives:[{name:"show",value:i.value}],class:"no-border-input",attrs:{type:"number"},domProps:{value:n.value},on:{blur:()=>{a()},change:i=>{n.value=Math.max(parseFloat(i.target.value),t.min),e.emit("confirm",n.value)},keydown:e=>{"Enter"===e.key&&(i.value=!1),n.value=Math.max(parseFloat(e.target.value),t.min)}}}),Object(s["c"])("div",{class:"input-preview",directives:[{name:"show",value:!i.value}],on:{click:()=>{i.value=!0,e.root.$nextTick(()=>{e.refs.insert.focus()})}}},[n.value," ",t.unit])])}})},"8ed8":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));i("466d"),i("ddb0");function s(t,e="ownFontStyle"){let i=document.getElementById(e);i||(i=document.createElement("style"),i.setAttribute("id",e),document.body.appendChild(i));const s=[];if(i.sheet.rules.length)for(const n in i.sheet.rules){const t=i.sheet.rules[n];if(t.cssText){const e=t.cssText.match(/url\("(.*)?"\)/);e&&2===e.length&&s.push(e[1])}}for(const n of t){const{fontFamily:t,src:e}=n;if(s.includes(e))continue;const a=`@font-face{font-family:"${t}"; src:url("${e}")}`;i.appendChild(document.createTextNode(a)),s.push(n.src)}}},"8ee0":function(t,e,i){i("3f8e");var s=i("697e"),n=s.registerPainter,a=i("dc20");n("svg",a)},"8ef8":function(t,e,i){},"8f33":function(t,e,i){},"8fb1":function(t,e,i){t.exports=i.p+"editor-assets/img/quest.0409ca07.svg"},"8fb2":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:["mode-container flex ","render"===t.type?"flex-start":"flex-end ",t.visible?"":"mode-container-hide"],style:{zIndex:t.zIndex,position:"render"!==t.type?"fixed":"unset",width:("render"!==t.type?t.modeStyle.width:t.width)+"px",height:("render"!==t.type?t.modeStyle.height:t.height)+"px",left:("render"!==t.type?t.modeStyle.left:0)+"px",top:("render"!==t.type?(t.modeStyle.top,t.modeStyle.top):0)+"px"},on:{mousemove:function(e){t.showTip=!0},mouseout:function(e){t.showTip=!1}}},["render"!==t.type?s("div",{staticClass:"mode-container__left",on:{click:function(e){t.visible=!t.visible}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showTip||!t.visible,expression:"showTip || !visible"}],staticClass:"btn-drawer flex flex-center item-center"},[s("img",{class:t.visible?"":"img",attrs:{src:i("e149")}})])]):t._e(),s("div",{staticClass:"mode-container__right",style:{width:("render"===t.type?t.width-256:t.modeStyle.width)+"px",height:("render"===t.type?t.height:t.modeStyle.height)+"px"}},[s("a-spin",{directives:[{name:"show",rawName:"v-show",value:!t.canIDoAnimation,expression:"!canIDoAnimation"}],staticStyle:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},[s("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1),"render"!==t.type?s("div",{staticClass:"mode-container__top flex flex-end item-center",style:{width:t.modeStyle.width-1+"px"}},[s("a-tooltip",{directives:[{name:"show",rawName:"v-show",value:!t.isBigger,expression:"!isBigger"}],attrs:{title:"开始拍摄",placement:"bottomLeft"}},[s("div",{staticClass:"flex flex-start item-center pointer rec",on:{click:function(e){return t.openRec()}}},[s("div",{staticClass:"tip"}),s("div",{staticClass:"fo-12 ml-4"},[t._v("REC")])])]),t.isCup||t.isBigger?t._e():s("div",{staticClass:"mode-container__top__play flex flex-center item-center",style:{width:t.playStyle.width+"px",height:t.playStyle.height+"px",marginTop:t.playStyle.marginTop+"px",marginRight:t.playStyle.marginRight+"px"}},[t.action.open||t.action.play?t._e():s("img",{style:{width:(t.isBigger?40:20)+"px",height:(t.isBigger?40:20)+"px"},attrs:{src:i("6b4b")},on:{click:function(e){return t.doAction()}}}),t.action.open?s("div",{staticClass:"mode-container__top__play__progress",style:{width:(t.isBigger?204:102)+"px",height:(t.isBigger?8:4)+"px",marginRight:(t.isBigger?14:7)+"px"},attrs:{id:"modeContainerTopPlayProgress"},on:{mousedown:t.progressMouseDown}},[s("div",{staticClass:"mode-container__top__play__progress-value",style:{width:(t.isBigger?204/t.endTime*t.time:102/t.endTime*t.time)+"px",height:(t.isBigger?8:4)+"px",marginRight:(t.isBigger?14:7)+"px"}})]):t._e(),!t.action.play&&t.action.open?s("img",{style:{width:(t.isBigger?12:6)+"px",height:(t.isBigger?12:6)+"px"},attrs:{src:i("cc2e")},on:{click:function(e){return t.doAction()}}}):t._e(),t.action.play?s("img",{style:{width:(t.isBigger?12:6)+"px",height:(t.isBigger?12:6)+"px"},attrs:{src:i("e5e5")},on:{click:function(e){t.action.play=!1,t.stopAction()}}}):t._e(),t.action.open?s("img",{style:{marginLeft:(t.isBigger?14:7)+"px",width:(t.isBigger?12:6)+"px",height:(t.isBigger?12:6)+"px"},attrs:{src:i("9cc5")},on:{click:function(e){return t.outPlayAction()}}}):t._e()]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isBigger,expression:"!isBigger"}],staticClass:"mode-container__top__big-btn",attrs:{title:"放大"},on:{click:t.doBigger}},[s("img",{attrs:{src:i("be61")}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isBigger&&!t.showRecord,expression:"isBigger && !showRecord"}],staticClass:"mode-container__top__close-btn flex flex-center item-center",on:{click:t.closeBigger}},[s("img",{attrs:{src:i("024c")}})])],1):t._e(),s("div",{staticClass:"flex flex-center item-center",style:{width:("render"===t.type?t.width:t.modeStyle.width)+"px",height:("render"===t.type?t.height:t.modeStyle.height)+"px",borderRadius:"0 0 0 4px",background:"#f3f3f3"}},[s("div",{staticClass:"fftrec",style:{width:t.modeStyle.width+"px",height:t.modeStyle.height+"px",transform:"render"===t.type?"scale("+(t.scale,t.scale+")"):""}},["render"===t.type?s("div",{staticClass:"flex flex-start item-center pointer rec2"},[s("div",{staticClass:"tip"}),s("div",{staticClass:"fo-12 ml-4"},[t._v("REC")])]):t._e(),t.isVip||"render"!==t.type?t._e():s("a-tooltip",{attrs:{title:"开通VIP去Logo水印",placement:"top"}},[s("div",{staticClass:"watermark",on:{click:t.clickWatermark}})]),s("mode-3d",{directives:[{name:"show",rawName:"v-show",value:t.canIDoAnimation,expression:"canIDoAnimation"}],ref:"mode3d",style:"render"===t.type?{outline:2/t.scale+"px dashed #ff6634",transition:"all linear 0.2s"}:{},attrs:{animationInterval:t.animationInterval,width:t.modeStyle.width,height:t.modeStyle.height,showRecord:t.showRecord},on:{"get-step":function(e){t.step=e,t.endTime=1e3*e},ready:function(e){"render"===t.type?t.outPlayAction():t.doAction()}}})],1)]),t.isBigger?t._e():s("div",{staticClass:"add-size-panel",on:{mousedown:t.mouseDown,dblclick:t.dbClick}},[s("div",{staticClass:"img",style:{backgroundImage:"url("+t.bigImage+")"}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isBigger,expression:"isBigger"}],staticClass:"new-play-panel"},[s("a-tooltip",{directives:[{name:"show",rawName:"v-show",value:!t.showRecord,expression:"!showRecord"}],attrs:{placement:"top",title:"拍摄"}},[s("div",{staticClass:"pbtn flex flex flex-center",style:{right:"render"===t.type?"280px":"24px"},on:{click:function(e){t.openRec(),t.closeBigger()}}},[s("img",{attrs:{src:i("5dad"),width:"16px"}})])]),s("a-tooltip",{attrs:{placement:"left",title:"自动旋转"}},[s("div",{class:["pbtn ptt flex flex flex-center",t.openRotate?"pbtn--active":""],style:{right:"render"===t.type?"280px":"24px"},on:{click:t.doRotate}},[t.openRotate?s("img",{attrs:{src:i("377a"),width:"16px"}}):s("img",{attrs:{src:i("70bf"),width:"16px"}})])]),t.isCup?t._e():s("div",{class:"pbtn-play "+(t.action.open?"pbtn-play-action":"")+" right-btn-hover d-flex justify-center align-center",style:{right:"render"===t.type?"280px":"24px"},on:{click:function(e){e.stopPropagation(),!t.action.open&&t.doAction()}}},[s("a-tooltip",{attrs:{placement:"left",title:"自动折叠"}},[s("div",{staticClass:"flex flex-center item-center",style:"width: 100%; height: 100%; "+(t.action.open?"display: none !important":"")},[s("svg",{staticClass:"playbar",attrs:{width:"16px",height:"16px",viewBox:"0 0 16 16"}},[s("path",{staticClass:"path",attrs:{transform:"translate(4,1)","fill-rule":"evenodd",stroke:"none","stroke-width":"1",d:"M9.67424623,6.15633851 L1.53687549,0.978011677 C1.07093412,0.68150353 0.452846659,0.818856299 0.156338512,1.28479767 C0.0542333717,1.44524861 -2.4533543e-16,1.63148914 -2.22044605e-16,1.82167316 L0,12.1783268 C-9.13419418e-16,12.7306116 0.44771525,13.1783268 1,13.1783268 C1.19018402,13.1783268 1.37642456,13.1240935 1.53687549,13.0219883 L9.67424623,7.84366149 C10.1401876,7.54715334 10.2775404,6.92906588 9.98103223,6.46312451 C9.90245354,6.33964371 9.79772704,6.2349172 9.67424623,6.15633851 Z"}})])])]),t.action.open?s("div",{staticClass:"action-content"},[s("div",{staticClass:"progress flex flex-center item-center"},[s("div",{ref:"progressPanel",class:"progress-panel "+(t.started?"disable":""),on:{mousedown:function(e){!t.started&&t.progressClick(e)}}},[s("div",{class:"progress-bar "+(t.started?"disable":""),style:{width:216/t.endTime*t.time+"px"}},[s("div",{class:"progress-tab "+(t.started?"disable":""),on:{mousedown:function(e){e.stopPropagation(),!t.started&&t.actionMouseDown(e)}}})])])]),s("div",{class:"opt-btn flex flex-center item-center "+(t.started?"disable":""),on:{click:function(e){e.stopPropagation(),!t.started&&(t.action.play?(t.action.play=!1,t.stopAction()):t.doAction())}}},[t.action.play?t._e():s("svg",{staticClass:"playbar",attrs:{width:".8rem",height:".8rem",viewBox:"0 0 16 16"}},[s("path",{staticClass:"path",attrs:{transform:"translate(4,1)",stroke:"none","stroke-width":"1",d:"M9.67424623,6.15633851 L1.53687549,0.978011677 C1.07093412,0.68150353 0.452846659,0.818856299 0.156338512,1.28479767 C0.0542333717,1.44524861 -2.4533543e-16,1.63148914 -2.22044605e-16,1.82167316 L0,12.1783268 C-9.13419418e-16,12.7306116 0.44771525,13.1783268 1,13.1783268 C1.19018402,13.1783268 1.37642456,13.1240935 1.53687549,13.0219883 L9.67424623,7.84366149 C10.1401876,7.54715334 10.2775404,6.92906588 9.98103223,6.46312451 C9.90245354,6.33964371 9.79772704,6.2349172 9.67424623,6.15633851 Z"}})]),t.action.play?s("svg",{staticClass:"stop",attrs:{viewBox:"0 0 1024 1024",width:"12",height:"12"}},[s("path",{staticClass:"path",attrs:{d:"M77.93008 0m32 0l192 0q32 0 32 32l0 960q0 32-32 32l-192 0q-32 0-32-32l0-960q0-32 32-32Z"}}),s("path",{staticClass:"path",attrs:{d:"M589.93008 0m32 0l192 0q32 0 32 32l0 960q0 32-32 32l-192 0q-32 0-32-32l0-960q0-32 32-32Z"}})]):t._e()]),s("div",{class:"opt-btn flex flex-center item-center "+(t.started?"disable":""),on:{click:function(e){e.stopPropagation(),!t.started&&t.outPlayAction()}}},[s("svg",{attrs:{width:"16px",height:"16px",viewBox:"0 0 32 32"}},[s("rect",{staticClass:"path",attrs:{stroke:"none","stroke-width":"1",x:"4",y:"5",width:"20",height:"20",rx:"4"}})])])]):t._e()],1)],1)],1),s("Recorder",{ref:"record",attrs:{canshow:t.showRecord,endTime:t.endTime,animationInterval:t.animationInterval,time:t.recordTime,type:t.type,width:"render"===t.type?t.width:t.modeStyle.width,height:"render"===t.type?t.height:t.modeStyle.height},on:{close:function(e){t.recordTime=0,"render"!==t.type&&(t.showRecord=!1)},startRecord:t.startRecord}})],1)},n=[],a=(i("5319"),i("5530")),r=i("9227"),o=i("c2be"),l=i("5880"),c=i("2036"),h=i.n(c),d=i("9393"),u={name:"editor",mixins:[d["a"]],props:["value","width","height","type"],components:{mode3d:r["default"],Recorder:o["default"]},model:{prop:"value"},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(l["mapState"])(["knifeVersion","isInside","tubeVisible"])),Object(l["mapGetters"])("render",["canIDrawInsideMap","canIDrawOutsideMap","canIDoAnimation","scale"])),Object(l["mapGetters"])("profile",["isVip"])),Object(l["mapGetters"])("project",["isCup"])),{},{zIndex(){return this.tubeVisible?999:1e3}}),watch:{value(t){this.visible=t},visible(t){this.$store.commit("render/setShowD3Panel",t),this.$emit("change",t),this.modeStyle.right=t?0:-this.modeStyle.width},knifeVersion(){this.is_inverse=!1,this.time=0},recording(t){if(2===t)this.doAction();else if(3===t){let t=0,e=setInterval(()=>{this.recordTime+=1e3,t++,2===t&&(clearInterval(e),this.$refs.record.doStop(),this.recording=0,this.recordTime=0)},1e3)}}},data(){return{showRecord:"render"===this.type,visible:this.value,animationInterval:20,showTip:!1,knife:{},openRotate:!1,bigImage:h.a,alltime:0,modeStyle:{width:220,height:220,right:0,left:window.innerWidth-220,top:"auto"},started:!1,isBigger:"render"===this.type,playStyle:{width:20,height:20,marginTop:38,marginRight:8},action:{open:!1,play:!1,time:0,isBack:!1},intv:null,time:0,recordTime:0,endTime:0,is_inverse:!1,step:1,recording:0}},mounted(){this.initWidth()},beforeDestroy(){this.time=0,clearInterval(this.intv),window.removeEventListener("resize",this._handeResize)},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(l["mapActions"])(["saveFullTemplate"])),Object(l["mapActions"])("render",["saveCanIRender"])),Object(l["mapMutations"])("render",["setRenderType"])),{},{async openRec(){const t=this.$message.loading("加载中",0);this.setRenderType("video"),this.$route.query.type&&"preview"===this.$route.query.type?(await this.$store.dispatch("saveForceCreate",this),this.$store.dispatch("render/saveRenderVisible",!0)):(await this.saveFullTemplate({projectData:this.$root.projectData,isAuto:!1,knifeData:this.$root.knifeData}),this.$store.dispatch("render/saveRenderVisible",!0)),setTimeout(t,0)},clickWatermark(){this.isVip||this.showPersonalVip()},doRecord(){this.showRecord=!0,this.outPlayAction()},startDoRecord(){this.doBigger(),this.doRecord()},doRotate(){this.openRotate=!this.openRotate,this.$refs.mode3d.doRotate(this.openRotate)},startRecord(t){t?(this.started=!0,this.time=this.endTime,this.is_inverse=!0,this.recording++,this.openRotate=!0,this.$refs.mode3d.doRotate(this.openRotate),this.doAction()):t||(this.started=!1,this.outPlayAction())},progressClick(t){this.stopAction();const e=t.clientX,i=this.$refs.progressPanel.getBoundingClientRect(),s=e-i.x;this.time=parseInt(s/i.width*this.endTime),this.$refs.mode3d.doAction(this.time)},actionMouseDown(t){const e=t.clientX,i=this.$refs.progressPanel.getBoundingClientRect(),s=this.time/this.endTime*i.width;this.stopAction(),document.onmousemove=t=>{const n=t.clientX-e;let a=s+n;return a>i.width?a=i.width:a<0&&(a=0),this.time=a/i.width*this.endTime,this.$refs.mode3d.doAction(this.time),!1},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}},progressMouseDown(t){this.action.play=!1,this.stopAction();let e=parseFloat(document.getElementById("modeContainerTopPlayProgress").style.width.replace("px",""));this.time=t.offsetX/e*this.endTime,this.$refs.mode3d.doAction(this.time),document.onmousemove=t=>(this.time=t.offsetX/e*this.endTime,this.$refs.mode3d.doAction(this.time),!1),document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}},initWidth(){window.addEventListener("resize",this._handeResize)},_handeResize(){this.modeStyle.left=window.innerWidth-this.modeStyle.width},computeWidth(){},dbClick(){this.modeStyle.width=220,this.modeStyle.height=220,this.modeStyle.left=window.innerWidth-220},outPlayAction(){clearInterval(this.intv),this.outPlay(),this.time=this.endTime,this.$refs.mode3d.doAction(this.time-1),this.is_inverse=!0},mouseDown(t){if(0===t.button){const e=document.querySelector(".editor-header");let i=window.innerHeight-e.clientHeight,s=window.innerWidth,n=t.clientX,a=t.clientY,r=this.modeStyle.width,o=this.modeStyle.height,l=window.innerWidth-this.modeStyle.width;document.onmousemove=t=>{let e=t.clientX-n,c=t.clientY-a;return(this.modeStyle.width<=s||this.modeStyle.width>r-e)&&(this.modeStyle.left=Math.min(l+e,window.innerWidth-220),this.modeStyle.width=Math.max(r-e,220)),(this.modeStyle.height<=i||this.modeStyle.height>o+c)&&(this.modeStyle.height=Math.max(o+c,220)),!1},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}}},doBigger(){this.modeStyle.width=window.innerWidth,this.modeStyle.height=window.innerHeight,this.modeStyle.top="auto",this.modeStyle.left=0,this.isBigger=!0,this.playStyle={width:40,height:40,marginTop:74,marginRight:24},this.action.open&&(this.playStyle.width=290)},closeBigger(){this.modeStyle.width=220,this.modeStyle.height=220,this.modeStyle.left=window.innerWidth-220,this.modeStyle.top="auto",this.isBigger=!1,this.openRotate=!1,this.$refs.mode3d.doRotate(this.openRotate),this.playStyle={width:20,height:20,marginTop:38,marginRight:8},this.action.open&&(this.playStyle.width=140)},doAction(){this.action.play=!0,this.action.open=!0,this.saveCanIRender(!1),this.runAnimate(),this.isBigger?this.playStyle.width=290:this.playStyle.width=140},runAnimate(){this.intv&&clearInterval(this.intv);let t=this.animationInterval;this.intv=setInterval(()=>{this.canIDoAnimation&&(this.$refs.mode3d.doAction(this.time),!this.is_inverse&&this.time<=this.endTime||this.is_inverse&&this.time>=0?(this.is_inverse?this.time-=t:this.time+=t,this.recording>0&&(this.recordTime+=t)):(clearInterval(this.intv),this.outPlay(),this.time>0?(2===this.recording&&this.recording++,this.is_inverse=!0):(1===this.recording&&this.recording++,this.is_inverse=!1)))},t)},stopAction(){clearInterval(this.intv),this.saveCanIRender(!0),this.action.play=!1},outPlay(){this.action.play=!1,this.saveCanIRender(!0),this.action.open=!1,this.isBigger?this.playStyle={width:40,height:40,marginTop:74,marginRight:24}:this.playStyle={width:20,height:20,marginTop:38,marginRight:8}}})},p=u,f=(i("066c"),i("2877")),m=Object(f["a"])(p,s,n,!1,null,"2591988d",null);e["default"]=m.exports},9037:function(t,e,i){},9048:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-mode flex flex-start item-center",style:{width:t.width+"px",height:t.height+"px"}},[i("div",{style:{height:t.height+"px",width:t.width-256+"px"}},[i("mode3d",{ref:"mode3d",attrs:{height:t.height,width:t.width-256,type:"render",value:!0}})],1),i("video-prop",{attrs:{height:t.height},on:{"ratio-change":t.ratioChange}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showVideo,expression:"showVideo"}],staticClass:"preview-mask flex flex-center item-center"},[i("div",[i("video",{staticClass:"video",style:{height:t.viedoHeight+"px"},attrs:{controls:"",src:t.videoURL}}),i("div",{staticClass:"video-panel mt-16"},[i("a-button",{staticClass:"fo-14",staticStyle:{width:"120px"},attrs:{size:"large"},on:{click:function(e){t.showVideo=!1}}},[t._v("关闭")]),i("a-button",{staticClass:"ml-12 fo-14",staticStyle:{width:"120px"},attrs:{size:"large",type:"primary"},on:{click:function(e){t.showVideo=!1,t.showVideoRenderModel=!0}}},[t._v("一键替换并拍摄")])],1)])])],1)},n=[],a=i("c32f"),r=i("0748"),o=i("e46a"),l={props:{height:{type:Number},width:{type:Number}},components:{mode3d:a["default"],videoProp:r["default"],videoRenderModel:o["default"]},data(){return{videoURL:"",viedoHeight:676,showVideo:!1,showVideoRenderModel:!1,shedId:0}},mounted(){this.initVideoUrl()},beforeDestroy(){this.$bus.$off("videoUrlInit")},methods:{initVideoUrl(){this.$bus.$on("videoUrlInit",({videoURL:t,shedId:e})=>{this.videoURL=t,this.showVideo=!0,this.shedId=e})},ratioChange(t){const e=t.ratio.w/t.ratio.h;let i=this.width-256-40,s=i/e;s>this.height-40&&(s=this.height-40,i=s*e);const n=i/t.clarity.w;this.$store.dispatch("render/saveScale",n),this.$refs.mode3d.modeStyle.width=t.clarity.w,this.$refs.mode3d.modeStyle.height=t.clarity.h}}},c=l,h=(i("6472"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,"19f9fd9a",null);e["default"]=d.exports},"908e":function(t,e){let i=!1,s=()=>{};const n=t=>{i=t},a=t=>{s=t},r=(t,e)=>{s({type:t,message:e})};t.exports={logging:i,setLogging:n,setCustomLogger:a,log:r}},9098:function(t,e,i){t.exports=i.p+"editor-assets/img/barcode-right.36ece73e.svg"},"90e8":function(t,e,i){"use strict";i.r(e);i("ddb0");var s=i("750b"),n=i("365c"),a=i("6ca2"),r=i("4a66"),o=i.n(r),l=i("b937"),c=i.n(l),h=i("e597"),d=i.n(h),u=i("2e81"),p=i.n(u),f=(i("b547"),i("ed08")),m=Object(s["b"])({props:{good:{type:[Object,Object],default:()=>({})},options:{type:[Object,Array],default:()=>[]},width:{type:String,default:"256px"}},setup(t,e){var i;const n=Object(s["j"])(!1),r=Object(s["j"])(!1),l=t=>e.router.push({path:"/design",query:{id:t}});let h=t.good.update_time||t.good.create_time;h=e.formatDate(h,"MM/dd hh:mm");var u=new Date;const m=null===(i=t.good.render_videos)||void 0===i?void 0:i.filter((t,e)=>u-new Date(t.update_time)<864e5),g=()=>{t.good.collection_id?e.router.push({path:"/details",query:{id:t.good.template_id}}):l(t.good.id)};return()=>Object(s["c"])("div",{class:"mydesign__list__chunkv2",style:{width:t.width}},[Object(s["c"])("div",{class:"mydesign__list__imgv2",style:{width:t.width},on:{mousemove:()=>n.value=!0,mouseleave:()=>{r.value||(n.value=!1)}}},[Object(s["c"])("div",{class:"mydesign__list__optionsv2",style:{opacity:n.value?1:0}},[Object(s["c"])("span",{class:"mydesign__list__showbig"}),Object(s["c"])("div",{class:"mydesign__list__option"})]),Object(s["c"])("div",{class:"design-maskv2",style:{opacity:n.value?1:0}},[Object(s["c"])("div",{class:"maskv2",style:{width:t.width,height:t.width}},[Object(s["c"])("div",{class:"tk-top flex flex-between item-center"},[Object(s["c"])("div",{class:"tk-btn ml-8 mt-16"},[Object(s["c"])("img",{attrs:{src:o.a},on:{click:()=>{e.emit("previewImage",t.good.screenshot)}}})]),Object(s["c"])("div",{class:""},[Object(s["c"])(a["a"],{attrs:{triggler:"hover",menus:t.options},on:{handleClick:t=>{e.emit("change",t)},change:t=>{r.value=t,t||setTimeout(()=>{n.value=!1},150)}}},[Object(s["c"])("div",{class:"tk-btn flex flex-center item-center mr-8 mt-16"},[Object(s["c"])("img",{attrs:{src:c.a}})])])])]),Object(s["c"])("div",{class:"tk-center flex flex-center item-center"},[Object(s["c"])("a-button",{class:"prev-button",on:{click:g}},["编辑方案"])])])]),Object(s["c"])("div",{class:"mydesign-imgv2",style:{width:t.width,height:t.width}},[t.good.screenshot?Object(s["c"])("img",{attrs:{src:t.good.screenshot+"?imageView2/2/w/400/h/400/q/95"}}):Object(s["c"])("img",{attrs:{src:d.a,alt:!0},class:"noimage"}),Object(s["c"])("div",{class:"thumbnail"},[t.good.render_videos.length?Object(s["c"])("a-tooltip",{attrs:{placement:"bottom"}},[Object(s["c"])("template",{slot:"title"},["渲染视频"]),Object(s["c"])("a",{class:"image",attrs:{href:"render/console/video?id="+t.good.id,target:"_blank"}},[Object(s["c"])("img",{class:"imageSrc",attrs:{src:Object(f["F"])(t.good.render_videos[0].video+"?vframe/jpg/offset/1/w/50/h/50")}}),m.length?Object(s["c"])("i",{class:"isNewVideo"}):"",Object(s["c"])("span",{class:"count"},[t.good.render_video_count]),Object(s["c"])("i",{class:"videoIcon"},[Object(s["c"])("img",{attrs:{src:p.a}})])])]):""," ",t.good.render_images.length?Object(s["c"])("a-tooltip",{attrs:{placement:"bottom"}},[Object(s["c"])("template",{slot:"title"},["渲染图片"]),Object(s["c"])("a",{class:"image",attrs:{href:"render/console/image?id="+t.good.id,target:"_blank"}},[Object(s["c"])("img",{class:"imageSrc",attrs:{src:Object(f["F"])(t.good.render_images[0].image,50,50)}}),Object(s["c"])("span",{class:"count"},[t.good.render_image_count])])]):""])])]),Object(s["c"])("div",{class:"mydesign__list__explainv2"},[Object(s["c"])("div",{class:"mydesign__list__title1v2 mt-8"},[t.good.project_name]),Object(s["c"])("div",{class:"mydesign__list__title2v2 mt-4 flex flex-between"},[Object(s["c"])("div",[t.good.length,"*",t.good.width,"*",t.good.height,"mm"]),Object(s["c"])("div",[h])])])])}}),g=i("4794"),v=i("f160"),b=i("3ccf"),y=i("ae36"),_=i("7e00"),x=i("d534"),w=i("6116");i("fee0");const C=["设计方案","收藏夹","已购"];e["default"]=Object(s["b"])({setup(t,e){const i=Object(s["j"])(0),a=e.vuex.mapState("layout",["width"]),r=Object(s["i"])({current:1,pageSize:20}),o=Object(s["j"])(null),l=Object(s["j"])(!1),c=Object(s["j"])(!1),h=Object(s["j"])(null),d=Object(s["j"])(""),[u,{setTrue:p,setFalse:k}]=Object(f["I"])(!1),{loading:S,data:A,refetch:O}=Object(b["c"])(n["getProjectList"],{variables:r}),[j,{loading:M}]=Object(b["b"])(n["delDesign"]),[I]=Object(b["b"])(n["copyDesign"]),T=Object(s["a"])(()=>(a.width.value-80)/5);Object(s["k"])(Object.keys(r).map(t=>()=>r[t]),()=>{O({variables:r})},{lazy:!0});const E=Object(s["a"])(()=>{var t;return(null===(t=A.value)||void 0===t?void 0:t.data)||[]}),D=Object(s["a"])(()=>{var t;return 0===(null===(t=A.value)||void 0===t?void 0:t.total)}),L=Object(s["a"])(()=>{var t;return(null===(t=A.value)||void 0===t?void 0:t.total)||10});return()=>{var t;return Object(s["c"])("div",{class:"mydesign p-32"},[Object(s["c"])("a-modal",{attrs:{centered:!0,title:"删除",visible:l.value,footer:!1}},[Object(s["c"])("p",{class:"text-center"},["确定删除 ",null===(t=o.value)||void 0===t?void 0:t.project_name," ?"]),Object(s["c"])("div",{class:"footer-contains py-24 flex flex-center item-center"},[Object(s["c"])("a-button",{style:{width:"120px"},attrs:{size:"large"},on:{click:()=>l.value=!1}},["取消"]),Object(s["c"])("a-button",{style:{width:"120px"},attrs:{size:"large",type:"primary",loading:M.value},class:"ml-24",on:{click:()=>{var t;j({variables:{project_id:null===(t=o.value)||void 0===t?void 0:t.id},update(){l.value=!1,e.root.$message.success("删除成功"),O({variables:r})}})}}},["确定"])])]),Object(s["c"])("div",{class:"flex item-center"},[C.map((t,e)=>Object(s["c"])("div",{class:`page-title ${0===e?"mr-12":""} text-pointer ${i.value===e?"":"inactive"} mb-16`,on:{click:()=>i.value=e}},[t]))]),1===i.value?Object(s["c"])(x["default"]):2===i.value?Object(s["c"])(_["default"]):D.value?Object(s["c"])(g["a"]):Object(s["c"])("div",{class:"design-container"},[Object(s["c"])("transition",{attrs:{name:"fade"}},[S.value?"":Object(s["c"])("div",{class:"mydesign__list"},[E.value.map((t,i)=>Object(s["c"])("div",{class:(i%5===4?"":"mr-20")+" mt-4",key:t.id},[Object(s["c"])(m,{attrs:{width:T.value+"px",good:t,options:[{key:"COPY",title:"复制"},{key:"DELETE",title:"删除"}]},on:{previewImage:t=>{d.value=t,p()},change:i=>{switch(i.key){case"COPY":I({variables:{template_id:t.id,project_name:Object(w["i"])(t.project_name)},update(){e.root.$message.success("复制成功"),O({variables:r})}});break;case"DELETE":o.value=t,l.value=!0;break;case"SHARE":h.value=t.id,c.value=!0;break;default:return}}}})]))])]),Object(s["c"])("div",{class:"pagenate float-right"},[Object(s["c"])(v["a"],{attrs:{pageSize:r.pageSize,total:L.value},on:{change:t=>{r.current=t}}})]),Object(s["c"])("div",{class:"clearfix"})]),Object(s["c"])(y["a"],{attrs:{imageUrl:d.value,visible:u.value},on:{cancel:()=>{k()}}})])}}})},9110:function(t,e,i){i("96cf");const s=i("9423"),{fetchFile:n}=i("b8df");t.exports={createFFmpeg:s,fetchFile:n}},9140:function(t,e,i){t.exports=i.p+"editor-assets/img/color-pallet.dcd6c720.svg"},9156:function(t,e,i){},"919c":function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},9227:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mode3d-container",style:{width:this.twidth+"px",height:this.theight+"px"},on:{click:t.forDebug}},[i("canvas",{staticStyle:{position:"absolute","z-index":"0"},attrs:{id:"mode3d"}})])},n=[],a=(i("ddb0"),i("5530")),r=i("5880"),o=(i("60bb"),i("5fda")),l=i("ed08"),c=i("87a0"),h=(i("2532"),i("1276"),i("2ca0"),i("5cc6"),i("b39a"),i("da71")),d=i("34ad"),u=i("5a89"),p=function(t,e){document,this.object=t,this.domElement=e,this.enabled=!0,this.target=new u["ob"],this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:u["D"].ROTATE,MIDDLE:u["D"].DOLLY,RIGHT:u["D"].PAN},this.touches={ONE:u["ib"].ROTATE,TWO:u["ib"].DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return c.phi},this.getAzimuthalAngle=function(){return c.theta},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(s),i.update(),o=r.NONE},this.update=function(){var e=new u["ob"],n=(new u["X"]).setFromUnitVectors(t.up,new u["ob"](0,1,0)),a=n.clone().inverse(),m=new u["ob"],g=new u["X"],v=2*Math.PI;return function(){var t=i.object.position;e.copy(t).sub(i.target),e.applyQuaternion(n),c.setFromVector3(e),i.autoRotate&&o===r.NONE&&A(k()),i.enableDamping?(c.theta+=h.theta*i.dampingFactor,c.phi+=h.phi*i.dampingFactor):(c.theta+=h.theta,c.phi+=h.phi);var u=i.minAzimuthAngle,b=i.maxAzimuthAngle;return isFinite(u)&&isFinite(b)&&(u<-Math.PI?u+=v:u>Math.PI&&(u-=v),b<-Math.PI?b+=v:b>Math.PI&&(b-=v),c.theta=u<b?Math.max(u,Math.min(b,c.theta)):c.theta>(u+b)/2?Math.max(u,c.theta):Math.min(b,c.theta)),c.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,c.phi)),c.makeSafe(),c.radius*=d,c.radius=Math.max(i.minDistance,Math.min(i.maxDistance,c.radius)),!0===i.enableDamping?i.target.addScaledVector(p,i.dampingFactor):i.target.add(p),e.setFromSpherical(c),e.applyQuaternion(a),t.copy(i.target).add(e),i.object.lookAt(i.target),!0===i.enableDamping?(h.theta*=1-i.dampingFactor,h.phi*=1-i.dampingFactor,p.multiplyScalar(1-i.dampingFactor)):(h.set(0,0,0),p.set(0,0,0)),d=1,!!(f||m.distanceToSquared(i.object.position)>l||8*(1-g.dot(i.object.quaternion))>l)&&(i.dispatchEvent(s),m.copy(i.object.position),g.copy(i.object.quaternion),f=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",dt,!1),i.domElement.removeEventListener("pointerdown",J,!1),i.domElement.removeEventListener("wheel",rt,!1),i.domElement.removeEventListener("touchstart",lt,!1),i.domElement.removeEventListener("touchend",ht,!1),i.domElement.removeEventListener("touchmove",ct,!1),i.domElement.ownerDocument.removeEventListener("pointermove",tt,!1),i.domElement.ownerDocument.removeEventListener("pointerup",et,!1),i.domElement.removeEventListener("keydown",ot,!1)};var i=this,s={type:"change"},n={type:"start"},a={type:"end"},r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},o=r.NONE,l=1e-6,c=new u["gb"],h=new u["gb"],d=1,p=new u["ob"],f=!1,m=new u["nb"],g=new u["nb"],v=new u["nb"],b=new u["nb"],y=new u["nb"],_=new u["nb"],x=new u["nb"],w=new u["nb"],C=new u["nb"];function k(){return 2*Math.PI/60/60*i.autoRotateSpeed}function S(){return Math.pow(.95,i.zoomSpeed)}function A(t){h.theta-=t}function O(t){h.phi-=t}var j=function(){var t=new u["ob"];return function(e,i){t.setFromMatrixColumn(i,0),t.multiplyScalar(-e),p.add(t)}}(),M=function(){var t=new u["ob"];return function(e,s){!0===i.screenSpacePanning?t.setFromMatrixColumn(s,1):(t.setFromMatrixColumn(s,0),t.crossVectors(i.object.up,t)),t.multiplyScalar(e),p.add(t)}}(),I=function(){var t=new u["ob"];return function(e,s){var n=i.domElement;if(i.object.isPerspectiveCamera){var a=i.object.position;t.copy(a).sub(i.target);var r=t.length();r*=Math.tan(i.object.fov/2*Math.PI/180),j(2*e*r/n.clientHeight,i.object.matrix),M(2*s*r/n.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(j(e*(i.object.right-i.object.left)/i.object.zoom/n.clientWidth,i.object.matrix),M(s*(i.object.top-i.object.bottom)/i.object.zoom/n.clientHeight,i.object.matrix)):i.enablePan=!1}}();function T(t){i.object.isPerspectiveCamera?d/=t:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*t)),i.object.updateProjectionMatrix(),f=!0):i.enableZoom=!1}function E(t){i.object.isPerspectiveCamera?d*=t:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/t)),i.object.updateProjectionMatrix(),f=!0):i.enableZoom=!1}function D(t){m.set(t.clientX,t.clientY)}function L(t){x.set(t.clientX,t.clientY)}function P(t){b.set(t.clientX,t.clientY)}function R(t){g.set(t.clientX,t.clientY),v.subVectors(g,m).multiplyScalar(i.rotateSpeed);var e=i.domElement;A(2*Math.PI*v.x/e.clientHeight),O(2*Math.PI*v.y/e.clientHeight),m.copy(g),i.update()}function z(t){w.set(t.clientX,t.clientY),C.subVectors(w,x),C.y>0?T(S()):C.y<0&&E(S()),x.copy(w),i.update()}function N(t){y.set(t.clientX,t.clientY),_.subVectors(y,b).multiplyScalar(i.panSpeed),I(_.x,_.y),b.copy(y),i.update()}function B(){}function F(t){t.deltaY<0?E(S()):t.deltaY>0&&T(S()),i.update()}function $(t){var e=!1;switch(t.keyCode){case i.keys.UP:I(0,i.keyPanSpeed),e=!0;break;case i.keys.BOTTOM:I(0,-i.keyPanSpeed),e=!0;break;case i.keys.LEFT:I(i.keyPanSpeed,0),e=!0;break;case i.keys.RIGHT:I(-i.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),i.update())}function U(t){if(1==t.touches.length)m.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),i=.5*(t.touches[0].pageY+t.touches[1].pageY);m.set(e,i)}}function H(t){if(1==t.touches.length)b.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),i=.5*(t.touches[0].pageY+t.touches[1].pageY);b.set(e,i)}}function V(t){var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY,s=Math.sqrt(e*e+i*i);x.set(0,s)}function G(t){i.enableZoom&&V(t),i.enablePan&&H(t)}function W(t){i.enableZoom&&V(t),i.enableRotate&&U(t)}function Y(t){if(1==t.touches.length)g.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),s=.5*(t.touches[0].pageY+t.touches[1].pageY);g.set(e,s)}v.subVectors(g,m).multiplyScalar(i.rotateSpeed);var n=i.domElement;A(2*Math.PI*v.x/n.clientHeight),O(2*Math.PI*v.y/n.clientHeight),m.copy(g)}function q(t){if(1==t.touches.length)y.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),s=.5*(t.touches[0].pageY+t.touches[1].pageY);y.set(e,s)}_.subVectors(y,b).multiplyScalar(i.panSpeed),I(_.x,_.y),b.copy(y)}function X(t){var e=t.touches[0].pageX-t.touches[1].pageX,s=t.touches[0].pageY-t.touches[1].pageY,n=Math.sqrt(e*e+s*s);w.set(0,n),C.set(0,Math.pow(w.y/x.y,i.zoomSpeed)),T(C.y),x.copy(w)}function Q(t){i.enableZoom&&X(t),i.enablePan&&q(t)}function Z(t){i.enableZoom&&X(t),i.enableRotate&&Y(t)}function K(){}function J(t){if(!1!==i.enabled)switch(t.pointerType){case"mouse":st(t);break}}function tt(t){if(!1!==i.enabled)switch(t.pointerType){case"mouse":nt(t);break}}function et(t){if(!1!==i.enabled)switch(t.pointerType){case"mouse":at(t);break}}var it=!1;function st(t){var e;switch(t.preventDefault(),i.domElement.focus?i.domElement.focus():window.focus(),t.button){case 0:e=i.mouseButtons.LEFT;break;case 1:e=i.mouseButtons.MIDDLE;break;case 2:e=i.mouseButtons.RIGHT;break;default:e=-1}switch(e){case u["D"].DOLLY:if(!1===i.enableZoom)return;L(t),o=r.DOLLY;break;case u["D"].ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===i.enablePan)return;P(t),o=r.PAN}else{if(!1===i.enableRotate)return;D(t),o=r.ROTATE}break;case u["D"].PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===i.enableRotate)return;D(t),o=r.ROTATE}else{if(!1===i.enablePan)return;P(t),o=r.PAN}break;default:o=r.NONE}o!==r.NONE&&(it=!0,i.dispatchEvent(n))}function nt(t){if(!1!==it)switch(t.preventDefault(),o){case r.ROTATE:if(!1===i.enableRotate)return;R(t);break;case r.DOLLY:if(!1===i.enableZoom)return;z(t);break;case r.PAN:if(!1===i.enablePan)return;N(t);break}}function at(t){!1!==it&&(B(t),i.dispatchEvent(a),o=r.NONE,it=!1)}function rt(t){!1===i.enabled||!1===i.enableZoom||o!==r.NONE&&o!==r.ROTATE||(t.preventDefault(),t.stopPropagation(),i.dispatchEvent(n),F(t),i.dispatchEvent(a))}function ot(t){!1!==i.enabled&&!1!==i.enableKeys&&!1!==i.enablePan&&$(t)}function lt(t){if(!1!==i.enabled){switch(t.preventDefault(),t.touches.length){case 1:switch(i.touches.ONE){case u["ib"].ROTATE:if(!1===i.enableRotate)return;U(t),o=r.TOUCH_ROTATE;break;case u["ib"].PAN:if(!1===i.enablePan)return;H(t),o=r.TOUCH_PAN;break;default:o=r.NONE}break;case 2:switch(i.touches.TWO){case u["ib"].DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;G(t),o=r.TOUCH_DOLLY_PAN;break;case u["ib"].DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;W(t),o=r.TOUCH_DOLLY_ROTATE;break;default:o=r.NONE}break;default:o=r.NONE}o!==r.NONE&&i.dispatchEvent(n)}}function ct(t){if(!1!==i.enabled)switch(t.preventDefault(),t.stopPropagation(),o){case r.TOUCH_ROTATE:if(!1===i.enableRotate)return;Y(t),i.update();break;case r.TOUCH_PAN:if(!1===i.enablePan)return;q(t),i.update();break;case r.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;Q(t),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;Z(t),i.update();break;default:o=r.NONE}}function ht(t){!1!==i.enabled&&(K(t),i.dispatchEvent(a),o=r.NONE)}function dt(t){!1!==i.enabled&&t.preventDefault()}i.domElement.addEventListener("contextmenu",dt,!1),i.domElement.addEventListener("pointerdown",J,!1),i.domElement.addEventListener("wheel",rt,!1),i.domElement.addEventListener("touchstart",lt,!1),i.domElement.addEventListener("touchend",ht,!1),i.domElement.addEventListener("touchmove",ct,!1),i.domElement.ownerDocument.addEventListener("pointermove",tt,!1),i.domElement.ownerDocument.addEventListener("pointerup",et,!1),i.domElement.addEventListener("keydown",ot,!1),-1===i.domElement.tabIndex&&(i.domElement.tabIndex=0),this.update()};p.prototype=Object.create(u["k"].prototype),p.prototype.constructor=p;var f=function(t,e){p.call(this,t,e),this.screenSpacePanning=!1,this.mouseButtons.LEFT=u["D"].PAN,this.mouseButtons.RIGHT=u["D"].ROTATE,this.touches.ONE=u["ib"].PAN,this.touches.TWO=u["ib"].DOLLY_ROTATE};f.prototype=Object.create(u["k"].prototype),f.prototype.constructor=f;var m={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},g={};g[u["M"]]=m.NEAREST,g[u["O"]]=m.NEAREST_MIPMAP_NEAREST,g[u["N"]]=m.NEAREST_MIPMAP_LINEAR,g[u["y"]]=m.LINEAR,g[u["A"]]=m.LINEAR_MIPMAP_NEAREST,g[u["z"]]=m.LINEAR_MIPMAP_LINEAR,g[u["g"]]=m.CLAMP_TO_EDGE,g[u["bb"]]=m.REPEAT,g[u["L"]]=m.MIRRORED_REPEAT;var v={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},b=function(){};b.prototype={constructor:b,parse:function(t,e,i){var s={binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],forcePowerOfTwoTextures:!1,includeCustomExtensions:!1};i=Object.assign({},s,i),i.animations.length>0&&(i.trs=!0);var n,a={asset:{version:"2.0",generator:"GLTFExporter"}},r=0,o=[],l=[],c=new Map,h=[],d={},p={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map},f=new Map,y=0;function _(t){return f.has(t)||f.set(t,y++),f.get(t)}function x(t,e){return t.length===e.length&&t.every((function(t,i){return t===e[i]}))}function w(t){if(void 0!==window.TextEncoder)return(new TextEncoder).encode(t).buffer;for(var e=new Uint8Array(new ArrayBuffer(t.length)),i=0,s=t.length;i<s;i++){var n=t.charCodeAt(i);e[i]=n>255?32:n}return e.buffer}function C(t,e,i){for(var s={min:new Array(t.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(t.itemSize).fill(Number.NEGATIVE_INFINITY)},n=e;n<e+i;n++)for(var a=0;a<t.itemSize;a++){var r=t.array[n*t.itemSize+a];s.min[a]=Math.min(s.min[a],r),s.max[a]=Math.max(s.max[a],r)}return s}function k(t){return u["F"].isPowerOfTwo(t.width)&&u["F"].isPowerOfTwo(t.height)}function S(t){if(p.attributesNormalized.has(t))return!1;for(var e=new u["ob"],i=0,s=t.count;i<s;i++)if(Math.abs(e.fromArray(t.array,3*i).length()-1)>5e-4)return!1;return!0}function A(t){if(p.attributesNormalized.has(t))return p.attributesNormalized.get(t);for(var e=t.clone(),i=new u["ob"],s=0,n=e.count;s<n;s++)i.fromArray(e.array,3*s),0===i.x&&0===i.y&&0===i.z?i.setX(1):i.normalize(),i.toArray(e.array,3*s);return p.attributesNormalized.set(t,e),e}function O(t){return 4*Math.ceil(t/4)}function j(t,e){e=e||0;var i=O(t.byteLength);if(i!==t.byteLength){var s=new Uint8Array(i);if(s.set(new Uint8Array(t)),0!==e)for(var n=t.byteLength;n<i;n++)s[n]=e;return s.buffer}return t}function M(t,e){if(0!==Object.keys(t.userData).length)try{var s=JSON.parse(JSON.stringify(t.userData));if(i.includeCustomExtensions&&s.gltfExtensions){for(var n in void 0===e.extensions&&(e.extensions={}),s.gltfExtensions)e.extensions[n]=s.gltfExtensions[n],d[n]=!0;delete s.gltfExtensions}Object.keys(s).length>0&&(e.extras=s)}catch(a){}}function I(t,e){var i=!1,s={};0===e.offset.x&&0===e.offset.y||(s.offset=e.offset.toArray(),i=!0),0!==e.rotation&&(s.rotation=e.rotation,i=!0),1===e.repeat.x&&1===e.repeat.y||(s.scale=e.repeat.toArray(),i=!0),i&&(t.extensions=t.extensions||{},t.extensions["KHR_texture_transform"]=s,d["KHR_texture_transform"]=!0)}function T(t){return a.buffers||(a.buffers=[{byteLength:0}]),o.push(t),0}function E(t,e,i,s,n){var o;a.bufferViews||(a.bufferViews=[]),o=e===m.UNSIGNED_BYTE?1:e===m.UNSIGNED_SHORT?2:4;for(var l=O(s*t.itemSize*o),c=new DataView(new ArrayBuffer(l)),h=0,d=i;d<i+s;d++)for(var u=0;u<t.itemSize;u++){var p;t.itemSize>4?p=t.array[d*t.itemSize+u]:0===u?p=t.getX(d):1===u?p=t.getY(d):2===u?p=t.getZ(d):3===u&&(p=t.getW(d)),e===m.FLOAT?c.setFloat32(h,p,!0):e===m.UNSIGNED_INT?c.setUint32(h,p,!0):e===m.UNSIGNED_SHORT?c.setUint16(h,p,!0):e===m.UNSIGNED_BYTE&&c.setUint8(h,p),h+=o}var f={buffer:T(c.buffer),byteOffset:r,byteLength:l};void 0!==n&&(f.target=n),n===m.ARRAY_BUFFER&&(f.byteStride=t.itemSize*o),r+=l,a.bufferViews.push(f);var g={id:a.bufferViews.length-1,byteLength:0};return g}function D(t){return a.bufferViews||(a.bufferViews=[]),new Promise((function(e){var i=new window.FileReader;i.readAsArrayBuffer(t),i.onloadend=function(){var t=j(i.result),s={buffer:T(t),byteOffset:r,byteLength:t.byteLength};r+=t.byteLength,a.bufferViews.push(s),e(a.bufferViews.length-1)}}))}function L(t,e,s,n){var r,o={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"};if(t.array.constructor===Float32Array)r=m.FLOAT;else if(t.array.constructor===Uint32Array)r=m.UNSIGNED_INT;else if(t.array.constructor===Uint16Array)r=m.UNSIGNED_SHORT;else{if(t.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");r=m.UNSIGNED_BYTE}if(void 0===s&&(s=0),void 0===n&&(n=t.count),i.truncateDrawRange&&void 0!==e&&null===e.index){var l=s+n,c=e.drawRange.count===1/0?t.count:e.drawRange.start+e.drawRange.count;s=Math.max(s,e.drawRange.start),n=Math.min(l,c)-s,n<0&&(n=0)}if(0===n)return null;var h,d=C(t,s,n);void 0!==e&&(h=t===e.index?m.ELEMENT_ARRAY_BUFFER:m.ARRAY_BUFFER);var u=E(t,r,s,n,h),p={bufferView:u.id,byteOffset:u.byteOffset,componentType:r,count:n,max:d.max,min:d.min,type:o[t.itemSize]};return!0===t.normalized&&(p.normalized=!0),a.accessors||(a.accessors=[]),a.accessors.push(p),a.accessors.length-1}function P(t,e,s){p.images.has(t)||p.images.set(t,{});var r=p.images.get(t),o=e===u["Z"]?"image/png":"image/jpeg",c=o+":flipY/"+s.toString();if(void 0!==r[c])return r[c];a.images||(a.images=[]);var h={mimeType:o};if(i.embedImages){var d=n=n||document.createElement("canvas");d.width=Math.min(t.width,i.maxTextureSize),d.height=Math.min(t.height,i.maxTextureSize),i.forcePowerOfTwoTextures&&!k(d)&&(d.width=u["F"].floorPowerOfTwo(d.width),d.height=u["F"].floorPowerOfTwo(d.height));var f=d.getContext("2d");!0===s&&(f.translate(0,d.height),f.scale(1,-1)),f.drawImage(t,0,0,d.width,d.height),!0===i.binary?l.push(new Promise((function(t){d.toBlob((function(e){D(e).then((function(e){h.bufferView=e,t()}))}),o)}))):h.uri=d.toDataURL(o)}else h.uri=t.src;a.images.push(h);var m=a.images.length-1;return r[c]=m,m}function R(t){a.samplers||(a.samplers=[]);var e={magFilter:g[t.magFilter],minFilter:g[t.minFilter],wrapS:g[t.wrapS],wrapT:g[t.wrapT]};return a.samplers.push(e),a.samplers.length-1}function z(t){if(p.textures.has(t))return p.textures.get(t);a.textures||(a.textures=[]);var e={sampler:R(t),source:P(t.image,t.format,t.flipY)};t.name&&(e.name=t.name),a.textures.push(e);var i=a.textures.length-1;return p.textures.set(t,i),i}function N(t){if(p.materials.has(t))return p.materials.get(t);if(t.isShaderMaterial)return null;a.materials||(a.materials=[]);var e={pbrMetallicRoughness:{}};t.isMeshBasicMaterial?(e.extensions={KHR_materials_unlit:{}},d["KHR_materials_unlit"]=!0):t.isGLTFSpecularGlossinessMaterial?(e.extensions={KHR_materials_pbrSpecularGlossiness:{}},d["KHR_materials_pbrSpecularGlossiness"]=!0):t.isMeshStandardMaterial;var i=t.color.toArray().concat([t.opacity]);if(x(i,[1,1,1,1])||(e.pbrMetallicRoughness.baseColorFactor=i),t.isMeshStandardMaterial?(e.pbrMetallicRoughness.metallicFactor=t.metalness,e.pbrMetallicRoughness.roughnessFactor=t.roughness):t.isMeshBasicMaterial?(e.pbrMetallicRoughness.metallicFactor=0,e.pbrMetallicRoughness.roughnessFactor=.9):(e.pbrMetallicRoughness.metallicFactor=.5,e.pbrMetallicRoughness.roughnessFactor=.5),t.isGLTFSpecularGlossinessMaterial){e.pbrMetallicRoughness.baseColorFactor&&(e.extensions.KHR_materials_pbrSpecularGlossiness.diffuseFactor=e.pbrMetallicRoughness.baseColorFactor);var s=[1,1,1];t.specular.toArray(s,0),e.extensions.KHR_materials_pbrSpecularGlossiness.specularFactor=s,e.extensions.KHR_materials_pbrSpecularGlossiness.glossinessFactor=t.glossiness}if((t.metalnessMap||t.roughnessMap)&&t.metalnessMap===t.roughnessMap){var n={index:z(t.metalnessMap)};I(n,t.metalnessMap),e.pbrMetallicRoughness.metallicRoughnessTexture=n}if(t.map){var r={index:z(t.map)};I(r,t.map),t.isGLTFSpecularGlossinessMaterial&&(e.extensions.KHR_materials_pbrSpecularGlossiness.diffuseTexture=r),e.pbrMetallicRoughness.baseColorTexture=r}if(t.isGLTFSpecularGlossinessMaterial&&t.specularMap){var o={index:z(t.specularMap)};I(o,t.specularMap),e.extensions.KHR_materials_pbrSpecularGlossiness.specularGlossinessTexture=o}if(t.emissive){var l=t.emissive.clone().multiplyScalar(t.emissiveIntensity).toArray();if(x(l,[0,0,0])||(e.emissiveFactor=l),t.emissiveMap){var c={index:z(t.emissiveMap)};I(c,t.emissiveMap),e.emissiveTexture=c}}if(t.normalMap){var h={index:z(t.normalMap)};t.normalScale&&-1!==t.normalScale.x&&(t.normalScale.x,t.normalScale.y,h.scale=t.normalScale.x),I(h,t.normalMap),e.normalTexture=h}if(t.aoMap){var f={index:z(t.aoMap),texCoord:1};1!==t.aoMapIntensity&&(f.strength=t.aoMapIntensity),I(f,t.aoMap),e.occlusionTexture=f}t.transparent?e.alphaMode="BLEND":t.alphaTest>0&&(e.alphaMode="MASK",e.alphaCutoff=t.alphaTest),t.side===u["j"]&&(e.doubleSided=!0),""!==t.name&&(e.name=t.name),M(t,e),a.materials.push(e);var m=a.materials.length-1;return p.materials.set(t,m),m}function B(t){var e=[t.geometry.uuid];if(Array.isArray(t.material))for(var i=0,s=t.material.length;i<s;i++)e.push(t.material[i].uuid);else e.push(t.material.uuid);var n=e.join(":");if(p.meshes.has(n))return p.meshes.get(n);var r,o=t.geometry;r=t.isLineSegments?m.LINES:t.isLineLoop?m.LINE_LOOP:t.isLine?m.LINE_STRIP:t.isPoints?m.POINTS:t.material.wireframe?m.LINES:m.TRIANGLES,o.isBufferGeometry||(o=(new u["e"]).setFromObject(t));var l={},c={},h=[],d=[],f={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},g=o.getAttribute("normal");void 0===g||S(g)||o.setAttribute("normal",A(g));var v=null;for(var b in o.attributes)if("morph"!==b.substr(0,5)){var y=o.attributes[b];b=f[b]||b.toUpperCase();var x=/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/;if(x.test(b)||(b="_"+b),p.attributes.has(_(y)))c[b]=p.attributes.get(_(y));else{v=null;var w=y.array;"JOINTS_0"!==b||w instanceof Uint16Array||w instanceof Uint8Array||(v=new u["d"](new Uint16Array(w),y.itemSize,y.normalized));var C=L(v||y,o);null!==C&&(c[b]=C,p.attributes.set(_(y),C))}}if(void 0!==g&&o.setAttribute("normal",g),0===Object.keys(c).length)return null;if(void 0!==t.morphTargetInfluences&&t.morphTargetInfluences.length>0){var k=[],O=[],j={};if(void 0!==t.morphTargetDictionary)for(var I in t.morphTargetDictionary)j[t.morphTargetDictionary[I]]=I;for(i=0;i<t.morphTargetInfluences.length;++i){var T={},E=!1;for(var b in o.morphAttributes)if("position"===b||"normal"===b){y=o.morphAttributes[b][i];var D=b.toUpperCase(),P=o.attributes[b];if(p.attributes.has(_(y)))T[D]=p.attributes.get(_(y));else{var R=y.clone();if(!o.morphTargetsRelative)for(var z=0,B=y.count;z<B;z++)R.setXYZ(z,y.getX(z)-P.getX(z),y.getY(z)-P.getY(z),y.getZ(z)-P.getZ(z));T[D]=L(R,o),p.attributes.set(_(P),T[D])}}else E||(E=!0);d.push(T),k.push(t.morphTargetInfluences[i]),void 0!==t.morphTargetDictionary&&O.push(j[i])}l.weights=k,O.length>0&&(l.extras={},l.extras.targetNames=O)}var F=Array.isArray(t.material);if(F&&0===o.groups.length)return null;for(var $=F?t.material:[t.material],U=F?o.groups:[{materialIndex:0,start:void 0,count:void 0}],H=(i=0,U.length);i<H;i++){var V={mode:r,attributes:c};if(M(o,V),d.length>0&&(V.targets=d),null!==o.index){var G=_(o.index);void 0===U[i].start&&void 0===U[i].count||(G+=":"+U[i].start+":"+U[i].count),p.attributes.has(G)?V.indices=p.attributes.get(G):(V.indices=L(o.index,o,U[i].start,U[i].count),p.attributes.set(G,V.indices)),null===V.indices&&delete V.indices}var W=N($[U[i].materialIndex]);null!==W&&(V.material=W),h.push(V)}l.primitives=h,a.meshes||(a.meshes=[]),a.meshes.push(l);var Y=a.meshes.length-1;return p.meshes.set(n,Y),Y}function F(t){a.cameras||(a.cameras=[]);var e=t.isOrthographicCamera,i={type:e?"orthographic":"perspective"};return e?i.orthographic={xmag:2*t.right,ymag:2*t.top,zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near}:i.perspective={aspectRatio:t.aspect,yfov:u["F"].degToRad(t.fov),zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near},""!==t.name&&(i.name=t.type),a.cameras.push(i),a.cameras.length-1}function $(t,e){a.animations||(a.animations=[]),t=b.Utils.mergeMorphTargetTracks(t.clone(),e);for(var i=t.tracks,s=[],n=[],r=0;r<i.length;++r){var o=i[r],l=u["W"].parseTrackName(o.name),h=u["W"].findNode(e,l.nodeName),d=v[l.propertyName];if("bones"===l.objectName&&(h=!0===h.isSkinnedMesh?h.skeleton.getBoneByName(l.objectIndex):void 0),!h||!d)return null;var p,f=1,m=o.values.length/o.times.length;d===v.morphTargetInfluences&&(m/=h.morphTargetInfluences.length),!0===o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(p="CUBICSPLINE",m/=3):p=o.getInterpolation()===u["s"]?"STEP":"LINEAR",n.push({input:L(new u["d"](o.times,f)),output:L(new u["d"](o.values,m)),interpolation:p}),s.push({sampler:n.length-1,target:{node:c.get(h),path:d}})}return a.animations.push({name:t.name||"clip_"+a.animations.length,samplers:n,channels:s}),a.animations.length-1}function U(t){var e=a.nodes[c.get(t)],i=t.skeleton;if(void 0===i)return null;var s=t.skeleton.bones[0];if(void 0===s)return null;for(var n=[],r=new Float32Array(16*i.bones.length),o=0;o<i.bones.length;++o)n.push(c.get(i.bones[o])),i.boneInverses[o].toArray(r,16*o);void 0===a.skins&&(a.skins=[]),a.skins.push({inverseBindMatrices:L(new u["d"](r,16)),joints:n,skeleton:c.get(s)});var l=e.skin=a.skins.length-1;return l}function H(t){var e={};t.name&&(e.name=t.name),e.color=t.color.toArray(),e.intensity=t.intensity,t.isDirectionalLight?e.type="directional":t.isPointLight?(e.type="point",t.distance>0&&(e.range=t.distance)):t.isSpotLight&&(e.type="spot",t.distance>0&&(e.range=t.distance),e.spot={},e.spot.innerConeAngle=(t.penumbra-1)*t.angle*-1,e.spot.outerConeAngle=t.angle),void 0!==t.decay&&t.decay,t.target&&(t.target.parent!==t||0!==t.target.position.x||0!==t.target.position.y||t.target.position.z);var i=a.extensions["KHR_lights_punctual"].lights;return i.push(e),i.length-1}function V(t){a.nodes||(a.nodes=[]);var e={};if(i.trs){var s=t.quaternion.toArray(),n=t.position.toArray(),r=t.scale.toArray();x(s,[0,0,0,1])||(e.rotation=s),x(n,[0,0,0])||(e.translation=n),x(r,[1,1,1])||(e.scale=r)}else t.matrixAutoUpdate&&t.updateMatrix(),x(t.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])||(e.matrix=t.matrix.elements);if(""!==t.name&&(e.name=String(t.name)),M(t,e),t.isMesh||t.isLine||t.isPoints){var o=B(t);null!==o&&(e.mesh=o)}else if(t.isCamera)e.camera=F(t);else if(t.isDirectionalLight||t.isPointLight||t.isSpotLight)d["KHR_lights_punctual"]||(a.extensions=a.extensions||{},a.extensions["KHR_lights_punctual"]={lights:[]},d["KHR_lights_punctual"]=!0),e.extensions=e.extensions||{},e.extensions["KHR_lights_punctual"]={light:H(t)};else if(t.isLight)return null;if(t.isSkinnedMesh&&h.push(t),t.children.length>0){for(var l=[],u=0,p=t.children.length;u<p;u++){var f=t.children[u];if(f.visible||!1===i.onlyVisible){var m=V(f);null!==m&&l.push(m)}}l.length>0&&(e.children=l)}a.nodes.push(e);var g=a.nodes.length-1;return c.set(t,g),g}function G(t){a.scenes||(a.scenes=[],a.scene=0);var e={};""!==t.name&&(e.name=t.name),a.scenes.push(e);for(var s=[],n=0,r=t.children.length;n<r;n++){var o=t.children[n];if(o.visible||!1===i.onlyVisible){var l=V(o);null!==l&&s.push(l)}}s.length>0&&(e.nodes=s),M(t,e)}function W(t){var e=new u["cb"];e.name="AuxScene";for(var i=0;i<t.length;i++)e.children.push(t[i]);G(e)}function Y(t){t=t instanceof Array?t:[t];for(var e=[],s=0;s<t.length;s++)t[s]instanceof u["cb"]?G(t[s]):e.push(t[s]);e.length>0&&W(e);for(s=0;s<h.length;++s)U(h[s]);for(s=0;s<i.animations.length;++s)$(i.animations[s],t[0])}Y(t),Promise.all(l).then((function(){var t=new Blob(o,{type:"application/octet-stream"}),s=Object.keys(d);if(s.length>0&&(a.extensionsUsed=s),a.buffers&&a.buffers.length>0&&(a.buffers[0].byteLength=t.size),!0===i.binary){var n=12,r=1179937895,l=2,c=8,h=1313821514,u=5130562,p=new window.FileReader;p.readAsArrayBuffer(t),p.onloadend=function(){var t=j(p.result),i=new DataView(new ArrayBuffer(c));i.setUint32(0,t.byteLength,!0),i.setUint32(4,u,!0);var s=j(w(JSON.stringify(a)),32),o=new DataView(new ArrayBuffer(c));o.setUint32(0,s.byteLength,!0),o.setUint32(4,h,!0);var d=new ArrayBuffer(n),f=new DataView(d);f.setUint32(0,r,!0),f.setUint32(4,l,!0);var m=n+o.byteLength+s.byteLength+i.byteLength+t.byteLength;f.setUint32(8,m,!0);var g=new Blob([d,o,s,i,t],{type:"application/octet-stream"}),v=new window.FileReader;v.readAsArrayBuffer(g),v.onloadend=function(){e(v.result)}}}else if(a.buffers&&a.buffers.length>0){p=new window.FileReader;p.readAsDataURL(t),p.onloadend=function(){var t=p.result;a.buffers[0].uri=t,e(a)}}else e(a)}))}},b.Utils={insertKeyframe:function(t,e){var i,s=.001,n=t.getValueSize(),a=new t.TimeBufferType(t.times.length+1),r=new t.ValueBufferType(t.values.length+n),o=t.createInterpolant(new t.ValueBufferType(n));if(0===t.times.length){a[0]=e;for(var l=0;l<n;l++)r[l]=0;i=0}else if(e<t.times[0]){if(Math.abs(t.times[0]-e)<s)return 0;a[0]=e,a.set(t.times,1),r.set(o.evaluate(e),0),r.set(t.values,n),i=0}else if(e>t.times[t.times.length-1]){if(Math.abs(t.times[t.times.length-1]-e)<s)return t.times.length-1;a[a.length-1]=e,a.set(t.times,0),r.set(t.values,0),r.set(o.evaluate(e),t.values.length),i=a.length-1}else for(l=0;l<t.times.length;l++){if(Math.abs(t.times[l]-e)<s)return l;if(t.times[l]<e&&t.times[l+1]>e){a.set(t.times.slice(0,l+1),0),a[l+1]=e,a.set(t.times.slice(l+1),l+2),r.set(t.values.slice(0,(l+1)*n),0),r.set(o.evaluate(e),(l+1)*n),r.set(t.values.slice((l+1)*n),(l+2)*n),i=l+1;break}}return t.times=a,t.values=r,i},mergeMorphTargetTracks:function(t,e){for(var i=[],s={},n=t.tracks,a=0;a<n.length;++a){var r=n[a],o=u["W"].parseTrackName(r.name),l=u["W"].findNode(e,o.nodeName);if("morphTargetInfluences"===o.propertyName&&void 0!==o.propertyIndex){if(r.createInterpolant!==r.InterpolantFactoryMethodDiscrete&&r.createInterpolant!==r.InterpolantFactoryMethodLinear){if(r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");r=r.clone(),r.setInterpolation(u["t"])}var c,h=l.morphTargetInfluences.length,d=l.morphTargetDictionary[o.propertyIndex];if(void 0===d)throw new Error("THREE.GLTFExporter: Morph target name not found: "+o.propertyIndex);if(void 0!==s[l.uuid]){var p=r.createInterpolant(new r.ValueBufferType(1));c=s[l.uuid];for(g=0;g<c.times.length;g++)c.values[g*h+d]=p.evaluate(c.times[g]);for(g=0;g<r.times.length;g++){var f=this.insertKeyframe(c,r.times[g]);c.values[f*h+d]=r.values[g]}}else{c=r.clone();for(var m=new c.ValueBufferType(h*c.times.length),g=0;g<c.times.length;g++)m[g*h+d]=c.values[g];c.name=o.nodeName+".morphTargetInfluences",c.values=m,s[l.uuid]=c,i.push(c)}}else i.push(r)}return t.tracks=i,t}};var y=i("54c2"),_=i("6881"),x=i("054f"),w=i("5a0c"),C=i.n(w),k=i("c64e"),S=i.n(k),A={data(){return{animator:null,sceneReady:!1,camera:null,renderer:null,controls:null,group:null,allGroup:null,textureGroup:null,timeout:null,lights:[],notEdit:!1,main_material:null,outside_material:null,inside_material:null,insideCanvasTexture:null,outsideCanvasTexture:null,gildingCanvasTexture:null,bumpCanvasTexture:null,roughnessCanvasTexture:null,textureCube:null,rendering:!1,drawList:[],line_list:{},img_list:[],huabu_size:{x:0,y:0,z:0},canvas_list:{outside:{material:null,canvas:document.createElement("canvas")},inside:{material:null,canvas:document.createElement("canvas")},gilding:{material:null,canvas:document.createElement("canvas")},bump:{material:null,canvas:document.createElement("canvas")},roughness:{material:null,canvas:document.createElement("canvas")}},twidth:this.width,theight:this.height,tsize:this.size,playtime:1,intl:null,knife:{},is_inverse:!1,openRotate:!1}},props:{animationInterval:{type:Number,default:15},showRecord:{type:Boolean}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("render",["showD3Panel"])),Object(r["mapState"])(["reloadMode","knifeVersion","projectVersion"])),Object(r["mapState"])("property",["crafts"])),Object(r["mapGetters"])("render",["canIDrawInsideMap","canIDrawOutsideMap"])),Object(r["mapGetters"])("profile",["isVip"])),Object(r["mapGetters"])("project",["isCup"])),{},{modelScale(){return y["a"].modelScale(this.knife.size)},rx(){return Math.round(500*this.modelScale)},ry(){return Math.round(500*this.modelScale)},backgroundImageCanvasWidth(){return 200/h["DPI"]*this.rx},backgroundImageCanvasHeight(){return 200/h["DPI"]*this.ry}}),mounted(){this.showRecord&&this.$bus.$on("getRenderGlb",async()=>{this.$bus.$emit("emitRenderGlb",await this.exportGLB())})},methods:{async exportGLB(){const t={embedImages:!0,truncateDrawRange:!1,forceIndices:!0,binary:!0,maxTextureSize:4096,onlyVisible:!1},e=new b,i=this.knife.transform;this.modelScale;this.group.scale=new o["Vector3"](1/this.modelScale,1/this.modelScale,1/this.modelScale),this.group.position.set(i.position.x/this.modelScale,i.position.y/this.modelScale,i.position.z/this.modelScale),this.group.updateMatrix(),this.group.scale=new o["Vector3"](.01,.01,.01),this.group.position.set(.01*i.position.x,.01*i.position.y,.01*i.position.z),this.group.updateMatrix();const s=[this.group];return new Promise(n=>{e.parse(s,async t=>{const e=new Blob([t],{type:"application/octet-stream"});e.lastModifiedDate=new Date;const s=S()();e.name=s+".glb",this.group.scale=new o["Vector3"](100,100,100),this.group.position.set(100*i.position.x,100*i.position.y,100*i.position.z),this.group.updateMatrix(),this.group.scale=new o["Vector3"](this.modelScale,this.modelScale,this.modelScale),this.group.position.set(i.position.x*this.modelScale,i.position.y*this.modelScale,i.position.z*this.modelScale),this.group.updateMatrix();const a=await x["a"].putFile(e,{xapi:"glb",rename:C()().format("YYYYMMDD")+"/"+e.name,type:"glb"});a&&a.data&&a.data.url?n(a.data.url):this.$message.error("上传模型失败")},t)})},doRotate(t){this.openRotate=t},async init(){this.timeout=setInterval(()=>this.drawMapAll(),1e3),this.initRenderer(),this.initCamera(),this.initControls(),this.initScene(),this.initLight(),this.initCanvas(),this.setupTextures(),this.isCup?await this.setupSceneForCup():this.setupScene(),this.accumulateRotations(),this.sceneReady=!0,"true"===this.$route.query.showCanvas&&(localStorage.setItem("showDevCanvas","1"),this.showCanvas(!0))},showCanvas(t){const e=this.canvas_list.outside.canvas;e.style.width="100mm";const i=this.$root.knifeData.totalX/100;e.style.height=this.$root.knifeData.totalY/i+"mm",e.style.position="fixed",e.style.bottom=0,e.style.left=0,e.style.zIndex=1e4,e.style.display=t?"block":"none",e.setAttribute("name","outside-canvas"),e.setAttribute("class","J_dev_canvas"),document.body.append(e),["inside","gilding","bump","roughness"].forEach((e,i)=>{this.showCanvasOther(e,i,t)})},showCanvasOther(t,e,i){const s=this.canvas_list[t].canvas;s.style.width="64px",s.style.height="64px",s.style.position="fixed",s.style.top="60px",s.style.left=380+80*e+"px",s.style.zIndex=1e4,s.style.outline="1px solid red",s.style.display=i?"block":"none",s.setAttribute("name",t+"-canvas"),s.setAttribute("class","J_dev_canvas"),document.body.append(s)},initRenderer(){if(this.renderer)return;const t=document.getElementById("mode3d");this.renderer=new o["WebGLRenderer"]({canvas:t,antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),this.renderer.setSize(this.twidth,this.theight)},initCamera(){this.camera||(this.camera=new o["PerspectiveCamera"](45,this.twidth/this.theight,1,500),this.camera.position.set(3,8,13))},initCanvas(){const t=["inside","outside","gilding","roughness"];for(const e of t){const t=this.canvas_list[e].canvas;t.width=64,t.height=64}},initControls(){this.controls||(this.controls=new p(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.minDistance=4,this.controls.maxDistance=20)},initScene(){if(!this.scene&&(this.scene=new o["Scene"],this.$root.scene=this.scene,this.initWatermark(),!this.textureCube)){const t="https://cdn.baoxiaohe.com/envmap/",e=[t+"posx.jpg?imageView2/0/q/20",t+"negx.jpg?imageView2/0/q/20",t+"posy.jpg?imageView2/0/q/20",t+"negy.jpg?imageView2/0/q/20",t+"posz.jpg?imageView2/0/q/20",t+"negz.jpg?imageView2/0/q/20"];this.textureCube=(new o["CubeTextureLoader"]).load(e)}},initWatermark(){this.isVip?this.clearWatermark():this.showRecord?this.setWatermark():this.clearWatermark()},setWatermark(){const t=document.createElement("canvas");t.width=this.width,t.height=this.height;const e=t.getContext("2d");e.fillStyle="#F0F1F5",e.fillRect(0,0,this.width,this.height);const s=new Image;s.src=i("ac55"),s.onload=()=>{e.drawImage(s,this.width-137-20,20,137,44),this.scene.background=new o["CanvasTexture"](t)}},clearWatermark(){this.scene.background=new o["Color"]("#F0F1F5")},initLight(){if(this.lights&&this.lights.length>0)return;this.scene.add(new o["AmbientLight"](16777215,.7));const t=new o["DirectionalLight"](16777215,.2);t.position.set(-20,20,20),t.castShadow=!0,t.shadow.mapSize.width=1024,t.shadow.mapSize.height=1024;const e=new o["DirectionalLight"](16777215,.1);e.position.set(20,20,20),e.castShadow=!0,e.shadow.mapSize.width=1024,e.shadow.mapSize.height=1024,this.lights=[t,e];for(const i of this.lights)this.scene.add(i);this.initFloor()},initFloor(){if(!h["DRAW_FLOOR"])return;this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=o["PCFSoftShadowMap"];const t=new o["Mesh"](new o["PlaneBufferGeometry"](20,20,100,100),new o["MeshPhongMaterial"]({color:16777215}));t.rotation.x=-Math.PI/2,t.position.y=-.5,t.receiveShadow=!0,this.scene.add(t);const e=new o["AxesHelper"](5);this.scene.add(e);const i=new o["GridHelper"](20,20,16777215,16777215);i.material.opacity=.2,i.material.transparent=!1,i.position.y=-.5,this.scene.add(i)},animate(){this.animator=requestAnimationFrame(this.animate),this.sceneReady&&(this.renderer.render(this.scene,this.camera),this.controls.update(),this.openRotate&&(this.allGroup.rotation.y+=.005))},getExtrudeSettings(){return{steps:1,depth:this.knife.size.D/2,bevelEnabled:!1,bevelThickness:1,bevelSize:1,bevelOffset:0,bevelSegments:1}},async setupSceneForCup(){this.allGroup||(this.allGroup=new o["Group"],this.allGroup.name="container"),this.group=new o["Group"],this.group.name="allGroup";const t=this.$root.projectData.size_option,e=this.$root.projectData.cate.size_options,i=e.find(e=>e.sizeName==t),s=i.glbFile,n=new d["a"],a=await n.loadAsync(s),r=a.scene.children.filter(t=>"Mesh"===t.type),l=r.some(t=>t.name.includes("outside")),c=r.filter(t=>t.name.startsWith("main")),h=a.scene.getObjectByName("outside"),u="贴图",p=l?c:r.filter(t=>t.name!==u),f=l?h:a.scene.getObjectByName(u);p.forEach(t=>{t.material.envMapIntensity=1,t.material.envMap=this.textureCube,t.material.transmission&&t.material.transmission>0&&(t.material.transparent=!0)}),this.outside_material&&(this.outside_material.map.flipY=!1,this.outside_material.metalnessMap.flipY=!1,this.outside_material.roughnessMap.flipY=!1,this.outside_material.metalness=f.material.metalness,this.outside_material.roughness=f.material.roughness,this.outside_material.transparent=f.material.transparent,this.outside_material.side=f.material.side,this.outside_material.opacity=f.material.opacity,this.outside_material.depthFunc=f.material.depthFunc,this.outside_material.depthTest=f.material.depthTest,this.outside_material.depthWrite=f.material.depthWrite,f.material=this.outside_material),[...p,f].forEach(t=>{this.group.add(t)});const{totalX:m,totalY:g}=this.$root.knifeData,v=new o["BoxHelper"](this.group,16737844);v.visible=!1,v.geometry.computeBoundingBox();const b=v.geometry.boundingBox,_={L:Math.abs(b.max.x-b.min.x),W:Math.abs(b.max.z-b.min.z),H:Math.abs(b.max.y-b.min.y)};this.allGroup.remove(this.allGroup.children[0]),this.allGroup.add(this.group);const x=y["a"].modelScale(_);this.allGroup.scale.set(x,x,x),this.scene.add(this.allGroup),this.huabu_size={x:m,y:g,z:0}},setupScene(){this.allGroup||(this.allGroup=new o["Group"],this.allGroup.name="container");const t=this.getExtrudeSettings(),e=this.knife.faces;this.group=new o["Group"],this.group.name="allGroup";const i={x:[],y:[],z:[]},s=this.knife.transform;for(const n in e){const s=this.filterSvgPath(e[n].dlist,"Shape");if(e[n].holes)for(const t of e[n].holes){const e=this.filterSvgPath(t,"Path");s.holes.push(e)}const a=new o["ExtrudeBufferGeometry"](s,t),r=new o["Mesh"](a,this.outside_material);r.receiveShadow=!1,r.castShadow=!0,r.name=e[n].name,this.group.add(r);const l=a.attributes.position.array;for(const t in l)t%3==0?i.x.push(l[t]):t%3==1?i.y.push(l[t]):t%3==2&&i.z.push(l[t])}this.group.rotation.set(s.rotate.x,s.rotate.y,s.rotate.z,"XYZ"),this.group.updateMatrix(),this.group.scale=new o["Vector3"](this.modelScale,this.modelScale,this.modelScale),this.group.position.set(s.position.x*this.modelScale,s.position.y*this.modelScale,s.position.z*this.modelScale),this.allGroup.remove(this.allGroup.children[0]),this.allGroup.add(this.group),this.scene.add(this.allGroup),this.huabu_size={x:Math.max.apply(null,i.x)-Math.min.apply(null,i.x),y:Math.max.apply(null,i.y)-Math.min.apply(null,i.y),z:Math.max.apply(null,i.z)-Math.min.apply(null,i.z)};for(const n of this.knife.folds){if(n.path)continue;const e=new o["CatmullRomCurve3"]([new o["Vector3"]((n.x1-n.x2)/2,(n.y1-n.y2)/2,.01),new o["Vector3"]((n.x2-n.x1)/2,(n.y2-n.y1)/2,.01)]),i=e.getPoints(2),s=new o["WireframeGeometry"];s.vertices=i;const a=new o["LineBasicMaterial"]({color:16777215,opacity:1,transparent:!0});if("x"===n.name)continue;const r=new o["Mesh"](s,a);r.name=n.name,n.rotate?r.position.set((n.x1+n.x2)/2,(n.y1+n.y2)/2,this.knife.size.D):r.position.set((n.x1+n.x2)/2,(n.y1+n.y2)/2,0),this.line_list[n.name]=r,this.group.getObjectByName(n.name.split("_")[0]).add(r),r.add(this.group.getObjectByName(n.name.split("_")[1])),this.group.getObjectByName(n.name.split("_")[1]).position.set(-(n.x1+n.x2)/2,-(n.y1+n.y2)/2,0),r.rotation.set(0,0,0);for(const l in n.name.split("_"))if(void 0==this.group.getObjectByName(n.name.split("_")[l]+".inside")){const e=this.group.getObjectByName(n.name.split("_")[l]).geometry;this.uv_revise("outside",e);const i=this.uv_revise("inside",e.clone()),s=new o["Mesh"](i,this.inside_material);s.name=n.name.split("_")[l]+".inside",0==l?(s.position.z=t.depth,this.group.getObjectByName(n.name.split("_")[l]).add(s)):1==l&&(s.position.set(-(n.x1+n.x2)/2,-(n.y1+n.y2)/2,t.depth),r.add(s))}}for(const n of e){const t=n.name;if(void 0!==this.group.getObjectByName(t+".inside"))continue;const e=this.group.getObjectByName(t).geometry;this.uv_revise("outside",e);const i=this.uv_revise("inside",e.clone()),s=new o["Mesh"](i,this.inside_material);s.name=t+".inside",s.position.z=this.getExtrudeSettings().depth,this.group.getObjectByName(t).add(s)}},uv_revise(t,e){const i=e.attributes.uv.array;for(const s in i)"outside"==t?i[s]=s%2==0?i[s]/this.huabu_size.x:1-i[s]/this.huabu_size.y:"inside"==t&&s%2==0&&(i[s]=1-i[s]);return e},drawMap(t){this.drawList.push(t)},async doDrawMap(t){if(!this.canIDrawInsideMap&&"inside"===t)return!1;if(!this.canIDrawOutsideMap&&"outside"===t)return!1;const e=this.canvas_list[t].canvas;let i=1;this.$route.query.quality&&(i=this.$route.query.quality/100);const s=this.rx*i,n=this.ry*i;e.width=this.huabu_size.x*s,e.height=this.huabu_size.y*n;const a=s,r=n,o=e.getContext("2d");"inside"!==t&&"outside"!==t||await y["a"].drawBackground(o,e.width,e.height,"url("+this.$root.projectData.science_image+")",[0,0],[1,1],{rect:!0,shadow:!1,repeat:!0,backgroundImageCanvasWidth:this.backgroundImageCanvasWidth,backgroundImageCanvasHeight:this.backgroundImageCanvasHeight});let l="",c="#ffffff";"inside"===t?(l=this.$root.projectData.insideFaceBackground,c=this.$root.projectData.inside_background):"outside"===t?(l=this.$root.projectData.faceBackground,c=this.$root.projectData.background):"gilding"===t?c="#ffff00":"bump"===t?c="rgb(128,128,128)":"roughness"===t&&(c="#008000"),c&&await y["a"].drawBackground(o,e.width,e.height,c,[0,0],[1,1],{rect:!0,shadow:!1,repeat:!1,backgroundImageCanvasWidth:this.backgroundImageCanvasWidth,backgroundImageCanvasHeight:this.backgroundImageCanvasHeight}),"inside"===t&&y["a"].ctxScale(o,this.knife.totalX*a,0,-1,1),y["a"].drawFace(o,l,this.knife.faces,[a,r]),"inside"===t&&y["a"].ctxScale(o,this.knife.totalX*a,0,-1,1);const h=[a,r];"true"===this.$route.query.showBleed&&"outside"===t&&y["a"].drawBleeding(o,this.$root.knifeData.bleeds,null,[-this.$root.projectData.bleedline*h[0],-this.$root.projectData.bleedline*h[1]],0,0,"#ff0000",h);let d=[];d="outside"===t||"gilding"===t||"bump"===t||"roughness"===t?this.$root.projectData.designData:this.$root.projectData.insideDesignData;let u=null;return"gilding"!==t&&"bump"!==t&&"roughness"!==t||(u=t),await y["a"].drawMaterials(o,d,h,[0,0],{mapType:u,craft:this.crafts}),"gilding"===t?this.canvas_list.outside.material.metalnessMap.needsUpdate=!0:"bump"===t||("roughness"===t?this.canvas_list.outside.material.roughnessMap.needsUpdate=!0:this.canvas_list[t].material.map.needsUpdate=!0),this.$store.commit("render/setCanvasReady",t),!0},async drawMapAll(){if(!this.showD3Panel)return;if(this.rendering||!this.drawList.length||!this.canIDrawOutsideMap||!this.canIDrawInsideMap)return;this.rendering=!0;const t=this.drawList.filter((function(t,e,i){return i.indexOf(t)==e}));this.drawList=[],await Promise.all(["outside","inside"].filter(e=>t.includes(e)).map(t=>this.doDrawMap(t))).catch(t=>{}),await Promise.all(["gilding","bump","roughness"].filter(e=>t.includes(e)).map(t=>this.doDrawMap(t))).catch(t=>{}),this.rendering=!1},filterSvgPath(t,e){const i=new o[e];for(const s in t)if(t[s])switch(t[s].mtd){case"M":i.moveTo(t[s].x,t[s].y);break;case"L":i.lineTo(t[s].x,t[s].y);break;case"Q":i.quadraticCurveTo(t[s].cx,t[s].cy,t[s].x,t[s].y);break;case"A":_["a"].parseArcCommand(i,t[s].rx,t[s].ry,t[s].ang,t[s].arc,t[s].dir,{x:t[s-1].x,y:t[s-1].y},{x:t[s].x,y:t[s].y});break;case"Z":i.closePath()}return i},getMaterialSettings:y["a"].getMaterialSettings,convertBase64UrlToBlob(t){const e=window.atob(t.split(",")[1]),i=new ArrayBuffer(e.length),s=new Uint8Array(i);for(let n=0;n<e.length;n++)s[n]=e.charCodeAt(n);return new Blob([i],{type:"image/png"})},async screenshotWindow(t,e,i,s){const n=this.renderer.getSize().clone(),a=this.renderer.domElement;this.camera.position.set(t,e,i),this.renderer.setSize(s,s),this.renderer.render(this.scene,this.camera);const r=a.toDataURL("image/webp");return this.renderer.setSize(n.x,n.y),await this.readImg(r)},async readImg(t){return new Promise((e,i)=>{const s=new Image;s.src=t,s.onload=()=>{e(s)}})},getOldAnimation(t,e){for(let i=e-1;i>=0;i--){const e=this.knife.animation.animations[i].filter(e=>e.name===t);if(e.length>0)return e[0]}return null},accumulateRotations(){const t=this.knife.animation.animations;for(const e in t){const i=t[e];for(const t of i){const i=this.getOldAnimation(t.name,e);t.initialRotate=i?i.rotate+(i.initialRotate||0):0}}},async doAction(t=0){return 0===t?this.resetModal():this.doAnimate(t)},rotateLine(t,e){const i=new o["Vector3"](t.vector.x,t.vector.y,t.vector.z).normalize();this.line_list[t.name].setRotationFromAxisAngle(i,e)},translateFace(t,e){const i=this.group.getObjectByName(t.name),s=new o["Vector3"](t.vector.x,t.vector.y,t.vector.z).normalize();i.translateOnAxis(s,e)},async doAnimate(t){const e=parseInt(t/1e3),i=t-1e3*e,s=this.knife.animation.animations;if(e>=s.length)return;for(let a=0;a<e;a++){const t=s[a];for(const e of t)"rotate"===e.action&&this.rotateLine(e,(e.initialRotate+e.rotate)*Math.PI/180)}const n=s[e];for(const a of n)if("rotate"===a.action){const t=i/1e3*a.rotate;this.rotateLine(a,(a.initialRotate+t)*Math.PI/180)}else if("translate"===a.action){this.translateFace(a,-1*(a.prevTranslate||0));const t=i/1e3*a.translate;this.translateFace(a,t),a.prevTranslate=t}},async resetModal(){for(const t of Object.keys(this.line_list)){const e=this.line_list[t];e.rotation.set(0,0,0)}}},watch:{showRecord(){this.initWatermark()},isVip(){this.initWatermark()},width(t){this.twidth=t,this.initWatermark(),this.sceneReady&&(this.camera.aspect=this.twidth/this.theight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.twidth,this.theight))},height(t){this.initWatermark(),this.theight=t,this.sceneReady&&(this.camera.aspect=this.twidth/this.theight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.twidth,this.theight))},async knifeVersion(){this.$emit("get-step",this.knife.step),this.reloadModel()}},beforeDestroy(){this.$bus.$off("getRenderGlb"),Object(l["j"])(),this.textureCube&&this.textureCube.dispose(),this.renderer&&(this.renderer.dispose(),this.renderer.forceContextLoss(),this.renderer.domElement=null,this.renderer=null),this.timeout&&(clearInterval(this.timeout),this.timeout=null),this.animator&&cancelAnimationFrame(this.animator),this.$root.modeReady=!1}},O=i("bea0"),j=i.n(O),M={name:"mode3d",mixins:[A],computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])(["insideCanvasVersion","insideMaterialVersion","outsideCanvasVersion","outsideMaterialVersion","changeTarget"])),Object(r["mapState"])("render",["insideMaterialPending","outsideMaterialPending"])),data(){return{mediaRecorder:null,startTime:0}},props:{width:{type:Number,default:500},height:{type:Number,default:500},size:{type:Object}},watch:{insideCanvasVersion(){this.sceneReady&&this.throttleDrawInsideMap()},outsideCanvasVersion(){this.sceneReady&&(this.throttleDrawOutsideMap(),this.throttleDrawBumpMap(),this.throttleDrawGildingMap(),this.throttleDrawRoughnessMap())},insideMaterialVersion(){this.sceneReady&&this.setupTextures()},outsideMaterialVersion(){this.sceneReady&&this.setupTextures()},insideMaterialPending(t){0===t.size&&this.drawMap("inside")},outsideMaterialPending(t){0===t.size&&this.drawMap("outside")}},mounted(){this.animate(),this.reloadModel(),this.$route.query.type?this.notEdit=!0:window.addEventListener("beforeunload",this.beforeunload),this.watchScreenshot(),this.$bus.$on("envLightIntensityChange",t=>{this.outside_material.envMapIntensity=t,this.outside_material.needsUpdate=!0,this.inside_material.envMapIntensity=t,this.inside_material.needsUpdate=!0}),this.recordStart(),this.recordEnd()},beforeDestroy(){window.removeEventListener("beforeunload",this.beforeunload),this.notEdit||this.changeTarget.length,this.$bus.$off("envLightIntensityChange"),this.$bus.$off("screenshot-callback"),this.$store.dispatch("editor/setEditorTempMaterial",null),this.$store.commit("editor/toggleCurrentFace",null),this.$store.dispatch("saveModeData",null),this.$store.dispatch("saveIsInside",0),this[c["D"]](),this.$bus.$off("recorderStart"),this.$bus.$off("recorderEnd")},methods:Object(a["a"])(Object(a["a"])({},Object(r["mapMutations"])([c["D"]])),{},{forDebug(){},recordStart(){this.$bus.$on("recorderStart",()=>{const t=this.renderer.domElement.captureStream(60);this.mediaRecorder=new MediaRecorder(t);let e=[];this.mediaRecorder.ondataavailable=t=>{e.push(t.data)},this.mediaRecorder.onstop=()=>{const t=Date.now()-this.startTime,i=new Blob(e,{type:"video/webm"});j()(i,t,t=>{this.$bus.$emit("recorderOver",t)})},this.startTime=Date.now(),this.mediaRecorder.start()})},recordEnd(){this.$bus.$on("recorderEnd",()=>{this.mediaRecorder.stop()})},watchScreenshot(){this.$bus.$on("screenshot",t=>{this.$nextTick(async()=>{const t=[{x:2.91,y:7.62,z:6.4,size:360},{x:.22,y:6.54,z:8.04,size:120},{x:-3.85,y:6.31,z:7.27,size:120},{x:-.9,y:.27,z:10.328,size:120}];let e=[];for(let i of t)e.push(await this.screenshotWindow(i.x/.667,i.y/.667,i.z/.667,i.size));this.$bus.$emit("screenshot-callback",e)})})},throttleDrawInsideMap(){return this.drawMap("inside")},throttleDrawOutsideMap(){return this.drawMap("outside")},throttleDrawGildingMap(){return this.drawMap("gilding")},throttleDrawBumpMap(){return this.drawMap("bump")},throttleDrawRoughnessMap(){return this.drawMap("roughness")},beforeunload(t){this.changeTarget.length>0&&(t.returnValue="",t.preventDefault())},async reloadModel(){this.knife=this.$root.knifeData,this.$emit("get-step",this.knife.animation.animations.length),this.line_list={},this.group&&this.scene.remove(this.group),this.init(),this.throttleDrawInsideMap(),this.throttleDrawOutsideMap(),this.throttleDrawBumpMap(),this.throttleDrawGildingMap(),this.throttleDrawRoughnessMap(),this.$emit("ready",!0)},init_main_material_for_cup(){if(!this.isCup)return;const t=(new o["TextureLoader"]).load(this.$root.projectData.science_image);t.wrapS=o["RepeatWrapping"],t.wrapT=o["RepeatWrapping"],t.repeat.set(3,3),this.main_material?(this.main_material.map=t,this.main_material.needsUpdate=!0):this.main_material=new o["MeshLambertMaterial"]({color:16777215,map:t,fog:!1,envMapIntensity:1}),this.main_material.name="mainMaterial"},setupTextures(){const t=this.getMaterialSettings(this.$root.projectData.membrane_id,this.$root.projectData.membrane_name);if(this.outsideCanvasTexture&&this.insideCanvasTexture)return this.outside_material.metalness=t.metalness,this.outside_material.roughness=t.roughness,this.outside_material.needsUpdate=!0,this.outsideCanvasTexture.needsUpdate=!0,this.insideCanvasTexture.needsUpdate=!0,this.gildingCanvasTexture&&(this.gildingCanvasTexture.needsUpdate=!0),void(this.bumpCanvasTexture&&(this.bumpCanvasTexture.needsUpdate=!0));this.outsideCanvasTexture||(this.outsideCanvasTexture=new o["CanvasTexture"](this.canvas_list.outside.canvas),this.outsideCanvasTexture.name="outsideCanvasTexture",this.gildingCanvasTexture=new o["CanvasTexture"](this.canvas_list.gilding.canvas),this.gildingCanvasTexture.name="gildingCanvasTexture",this.roughnessCanvasTexture=new o["CanvasTexture"](this.canvas_list.roughness.canvas),this.roughnessCanvasTexture.name="roughnessCanvasTexture",this.bumpCanvasTexture=new o["CanvasTexture"](this.canvas_list.bump.canvas),this.bumpCanvasTexture.name="bumpCanvasTexture",this.outsideCanvasTexture.anisotropy=4,this.outside_material=new o["MeshStandardMaterial"]({color:16777215,map:this.outsideCanvasTexture,metalness:t.metalness,metalnessMap:this.gildingCanvasTexture,envMap:this.textureCube,roughness:t.roughness,roughnessMap:this.roughnessCanvasTexture,fog:!1,envMapIntensity:1}),this.outside_material.name="outsideMaterial",this.canvas_list.outside.material=this.outside_material),this.insideCanvasTexture||(this.insideCanvasTexture=new o["CanvasTexture"](this.canvas_list.inside.canvas),this.insideCanvasTexture.name="insideCanvasTexture",this.insideCanvasTexture.anisotropy=4,this.insideCanvasTexture.center=new o["Vector2"](.5,.5),this.inside_material=new o["MeshStandardMaterial"]({map:this.insideCanvasTexture,fog:!1,envMapIntensity:1,envMap:this.textureCube}),this.inside_material.name="insideMaterial",this.canvas_list.inside.material=this.inside_material),this.textureToScene(),this.scene.add(this.textureGroup)},textureToScene(){this.textureGroup||(this.textureGroup=new o["Group"],this.textureGroup.name="textureGroup"),this.addTexture("gildingCanvasTexture"),this.addTexture("roughnessCanvasTexture"),this.addTexture("bumpCanvasTexture")},addTexture(t){const e=new o["BoxBufferGeometry"](.1,.1,.1),i=new o["MeshStandardMaterial"]({map:this[t]});let s=new o["Mesh"](e,i);s.name=t,s.visible=!1,this.textureGroup.add(s)}})},I=M,T=(i("9ecb"),i("2877")),E=Object(T["a"])(I,s,n,!1,null,"0c5f06b2",null);e["default"]=E.exports},"92ff":function(t,e,i){t.exports=i.p+"editor-assets/img/left-menu-enterprise.f3461df4.svg"},9300:function(t,e,i){"use strict";var s=i("bf09"),n=i.n(s);n.a},9392:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiCAYAAAA+stv/AAACK0lEQVRYR+2WPWgUQRiGv29zdwFBbAQhCIoWQQLpxMafTiuxEZtgozbZzWXuOL3ZSmK3c15yN+vuoqDYBJtURiws1SbYiU20UBSiYpADLRIwu68Yyd4WCtk7Mofg1jM8D+87880yDfjjAfPp3xcoVxun4gSPCNjNTBvEViVs18PtJtt3ArZQIQF2CmS+F2l5xZiAI7wlgI5tAS1mJ9AyMiZgT6tnRDjxG8hxkWlMa/namEDZ94eTt+tjm/gSPgcN+XG78M09eRbvxNr/An0l4Aglmejwr2pgWY/D1rWHeWvqWcARzZPAxtMtIDN9CLV7wKCAdwOg610BXgy1PGdS4DlAx9MBRFYl8OvaiMDMzJ1dq51OB6BSKjBE40HLfWVEoFxtnI7j5EkaP9FqoOU+ZoYRAUcoD4DMPEALkZYX8sJ7noS28F4Q6Gi3f54MfHnbiICU3p7va/yVCENpBYXiaDhXe2NEoFy9eTaO48Vu/LQSaXd/L/CeKnCEagGoZATmI+1eNCZgC/WSgPFM/5cCX943IlCrNfeu/Yi/ECEd4VwsHAxnr743ImBX1HlKsNC9//wu9OWhXuG5z4AjvAigycz9z/UD+ifRXK+hLdQyAaNp/0wTgXYfGElgqq5GknWsZGEla3ik3a5+MiJgV9QEJZjPzP/l0HeP9APPdQZsoe4ScDnTfxRp6RgTmJpuCHDSBKjARN+sAp+5NSeXjAn0C/rb/ly3YCckBi7wEwUdwyOtg5eBAAAAAElFTkSuQmCC"},9393:function(t,e,i){"use strict";var s=i("5530"),n=i("b6c6"),a=i("5880");e["a"]={methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(a["mapMutations"])("profile",[n["c"],n["c"]])),Object(a["mapActions"])("profile",[n["g"],n["f"]])),{},{showPersonalVip(){if(!this.isLogged)return this[n["c"]](!0);this[n["g"]]()},showBusinessVip(){if(!this.isLogged)return this[n["c"]](!0);this[n["f"]]()},hideVipModal(){this[n["d"]](!1)}}),computed:Object(s["a"])(Object(s["a"])({},Object(a["mapGetters"])("profile",["isLogged"])),Object(a["mapState"])("profile",["vip","vipConfig"]))}},"939b":function(t,e,i){},"93e6":function(t,e,i){"use strict";var s=i("8707").Buffer,n=i("334a").Transform,a=i("3fb5");function r(t,e){if(!s.isBuffer(t)&&"string"!==typeof t)throw new TypeError(e+" must be a string or a buffer")}function o(t){n.call(this),this._block=s.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}a(o,n),o.prototype._transform=function(t,e,i){var s=null;try{this.update(t,e)}catch(n){s=n}i(s)},o.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(i){e=i}t(e)},o.prototype.update=function(t,e){if(r(t,"Data"),this._finalized)throw new Error("Digest already called");s.isBuffer(t)||(t=s.from(t,e));var i=this._block,n=0;while(this._blockOffset+t.length-n>=this._blockSize){for(var a=this._blockOffset;a<this._blockSize;)i[a++]=t[n++];this._update(),this._blockOffset=0}while(n<t.length)i[this._blockOffset++]=t[n++];for(var o=0,l=8*t.length;l>0;++o)this._length[o]+=l,l=this._length[o]/4294967296|0,l>0&&(this._length[o]-=4294967296*l);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var i=0;i<4;++i)this._length[i]=0;return e},o.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=o},9423:function(t,e,i){const{defaultArgs:s,baseOptions:n}=i("c4b1"),{setLogging:a,setCustomLogger:r,log:o}=i("908e"),l=i("f1c3"),c=i("1bd14"),{defaultOptions:h,getCreateFFmpegCore:d}=i("b8df"),{version:u}=i("67c5"),p=Error("ffmpeg.wasm is not ready, make sure you have completed load().");t.exports=(t={})=>{const{log:e,logger:i,progress:f,...m}={...n,...h,...t};let g=null,v=null,b=null,y=!1,_=f;const x=t=>{"FFMPEG_END"===t&&null!==b&&(b(),b=null,y=!1)},w=({type:t,message:e})=>{o(t,e),l(e,_),x(e)},C=async()=>{if(o("info","load ffmpeg-core"),null!==g)throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");{o("info","loading ffmpeg-core");const{createFFmpegCore:t,corePath:e,workerPath:i,wasmPath:s}=await d(m);g=await t({mainScriptUrlOrBlob:e,printErr:t=>w({type:"fferr",message:t}),print:t=>w({type:"ffout",message:t}),locateFile:(t,e)=>{if("undefined"!==typeof window){if("undefined"!==typeof s&&t.endsWith("ffmpeg-core.wasm"))return s;if("undefined"!==typeof i&&t.endsWith("ffmpeg-core.worker.js"))return i}return e+t}}),v=g.cwrap("proxy_main","number",["number","number"]),o("info","ffmpeg-core loaded")}},k=()=>null!==g,S=(...t)=>{if(o("info","run ffmpeg command: "+t.join(" ")),null===g)throw p;if(y)throw Error("ffmpeg.wasm can only run one command at a time");return y=!0,new Promise(e=>{const i=[...s,...t].filter(t=>0!==t.length);b=e,v(...c(g,i))})},A=(t,...e)=>{if(o("info",`run FS.${t} ${e.map(t=>"string"===typeof t?t:`<${t.length} bytes binary file>`).join(" ")}`),null===g)throw p;{let s=null;try{s=g.FS[t](...e)}catch(i){throw"readdir"===t?Error(`ffmpeg.FS('readdir', '${e[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`):"readFile"===t?Error(`ffmpeg.FS('readFile', '${e[0]}') error. Check if the path exists`):Error("Oops, something went wrong in FS operation.")}return s}},O=t=>{_=t},j=t=>{r(t)};return a(e),r(i),o("info","use ffmpeg.wasm v"+u),{setProgress:O,setLogger:j,setLogging:a,load:C,isLoaded:k,run:S,FS:A}}},9453:function(t,e,i){},9459:function(t,e,i){},"946d":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABBUlEQVRYR+2UvwrCMBCH7zIEwVkX30AcfQIddS6F/nkAER9CcHd1bchgX0AcdHF0dfIR9A0K7UnAQhFtaxyKcBmTXH4f3x1BaHhhw/nAAGyADbCB/zCglDoJIVppmk7CMLxV/Z5KqTkirhDR8TxvX3a/lgGt9ZmIhgBwybJsXAahtV4Q0RoACACmvu/vfgaIoqgrhDgAwKAMohhORLMgCDZVtmoZMI+8QkgpR47j3PMAm3BTWxugDMI2/GsAUxDHcSdJkmPeDkTcEtHS9Lyu9mJbvjKQF75AmO3MJtzKwBuIvm34TwDPmWhLKXuu616rpv3TuVULbMPe1TEAG2ADbIANNG7gAeP4hyGVEHX7AAAAAElFTkSuQmCC"},9476:function(t,e,i){"use strict";var s=i("7a89"),n=i.n(s);n.a},"94d1":function(t,e,i){"use strict";var s=i("b202"),n=i.n(s);n.a},"953b":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.$root.knifeData.folds?s("svg",{staticClass:"editor-foreground avoid-clicks",staticStyle:{"z-index":"10"},style:{transform:"scale("+(t.isInside?-1:1)+",1)",width:t.$root.knifeData.totalX+100+"mm",height:t.$root.knifeData.totalY+100+"mm"},attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[s("defs",[s("pattern",{attrs:{id:"svginnerPatternNullBg",patternUnits:"userSpaceOnUse",height:15/t.scale,width:15/t.scale}},[s("image",{attrs:{x:"0",y:"0",height:15/t.scale,width:15/t.scale,"xlink:href":i("5a38")}})]),s("pattern",{attrs:{id:"svginnerPattern",patternUnits:"userSpaceOnUse",height:"200",width:"200"}}),s("pattern",{attrs:{id:"svginnerPattern2",patternUnits:"userSpaceOnUse",height:t.$root.knifeData.totalX,width:t.$root.knifeData.totalY}},[s("image",{attrs:{x:"0",y:"0",width:t.$root.knifeData.totalX,height:t.$root.knifeData.totalY,"xlink:href":t.$root.projectData.science_image,preserveAspectRatio:"none"}})])]),s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"1mm",height:"1mm",overflow:"visible",viewBox:"0 0 1 1",x:"40mm",y:"40mm"}},[t.bleed?s("g",[s("path",{staticClass:"svg-cutting",attrs:{transform:"translate("+(10-parseInt(t.$root.projectData.bleedline))+","+(10-parseInt(t.$root.projectData.bleedline))+")",d:t.$root.knifeData.bleedsForSvg}})]):t._e(),-1!=t.active?s("g",[t._l(t.$root.knifeData.facesForSvg,(function(e,i){return[t.active!=i?s("path",{key:"path"+i,staticClass:"svg-face-mask",style:{fill:"#e1e1e1"},attrs:{transform:t.globalTransform,"stroke-width":.25/t.scale,d:e.d,id:e.name}}):t._e()]}))],2):t._e(),s("g",{attrs:{id:"svgContainerCutting"}},[s("path",{staticClass:"svg-cutting",attrs:{transform:t.globalTransform,"stroke-width":.25/t.scale,stroke:t.fillBack===t.defColor?"#e1e1e1":t.defColor,d:t.$root.knifeData.cutsForSvg}})]),s("g",{attrs:{id:"svgContainerFolding",transform:t.globalTransform}},t._l(t.$root.knifeData.folds,(function(e,i){return s("g",{key:i},[e.path?t._e():s("line",{attrs:{"stroke-width":.25/t.scale,stroke:t.fillBack===t.defColor?"#e1e1e1":t.defColor,"stroke-dasharray":t.dashStyle,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}}),e.path?s("path",{attrs:{stroke:t.fillBack===t.defColor?"#e1e1e1":t.defColor,"stroke-width":.25/t.scale,"stroke-dasharray":t.dashStyle,fill:"none",d:e.d}}):t._e()])})),0),s("g",{attrs:{id:"svgContainerHoles"}},t._l(t.$root.knifeData.holesForSvg,(function(e,i){return s("path",{key:"holes"+i,style:{fill:"#ffffff"},attrs:{transform:t.globalTransform,"stroke-width":.25/t.scale,stroke:t.fillBack.toLowerCase()===t.defColor?"#e1e1e1":t.defColor,d:e}})})),0),s("g",{directives:[{name:"show",rawName:"v-show",value:t.showAxiasRemark,expression:"showAxiasRemark"}],staticClass:"clickable axiasRemark",attrs:{id:"svgAxiasRemark",transform:"translate(10, 10)"}},[t._l(t.$root.knifeData.sizeArrowData,(function(e,i){return[s("arrow-pair",{key:"a"+i,attrs:{p1:e.p1,p2:e.p2,"line-name":e.lineName,"line-length":e.lineLength,"current-axias-remark":t.currentAxiasRemark},on:{click:function(i){return t.hightlightSelection(e.tpointer.text)}}})]}))],2)])]):t._e()},n=[],a=(i("1276"),i("5530")),r=i("5880"),o=i("65d7"),l={components:{ArrowPair:o["default"]},props:{scale:{type:Number,default:1},bleed:{type:Boolean,default:!0},defColor:{type:String,default:""},fillBack:{type:String,default:""},active:{type:Number,default:-1}},data(){return{axiasRemarkColor:"#bbbbbb",activeRemarkColor:"#ff0000"}},methods:{hightlightSelection(t){t=t.split("=")[0];const e={L:"length",W:"width",H:"height"};if(e[t]){this.$store.commit("editor/setCurrentAxiasRemark",e[t]);const i=document.querySelector(`#${e[t]}-remark`);i&&i.focus()}}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])(["isInside"])),Object(r["mapState"])("editor",["showAxiasRemark","currentAxiasRemark"])),{},{globalTransform(){return"translate(10,10)"},dashStyle(){return`${.75/this.scale} ${.5/this.scale}`}})},c=l,h=(i("8975"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,"8226f16c",null);e["default"]=d.exports},"95af":function(t,e,i){},"95c0":function(t,e,i){var s=i("697e");(function(){for(var t in s){if(null==s||!s.hasOwnProperty(t)||"default"===t||"__esModule"===t)return;e[t]=s[t]}})();var n=i("1a50");(function(){for(var t in n){if(null==n||!n.hasOwnProperty(t)||"default"===t||"__esModule"===t)return;e[t]=n[t]}})(),i("8ee0"),i("f170")},"95ea":function(t,e,i){},"95ef":function(t,e,i){},9628:function(t,e,i){},9639:function(t,e,i){"use strict";i.r(e);i("b680"),i("2532"),i("5319"),i("ddb0");var s=i("5530"),n=i("750b"),a=i("ed08"),r=i("87a0"),o=i("365c"),l=i("55c2"),c=i("ab1d"),h=i("bf60"),d=i("2ebb"),u=i("bd85"),p=i("7018"),f=i("ab68"),m=i("a9ff"),g=i("831f"),v=i("d70d"),b=i("a257"),y=i("3ee8"),_=i.n(y),x=i("494a"),w=(i("7fef"),i("ada6")),C=i("ad9f"),k=i("70ce"),S=i("08f1");const A=10,O=o["FONT_LIST"].map(t=>({key:t,value:t})),j=i("af93"),M=i("3cbe");e["default"]=Object(n["b"])({props:{design:{type:[Object,Object],default:()=>({})},opts:{type:[Object,Object],default:()=>({})},multiple:{type:Boolean,default:!1}},setup(t,e){const y=Object(n["a"])(()=>{var e;return null===(e=t.design)||void 0===e?void 0:e.style}),I=Object(n["a"])(()=>"img"===t.design.type),T=Object(n["a"])(()=>"font"===t.design.type),E=Object(n["a"])(()=>/\.svg$/.test(t.design.src)),D=e.vuex.mapState("property",["crafts"]),L=e.vuex.mapState("table",["selected","previewStyle"]),P=e.vuex.mapState("editor",["targetDesigns","currentWorkingGroup"]),{multiSelected:R}=e.vuex.mapGetters("editor",["multiSelected"]),z=e.vuex.mapGetters("table",["selectedCoord"]),N=(t,...i)=>{e.emit("change",t,...i)},B=t=>{e.emit("silentChange",t)},F=Object(n["a"])(()=>{if(void 0!==t.design.locked)return t.design.locked;const e=P.targetDesigns.value.find(t=>!1===t.locked);return!e}),$=()=>JSON.parse(JSON.stringify(t.design)),U=t=>Object(a["H"])(t).mm2pt(),H=t=>Object(a["H"])(t).pt2mm(),V=t=>Object(a["H"])(t).pt2px(),G=t=>Object(a["H"])(t).px2pt(),W=t=>Object(a["H"])(t).px2mm(),Y=Object(n["j"])(!1),q=Object(n["a"])(()=>{var e,i;return(null===(e=t.opts.fills)||void 0===e?void 0:e.length)?t.opts.fills:null===(i=t.design.fills)||void 0===i?void 0:i.map((t,e)=>Object(s["a"])({id:e},t))}),X=Object(n["a"])(()=>{var e,i,s;const[n,r]=z.selectedCoord.value;return Object.assign({},(null===(e=t.design.table)||void 0===e?void 0:e.defaultStyle)||{},Object(a["q"])(n)&&Object(a["q"])(r)&&(null===(i=t.design.table)||void 0===i||null===(s=i.cells[n])||void 0===s?void 0:s[r])||{})}),Q={functional:!0,render:t=>{var e;return t("div",{directives:[{name:"show",value:(null===(e=q.value)||void 0===e?void 0:e.length)>10}],class:"fo-gray text-center text-pointer",on:{click:()=>{Y.value=!Y.value}}},[Y.value?"收起":"显示更多",t("a-icon",{attrs:{type:Y.value?"up":"down",color:"rgba(0,0,0,.25)"},class:"ml-4"})])}},Z=t=>Y.value||t<A,K=[{key:"LEFT",url:i("f7e9"),tip:"居左",active:()=>"left"===X.value.textAlign,onClick(){const t=$();t.style&&(L.selected.value.forEach(([e,i])=>{t.table.cells[e][i].textAlign="left"}),N(t))}},{key:"CENTER",url:i("5211"),tip:"居中",active:()=>!X.value.textAlign||"center"===X.value.textAlign,onClick(){const t=$();t.style&&(L.selected.value.forEach(([e,i])=>{t.table.cells[e][i].textAlign="center"}),N(t))}},{key:"RIGHT",url:i("2e61"),tip:"居右",active:()=>"right"===X.value.textAlign,onClick(){const t=$();t.style&&(L.selected.value.forEach(([e,i])=>{t.table.cells[e][i].textAlign="right"}),N(t))}}],J=[{key:"TOP",url:i("1d57"),tip:"居顶",active:()=>"top"===X.value.verticalAlign,onClick(){const t=$();t.style&&(L.selected.value.forEach(([e,i])=>{t.table.cells[e][i].verticalAlign="top"}),N(t))}},{key:"MIDDLE",url:i("c812"),tip:"居中",active:()=>!X.value.verticalAlign||"middle"===X.value.verticalAlign,onClick(){const t=$();t.style&&(L.selected.value.forEach(([e,i])=>{t.table.cells[e][i].verticalAlign="middle"}),N(t))}},{key:"BOTTOM",url:i("716d"),tip:"居底",active:()=>"bottom"===X.value.verticalAlign,onClick(){const t=$();t.style&&(L.selected.value.forEach(([e,i])=>{t.table.cells[e][i].verticalAlign="bottom"}),N(t))}}],tt=Object(n["a"])(()=>t.opts.isTable&&L.previewStyle.value.find(e=>{var i;return e.id===(null===(i=t.design.table.previewStyle)||void 0===i?void 0:i.id)})||{}),et=({xstart:i,ystart:s,xend:n,yend:a,color:r})=>{e.bus.$emit("table-event"+t.design.uuid,{target:{action:"line",color:r,xstart:i,ystart:s,xend:n,yend:a}})},it=[{key:"ANGLE",url:i("0193"),tip:"行高",slider:!0,min:.1,max:5,step:.1,slideValue:()=>{if(!y.value)return 1.2;let{fontSize:t,lineHeight:e}=y.value;return e||(e=t),Math.round(e/t*100)/100},slideTitle:"行高",disabled:()=>F.value,onSlideChange:t=>{const e=$();if(!e.style)return;const{fontSize:i,height:s,lineHeight:n}=e.style;t*=i;const r=Math.round(s/n),o=t;e.style.lineHeight=o,e.style.height=r*o,e.height=Object(a["H"])(r*o).mm2px(),N(e)}},{key:"ALIGN",url:i("7b2b"),tip:"对齐",stateAble:!0,disabled:()=>F.value,menus:[{title:"居左",value:r["a"].TEXT_ALIGN_LEFT,icon:"align-left"},{title:"居中",value:r["a"].TEXT_ALIGN_CENTER,icon:"align-center"},{title:"居右",value:r["a"].TEXT_ALIGN_RIGHT,icon:"align-right"}]},{key:"BOLD",url:i("b35b"),tip:"加粗",active:()=>{var t;return"bold"===(null===(t=y.value)||void 0===t?void 0:t.fontWeight)},onClick(){if(F.value)return;const t=$();t.style&&(t.style.fontWeight="bold"===t.style.fontWeight?"normal":"bold",N(t))},disabled:()=>F.value},{key:"BIAS",url:i("9392"),tip:"斜体",active:()=>{var t;return"italic"===(null===(t=y.value)||void 0===t?void 0:t.fontStyle)},onClick(){if(F.value)return;const t=$();if(!t.style)return;const e="italic"===t.style.fontStyle;t.style.fontStyle=e?"normal":"italic",N(t)},disabled:()=>F.value}],st=Object(n["a"])(()=>{var e,i;return null===(e=U((t.opts.isTable?X.value.fontSize:null===(i=y.value)||void 0===i?void 0:i.fontSize)||12))||void 0===e?void 0:e.toFixed(1)}),nt=Object(n["a"])(()=>{var e;return(t.opts.isTable?X.value.color:null===(e=y.value)||void 0===e?void 0:e.color)||"rgba(0,0,0,1)"}),at=Object(n["a"])(()=>{let e=null;var i;t.opts.isTable?e=parseInt(null===(i=X.value.fontFamily)||void 0===i?void 0:i.replace("f",""))||o["SIYUAN_FONT_ID"]:t.design&&"font"===t.design.type&&(e=t.design.id||o["SIYUAN_FONT_ID"]);return e}),rt=[{key:"COPY_AND_PASTE",url:()=>F.value?i("d4dd"):i("e9a4"),tip:"复制并粘贴",disabled:()=>F.value,onClick:()=>{e.bus.$emit("shortcut",{action:r["a"].COPY_AND_PASTE})}},{key:"LAYER",url:()=>F.value||R.value?i("754b"):i("9bfc"),tip:"层级",disabled:()=>F.value||R.value,menus:[{title:"移到顶层",value:r["a"].TOP},{title:"上移一层",value:r["a"].MOVE_UP},{title:"下移一层",value:r["a"].MOVE_DOWN},{title:"移到底层",value:r["a"].DOWN}]},{key:"MIRROR",url:()=>F.value?i("1bd1"):i("1f26"),tip:"翻转",disabled:()=>F.value||R.value||"group"===t.design.type||Boolean(t.design&&P.currentWorkingGroup.value),menus:[{title:"水平翻转",value:r["a"].ROTATE_X},{title:"垂直翻转",value:r["a"].ROTATE_Y}]},{key:"LOCK",url:()=>F.value?i("d96b"):i("98a9"),tip:()=>F.value?"解锁":"锁定",active:()=>!!F.value,onClick:()=>{const t=$();t.style&&(t.locked=!F.value,N(t)),e.bus.$emit("shortcut",{action:F.value?r["a"].UNLOCK:r["a"].LOCK})}}],ot=t=>t.map((t,i)=>{var s,o,c,h,d;return Object(n["c"])("div",{class:"box mt-8",key:i,directives:[{name:"show",value:!(null===(s=t.hidden)||void 0===s?void 0:s.call(t))}],on:{click:()=>{var e,i;if(!(null===(e=t.disabled)||void 0===e?void 0:e.call(t))){if(t.init){const e=$();if(!e.style)return;const i=e.style[t.field]===t.active;e.style[t.field]=i?t.init:t.active,N(e)}null===(i=t.onClick)||void 0===i||i.call(t)}}}},[Object(n["c"])(l["default"],{key:t.key,attrs:{slider:t.slider,min:t.min,max:t.max,color:t.color,slideValue:null===(o=t.slideValue)||void 0===o?void 0:o.call(t),slideTitle:t.slideTitle,step:null!==(c=t.step)&&void 0!==c?c:1,tip:Object(a["J"])(t.tip),active:null===(h=t.active)||void 0===h?void 0:h.call(t),disabled:null===(d=t.disabled)||void 0===d?void 0:d.call(t),stateAble:t.stateAble,menus:t.menus},on:{slideChange:e=>{var i;return null===(i=t.onSlideChange)||void 0===i?void 0:i.call(t,e)},menuChange:t=>{Object.keys(r["a"]).includes(t.value)&&e.bus.$emit("shortcut",{action:t.value})}}},[Object(n["c"])(S["a"],{attrs:{src:Object(a["J"])("function"===typeof t.url?t.url():t.url),alt:""},style:"width:18px;height:18px"})])])}),lt={functional:!0,render:t=>{var e;return t("div",{class:"mt-12"},[t(d["default"],{attrs:{title:"工艺"}},[t("a-select",{attrs:{value:(null===(e=y.value)||void 0===e?void 0:e.craft)||"",disabled:F.value},style:{width:"144px"},on:{change:t=>{const e=$();e.style&&(e.style.craft=t,N(e))}}},[[{key:"",value:"无"},...D.crafts.value.map(t=>({key:t.id,value:t.name}))].map(e=>t("a-select-option",{key:e.key,attrs:{value:e.key}},[e.value]))])])])}};return()=>{var i,s,o,l,S,A,D,P,R,z,U,Y,X;return Object(n["c"])("div",{class:"editor-property mx-16"},[Object(n["c"])("div",{class:"table-actions",directives:[{name:"show",value:"table"===t.design.type}]},[Object(n["c"])("div",{class:" mt-24"},[Object(n["c"])("a-button",{attrs:{block:!0,type:"primary"},on:{click:()=>{e.bus.$emit("table-event"+t.design.uuid,{target:{action:"edit"}})}}},["编辑表格内容"])]),Object(n["c"])("a-divider",{style:"margin: 24px 0 0 0"}),Object(n["c"])("div",{class:" mt-24"},[Object(n["c"])(d["default"],{attrs:{title:"表格样式"}}),Object(n["c"])("a-popover",{attrs:{placement:"left",overlayClassName:"table-preview-style-container"}},[Object(n["c"])("div",{class:"choose-style flex mt-16 flex-center item-center text-pointer"},[Object(n["c"])("img",{class:"table-contain",attrs:{src:tt.value.bigImage,alt:""}}),Object(n["c"])("img",{class:"select-icon",attrs:{src:_.a,alt:""}})]),Object(n["c"])("div",{class:"table-preview-style flex item-center flex-between flex-wrap",slot:"content"},[L.previewStyle.value.map((i,s)=>{var a;return Object(n["c"])("div",{key:s,class:"table-preview-item text-pointer "+((null===(a=t.design.table)||void 0===a?void 0:a.previewStyle.id)===i.id?" active":""),on:{click:()=>{const s=$();s.style&&(s.table.previewStyle={id:i.id,row:i.row,column:i.column},s.table.borders=[],N(s),e.bus.$emit("table-event"+t.design.uuid,{target:{action:"previewStyle"}}))}}},[Object(n["c"])("img",{attrs:{src:i.image,alt:""}})])})])])])]),Object(n["c"])("div",{directives:[{name:"show",value:"barcode"===t.design.type}]},[Object(n["c"])("div",{class:" my-20"},[Object(n["c"])(u["default"],{on:{click:()=>{e.bus.$emit("edit-barcode",t.design)}}},["编辑条形码内容"])]),Object(n["c"])("a-divider")]),Object(n["c"])("div",{directives:[{name:"show",value:"qrcode"===t.design.type}]},[Object(n["c"])("div",{class:" my-20"},[Object(n["c"])(u["default"],{on:{click:()=>{e.bus.$emit("edit-qrcode",t.design)}}},["编辑二维码内容"])]),Object(n["c"])("a-divider")]),Object(n["c"])("div",{directives:[{name:"show",value:t.opts.showResize}],class:"flex item-center mt-16 "},[Object(n["c"])(m["default"],{attrs:{disabled:F.value,autoSelect:!0,value:Math.round(null!==(i=null===(s=y.value)||void 0===s?void 0:s.width)&&void 0!==i?i:100),unit:"mm",suffix:"宽",min:1,max:2*e.root.knifeData.totalX},on:{confirm:t=>{const e=$();if(!e.style)return;const i=e.style.width/e.style.height;t=Number.parseInt(t),e.style.width=t,e.bg.width=t,e.style.lengthLock||(e.style.height=t/i,e.bg.height=t/i),N(e,"resize")}}}),Object(n["c"])("img",{attrs:{src:(null===(o=y.value)||void 0===o?void 0:o.lengthLock)?M:j,alt:""},class:"text-pointer",on:{click:()=>{const t=$();t.style&&(t.style.lengthLock=!t.style.lengthLock,N(t))}},style:{width:"24px",height:"24px",flex:"none"}}),Object(n["c"])(m["default"],{attrs:{disabled:F.value,value:Math.round(null!==(l=null===(S=y.value)||void 0===S?void 0:S.height)&&void 0!==l?l:100),autoSelect:!0,unit:"mm",suffix:"高",min:1,max:2*e.root.knifeData.totalY},on:{confirm:t=>{t=Number.parseInt(t);const e=$();if(!e.style)return;const i=e.style.width/e.style.height;e.style.height=t,e.style.lengthLock||(e.style.width=i*t),N(e)}}})]),Object(n["c"])("div",{class:"mt-16",directives:[{name:"show",value:t.opts.showCutout}]},[Object(n["c"])(w["default"],{attrs:{design:t.design},on:{silentChange:t=>{B(t)}}})]),Object(n["c"])("div",{class:"mt-16",directives:[{name:"show",value:I.value&&!E.value}]},[Object(n["c"])(C["default"])]),Object(n["c"])("div",{directives:[{name:"show",value:t.opts.showColor}],class:"colors-list"},[Object(n["c"])("div",[Object(n["c"])("ul",{class:"helper-list flex items-center mt-16 flex-between",directives:[{name:"show",value:t.opts.isTable}]},[Object(n["c"])("li",["背景"]),Object(n["c"])("li",{class:"flex item-center flex-between"},[Object(n["c"])("span",{class:"flex-none"},["边框"]),Object(n["c"])(x["default"],{attrs:{unit:"pt",value:Math.round(G(null===(A=t.design.table)||void 0===A?void 0:A.borderWidth))||1,align:"right"},on:{confirm:t=>{const e=$();if(e.style&&e.table){const i=e.table.borderWidth||V(1),s=V(t);e.table.borderWidth=s;const n=W(s-i);e.table.cancelUpdate=!0,e.style.width+=n,e.style.height+=n,N(e)}}}})])]),Object(n["c"])("div",{class:((null===(D=q.value)||void 0===D?void 0:D.length)<6?"color-fills":"color-fills-container flex-wrap")+" flex items-center mt-16"},[null===(P=q.value)||void 0===P?void 0:P.map((e,i)=>Z(i)&&!(e.color.indexOf("url")>-1)&&Object(n["c"])(p["a"],{attrs:{disabled:F.value,value:e.color||e,cmyk:"",optionalColors:t.opts.optionalColors},key:i,on:{confirm:e=>{const s=$();if(s.style)if("table"===s.type)if(0===i)L.selected.value.forEach(([t,i])=>{Object(a["q"])(t)&&Object(a["q"])(i)&&(s.table.cells[t][i].background=e.rgba)}),N(s);else{const i=L.selected.value;if(1===L.selected.value.length){const[e,s]=L.selected.value[0],n=t.design.table.cells[e][s];n.merge&&n.mergeConfig&&i.push([n.mergeConfig.xend,n.mergeConfig.yend])}const[s,n,a,r]=i.reduce(([t,e,i,s],[n,a])=>[Math.min(t,n),Math.max(e,n),Math.min(i,a),Math.max(s,a)],[1e6,0,1e6,0]);et({xstart:s,xend:n+1,ystart:a,yend:r+1,color:e.rgba})}else s.fills[i].color=e.rgba,N(s)},history:t=>{}}}))]),t.opts.isTable?Object(n["c"])("div",[Object(n["c"])("ul",{class:"helper-list flex items-center mt-16 flex-between"},[Object(n["c"])("li",["圆角"])]),Object(n["c"])("div",{class:(q.value.length<6?"color-fills":"color-fills-container flex-wrap")+" flex items-center mt-16"},[Object(n["c"])(g["default"],{attrs:{outerNumber:null!==(R=null===(z=t.design.style)||void 0===z?void 0:z.borderRadius)&&void 0!==R?R:0,min:0,unit:"°",step:1,customClass:"border-radius-input"},on:{change:e=>{if(t.design.style){const t=$();if(!t.style)return;t.style.borderRadius=parseInt(e),N(t)}}}})])]):"",Object(n["c"])(Q)])]),Object(n["c"])("div",{directives:[{name:"show",value:t.opts.showOpacity}],class:"mt-12"},[Object(n["c"])(d["default"],{attrs:{title:"透明度"}},[Object(n["c"])(h["default"],{attrs:{value:null!==(U=null===(Y=y.value)||void 0===Y?void 0:Y.opacity)&&void 0!==U?U:100,min:1,disabled:F.value},on:{confirm:t=>{e.emit("opacity",t)}}})])]),Object(n["c"])("div",{class:"mt-16 ",directives:[{name:"show",value:"qrcode"===t.design.type}]},[Object(n["c"])(v["default"],{attrs:{design:t.design},on:{useIcon:t=>{const e=$();e.style&&(e.qricon=t,N(e))}}})]),Object(n["c"])("div",{class:"font-container mt-16 "},[Object(n["c"])("div",{directives:[{name:"show",value:t.opts.showFont}]},[Object(n["c"])(d["default"],{attrs:{title:"字体"}},[Object(n["c"])(f["default"],{attrs:{value:at.value,disabled:F.value},on:{change:t=>{const e=$();if(e.style){if("table"===e.type)L.selected.value.forEach(([i,s])=>{e.table.cells[i][s].fontFamily="f"+t.id,e.table.cells[i][s].fontSrc=t.file_path});else{if("{}"===JSON.stringify(e))return;e.style.fontFamily="f"+t.id,e.id=t.id,e.src=t.file_path,e.example=t.example,e.thumb=t.thumb_path}N(e)}}}})]),Object(n["c"])(d["default"],{attrs:{title:"字号"},class:"mt-12",directives:[{name:"show",value:t.opts.showFontSize}]},[Object(n["c"])(c["default"],{attrs:{fields:O,unit:"pt",value:st.value,disabled:F.value,handleChange:t=>{const e=$();if(!e.style)return;const i=H(t);if("table"===e.type)L.selected.value.forEach(([t,s])=>{e.table.cells[t][s].fontSize=i});else{const{fontSize:t,width:s,lineHeight:n,height:a}=e.style,r=i/t;e.style.lineHeight=r*n,e.style.height=r*a,e.style.width=r*s,e.style.fontSize=i}N(e)}}}),Object(n["c"])("div",{class:"box ml-16"},[Object(n["c"])(p["a"],{attrs:{disabled:F.value,cmyk:null===(X=y.value)||void 0===X?void 0:X.cmyk,value:nt.value},on:{confirm:t=>{const e=$();e.style&&("table"===e.type?L.selected.value.forEach(([i,s])=>{e.table.cells[i][s].color=t.rgba}):(e.style.color=t.rgba,e.style.cmyk=t.cmyk),N(e))}}})])])]),t.opts.showCraft&&!t.opts.isTable&&Object(n["c"])(lt),t.opts.showMultipleLayer&&Object(n["c"])(b["default"],{on:{opacity:t=>{}}}),Object(n["c"])("div",{directives:[{name:"show",value:t.opts.showFont&&!t.opts.isTable}]},[Object(n["c"])("div",{class:"flex flex-between mt-16",style:"flex-wrap:wrap;",directives:[{name:"show",value:t.opts.showFontSize}]},[ot(it)])]),t.opts.isTable?Object(n["c"])("div",{class:"mt-16"},[Object(n["c"])(d["default"],{attrs:{title:"文字对齐"}}),Object(n["c"])("div",{class:"flex item-center flex-wrap flex-between"},[ot(K)]),Object(n["c"])("div",{class:"flex item-center flex-wrap flex-between"},[ot(J)])]):""]),Object(n["c"])(k["default"],{directives:[{name:"show",value:T.value}],attrs:{data:t.design}}),Object(n["c"])("a-divider",{directives:[{name:"show",value:!0}],style:"margin: 24px 0 0 0"}),Object(n["c"])("div",{class:"py-10"},[Object(n["c"])("div",{class:"flex",style:"flex-wrap:wrap; justify-content: space-between"},[ot(rt)]),Object(n["c"])("div",{class:"mt-12"},[Object(n["c"])("a-button",{attrs:{disabled:F.value,block:!0},style:"line-height:1.499",on:{click:()=>e.bus.$emit("shortcut",{action:r["a"].DELETE})}},["删除"])])])])}}})},9650:function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("ca9b"),a=i("f4b1");i("bafb");const r="https://cdn.baoxiaohe.com/user-materials/949c3744-6b1e-4d9f-a6df-cdc46a97c43b.jpg",o="//cdn.baoxiaohe.com/user-materials/22694954-b715-4ad0-8b2e-2edf80dc2ed4.jpg";e["default"]=Object(s["b"])({setup(t,e){const i=e.vuex.mapState("order",["detail"]),l=Object(s["j"])(30),c=Object(s["j"])(null),h=()=>{c.value&&(clearInterval(c.value),c.value=null,e.router.push("/orders"))};return Object(s["f"])(()=>{c.value=setInterval(()=>{0===l.value?h():l.value=l.value-1},1e3)}),()=>{var t,e,c,h;return Object(s["c"])("div",{class:"success-wrap"},[Object(s["c"])(n["default"]),Object(s["c"])("div",{class:"success-container"},[Object(s["c"])("div",{class:"success-header py-34"},[Object(s["c"])("a-breadcrumb",[Object(s["c"])("a-breadcrumb-item",[Object(s["c"])("a",{attrs:{href:"/"}},["首页"])]),Object(s["c"])("a-breadcrumb-item",[Object(s["c"])("a",{attrs:{href:"/orders"}},["我的订单"])]),Object(s["c"])("a-breadcrumb-item",[Object(s["c"])("a",["当前位置"])])])]),Object(s["c"])("div",{class:"success-body"},[Object(s["c"])("div",{class:"description flex item-center flex-center"},[Object(s["c"])("div",{class:"left flex item-start flex-center"},[Object(s["c"])("div",{class:"success"},[Object(s["c"])("a-icon",{attrs:{type:"check"},style:{fontWeight:"bold"}})]),Object(s["c"])("div",{class:"pay-status ml-20"},[Object(s["c"])("div",["支付成功"]),Object(s["c"])("div",{class:"desc mt-20"},["感谢您的购买！ 系统将在",Object(s["c"])("span",{class:"theme"},[l.value,"s"]),"后为您跳转到订单页。"]),Object(s["c"])("div",{class:"sum mt-24 flex item-center"},[Object(s["c"])("span",["¥"]),Object(s["c"])("span",{class:"theme ml-10"},[null===(t=i.detail.value)||void 0===t?void 0:t.total_fee])]),Object(s["c"])("div",{class:"content mt-24"},[Object(s["c"])("span",{class:"title"},["客服联系电话："]),Object(s["c"])("span",{class:"desc"},["85121608"]),Object(s["c"])("br",{class:"mt-8"}),Object(s["c"])("span",{class:"title"},["客服微信电话："]),Object(s["c"])("span",{class:"desc"},["usho123456"])])])]),Object(s["c"])("div",{class:"right"},[Object(s["c"])("div",{class:"content"},[Object(s["c"])("span",{class:"title"},["订单编号："]),Object(s["c"])("span",{class:"desc"},[null===(e=i.detail.value)||void 0===e?void 0:e.order_no]),Object(s["c"])("br",{class:"mt-8"}),Object(s["c"])("span",{class:"title"},["商品名称："]),Object(s["c"])("span",{class:"desc"},[null===(c=i.detail.value)||void 0===c||null===(h=c.project)||void 0===h?void 0:h.project_name])]),Object(s["c"])("div",{class:"flex mt-34 item-center"},[Object(s["c"])("img",{attrs:{src:r,alt:""},style:{width:"124px",height:"124px"}}),Object(s["c"])("div",{class:"ml-20"},[Object(s["c"])("div",["扫一扫，关注微信，"]),Object(s["c"])("div",["第一时间了解最新订单资讯"])])])])])]),Object(s["c"])("img",{attrs:{src:o,alt:""},class:"sawtooth"})]),Object(s["c"])(a["default"])])}}})},9680:function(t,e){function i(t,e,i,s,n,a,r){if(0===n)return!1;var o=n,l=0,c=t;if(r>e+o&&r>s+o||r<e-o&&r<s-o||a>t+o&&a>i+o||a<t-o&&a<i-o)return!1;if(t===i)return Math.abs(a-t)<=o/2;l=(e-s)/(t-i),c=(t*s-i*e)/(t-i);var h=l*a-r+c,d=h*h/(l*l+1);return d<=o/2*o/2}e.containStroke=i},9690:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"for-cup-wrap"},[i("div",{staticClass:"title mb-15"},[t._v(" 选择尺寸 "),i("a-tooltip",{attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"title"},slot:"title"},[t._v("尺寸说明")]),i("i",{staticClass:"iconfont c-primary f-20 relative t-2"},[t._v("")])])],1),t._l(t.size_options,(function(e,s){return i("a-tooltip",{key:s,staticClass:"item flex flex-between",class:{cur:e.sizeName==t.form.size_option},attrs:{placement:"left"}},[i("div",{staticClass:"size-item flex flex-between",on:{click:function(i){return t.onChooseSize(e)}}},[i("div",[t._v(" "+t._s(e.shortDesc)+" ")]),i("div",[t._v(" "+t._s(e.unit)+" ")])]),i("template",{slot:"content"},[t._v(t._s(e.fullDesc))])],2)})),i("div",{staticClass:"line mb-24 mt-16"}),i("a-button",{staticClass:"ml-auto",attrs:{block:"",type:"primary",disabled:!t.formOk},on:{click:t.onSubmit}},[i("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"mr-4",attrs:{type:"loading",color:"#fff"}}),t._v(" 确认调整 ")],1)],2)},n=[],a=i("5530"),r=i("5880"),o={data(){return{loading:!1,form:{size_option:"",science_id:0},available_material_list:[{id:8,name:"白卡纸",image:"//cdn.baoxiaohe.com/94e8078a-9931-42cd-97ed-57883bd88085.jpg",thickness:.5,outless:.2,inless:.3,can_set:1,def_line_color:"#999999",group_name:"卡纸",min_thickness:.2,max_thickness:.5},{id:36,name:"牛皮纸",image:"//yun.baoxiaohe.com/admin-materials/e59ed5fb-6e73-4708-90e2-b6e49926ed8f.jpg",thickness:.5,outless:.2,inless:.3,can_set:1,def_line_color:"#FFFFFF",group_name:"default",min_thickness:.2,max_thickness:.6}]}},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["project_data","knife_data"])),{},{size_options(){return this.project_data.cate.size_options},formOk(){const{size_option:t,science_id:e}=this.form;return!(!t||!e)}}),mounted(){this.init_form()},methods:{onChooseMaterial(t){this.form.material_id=t},onChooseSize(t){this.form.size_option=t.sizeName},goBack(){this.$emit("close")},init_form(){const{size_option:t,science_id:e}=this.project_data;this.form=Object.assign({},this.form,{size_option:t,science_id:e})},onSubmit(){this.loading=!0;const{size_option:t,science_id:e}=this.form,i=this.project_data.id,s={type:"knife",editType:"",id:i,project_id:i,science_id:e,size_option:t};this.$http.put("/api/v2/projects",s).then(i=>{if(200===i.code){const i=this.available_material_list.find(t=>t.id===e);Object.assign(this.project_data,{size_option:t,science_id:e,science_image:i.image,science_name:i.name,def_line_color:i.def_line_color}),this.$bus.$emit("design/refresh",{name:"knife_info"}),this.goBack()}else this.$message.error(i.msg);this.loading=!1})}}},l=o,c=(i("b2ac"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,"949f4180",null);e["default"]=h.exports},"96a5":function(t,e,i){"use strict";function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function n(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){a(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function l(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}var c=i("1c35"),h=c.Buffer,d=i(3),u=d.inspect,p=u&&u.custom||"inspect";function f(t,e,i){h.prototype.copy.call(t,e,i)}t.exports=function(){function t(){r(this,t),this.head=null,this.tail=null,this.length=0}return l(t,[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";var e=this.head,i=""+e.data;while(e=e.next)i+=t+e.data;return i}},{key:"concat",value:function(t){if(0===this.length)return h.alloc(0);var e=h.allocUnsafe(t>>>0),i=this.head,s=0;while(i)f(i.data,e,s),s+=i.data.length,i=i.next;return e}},{key:"consume",value:function(t,e){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):i=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,i=1,s=e.data;t-=s.length;while(e=e.next){var n=e.data,a=t>n.length?n.length:t;if(a===n.length?s+=n:s+=n.slice(0,t),t-=a,0===t){a===n.length?(++i,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=n.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(t){var e=h.allocUnsafe(t),i=this.head,s=1;i.data.copy(e),t-=i.data.length;while(i=i.next){var n=i.data,a=t>n.length?n.length:t;if(n.copy(e,e.length-t,0,a),t-=a,0===t){a===n.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=n.slice(a));break}++s}return this.length-=s,e}},{key:p,value:function(t,e){return u(this,n({},e,{depth:0,customInspect:!1}))}}]),t}()},"96cf":function(t,e,i){var s=function(t){"use strict";var e,i=Object.prototype,s=i.hasOwnProperty,n="function"===typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(E){l=function(t,e,i){return t[e]=i}}function c(t,e,i,s){var n=e&&e.prototype instanceof g?e:g,a=Object.create(n.prototype),r=new M(s||[]);return a._invoke=S(t,i,r),a}function h(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(E){return{type:"throw",arg:E}}}t.wrap=c;var d="suspendedStart",u="suspendedYield",p="executing",f="completed",m={};function g(){}function v(){}function b(){}var y={};y[a]=function(){return this};var _=Object.getPrototypeOf,x=_&&_(_(I([])));x&&x!==i&&s.call(x,a)&&(y=x);var w=b.prototype=g.prototype=Object.create(y);function C(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function i(n,a,r,o){var l=h(t[n],t,a);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"===typeof d&&s.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,r,o)}),(function(t){i("throw",t,r,o)})):e.resolve(d).then((function(t){c.value=t,r(c)}),(function(t){return i("throw",t,r,o)}))}o(l.arg)}var n;function a(t,s){function a(){return new e((function(e,n){i(t,s,e,n)}))}return n=n?n.then(a,a):a()}this._invoke=a}function S(t,e,i){var s=d;return function(n,a){if(s===p)throw new Error("Generator is already running");if(s===f){if("throw"===n)throw a;return T()}i.method=n,i.arg=a;while(1){var r=i.delegate;if(r){var o=A(r,i);if(o){if(o===m)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(s===d)throw s=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);s=p;var l=h(t,e,i);if("normal"===l.type){if(s=i.done?f:u,l.arg===m)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(s=f,i.method="throw",i.arg=l.arg)}}}function A(t,i){var s=t.iterator[i.method];if(s===e){if(i.delegate=null,"throw"===i.method){if(t.iterator["return"]&&(i.method="return",i.arg=e,A(t,i),"throw"===i.method))return m;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var n=h(s,t.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,m;var a=n.arg;return a?a.done?(i[t.resultName]=a.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,m):a:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,m)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(t){if(t){var i=t[a];if(i)return i.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function i(){while(++n<t.length)if(s.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=e,i.done=!0,i};return r.next=r}}return{next:T}}function T(){return{value:e,done:!0}}return v.prototype=w.constructor=b,b.constructor=v,v.displayName=l(b,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,o,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},C(k.prototype),k.prototype[r]=function(){return this},t.AsyncIterator=k,t.async=function(e,i,s,n,a){void 0===a&&(a=Promise);var r=new k(c(e,i,s,n),a);return t.isGeneratorFunction(i)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},C(w),l(w,o,"Generator"),w[a]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){while(e.length){var s=e.pop();if(s in t)return i.value=s,i.done=!1,i}return i.done=!0,i}},t.values=I,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var i in this)"t"===i.charAt(0)&&s.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function n(s,n){return o.type="throw",o.arg=t,i.next=s,n&&(i.method="next",i.arg=e),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var l=s.call(r,"catchLoc"),c=s.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=t,r.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),j(i),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var s=i.completion;if("throw"===s.type){var n=s.arg;j(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,s){return this.delegate={iterator:I(t),resultName:i,nextLoc:s},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=s}catch(n){Function("r","regeneratorRuntime = r")(s)}},"96e1":function(t,e,i){},"971a":function(t,e,i){},"976d":function(t,e,i){},"97ac":function(t,e,i){"use strict";var s=i("72f9"),n=i.n(s);n.a},"97f1":function(t,e,i){"use strict";var s=i("3744"),n=i.n(s);n.a},9825:function(t,e,i){t.exports=i.p+"editor-assets/img/right-w.a8a85203.svg"},9850:function(t,e,i){var s=i("401b"),n=i("1687"),a=s.applyTransform,r=Math.min,o=Math.max;function l(t,e,i,s){i<0&&(t+=i,i=-i),s<0&&(e+=s,s=-s),this.x=t,this.y=e,this.width=i,this.height=s}l.prototype={constructor:l,union:function(t){var e=r(t.x,this.x),i=r(t.y,this.y);this.width=o(t.x+t.width,this.x+this.width)-e,this.height=o(t.y+t.height,this.y+this.height)-i,this.x=e,this.y=i},applyTransform:function(){var t=[],e=[],i=[],s=[];return function(n){if(n){t[0]=i[0]=this.x,t[1]=s[1]=this.y,e[0]=s[0]=this.x+this.width,e[1]=i[1]=this.y+this.height,a(t,t,n),a(e,e,n),a(i,i,n),a(s,s,n),this.x=r(t[0],e[0],i[0],s[0]),this.y=r(t[1],e[1],i[1],s[1]);var l=o(t[0],e[0],i[0],s[0]),c=o(t[1],e[1],i[1],s[1]);this.width=l-this.x,this.height=c-this.y}}}(),calculateTransform:function(t){var e=this,i=t.width/e.width,s=t.height/e.height,a=n.create();return n.translate(a,a,[-e.x,-e.y]),n.scale(a,a,[i,s]),n.translate(a,a,[t.x,t.y]),a},intersect:function(t){if(!t)return!1;t instanceof l||(t=l.create(t));var e=this,i=e.x,s=e.x+e.width,n=e.y,a=e.y+e.height,r=t.x,o=t.x+t.width,c=t.y,h=t.y+t.height;return!(s<r||o<i||a<c||h<n)},contain:function(t,e){var i=this;return t>=i.x&&t<=i.x+i.width&&e>=i.y&&e<=i.y+i.height},clone:function(){return new l(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},l.create=function(t){return new l(t.x,t.y,t.width,t.height)};var c=l;t.exports=c},9890:function(t,e,i){"use strict";var s=i("e34a"),n=i.n(s);n.a},"98a9":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiCAYAAAA+stv/AAAB+klEQVRYR+2XsWsTYRjGn+dStQ2UQlHBQXBwEC26VNpJEQQFwUn/h5q0uTTWXMZsXq7WeGlzOuniKi6OighOogiiTi4SFKRQBcVqzOWRE1Oq1uudJAThvungvnuf3/u89/K9H9HnxT7rIzaAZdkjn75wSsJpEHsBfYP4ygBvpwd13XGsj3GSigUwbdon2uBNSNs3EiGwbKSMs4vV4oOoEJEBZgqVSb+Fh4BSAJ4QuKTU1sfbgNUm/HG0/YKEIyRaEE/Wa9a9KBCRAMrlG4PLK++eCthHYHHH6EShXD7WWi8gidN5Z17SeYJvh9PDY7adeb8ZRCSATM4uAbgYZL5zdGLyd/GOSACRNZ37gI6CnPNca6E7AKb9CMJhg8aZJbd4KyzoTN4+5bdxJ4D1aqXx7gDk7A8ARrhlYE99Ye51WNDZ2ctDTb/ZEPnGc61D3QJQEMirlSKVLJ+v7iL1tVotrPQFYDPR9e8jZZTJ2bEc+L8BTHP+YAttB9LutfYC9gfPBF7Gye6XvWRjAEbRdS88Cy1B1qw8l3Tgn4VCPiT5ou5aY6EAnXr3AmCjTvrjJ0wAEgcSBxIHEgcSB7Jm5bOkoV4cRiRX666VDj8NzcpVSFO9AAB5zXOtc6EAPy8Yx0GuDSRdgZEaS1eKd0n+GO86K9JM2BWAvwRJAL4Dsh3lI2wUu0kAAAAASUVORK5CYII="},"98b7":function(t,e){var i="undefined"!==typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)};t.exports=i},"98b77":function(t,e,i){"use strict";var s=i("f398"),n=i.n(s);n.a},"98bd":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"materialRef",style:{width:t.options.style.width+"mm",height:t.options.style.height+"mm",opacity:(t.options.style.opacity||100)/100},on:{dblclick:function(e){return e.stopPropagation(),t.$bus.$emit("edit-qrcode",t.options)},mousedown:function(e){return t.$emit("mousedown",e)}}},[t.options.qricon?i("img",{staticClass:"qricon",attrs:{src:t.options.qricon,alt:""}}):t._e(),i("img",{class:"qrcodeNode_"+t.options.uuid,staticStyle:{width:"100%",height:"100%","pointer-events":"none"},attrs:{id:"qrcodeNode_"+t.options.uuid,src:t.qrcodeContent}})])},n=[],a=i("be4e"),r=i.n(a),o=i("6796"),l={mixins:[o["a"]],data(){return{qrcodeContent:null}},props:{options:{type:Object,default:Object},color:{type:String,default:""}},mounted(){this.drawCode()},methods:{refresh(){this.drawCode()},drawCode(){const t=this.options.fills||[];let e=null,i=null;e=t.filter(t=>"background"===t.class)[0]||{},i=this.color?{color:this.color}:t.filter(t=>"foreground"===t.class)[0]||{};const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.classList.add("barcodeNode_"+this.options.uuid);const n=new r.a({content:this.options.value,ecl:"M",padding:1,join:!0,background:e.color||"#ffffff",color:i.color||"#000000"}).svg();this.qrcodeContent="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(n))),this.$emit("material-loaded")}}},c=l,h=(i("bf0b"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,"4d535737",null);e["default"]=d.exports},"98bd9":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var s=i("1784"),n=i.n(s);function a(t,e){var i,s=t&&t.a;i=t&&t.hsl?n()(t.hsl):t&&t.hex&&t.hex.length>0?n()(t.hex):t&&t.hsv?n()(t.hsv):t&&t.rgba?n()(t.rgba):t&&t.rgb?n()(t.rgb):t&&t.cmyk?n()(t.cmyk):n()(t),!i||void 0!==i._a&&null!==i._a||i.setAlpha(s||1);var a,r=i.toHsl(),o=i.toHsv();0===r.s&&(o.h=r.h=(null===t||void 0===t?void 0:t.h)||(null===t||void 0===t||null===(a=t.hsl)||void 0===a?void 0:a.h)||e||0);return{hsl:r,hex:i.toHexString().toUpperCase(),hex8:i.toHex8String().toUpperCase(),rgba:i.toRgb(),hsv:o,oldHue:(null===t||void 0===t?void 0:t.h)||e||r.h,source:null===t||void 0===t?void 0:t.source,a:(null===t||void 0===t?void 0:t.a)||i.getAlpha(),cmyk:i.toCmykRound()}}e["b"]={props:["value"],data(){return{val:a(this.value)}},computed:{colors:{get(){return this.val},set(t){this.val=t,this.$emit("input",t)}}},watch:{value(t){this.val=a(t)}},methods:{colorChange(t,e){this.oldHue=this.colors.hsl.h,this.colors=a(t,e||this.oldHue)},isValidHex(t){return n()(t).isValid()},simpleCheckForValidColor(t){for(var e=["r","g","b","a","h","s","l","v"],i=0,s=0,n=0;n<e.length;n++){var a=e[n];t[a]&&(i++,isNaN(t[a])||s++)}if(i===s)return t},paletteUpperCase(t){return t.map(t=>t.toUpperCase())},isTransparent(t){return 0===n()(t).getAlpha()}}}},9911:function(t,e,i){"use strict";var s=i("d887"),n=i.n(s);n.a},"993f":function(t,e,i){},9956:function(t,e,i){},"99c0":function(t,e,i){},"99ed":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"download-pop"},[s("div",{staticClass:"flex flex-between pop-header"},[0===t.page?s("div",{staticClass:"fo-18 bold"},[s("span",{staticClass:"current text-pointer"},[t._v(" 导出设计 ")])]):t._e(),1===t.page?s("a-page-header",{staticStyle:{padding:"0"},attrs:{title:"返回"},on:{back:t.backToUp}}):t._e(),s("div",{staticClass:"fo-16 pointer",on:{click:function(e){t.visible=!1}}},[s("a-icon",{staticStyle:{color:"#aaa"},attrs:{type:"close"}})],1)],1),s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.page,expression:"page === 0"}]},[s("a-form-model",{ref:"pdfExportFormRef",attrs:{model:t.form,rules:t.pdfExportRules}},[s("div",{staticClass:"flex flex-between item-center mt-24 mb-12"},[s("div",{staticClass:"fo-14 bold"},[t._v("文件类型")]),s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[t._v(" 印刷PDF文件包含结构图及高清印刷设计，你可以使用Adobe Illustrator继续编辑； "),s("br"),t._v("印刷使用 CMYK色彩模式，和在电脑屏幕上的显示效果存在色差。 ")]),s("img",{attrs:{src:i("5151")}})],2)],1),s("a-select",{staticStyle:{width:"100%"},attrs:{dropdownClassName:"download-options","option-label-prop":"label"},on:{change:t.exportTypeSelect},model:{value:t.exportType,callback:function(e){t.exportType=e},expression:"exportType"}},[s("a-select-option",{attrs:{value:"design",label:"印刷PDF"}},[s("div",{staticClass:"label"},[s("div",{staticClass:"tip-title"},[t._v("印刷PDF")]),s("div",{staticClass:"tips"},[t._v("用于高清印刷生产")])])]),s("a-select-option",{attrs:{value:"frame",label:"结构PDF"}},[s("div",{staticClass:"label"},[s("div",{staticClass:"tip-title"},[t._v("结构PDF")]),s("div",{staticClass:"tips"},[t._v("用于制作模具或生产切割")])])])],1),"design"===t.exportType?s("a-select",{staticClass:"mt-8",staticStyle:{width:"100%"},attrs:{dropdownClassName:"download-options","option-label-prop":"label"},on:{change:t.exportTypeSelect},model:{value:t.colorMode,callback:function(e){t.colorMode=e},expression:"colorMode"}},[s("a-select-option",{attrs:{value:"CMYK",label:"CMYK模式"}},[s("div",{staticClass:"tip-title"},[t._v("CMYK模式")])]),s("a-select-option",{attrs:{value:"RGB",label:"RGB模式"}},[s("div",{staticClass:"tip-title"},[t._v("RGB模式")])])],1):t._e(),s("div",{staticClass:"flex flex-between item-center mt-24 mb-12"},[s("div",{staticClass:"fo-14 bold"},[t._v("备注")])]),s("a-form-model-item",{ref:"remark",attrs:{prop:"remark"}},[s("a-textarea",{attrs:{placeholder:"说明工艺材质或其他要求...","auto-size":{minRows:2,maxRows:4}},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),t.vipPrice>0?s("div",[t.payList.length>0?s("div",{staticClass:"mt-24 mb-12 flex flex-start item-center pointer",on:{click:function(e){t.payShow=!t.payShow}}},[s("div",{staticClass:"fo-14 bold"},[t._v(t._s(t.payList.length)+" 个需支付")])]):t._e(),t._l(t.payList,(function(e,i){return s("div",{key:i},[["template","work"].includes(e.type)?s("div",{staticClass:"mt-12 flex flex-between item-center"},[t._m(0,!0),s("a-input",{staticStyle:{width:"238px"},attrs:{value:e.label,"read-only":!0},scopedSlots:t._u([{key:"suffix",fn:function(){return[s("div",[e.originalPrice?s("span",{staticStyle:{"text-decoration":"line-through",color:"#999","font-size":"12px"}},[t._v(" ¥"+t._s(e.originalPrice)+" ")]):t._e(),s("span",[t._v("¥"+t._s(e.price))])])]},proxy:!0}],null,!0)})],1):t._e(),"blank"===e.type?s("div",{staticClass:"mt-12 flex flex-between item-center"},[t._m(1,!0),s("a-select",{staticStyle:{width:"238px"},attrs:{dropdownClassName:"download-options","option-label-prop":"label"},on:{change:t.blankModeChange},model:{value:t.blankModeActive,callback:function(e){t.blankModeActive=e},expression:"blankModeActive"}},t._l(e.selects,(function(e,i){return s("a-select-option",{key:i,attrs:{value:i,label:e.label}},[s("div",{staticClass:"label"},[s("div",{staticClass:"flex flex-between item-center"},[s("div",{staticClass:"fo-14 bold"},[t._v(t._s(e.divLabel))]),s("div",{staticClass:"fo-14 bold"},[t._v("¥"+t._s(e.price))])]),s("div",{staticClass:"flex flex-between item-center fo-gray",staticStyle:{"margin-top":"-12px"}},[s("div",{staticClass:"fo-12"},[t._v(t._s(e.divSub))]),e.price<e.oriPrice?s("div",{staticClass:"fo-12 line-through"},[t._v(" ¥"+t._s(e.oriPrice)+" ")]):t._e()])])])})),1)],1):t._e()])}))],2):t._e(),t.vipPrice>0&&"success"!==t.status?s("div",{staticClass:"mt-48"},[t.isVip?s("div",[s("a-button",{attrs:{type:"primary",block:""},on:{click:function(e){t.status="",t.createFlag(t.vipPrice)}}},[t._v("VIP专享价 ￥"+t._s(t.vipPrice)+" "),s("span",{staticClass:"fo-12 ml-8",staticStyle:{"text-decoration":"line-through"}},[t._v("原价 ￥"+t._s(t.payPrice))])])],1):s("div",[s("a-button",{style:{width:t.payList.some((function(t){return"work"===t.type}))?"":"138px"},attrs:{block:"",loading:t.orderLoading},on:{click:function(e){t.status="",t.createFlag(t.payPrice)}}},[t._v("结算 ¥"+t._s(t.payPrice))]),t.payList.some((function(t){return"work"===t.type}))?t._e():s("a-button",{staticClass:"ml-12",style:{background:"linear-gradient(135deg,#fff0e2, #fce1be)",border:"none",color:"#91692C",width:"138px"},attrs:{type:"primary",block:"",loading:t.orderLoading},on:{click:t.showPersonalVip}},[t._v("会员专享 ¥"+t._s(t.vipPrice))])],1),t._m(2)]):s("div",{staticClass:"mt-48"},[s("a-button",{attrs:{type:"primary",block:""},on:{click:t.exportPdf}},[t._v("导出")])],1)],1),1===t.page?s("div",{staticClass:"mt-16"},[s("div",{staticClass:"fo-14 text-center"},[t._v("结算金额:")]),s("div",{staticClass:"fo-14 text-center"},[s("span",{staticClass:"fo-26 bold fo-theme"},[t._v("¥"+t._s(this.isVip?t.vipPrice:t.payPrice))])]),s("div",{staticClass:"qrcode-panel text-center"},[s("img",{attrs:{src:t.qrcode,width:"180px"}}),"overdue"===t.status?s("div",{staticClass:"qrcode-panel--mask flex flex-center item-center"},[s("a-button",{attrs:{icon:"reload"},on:{click:function(e){t.status="",t.createFlag()}}},[t._v("刷新")])],1):t._e()]),t._m(3),s("div",{staticClass:"fo-12 ml-4 text-center mt-8"},[t._v("使用手机扫码支付")])]):t._e()]),s("export-pdf-progress-modal",{ref:"pdfProgressRef"})],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pay-icon flex flex-center item-center"},[s("img",{staticClass:"pay-icon-img",staticStyle:{width:"16px",height:"16px"},attrs:{src:i("32b8")}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pay-icon flex flex-center item-center"},[s("img",{staticClass:"pay-icon-img",attrs:{src:i("76ca"),alt:""}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fo-14 fo-gray mt-12"},[t._v(" 支付即视为您已阅读并同意 "),i("a",{staticClass:"fo-theme pointer",attrs:{href:"https://help.baoxiaohe.com/support/archives/300/",target:"_blank"}},[t._v("授权许可协议")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex flex-center item-center"},[s("img",{staticClass:"mr-4",attrs:{src:i("d3e2"),width:"26px",alt:""}}),s("img",{attrs:{src:i("c96f"),width:"26px",alt:""}})])}],a=(i("5319"),i("ddb0"),i("5530")),r=i("5880"),o=i("d055"),l=i.n(o),c=i("0d67"),h=i("b936"),d=i("9393"),u={props:["value"],mixins:[d["a"]],components:{Service:c["a"],ExportPdfProgressModal:h["default"]},model:{prop:"value",event:"change"},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("profile",["vip"])),Object(r["mapState"])("profile",["user"])),Object(r["mapGetters"])("profile",["isVip"])),data(){return{page:0,pageType:0,payShow:!1,exportType:"design",colorMode:"CMYK",visible:this.value,payList:[],blankModeActive:0,payPrice:0,vipPrice:0,orderLoading:!1,qrcode:"",orderFlag:"",intv:null,status:"",pdfExportRules:{remark:[{min:0,max:50,message:"长度不能超过50",trigger:"change"}]},form:{remark:""}}},watch:{value(t){this.visible=t,t&&this.getCheck()},visible(t){this.$emit("change",t),t||(clearInterval(this.intv),this.page=0)}},mounted(){this.getCheck()},methods:{async exportPdf(){this.$refs.pdfExportFormRef.validate(t=>{if(t){this.$emit("change",!1),this.$track({category:"ExportPDF",action:"click",label:`${this.exportType}-${this.colorMode}`}),this.$store.commit("increaseProjectVersion");let t=null;t="frame"===this.exportType?this.$api2.exportKnife({id:this.$root.projectData.id,export_type:"project",remark:this.form.remark.replace(/\s/g,""),color_mode:"RGB"}):this.$api2.exportDesign({id:this.$root.projectData.id,export_type:"project",remark:this.form.remark.replace(/\s/g,""),color_mode:this.colorMode}),t.then(t=>{200==t.code?this.$refs.pdfProgressRef.show(t.data.task_id,this.$root.projectData.project_name,"设计方案"):this.$message.error(t.msg)})}})},backToUp(){this.page=0,clearInterval(this.intv)},getStatus(t){this.intv=setInterval(()=>{this.$api2.getOrderFlagStatus({flag:this.orderFlag}).then(e=>{if(e){const i=e.data.status;this.status=i,"overdue"!==i&&"success"!==i||(clearInterval(this.intv),"success"===i&&(this.$track({category:"purchase",affiliation:"Google online store",action:"purchase-export",label:"pay-"+this.$root.projectData.id,value:t}),this.page=0,this.getCheck(),this.exportPdf()))}else clearInterval(this.intv)})},3e3)},createFlag(t){this.orderLoading=!0,this.$api2.createCopyrightOrder({orderType:"copyright",projectId:this.$route.query.id,exportType:"frame"==this.exportType?2:1,blankModeActive:this.blankModeActive}).then(e=>{this.orderLoading=!1,e&&(this.orderFlag=e.data.flag,this.getQrcode(),this.getStatus(t),this.page=1)})},getQrcode(){let t="https://"+window.location.host.replace("www.","");t=t.indexOf("localhost")>-1||t.indexOf("127.0.0.1")>-1||t.indexOf("www.test.baoxiaohe.com")>-1?"https://m.test.baoxiaohe.com":"https://m.baoxiaohe.com",l.a.toDataURL(`${t}/pay/unifiedorder?flag=${this.orderFlag}`).then(t=>{this.qrcode=t}).catch(t=>{})},sumprice(){let t=0,e=0;for(let i of this.payList)"design"===this.exportType&&["template","work"].includes(i.type)&&(t+=parseFloat(i.price),e+=parseFloat(i.vipPrice));this.payPrice=Math.round(100*t)/100,this.vipPrice=0===e?this.vipPrice=e:.5*this.payPrice},getCheck(){this.$api.project.exportCheck({id:this.$route.query.id,export_type:"project",content_type:"design"===this.exportType?"design":"knife"}).then(t=>{t&&(this.payList=t.data,this.sumprice())})},blankModeChange(){this.sumprice()},exportTypeSelect(t){this.getCheck()}}},p=u,f=(i("c4bb"),i("2877")),m=Object(f["a"])(p,s,n,!1,null,null,null);e["default"]=m.exports},"99f1":function(t,e,i){t.exports=i.p+"editor-assets/img/arrow-down.d926404f.svg"},"99f3":function(t,e,i){t.exports=i.p+"editor-assets/img/pin.b803cced.svg"},"99f6":function(t,e,i){"use strict";var s=i("6d57"),n=i.n(s);n.a},"9adf":function(t,e,i){t.exports=i.p+"editor-assets/img/light-a.6e6e6d4c.svg"},"9b3a":function(t,e,i){t.exports=i.p+"editor-assets/img/lights.1ceacc5f.svg"},"9b70":function(t,e,i){},"9b71":function(t,e,i){"use strict";i.r(e);var s=i("750b");i("d8b6");const n=i("4411");e["default"]=Object(s["b"])({props:{value:{type:String,default:""}},setup(t){return()=>Object(s["c"])("span",{class:"no-selected"},[t.value,Object(s["c"])("img",{slot:"suffix",attrs:{src:n},style:{width:"28px",height:"18px",paddingLeft:"12px"}})])}})},"9bb7":function(t,e,i){"use strict";var s=i("eeac"),n=i.n(s);n.a},"9bfc":function(t,e,i){t.exports=i.p+"editor-assets/img/layer.af827207.svg"},"9c25":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"editor-commit"},[s("a-modal",{attrs:{centered:"",title:t.title,footer:null,visible:t.tvisble,maskClosable:!0,width:700,zIndex:4e3},on:{cancel:function(e){t.tvisble=!1}}},[t.is_contribute||t.isMch?s("a-steps",{staticStyle:{width:"488px",margin:"auto","margin-bottom":"16px"},attrs:{current:t.stepsFlag}},t._l(t.steps,(function(t){return s("a-step",{key:t,attrs:{title:t}})})),1):t._e(),t.commitInfo&&2===t.commitInfo.status?s("a-alert",{staticClass:"mb-12",staticStyle:{width:"488px","margin-left":"110px"},attrs:{message:"投稿失败，原因如下",description:t.commitInfo.refuse_reson,type:"error",showIcon:""}}):t._e(),!t.is_contribute&&0===t.stepsFlag&&(!t.is_update||t.isMch&&0===t.stepsFlag)||t.is_contribute&&0===t.stepsFlag?s("a-form",{attrs:{form:t.form}},[s("a-form-item",{attrs:{"label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol,label:"标题",required:""}},[s("a-input",{attrs:{placeholder:"请输入标题"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}}),s("p",{staticClass:"fo-12 fo-gray lh-20"},[s("img",{staticStyle:{width:"15px",height:"15px"},attrs:{src:i("fd52")}}),t._v(" 不少于5个字，建议包含模板的热点、行业、用途、风格，如“极简书籍包装盒”。参考：修饰语+风格+行业属性/作品主题+用途 ")])],1),s("a-form-item",{attrs:{"label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol,required:"",label:"分类"}},[s("div",{staticClass:"editor-commit-panel"},[s("div",{staticClass:"editor-commit-panel-flow"},t._l(t.tags,(function(e,i){return s("div",{key:i,staticClass:"lh-25 mb-8"},[s("div",{staticClass:"fo-14"},[s("span",{staticClass:"bold"},[t._v(t._s(e.cate_name))])]),t._l(e.children,(function(e,n){return s("a-checkbox",{key:i+"-"+n,attrs:{checked:e.checked},on:{change:function(e){return t.checkedChange(e,i,n)}}},[t._v(t._s(e.tag_name))])}))],2)})),0)])]),s("a-form-item",{attrs:{"label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol,label:"关键词",required:""}},[s("a-select",{staticStyle:{width:"100%"},attrs:{mode:"tags",placeholder:"关键字"},on:{change:t.selectChange},model:{value:t.formData.keywords,callback:function(e){t.$set(t.formData,"keywords",e)},expression:"formData.keywords"}},t._l(t.selectTags,(function(e,i){return s("a-select-option",{key:i,attrs:{value:e.tag_name}},[t._v(t._s(e.tag_name))])})),1)],1),s("a-form-item",{attrs:{"label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol,label:"备注"}},[s("a-input",{attrs:{placeholder:"请输入备注信息"},model:{value:t.formData.remarks,callback:function(e){t.$set(t.formData,"remarks",e)},expression:"formData.remarks"}})],1),s("a-form-item",{directives:[{name:"show",rawName:"v-show",value:t.is_contribute,expression:"is_contribute"}],attrs:{label:"版权声明","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[s("a",{staticClass:"download fo-gray text-pointer",attrs:{href:t.formData.copyright,target:"_blank"}},[t._v("下载版权声明")])]),s("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.is_contribute&&!t.isMch,expression:"!is_contribute && !isMch"}],attrs:{"label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol,label:"版权声明",required:""}},[s("a",{staticClass:"download fo-gray text-pointer",attrs:{href:t.download,target:"_blank"}},[t._v("下载版权声明模板")]),s("br"),s("a-upload",{attrs:{showUploadList:!1,name:"file",multiple:!1,data:{type:"doc"},action:t.action,headers:{Authentication:t.Authentication},customRequest:t.customRequest},on:{change:t.handleUpload}},[s("div",{staticClass:"flex flex-center item-center"},[s("a-button",{attrs:{icon:t.uploadLoading?"loading":"upload"}},[t._v("上传文件")])],1)])],1),s("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.is_contribute&&!t.isMch,expression:"!is_contribute && !isMch"}],attrs:{"label-col":t.formTailLayout.labelCol,"wrapper-col":t.formTailLayout.wrapperCol}},[s("p",{staticClass:"lh-25"},[s("a-checkbox",{attrs:{checked:t.checkedAticle},on:{change:function(e){t.checkedAticle=e.target.checked}}},[t._v("我已阅读并接受")]),s("a",{attrs:{href:"https://support.baoxiaohe.com/Digitalworks.html",target:"_blank"}},[t._v("《数字作品上传发布服务使用协议》")]),t._v("，并保证作品原创性，愿意承担因侵权带来的一切法律责任。 ")],1)]),s("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.is_contribute&&!t.isMch,expression:"!is_contribute && !isMch"}],attrs:{"label-col":t.formTailLayout.labelCol,"wrapper-col":t.formTailLayout.wrapperCol}},[s("a-button",{attrs:{type:"primary",disabled:t.isdisabled},on:{click:t.commitProject}},[t._v(t._s(t.hasCommitId?"更新投稿":"提交投稿"))])],1),s("a-form-item",{directives:[{name:"show",rawName:"v-show",value:t.is_contribute,expression:"is_contribute"}],attrs:{label:"拒绝理由","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[s("div",{staticClass:"editor-commit-panel"},[s("div",{staticClass:"editor-commit-panel-flow"},[s("a-radio-group",t._l(t.refuseReason,(function(e,i){return s("a-radio",{key:i,staticStyle:{display:"block","white-space":"nowrap"},attrs:{value:i},on:{change:function(i){return t.reasonChange(i,e)}}},[t._v(t._s(e))])})),1)],1)])]),s("a-form-item",{directives:[{name:"show",rawName:"v-show",value:t.is_contribute||t.isMch,expression:"is_contribute || isMch"}],attrs:{"label-col":t.formTailLayout.labelCol,"wrapper-col":t.formTailLayout.wrapperCol}},[s("a-button",{attrs:{type:"primary",disabled:t.isdisabled},on:{click:function(e){return t.infoNext()}}},[t._v("下一步")]),s("a-button",{directives:[{name:"show",rawName:"v-show",value:t.is_contribute,expression:"is_contribute"}],staticClass:"ml-8",attrs:{type:"danger",loading:t.refuseload},on:{click:function(e){return t.refuseArt()}}},[t._v("拒绝通过")])],1)],1):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:1!==t.commitInfo.status&&t.is_contribute&&1===t.stepsFlag||t.is_update||t.isMch&&1===t.stepsFlag,expression:"\n        (commitInfo.status !== 1 && is_contribute && stepsFlag === 1) ||\n        is_update ||\n        (isMch && stepsFlag === 1)\n      "}],staticClass:"editor-preview-panel"},[s("div",{staticClass:"editor-preview-panel-title"},[t._v("选择模型图片")]),s("a-spin",{attrs:{spinning:t.imageLoad}},[s("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"}),s("div",{staticClass:"editor-preview-panel-gallery mt-4"},[s("div",{staticClass:"gallery-overflow flex flex-start flex-wrap"},[t._l(t.images,(function(e,n){return s("div",{key:n,staticClass:"gallery-item pointer",on:{click:function(e){return t.chooseImage(n)}}},[s("div",{staticClass:"img flex flex-center item-center wrap"},[s("img",{attrs:{src:e.image+"?imageView2/0/w/113/h/113/q/100"}})]),e.active?s("div",{staticClass:"checked flex flex-center item-center"},[s("img",{attrs:{src:i("9825")}})]):t._e()])})),s("div",{staticClass:"text-center fo-gray w-100 mt-24"},[t._v(" 暂无渲染图,请点击右上角“渲染”按钮进行选择 ")]),t.imagesQuery.count>t.images.length?s("div",{staticClass:"text-center lh-30 fo-theme pointer w-100 mb-24",on:{click:function(e){t.imagesQuery.currentPage++,t.getImages()}}},[t._v(" 加载更多 ")]):t._e()],2)])],1),s("div",{staticClass:"editor-preview-panel-title mt-12"},[t._v(" 模型设计图片 "),s("a-button",{staticClass:"ml-16",on:{click:t.drawCanvas}},[t._v("重新生成设计图")])],1),s("div",{staticClass:"editor-preview-panel-title mt-4 flex flex-start item-center flex-wrap"},[s("a-spin",{attrs:{spinning:t.canvasLoad}},[s("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"}),s("div",{staticClass:"canvas"},[s("canvas",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) scale(0.125)"},attrs:{id:"pubCanvas"}})])],1),s("a-spin",{attrs:{spinning:t.canvasLoad}},[s("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"}),s("div",{staticClass:"canvas"},[s("canvas",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) scale(0.125)"},attrs:{id:"pubCanvas2"}})])],1),s("a-spin",{attrs:{spinning:t.canvasLoad}},[s("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"}),s("div",{staticClass:"canvas"},[s("canvas",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) scale(0.125)"},attrs:{id:"pubCanvas3"}})])],1),s("a-spin",{attrs:{spinning:t.canvasLoad}},[s("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"}),s("div",{staticClass:"canvas"},[s("canvas",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) scale(0.125)"},attrs:{id:"pubCanvas4"}})])],1),s("a-spin",{attrs:{spinning:t.canvasLoad}},[s("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"}),s("div",{staticClass:"canvas"},[s("canvas",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) scale(0.125)"},attrs:{id:"pubCanvas5"}})])],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.is_update,expression:"!is_update"}],staticClass:"editor-preview-panel-title mt-16"},[t.is_contribute||t.isMch?s("a-button",{on:{click:function(e){t.stepsFlag=0}}},[t._v("上一步")]):t._e(),s("a-button",{staticClass:"ml-8",attrs:{type:"primary",loading:t.pubLoad},on:{click:t.publish}},[t._v("确认发布")])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.is_update,expression:"is_update"}],staticClass:"editor-preview-panel-title mt-16"},[s("a-button",{staticClass:"ml-8",attrs:{type:"primary",loading:t.pubLoad},on:{click:t.modeUpdate}},[t._v("确认修改")])],1)],1),t.is_contribute&&2===t.stepsFlag?s("div"):t._e(),t.commitInfo&&1===t.commitInfo.status||t.is_contribute&&2===t.stepsFlag||!t.is_contribute&&t.isMch&&2===t.stepsFlag?s("a-alert",{staticClass:"mb-12",staticStyle:{width:"488px","margin-left":"110px"},attrs:{message:"发布成功",description:"您可以在模板中心找到您的作品啦！",type:"success",showIcon:""}}):t._e()],1)],1)},n=[],a=(i("25f0"),i("1276"),i("5cc6"),i("b39a"),i("ddb0"),i("5530")),r=(i("54c2"),i("5880")),o=i("365c"),l=i("5aa7"),c=i("054f"),h=i("c64e"),d=i.n(h),u={props:["visible","title"],data(){return{download:"https://cdn.baoxiaohe.com/c4d34b53-86c1-4607-b6c0-f2e84b7e94e7.docx",action:o["UPLOAD_PATH"],uploadLoading:!1,Authentication:this.accessToken,tvisble:this.visible,checkedAticle:!1,formItemLayout:{labelCol:{span:4},wrapperCol:{span:18}},formTailLayout:{labelCol:{span:2},wrapperCol:{span:18,offset:4}},form:this.$form.createForm(this,{title:"dynamic_rule"}),formData:{title:"",keywords:[],remarks:"",copyright:"",refuse_reson:""},refuseload:!1,checkNick:!1,tags:[],selectTags:[],commitInfo:{status:0},isdisabled:!1,loading:!1,is_contribute:!1,is_update:!1,steps:["作品信息","作品预览图","正式发布"],stepsFlag:0,imageLoad:!1,images:[],imagesQuery:{currentPage:1,pageSize:8,project_id:"",count:0},canvasLoad:!1,knife:{},pubLoad:!1,onload:!1,refuseReason:["缺少美感/设计感","素材像素不够清晰,修改好后重新提交","素材不符合投稿规范,https://help.baoxiaohe.com/archives/428 独立对象要分图层，文字需要在我们平台完成排版","请添加审核员企业微信：18158715745，重新提交","素材来源审核不过"],checkedReason:[]}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("property",["crafts"])),Object(r["mapGetters"])("profile",["isMch"])),Object(r["mapState"])("profile",["accessToken"])),{},{hasCommitId(){return"commit_id"in this.$route.query}}),model:{prop:"visible",event:"change"},mounted(){this.is_contribute="contribute"===this.$route.query.type,this.is_update="update"===this.$route.query.type,this.is_contribute&&(this.checkedAticle=!0),this.is_update&&this.infoNext()},watch:{visible(t){this.tvisble=t,t&&!this.onload&&(this.onload=!0,this.getMudata(()=>{this.getCommitInfo()})),1===this.stepsFlag&&this.isMch&&this.infoNext()},tvisble(t){this.$emit("change",t)},"formData.keywords"(t){const e=t.toString();if(e.length>=100)return this.isdisabled=!0,this.$message.error("关键词数目过多，请重新选择"),!1;this.isdisabled=!1}},methods:{handleUpload(t){this.uploadLoading=!0,"done"==t.file.status&&0===t.file.response.errno&&(this.formData.copyright=t.file.response.data.url,this.$message.success("上传成功"),this.uploadLoading=!1)},async customRequest(t){this.uploadLoading=!0;let e=t.file.name.substring(t.file.name.lastIndexOf(".")+1,t.file.name.length);const i="contribution";let s=i+"/"+d()()+"."+e,n=await c["a"].putFile(t.file,{xapi:i,rename:s,type:"doc"});0!==n.errno&&this.$message.error(n.errmsg),this.$message.success("上传成功"),this.formData.copyright=n.data.url,this.uploadLoading=!1},async setFormData(t,e,i){let s=new FormData,n=null,a="";1!=i?(n=t.toDataURL("image/jpeg",i),a=d()()+".jpg"):(n=t.toDataURL("image/png"),a=d()()+".png"),s.append("file",this.convertBase64UrlToBlob(n));let r=await c["a"].putFile(s.get("file"),{xapi:"template",rename:a,type:JSON.stringify({type:3,project_id:this.pro_id})});return r},async modeUpdate(){let t={};for(let c in this.images)this.images[c].active&&(t.image=this.images[c].image);this.pubLoad=!0;let e=document.getElementById("pubCanvas"),i=document.getElementById("pubCanvas2"),s=document.getElementById("pubCanvas3"),n=document.getElementById("pubCanvas4"),a=document.getElementById("pubCanvas5");const[r,o,l,h,d]=await Promise.all([this.setFormData(e,"outside_img",.95),this.setFormData(i,"inside_img",.7),this.setFormData(s,"specular_img",.7),this.setFormData(n,"bump_img",.7),this.setFormData(a,"roughness_img",.7)]);if(1e3!=r.errno&&1e3!=o.errno){if(r&&o){t.knife_image=r.data.url,t.inside_image=o.data.url,t.mode_id=this.$route.query.mid,t.specular_img=l.data.url,t.bump_img=h.data.url,t.roughness_img=d.data.url;let e=await this.$api.templates.update(t);e&&this.$message.success(e.errmsg)}this.pubLoad=!1}else c["a"].removeStorage()},async publish(){if(!this.checkSubmit(!1))return;let t="",e=[];for(let o in this.images)this.images[o].active&&(t=this.images[o].image);if(!t)return void this.$message.error("请选择一张图片");for(let o in this.tags)for(let t in this.tags[o].children)this.tags[o].children[t].checked&&e.push(this.tags[o].children[t].id);this.pubLoad=!0;let i=document.getElementById("pubCanvas"),s=document.getElementById("pubCanvas2"),n=document.getElementById("pubCanvas3"),a=document.getElementById("pubCanvas4"),r=document.getElementById("pubCanvas5"),[l,c,h,d,u]=await Promise.all([this.setFormData(i,"outside_img",.95),this.setFormData(s,"inside_img",.7),this.setFormData(n,"specular_img",.7),this.setFormData(a,"bump_img",.7),this.setFormData(r,"roughness_img",.7)]);if(l&&c)try{let i=await Object(o["patchProject"])({title:this.formData.title,keywords:this.formData.keywords.toString(),project_id:this.$root.projectData.id,knife_image:l.data.url,inside_image:c.data.url,specular_img:h.data.url,bump_img:d.data.url,roughness_img:u.data.url,image:t,tag_ids:e.toString(),status:1,commit_id:this.$route.query.commit_id?Number(this.$route.query.commit_id):void 0});i&&(this.stepsFlag=2)}catch(p){}this.pubLoad=!1},convertBase64UrlToBlob(t){for(var e=window.atob(t.split(",")[1]),i=new ArrayBuffer(e.length),s=new Uint8Array(i),n=0;n<e.length;n++)s[n]=e.charCodeAt(n);return new Blob([i],{type:"image/png"})},refuseArt(){this.formData.refuse_reson?(this.refuseload=!0,Object(o["patchProject"])({project_id:this.$root.projectData.id,refuse_reson:this.formData.refuse_reson,status:2,commit_id:this.$route.query.commit_id?Number(this.$route.query.commit_id):void 0}).then(t=>{this.$message.success("丑拒🖐️")}).catch(()=>{}).finally(()=>{this.refuseload=!1})):this.$message.error("请选择拒绝理由")},chooseImage(t){for(let e in this.images)this.images[e].active=!1;this.images[t].active=!0},infoNext(){this.stepsFlag=1,this.getImages(),this.drawCanvas()},async drawCanvas(){this.canvasLoad=!0;let t=document.getElementById("pubCanvas"),e=document.getElementById("pubCanvas2"),i=document.getElementById("pubCanvas3"),s=document.getElementById("pubCanvas4"),n=document.getElementById("pubCanvas5"),a=1,r=[0,0];this.$root.knifeData.totalX>this.$root.knifeData.totalY?(a=2e3/this.$root.knifeData.totalX,r=[2e3,this.$root.knifeData.totalY*a]):(a=2e3/this.$root.knifeData.totalY,r=[this.$root.knifeData.totalX*a,2e3]);let o=new l["a"](this.$root.projectData,this.$root.knifeData,!0);o.setHasShadow(!0),await o.draw(r[0],r[1],a,"out",t),await o.draw(r[0],r[1],a,"in",e),await o.draw(r[0],r[1],a,"out",i,"gilding",this.crafts),await o.draw(r[0],r[1],a,"out",s,"bump",this.crafts),await o.draw(r[0],r[1],a,"out",n,"roughness",this.crafts),this.canvasLoad=!1},getImages(){this.imageLoad=!0,this.imagesQuery.project_id=this.$root.projectData.id,this.$api.project.renderImages(this.imagesQuery).then(t=>{if(this.imageLoad=!1,t){for(let e in t.data.data)t.data.data[e].active=!1;if(1===this.imagesQuery.currentPage)this.images=t.data.data;else for(let e in t.data.data)t.data.data[e].active=!1,this.images.push(t.data.data[e]);this.imagesQuery.count=t.data.count}})},getCommitInfo(){Object(o["getProjectContributes"])({project_id:this.$root.projectData.id,status:0}).then(t=>{Array.isArray(t.data)&&t.data.length&&(t={data:t.data[0]},this.commitInfo=t.data,this.commitInfo={status:0},t.data.keywords&&(this.formData={title:t.data.title,keywords:t.data.keywords.split(","),copyright:t.data.copyright,remarks:t.data.remarks},1!==t.data.status||this.is_contribute||(this.stepsFlag=1),this.selectChange(this.formData.keywords)))})},checkSubmit(t=!0){if(""===this.formData.title)return this.$message.error("请填写标题"),!1;if(0===this.formData.keywords.length)return this.$message.error("请选择关键词"),!1;const e=this.formData.keywords.toString();return e.length>=100?(this.$message.error("关键词数目过多，请重新选择"),!1):!this.checkedAticle&&t?(this.$message.error("请阅读并接受协议"),!1):!(!this.formData.copyright&&t)||(this.$message.error("请上传版权声明"),!1)},commitProject(){if(!this.checkSubmit())return;let t=[];for(let s in this.tags)for(let e in this.tags[s].children)this.tags[s].children[e].checked&&t.push(this.tags[s].children[e].id);this.loading=!0;const e={title:this.formData.title,keywords:this.formData.keywords.toString(),project_id:this.$root.projectData.id,tag_ids:t.toString(),remarks:this.formData.remarks,copyright:this.formData.copyright};this.hasCommitId&&(e.commit_id=this.$route.query.commit_id?Number(this.$route.query.commit_id):void 0,e.status=0);const i=this.hasCommitId?o["patchProject"]:o["commitProject"];i(e).then(t=>{this.loading=!1,t&&(this.$message.success("提交成功"),this.hasCommitId||window.open("/contribute"),this.tvisble=!1)})},getMudata(t){this.$api.templates.getMudata().then(e=>{if(e){let t=[];for(let i in e.data)for(let s in e.data[i].children)e.data[i].children[s].checked=!1,t.push(e.data[i].children[s]);this.tags=e.data,this.selectTags=t}"function"===typeof t&&t()})},initTags(){for(let t in this.tags)for(let e in this.tags[t].children)this.tags[t].children[e].checked=!1},checkedChange(t,e,i){this.tags[e].children[i].checked=t.target.checked,this.checkKeywords(this.formData.keywords,this.tags[e].children[i].tag_name,t.target.checked)},checkKeywords(t,e,i){let s=-1;for(let n in t)t[n]===e&&(s=n);-1===s&&i?t.push(e):i||t.splice(s,1)},selectChange(t){let e=[];for(let i in t)for(let s in this.tags)for(let n in this.tags[s].children)this.tags[s].children[n].tag_name===t[i]&&e.push([s,n]);this.initTags();for(let i in e)this.tags[e[i][0]].children[e[i][1]].checked=!0},reasonChange(t,e){this.formData.refuse_reson=e}}},p=u,f=(i("c00b"),i("2877")),m=Object(f["a"])(p,s,n,!1,null,null,null);e["default"]=m.exports},"9c2c":function(t,e,i){var s=i("401b"),n=s.min,a=s.max,r=s.scale,o=s.distance,l=s.add,c=s.clone,h=s.sub;function d(t,e,i,s){var d,u,p,f,m=[],g=[],v=[],b=[];if(s){p=[1/0,1/0],f=[-1/0,-1/0];for(var y=0,_=t.length;y<_;y++)n(p,p,t[y]),a(f,f,t[y]);n(p,p,s[0]),a(f,f,s[1])}for(y=0,_=t.length;y<_;y++){var x=t[y];if(i)d=t[y?y-1:_-1],u=t[(y+1)%_];else{if(0===y||y===_-1){m.push(c(t[y]));continue}d=t[y-1],u=t[y+1]}h(g,u,d),r(g,g,e);var w=o(x,d),C=o(x,u),k=w+C;0!==k&&(w/=k,C/=k),r(v,g,-w),r(b,g,C);var S=l([],x,v),A=l([],x,b);s&&(a(S,S,p),n(S,S,f),a(A,A,p),n(A,A,f)),m.push(S),m.push(A)}return i&&m.push(m.shift()),m}t.exports=d},"9c47":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.visible?i("div",{staticClass:"history-version flex flex-start"},[i("div",{staticClass:"left"},[i("div",{staticClass:"fo-white mb-16"},[t._v("恢复历史版本记录")]),i("div",{staticClass:"version-panel",style:{height:t.height-69+"px"}},[i("div",{staticClass:"version-content",style:{height:t.height-69+"px"}},t._l(t.list,(function(e,s){return i("div",{key:s,staticClass:"version-item flex flex-between item-center",on:{click:function(e){return t.changeFlag(s)}}},[i("div",{staticClass:"flex flex-start item-center"},[i("svg",{style:{fill:t.flag===s?"#ff6634":"#fff"},attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32"}},[i("path",{attrs:{d:"M512 64c-247.41888 0-448 200.580096-448 448 0 247.433216 200.58112 448 448 448 247.43424 0 448-200.56576 448-448C960 264.580096 759.43424 64 512 64zM512 904.875008c-216.152064 0-392.000512-176.722944-392.000512-392.875008s175.848448-392.000512 392.000512-392.000512c216.153088 0 392.000512 175.847424 392.000512 392.000512S728.153088 904.875008 512 904.875008z","p-id":"2379"}}),i("path",{attrs:{d:"M540.000256 500.637696 540.000256 231.999488c0-15.463424-12.536832-28.000256-28.000256-28.000256s-28.000256 12.536832-28.000256 28.000256l0 280.000512c0 7.56736 3.008512 14.42816 7.885824 19.467264 0.644096 0.805888 1.335296 1.586176 2.080768 2.331648l138.592256 138.592256c10.938368 10.9312 28.669952 10.9312 39.60832 0 10.937344-10.930176 10.937344-28.662784 0-39.600128L540.000256 500.637696z","p-id":"2380"}})]),i("div",{staticClass:"ml-12"},[i("div",{class:" "+(t.flag===s?"fo-theme bold":"fo-white")+" fo-14"},[t._v(" "+t._s(0===s?"当前版本":1===e.save_type?"自动保存":"手动保存")+" ")]),i("div",{staticClass:"fo-white fo-14"},[t._v(t._s(e.createTime))])])]),i("svg",{directives:[{name:"show",rawName:"v-show",value:t.flag===s,expression:"flag === index"}],staticClass:"icon",attrs:{t:"1593401593171",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3368",width:"20",height:"20"}},[i("path",{attrs:{d:"M512 0C228.430769 0 0 228.430769 0 512s228.430769 512 512 512 512-228.430769 512-512S795.569231 0 512 0z m256 413.538462l-271.753846 271.753846c-7.876923 7.876923-19.692308 11.815385-31.507692 11.815384-11.815385 0-23.630769-3.938462-31.507693-11.815384l-169.353846-169.353846c-15.753846-15.753846-15.753846-47.261538 0-63.015385 15.753846-15.753846 47.261538-15.753846 63.015385 0l137.846154 137.846154 240.246153-240.246154c15.753846-15.753846 47.261538-15.753846 63.015385 0 19.692308 15.753846 19.692308 47.261538 0 63.015385z","p-id":"3369",fill:"#ffffff"}})])])})),0)])]),i("div",{staticClass:"right ml-16",style:{width:t.width-364+"px",height:t.height-32+"px"}},[i("div",{staticClass:"flex flex-end item-center"},[t.flag>0?i("a-dropdown-button",{staticClass:"mr-16",attrs:{loading:!0},on:{click:t.recoveryVersion}},[i("a-icon",{attrs:{type:"redo"}}),t._v("恢复到此版本 "),i("a-menu",{attrs:{slot:"overlay"},on:{click:t.gotoSave},slot:"overlay"},[i("a-menu-item",{key:"1"},[t._v("创建副本")])],1),i("a-icon",{attrs:{slot:"icon",type:"down"},slot:"icon"})],1):t._e(),i("a-button",{attrs:{type:"primary"},on:{click:function(e){t.visible=!1}}},[t._v("关闭")])],1),i("div",{staticClass:"img-panel mt-16",style:{width:t.width-364+"px",height:t.height-32-56+"px"}},[i("div",{staticClass:"img-bg flex flex-center item-center",style:{width:t.width-364+"px",height:t.height-32-56-76+"px"}},[t.tempImg?t._e():i("div",{staticClass:"img-blank",style:{width:t.width-364+"px",height:"500px"}}),t.tempImg?i("img",{attrs:{src:t.tempImg+""+(t.tempImg.indexOf("data:")>-1?"":"?imageView2/2/w/"+(t.width-364)+"/h/"+(t.height-32-56-76)+"/q/100")}}):t._e()])])]),i("a-modal",{attrs:{centered:"",title:"创建副本",visible:t.saveVisible,footer:null,"z-index":4001},on:{cancel:function(e){t.saveVisible=!1}}},[i("a-form",{attrs:{form:t.formData}},[i("a-form-item",{attrs:{"label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol,label:"文件名"}},[i("a-input",{model:{value:t.formData.project_name,callback:function(e){t.$set(t.formData,"project_name",e)},expression:"formData.project_name"}})],1)],1),i("div",{staticClass:"save-footer flex flex-center items-center"},[i("a-button",{staticStyle:{width:"120px"},attrs:{size:"large"},on:{click:function(e){t.saveVisible=!1}}},[t._v("取消")]),i("a-button",{staticClass:"ml-24",staticStyle:{width:"120px"},attrs:{type:"primary",size:"large",loading:t.saveload},on:{click:t.handleSubmit}},[t._v("确认")])],1)],1)],1):t._e()},n=[],a=(i("ddb0"),i("5530")),r=i("71c7"),o=i("5a0c"),l=i.n(o),c=i("5880");const h={labelCol:{span:6},wrapperCol:{span:14}},d={labelCol:{span:6},wrapperCol:{span:14}};var u={props:["value"],model:{prop:"value",event:"change"},data(){return{formItemLayout:h,formTailLayout:d,formData:{project_name:"未命名的文件"},height:window.innerHeight,width:window.innerWidth,visible:this.value,list:[],flag:0,tempImg:"",rebackLoading:null,rebackLoadingvalue:!1,saveVisible:!1,saveload:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(c["mapState"])("editor-v2",["project_data","knife_data","isCup","scale","is_outside","last_saved_local_history_ts","element_craft_list"])),{},{crafts(){return this.element_craft_list}}),watch:{value(t){this.visible=t,t&&this.draw()},visible(t){t||(this.flag=0,this.tempImg=""),this.$emit("change",t)}},mounted(){this.resize()},methods:{async draw(){this.list=[];const t=document.createElement("canvas");let e=1,i=[0,0];if(this.knife_data.totalX>this.knife_data.totalY){if(e=(this.width-364)/this.knife_data.totalX,i=[this.width-364,this.knife_data.totalY*e],i[1]>this.height-32-56-76){const t=this.knife_data.totalX/this.knife_data.totalY*(this.height-32-56-76);i=[t,this.height-32-56-76],e=t/this.knife_data.totalX}}else e=(this.height-32-56-76)/this.knife_data.totalY,i=[this.knife_data.totalX*e,this.height-32-56-76];const s=new r["a"](this.project_data,this.knife_data);s.setHasShadow(!0),await s.draw(i[0],i[1],e,"out",t),this.list.push({save_type:-1,screenshot:t.toDataURL()}),this.getList()},handleSubmit(){this.formData.project_name||this.$message.error("请输入文件名"),this.saveload=!0,this.$api.project.historySave({project_type:6,history_id:this.list[this.flag].id,project_name:this.formData.project_name}).then(t=>{this.saveload=!1,t&&(this.saveVisible=!1,this.$message.success("已保存至方案中心"))})},getList(){this.$api.project.historyList({project_id:this.project_data.id}).then(t=>{if(t){for(const e of t.data)e.createTime=l()(e.createTime).format("YYYY/MM/DD HH:mm");var e;if(this.list=this.list.concat(t.data),this.list.length>0)this.tempImg=(null===(e=this.list[0])||void 0===e?void 0:e.screenshot)||""}})},changeFlag(t){this.flag=t,this.tempImg=this.list[t].screenshot},recoveryVersion(){if(this.rebackLoadingvalue)return;this.$track({category:"recovery-history-version",action:"click"});const t=this;this.$confirm({title:"恢复到此版本后，当前版本将被覆盖，是否继续？",zIndex:4001,okText:"继续",onOk(){t.rebackLoadingvalue=!0,t.rebackLoading=t.$message.loading("恢复中请稍等",0),t.$api.project.historyRecover({history_id:t.list[t.flag].id,project_id:t.project_data.id}).then(e=>{setTimeout(t.rebackLoading,1),t.rebackLoadingvalue=!1,e&&window.location.reload()})},onCancel(){},class:"test"})},gotoSave(t){1==t.key&&(this.saveVisible=!0)},resize(){window.addEventListener("resize",this._handeResize)},_handeResize(){this.height=window.innerHeight,this.window=window.innerWidth}},beforeDestroy(){window.removeEventListener("resize",this._handeResize)}},p=u,f=(i("c82c"),i("2877")),m=Object(f["a"])(p,s,n,!1,null,null,null);e["default"]=m.exports},"9c56":function(t,e,i){"use strict";var s=i("fd32"),n=i.n(s);n.a},"9c9d":function(t,e,i){t.exports=i.p+"editor-assets/img/left-side-menu_template-actived.231bb699.svg"},"9cc2":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"background-skeleton-wrap",style:{transform:"scale("+(t.is_outside?1:-1)+", 1)"}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[t.knife_data?i("svg",{attrs:{x:"0",y:"0",width:"1mm",height:"1mm",overflow:"visible",viewBox:"0 0 1 1"}},[i("path",{directives:[{name:"show",rawName:"v-show",value:1==t.project_data.show_bleed_line&&t.project_data.bleedline,expression:"project_data.show_bleed_line == 1 && project_data.bleedline"}],attrs:{id:"svg-bleed",transform:"translate("+-parseInt(t.project_data.bleedline)+","+-parseInt(t.project_data.bleedline)+")","stroke-width":t.strokeWidth,stroke:t.stroke,fill:"none",d:t.knife_data.bleedsForSvg}}),t.knife_data.cuts&&t.knife_data.cuts.length?i("g",[i("path",{staticClass:"svg-cutting",attrs:{"stroke-width":t.strokeWidth,stroke:t.stroke,fill:"none",d:t.knife_data.cutsForSvg}})]):t._e(),t.knife_data.folds&&t.knife_data.folds.length?i("g",t._l(t.knife_data.folds,(function(e,s){return i("g",{key:s},[e.path?t._e():i("line",{attrs:{"stroke-width":t.strokeWidth,stroke:t.stroke,"stroke-dasharray":t.dashStyle,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}}),e.path?i("path",{attrs:{stroke:t.stroke,"stroke-width":t.strokeWidth,"stroke-dasharray":t.dashStyle,fill:"none",d:e.d}}):t._e()])})),0):t._e(),t.knife_data.holesForSvg&&t.knife_data.holesForSvg.length?i("g",t._l(t.knife_data.holesForSvg,(function(e,s){return i("path",{key:"holes"+s,style:{fill:"#ffffff"},attrs:{"stroke-width":t.strokeWidth,stroke:t.stroke,d:e}})})),0):t._e()]):t._e()])])},n=[],a=(i("5319"),i("5530")),r=i("5880"),o=i("5e9f");function l(t,e,i){const s=Object(o["b"])(Number.parseInt(t),Number.parseInt(e),Number.parseInt(i));return s.v<=.7?[255,255,255]:[120,120,120]}var c={data(){return{}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["project_data","scale","is_outside","knife_data"])),Object(r["mapGetters"])("editor-v2",["background"])),{},{stroke(){const{background:t}=this,e=this.project_data.def_line_color||this.$root.constant.DEFAULT_LINE_COLOR;if(this.show_axis_remark)return e;if(t&&t.indexOf("url")<=-1){const i=t.replace(/\s+/g,""),s=/rgba\((\d+),(\d+),(\d+),(\d+)\)/,n=s.exec(i);if(n){const t=l(n[1],n[2],n[3]);return`rgba(${t[0]}, ${t[1]},${t[2]}, 0.8)`}return e}return e},strokeWidth(){return.25/this.scale},dashStyle(){return`${.75/this.scale} ${.5/this.scale}`}}),methods:{}},h=c,d=(i("ee45"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,"d7a6ef00",null);e["default"]=u.exports},"9cc5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAI0lEQVQYV2P8////YQYGBhsGVHCE8f/////RBMFcKktgtRwAUn8Zdwi8nZgAAAAASUVORK5CYII="},"9cd7":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"editor-header min-width bg-white"},[s("div",{staticClass:"flex item-center container"},[s("a-popconfirm",{staticClass:"const",attrs:{"overlay-class-name":"backpopover",placement:"topLeft","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(e){return t.$router.push("/")}}},[s("template",{slot:"title"},[s("p",[t._v("您正在编辑此页面，确定要离开吗?")])]),s("div",{staticClass:"flex item-start"},[t.isMch?s("img",{staticClass:"logo",attrs:{id:"bxhlogo",src:t.mchConf.logo,title:"返回首页"}}):s("img",{staticClass:"logo",attrs:{id:"bxhlogo",src:i("1ae4"),alt:"包小盒官网",title:"返回首页"}})])],2),s("a-popover",{attrs:{placement:"bottom","overlay-class-name":"render-pop",trigger:"click"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[s("template",{slot:"content"},[s("div",[s("div",{staticClass:"file-item",on:{click:function(e){t.npvisible=!0}}},[t._v("新建设计方案")]),s("div",{staticClass:"file-item",on:{click:t.toBlankWinodw}},[t._v("查看我的设计方案")]),s("div",{staticClass:"file-item",on:{click:function(e){return t.$bus.$emit("show-psd-modal")}}},[t._v("导入psd")]),s("div",{staticClass:"file-item",on:{click:t.handleSaveAll}},[t._v("保存")]),s("div",{staticClass:"file-item",on:{click:t.handleSaveAnother}},[t._v("创建副本")]),s("div",{staticClass:"file-item",on:{click:t.openHistory}},[t._v(" 历史版本记录 "),s("img",{staticClass:"pointer",attrs:{src:i("0be3"),height:"14px",alt:""},on:{click:t.gotoVip}})]),t.is_contribute||t.isMch?t._e():s("div",{staticClass:"file-item",on:{click:t.commitDesign}},[t._v(" 投稿至模板中心 ")]),!t.is_contribute&&t.isMch?s("div",{staticClass:"file-item",on:{click:t.commitDesign}},[t._v(" 发布至模板中心 ")]):t._e(),(t.isAdmin||t.isMch)&&t.is_contribute?s("div",{staticClass:"file-item",on:{click:t.commitDesign}},[t._v(" 审核投稿作品 ")]):t._e(),s("div",{staticClass:"file-item border-t",on:{click:t.toBlankSocail}},[t._v("帮助中心")])])]),s("div",{staticClass:"ml-30",staticStyle:{"min-width":"62px"}},[s("div",{staticClass:"btn-new flex flex-center item-center",on:{click:function(e){t.filePickerVisible=!t.filePickerVisible}}},[s("div",{staticClass:"mr-4"},[t._v("文件")]),s("svg",{staticClass:"icon",attrs:{t:"1578128532967",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1945",width:"10",height:"8"}},[s("path",{attrs:{d:"M511.999488 819.413462 72.8374 204.586538 951.1626 204.586538Z","p-id":"1946",fill:"#333333"}})])])])],2),s("div",{staticClass:"const recall-group ml-12"},[s("a-tooltip",{staticClass:"item",attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",[t._v("撤回")])]),s("div",{staticClass:"recall-btn flex flex-center item-center"},[t.canRollback?s("img",{attrs:{src:i("33ba")},on:{click:t.handleRollBack}}):s("img",{attrs:{src:i("1b45")}})])],2),s("a-tooltip",{staticClass:"item",attrs:{placement:"bottom",disabled:!t.canReRollback}},[s("template",{slot:"title"},[s("span",[t._v("恢复")])]),s("div",{staticClass:"recall-btn flex flex-center item-center"},[t.canReRollback?s("img",{attrs:{src:i("eb6b")},on:{click:t.handleReRollBack}}):s("img",{attrs:{src:i("35ae")}})])],2),s("div",{staticClass:"fo-gray fo-12 header-time"},[s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",[t._v(t._s(t.updateLoading?"自动保存中...":t.updateTime))])]),t.updateLoading?s("div",{staticClass:"recall-btn flex flex-center item-center"},[s("icon-saving",{attrs:{"view-box":"0 0 22 23",width:"24",height:"24"}})],1):s("div",{staticClass:"recall-btn flex flex-center item-center",on:{click:t.handleUpdate}},[s("icon-saved",{attrs:{"view-box":"0 0 22 23",width:"24",height:"24"}})],1)],2)],1),s("a-popover",{attrs:{trigger:"click","overlay-class-name":"rename-wrapper",placement:"bottom"}},[s("template",{slot:"content"},[s("rename",{ref:"renameRef",attrs:{"project-name":t.$root.projectData.project_name,trademark:t.$root.projectData.extend_attrs?t.$root.projectData.extend_attrs.trademark:"","product-name":t.$root.projectData.extend_attrs?t.$root.projectData.extend_attrs.productName:""}})],1),s("div",{staticClass:"const rename-content flex item-center ml-16 text-pointer"},[s("div",{staticClass:"rename-title"},[t._v(t._s(t.renameTitle))]),s("div",{staticClass:"rename-suffix ml-4"},[t._v("- 编辑")])])],2)],1),s("a-popover",{attrs:{placement:"bottom","overlay-class-name":"app-tip",visible:t.tipVisible}},[s("div",{staticClass:"const-right top-btn flex flex-center item-center ml-auto"},[s("Service",{attrs:{"custom-style":{left:"",right:"15px"}}},[s("div",{ref:"riskRef",staticClass:"fo-default fo-14 text-center",staticStyle:{width:"98px"}},[s("img",{attrs:{src:i("8cbd"),alt:""}}),s("span",[t._v("客服")])])])],1),s("template",{slot:"content"},[s("div",{staticClass:"flex flex-between"},[s("span",{staticClass:"help-tip"},[t._v("帮助小提示")]),s("span",{staticClass:"close-tag text-pointer"},[s("a-dropdown",[s("a",{staticClass:"ant-dropdown-link",on:{click:function(t){return t.preventDefault()}}},[s("img",{staticClass:"ml-auto",attrs:{src:i("946d")}})]),s("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[s("a-menu-item",[s("a",{attrs:{href:"javascript:;"},on:{click:t.doNotShowItAnyMore}},[t._v("不再提示")])]),s("a-menu-item",[s("a",{attrs:{href:"javascript:;"},on:{click:t.handleIndexex}},[t._v("换一条")])])],1)],1),s("img",{attrs:{src:i("a061")},on:{click:function(e){t.tipVisible=!1}}})],1)]),s("div",{staticClass:"content pr-16 mt-8"},[t._v(" "+t._s(t.helper)+" ")]),s("div",{class:["loading-line",t.transition?"loading-transition":""],style:{width:t.count+"%"}})])],2),s("a-popover",{attrs:{placement:"bottom",trigger:"click","overlay-class-name":"risk-wrapper"},model:{value:t.riskVisible,callback:function(e){t.riskVisible=e},expression:"riskVisible"}},[s("template",{slot:"content"},[s("div",{staticClass:"px-12 py-16"},[s("risk",{ref:"riskRef",on:{close:function(e){t.riskVisible=!1},"risk-result":t.handleRiskResult}})],1)]),s("div",{staticClass:"const-right top-btn flex flex-center item-center"},[s("div",{ref:"riskRef",staticClass:"fo-default fo-14 text-center",staticStyle:{width:"144px"}},[s("img",{attrs:{src:i("4c8f"),alt:""}}),s("span",[t._v("印刷风险检测")])])])],2),!t.isCup||t.isCup&&t.canIDoAnimation?s("div",{staticClass:"const-right top-btn flex flex-center item-center",on:{click:function(e){return t.doRender()}}},[t._m(0)]):t._e(),s("div",{class:"const-right top-btn flex flex-center item-center ",on:{click:function(e){return t.doShare()}}},[s("div",{staticClass:"fo-default fo-14"},[t._v("分享")])]),s("a-button-group",{staticClass:"mr-8"},[s("a-button",{attrs:{type:"primary"},on:{click:t.outputShow}},[s("a-icon",{attrs:{type:"cloud-download"}}),t._v(" 导出 ")],1),0===t.$root.projectData.cate.complex_type?s("a-button",{attrs:{type:"primary"},on:{click:t.handleCreatePrintOrder}},[s("a-icon",{attrs:{type:"printer"}}),t._v(" 印刷 ")],1):t._e()],1),s("a-popover",{staticStyle:{display:"inline-block"},attrs:{placement:"bottomRight",trigger:"click","overlay-class-name":"render-pop"},model:{value:t.downloadVisible,callback:function(e){t.downloadVisible=e},expression:"downloadVisible"}},[s("template",{slot:"content"},[s("download-pop",{model:{value:t.downloadVisible,callback:function(e){t.downloadVisible=e},expression:"downloadVisible"}})],1)],2)],1)]),s("a-modal",{attrs:{centered:"",title:"创建副本",visible:t.saveVisible,footer:null,"z-index":4001},on:{cancel:function(e){t.saveVisible=!1}}},[s("a-form",{attrs:{form:t.form}},[s("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{"label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol,label:"文件名"}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["template_id"],expression:"['template_id']"}]})],1),s("a-form-item",{attrs:{"label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol,label:"文件名"}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["project_name"],expression:"['project_name']"}]})],1)],1),s("div",{staticClass:"save-footer flex flex-center item-center"},[s("a-button",{staticStyle:{width:"120px"},attrs:{size:"large"},on:{click:function(e){t.saveVisible=!1}}},[t._v("取消")]),s("a-button",{staticClass:"ml-24",staticStyle:{width:"120px"},attrs:{type:"primary",size:"large"},on:{click:t.handleSubmit}},[t._v("确认")])],1)],1),s("proofing",{model:{value:t.proofingVisible,callback:function(e){t.proofingVisible=e},expression:"proofingVisible"}}),s("share-model",{model:{value:t.shareVisible,callback:function(e){t.shareVisible=e},expression:"shareVisible"}}),s("resize-model",{attrs:{nptype:t.newprojectType,npvalue:t.newprojectValue},on:{npchange:t.npchange},model:{value:t.resizeVisible,callback:function(e){t.resizeVisible=e},expression:"resizeVisible"}}),t.$root.modeReady?s("order-drawer",{attrs:{load:t.orderLoad},model:{value:t.orderDrawerVisible,callback:function(e){t.orderDrawerVisible=e},expression:"orderDrawerVisible"}}):t._e(),s("new-project",{on:{"use-change":t.newProjectUseChange},model:{value:t.npvisible,callback:function(e){t.npvisible=e},expression:"npvisible"}}),s("commit",{attrs:{title:t.commitTitle},model:{value:t.commitVisible,callback:function(e){t.commitVisible=e},expression:"commitVisible"}}),t.renderVisible?s("render"):t._e(),s("render-old",{directives:[{name:"show",rawName:"v-show",value:t.renderOldVisible,expression:"renderOldVisible"}]}),s("product-order",{ref:"productOrderRef"})],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"fo-default fo-14 text-center",staticStyle:{width:"98px"}},[s("img",{staticStyle:{"margin-top":"3px"},attrs:{src:i("4b30"),alt:""}}),s("span",[t._v("渲染")]),s("div",{staticClass:"tag"},[t._v("棚拍")])])}],a=(i("ddb0"),i("5530")),r=i("5880"),o=i("87a0"),l=i("70d4"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"editor-share__model"},[t.$root.modeReady?s("a-modal",{attrs:{centered:"",title:"分享设计"+(t.version<t.projectVersion?"(有内容需要更新)":""),width:720,footer:null,"z-index":2e3},on:{change:function(e){return t.$emit("change",t.visibleValue)}},model:{value:t.visibleValue,callback:function(e){t.visibleValue=e},expression:"visibleValue"}},[s("a-spin",{attrs:{spinning:!1}},[s("div",{staticClass:"editor-share__model__body"},[s("div",{staticClass:"flex flex-center"},[s("div",{staticClass:"content"},[s("div",{staticClass:"text fo-14 bold"},[t._v("复制链接，发送给朋友预览")]),s("div",{staticClass:"url-box mt-16 flex flex-between item-center"},[s("input",{staticClass:"fo-14",attrs:{type:"text",id:"sharelink",readonly:""},domProps:{value:t.filter_url?t.apiurl+t.filter_url:""},on:{mousedown:t.selectText,mouseup:t.copyText}})]),s("div",{staticClass:"mt-16 flex flex-start item-center"},[s("a-checkbox",{attrs:{checked:t.is_public},on:{change:t.isPublicchange}},[t._v("允许他人查看")]),s("a-checkbox",{staticClass:"ml-24",attrs:{checked:t.is_copy},on:{change:t.isCopychange}},[t._v("允许被他人复制并编辑")])],1),s("div",{staticClass:"w-100 mt-20 mb-16 model-footer flex flex-start item-center"},[s("a-button",{on:{click:function(e){return t.copyLink()}}},[t._v("复制链接")]),t.version<t.projectVersion?s("a-button",{staticClass:"ml-12",attrs:{type:"primary",loading:t.spinning},on:{click:function(e){return t.addShare()}}},[t._v("更新发布")]):t._e()],1),s("div",{staticClass:"line-hori"}),s("div",{staticClass:"text fo-14 bold mt-20"},[t._v("发送二维码给微信好友")]),s("div",{staticClass:"qrcode mt-16 text-center"},[s("div",{staticClass:"img"},[s("img",{staticClass:"img",attrs:{src:t.qrcode||t.bxhqr}}),s("img",{staticClass:"img2",attrs:{src:i("7d90")}})]),s("a-button",{staticClass:"mt-16",on:{click:t.downloadQrcode}},[t._v("下载二维码")])],1)]),s("div",{staticClass:"line"}),s("div",{staticClass:"poster"},[s("div",{staticClass:"poster-content"},[s("div",{staticClass:"poster-bg",style:"background-image:url("+t.activeImg+")"},[s("div",{staticClass:"poster-bg-mask"})]),s("div",{staticClass:"poster-panel"},[s("div",{staticClass:"poster-panel-image flex flex-center item-center",style:"background-image:url("+t.activeImg+")"},[s("a-popover",{directives:[{name:"show",rawName:"v-show",value:t.activeImg,expression:"activeImg"}],attrs:{trigger:"click","overlay-class-name":"poster-replace-image"}},[s("template",{slot:"content"},[s("div",{staticClass:"title-bar p-20 flex flex-between"},[s("div",{staticClass:"fo-16 bold"},[t._v("渲染效果图册")]),s("a",{on:{click:function(e){t.visibleValue=!1,t.$bus.$emit("openRender",!0)}}},[t._v(" 继续渲染 >")])]),s("div",{staticClass:"pb-20"},[s("scrollbar",{attrs:{"max-height":"154px"}},[s("div",{style:"width:"+t.shareScrollContentWidth+"px"},t._l(t.list,(function(e,i){return s("div",{key:i,class:"sc-item "+(e.image===t.activeImg?"sc-item--active":""),style:"background-image:url("+t.thumbImg(e.image,140,140,100,"")+")",on:{click:function(i){i.stopPropagation(),t.activeImg=e.image}}},[s("div",{staticClass:"flex flex-end mt-8 mr-8"},[s("a-icon",{style:"color:#ff6634;opacity:"+(e.image===t.activeImg?1:0),attrs:{type:"check-circle",theme:"filled"}})],1)])})),0)])],1)]),s("div",{staticClass:"btn fo-white fo-14 flex flex-center item-center"},[s("div",{staticClass:"text-center"},[s("a-icon",{staticClass:"fo-20",attrs:{type:"file-image"}}),s("div",[t._v("替换")])],1)])],2),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.activeImg,expression:"!activeImg"}],staticClass:"text-center"},[s("img",{attrs:{src:i("e597"),width:"110px"}}),s("div",{staticClass:"fo-12 mt-12 go-gray",staticStyle:{color:"#aaa"}},[t._v(" 您当前还没有渲染效果图 ")]),s("a",{staticClass:"fo-12",on:{click:function(e){t.visibleValue=!1,t.$bus.$emit("openRender",!0)}}},[t._v(" 前往渲染 >")])])],1),s("div",{staticClass:"flex flex-start item-center poster-panel-user"},[s("div",{staticClass:"avatar",style:"background-image:url("+t.user.avatarUrl+")"}),s("div",{staticClass:"username"},[s("p",{staticStyle:{"text-overflow":"ellipsis",overflow:"hidden","max-width":"130px",height:"17px","white-space":"nowrap",float:"left"}},[t._v(" "+t._s(t.user.nickName)+" ")]),s("p",{staticStyle:{display:"inline",height:"17px","white-space":"nowrap",overflow:"hidden"}},[t._v(" 的作品 ")])])]),s("div",{staticClass:"flex flex-between item-end"},[s("div",{staticClass:"mt-16"},[s("div",{staticClass:"poster-text ell-2 fo-14",staticStyle:{height:"20px"}},[t._v(" "+t._s(t.$root.projectData.project_name)+" ")]),s("div",{staticClass:"flex flex-start item-center mt-12"},[s("div",{staticClass:"fo-10 fo-theme",staticStyle:{"margin-left":"-4px",transform:"scale(0.9, 0.9)"}},[t._v(" 扫码查看3D效果 "),s("a-icon",{staticStyle:{"font-size":"10px"},attrs:{type:"right-circle"}})],1)])]),s("div",{staticClass:"qrcode2"},[s("img",{staticStyle:{"margin-right":"-6px"},attrs:{src:t.qrcode||t.bxhqr,width:"58px"}}),s("img",{staticClass:"logo",attrs:{src:i("7d90")}})])])]),s("div",{staticClass:"text-center fo-white footer-text"},[t._v(" 由「包小盒」提供3D设计动力 | www.baoxiaohe.com ")])]),s("a-popover",{attrs:{trigger:"click",visible:t.showPhoneCode,"overlay-class-name":"poster-download",placement:"top"},on:{visibleChange:function(e){t.showPhoneCode=!1}}},[s("template",{slot:"content"},[s("div",{staticClass:"text-center fo-12 go-g"},[s("img",{attrs:{src:t.toPhoneQrcode,width:"150px"}}),s("br"),t._v(" 手机扫码 长按保存到手机 ")])]),s("a-dropdown-button",{staticClass:"mt-16",attrs:{disabled:!t.activeImg,type:"primary"},on:{click:t.downloadPoster}},[t._v(" 下载海报 "),s("a-menu",{attrs:{slot:"overlay",trigger:"click"},slot:"overlay"},[s("a-menu-item",{key:"1",staticClass:"px-20 py-12 pointer",on:{click:t.getPhoneQrcode}},[s("a-icon",{attrs:{type:"mobile"}}),t._v(" 发送到手机 ")],1)],1),s("a-icon",{attrs:{slot:"icon",type:"caret-down"},slot:"icon"})],1)],2)],1)])])])],1):t._e(),s("a-modal",{attrs:{width:420,footer:null,"z-index":2001,"mask-closable":!1,centered:!0},model:{value:t.showLoadModel,callback:function(e){t.showLoadModel=e},expression:"showLoadModel"}},[s("div",{staticClass:"flex flex-center item-center text-center",staticStyle:{width:"100%"}},[s("div",[s("div",{staticClass:"fo-16"},[t._v("正在生成你的分享链接...")]),s("div",{staticClass:"mt-16"},[s("a-spin",{attrs:{spinning:t.showLoadModel}},[s("a-icon",{staticStyle:{"font-size":"30px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1)],1)])])])],1)},h=[],d=(i("1276"),i("2ca0"),i("5cc6"),i("b39a"),i("2b3d"),i("f2a3")),u=i("52dd"),p=i("d055"),f=i.n(p),m=i("9217"),g=i.n(m),v=i("54c2"),b=i("6116"),y=i("5aa7"),_=i("054f"),x=i("c64e"),w=i.n(x),C=i("ed08"),k=i("989b"),S=i("0e9a"),A={components:{model:d["a"],checkbox:u["a"]},model:{prop:"visible",event:"change"},props:{visible:{type:Boolean,require:!0,default:!1},projectId:{type:Number,require:!1}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("property",["crafts"])),Object(r["mapState"])("profile",["user"])),Object(r["mapGetters"])(["projectVersion"])),{},{user_display(){return this.user.nickName.length<9?this.user.nickName:this.user.nickName.substr(0,9)+"... "}}),destroyed(){this.$bus.$off("screenshot")},watch:{visible(t){t&&(this.getShare(!0),this.getList())},projectId(t){this.getShare()},visibleValue(t){this.$emit("change",t)}},data(){return{visibleValue:this.visible,navFlag:0,version:1,nav:["分享并邀请","快捷分享"],is_public:!0,is_copy:!1,apiurl:window.location.origin+"/3d/share?filter_url=",filter_url:"",bxhqr:g.a,loading:!1,showPhoneCode:!1,qrcode:"",spinning:!1,shareInfo:{},list:[],showLoadModel:!1,query:{currentPage:1,pageSize:30,count:0},renderloading:!1,activeImg:"",shareScrollContentWidth:0,toPhoneQrcode:""}},mounted(){this.pro_id=this.$root.projectData.id,this.$bus.$on("screenshot-callback",t=>{this.$nextTick(()=>{this.drawShareImg(t)})})},methods:Object(a["a"])(Object(a["a"])({},Object(r["mapActions"])(["saveFullTemplate"])),{},{thumbImg:C["F"],getPhoneQrcode(t){this.getQrcode(this.getUrl(),"toPhoneQrcode"),this.showPhoneCode=!0},getUrl(){let t={size:750,avatar:this.user.avatarUrl.startsWith("//")?"https:"+this.user.avatarUrl:this.user.avatarUrl,nickname:this.user_display+" 的作品",background:"https:"+this.activeImg,render_img:"https:"+this.activeImg,project_name:this.$root.projectData.project_name,qrcode:"https://canvas.xinshu.me/qrcode/?string="+this.apiurl+this.filter_url,margin:0,size:"medium"};return t=Object(S["b"])(t),Object(S["a"])("https://canvas.xinshu.me/generate/share-model?",t)},downloadPoster(){Object(k["a"])(this.getUrl(),w()()+".jpeg")},getList(t){t?this.query.currentPage+=1:this.query.currentPage=1,this.renderloading=!0,this.$api.project.renderImages({project_id:this.$root.projectData.id,currentPage:this.query.currentPage,pageSize:this.query.pageSize}).then(e=>{var i;(this.renderloading=!1,e)&&(this.query.count=e.data.count,this.list=t?this.list.concat(e.data.data):e.data.data,this.activeImg=(null===(i=this.list[0])||void 0===i?void 0:i.image)||"");this.shareScrollContentWidth=148*this.list.length+32})},async drawShareImg(t){const e=document.getElementById("shareImg"),i=e.getContext("2d");i.fillStyle="#F15A0A",i.fillRect(0,0,375,730),i.drawImage(t[0],8,8,360,360),i.drawImage(t[1],8,368,120,120),i.drawImage(t[2],128,368,120,120),i.drawImage(t[3],248,368,120,120),i.fillStyle="#FFFFFF",i.fillRect(8,488,360,220)},isCopychange(t){this.is_copy=t.target.checked,this.updateLink({is_copy:this.is_copy?1:0})},isPublicchange(t){this.is_public=t.target.checked,this.updateLink({is_public:this.is_public?1:0})},updateLink(t,e){this.spinning=!0,t.project_id=this.$root.projectData.id,t.filter_url=this.filter_url,this.$api.share.update(t).then(t=>{this.spinning=!1,t&&(this.version=this.projectVersion,this.saveFullTemplate({projectData:this.$root.projectData,knifeData:this.$root.knifeData}),e&&this.getShare(),this.$message.success("同步成功"))})},selectText(){const t=document.getElementById("sharelink");t.select()},copyText(){this.$copyText(this.apiurl+this.filter_url).then(t=>{this.$message.success("复制成功");const e=document.getElementById("sharelink");e.select()}).catch(t=>{this.$message.error("复制失败")})},copyLink(){this.selectText(),this.copyText()},changeNav(t){this.navFlag=t},getShare(t){this.spinning=!0,this.$api.share.find({project_id:this.$root.projectData.id}).then(t=>{this.spinning=!1,t&&t.data.filter_url?(this.visibleValue=!0,this.filter_url=t.data.filter_url||"",this.is_public=1===t.data.is_public,this.is_copy=1===t.data.is_copy,this.shareInfo=t.data,this.getQrcode(this.apiurl+this.filter_url)):(this.filter_url="",this.addShare())})},getQrcode(t,e="qrcode"){f.a.toDataURL(t).then(t=>{this[e]=t}).catch(t=>{})},downloadQrcode(){if(!this.qrcode)return;const t=function(t){const e=t.split(";base64,"),i=e[0].split(":")[1],s=window.atob(e[1]),n=s.length,a=new Uint8Array(n);for(let r=0;r<n;++r)a[r]=s.charCodeAt(r);return new Blob([a],{type:i})},e=document.createElement("a"),i=t(this.qrcode),s=document.createEvent("HTMLEvents");s.initEvent("click",!0,!0),e.download=Date.now(),e.href=URL.createObjectURL(i),e.click()},checkMap(t){const e=[];for(const i of this.$root.projectData.designData)if(i.style.craft)for(const t of this.crafts)t.id===i.style.craft&&e.push(t.type);return e},async setFormData(t,e,i){let s=null,n="";1!=i?(s=t.toDataURL("image/jpeg",i),n=w()()+".jpg"):(s=t.toDataURL("image/png"),n=w()()+".png");const a=new FormData;a.append("file",Object(b["d"])(s));const r=await _["a"].putFile(a.get("file"),{xapi:"project-share",rename:n,type:JSON.stringify({type:4,project_id:this.$root.projectData.id}),scope:!1});return r},async addShare(){let t;this.$track({category:"share-3d",action:"click"}),this.spinning=!0,this.filter_url?t=this.$message.loading("正在同步中..",0):this.showLoadModel=!0,this.loading=!0;const{canvas:e,canvas2:i,canvas3:s,canvas4:n,canvas5:a,canvas6:r}=await this.drawPic(),[o,l,c,h,d,u]=await Promise.all([this.setFormData(e,"outside_img",.95),this.setFormData(i,"inside_img",.7),this.setFormData(s,"knife_img",1),this.setFormData(n,"specular_img",.7),this.setFormData(a,"bump_img",.7),this.setFormData(r,"roughness_img",.7)]);if(1e3==o.errno||1e3==l.errno||1e3==c.errno)return this.$message.error("上传分享图失败，请重新上传"),void _["a"].removeStorage();o&&l&&c&&(this.loading=!1,this.filter_url?(this.updateLink({outside_img:o.data.url,inside_img:l.data.url,knife_img:c.data.url,specular_img:h.data.url,bump_img:d.data.url,roughness_img:u.data.url},!0),setTimeout(t,1)):this.$api.share.add({project_id:this.$root.projectData.id,is_public:this.is_public?1:0,is_copy:this.is_copy?1:0,outside_img:o.data.url,inside_img:l.data.url,knife_img:c.data.url,specular_img:h.data.url,bump_img:d.data.url,roughness_img:u.data.url}).then(t=>{this.loading=!1,this.spinning=!1,this.showLoadModel=!1,this.visibleValue=!0,t&&(this.version=this.projectVersion,this.filter_url=t.data.filter_url,this.getShare(),this.$message.success("同步成功"),this.getQrcode(this.apiurl+this.filter_url))}))},async drawPic(){if(!this.$root.modeReady)return void this.$message.error("项目数据错误");const t=document.createElement("canvas"),e=[0,0],i=3240,s=this.$root.knifeData.totalX,n=this.$root.knifeData.totalY;s>=n?(t.width=i,t.height=i/s*n):(t.height=i,t.width=i/n*s);const a=t.width/s,r=new y["a"](this.$root.projectData,this.$root.knifeData,!0);await r.draw(t.width,t.height,a,"out",t,"",this.crafts);const o=document.createElement("canvas");await r.draw(t.width,t.height,a,"in",o);const l=document.createElement("canvas");await r.draw(t.width,t.height,a,"out",l,"gilding",this.crafts);const c=document.createElement("canvas");await r.draw(t.width,t.height,a,"out",c,"bump",this.crafts);const h=document.createElement("canvas");await r.draw(t.width,t.height,a,"out",h,"roughness",this.crafts);const d=1080,u=document.createElement("canvas");s>n?(u.width=d,u.height=d/s*n):(u.height=d,u.width=d/n*s);const p=t.width/s,f=u.getContext("2d");return v["a"].drawFoldsLine(f,this.$root.knifeData.folds,[p,p],e,{strokeStyle:"#ffffff"}),v["a"].drawCutsLine(f,this.$root.knifeData.cuts,[p,p],e,{fill:!1,strokeStyle:"#ffffff"}),v["a"].drawHoles(f,this.$root.knifeData.holes,[p,p],e,{fill:!0,strokeStyle:"#ffffff"}),{canvas:t,canvas2:o,canvas3:u,canvas4:l,canvas5:c,canvas6:h}}})},O=A,j=(i("1d6f"),i("2877")),M=Object(j["a"])(O,c,h,!1,null,null,null),I=M.exports,T=i("0d67"),E=i("63bf"),D=i("b46a"),L=i("0533"),P=i("ce33"),R=i("9c25"),z=i("5a0c"),N=i.n(z),B=i("365c"),F=i("d39f"),$=i("99ed"),U=i("d7c8"),H=i("d03e"),V=i("a5d5"),G=i("89f0"),W=i("b6c6"),Y=i("3357"),q=i("f2a2"),X=i("da71");const Q={labelCol:{span:6},wrapperCol:{span:14}},Z={labelCol:{span:6},wrapperCol:{span:14}};var K={mixins:[Y["a"]],components:{newProject:l["default"],ShareModel:I,Service:T["a"],ResizeModel:E["default"],OrderDrawer:D["default"],commit:R["default"],Proofing:F["default"],DownloadPop:$["default"],Risk:L["default"],Render:U["default"],IconSaved:V["a"],IconSaving:G["a"],Rename:q["default"],productOrder:P["default"],RenderOld:H["default"]},data(){return{indexex:0,count:0,transition:!1,tipVisible:!0,timeout:null,is_up:!1,proofingVisible:!1,basePath:"/components/breadcrumb",editable:!1,shareVisible:!1,saveVisible:!1,confirmLoading:!1,filePickerVisible:!1,resizeVisible:!1,downloadVisible:!1,riskVisible:!1,renameVisible:!1,orderDrawerVisible:!1,productOrderModalVisible:!1,npvisible:!1,formItemLayout:Q,formTailLayout:Z,project:{},visible:!1,updateTime:"保存",orderLoad:!1,saveLoad:!1,newprojectType:!1,newprojectValue:null,commitVisible:!1,commitTitle:"",is_admin:0,is_contribute:!1,load:!1,routes:[{breadcrumbName:this.$root.projectData.project_name,edit:!0},{breadcrumbName:"外侧面",children:[{key:"FRONT",breadcrumbName:"外侧面"},{key:"BACKEND",breadcrumbName:"内侧面"}]}],renderWindow:null}},watch:{projectVersion(t){this.routes[0].breadcrumbName=this.$root.projectData.project_name||""},updateLoading(t){t&&(this.updateTimeFilter(),setTimeout(()=>{this[o["B"]](!1)},3e3))}},beforeCreate(){this.form=this.$form.createForm(this,{name:"time_related_controls"})},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("config",["helpers"])),Object(r["mapState"])(["projectVersion","updateLoading","isInside"])),Object(r["mapGetters"])(["canRollback","canReRollback"])),Object(r["mapGetters"])("profile",["isMch","isVip","isAdmin","mchConf"])),Object(r["mapGetters"])("render",["renderVisible","canIDoAnimation","renderOldVisible"])),Object(r["mapGetters"])("project",["isCup"])),Object(r["mapState"])("profile",["vip","user"])),{},{helper(){return this.helpers[this.indexex]},renameTitle(){const t=this.$root.projectData.extend_attrs||{},e=[t.trademark,t.productName].filter(t=>t).join("-");return e?`${e}: ${this.$root.projectData.project_name}`:this.$root.projectData.project_name}}),mounted(){this.fetchHelpers(),this.initHelpCount(),this.is_contribute="contribute"===this.$route.query.type,this[o["B"]](!1),this.$bus.$on("show-print-and-order",()=>{this.proofingVisible=!0}),this.$bus.$on("openRender",t=>{this.$store.dispatch("render/saveRenderVisible",t)}),window.addEventListener("message",this.receiveMessage)},beforeDestroy(){clearInterval(this.timeout),this.timeout=null,this.$bus.$off("show-print-and-order"),this.$bus.$off("openRender"),window.removeEventListener("message",this.receiveMessage)},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({receiveMessage(t){"close"===t.data?(this.$store.dispatch("render/saveRenderVisible",!1),this.$store.dispatch("render/saveRenderOldVisible",!1)):"openOld"===t.data&&(this.$store.dispatch("render/saveRenderVisible",!1),this.$store.dispatch("render/saveRenderOldVisible",!0))}},Object(r["mapActions"])(["rollbackHistory","reRollbackHistory","saveFullTemplate","saveForceCreate","saveIsInside"])),Object(r["mapMutations"])([o["B"]])),Object(r["mapMutations"])("profile",[W["d"]])),Object(r["mapActions"])("config",["fetchHelpers"])),Object(r["mapMutations"])("render",["setRenderType"])),{},{async doShare(){this.$route.query.type&&"preview"===this.$route.query.type?(this.handleUpdate(),await this.$store.dispatch("saveForceCreate",this),this.showRenameBefore("share")):this.shareVisible=!0},handleIndexex(){this.indexex++,this.indexex===this.helpers.length&&(this.indexex=0),this.initHelpCount()},doNotShowItAnyMore(){this.hideTipsFor("headerTip"),this.tipVisible=!1},initHelpCount(){this.showTipsFor("headerTip")||(this.tipVisible=!1),this.timeout&&(clearInterval(this.timeout),this.transition=!1,this.count=0),this.timeout=setInterval(()=>{this.transition=!0,this.$nextTick(()=>{100===this.count?(this.tipVisible=!1,clearInterval(this.timeout),this.transition=!1,this.timeout=null):this.count+=10})},2e3)},gotoVip(){this[W["d"]](!0)},async handleShare(){"preview"===this.$route.query.type&&await this.$store.dispatch("saveForceCreate",this),this.shareVisible=!0},openHistory(){this.visible=!1,this.isVip?this.$emit("updateHistoryShow",!0):this.gotoVip()},async outputShow(){"preview"===this.$route.query.type&&await this.$store.dispatch("saveForceCreate",this),await this.saveFullTemplate({projectData:this.$root.projectData,knifeData:this.$root.knifeData}),this.downloadVisible=!0},showProductOrder(){this.productOrderModalVisible=!0},handleSaveAnother(){this.saveVisible=!0,this.$nextTick(()=>{const{project_name:t,id:e}=this.$root.projectData;this.form.setFieldsValue({template_id:e,project_name:Object(b["i"])(t)})})},handleSubmit(){this.form.validateFields(async(t,e)=>{if(t)return;const i=Object(a["a"])({},e);i.project_name||this.$message.error("请输入文件名"),await this.saveFullTemplate({projectData:this.$root.projectData,knifeData:this.$root.knifeData});const s=await Object(B["copyDesign"])(i);this.saveVisible=!1;const{id:n}=s.data;this.$message.success("操作成功"),window.location.href="/design?id="+n})},async commitDesign(){"preview"!==this.$route.query.type?(await this.saveFullTemplate({projectData:this.$root.projectData,knifeData:this.$root.knifeData}),this.commitVisible=!0,this.commitTitle=this.is_contribute?"审核投稿作品":"投稿至模板中心",this.isMch&&!this.is_contribute&&(this.commitTitle="发布至模版中心")):await this.$store.dispatch("saveForceCreate",this)},toBlankSocail(){window.open("https://help.baoxiaohe.com/support/")},changeBreadName(t){const e=[...this.routes];e[1].breadcrumbName=t,this.routes=[...e]},closeRisk(){this.$refs.riskRef.parentNode.click()},chooseBread(t){this.editable=!0},toBlankWinodw(){window.open("/mydesign")},npchange(){this.newprojectValue=null,this.newprojectType=!1},newProjectUseChange(t){this.newprojectValue=t,this.newprojectType=!0,this.resizeVisible=!0},async doRender(){const t=this.$message.loading("加载中",0);this.setRenderType("image"),this.$route.query.type&&"preview"===this.$route.query.type?(await this.handleUpdate(),this.$store.dispatch("render/saveRenderVisible",!0)):(await this.saveFullTemplate({projectData:this.$root.projectData,isAuto:!1,knifeData:this.$root.knifeData}),this.$store.dispatch("render/saveRenderVisible",!0)),setTimeout(t,0)},async handleUpdate(){"preview"!==this.$route.query.type?this.saveLoad||(this.$emit("update",""),this.saveLoad=!0,setTimeout(()=>{this.saveLoad=!1},3e3)):await this.$store.dispatch("saveForceCreate",this)},filePickerChange(t){this.filePickerVisible=t},updateProject(t){this.$root.projectData.project_name=t.target.value||"",this.routes[0].breadcrumbName=t.target.value||"未命名"},updateTimeFilter(){this.updateTime=N()(Date.now()).format("HH:mm")+" 已保存"},handleRollBack(){this.rollbackHistory(this),this.$store.commit("increaseCanvasVersion",this.isInside)},handleReRollBack(){this.reRollbackHistory(this),this.$store.commit("increaseCanvasVersion",this.isInside)},handleSaveAll(){this.saveFullTemplate({projectData:this.$root.projectData,isAuto:!1,knifeData:this.$root.knifeData}),this.visible=!1},tempTest(){this.$message.info("正在紧急开发中，敬请期待！")},navigateTo(t){"share"===t?this.shareVisible=!0:"render"===t&&this.$store.dispatch("render/saveRenderVisible",!0)},async handleCreatePrintOrder(){this.$track({category:"ClickPrintButton",action:"click"}),this.$root.projectData.science_id!==X["CUSTOMIZED_SCIENCE_ID"]?(this.is_up=!1,this.riskVisible=!0,await this.saveForceCreate(this),await this.saveFullTemplate({projectData:this.$root.projectData,isAuto:!1,knifeData:this.$root.knifeData}),this.$nextTick(()=>{this.$refs.riskRef.beginRiskCheck(!0)})):this.$message.error("自定义材质暂时不支持印刷下单，请联系客服")},handleRiskResult({hasRisk:t}){this.$refs.productOrderRef.show({hasRisk:t})}})},J=K,tt=(i("8b9e"),Object(j["a"])(J,s,n,!1,null,null,null));e["default"]=tt.exports},"9cf9":function(t,e){var i=Math.round;function s(t,e,s){if(e){var n=e.x1,r=e.x2,o=e.y1,l=e.y2;t.x1=n,t.x2=r,t.y1=o,t.y2=l;var c=s&&s.lineWidth;c&&(i(2*n)===i(2*r)&&(t.x1=t.x2=a(n,c,!0)),i(2*o)===i(2*l)&&(t.y1=t.y2=a(o,c,!0)))}}function n(t,e,i){if(e){var s=e.x,n=e.y,r=e.width,o=e.height;t.x=s,t.y=n,t.width=r,t.height=o;var l=i&&i.lineWidth;l&&(t.x=a(s,l,!0),t.y=a(n,l,!0),t.width=Math.max(a(s+r,l,!1)-t.x,0===r?0:1),t.height=Math.max(a(n+o,l,!1)-t.y,0===o?0:1))}}function a(t,e,s){if(!e)return t;var n=i(2*t);return(n+i(e))%2===0?n/2:(n+(s?1:-1))/2}e.subPixelOptimizeLine=s,e.subPixelOptimizeRect=n,e.subPixelOptimize=a},"9cfe":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.previewImage?i("div",{staticClass:"preview"},[i("div",{staticClass:"big-image",style:{backgroundImage:"url("+t.previewImage+")"}})]):t._e()},n=[],a=i("5530"),r=i("71c7"),o=i("5880"),l={data(){return{previewImage:null}},computed:Object(a["a"])(Object(a["a"])({},Object(o["mapState"])("editor-v2",["project_data","knife_data","isCup","scale","is_outside","last_saved_local_history_ts","element_craft_list"])),{},{crafts(){return this.element_craft_list}}),methods:{async initImage(){const t=new r["a"](this.project_data,this.knife_data,!1),e=document.createElement("canvas"),i=260,s=this.knife_data.totalX,n=this.knife_data.totalY;s>=n?(e.width=i,e.height=i/s*n):(e.height=i,e.width=i/n*s);const a=e.width/s;await t.draw(e.width,e.height,a,"out",e,"",this.crafts),this.previewImage=e.toDataURL()}}},c=l,h=(i("a83d"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,"38f44ec8",null);e["default"]=d.exports},"9d8a":function(t,e,i){"use strict";function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var n={};function a(t,e,i){function a(t,i,s){return"string"===typeof e?e:e(t,i,s)}i||(i=Error);var r=function(t){function e(e,i,s){return t.call(this,a(e,i,s))||this}return s(e,t),e}(i);r.prototype.name=i.name,r.prototype.code=t,n[t]=r}function r(t,e){if(Array.isArray(t)){var i=t.length;return t=t.map((function(t){return String(t)})),i>2?"one of ".concat(e," ").concat(t.slice(0,i-1).join(", "),", or ")+t[i-1]:2===i?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}function o(t,e,i){return t.substr(!i||i<0?0:+i,e.length)===e}function l(t,e,i){return(void 0===i||i>t.length)&&(i=t.length),t.substring(i-e.length,i)===e}function c(t,e,i){return"number"!==typeof i&&(i=0),!(i+e.length>t.length)&&-1!==t.indexOf(e,i)}a("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),a("ERR_INVALID_ARG_TYPE",(function(t,e,i){var s,n;if("string"===typeof e&&o(e,"not ")?(s="must not be",e=e.replace(/^not /,"")):s="must be",l(t," argument"))n="The ".concat(t," ").concat(s," ").concat(r(e,"type"));else{var a=c(t,".")?"property":"argument";n='The "'.concat(t,'" ').concat(a," ").concat(s," ").concat(r(e,"type"))}return n+=". Received type ".concat(typeof i),n}),TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n},"9dac":function(t,e,i){var s={"./404":["8cdb",9,"chunk-6fc07222"],"./404.vue":["8cdb",9,"chunk-6fc07222"],"./business/business":["b593",9,"chunk-6fc07222","chunk-84a4d64a"],"./business/business.jsx":["b593",9,"chunk-6fc07222","chunk-84a4d64a"],"./business/business.less":["af90",7,"chunk-6fc07222"],"./business/components/ColorButton":["04d3",9],"./business/components/ColorButton.jsx":["04d3",9],"./business/components/ColorButton.less":["8175",7],"./business/components/header":["12f2",9],"./business/components/header.jsx":["12f2",9],"./business/components/header.less":["27bd",7],"./design":["5651",9],"./design-v2":["41c5",9,"chunk-24753293","chunk-6fc07222","chunk-84a4d64a"],"./design-v2/":["41c5",9,"chunk-24753293","chunk-6fc07222","chunk-84a4d64a"],"./design-v2/components/bottom-buttons":["0d05",9],"./design-v2/components/bottom-buttons/":["0d05",9],"./design-v2/components/bottom-buttons/canvas-scaler":["caa8",9],"./design-v2/components/bottom-buttons/canvas-scaler.vue":["caa8",9],"./design-v2/components/bottom-buttons/index":["0d05",9],"./design-v2/components/bottom-buttons/index.vue":["0d05",9],"./design-v2/components/bottom-buttons/mini-map":["153e",9],"./design-v2/components/bottom-buttons/mini-map.vue":["153e",9],"./design-v2/components/check-browser-is-chrome-modal":["04a8",9],"./design-v2/components/check-browser-is-chrome-modal.vue":["04a8",9],"./design-v2/components/context-menu":["02aa",9],"./design-v2/components/context-menu.vue":["02aa",9],"./design-v2/components/editor-center":["cc24",9,"chunk-24753293","chunk-84a4d64a"],"./design-v2/components/editor-center/":["cc24",9,"chunk-24753293","chunk-84a4d64a"],"./design-v2/components/editor-center/arrow-pair":["7a01",9],"./design-v2/components/editor-center/arrow-pair.vue":["7a01",9],"./design-v2/components/editor-center/background":["23ab",9],"./design-v2/components/editor-center/background-skeleton":["9cc2",9],"./design-v2/components/editor-center/background-skeleton.vue":["9cc2",9],"./design-v2/components/editor-center/background.vue":["23ab",9],"./design-v2/components/editor-center/blank-canvas-tip":["8a58",9],"./design-v2/components/editor-center/blank-canvas-tip.vue":["8a58",9],"./design-v2/components/editor-center/cutout-bar":["e3a1",9],"./design-v2/components/editor-center/cutout-bar.vue":["e3a1",9],"./design-v2/components/editor-center/element":["866c",9,"chunk-24753293","chunk-84a4d64a"],"./design-v2/components/editor-center/element-barcode":["0530",9],"./design-v2/components/editor-center/element-barcode.vue":["0530",9],"./design-v2/components/editor-center/element-font":["fb6b",9],"./design-v2/components/editor-center/element-font.vue":["fb6b",9],"./design-v2/components/editor-center/element-group":["7f41",9,"chunk-24753293"],"./design-v2/components/editor-center/element-group.vue":["7f41",9,"chunk-24753293"],"./design-v2/components/editor-center/element-image":["6206",9],"./design-v2/components/editor-center/element-image.vue":["6206",9],"./design-v2/components/editor-center/element-qrcode":["b308",9],"./design-v2/components/editor-center/element-qrcode.vue":["b308",9],"./design-v2/components/editor-center/element-table/add":["4fba",9,"chunk-24753293"],"./design-v2/components/editor-center/element-table/add.jsx":["4fba",9,"chunk-24753293"],"./design-v2/components/editor-center/element-table/add.less":["9525",7,"chunk-24753293"],"./design-v2/components/editor-center/element-table/header":["94f2",9,"chunk-24753293"],"./design-v2/components/editor-center/element-table/header.jsx":["94f2",9,"chunk-24753293"],"./design-v2/components/editor-center/element-table/header.less":["e694",7,"chunk-24753293"],"./design-v2/components/editor-center/element-table/select":["e9e0",9,"chunk-24753293"],"./design-v2/components/editor-center/element-table/select.jsx":["e9e0",9,"chunk-24753293"],"./design-v2/components/editor-center/element-table/select.less":["f841",7,"chunk-24753293"],"./design-v2/components/editor-center/element-table/sider":["5036",9,"chunk-24753293"],"./design-v2/components/editor-center/element-table/sider.jsx":["5036",9,"chunk-24753293"],"./design-v2/components/editor-center/element-table/sider.less":["a53c",7,"chunk-24753293"],"./design-v2/components/editor-center/element-table/table":["68df",9,"chunk-24753293"],"./design-v2/components/editor-center/element-table/table.jsx":["68df",9,"chunk-24753293"],"./design-v2/components/editor-center/element-table/table.less":["605a",7,"chunk-24753293"],"./design-v2/components/editor-center/element.vue":["866c",9,"chunk-24753293","chunk-84a4d64a"],"./design-v2/components/editor-center/guide-line":["b911",9],"./design-v2/components/editor-center/guide-line.vue":["b911",9],"./design-v2/components/editor-center/high-light-line":["b79e",9],"./design-v2/components/editor-center/high-light-line.vue":["b79e",9],"./design-v2/components/editor-center/index":["cc24",9,"chunk-24753293","chunk-84a4d64a"],"./design-v2/components/editor-center/index.vue":["cc24",9,"chunk-24753293","chunk-84a4d64a"],"./design-v2/components/editor-center/multi-control":["1707",9],"./design-v2/components/editor-center/multi-control.vue":["1707",9],"./design-v2/components/editor-center/single-control":["a048",9],"./design-v2/components/editor-center/single-control.vue":["a048",9],"./design-v2/components/editor-center/tailor-control":["13b3",9,"chunk-84a4d64a"],"./design-v2/components/editor-center/tailor-control/":["13b3",9,"chunk-84a4d64a"],"./design-v2/components/editor-center/tailor-control/control-point":["c95d",9],"./design-v2/components/editor-center/tailor-control/control-point.vue":["c95d",9],"./design-v2/components/editor-center/tailor-control/image":["5612",9],"./design-v2/components/editor-center/tailor-control/image.vue":["5612",9],"./design-v2/components/editor-center/tailor-control/index":["13b3",9,"chunk-84a4d64a"],"./design-v2/components/editor-center/tailor-control/index.vue":["13b3",9,"chunk-84a4d64a"],"./design-v2/components/editor-center/tailor-control/util":["abd4",9],"./design-v2/components/editor-center/tailor-control/util.js":["abd4",9],"./design-v2/components/editor-center/zoomable-canvas":["dcaf",9,"chunk-24753293","chunk-84a4d64a"],"./design-v2/components/editor-center/zoomable-canvas.vue":["dcaf",9,"chunk-24753293","chunk-84a4d64a"],"./design-v2/components/editor-header-v1":["38f2",9,"chunk-6fc07222","chunk-84a4d64a"],"./design-v2/components/editor-header-v1/":["38f2",9,"chunk-6fc07222","chunk-84a4d64a"],"./design-v2/components/editor-header-v1/Rename":["485e",9],"./design-v2/components/editor-header-v1/Rename.vue":["485e",9],"./design-v2/components/editor-header-v1/RenameModal":["9003",9,"chunk-6fc07222"],"./design-v2/components/editor-header-v1/RenameModal.vue":["9003",9,"chunk-6fc07222"],"./design-v2/components/editor-header-v1/commit":["e7a5",9],"./design-v2/components/editor-header-v1/commit/":["e7a5",9],"./design-v2/components/editor-header-v1/commit/index":["e7a5",9],"./design-v2/components/editor-header-v1/commit/index.less":["eedd",7,"chunk-24753293"],"./design-v2/components/editor-header-v1/commit/index.vue":["e7a5",9],"./design-v2/components/editor-header-v1/components/check-before-printing-button":["6316",9],"./design-v2/components/editor-header-v1/components/check-before-printing-button.vue":["6316",9],"./design-v2/components/editor-header-v1/components/customer-service-button":["248f",9],"./design-v2/components/editor-header-v1/components/customer-service-button.vue":["248f",9],"./design-v2/components/editor-header-v1/components/d3-render-button":["467d",9],"./design-v2/components/editor-header-v1/components/d3-render-button.vue":["467d",9],"./design-v2/components/editor-header-v1/components/export-button":["e1042",9],"./design-v2/components/editor-header-v1/components/export-button.vue":["e1042",9],"./design-v2/components/editor-header-v1/components/printing-button":["ec51",9],"./design-v2/components/editor-header-v1/components/printing-button.vue":["ec51",9],"./design-v2/components/editor-header-v1/components/share-button":["b92a",9],"./design-v2/components/editor-header-v1/components/share-button.vue":["b92a",9],"./design-v2/components/editor-header-v1/copyright":["5a2e",9,"chunk-24753293"],"./design-v2/components/editor-header-v1/copyright/":["5a2e",9,"chunk-24753293"],"./design-v2/components/editor-header-v1/copyright/index":["5a2e",9,"chunk-24753293"],"./design-v2/components/editor-header-v1/copyright/index.less":["9eab",7,"chunk-6fc07222"],"./design-v2/components/editor-header-v1/copyright/index.vue":["5a2e",9,"chunk-24753293"],"./design-v2/components/editor-header-v1/downloadv2":["85bd",9],"./design-v2/components/editor-header-v1/downloadv2/":["85bd",9],"./design-v2/components/editor-header-v1/downloadv2/ExportPdfProgressModal":["7acd",9],"./design-v2/components/editor-header-v1/downloadv2/ExportPdfProgressModal.vue":["7acd",9],"./design-v2/components/editor-header-v1/downloadv2/SuccessModal":["49c5",9],"./design-v2/components/editor-header-v1/downloadv2/SuccessModal.vue":["49c5",9],"./design-v2/components/editor-header-v1/downloadv2/index":["85bd",9],"./design-v2/components/editor-header-v1/downloadv2/index.less":["a8c5",7,"chunk-24753293"],"./design-v2/components/editor-header-v1/downloadv2/index.vue":["85bd",9],"./design-v2/components/editor-header-v1/history":["9c47",9],"./design-v2/components/editor-header-v1/history/":["9c47",9],"./design-v2/components/editor-header-v1/history/index":["9c47",9],"./design-v2/components/editor-header-v1/history/index.less":["e62e",7,"chunk-24753293"],"./design-v2/components/editor-header-v1/history/index.vue":["9c47",9],"./design-v2/components/editor-header-v1/index":["38f2",9,"chunk-6fc07222","chunk-84a4d64a"],"./design-v2/components/editor-header-v1/index.less":["bfae",7,"chunk-6fc07222"],"./design-v2/components/editor-header-v1/index.vue":["38f2",9,"chunk-6fc07222","chunk-84a4d64a"],"./design-v2/components/editor-header-v1/newpro":["38f6",9,"chunk-84a4d64a"],"./design-v2/components/editor-header-v1/newpro/":["38f6",9,"chunk-84a4d64a"],"./design-v2/components/editor-header-v1/newpro/components/Good":["3390",9,"chunk-84a4d64a"],"./design-v2/components/editor-header-v1/newpro/components/Good/":["3390",9,"chunk-84a4d64a"],"./design-v2/components/editor-header-v1/newpro/components/Good/index":["3390",9,"chunk-84a4d64a"],"./design-v2/components/editor-header-v1/newpro/components/Good/index.jsx":["3390",9,"chunk-84a4d64a"],"./design-v2/components/editor-header-v1/newpro/components/Good/index.less":["2614",7],"./design-v2/components/editor-header-v1/newpro/index":["38f6",9,"chunk-84a4d64a"],"./design-v2/components/editor-header-v1/newpro/index.less":["112a",7,"chunk-6fc07222"],"./design-v2/components/editor-header-v1/newpro/index.vue":["38f6",9,"chunk-84a4d64a"],"./design-v2/components/editor-header-v1/order":["3433",9],"./design-v2/components/editor-header-v1/order/":["3433",9],"./design-v2/components/editor-header-v1/order/index":["3433",9],"./design-v2/components/editor-header-v1/order/index.less":["5d81",7,"chunk-24753293"],"./design-v2/components/editor-header-v1/order/index.vue":["3433",9],"./design-v2/components/editor-header-v1/productOrder":["8506",9],"./design-v2/components/editor-header-v1/productOrder/":["8506",9],"./design-v2/components/editor-header-v1/productOrder/index":["8506",9],"./design-v2/components/editor-header-v1/productOrder/index.vue":["8506",9],"./design-v2/components/editor-header-v1/productOrder/preview":["9cfe",9],"./design-v2/components/editor-header-v1/productOrder/preview.vue":["9cfe",9],"./design-v2/components/editor-header-v1/proofing":["07a7",9],"./design-v2/components/editor-header-v1/proofing/":["07a7",9],"./design-v2/components/editor-header-v1/proofing/index":["07a7",9],"./design-v2/components/editor-header-v1/proofing/index.less":["6a45",7,"chunk-24753293"],"./design-v2/components/editor-header-v1/proofing/index.vue":["07a7",9],"./design-v2/components/editor-header-v1/resize":["dba3",9],"./design-v2/components/editor-header-v1/resize/":["dba3",9],"./design-v2/components/editor-header-v1/resize/index":["dba3",9],"./design-v2/components/editor-header-v1/resize/index.less":["8a62",7,"chunk-24753293"],"./design-v2/components/editor-header-v1/resize/index.vue":["dba3",9],"./design-v2/components/editor-header-v1/risk":["ab73",9],"./design-v2/components/editor-header-v1/risk/":["ab73",9],"./design-v2/components/editor-header-v1/risk/index":["ab73",9],"./design-v2/components/editor-header-v1/risk/index.vue":["ab73",9],"./design-v2/components/left-side-menu-v1":["6126",9,"chunk-84a4d64a"],"./design-v2/components/left-side-menu-v1/":["6126",9,"chunk-84a4d64a"],"./design-v2/components/left-side-menu-v1/components/avatar-for-enterprise":["b74a",9,"chunk-84a4d64a"],"./design-v2/components/left-side-menu-v1/components/avatar-for-enterprise.vue":["b74a",9,"chunk-84a4d64a"],"./design-v2/components/left-side-menu-v1/components/avatar-for-www":["bd16",9,"chunk-84a4d64a"],"./design-v2/components/left-side-menu-v1/components/avatar-for-www.vue":["bd16",9,"chunk-84a4d64a"],"./design-v2/components/left-side-menu-v1/components/help":["717d",9,"chunk-84a4d64a"],"./design-v2/components/left-side-menu-v1/components/help.vue":["717d",9,"chunk-84a4d64a"],"./design-v2/components/left-side-menu-v1/index":["6126",9,"chunk-84a4d64a"],"./design-v2/components/left-side-menu-v1/index.vue":["6126",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1":["0b79",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/":["0b79",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/background-panel":["490d",9],"./design-v2/components/left-side-panel-v1/background-panel.vue":["490d",9],"./design-v2/components/left-side-panel-v1/components/resizeable":["6b13",9],"./design-v2/components/left-side-panel-v1/components/resizeable.vue":["6b13",9],"./design-v2/components/left-side-panel-v1/enterprise-panel":["4223",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/enterprise-panel/":["4223",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/enterprise-panel/components/mode":["7de1",9],"./design-v2/components/left-side-panel-v1/enterprise-panel/components/mode-material":["4503",9],"./design-v2/components/left-side-panel-v1/enterprise-panel/components/mode-material.vue":["4503",9],"./design-v2/components/left-side-panel-v1/enterprise-panel/components/mode.vue":["7de1",9],"./design-v2/components/left-side-panel-v1/enterprise-panel/index":["4223",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/enterprise-panel/index.vue":["4223",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/font-panel":["52a9",9],"./design-v2/components/left-side-panel-v1/font-panel.vue":["52a9",9],"./design-v2/components/left-side-panel-v1/index":["0b79",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/index.vue":["0b79",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/material-panel":["7ef2",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/material-panel/":["7ef2",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/material-panel/category":["18ed",9],"./design-v2/components/left-side-panel-v1/material-panel/category.jsx":["18ed",9],"./design-v2/components/left-side-panel-v1/material-panel/category.less":["64db",7],"./design-v2/components/left-side-panel-v1/material-panel/index":["7ef2",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/material-panel/index.vue":["7ef2",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/template-panel":["73b3",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/template-panel/":["73b3",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/template-panel/components/model-list":["2269",9],"./design-v2/components/left-side-panel-v1/template-panel/components/model-list.vue":["2269",9],"./design-v2/components/left-side-panel-v1/template-panel/components/no-data":["c44a",9],"./design-v2/components/left-side-panel-v1/template-panel/components/no-data.vue":["c44a",9],"./design-v2/components/left-side-panel-v1/template-panel/components/template-list":["8537",9],"./design-v2/components/left-side-panel-v1/template-panel/components/template-list.vue":["8537",9],"./design-v2/components/left-side-panel-v1/template-panel/index":["73b3",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/template-panel/index.vue":["73b3",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/tool-panel":["a753",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/tool-panel/":["a753",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/tool-panel/index":["a753",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/tool-panel/index.vue":["a753",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/tool-panel/row-column-popover":["4bb4",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/tool-panel/row-column-popover.vue":["4bb4",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/tool-panel/table-panel":["c398",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/tool-panel/table-panel.vue":["c398",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/tool-panel/tableTemplatesData":["fb0d",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/tool-panel/tableTemplatesData.js":["fb0d",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/upload-panel":["a2a2",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/upload-panel/":["a2a2",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/upload-panel/UploadButton":["267c",9],"./design-v2/components/left-side-panel-v1/upload-panel/UploadButton.jsx":["267c",9],"./design-v2/components/left-side-panel-v1/upload-panel/UploadButton.less":["25a7",7],"./design-v2/components/left-side-panel-v1/upload-panel/UploadButtonForEnterprise":["40a9",9],"./design-v2/components/left-side-panel-v1/upload-panel/UploadButtonForEnterprise.jsx":["40a9",9],"./design-v2/components/left-side-panel-v1/upload-panel/UploadButtonForEnterprise.less":["2161",7],"./design-v2/components/left-side-panel-v1/upload-panel/components/storage-progress-for-enterprise":["1d65",9],"./design-v2/components/left-side-panel-v1/upload-panel/components/storage-progress-for-enterprise.vue":["1d65",9],"./design-v2/components/left-side-panel-v1/upload-panel/components/storage-progress-for-www":["4510",9],"./design-v2/components/left-side-panel-v1/upload-panel/components/storage-progress-for-www.vue":["4510",9],"./design-v2/components/left-side-panel-v1/upload-panel/index":["a2a2",9,"chunk-84a4d64a"],"./design-v2/components/left-side-panel-v1/upload-panel/index.vue":["a2a2",9,"chunk-84a4d64a"],"./design-v2/components/no-id-tip":["ccda",9],"./design-v2/components/no-id-tip.vue":["ccda",9],"./design-v2/components/paste-modal":["0c05",9],"./design-v2/components/paste-modal.vue":["0c05",9],"./design-v2/components/right-mode-panel-v1":["c32f",9,"chunk-6fc07222"],"./design-v2/components/right-mode-panel-v1/":["c32f",9,"chunk-6fc07222"],"./design-v2/components/right-mode-panel-v1/index":["c32f",9,"chunk-6fc07222"],"./design-v2/components/right-mode-panel-v1/index.vue":["c32f",9,"chunk-6fc07222"],"./design-v2/components/right-mode-panel-v1/mode-3d":["5da9",9,"chunk-6fc07222"],"./design-v2/components/right-mode-panel-v1/mode-3d.vue":["5da9",9,"chunk-6fc07222"],"./design-v2/components/right-mode-panel-v1/recorder":["e014",9],"./design-v2/components/right-mode-panel-v1/recorder.vue":["e014",9],"./design-v2/components/setting-panel":["031a",9,"chunk-84a4d64a"],"./design-v2/components/setting-panel/":["031a",9,"chunk-84a4d64a"],"./design-v2/components/setting-panel/components-v1/BoxButton":["8cd4",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/BoxButton/":["8cd4",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/BoxButton/index":["8cd4",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/BoxButton/index.jsx":["8cd4",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/BoxButton/index.less":["5d48",7,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/Button":["a389",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/Button/":["a389",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/Button/index":["a389",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/Button/index.jsx":["a389",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/Cutout":["6d2d",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/Cutout/":["6d2d",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/Cutout/index":["6d2d",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/Cutout/index.jsx":["6d2d",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/Cutout/index.less":["f309",7,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/Divider":["86ca",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/Divider/":["86ca",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/Divider/index":["86ca",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/Divider/index.jsx":["86ca",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/Field":["c353",9],"./design-v2/components/setting-panel/components-v1/Field/":["c353",9],"./design-v2/components/setting-panel/components-v1/Field/index":["c353",9],"./design-v2/components/setting-panel/components-v1/Field/index.jsx":["c353",9],"./design-v2/components/setting-panel/components-v1/Field/index.less":["bff9",7],"./design-v2/components/setting-panel/components-v1/FontMenu":["843d",9],"./design-v2/components/setting-panel/components-v1/FontMenu/":["843d",9],"./design-v2/components/setting-panel/components-v1/FontMenu/index":["843d",9],"./design-v2/components/setting-panel/components-v1/FontMenu/index.vue":["843d",9],"./design-v2/components/setting-panel/components-v1/InputNumber":["b21f",9],"./design-v2/components/setting-panel/components-v1/InputNumber/":["b21f",9],"./design-v2/components/setting-panel/components-v1/InputNumber/index":["b21f",9],"./design-v2/components/setting-panel/components-v1/InputNumber/index.jsx":["b21f",9],"./design-v2/components/setting-panel/components-v1/InputNumber/index.less":["7dec",7],"./design-v2/components/setting-panel/components-v1/InputNumberWithControl":["8067",9],"./design-v2/components/setting-panel/components-v1/InputNumberWithControl/":["8067",9],"./design-v2/components/setting-panel/components-v1/InputNumberWithControl/index":["8067",9],"./design-v2/components/setting-panel/components-v1/InputNumberWithControl/index.vue":["8067",9],"./design-v2/components/setting-panel/components-v1/MultipleLayerPanel":["f4e7",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/MultipleLayerPanel/":["f4e7",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/MultipleLayerPanel/index":["f4e7",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/MultipleLayerPanel/index.jsx":["f4e7",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/NestedMaterialSelect":["2699",9],"./design-v2/components/setting-panel/components-v1/NestedMaterialSelect/":["2699",9],"./design-v2/components/setting-panel/components-v1/NestedMaterialSelect/index":["2699",9],"./design-v2/components/setting-panel/components-v1/NestedMaterialSelect/index.vue":["2699",9],"./design-v2/components/setting-panel/components-v1/NoBorderInput/NoBorderInput":["8e93",9],"./design-v2/components/setting-panel/components-v1/NoBorderInput/NoBorderInput.jsx":["8e93",9],"./design-v2/components/setting-panel/components-v1/NoBorderInput/index.less":["4fa7",7],"./design-v2/components/setting-panel/components-v1/PopSlider":["0922",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/PopSlider/":["0922",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/PopSlider/index":["0922",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/PopSlider/index.jsx":["0922",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/PopSlider/index.less":["6a57",7,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/QRIcon":["e691",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/QRIcon.vue":["e691",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/Select":["0ea8",9],"./design-v2/components/setting-panel/components-v1/Select/":["0ea8",9],"./design-v2/components/setting-panel/components-v1/Select/NoBorderSelect":["de4a",9],"./design-v2/components/setting-panel/components-v1/Select/NoBorderSelect.jsx":["de4a",9],"./design-v2/components/setting-panel/components-v1/Select/NoSelect":["dee3",9],"./design-v2/components/setting-panel/components-v1/Select/NoSelect.jsx":["dee3",9],"./design-v2/components/setting-panel/components-v1/Select/index":["0ea8",9],"./design-v2/components/setting-panel/components-v1/Select/index.jsx":["0ea8",9],"./design-v2/components/setting-panel/components-v1/Select/index.less":["38d7",7],"./design-v2/components/setting-panel/components-v1/Select/no-select.less":["58f3",7],"./design-v2/components/setting-panel/components-v1/SizeTip":["bd03",9,"chunk-6fc07222"],"./design-v2/components/setting-panel/components-v1/SizeTip/":["bd03",9,"chunk-6fc07222"],"./design-v2/components/setting-panel/components-v1/SizeTip/index":["bd03",9,"chunk-6fc07222"],"./design-v2/components/setting-panel/components-v1/SizeTip/index.vue":["bd03",9,"chunk-6fc07222"],"./design-v2/components/setting-panel/components-v1/Slider":["3467",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/Slider/":["3467",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/Slider/index":["3467",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/Slider/index.jsx":["3467",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/tailor":["485a",9,"chunk-24753293"],"./design-v2/components/setting-panel/components-v1/tailor.vue":["485a",9,"chunk-24753293"],"./design-v2/components/setting-panel/components/Input-number-with-control":["e3e7",9,"chunk-24753293"],"./design-v2/components/setting-panel/components/Input-number-with-control.vue":["e3e7",9,"chunk-24753293"],"./design-v2/components/setting-panel/components/design-common-operation":["1e9d",9],"./design-v2/components/setting-panel/components/design-common-operation.vue":["1e9d",9],"./design-v2/components/setting-panel/components/font-search-panel":["0132",9],"./design-v2/components/setting-panel/components/font-search-panel.vue":["0132",9],"./design-v2/components/setting-panel/components/font-select":["1b2a",9],"./design-v2/components/setting-panel/components/font-select.vue":["1b2a",9],"./design-v2/components/setting-panel/components/foreground-background-picker":["d026",9],"./design-v2/components/setting-panel/components/foreground-background-picker.vue":["d026",9],"./design-v2/components/setting-panel/components/input-number":["da3e",9],"./design-v2/components/setting-panel/components/input-number.vue":["da3e",9],"./design-v2/components/setting-panel/components/select-background-color":["accc",9],"./design-v2/components/setting-panel/components/select-background-color.vue":["accc",9],"./design-v2/components/setting-panel/components/select-element-craft":["1c0d",9],"./design-v2/components/setting-panel/components/select-element-craft.vue":["1c0d",9],"./design-v2/components/setting-panel/components/select-surface-craft":["1da9",9],"./design-v2/components/setting-panel/components/select-surface-craft.vue":["1da9",9],"./design-v2/components/setting-panel/components/width-height-input":["13f9",9],"./design-v2/components/setting-panel/components/width-height-input.vue":["13f9",9],"./design-v2/components/setting-panel/index":["031a",9,"chunk-84a4d64a"],"./design-v2/components/setting-panel/index.vue":["031a",9,"chunk-84a4d64a"],"./design-v2/components/setting-panel/setting-barcode":["fd75",9,"chunk-84a4d64a"],"./design-v2/components/setting-panel/setting-barcode/":["fd75",9,"chunk-84a4d64a"],"./design-v2/components/setting-panel/setting-barcode/edit-barcode":["7d88",9],"./design-v2/components/setting-panel/setting-barcode/edit-barcode.vue":["7d88",9],"./design-v2/components/setting-panel/setting-barcode/index":["fd75",9,"chunk-84a4d64a"],"./design-v2/components/setting-panel/setting-barcode/index.vue":["fd75",9,"chunk-84a4d64a"],"./design-v2/components/setting-panel/setting-face":["8a49",9],"./design-v2/components/setting-panel/setting-face.vue":["8a49",9],"./design-v2/components/setting-panel/setting-font":["47fc",9,"chunk-84a4d64a"],"./design-v2/components/setting-panel/setting-font.vue":["47fc",9,"chunk-84a4d64a"],"./design-v2/components/setting-panel/setting-group":["4db8",9],"./design-v2/components/setting-panel/setting-group.vue":["4db8",9],"./design-v2/components/setting-panel/setting-image":["c371",9,"chunk-84a4d64a"],"./design-v2/components/setting-panel/setting-image/":["c371",9,"chunk-84a4d64a"],"./design-v2/components/setting-panel/setting-image/components/cutout-button":["ae41",9],"./design-v2/components/setting-panel/setting-image/components/cutout-button.vue":["ae41",9],"./design-v2/components/setting-panel/setting-image/components/opacity-slider":["3937",9],"./design-v2/components/setting-panel/setting-image/components/opacity-slider.vue":["3937",9],"./design-v2/components/setting-panel/setting-image/components/tailor-button":["20cf",9],"./design-v2/components/setting-panel/setting-image/components/tailor-button.vue":["20cf",9],"./design-v2/components/setting-panel/setting-image/for-not-svg":["5909",9],"./design-v2/components/setting-panel/setting-image/for-not-svg.vue":["5909",9],"./design-v2/components/setting-panel/setting-image/for-svg":["441f",9],"./design-v2/components/setting-panel/setting-image/for-svg.vue":["441f",9],"./design-v2/components/setting-panel/setting-image/index":["c371",9,"chunk-84a4d64a"],"./design-v2/components/setting-panel/setting-image/index.vue":["c371",9,"chunk-84a4d64a"],"./design-v2/components/setting-panel/setting-multi-selection":["2e69",9],"./design-v2/components/setting-panel/setting-multi-selection.vue":["2e69",9],"./design-v2/components/setting-panel/setting-project/basic-info":["149a",9],"./design-v2/components/setting-panel/setting-project/basic-info/":["149a",9],"./design-v2/components/setting-panel/setting-project/basic-info/for-box":["dbbc",9],"./design-v2/components/setting-panel/setting-project/basic-info/for-box.vue":["dbbc",9],"./design-v2/components/setting-panel/setting-project/basic-info/for-cup":["ab70",9],"./design-v2/components/setting-panel/setting-project/basic-info/for-cup.vue":["ab70",9],"./design-v2/components/setting-panel/setting-project/basic-info/index":["149a",9],"./design-v2/components/setting-panel/setting-project/basic-info/index.vue":["149a",9],"./design-v2/components/setting-panel/setting-project/size-modify":["4c50",9],"./design-v2/components/setting-panel/setting-project/size-modify/":["4c50",9],"./design-v2/components/setting-panel/setting-project/size-modify/for-box":["3059",9],"./design-v2/components/setting-panel/setting-project/size-modify/for-box.vue":["3059",9],"./design-v2/components/setting-panel/setting-project/size-modify/for-cup":["9690",9],"./design-v2/components/setting-panel/setting-project/size-modify/for-cup.vue":["9690",9],"./design-v2/components/setting-panel/setting-project/size-modify/index":["4c50",9],"./design-v2/components/setting-panel/setting-project/size-modify/index.vue":["4c50",9],"./design-v2/components/setting-panel/setting-qrcode":["be3e",9,"chunk-84a4d64a"],"./design-v2/components/setting-panel/setting-qrcode/":["be3e",9,"chunk-84a4d64a"],"./design-v2/components/setting-panel/setting-qrcode/edit-qrcode":["4d13",9],"./design-v2/components/setting-panel/setting-qrcode/edit-qrcode.vue":["4d13",9],"./design-v2/components/setting-panel/setting-qrcode/index":["be3e",9,"chunk-84a4d64a"],"./design-v2/components/setting-panel/setting-qrcode/index.vue":["be3e",9,"chunk-84a4d64a"],"./design-v2/components/setting-panel/setting-qrcode/qr-icons":["0ee7",9],"./design-v2/components/setting-panel/setting-qrcode/qr-icons.vue":["0ee7",9],"./design-v2/components/setting-panel/setting-table":["cadb",9,"chunk-84a4d64a"],"./design-v2/components/setting-panel/setting-table.vue":["cadb",9,"chunk-84a4d64a"],"./design-v2/components/support-instruction":["6f4c",9],"./design-v2/components/support-instruction.vue":["6f4c",9],"./design-v2/components/vip-paste-modal":["8a71",9],"./design-v2/components/vip-paste-modal.vue":["8a71",9],"./design-v2/dev-components/devcanvas":["5e9b",9],"./design-v2/dev-components/devcanvas.vue":["5e9b",9],"./design-v2/dev-components/devtool":["3ef6",9],"./design-v2/dev-components/devtool-panel":["9f9e",9],"./design-v2/dev-components/devtool-panel.vue":["9f9e",9],"./design-v2/dev-components/devtool.vue":["3ef6",9],"./design-v2/dev-components/fps":["138d",9],"./design-v2/dev-components/fps.vue":["138d",9],"./design-v2/index":["41c5",9,"chunk-24753293","chunk-6fc07222","chunk-84a4d64a"],"./design-v2/index.vue":["41c5",9,"chunk-24753293","chunk-6fc07222","chunk-84a4d64a"],"./design-v2/localHistoryQueue":["54ae",9],"./design-v2/localHistoryQueue.js":["54ae",9],"./design/":["5651",9],"./design/_components/detect-chrome-modal":["ee5b",9],"./design/_components/detect-chrome-modal.vue":["ee5b",9],"./design/_components/paste-modal":["6468",9],"./design/_components/paste-modal.vue":["6468",9],"./design/_components/vip-paste-modal":["9f1f",9],"./design/_components/vip-paste-modal.vue":["9f1f",9],"./design/devtool":["8c66",9],"./design/devtool.vue":["8c66",9],"./design/editor-content":["5254",9],"./design/editor-content/":["5254",9],"./design/editor-content/graph":["568c",9],"./design/editor-content/graph/":["568c",9],"./design/editor-content/graph/background":["89e0",9],"./design/editor-content/graph/background/":["89e0",9],"./design/editor-content/graph/background/index":["89e0",9],"./design/editor-content/graph/background/index.less":["095e",7,"chunk-6fc07222"],"./design/editor-content/graph/background/index.vue":["89e0",9],"./design/editor-content/graph/barcode":["586d",9],"./design/editor-content/graph/barcode/":["586d",9],"./design/editor-content/graph/barcode/EditBarcode":["464e",9],"./design/editor-content/graph/barcode/EditBarcode.vue":["464e",9],"./design/editor-content/graph/barcode/index":["586d",9],"./design/editor-content/graph/barcode/index.vue":["586d",9],"./design/editor-content/graph/dragsvg":["b033",9],"./design/editor-content/graph/dragsvg/":["b033",9],"./design/editor-content/graph/dragsvg/index":["b033",9],"./design/editor-content/graph/dragsvg/index.vue":["b033",9],"./design/editor-content/graph/font":["7b0f",9],"./design/editor-content/graph/font.vue":["7b0f",9],"./design/editor-content/graph/foreground":["953b",9],"./design/editor-content/graph/foreground/":["953b",9],"./design/editor-content/graph/foreground/arrow-pair":["65d7",9],"./design/editor-content/graph/foreground/arrow-pair.vue":["65d7",9],"./design/editor-content/graph/foreground/index":["953b",9],"./design/editor-content/graph/foreground/index.less":["d7af",7,"chunk-6fc07222"],"./design/editor-content/graph/foreground/index.vue":["953b",9],"./design/editor-content/graph/group":["294f",9],"./design/editor-content/graph/group/":["294f",9],"./design/editor-content/graph/group/index":["294f",9],"./design/editor-content/graph/group/index.less":["efd7",7,"chunk-24753293"],"./design/editor-content/graph/group/index.vue":["294f",9],"./design/editor-content/graph/highlines":["5ce5",9],"./design/editor-content/graph/highlines.vue":["5ce5",9],"./design/editor-content/graph/image":["7b71",9],"./design/editor-content/graph/image/":["7b71",9],"./design/editor-content/graph/image/index":["7b71",9],"./design/editor-content/graph/image/index.less":["2c2d",7,"chunk-6fc07222"],"./design/editor-content/graph/image/index.vue":["7b71",9],"./design/editor-content/graph/index":["568c",9],"./design/editor-content/graph/index.vue":["568c",9],"./design/editor-content/graph/qrcode":["98bd",9],"./design/editor-content/graph/qrcode/":["98bd",9],"./design/editor-content/graph/qrcode/EditQrcode":["2075",9],"./design/editor-content/graph/qrcode/EditQrcode.vue":["2075",9],"./design/editor-content/graph/qrcode/index":["98bd",9],"./design/editor-content/graph/qrcode/index.vue":["98bd",9],"./design/editor-content/graph/table/add":["c7ee",9],"./design/editor-content/graph/table/add.jsx":["c7ee",9],"./design/editor-content/graph/table/add.less":["33dc",7],"./design/editor-content/graph/table/header":["a828",9],"./design/editor-content/graph/table/header.jsx":["a828",9],"./design/editor-content/graph/table/header.less":["ea97",7],"./design/editor-content/graph/table/select":["3b15",9],"./design/editor-content/graph/table/select.jsx":["3b15",9],"./design/editor-content/graph/table/select.less":["469f",7],"./design/editor-content/graph/table/sider":["9ecc",9],"./design/editor-content/graph/table/sider.jsx":["9ecc",9],"./design/editor-content/graph/table/sider.less":["5144",7],"./design/editor-content/graph/table/table":["ba27",9],"./design/editor-content/graph/table/table.jsx":["ba27",9],"./design/editor-content/graph/table/table.less":["2790",7],"./design/editor-content/index":["5254",9],"./design/editor-content/index.vue":["5254",9],"./design/editor-content/line-guides":["f293",9],"./design/editor-content/line-guides.vue":["f293",9],"./design/editor-header":["9cd7",9],"./design/editor-header/":["9cd7",9],"./design/editor-header/Rename":["f2a2",9],"./design/editor-header/Rename.vue":["f2a2",9],"./design/editor-header/RenameModal":["39e4",9,"chunk-6fc07222"],"./design/editor-header/RenameModal.vue":["39e4",9,"chunk-6fc07222"],"./design/editor-header/commit":["9c25",9],"./design/editor-header/commit/":["9c25",9],"./design/editor-header/commit/index":["9c25",9],"./design/editor-header/commit/index.less":["8c1b",7,"chunk-24753293"],"./design/editor-header/commit/index.vue":["9c25",9],"./design/editor-header/copyright":["25e6",9,"chunk-24753293"],"./design/editor-header/copyright/":["25e6",9,"chunk-24753293"],"./design/editor-header/copyright/index":["25e6",9,"chunk-24753293"],"./design/editor-header/copyright/index.less":["e7cb",7,"chunk-6fc07222"],"./design/editor-header/copyright/index.vue":["25e6",9,"chunk-24753293"],"./design/editor-header/downloadv2":["99ed",9],"./design/editor-header/downloadv2/":["99ed",9],"./design/editor-header/downloadv2/ExportPdfProgressModal":["b936",9],"./design/editor-header/downloadv2/ExportPdfProgressModal.vue":["b936",9],"./design/editor-header/downloadv2/SuccessModal":["abc5",9],"./design/editor-header/downloadv2/SuccessModal.vue":["abc5",9],"./design/editor-header/downloadv2/index":["99ed",9],"./design/editor-header/downloadv2/index.less":["bf01",7,"chunk-24753293"],"./design/editor-header/downloadv2/index.vue":["99ed",9],"./design/editor-header/history":["e60e",9],"./design/editor-header/history/":["e60e",9],"./design/editor-header/history/index":["e60e",9],"./design/editor-header/history/index.less":["4f22",7,"chunk-24753293"],"./design/editor-header/history/index.vue":["e60e",9],"./design/editor-header/index":["9cd7",9],"./design/editor-header/index.less":["ae1d",7,"chunk-6fc07222"],"./design/editor-header/index.vue":["9cd7",9],"./design/editor-header/newpro":["70d4",9],"./design/editor-header/newpro/":["70d4",9],"./design/editor-header/newpro/components/Good":["abfd",9],"./design/editor-header/newpro/components/Good/":["abfd",9],"./design/editor-header/newpro/components/Good/index":["abfd",9],"./design/editor-header/newpro/components/Good/index.jsx":["abfd",9],"./design/editor-header/newpro/components/Good/index.less":["02c4",7],"./design/editor-header/newpro/index":["70d4",9],"./design/editor-header/newpro/index.less":["4c35",7,"chunk-6fc07222"],"./design/editor-header/newpro/index.vue":["70d4",9],"./design/editor-header/order":["b46a",9],"./design/editor-header/order/":["b46a",9],"./design/editor-header/order/index":["b46a",9],"./design/editor-header/order/index.less":["7d87",7,"chunk-24753293"],"./design/editor-header/order/index.vue":["b46a",9],"./design/editor-header/productOrder":["ce33",9],"./design/editor-header/productOrder/":["ce33",9],"./design/editor-header/productOrder/index":["ce33",9],"./design/editor-header/productOrder/index.vue":["ce33",9],"./design/editor-header/productOrder/preview":["78da",9],"./design/editor-header/productOrder/preview.vue":["78da",9],"./design/editor-header/proofing":["d39f",9],"./design/editor-header/proofing/":["d39f",9],"./design/editor-header/proofing/index":["d39f",9],"./design/editor-header/proofing/index.less":["7b14",7,"chunk-24753293"],"./design/editor-header/proofing/index.vue":["d39f",9],"./design/editor-header/resize":["63bf",9],"./design/editor-header/resize/":["63bf",9],"./design/editor-header/resize/index":["63bf",9],"./design/editor-header/resize/index.less":["622e",7,"chunk-24753293"],"./design/editor-header/resize/index.vue":["63bf",9],"./design/editor-header/risk":["0533",9],"./design/editor-header/risk/":["0533",9],"./design/editor-header/risk/index":["0533",9],"./design/editor-header/risk/index.vue":["0533",9],"./design/handle-panel":["7f87",9],"./design/handle-panel/":["7f87",9],"./design/handle-panel/_components/settingsForCup":["b4df",9],"./design/handle-panel/_components/settingsForCup.vue":["b4df",9],"./design/handle-panel/_components/sizeForCup":["f2f7",9],"./design/handle-panel/_components/sizeForCup.vue":["f2f7",9],"./design/handle-panel/faces":["de03",9],"./design/handle-panel/faces/":["de03",9],"./design/handle-panel/faces/index":["de03",9],"./design/handle-panel/faces/index.less":["24cf",7,"chunk-24753293"],"./design/handle-panel/faces/index.vue":["de03",9],"./design/handle-panel/index":["7f87",9],"./design/handle-panel/index.less":["dbe6",7,"chunk-24753293"],"./design/handle-panel/index.vue":["7f87",9],"./design/handle-panel/knifefaces":["08d1",9],"./design/handle-panel/knifefaces/":["08d1",9],"./design/handle-panel/knifefaces/index":["08d1",9],"./design/handle-panel/knifefaces/index.less":["8539",7,"chunk-24753293"],"./design/handle-panel/knifefaces/index.vue":["08d1",9],"./design/handle-panel/property":["9639",9],"./design/handle-panel/property/":["9639",9],"./design/handle-panel/property/components/BoxButton":["55c2",9],"./design/handle-panel/property/components/BoxButton/":["55c2",9],"./design/handle-panel/property/components/BoxButton/index":["55c2",9],"./design/handle-panel/property/components/BoxButton/index.jsx":["55c2",9],"./design/handle-panel/property/components/BoxButton/index.less":["c825c",7],"./design/handle-panel/property/components/Button":["bd85",9],"./design/handle-panel/property/components/Button/":["bd85",9],"./design/handle-panel/property/components/Button/index":["bd85",9],"./design/handle-panel/property/components/Button/index.jsx":["bd85",9],"./design/handle-panel/property/components/Cutout":["ada6",9],"./design/handle-panel/property/components/Cutout/":["ada6",9],"./design/handle-panel/property/components/Cutout/index":["ada6",9],"./design/handle-panel/property/components/Cutout/index.jsx":["ada6",9],"./design/handle-panel/property/components/Cutout/index.less":["b17b",7],"./design/handle-panel/property/components/Divider":["6b08",9,"chunk-24753293"],"./design/handle-panel/property/components/Divider/":["6b08",9,"chunk-24753293"],"./design/handle-panel/property/components/Divider/index":["6b08",9,"chunk-24753293"],"./design/handle-panel/property/components/Divider/index.jsx":["6b08",9,"chunk-24753293"],"./design/handle-panel/property/components/Field":["2ebb",9],"./design/handle-panel/property/components/Field/":["2ebb",9],"./design/handle-panel/property/components/Field/index":["2ebb",9],"./design/handle-panel/property/components/Field/index.jsx":["2ebb",9],"./design/handle-panel/property/components/Field/index.less":["c978",7],"./design/handle-panel/property/components/FontMenu":["ab68",9],"./design/handle-panel/property/components/FontMenu/":["ab68",9],"./design/handle-panel/property/components/FontMenu/index":["ab68",9],"./design/handle-panel/property/components/FontMenu/index.vue":["ab68",9],"./design/handle-panel/property/components/InputNumber":["a9ff",9],"./design/handle-panel/property/components/InputNumber/":["a9ff",9],"./design/handle-panel/property/components/InputNumber/index":["a9ff",9],"./design/handle-panel/property/components/InputNumber/index.jsx":["a9ff",9],"./design/handle-panel/property/components/InputNumber/index.less":["3828",7],"./design/handle-panel/property/components/InputNumberWithControl":["831f",9],"./design/handle-panel/property/components/InputNumberWithControl/":["831f",9],"./design/handle-panel/property/components/InputNumberWithControl/index":["831f",9],"./design/handle-panel/property/components/InputNumberWithControl/index.vue":["831f",9],"./design/handle-panel/property/components/MultipleLayerPanel":["a257",9],"./design/handle-panel/property/components/MultipleLayerPanel/":["a257",9],"./design/handle-panel/property/components/MultipleLayerPanel/index":["a257",9],"./design/handle-panel/property/components/MultipleLayerPanel/index.jsx":["a257",9],"./design/handle-panel/property/components/NestedMaterialSelect":["ee50",9],"./design/handle-panel/property/components/NestedMaterialSelect/":["ee50",9],"./design/handle-panel/property/components/NestedMaterialSelect/index":["ee50",9],"./design/handle-panel/property/components/NestedMaterialSelect/index.vue":["ee50",9],"./design/handle-panel/property/components/NoBorderInput/NoBorderInput":["494a",9],"./design/handle-panel/property/components/NoBorderInput/NoBorderInput.jsx":["494a",9],"./design/handle-panel/property/components/NoBorderInput/index.less":["c105",7],"./design/handle-panel/property/components/PopSlider":["66ed",9],"./design/handle-panel/property/components/PopSlider/":["66ed",9],"./design/handle-panel/property/components/PopSlider/index":["66ed",9],"./design/handle-panel/property/components/PopSlider/index.jsx":["66ed",9],"./design/handle-panel/property/components/PopSlider/index.less":["583a",7],"./design/handle-panel/property/components/QRIcon":["d70d",9],"./design/handle-panel/property/components/QRIcon.vue":["d70d",9],"./design/handle-panel/property/components/Select":["ab1d",9],"./design/handle-panel/property/components/Select/":["ab1d",9],"./design/handle-panel/property/components/Select/NoBorderSelect":["9b71",9],"./design/handle-panel/property/components/Select/NoBorderSelect.jsx":["9b71",9],"./design/handle-panel/property/components/Select/NoSelect":["d4cc",9],"./design/handle-panel/property/components/Select/NoSelect.jsx":["d4cc",9],"./design/handle-panel/property/components/Select/index":["ab1d",9],"./design/handle-panel/property/components/Select/index.jsx":["ab1d",9],"./design/handle-panel/property/components/Select/index.less":["9037",7],"./design/handle-panel/property/components/Select/no-select.less":["d8b6",7],"./design/handle-panel/property/components/SizeTip":["6d9e",9],"./design/handle-panel/property/components/SizeTip/":["6d9e",9],"./design/handle-panel/property/components/SizeTip/index":["6d9e",9],"./design/handle-panel/property/components/SizeTip/index.vue":["6d9e",9],"./design/handle-panel/property/components/Slider":["bf60",9],"./design/handle-panel/property/components/Slider/":["bf60",9],"./design/handle-panel/property/components/Slider/index":["bf60",9],"./design/handle-panel/property/components/Slider/index.jsx":["bf60",9],"./design/handle-panel/property/components/font-writing-mode-button":["70ce",9],"./design/handle-panel/property/components/font-writing-mode-button.vue":["70ce",9],"./design/handle-panel/property/components/tailor":["ad9f",9],"./design/handle-panel/property/components/tailor.vue":["ad9f",9],"./design/handle-panel/property/index":["9639",9],"./design/handle-panel/property/index.jsx":["9639",9],"./design/handle-panel/property/index.less":["7fef",7],"./design/handle-panel/settings":["f356",9],"./design/handle-panel/settings/":["f356",9],"./design/handle-panel/settings/components/Size":["fc75",9],"./design/handle-panel/settings/components/Size/":["fc75",9],"./design/handle-panel/settings/components/Size/SizeContent":["e6f9",9],"./design/handle-panel/settings/components/Size/SizeContent.jsx":["e6f9",9],"./design/handle-panel/settings/components/Size/index":["fc75",9],"./design/handle-panel/settings/components/Size/index.jsx":["fc75",9],"./design/handle-panel/settings/components/Size/index.less":["5894",7],"./design/handle-panel/settings/components/Size/size.less":["501c",7],"./design/handle-panel/settings/index":["f356",9],"./design/handle-panel/settings/index.jsx":["f356",9],"./design/handle-panel/settings/index.less":["4e63",7],"./design/handle-panel/size":["30ee",9],"./design/handle-panel/size/":["30ee",9],"./design/handle-panel/size/index":["30ee",9],"./design/handle-panel/size/index.jsx":["30ee",9],"./design/handle-panel/size/index.less":["6395",7],"./design/index":["5651",9],"./design/index.vue":["5651",9],"./design/left-side-menu":["6339",9],"./design/left-side-menu/":["6339",9],"./design/left-side-menu/helper":["a33f",9],"./design/left-side-menu/helper.vue":["a33f",9],"./design/left-side-menu/index":["6339",9],"./design/left-side-menu/index.vue":["6339",9],"./design/left-side-panel":["4667",9],"./design/left-side-panel/":["4667",9],"./design/left-side-panel/_components/resizeable":["a998",9],"./design/left-side-panel/_components/resizeable.vue":["a998",9],"./design/left-side-panel/background-panel":["27c9",9],"./design/left-side-panel/background-panel.vue":["27c9",9],"./design/left-side-panel/font-panel":["27d8",9],"./design/left-side-panel/font-panel.vue":["27d8",9],"./design/left-side-panel/index":["4667",9],"./design/left-side-panel/index.vue":["4667",9],"./design/left-side-panel/material-panel":["b91b",9],"./design/left-side-panel/material-panel/":["b91b",9],"./design/left-side-panel/material-panel/category":["4f88",9],"./design/left-side-panel/material-panel/category.jsx":["4f88",9],"./design/left-side-panel/material-panel/category.less":["6232",7],"./design/left-side-panel/material-panel/index":["b91b",9],"./design/left-side-panel/material-panel/index.vue":["b91b",9],"./design/left-side-panel/tool-panel":["d9f9",9],"./design/left-side-panel/tool-panel.vue":["d9f9",9],"./design/left-side-panel/upload-panel":["16fd",9],"./design/left-side-panel/upload-panel/":["16fd",9],"./design/left-side-panel/upload-panel/UploadButton":["318a",9],"./design/left-side-panel/upload-panel/UploadButton.jsx":["318a",9],"./design/left-side-panel/upload-panel/UploadButton.less":["0c053",7],"./design/left-side-panel/upload-panel/index":["16fd",9],"./design/left-side-panel/upload-panel/index.vue":["16fd",9],"./design/right-mode-panel":["8fb2",9],"./design/right-mode-panel/":["8fb2",9],"./design/right-mode-panel/index":["8fb2",9],"./design/right-mode-panel/index.vue":["8fb2",9],"./design/right-mode-panel/mode-3d":["9227",9],"./design/right-mode-panel/mode-3d.vue":["9227",9],"./design/right-mode-panel/recorder":["c2be",9],"./design/right-mode-panel/recorder.vue":["c2be",9],"./home/components/bottom/bottom":["f4b1",9,"chunk-6fc07222"],"./home/components/bottom/bottom.jsx":["f4b1",9,"chunk-6fc07222"],"./home/components/bottom/bottom.less":["7a98",7,"chunk-6fc07222"],"./home/components/box/box":["156c",9],"./home/components/box/box.jsx":["156c",9],"./home/components/box/box.less":["213b",7],"./home/components/designer/designer":["824f",9],"./home/components/designer/designer.jsx":["824f",9],"./home/components/designer/designer.less":["d3b7",7],"./home/components/header/header":["ca9b",9,"chunk-6fc07222"],"./home/components/header/header.jsx":["ca9b",9,"chunk-6fc07222"],"./home/components/header/header.less":["2557",7,"chunk-6fc07222"],"./home/components/headerMobile":["dd76",9,"chunk-24753293"],"./home/components/headerMobile/":["dd76",9,"chunk-24753293"],"./home/components/headerMobile/index":["dd76",9,"chunk-24753293"],"./home/components/headerMobile/index.less":["7db4",7,"chunk-24753293"],"./home/components/headerMobile/index.vue":["dd76",9,"chunk-24753293"],"./home/components/homeSwiper/home-swiper":["83a7",9],"./home/components/homeSwiper/home-swiper.jsx":["83a7",9],"./home/components/homeSwiper/home-swiper.less":["26d3",7],"./home/components/inquiry/forms/FormQuestion2":["4a8e",9,"chunk-24753293"],"./home/components/inquiry/forms/FormQuestion2.jsx":["4a8e",9,"chunk-24753293"],"./home/components/inquiry/forms/FormQuestion2.less":["4679",7,"chunk-24753293"],"./home/components/inquiry/forms/FormRole":["7324",9],"./home/components/inquiry/forms/FormRole.jsx":["7324",9],"./home/components/inquiry/forms/FormRole.less":["d1f4",7],"./home/components/inquiry/forms/RedeemVIP":["fade",9],"./home/components/inquiry/forms/RedeemVIP.jsx":["fade",9],"./home/components/inquiry/forms/RedeemVIP.less":["3376",7],"./home/components/inquiry/inquiry":["8a2a",9],"./home/components/inquiry/inquiry.jsx":["8a2a",9],"./home/components/inquiry/inquiry.less":["548f",7],"./home/components/list/list":["b3ba",9],"./home/components/list/list.jsx":["b3ba",9],"./home/components/list/list.less":["33503",7],"./home/components/login/form":["8ae0",9],"./home/components/login/form.jsx":["8ae0",9],"./home/components/login/form.less":["ea79",7],"./home/components/login/help":["798a",9],"./home/components/login/help.jsx":["798a",9],"./home/components/login/help.less":["43bc",7],"./home/components/login/login":["3bdd",9],"./home/components/login/login.jsx":["3bdd",9],"./home/components/login/login.less":["f0d8",7],"./home/components/login/qrcode":["aa42",9],"./home/components/login/qrcode.jsx":["aa42",9],"./home/components/login/qrcode.less":["2df9",7],"./home/components/mode/mode":["d1fe",9],"./home/components/mode/mode.jsx":["d1fe",9],"./home/components/mode/mode.less":["3e46",7],"./home/components/siderBar/menu":["d214",9,"chunk-24753293"],"./home/components/siderBar/menu.jsx":["d214",9,"chunk-24753293"],"./home/components/siderBar/menu.less":["8932",7,"chunk-24753293"],"./home/components/start/start":["df11",9],"./home/components/start/start.jsx":["df11",9],"./home/components/start/start.less":["46b0",7],"./home/components/tabs/components/Button":["b9c1",9,"chunk-24753293"],"./home/components/tabs/components/Button/":["b9c1",9,"chunk-24753293"],"./home/components/tabs/components/Button/index":["b9c1",9,"chunk-24753293"],"./home/components/tabs/components/Button/index.jsx":["b9c1",9,"chunk-24753293"],"./home/components/tabs/components/Button/index.less":["945a",7,"chunk-24753293"],"./home/components/tabs/components/Rail":["2664",9,"chunk-24753293"],"./home/components/tabs/components/Rail/":["2664",9,"chunk-24753293"],"./home/components/tabs/components/Rail/index":["2664",9,"chunk-24753293"],"./home/components/tabs/components/Rail/index.jsx":["2664",9,"chunk-24753293"],"./home/components/tabs/components/Rail/index.less":["bdf4",7,"chunk-24753293"],"./home/components/tabs/tabs":["bab4",9,"chunk-24753293"],"./home/components/tabs/tabs.jsx":["bab4",9,"chunk-24753293"],"./home/components/tabs/tabs.less":["939b",7],"./home/components/user/user":["a7e6",9],"./home/components/user/user.jsx":["a7e6",9],"./home/components/user/user.less":["d44ec",7],"./home/components/userSwiper/user-swiper":["08dc",9],"./home/components/userSwiper/user-swiper.jsx":["08dc",9],"./home/components/userSwiper/user-swiper.less":["9ae0",7],"./home/home":["b63f",9],"./home/home.jsx":["b63f",9],"./home/home.less":["be78",7],"./home/modes/modes":["d239",9,"chunk-24753293","chunk-84a4d64a"],"./home/modes/modes.jsx":["d239",9,"chunk-24753293","chunk-84a4d64a"],"./home/modes/modes.less":["3e65",7],"./home/templates/templates":["c071",9,"chunk-24753293","chunk-84a4d64a"],"./home/templates/templates.jsx":["c071",9,"chunk-24753293","chunk-84a4d64a"],"./home/templates/templates.less":["8f33",7],"./home/utils":["d9e8",9,"chunk-24753293"],"./home/utils/":["d9e8",9,"chunk-24753293"],"./home/utils/index":["d9e8",9,"chunk-24753293"],"./home/utils/index.js":["d9e8",9,"chunk-24753293"],"./layout":["162e",9,"chunk-6fc07222","chunk-24753293","chunk-84a4d64a"],"./layout/":["162e",9,"chunk-6fc07222","chunk-24753293","chunk-84a4d64a"],"./layout/details":["c881",9,"chunk-24753293","chunk-6fc07222","chunk-84a4d64a"],"./layout/details/":["c881",9,"chunk-24753293","chunk-6fc07222","chunk-84a4d64a"],"./layout/details/components/Banner":["52ea",9,"chunk-24753293","chunk-84a4d64a"],"./layout/details/components/Banner/":["52ea",9,"chunk-24753293","chunk-84a4d64a"],"./layout/details/components/Banner/index":["52ea",9,"chunk-24753293","chunk-84a4d64a"],"./layout/details/components/Banner/index.jsx":["52ea",9,"chunk-24753293","chunk-84a4d64a"],"./layout/details/components/Banner/index.less":["fa26",7],"./layout/details/components/Dot":["e856",9,"chunk-24753293"],"./layout/details/components/Dot/":["e856",9,"chunk-24753293"],"./layout/details/components/Dot/index":["e856",9,"chunk-24753293"],"./layout/details/components/Dot/index.jsx":["e856",9,"chunk-24753293"],"./layout/details/components/Dot/index.less":["5d49",7,"chunk-24753293"],"./layout/details/index":["c881",9,"chunk-24753293","chunk-6fc07222","chunk-84a4d64a"],"./layout/details/index.jsx":["c881",9,"chunk-24753293","chunk-6fc07222","chunk-84a4d64a"],"./layout/details/index.less":["1f8e",7,"chunk-6fc07222"],"./layout/index":["162e",9,"chunk-6fc07222","chunk-24753293","chunk-84a4d64a"],"./layout/index.less":["400f",7,"chunk-24753293"],"./layout/index.vue":["162e",9,"chunk-6fc07222","chunk-24753293","chunk-84a4d64a"],"./layout/paycode":["54c8",9,"chunk-24753293"],"./layout/paycode/":["54c8",9,"chunk-24753293"],"./layout/paycode/index":["54c8",9,"chunk-24753293"],"./layout/paycode/index.less":["dcc9",7,"chunk-24753293"],"./layout/paycode/index.vue":["54c8",9,"chunk-24753293"],"./layout/payment":["5ef8",9,"chunk-6fc07222"],"./layout/payment/":["5ef8",9,"chunk-6fc07222"],"./layout/payment/index":["5ef8",9,"chunk-6fc07222"],"./layout/payment/index.less":["4676",7,"chunk-24753293"],"./layout/payment/index.vue":["5ef8",9,"chunk-6fc07222"],"./layout/templates":["bdb8",9,"chunk-24753293","chunk-6fc07222"],"./layout/templates/":["bdb8",9,"chunk-24753293","chunk-6fc07222"],"./layout/templates/components/Button":["8d87",9,"chunk-24753293"],"./layout/templates/components/Button/":["8d87",9,"chunk-24753293"],"./layout/templates/components/Button/index":["8d87",9,"chunk-24753293"],"./layout/templates/components/Button/index.jsx":["8d87",9,"chunk-24753293"],"./layout/templates/components/Button/index.less":["9e78",7,"chunk-24753293"],"./layout/templates/components/Filter":["7c20",9,"chunk-6fc07222"],"./layout/templates/components/Filter/":["7c20",9,"chunk-6fc07222"],"./layout/templates/components/Filter/index":["7c20",9,"chunk-6fc07222"],"./layout/templates/components/Filter/index.jsx":["7c20",9,"chunk-6fc07222"],"./layout/templates/components/Filter/index.less":["d89e",7,"chunk-6fc07222"],"./layout/templates/components/Good":["dad9",9,"chunk-6fc07222"],"./layout/templates/components/Good/":["dad9",9,"chunk-6fc07222"],"./layout/templates/components/Good/index":["dad9",9,"chunk-6fc07222"],"./layout/templates/components/Good/index.jsx":["dad9",9,"chunk-6fc07222"],"./layout/templates/components/Good/index.less":["8d5d",7,"chunk-6fc07222"],"./layout/templates/components/Header":["1151",9,"chunk-24753293","chunk-6fc07222"],"./layout/templates/components/Header/":["1151",9,"chunk-24753293","chunk-6fc07222"],"./layout/templates/components/Header/index":["1151",9,"chunk-24753293","chunk-6fc07222"],"./layout/templates/components/Header/index.jsx":["1151",9,"chunk-24753293","chunk-6fc07222"],"./layout/templates/components/Header/index.less":["013d",7,"chunk-6fc07222"],"./layout/templates/components/Rail":["0f7b",9,"chunk-24753293","chunk-6fc07222"],"./layout/templates/components/Rail/":["0f7b",9,"chunk-24753293","chunk-6fc07222"],"./layout/templates/components/Rail/index":["0f7b",9,"chunk-24753293","chunk-6fc07222"],"./layout/templates/components/Rail/index.jsx":["0f7b",9,"chunk-24753293","chunk-6fc07222"],"./layout/templates/components/Rail/index.less":["4873",7,"chunk-6fc07222"],"./layout/templates/index":["bdb8",9,"chunk-24753293","chunk-6fc07222"],"./layout/templates/index.jsx":["bdb8",9,"chunk-24753293","chunk-6fc07222"],"./layout/templates/index.less":["bf605",7,"chunk-6fc07222"],"./layout/user":["366c",9,"chunk-24753293"],"./layout/user/":["366c",9,"chunk-24753293"],"./layout/user/contribute":["cfd6",9,"chunk-24753293"],"./layout/user/contribute/":["cfd6",9,"chunk-24753293"],"./layout/user/contribute/index":["cfd6",9,"chunk-24753293"],"./layout/user/contribute/index.less":["374a",7,"chunk-6fc07222"],"./layout/user/contribute/index.vue":["cfd6",9,"chunk-24753293"],"./layout/user/index":["366c",9,"chunk-24753293"],"./layout/user/index.less":["1ad5",7,"chunk-24753293"],"./layout/user/index.vue":["366c",9,"chunk-24753293"],"./layout/user/mycollect":["d534",9,"chunk-6fc07222","chunk-84a4d64a"],"./layout/user/mycollect/":["d534",9,"chunk-6fc07222","chunk-84a4d64a"],"./layout/user/mycollect/index":["d534",9,"chunk-6fc07222","chunk-84a4d64a"],"./layout/user/mycollect/index.jsx":["d534",9,"chunk-6fc07222","chunk-84a4d64a"],"./layout/user/mycollect/index.less":["9205",7,"chunk-6fc07222"],"./layout/user/mydesign":["90e8",9,"chunk-6fc07222","chunk-24753293","chunk-84a4d64a"],"./layout/user/mydesign/":["90e8",9,"chunk-6fc07222","chunk-24753293","chunk-84a4d64a"],"./layout/user/mydesign/accredit/accredit":["28f2",9,"chunk-24753293"],"./layout/user/mydesign/accredit/accredit.jsx":["28f2",9,"chunk-24753293"],"./layout/user/mydesign/accredit/accredit.less":["5d3b",7,"chunk-24753293"],"./layout/user/mydesign/bought":["7e00",9,"chunk-24753293","chunk-84a4d64a"],"./layout/user/mydesign/bought.jsx":["7e00",9,"chunk-24753293","chunk-84a4d64a"],"./layout/user/mydesign/bought.less":["39fe",7],"./layout/user/mydesign/form/confirm":["eada",9],"./layout/user/mydesign/form/confirm.jsx":["eada",9],"./layout/user/mydesign/form/confirm.less":["0dee",7],"./layout/user/mydesign/form/form":["a362",9],"./layout/user/mydesign/form/form.jsx":["a362",9],"./layout/user/mydesign/form/form.less":["8c3a",7],"./layout/user/mydesign/form/message":["89af",9],"./layout/user/mydesign/form/message.jsx":["89af",9],"./layout/user/mydesign/form/message.less":["1166",7],"./layout/user/mydesign/index":["90e8",9,"chunk-6fc07222","chunk-24753293","chunk-84a4d64a"],"./layout/user/mydesign/index.jsx":["90e8",9,"chunk-6fc07222","chunk-24753293","chunk-84a4d64a"],"./layout/user/mydesign/index.less":["fee0",7],"./layout/user/mydesign/target/target":["6b17",9,"chunk-24753293","chunk-84a4d64a"],"./layout/user/mydesign/target/target.jsx":["6b17",9,"chunk-24753293","chunk-84a4d64a"],"./layout/user/mydesign/target/target.less":["404d",7],"./layout/user/order/business/mock/price.mock":["dd37",9,"chunk-24753293"],"./layout/user/order/business/mock/price.mock.js":["dd37",9,"chunk-24753293"],"./layout/user/order/business/order":["1fd7",9],"./layout/user/order/business/order.js":["1fd7",9],"./layout/user/order/components/AddressDisplay":["262e",9],"./layout/user/order/components/AddressDisplay.jsx":["262e",9],"./layout/user/order/components/AddressFormDialog":["eb1e",9],"./layout/user/order/components/AddressFormDialog.jsx":["eb1e",9],"./layout/user/order/components/AddressPicker":["6cb4",9],"./layout/user/order/components/AddressPicker.jsx":["6cb4",9],"./layout/user/order/components/AddressPicker.less":["1a87",7],"./layout/user/order/components/MainBlock":["eda1",9],"./layout/user/order/components/MainBlock.jsx":["eda1",9],"./layout/user/order/components/MainBlock.less":["bfb3",7],"./layout/user/order/components/OrderConfirm":["4364",9,"chunk-6fc07222","chunk-84a4d64a"],"./layout/user/order/components/OrderConfirm.jsx":["4364",9,"chunk-6fc07222","chunk-84a4d64a"],"./layout/user/order/components/OrderConfirm.less":["414b",7],"./layout/user/order/components/OrderInfo":["29bf",9],"./layout/user/order/components/OrderInfo.jsx":["29bf",9],"./layout/user/order/components/OrderInfo.less":["540c",7],"./layout/user/order/components/PickerItem":["0869",9],"./layout/user/order/components/PickerItem.jsx":["0869",9],"./layout/user/order/components/PickerItem.less":["0ac0",7],"./layout/user/order/components/SalesInfo":["de66",9],"./layout/user/order/components/SalesInfo.jsx":["de66",9],"./layout/user/order/components/SalesInfo.less":["3dff",7],"./layout/user/order/components/StepStatus":["3112",9],"./layout/user/order/components/StepStatus.jsx":["3112",9],"./layout/user/order/components/StepStatus.less":["ca90",7],"./layout/user/order/detail":["8663",9,"chunk-6fc07222","chunk-84a4d64a"],"./layout/user/order/detail.jsx":["8663",9,"chunk-6fc07222","chunk-84a4d64a"],"./layout/user/order/detail.less":["fda5",7],"./layout/user/order/order":["c991",9,"chunk-6fc07222"],"./layout/user/order/order.jsx":["c991",9,"chunk-6fc07222"],"./layout/user/order/order.less":["b285",7,"chunk-6fc07222"],"./layout/user/order/paid":["3b53",9,"chunk-6fc07222","chunk-84a4d64a"],"./layout/user/order/paid.jsx":["3b53",9,"chunk-6fc07222","chunk-84a4d64a"],"./layout/user/order/paid.less":["be2d",7],"./layout/user/order/preorder":["b9b6",9,"chunk-6fc07222","chunk-84a4d64a"],"./layout/user/order/preorder.jsx":["b9b6",9,"chunk-6fc07222","chunk-84a4d64a"],"./layout/user/pagecontainer":["ca9c",9,"chunk-24753293"],"./layout/user/pagecontainer/":["ca9c",9,"chunk-24753293"],"./layout/user/pagecontainer/index":["ca9c",9,"chunk-24753293"],"./layout/user/pagecontainer/index.less":["f5de",7,"chunk-6fc07222"],"./layout/user/pagecontainer/index.vue":["ca9c",9,"chunk-24753293"],"./layout/user/personalcenter":["fa5f",9,"chunk-6fc07222","chunk-84a4d64a"],"./layout/user/personalcenter/":["fa5f",9,"chunk-6fc07222","chunk-84a4d64a"],"./layout/user/personalcenter/index":["fa5f",9,"chunk-6fc07222","chunk-84a4d64a"],"./layout/user/personalcenter/index.jsx":["fa5f",9,"chunk-6fc07222","chunk-84a4d64a"],"./layout/user/personalcenter/index.less":["b62f",7,"chunk-6fc07222"],"./layout/user/setting":["398a",9,"chunk-84a4d64a"],"./layout/user/setting/":["398a",9,"chunk-84a4d64a"],"./layout/user/setting/account":["ee60",9],"./layout/user/setting/account/":["ee60",9],"./layout/user/setting/account/components/CodeInput":["0953",9],"./layout/user/setting/account/components/CodeInput/":["0953",9],"./layout/user/setting/account/components/CodeInput/index":["0953",9],"./layout/user/setting/account/components/CodeInput/index.jsx":["0953",9],"./layout/user/setting/account/index":["ee60",9],"./layout/user/setting/account/index.jsx":["ee60",9],"./layout/user/setting/account/index.less":["54f0",7],"./layout/user/setting/index":["398a",9,"chunk-84a4d64a"],"./layout/user/setting/index.jsx":["398a",9,"chunk-84a4d64a"],"./layout/user/setting/index.less":["971a",7],"./layout/user/setting/password":["7e2d",9,"chunk-6fc07222"],"./layout/user/setting/password/":["7e2d",9,"chunk-6fc07222"],"./layout/user/setting/password/index":["7e2d",9,"chunk-6fc07222"],"./layout/user/setting/password/index.jsx":["7e2d",9,"chunk-6fc07222"],"./layout/user/setting/password/index.less":["949b",7,"chunk-6fc07222"],"./layout/user/setting/thirdaccount":["7fad",9,"chunk-84a4d64a"],"./layout/user/setting/thirdaccount/":["7fad",9,"chunk-84a4d64a"],"./layout/user/setting/thirdaccount/components/BindWechat":["cb04",9],"./layout/user/setting/thirdaccount/components/BindWechat/":["cb04",9],"./layout/user/setting/thirdaccount/components/BindWechat/index":["cb04",9],"./layout/user/setting/thirdaccount/components/BindWechat/index.jsx":["cb04",9],"./layout/user/setting/thirdaccount/components/BindWechat/index.less":["09b9",7],"./layout/user/setting/thirdaccount/index":["7fad",9,"chunk-84a4d64a"],"./layout/user/setting/thirdaccount/index.jsx":["7fad",9,"chunk-84a4d64a"],"./layout/user/setting/thirdaccount/index.less":["95ef",7],"./layout/vip":["7f29",9,"chunk-6fc07222"],"./layout/vip/":["7f29",9,"chunk-6fc07222"],"./layout/vip/components/headerbg":["bc11",9,"chunk-6fc07222"],"./layout/vip/components/headerbg.vue":["bc11",9,"chunk-6fc07222"],"./layout/vip/components/success":["2ae1",9],"./layout/vip/components/success.vue":["2ae1",9],"./layout/vip/components/title":["4981",9],"./layout/vip/components/title.vue":["4981",9],"./layout/vip/convert":["403c",9,"chunk-6fc07222"],"./layout/vip/convert/":["403c",9,"chunk-6fc07222"],"./layout/vip/convert/index":["403c",9,"chunk-6fc07222"],"./layout/vip/convert/index.less":["e6f6",7,"chunk-24753293"],"./layout/vip/convert/index.vue":["403c",9,"chunk-6fc07222"],"./layout/vip/index":["7f29",9,"chunk-6fc07222"],"./layout/vip/index.less":["f5530",7,"chunk-24753293"],"./layout/vip/index.vue":["7f29",9,"chunk-6fc07222"],"./login-v2":["ce2f",9,"chunk-6fc07222"],"./login-v2.vue":["ce2f",9,"chunk-6fc07222"],"./login/login":["cda7",9,"chunk-6fc07222"],"./login/login.jsx":["cda7",9,"chunk-6fc07222"],"./login/login.less":["62d2",7,"chunk-6fc07222"],"./merchant/components/Content/Content":["33ac",9],"./merchant/components/Content/Content.jsx":["33ac",9],"./merchant/components/Content/Content.less":["cb86",7],"./merchant/components/Editable":["ffb0",9,"chunk-24753293"],"./merchant/components/Editable.vue":["ffb0",9,"chunk-24753293"],"./merchant/components/modal":["7b01",9,"chunk-24753293"],"./merchant/components/modal.jsx":["7b01",9,"chunk-24753293"],"./merchant/components/modal.less":["2b14",7,"chunk-24753293"],"./merchant/components/search":["fea4",9,"chunk-24753293"],"./merchant/components/search.jsx":["fea4",9,"chunk-24753293"],"./merchant/components/table":["06f7",9,"chunk-24753293"],"./merchant/components/table.jsx":["06f7",9,"chunk-24753293"],"./merchant/components/table.less":["eaaf",7,"chunk-24753293"],"./merchant/home":["e53d",9],"./merchant/home.jsx":["e53d",9],"./merchant/home.less":["4cf2",7],"./merchant/logs":["4c74",9],"./merchant/logs.jsx":["4c74",9],"./merchant/logs.less":["86f9",7],"./merchant/notice":["e14f",9],"./merchant/notice.jsx":["e14f",9],"./merchant/settings":["0de4",9,"chunk-24753293","chunk-6fc07222"],"./merchant/settings.jsx":["0de4",9,"chunk-24753293","chunk-6fc07222"],"./merchant/settings.less":["291a",7,"chunk-24753293"],"./merchant/template.less":["6ed9",7,"chunk-24753293"],"./merchant/templates":["65a3",9,"chunk-24753293"],"./merchant/templates.jsx":["65a3",9,"chunk-24753293"],"./merchant/users":["726a",9,"chunk-24753293"],"./merchant/users.jsx":["726a",9,"chunk-24753293"],"./notFound/notFound":["46cc",9,"chunk-6fc07222","chunk-24753293"],"./notFound/notFound.vue":["46cc",9,"chunk-6fc07222","chunk-24753293"],"./pay/pay":["18a4",9,"chunk-6fc07222","chunk-84a4d64a"],"./pay/pay.jsx":["18a4",9,"chunk-6fc07222","chunk-84a4d64a"],"./pay/pay.less":["7d4c",7],"./pay/success":["9650",9,"chunk-6fc07222"],"./pay/success.jsx":["9650",9,"chunk-6fc07222"],"./pay/success.less":["bafb",7,"chunk-6fc07222"],"./render":["d03e",9],"./render-v2":["f30a",9,"chunk-6fc07222","chunk-84a4d64a"],"./render-v2/":["f30a",9,"chunk-6fc07222","chunk-84a4d64a"],"./render-v2/Menu":["062e",9],"./render-v2/Menu.vue":["062e",9],"./render-v2/aiclear":["a394",9],"./render-v2/aiclear/":["a394",9],"./render-v2/aiclear/index":["a394",9],"./render-v2/aiclear/index.less":["af27",7,"chunk-24753293"],"./render-v2/aiclear/index.vue":["a394",9],"./render-v2/guides":["5943",9],"./render-v2/guides/":["5943",9],"./render-v2/guides/index":["5943",9],"./render-v2/guides/index.less":["2a9d",7,"chunk-24753293"],"./render-v2/guides/index.vue":["5943",9],"./render-v2/header":["3091",9],"./render-v2/header/":["3091",9],"./render-v2/header/index":["3091",9],"./render-v2/header/index.less":["5108",7,"chunk-6fc07222"],"./render-v2/header/index.vue":["3091",9],"./render-v2/iframe":["68a2",9,"chunk-24753293"],"./render-v2/iframe.vue":["68a2",9,"chunk-24753293"],"./render-v2/index":["f30a",9,"chunk-6fc07222","chunk-84a4d64a"],"./render-v2/index.less":["f552",7,"chunk-24753293"],"./render-v2/index.vue":["f30a",9,"chunk-6fc07222","chunk-84a4d64a"],"./render-v2/left":["2ea4",9,"chunk-84a4d64a"],"./render-v2/left/":["2ea4",9,"chunk-84a4d64a"],"./render-v2/left/Light":["2a4a",9],"./render-v2/left/Light.vue":["2a4a",9],"./render-v2/left/UpdateName":["4337",9],"./render-v2/left/UpdateName.vue":["4337",9],"./render-v2/left/VideoMenu":["186c",9],"./render-v2/left/VideoMenu.vue":["186c",9],"./render-v2/left/index":["2ea4",9,"chunk-84a4d64a"],"./render-v2/left/index.less":["2709",7,"chunk-24753293"],"./render-v2/left/index.vue":["2ea4",9,"chunk-84a4d64a"],"./render-v2/mode":["bf03",9,"chunk-84a4d64a"],"./render-v2/mode/":["bf03",9,"chunk-84a4d64a"],"./render-v2/mode/index":["bf03",9,"chunk-84a4d64a"],"./render-v2/mode/index.less":["ea0c",7,"chunk-6fc07222"],"./render-v2/mode/index.vue":["bf03",9,"chunk-84a4d64a"],"./render-v2/mode/property":["c45c",9],"./render-v2/mode/property/":["c45c",9],"./render-v2/mode/property/envLight":["5c7a",9],"./render-v2/mode/property/envLight.vue":["5c7a",9],"./render-v2/mode/property/index":["c45c",9],"./render-v2/mode/property/index.less":["93cf",7,"chunk-24753293"],"./render-v2/mode/property/index.vue":["c45c",9],"./render-v2/mode/property/lightHeight":["14b7",9],"./render-v2/mode/property/lightHeight.vue":["14b7",9],"./render-v2/mode/property/rectAreaLight":["8d18",9],"./render-v2/mode/property/rectAreaLight.vue":["8d18",9],"./render-v2/mode/property/rotateLight":["094a",9],"./render-v2/mode/property/rotateLight.vue":["094a",9],"./render-v2/mode/property/sunLight":["0d08",9],"./render-v2/mode/property/sunLight.vue":["0d08",9],"./render-v2/mode/property/videoRenderModel":["e46a",9],"./render-v2/mode/property/videoRenderModel.vue":["e46a",9],"./render-v2/mode/videoMode":["9048",9,"chunk-6fc07222","chunk-84a4d64a"],"./render-v2/mode/videoMode.vue":["9048",9,"chunk-6fc07222","chunk-84a4d64a"],"./render-v2/mode/videoProp":["0748",9],"./render-v2/mode/videoProp.vue":["0748",9],"./render-v2/preview":["3529",9],"./render-v2/preview/":["3529",9],"./render-v2/preview/index":["3529",9],"./render-v2/preview/index.less":["f58b",7,"chunk-24753293"],"./render-v2/preview/index.vue":["3529",9],"./render-v2/preview/video":["e5fb2",9],"./render-v2/preview/video.vue":["e5fb2",9],"./render-v2/progressBar":["54ca",9],"./render-v2/progressBar.vue":["54ca",9],"./render/":["d03e",9],"./render/Menu":["ee02",9],"./render/Menu.vue":["ee02",9],"./render/aiclear":["ce97",9],"./render/aiclear/":["ce97",9],"./render/aiclear/index":["ce97",9],"./render/aiclear/index.less":["1ae3",7,"chunk-24753293"],"./render/aiclear/index.vue":["ce97",9],"./render/guides":["b1d4",9],"./render/guides/":["b1d4",9],"./render/guides/index":["b1d4",9],"./render/guides/index.less":["521c",7,"chunk-24753293"],"./render/guides/index.vue":["b1d4",9],"./render/header":["1781",9],"./render/header/":["1781",9],"./render/header/index":["1781",9],"./render/header/index.less":["bcb8",7,"chunk-24753293"],"./render/header/index.vue":["1781",9],"./render/iframe":["d7c8",9],"./render/iframe.vue":["d7c8",9],"./render/index":["d03e",9],"./render/index.less":["8ec7",7,"chunk-6fc07222"],"./render/index.vue":["d03e",9],"./render/left":["4582",9],"./render/left/":["4582",9],"./render/left/Light":["b1dc",9],"./render/left/Light.vue":["b1dc",9],"./render/left/UpdateName":["77a8",9],"./render/left/UpdateName.vue":["77a8",9],"./render/left/VideoMenu":["3214",9],"./render/left/VideoMenu.vue":["3214",9],"./render/left/index":["4582",9],"./render/left/index.less":["c775",7,"chunk-6fc07222"],"./render/left/index.vue":["4582",9],"./render/mode":["c5fd",9],"./render/mode/":["c5fd",9],"./render/mode/index":["c5fd",9],"./render/mode/index.less":["63a9",7,"chunk-6fc07222"],"./render/mode/index.vue":["c5fd",9],"./render/mode/property":["170e",9],"./render/mode/property/":["170e",9],"./render/mode/property/envLight":["5c54",9],"./render/mode/property/envLight.vue":["5c54",9],"./render/mode/property/index":["170e",9],"./render/mode/property/index.less":["a29f",7,"chunk-24753293"],"./render/mode/property/index.vue":["170e",9],"./render/mode/property/lightHeight":["362b",9],"./render/mode/property/lightHeight.vue":["362b",9],"./render/mode/property/rectAreaLight":["70ab",9],"./render/mode/property/rectAreaLight.vue":["70ab",9],"./render/mode/property/rotateLight":["dad2",9],"./render/mode/property/rotateLight.vue":["dad2",9],"./render/mode/property/sunLight":["1ecc",9],"./render/mode/property/sunLight.vue":["1ecc",9],"./render/mode/property/videoRenderModel":["3809",9],"./render/mode/property/videoRenderModel.vue":["3809",9],"./render/mode/videoMode":["debd",9],"./render/mode/videoMode.vue":["debd",9],"./render/mode/videoProp":["3350",9],"./render/mode/videoProp.vue":["3350",9],"./render/preview":["a24e",9],"./render/preview/":["a24e",9],"./render/preview/index":["a24e",9],"./render/preview/index.less":["6622",7,"chunk-24753293"],"./render/preview/index.vue":["a24e",9],"./render/preview/video":["66be",9],"./render/preview/video.vue":["66be",9],"./render/progressBar":["ddcb",9],"./render/progressBar.vue":["ddcb",9],"./test/test":["1a83",9,"chunk-24753293"],"./test/test.vue":["1a83",9,"chunk-24753293"]};function n(t){if(!i.o(s,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=s[t],n=e[0];return Promise.all(e.slice(2).map(i.e)).then((function(){return i.t(n,e[1])}))}n.keys=function(){return Object.keys(s)},n.id="9dac",t.exports=n},"9df1":function(t,e,i){},"9e07":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAB7ElEQVQ4T6WTP4gTQRTGvzdJzuUKvcNSFKwUGxG1tBKsFLxGECuvWC8bMjEcl5sUEiJymZUgyR5OTESwEtIKFoKVpTZqcZyNKFwpHoLCEi/3ZDc7a3LEP+B0O++937zvvW8J/3nI1ntSb5hAnfgbryAbCztMH7rr6m2UGwM86d8C+DYBT+4H6trvIIXC2kHOiM8ADU2wmk0BBamvMNCPCwmuaauH0yCe1GzvTaDix8clpEEIccq0Km/GIZ7UIYB90R0LXOy01LMJQD7fmKccfbFFOyHmej31dSRRvwJwdtSh6Jp2ZcnmpR3EiUV9CYSn4216JX8ZzM3k7r0J1PHxziYAMaSk74FRTpIiWXEOA4NOoGIJfwQkLb8AcD4alFf0myBetkP7J0AC2QDzTRAFszOZ083myvdpm0kl5Mt3z9Fw96VNCh3a74S8CeLLxGKBwdVpUibXyNQ3QeWqJ/UnEB2O2rbmEaDFQTjXzzrb38C0ZdZXj6RrXCrfOSSG2S2r03W7uayzPYi+89KvEnjNxgrFxiITPZpuJCGum1blsSf1cwAXYkDJP0bMm7uCjz5oVT96UkfeyJlAze5x4uh/sDNgypzstFfeJat9DcaZXyabn+n1bvyYANig6+oD1oF7p16r1Zx6vR5ZOj0/AfwnxBHisv9+AAAAAElFTkSuQmCC"},"9e2e":function(t,e,i){var s=i("a73c5"),n=i("9850"),a=i("82eb"),r=a.WILL_BE_RESTORED,o=new n,l=function(){};l.prototype={constructor:l,drawRectText:function(t,e){var i=this.style;e=i.textRect||e,this.__dirty&&s.normalizeTextStyle(i,!0);var n=i.text;if(null!=n&&(n+=""),s.needDrawText(n,i)){t.save();var a=this.transform;i.transformText?this.setTransform(t):a&&(o.copy(e),o.applyTransform(a),e=o),s.renderText(this,t,n,i,e,r),t.restore()}}};var c=l;t.exports=c},"9e62":function(t,e,i){},"9e91":function(t,e,i){},"9ecb":function(t,e,i){"use strict";var s=i("8ef8"),n=i.n(s);n.a},"9ecc":function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("ed08"),a=i("c7ee");i("5144");e["default"]=Object(s["b"])({props:{cursor:{type:String,default:"default"},lineWidth:{type:Number,default:1}},setup(t,e){const i=e.vuex.mapState("table",["rows"]),r=e.vuex.mapState(["scale"]),o=Object(s["j"])(!1),l=Object(s["j"])(0),c=(Object(s["a"])(()=>10/r.scale.value),t=>{e.emit("dragLine",{event:t,index:l.value})});Object(s["k"])(()=>o.value,()=>{o.value?document.body.style.cursor=t.cursor:document.body.style.cursor="default"});const h=async t=>{e.emit("dragLine",{event:t,index:l.value,update:!0}),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",h),await Object(n["D"])(0),o.value=!1};return()=>Object(s["c"])("div",{class:"drag-table-sider text-center",style:{width:24/r.scale.value+"px",fontSize:14/r.scale.value+"px",marginLeft:`-${32/r.scale.value}px`}},[Object(s["c"])("ul",[i.rows.value.map((n,a)=>Object(s["c"])("li",{key:a,style:{height:(a===i.rows.value.length-1||0===a?n.height+t.lineWidth/2:n.height+1)+"px"},class:n.focus?"focus":n.active?"active":"",on:{click:()=>{o.value||e.emit("change",a)}}},[a+1,Object(s["c"])("div",{class:"line "+t.cursor,style:{height:1/r.scale.value+"px"},on:{mousedown:t=>{l.value=a,t.stopPropagation(),e.emit("mousedown"),o.value=!0,c(t),document.addEventListener("mousemove",c),document.addEventListener("mouseup",h)}}})]))]),Object(s["c"])("div",{class:"add-btn-wrapper",style:{marginTop:20/r.scale.value+"px"}},[Object(s["c"])(a["default"],{on:{click:()=>e.emit("addOne")}})])])}})},"9f1f":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-modal",{attrs:{title:"VIP用户支持跨画布粘贴",visible:t.visible,width:480,footer:null},on:{cancel:t.handleCancel}},[s("div",{staticClass:"main-box"},[t._v(" VIP会员用户可享受跨画布复制粘贴权益，轻松快捷做设计～ "),s("img",{staticClass:"upgrade-animation",staticStyle:{width:"100%"},attrs:{src:i("5d22"),alt:""}}),s("div",{staticClass:"upgrade-footer"},[s("a-button",{staticClass:"upgrade-button",attrs:{type:"primary"},on:{click:t.handleOk}},[t._v(" 升级成会员 ")])],1)])])},n=[],a=i("9393"),r={mixins:[a["a"]],data(){return{visible:!1}},methods:{handleCancel(){this.visible=!1},handleOk(){this.visible=!1,this.showPersonalVip()}},mounted(){this.$bus.$on("show-vip-paste-modal",t=>{this.visible=!0})},destroyed(){this.$bus.$off("show-vip-paste-modal")}},o=r,l=(i("0010"),i("2877")),c=Object(l["a"])(o,s,n,!1,null,"37aea82d",null);e["default"]=c.exports},"9f51":function(t,e,i){var s=i("857d"),n=s.normalizeRadian,a=2*Math.PI;function r(t,e,i,s,r,o,l,c,h){if(0===l)return!1;var d=l;c-=t,h-=e;var u=Math.sqrt(c*c+h*h);if(u-d>i||u+d<i)return!1;if(Math.abs(s-r)%a<1e-4)return!0;if(o){var p=s;s=n(r),r=n(p)}else s=n(s),r=n(r);s>r&&(r+=a);var f=Math.atan2(h,c);return f<0&&(f+=a),f>=s&&f<=r||f+a>=s&&f+a<=r}e.containStroke=r},"9f9e":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isPro?t._e():i("div",{staticClass:"devtool-wrap",class:[{wide:t.is_wide,fold:!t.is_wide}]},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.is_wide,expression:"is_wide"}]},[t._t("default")],2),i("a-button",{staticClass:"btn",attrs:{type:"primary",size:"small"},on:{click:t.onSwitchWide}},[t._v(" "+t._s(t.is_wide?"收起":"展开")+" ")])],1)},n=[],a=i("5530"),r=i("5880"),o=Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["knife_data","project_data"])),{},{data(){return{is_wide:!1}},computed:{isPro(){return!0}},mounted(){const t=localStorage.getItem("devtool_is_wide");this.is_wide=!("1"!==t)},methods:{onSwitchWide(){this.is_wide=!this.is_wide,localStorage.setItem("devtool_is_wide",this.is_wide?"1":"0")}},watch:{}}),l=o,c=(i("bf1b"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,"eaab5864",null);e["default"]=h.exports},"9fa3":function(t,e,i){var s=i("4ab1"),n=i("6d8b"),a=i("1687");function r(t,e){s.call(this,t,e,"clipPath","__clippath_in_use__")}n.inherits(r,s),r.prototype.update=function(t){var e=this.getSvgElement(t);e&&this.updateDom(e,t.__clipPaths,!1);var i=this.getTextSvgElement(t);i&&this.updateDom(i,t.__clipPaths,!0),this.markUsed(t)},r.prototype.updateDom=function(t,e,i){if(e&&e.length>0){var s,n,r=this.getDefs(!0),o=e[0],l=i?"_textDom":"_dom";o[l]?(n=o[l].getAttribute("id"),s=o[l],r.contains(s)||r.appendChild(s)):(n="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,s=this.createElement("clipPath"),s.setAttribute("id",n),r.appendChild(s),o[l]=s);var c=this.getSvgProxy(o);if(o.transform&&o.parent.invTransform&&!i){var h=Array.prototype.slice.call(o.transform);a.mul(o.transform,o.parent.invTransform,o.transform),c.brush(o),o.transform=h}else c.brush(o);var d=this.getSvgElement(o);s.innerHTML="",s.appendChild(d.cloneNode()),t.setAttribute("clip-path","url(#"+n+")"),e.length>1&&this.updateDom(s,e.slice(1),i)}else t&&t.setAttribute("clip-path","none")},r.prototype.markUsed=function(t){var e=this;t.__clipPaths&&n.each(t.__clipPaths,(function(t){t._dom&&s.prototype.markUsed.call(e,t._dom),t._textDom&&s.prototype.markUsed.call(e,t._textDom)}))};var o=r;t.exports=o},"9ffa":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ITF14=e.ITF=void 0;var s=i("3c7c"),n=o(s),a=i("07df"),r=o(a);function o(t){return t&&t.__esModule?t:{default:t}}e.ITF=n.default,e.ITF14=r.default},a026:function(t,e,i){},a048:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"single-control-wrap",class:[{selected:t.data._selected,childSelected:t.hasSelectedChild}],style:{borderWidth:1/this.scale+"px"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.data._selected&&t.data.locked,expression:"data._selected && data.locked"}],staticClass:"lock iconfont icon-suo",style:{transform:"translate(50%,50%) scale("+1/t.scale+") "}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.resizing,expression:"resizing"}],staticClass:"resize-tip",style:{transform:"translate(-50%, -50%) scale("+1/t.scale+")  rotate(-"+(t.project_data.rotate+t.data.style.rotate)+"deg",borderRaduis:3/t.scale+"px"}},[t._v(" "+t._s(t.getScaleTipText())+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.rotating,expression:"rotating"}],staticClass:"rotate-tip",style:{transform:"translate(-50%, -50%) scale("+1/t.scale+")  rotate(-"+(t.project_data.rotate+t.data.style.rotate)+"deg",borderRadius:3/t.scale+"px"}},[t._v(" "+t._s(Math.round(t.data.style.rotate))+"° ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.data.locked&&t.data._selected&&t.isSingleSelected,expression:"!data.locked && data._selected && isSingleSelected"}],staticClass:"rotate-bar",style:t.rotateBarStyle,on:{mousedown:t.onStartRotate}}),!t.data.locked&&t.isSingleSelected&&t.data._selected?t._l(t.available_angles,(function(e,s){return i("div",{key:s,class:["angle",""+e,{rect:1===e.length}],style:{cursor:t.calc_angle_cursor(e),width:t.angleBaseLength+"px",height:t.angleBaseLength+"px"},on:{mousedown:function(i){return i.stopPropagation(),t.onStartScale(i,e)}}})})):t._e()],2)},n=[],a=(i("ddb0"),i("5530")),r=i("5880"),o=i("d323"),l=i("60bb"),c=i.n(l),h=i("fe94"),d=i("365c"),u=i("2b1a"),p={props:{data:{type:Object,default:()=>({})}},data(){return{rotating:!1,resizing:!1,$angles:["n","ne","e","se","s","sw","w","nw"]}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["scale","project_data","image_design_size_map"])),Object(r["mapGetters"])("editor-v2",["curDesigns","isSingleSelected"])),{},{available_angles(){const{type:t}=this.data,{vertical:e}=this.data.style;return"font"===t?e?["n","ne","se","s","sw","nw"]:["ne","e","se","sw","w","nw"]:this.$data.$angles},rotateBarStyle(){const t={position:"absolute",cursor:"grab",height:18/this.scale+"px",width:18/this.scale+"px",backgroundImage:`url(${i("3167")})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",pointerEvents:"auto"},e=-30/this.scale+"px";return 0===this.project_data.rotate?(t.top=e,t.left="50%",t.transform="translate(-50%, -50%)"):90===this.project_data.rotate?(t.left=e,t.top="50%",t.transform="translate(-50%, -50%)"):180===this.project_data.rotate?(t.top=(12+this.data.style.height)/this.scale+"px",t.left="50%",t.transform="translate(-50%, -50%)"):270===this.project_data.rotate&&(t.left=(12+this.data.style.width)/this.scale+"px",t.top="50%",t.transform="translate(-50%, -50%)"),t},angleBaseLength(){return 10/this.scale},hasSelectedChild(){if(!this.data.designs)return!1;const{designs:t}=this.data;for(let e=0;e<t.length;e++)if(t[e]._selected)return!0;return!1}}),methods:{getScaleTipText(){const{curDesigns:t}=this;if(!t||t.length>1)return"";const{data:e}=this,i=Math.round(e.style.width),s=Math.round(e.style.height);if("img"!==e.type||e.src.indexOf("svg")>-1)return`${i} X ${s} mm`;const n=this.image_design_size_map[e.uuid];if(!n)return`${i} X ${s} mm`;const a=Object(l["round"])(n.width/Object(h["a"])(e.style.width).mm2inch()),r=Object(l["round"])(n.height/Object(h["a"])(e.style.height).mm2inch());return Math.abs(a-r)<=1?`${i} X ${s} mm, ${a}dpi`:`${i} X ${s} mm, ${a}dpi ${r}dpi`},onStartScale(t,e){var i;const{data:s}=this;if(null===s||void 0===s?void 0:s.locked)return;const n=s.style.width,a=s.style.height,r=s.style.fontSize||0,o=s.style.lineHeight||0;let l=0,c=0,p=0,f=0;s.bg&&(l=s.bg.x,c=s.bg.y,p=s.bg.width,f=s.bg.height);const m=this.$data.$angles,g=m.indexOf(e);let v=g+4;v>=m.length&&(v%=m.length);let b=this.calculatePosition(e);this.$store.commit("editor/setMousePosition",{x:b.x*d["DPI"],y:b.y*d["DPI"]});let y=this.calculatePosition(m[v]);const _={x:s.style.left+s.style.width/2,y:s.style.top+s.style.height/2};b=Object(u["b"])(b.x,b.y,_.x,_.y,s.style.rotate||0),y=Object(u["b"])(y.x,y.y,_.x,_.y,s.style.rotate||0);const x=null===(i=document.getElementById("svgContainer"))||void 0===i?void 0:i.getBoundingClientRect();if(!x)return;const w={x:b.x-y.x,y:b.y-y.y},C=Math.sqrt(w.x*w.x+w.y*w.y);w.x/=C,w.y/=C;let k=parseInt(this.project_data.rotate/90)%4;k<0&&(k+=4);let S=null;"font"===s.type&&(S=document.querySelector("#element"+s.uuid)),this.$store.commit("editor-v2/set_enable_local_history",!1),this.resizing=!0;const A=JSON.parse(JSON.stringify(s));document.onmousemove=i=>{const u=s.style.left,m=s.style.top,g=s.style.width,v=s.style.height;let _=(i.clientX-t.clientX)/this.scale/d["DPI"],x=(i.clientY-t.clientY)/this.scale/d["DPI"];1===k?[_,x]=[x,-_]:2===k?[_,x]=[-_,-x]:3===k&&([_,x]=[-x,_]);const C={x:(_*w.x+x*w.y)*w.x,y:(_*w.x+x*w.y)*w.y},O={x:b.x+C.x,y:b.y+C.y},j=this.applyPointBack(e,O,y,n,a,l,c,p,f);if(s.style.width<1&&(s.style.width=g,s.style.left=u),s.style.height<1&&(s.style.height=v,s.style.top=m),2===e.length&&"font"===s.type)s.style.vertical?(s.style.fontSize=s.style.height/a*r,s.style.lineHeight=s.style.height/a*o):(s.style.fontSize=s.style.width/n*r,s.style.lineHeight=s.style.width/n*o);else if(1===e.length&&"font"===s.type&&S){const t=Object(h["a"])(s.style.fontSize).mm2px(),e=t>12?1:t/12;s.style.vertical?s.style.width=S.clientWidth*e/d["DPI"]:s.style.height=S.clientHeight*e/d["DPI"]}if("group"===s.type&&s.designs){const t=j.x_axis_ratio;for(let e=0;e<s.designs.length;e++){const i=s.designs[e],{uuid:n}=i,a=A.designs.find(t=>t.uuid===n);this.doScaleToChildDesign(i,a,t)}}},document.onmouseup=t=>{this.resizing=!1,this.$store.commit("editor-v2/set_enable_local_history",!0),document.onmousedown=null,document.onmousemove=null}},doScaleToChildDesign(t,e,i){const s=this.getScaleMatrix({x:0,y:0},i),n=new o["Matrix"]([[e.style.left,e.style.top,1]]),[a,r]=n.multiply(s).elements[0];if(t.style.width=e.style.width*i,t.style.height=e.style.height*i,t.style.left=a,t.style.top=r,"font"===t.type)t.style.fontSize=e.style.fontSize*i,t.style.lineHeight=e.style.lineHeight*i;else if("img"===t.type&&!/\.svg$/.test(t.src))if(t.bg){const{x:s,y:n,width:a,height:r}=e.bg;t.bg.x=s*i,t.bg.y=n*i,t.bg.width=a*i,t.bg.height=r*i}else t.bg.x=0,t.bg.y=0,t.bg.width=t.style.width,t.bg.height=t.style.height},getScaleMatrix(t,e){const{x:i,y:s}=t,n=new o["Matrix"]([[1,0,0],[0,1,0],[-i,-s,1]]),a=new o["Matrix"]([[e,0,0],[0,e,0],[0,0,1]]),r=new o["Matrix"]([[1,0,0],[0,1,0],[i,s,1]]);return n.multiply(a).multiply(r)},applyPointBack(t,e,i,s,n,a,r,o,l){const c=(e.x+i.x)/2,h=(e.y+i.y)/2,d=Object(u["b"])(e.x,e.y,c,h,-this.data.style.rotate),p=Object(u["b"])(i.x,i.y,c,h,-this.data.style.rotate);2===t.length?"nw"===t?(this.data.style.width=p.x-d.x,this.data.style.height=p.y-d.y,this.data.style.left=d.x,this.data.style.top=d.y):"ne"===t?(this.data.style.width=-p.x+d.x,this.data.style.height=p.y-d.y,this.data.style.left=p.x,this.data.style.top=d.y):"se"===t?(this.data.style.width=-p.x+d.x,this.data.style.height=-p.y+d.y,this.data.style.left=p.x,this.data.style.top=p.y):"sw"===t&&(this.data.style.width=p.x-d.x,this.data.style.height=-p.y+d.y,this.data.style.left=d.x,this.data.style.top=p.y):"n"===t?(this.data.style.height=p.y-d.y,this.data.style.left=d.x-s/2,this.data.style.top=d.y):"e"===t?(this.data.style.width=d.x-p.x,this.data.style.left=p.x,this.data.style.top=p.y-n/2):"s"===t?(this.data.style.height=d.y-p.y,this.data.style.left=p.x-s/2,this.data.style.top=p.y):"w"===t&&(this.data.style.width=p.x-d.x,this.data.style.left=d.x,this.data.style.top=d.y-n/2);const f=this.data.style.width/s,m=this.data.style.height/n;return this.data.bg&&(this.data.bg.x=a*f,this.data.bg.y=r*m,this.data.bg.width=o*f,this.data.bg.height=l*m),{x_axis_ratio:f,y_axis_ratio:m}},calculatePosition(t){const{style:e}=this.data;let i={};return"nw"===t?i={x:e.left,y:e.top}:"ne"===t?i={x:e.left+e.width,y:e.top}:"sw"===t?i={x:e.left,y:e.top+e.height}:"se"===t?i={x:e.left+e.width,y:e.top+e.height}:"n"===t?i={x:e.left+e.width/2,y:e.top}:"e"===t?i={x:e.left+e.width,y:e.top+e.height/2}:"s"===t?i={x:e.left+e.width/2,y:e.top+e.height}:"w"===t&&(i={x:e.left,y:e.top+e.height/2}),i},calc_angle_cursor(t){const e=this.$data.$angles;let i=this.data.style.rotate+22;i+=this.project_data.rotate;const s=parseInt(i/45);let n=s+e.indexOf(t);n%=e.length,n<0&&(n+=e.length);const a=e[n]+"-resize";return a},onStartRotate(t){var e;if(t.stopPropagation(),null===(e=this.design)||void 0===e?void 0:e.locked)return;this.rotating=!0;const{uuid:i}=this.data,s=document.getElementById("element"+i).getBoundingClientRect(),n={x:s.left+s.width/2,y:s.top+s.height/2},a=this.data.style.rotate;this.$store.commit("editor-v2/set_enable_local_history",!1),document.onmousemove=this.throttleRotate(t.clientX,t.clientY,n,a),document.onmouseup=t=>{this.$store.commit("editor-v2/set_enable_local_history",!0),this.rotating=!1,document.onmousemove=null,document.onmouseup=null}},throttleRotate(t,e,i,s){return c.a.throttle(n=>{const a=n.clientX,r=n.clientY,o=t-i.x,l=e-i.y,c=a-i.x,h=r-i.y;let d=180*Math.acos((o*c+l*h)/(Math.sqrt(Math.pow(o,2)+Math.pow(l,2))*Math.sqrt(Math.pow(c,2)+Math.pow(h,2))))/Math.PI;const u=o*h-c*l;u<0&&(d=360-d),d=this._roundAngle(d),this.data.style.rotate=Math.ceil((s+d+360)%360)},5)},_roundAngle(t){const e=5,i=45;t%=360,t<0&&(t+=360);const s=Math.round(t/i);return Math.abs(t-s*i)<e?s*i:t}}},f=p,m=(i("26e0"),i("2877")),g=Object(m["a"])(f,s,n,!1,null,"31e44646",null);e["default"]=g.exports},a04d:function(t,e,i){t.exports=i.p+"editor-assets/img/wechat.0abe8907.svg"},a05d:function(t,e,i){"use strict";var s=i("0cdb"),n=i.n(s);n.a},a061:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABcUlEQVRYR+2UMUrEQBSG3wvrCLZZRbHQThBLT7AeQZgiEwKCjXdYK/UApljFLgkZISewUQ+hhxBdsE/xngzsQggbM7MK20zaCfN/882bH2HFH644HzyAN+ANeAPWBrIs2x0MBmeIeB9F0bSrwLTWI2Y+UErd2ZScNUBZlmNmvgKAdyI6SZLksx1QFMUpIj4CwJoQYkdK+dEHYQ2gtR4S0SsAHC2CaIYj4rVS6rIv3KxbA5if8zzfCoLguQ3RDAeAmziOxzbhzgCLIIIguCWiidHuGr4UQBsCEZmZjUmnk88NOV1BU6vW+pyZH2bhUyHEoZTyy1b9nwBad26e5NAMphBi5ArhbKA9cESUNgfTFcIJoGvaq6rarOv6Zf46XCCsAUzDEdFT17S3IN6EEMdSyrpvJqwByrK8YObJbyUzgzA9sY+Ie0qp738DMBtVVbXdV69pmq6HYbhhE750D/SdymXd+gpcNnX51wN4A97Ayg38AAA4pCHwt/GjAAAAAElFTkSuQmCC"},a083:function(t,e,i){t.exports=i.p+"editor-assets/img/left-menu-enterprise-active.b101c8d0.svg"},a0b2:function(t,e,i){},a0b8:function(t,e,i){"use strict";var s=i("48b0"),n=i.n(s);n.a},a178:function(t,e,i){t.exports=i.p+"editor-assets/img/button-draw-right-l.6cb764cd.svg"},a1c7:function(t,e,i){"use strict";var s=i("c030"),n=i.n(s);n.a},a1d4:function(t,e,i){"use strict";var s=i("af5b"),n=i.n(s);n.a},a24e:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"render-preview",style:{width:t.WIDTH+"px",height:t.HEIGHT+"px"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"image"===t.renderType,expression:"renderType === 'image'"}],staticClass:"flex flex-center item-center",style:{height:t.HEIGHT-80+"px",width:t.WIDTH+"px"},attrs:{id:"renderPreview"},on:{wheel:t.onMouseWheel}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0&&!t.clearLoad&&"image"===t.renderType,expression:"list.length > 0 && !clearLoad && renderType === 'image'"}],staticClass:"change-page flex flex-center item-center",on:{click:function(e){return t.pre()}}},[s("img",{attrs:{src:i("13ce")}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0&&"image"===t.renderType,expression:"list.length > 0 && renderType === 'image'"}],staticClass:"pic-area flex flex-center item-center",style:{width:t.WIDTH-340+"px",height:t.HEIGHT-280+"px"}},[t.showSave?s("aiclear",{attrs:{oImg:t.oimg,cImg:t.cimg}}):t._e(),t.current>-1&&!t.showSave&&"image"===t.renderType?s("div",{staticClass:"pic-img",style:{position:"relative",zIndex:"4999",backgroundImage:"url("+t.list[t.current].image+")",backgroundSize:"contain",width:"100%",height:"100%",backgroundRepeat:"none",transform:"scale("+t.scale+","+t.scale+")"},attrs:{id:"renderPicImg"},on:{mousedown:t.onMouseDown}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.clearLoad,expression:"clearLoad"}],staticClass:"pic-scan"})]):t._e()],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0&&!t.clearLoad&&"image"===t.renderType,expression:"list.length > 0 && !clearLoad && renderType === 'image'"}],staticClass:"change-page flex flex-center item-center",on:{click:function(e){return t.next()}}},[s("img",{staticStyle:{transform:"rotate(180deg)"},attrs:{src:i("13ce")}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.list.length,expression:"list.length === 0"}],staticClass:"text-center"},[s("img",{attrs:{src:i("e597"),width:"216px"}}),s("div",{staticClass:"fo-14 mt-30",staticStyle:{color:"rgba(0,0,0,0.65)"}},[t._v("您还没有对盒子进行渲染")]),s("a",{staticClass:"fo-14 mt-16",staticStyle:{display:"block"},on:{click:function(e){return t.$store.dispatch("render/savePage",0)}}},[t._v("返回渲染")])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:"video"===t.renderType,expression:"renderType === 'video'"}],staticClass:"flex flex-center item-center",style:{height:t.HEIGHT-80+"px",width:t.WIDTH+"px"}},[t.videoCurrent>-1&&88===t.videoList[t.videoCurrent].status?s("div",[s("video",{staticClass:"render-video",style:{height:t.size[t.videoList[t.videoCurrent].aspectRatio].height+"px",width:t.size[t.videoList[t.videoCurrent].aspectRatio].width+"px"},attrs:{controls:"",src:t.videoCurrent>-1?t.videoList[t.videoCurrent].videoFilePath:""}})]):t._e(),t.videoCurrent>-1&&88!==t.videoList[t.videoCurrent].status?s("div",{staticClass:"text-center"},[s("img",{attrs:{src:i("d782"),width:"216px"}}),s("div",{staticClass:"fo-14 mt-30",staticStyle:{color:"rgba(0,0,0,0.65)"}},[t._v(" "+t._s(2===t.videoList[t.videoCurrent].status?"视频渲染失败":"正在拍摄中…")+" ")]),s("div",{staticClass:"fo-14 mt-16"},[t._v(" "+t._s(2===t.videoList[t.videoCurrent].status?"请尝试重新渲染":"隔日上午8点可下载视频")+" ")])]):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.videoList.length,expression:"videoList.length === 0"}],staticClass:"text-center"},[s("img",{attrs:{src:i("e597"),width:"216px"}}),s("div",{staticClass:"fo-14 mt-30",staticStyle:{color:"rgba(0,0,0,0.65)"}},[t._v("您还没有对盒子进行渲染")]),s("a",{staticClass:"fo-14 mt-16",staticStyle:{display:"block"},on:{click:function(e){return t.$store.dispatch("render/savePage",0)}}},[t._v("返回渲染")])])]),t.list.length>0&&"image"===t.renderType||t.videoList.length>0&&"video"===t.renderType?s("div",{staticClass:"render-opt flex flex-center item-center"},["image"===t.renderType?s("div",{staticClass:"w-25 pl-20"},[t.current>-1?s("div",{staticClass:" fo-65 fo-12"},[t._v(" 分辨率："+t._s(t.list[t.current].clear_text)+" "+t._s(t.list[t.current].size)+" ")]):t._e(),t.current>-1?s("div",{staticClass:"fo-65 fo-12 mt-4"},[t._v(t._s(t.list[t.current].updateTime))]):t._e()]):t._e(),"video"===t.renderType?s("div",{staticClass:"w-25 pl-20"},[t.videoCurrent>-1?s("div",{staticClass:" fo-65 fo-12"},[t._v(" 分辨率："+t._s(1===t.videoList[t.videoCurrent].resolution?"720P":"1080P")+" ")]):t._e(),t.videoCurrent>-1?s("div",{staticClass:"fo-65 fo-12 mt-4"},[t._v(" "+t._s(t.$formatDate(new Date(t.videoList[t.videoCurrent].createTime).valueOf(),"yyyy.MM.dd hh:mm:ss"))+" ")]):t._e()]):t._e(),s("div",{staticClass:"w-50 flex flex-center"},["image"===t.renderType&&!t.list[t.current].image.endsWith(".png")&&(t.list[t.current].clear_text.indexOf("1K")>-1||t.list[t.current].clear_text.indexOf("2K")>-1)?s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t.isVip?s("div",[s("a-button",{directives:[{name:"show",rawName:"v-show",value:!t.showSave,expression:"!showSave"}],attrs:{ghost:"",type:"primary",loading:t.clearLoad},on:{click:function(e){return t.doClearPic()}}},[s("img",{attrs:{src:i("7406")}}),s("span",[t._v("智能清晰增强")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showSave,expression:"showSave"}]},[s("a-button",{on:{click:function(e){t.showSave=!1,t.clearLoad=!1}}},[t._v("取消")]),s("a-button",{staticClass:"ml-8",attrs:{type:"primary",loading:t.saveLoading},on:{click:t.saveImg}},[t._v("保存")])],1)],1):s("a-popover",{attrs:{trigger:"click",placement:"top",overlayClassName:"tip-clear"}},[s("template",{slot:"content"},[s("div",{staticClass:"fo-16  mb-12"},[t._v(" 智能清晰增强 "),s("img",{staticStyle:{"margin-top":"-2px"},attrs:{src:i("0be3"),width:"28px",alt:""}})]),s("aiclear",{staticStyle:{border:"1px solid #f3f3f3"},attrs:{oImg:"https://yun.baoxiaohe.com/demo/demoh3.jpg",cImg:"https://yun.baoxiaohe.com/demo/democlear.png"}}),s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"fo-12 "},[t._v(" 实现智能快速去噪，优化图像纹理细节，使渲染效果更加自然清晰。 ")]),s("a-button",{staticClass:"fo-12",style:{background:"linear-gradient(318deg,#f7bb77 12%, #ffdcad 82%)",width:"72px",height:"24px"},attrs:{size:"large",block:""},on:{click:t.showPersonalVip}},[t._v("开通VIP")])],1)],1),s("a-button",{attrs:{ghost:"",type:"primary"}},[s("img",{attrs:{src:i("7406")}}),s("span",[t._v("智能清晰增强")])])],2)],1):t._e(),s("a-popover",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0&&!t.clearLoad&&"image"===t.renderType,expression:"list.length > 0 && !clearLoad && renderType === 'image'"}],attrs:{trigger:"click",placement:"top",overlayClassName:"tip-clear"}},[s("template",{slot:"content"},[s("div",{staticClass:"fo-14 bold text-center"},[t._v("分享渲染效果图")]),s("div",{staticClass:"qrcode mt-8"},[s("img",{attrs:{src:t.qrcode,width:"130px",height:"130px"}})]),s("div",{staticClass:"fo-12 fo-gray text-center mt-8"},[t._v("扫二维码给微信好友")])]),s("a-button",{staticClass:"ml-20",attrs:{type:"primary",icon:"share-alt"},on:{click:t.getQrcode}},[s("span",[t._v("分享")])])],2),t.user.is_admin&&"image"===t.renderType?s("a-button",{staticClass:"ml-20",attrs:{loading:t.setLoading},on:{click:t.setModeCover}},[t._v("设为模型封面")]):t._e(),t.user.is_admin&&"image"===t.renderType?s("a-button",{staticClass:"ml-20",attrs:{loading:t.setFasterLoading},on:{click:t.setFasterMode}},[t._v("设为快搭模板")]):t._e(),"image"===t.renderType?s("a-button",{staticClass:"ml-20",on:{click:t.download}},[t._v("下载")]):t._e(),"video"===t.renderType&&this.videoCurrent>-1?s("a-button",{staticStyle:{width:"120px"},attrs:{disabled:!t.videoList[this.videoCurrent].videoFilePath,type:"primary",loading:t.videoLoad},on:{click:t.download}},[t._v(t._s(t.videoLoadText))]):t._e()],1),s("div",{staticClass:"w-25 flex flex-end item-center"},[s("a-tooltip",{directives:[{name:"show",rawName:"v-show",value:!t.clearLoad,expression:"!clearLoad"}],attrs:{placement:"top"}},[s("template",{slot:"title"},[s("span",{staticClass:"fo-12"},[t._v("删除")])]),s("div",{staticClass:"bt-btn flex flex-center item-center",on:{click:t.delImage}},[s("img",{attrs:{src:i("fce4")}})])],2)],1)]):t._e()])},n=[],a=(i("5319"),i("ddb0"),i("5530")),r=i("ce97"),o=i("365c"),l=i("5880"),c=i("d055"),h=i.n(c),d=i("9393"),u=i("989b"),p={components:{aiclear:r["default"]},props:["width","height"],mixins:[d["a"]],watch:{width(t){this.WIDTH=t},height(t){this.HEIGHT=t},current(){this.doRead()}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(l["mapState"])("profile",["user"])),Object(l["mapGetters"])("profile",["isVip"])),Object(l["mapGetters"])("render",["renderType","videoList","videoCurrent"])),{},{size(){let t=[4/3,3/4,16/9,1,9/16],e=[];for(let i of t){let t=this.width-200,s=t/i;s>this.height-80-200&&(s=this.height-80-200,t=s*i),e.push({width:t,height:s})}return e}}),data(){return{WIDTH:this.width,HEIGHT:this.height,current:-1,list:[],count:0,imgWidth:0,imgHeight:0,clearLoad:!1,showSave:!1,oimg:"https://yun.baoxiaohe.com/demo/demoh3.jpg",cimg:"https://yun.baoxiaohe.com/demo/democlear.png",cimg_url:"",saveLoading:!1,scale:1,qrcode:"",setLoading:!1,setFasterLoading:!1,videoLoad:!1,videoLoadText:"下载视频"}},methods:{applicateScene(t){this.$confirm({title:"确定覆盖当前渲染效果场景全部参数？",okText:"确定",okType:"primary",cancelText:"取消",zIndex:4005,centered:!0,onOk:()=>{}})},doRead(){this.current>-1&&!this.list[this.current].is_read&&this.list[this.current]&&(this.list[this.current].is_read=1,Object(o["renderImageRead"])({project_image_id:this.list[this.current].id}))},setModeCover(){this.$confirm({title:"此操作会覆盖模型库封面，请不要轻易尝试，无关人员请点击取消，谢谢配合！",okText:"确定",okType:"primary",cancelText:"取消",zIndex:4005,centered:!0,onOk:()=>{var t;this.setLoading=!0,this.$api.project.setBlankCover({image:(null===(t=this.list[this.current])||void 0===t?void 0:t.image)||"",project_id:this.$root.projectData.id}).then(t=>{this.setLoading=!1,0===t.errno&&this.$message.success(t.errmsg)})}})},setFasterMode(){this.$confirm({title:"此操作会新增一条快搭记录，请不要轻易尝试，无关人员请点击取消，谢谢配合！",okText:"确定",okType:"primary",cancelText:"取消",zIndex:4005,centered:!0,onOk:()=>{this.setFasterLoading=!0,Object(o["addRenderTemp"])({project_image_id:this.list[this.current].id,template_type:"position",publish_type:"official"}).then(t=>{this.setFasterLoading=!1,200==t.code&&this.$message.success("设置成功")})}})},getQrcode(){let t="https://m."+window.location.host.replace("www.","")+"/render";(t.indexOf("localhost")>-1||t.indexOf("127.0.0.1")>-1||t.indexOf("test")>-1)&&(t="https://m.test.baoxiaohe.com/render"),h.a.toDataURL(`${t}?id=${this.list[this.current].id}`).then(t=>{this.qrcode=t}).catch(t=>{})},onMouseWheel(t){const e=this.scale-t.deltaY/1e3/(10-o["MOUSE_SENSITY"]);e>.1&&e<=5&&(this.scale=e)},recoverPosition(){const t=document.getElementById("renderPicImg");t&&t.style&&(t.style.left="0px",t.style.top="0px")},onMouseDown(t){const e=document.getElementById("renderPreview"),i=document.getElementById("renderPicImg");let s=t.clientX,n=t.clientY,a=parseInt(i.style.left.replace("px"))||0,r=parseInt(i.style.top.replace("px"))||0;e.onmousemove=t=>{let o=s-t.clientX,l=n-t.clientY;i.style.left=a-o+"px",i.style.top=r-l+"px",e.onmouseup=t=>{e.onmousemove=null,e.onmouseup=null}}},doClearPic(){this.$track({category:"ai-definition",action:"click"}),this.clearLoad=!0,this.scale=1,this.recoverPosition(),setTimeout(()=>{Object(o["doAiclears"])({imgUrl:this.list[this.current].image}).then(t=>{var e;200===t.code&&(this.$message.success("智能清晰增强完成"),this.oimg=(null===(e=this.list[this.current])||void 0===e?void 0:e.image)?this.list[this.current].image+`?imageView2/2/w/${this.WIDTH-340}/h/${this.HEIGHT-280}/q/100`:"",this.cimg=t.data+`?imageView2/2/w/${this.WIDTH-340}/h/${this.HEIGHT-280}/q/100`,this.cimg_url=t.data,this.showSave=!0)})},800)},saveImg(){this.saveLoading=!0,this.$api.project.renderImageUpdate({id:this.list[this.current].id,image:this.cimg_url}).then(t=>{this.saveLoading=!1,0===t.errno&&(this.showSave=!1,this.clearLoad=!1,this.$message.success(t.errmsg),this.$emit("update-success",{id:this.list[this.current].id,image:this.cimg_url}),this.$forceUpdate())})},getImageWidth(t){},setCurrent(t){this.clearLoad||(this.scale=1,this.recoverPosition(),this.current=t)},setList(t){this.list=t},setCount(t){this.count=t},next(){this.current<this.list.length-1?(this.current++,this.$emit("currentChange",this.current),this.scale=1,this.recoverPosition()):this.current===this.list.length-1&&this.count>this.list.length&&(this.$emit("getList",!0),this.scale=1,this.recoverPosition()),this.clearLoad=!1},pre(){this.current>0&&(this.current--,this.scale=1,this.$emit("currentChange",this.current)),this.clearLoad=!1},delImage(){this.$confirm({title:"删除后数据无法恢复，是否要继续删除?",okText:"删除",okType:"danger",cancelText:"取消",centered:!0,zIndex:4005,onOk:()=>{"image"===this.renderType?this.$api.project.delImage({id:this.list[this.current].id}).then(t=>{0===t.errno&&(this.scale=1,this.$message.success(t.errmsg),this.list.splice(this.current,1),this.current>0&&this.list.length>0&&(this.current-=1),0===this.list.length&&(this.current=-1),this.$emit("getList",!0),this.$emit("currentChange",this.current))}):Object(o["taskDelete"])({task_id:this.videoList[this.videoCurrent].id}).then(t=>{200===t.code&&(this.$message.success("视频已删除"),this.$store.dispatch("render/fetchVideoList",{type:!1,project_id:this.$root.projectData.id}))})}})},download(){var t,e,i;"image"===this.renderType?Object(u["b"])((null===(t=this.list[this.current])||void 0===t?void 0:t.image)||"",this.list[this.current].filename):(this.videoLoad=!0,this.videoLoadText="",Object(u["b"])((null===(e=this.videoList[this.videoCurrent])||void 0===e?void 0:e.videoFilePath)||"",null===(i=this.videoList[this.videoCurrent])||void 0===i?void 0:i.title),this.videoLoad=!1,this.videoLoadText="下载视频")}}},f=p,m=(i("fc2d"),i("2877")),g=Object(m["a"])(f,s,n,!1,null,null,null);e["default"]=g.exports},a254:function(t,e,i){"use strict";var s=i("00db"),n=i.n(s);n.a},a257:function(t,e,i){"use strict";i.r(e);i("2532");var s=i("750b"),n=(i("bf60"),i("2ebb"),i("ed08")),a=i("08f1"),r=i("55c2");e["default"]=Object(s["b"])({setup(t,e){const{isInside:o}=e.vuex.mapState(["isInside"]),{scale:l}=e.vuex.mapState(["scale"]),{targetDesign:c}=e.vuex.mapState("editor",["targetDesign"]),{targetDesigns:h}=e.vuex.mapState("editor",["targetDesigns"]),{withGroup:d}=e.vuex.mapGetters("editor",["withGroup"]),{DISMISS_GROUP:u,BUILD_GROUP:p}=e.vuex.mapActions("editor",["DISMISS_GROUP","BUILD_GROUP"]),f=Object(s["a"])(()=>{var t;return null===(t=c.value)||void 0===t?void 0:t.locked}),m=()=>{p(o.value)},g=()=>{u(o.value)},v=[{direction:"left",url:()=>i("ca19"),tip:"左对齐"},{direction:"hcenter",url:()=>i("17b6"),tip:"水平居中"},{direction:"right",url:()=>i("6b6b"),tip:"右对齐"},{direction:"top",url:()=>i("c4d7"),tip:"顶部对齐"},{direction:"vcenter",url:()=>i("8379"),tip:"垂直居中"},{direction:"bottom",url:()=>i("1c67"),tip:"底部对齐"}],b=t=>t.map((t,i)=>{var o,l,c,h;return Object(s["c"])("div",{key:i,class:"box mt-8 btn-item",style:"margin-left:5px;margin-right:5px;",on:{click:()=>{y(t.direction)}}},[Object(s["c"])(r["default"],{key:t.direction,attrs:{slider:t.slider,min:t.min,max:t.max,color:t.color,slideValue:null===(o=t.slideValue)||void 0===o?void 0:o.call(t),slideTitle:t.slideTitle,step:null!==(l=t.step)&&void 0!==l?l:1,tip:Object(n["J"])(t.tip),active:null===(c=t.active)||void 0===c?void 0:c.call(t),disabled:null===(h=t.disabled)||void 0===h?void 0:h.call(t),stateAble:t.stateAble,menus:t.menus},on:{slideChange:e=>{var i;return null===(i=t.onSlideChange)||void 0===i?void 0:i.call(t,e)},menuChange:t=>{Object.keys(ACTION_TYPE).includes(t.value)&&e.bus.$emit("shortcut",{action:t.value})}}},[Object(s["c"])(a["a"],{attrs:{src:Object(n["J"])("function"===typeof t.url?t.url():t.url),alt:""},style:"width:18px;height:18px"})])])}),y=t=>{const i=h.value,s=l.value,a=e.root.projectData.rotate;let r={};i.forEach(t=>{r[t.uuid]=JSON.parse(JSON.stringify(document.getElementById("svgDrag2Wrap_"+t.uuid).getBoundingClientRect()))});let c=Object.values(r),d={left:void 0,right:void 0,top:void 0,bottom:void 0,width:void 0,height:void 0};c.forEach(t=>{void 0===d.left?d.left=t.left:d.left=Math.min(d.left,t.left),void 0===d.top?d.top=t.top:d.top=Math.min(d.top,t.top),void 0===d.right?d.right=t.right:d.right=Math.max(d.right,t.right),void 0===d.bottom?d.bottom=t.bottom:d.bottom=Math.max(d.bottom,t.bottom)}),d.width=d.right-d.left,d.height=d.bottom-d.top;let u=i.map(t=>t.uuid),p=o.value?e.root.projectData.insideDesignData:e.root.projectData.designData;for(let e=0;e<p.length;e++){let i=p[e],{uuid:o}=i;if(!u.includes(o))continue;const l=r[o];let c,h="";switch(t){case"left":c=Math.round((d.left-l.left)/s),h="left";break;case"right":c=Math.round((d.right-l.right)/s),h="left";break;case"hcenter":c=Math.round(((d.width-l.width)/2-l.left+d.left)/s),h="left";break;case"top":c=Math.round((d.top-l.top)/s),h="top";break;case"bottom":c=Math.round((d.bottom-l.bottom)/s),h="top";break;case"vcenter":c=Math.round(((d.height-l.height)/2-l.top+d.top)/s),h="top";break;default:break}if(!c||!h)continue;let f=!1,m=1;90==a?(f=!0,["left","right","hcenter"].includes(t)&&(m=-1)):180==a?m=-1:270==a&&(f=!0,["left","right","hcenter"].includes(t)||(m=-1)),f&&("left"==h?h="top":"top"==h&&(h="left")),i.style[h]+=m*Object(n["H"])(c).px2mm()}e.bus.$emit("groupControl.refreshRect")};return()=>Object(s["c"])("div",[Object(s["c"])("div",[d.value?Object(s["c"])("a-button",{attrs:{disabled:f.value,block:!0},on:{click:g}},["拆分组合"]):Object(s["c"])("a-button",{attrs:{block:!0},on:{click:m}},["组合"])]),Object(s["c"])("a-divider",{directives:[{name:"show",value:!d.value}],style:"margin: 24px 0 0 0"}),Object(s["c"])("div",{directives:[{name:"show",value:!d.value}],class:"flex flex-between mt-16",style:"flex-wrap:wrap;"},[b(v)])])}})},a26d:function(t,e,i){"use strict";var s=i("033d"),n=i.n(s);n.a},a2a2:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"sideRef",staticClass:"editor-upload"},[s("a-dropdown-button",{attrs:{type:"primary"},on:{click:function(e){t.$refs.sideRef.querySelector("input").click()}}},[t.isCompanyDomain?t._e():s("UploadButton",{ref:"uploadRef",attrs:{"limit-img-size":t.maxImageSize,"limit-svg-size":t.limitSvgSize,"limit-count":t.limitCount,"now-count":t.queryCount},on:{refresh:t.refresh}}),t.isCompanyDomain?s("UploadButtonForEnterprise",{ref:"uploadRef",attrs:{"limit-img-size":t.maxImageSize,"limit-svg-size":t.limitSvgSize,"limit-count":t.limitCount,"now-count":t.queryCount},on:{refresh:t.refresh}}):t._e(),s("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[s("a-menu-item",{key:"1",on:{click:function(e){return t.$bus.$emit("show-psd-modal")}}},[s("img",{staticClass:"img mr-4",attrs:{src:i("104b")}}),t._v(" 导入psd ")])],1),s("div",{attrs:{slot:"icon"},on:{mouseenter:function(e){t.mouseHover=!0},mouseleave:function(e){t.mouseHover=!1}},slot:"icon"},[t.mouseHover?s("a-icon",{attrs:{type:"caret-up"}}):s("a-icon",{attrs:{type:"caret-down"}})],1)],1),s("div",{staticClass:"mt-12 flex flex-between item-center pr-12"},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"fo-12 fo-gray ml-4 flex flex-start item-center"},[s("a-tooltip",{attrs:{placement:"bottomRight"}},[s("template",{slot:"title"},[t.isCompanyDomain?s("div",{staticClass:"fo-12"},[t._v(" 因印刷需要，上传的PNG/JPG图片分辨率不得低于300DPI；"),s("br"),t._v(" 单张图片大小不超过5M，VIP为10M"),s("br"),t._v(" SVG高清矢量文件上传大小限制500KB。 ")]):t._e(),t.isCompanyDomain?t._e():s("div",{staticClass:"fo-12"},[t._v(" 因印刷需要，上传的PNG/JPG图片分辨率不得低于300DPI；"),s("br"),t._v(" 单张图片大小不超过5M，个人VIP为10M，企业VIP为20M；"),s("br"),t._v(" SVG高清矢量文件上传大小限制500KB。 ")])]),s("img",{staticStyle:{"margin-top":"-1px"},attrs:{src:i("fdca"),height:"12px",alt:""}})],2),s("div",{staticClass:"ml-4"},[t._v("支持上传JPG/PNG/SVG格式的文件")])],1)]),s("img",{staticClass:"pointer",attrs:{src:i("f44d")},on:{click:function(e){t.showSet=!t.showSet}}})]),s("div",{staticClass:"editor-upload__setpanel mt-12 flex flex-between item-center pr-12",style:{height:t.showSet?"40px":0}},[s("div",{on:{click:function(e){return t.checkedAllChange()}}},[s("checkbox",{staticClass:"ml-4",attrs:{label:"全选"},model:{value:t.checkedAll,callback:function(e){t.checkedAll=e},expression:"checkedAll"}})],1),s("div",{staticClass:"flex flex-end item-center"},[s("div",{staticClass:"text-btn text-del fo-12 mr-12",on:{click:function(e){return t.delImgList()}}},[t._v("删除")]),s("div",{staticClass:"text-btn text-cancel fo-12",on:{click:function(e){t.showSet=!1}}},[t._v("取消")])])]),s("div",{staticClass:"editor-upload__content",style:{height:t.height+"px"},attrs:{id:"editorUploadContent"}},[s("div",{staticClass:"flex flex-between flex-wrap"},t._l(t.list,(function(e,n){return s("div",{key:e.id+"-"+n,staticClass:"editor-upload__content__image mt-8"},[s("div",{staticClass:"editor-upload__content__image-float"},[s("div",{staticClass:"flex flex-between item-center"},[s("div",[t.showSet?s("checkbox",{on:{change:function(e){return t.checkedItemChange(n)}},model:{value:e.active,callback:function(i){t.$set(e,"active",i)},expression:"item.active"}}):t._e()],1),s("div",{staticClass:"editor-upload__content__image-del flex flex-center item-center",on:{click:function(i){return t.delImgList(e.id,n)}}},[s("img",{attrs:{src:i("bbca")}})])])]),s("div",{staticClass:"editor-upload__content__image-panel"},[s("resizeable",{attrs:{item:e,index:n,"id-prefix":"uploadItem"},on:{mousedown:function(i){return t.uploadMove(i,e)}}})],1)])})),0),0===t.list.length?s("div",{staticClass:"flex flex-center item-center mt-32 pt-32"},[t._m(0)]):t._e(),t.noMore?s("div",{staticClass:"p-8 fo-12 fo-gray text-center w-100"},[t._v("没有更多了")]):t._e(),t.loading?s("a-spin",{attrs:{fix:""}},[s("a-icon",{staticClass:"spin-icon-load",attrs:{type:"loading",size:"20",color:"#FF6634"}})],1):t._e(),t.nextLoading?s("div",{staticClass:"m-auto mt-16"},[s("a-spin",{staticClass:"text-center"},[s("a-icon",{staticClass:"spin-icon-load",attrs:{type:"loading",size:"20",color:"#FF6634"}})],1)],1):t._e()],1),t.isCompanyDomain?s("storage-progress-for-enterprise",{attrs:{"used-number":t.enterpriseStorageUsed,"total-number":t.enterpriseStorageTotal},on:{click:t.showPersonalVip}}):t._e(),t.isCompanyDomain?t._e():s("storage-progress-for-www",{attrs:{"used-number":t.queryCount,"total-number":t.limitCount},on:{click:t.showPersonalVip}})],1)])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("img",{attrs:{src:i("00dc")}})])}],a=(i("ddb0"),i("5530")),r=i("52dd"),o=i("267c"),l=i("40a9"),c=i("5880"),h=i("c64e"),d=i.n(h),u=i("ed08"),p=i("26a1"),f=i("6b13"),m=i("4510"),g=i("1d65"),v=i("365c"),b=i("da71"),y=i("9393"),_={components:{checkbox:r["a"],UploadButton:o["default"],UploadButtonForEnterprise:l["default"],Resizeable:f["default"],storageProgressForWww:m["default"],storageProgressForEnterprise:g["default"]},mixins:[y["a"]],props:{load:{type:Boolean,default:!1}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(c["mapState"])("enterprise",["isCompanyDomain"])),Object(c["mapState"])("editor-v2",["knife_data","project_data","scale"])),Object(c["mapState"])("profile",["vip","accessToken"])),Object(c["mapGetters"])("profile",["isPersonalVip","isProdVip","isVip"])),{},{maxImageSize(){return this.isPersonalVip?b["MAX_IMAGE_SIZE"].vip:this.isProdVip?b["MAX_IMAGE_SIZE"].business:b["MAX_IMAGE_SIZE"].user}}),watch:{showSet(t){this.height=t?window.innerHeight-52-99-40-50:window.innerHeight-52-99-50},load(t){t&&(this.onload=!0)},onload(t){t&&this.init()}},data(){return{mouseHover:!1,flieParams:{type:"image"},showVip:!1,showSet:!1,checkedAll:!1,height:window.innerHeight-52-99-50,query:{current:1,pageSize:20},uploadLoading:[],noMore:!1,list:[],queryCount:0,loading:!1,nextLoading:!1,onload:!1,limitCount:300,limitSvgSize:b["MAX_SVG_FILE_SIZE"],enterpriseStorageUsed:.1,enterpriseStorageTotal:100}},mounted(){this.resize(),"no"===this.vip.type?(this.limitCount=300,this.limitSize=5242880):"personal"===this.vip.type?(this.limitCount=2e3,this.limitSize=10485760):"prod"===this.vip.type&&(this.limitCount=1e4,this.limitSize=20971520),this.listenContent(),this.refresh(),this.$bus.$on("refreshMatierialFileList",this.refresh),this.isCompanyDomain&&this.ajaxEnterpriseStorage()},methods:{resize(){window.addEventListener("resize",this._handeResize)},_handeResize(){this.height=window.innerHeight-52-99-50},delImgList(t,e){this.isCompanyDomain?this.ajaxEnterpriseDeleteImgs(t,e):this.ajaxWwwDeleteImgs(t,e)},ajaxEnterpriseStorage(){this.$http.get("/api/enterprise/enterprise/materialFile/storage",{personal:!0}).then(t=>{const{code:e,data:i}=t;log(t),200===e&&(this.enterpriseStorageUsed=i.storageUsed,this.enterpriseStorageTotal=i.storageTotal)})},ajaxEnterpriseDeleteImgs(t,e){let i=[];i=t?[t]:this.getIds(),i.length&&this.$http.delete("/api/enterprise/enterprise/materialFile",{data:{ids:i,personal:!0}}).then(t=>{t&&(e?this.list.splice(e,1):(this.list=this.list.filter(t=>!t.active),this.getImgList()))})},ajaxWwwDeleteImgs(t,e){let i=[];i=t?[t]:this.getIds(),i.length&&this.$http.post("/api/v2/materials/files/personal/delete",{ids:i}).then(t=>{t&&(e?this.list.splice(e,1):(this.list=this.list.filter(t=>!t.active),this.getImgList()))})},async refresh(){this.reset(),await Object(u["D"])(100),this.getImgList(),this.isCompanyDomain&&this.ajaxEnterpriseStorage()},resetTempImage(t,e){e.style.position="static",e.style.zIndex="auto"},openLeftSidePanel(){this.$store.commit("editor-v2/set_left_side_show",!0),this.$route.query.id||this.$route.query.workOuterId?this.$store.commit("editor-v2/set_left_side_cur_menu_index",1):this.$store.commit("editor-v2/set_left_side_cur_menu_index",0)},uploadMove(t,e){var i;if(!this.project_data.id)return this.$message.info("请选择一个模板开始设计"),void this.openLeftSidePanel();if(0!==t.button)return!1;const s=document.getElementById("uploadItem"+e.id),n=t.clientX,a=t.clientY,r=null===(i=t.target)||void 0===i?void 0:i.getBoundingClientRect();if(!r)return;s.style.position="fixed",s.style.left=r.x+"px",s.style.top=r.y+"px",s.style.zIndex=1e4;const o=r.x,l=r.y;document.onmousemove=t=>{const e=t.clientX-n,i=t.clientY-a;return s.style.left=o+e+"px",s.style.top=l+i+"px",!1},document.onmouseup=i=>{var n,a;if(!Object(p["b"])(i,t,this.$refs.sideRef))return s.style.position="static",s.style.zIndex="auto",document.onmousemove=null,void(document.onmouseup=null);const r=null===(n=i.target.querySelector("img"))||void 0===n?void 0:n.getBoundingClientRect(),o=null===(a=document.getElementById("svgContainer"))||void 0===a?void 0:a.getBoundingClientRect();if(!o||!r)return;const l={type:"img",src:e.file_path,id:e.id,uuid:d()(),can_set_color:e.file_path.indexOf(".svg")>-1?1:0,style:{position:"absolute",top:50,left:100,rotate:360-this.project_data.rotate||0,opacity:100},bg:{x:0,y:0}},c=(r.x-o.x)/this.scale,h=(r.y-o.y)/this.scale;l.owidth=l.width,l.oheight=l.height,l.style.width=r.width/this.scale/v["DPI"],l.style.height=r.height/this.scale/v["DPI"],l.bg.width=r.width/this.scale/v["DPI"],l.bg.height=r.height/this.scale/v["DPI"],[l.style.left,l.style.top]=Object(p["c"])(this.project_data.rotate,c/v["DPI"],h/v["DPI"],l.width,l.height,this.knife_data.totalX*v["DPI"],this.knife_data.totalY*v["DPI"]),Object(p["d"])(t,i)&&(l.style.left=this.knife_data.totalX/2,l.style.top=this.knife_data.totalY/2),this.$store.commit("editor-v2/insertDesignItem",l),s.style.position="static",s.style.zIndex="auto",document.onmousemove=null,document.onmouseup=null}},reset(){this.query={current:1,pageSize:20}},getIds(){const t=[];for(const e in this.list)this.list[e].active&&t.push(this.list[e].id);return t},checkedAllChange(){this.initCheck(this.checkedAll)},initCheck(t){for(const e in this.list)this.list[e].active=t},checkedItemChange(t){this.seeChecked()},seeChecked(){let t=!0;for(const e in this.list)!1===this.list[e].active&&(t=!1);this.checkedAll=t},init(){this.listenContent(),this.getImgList()},listenContent(){const t=document.getElementById("editorUploadContent");t&&(t.onscroll=t=>{t.target.clientHeight+t.target.scrollTop===t.target.scrollHeight&&(this.query.current+=1,this.noMore||this.getImgList())})},getImgList(){this.isCompanyDomain?this.ajaxEnterpriseImages():this.ajaxWwwImages()},_enterprise2WwwImages(t){return t.map(t=>({id:t.id,origin_name:t.originName,file_path:t.filePath,file_type:t.fileType,file_size:t.fileSize}))},ajaxEnterpriseImages(){1===this.query.current?this.loading=!0:this.nextLoading=!0,this.$http.get("/api/enterprise/enterprise/materialFile",Object.assign({personal:!0},this.query)).then(t=>{const{data:e}=t,{count:i}=e,s=this._enterprise2WwwImages(e.rows);if(t){for(const t in s)s[t].active=!1;1===this.query.current?this.list=s:this.list=[...this.list,...s],s.length<this.query.pageSize?this.noMore=!0:this.noMore=!1,this.queryCount=i,this.seeChecked()}}),1===this.query.current?this.loading=!1:this.nextLoading=!1},ajaxWwwImages(){1===this.query.current?this.loading=!0:this.nextLoading=!0,this.$http.get("/api/v2/materials/files/personal/get",this.query).then(t=>{const{data:e}=t,{count:i,rows:s}=e;if(t){for(const t in s)s[t].active=!1;1===this.query.current?this.list=s:this.list=[...this.list,...s],s.length<this.query.pageSize?this.noMore=!0:this.noMore=!1,this.queryCount=i,this.seeChecked()}}),1===this.query.current?this.loading=!1:this.nextLoading=!1}},beforeDestroy(){window.removeEventListener("resize",this._handeResize)},destroyed(){this.$bus.$off("refreshMatierialFileList")}},x=_,w=(i("a911"),i("2877")),C=Object(w["a"])(x,s,n,!1,null,null,null);e["default"]=C.exports},a2b0:function(t,e,i){"use strict";function s(t){var e=[];function i(t){if(Array.isArray(t))for(var s=0;s<t.length;s++)i(t[s]);else t.text=t.text||"",t.data=t.data||"",e.push(t)}return i(t),e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=s},a2cb:function(t,e,i){"use strict";var s=i("d4bd"),n=i.n(s);n.a},a2d2:function(t,e,i){"use strict";var s=i("befe"),n=i.n(s);n.a},a33e:function(t,e,i){"use strict";var s=i("7805"),n=i.n(s);n.a},a33f:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.value?i("div",{staticClass:"editor-menu-helper",staticStyle:{padding:"12px"}},[i("div",{staticClass:"item flex flex-between"},[i("div",[t._v("快捷键")]),i("svg",{staticClass:"pointer",attrs:{t:"1590742339852",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4004",width:"20",height:"20"},on:{click:function(e){return t.$emit("change",!1)}}},[i("path",{attrs:{d:"M828.8 195.2a32 32 0 0 1 3.712 40.832l-3.712 4.48L556.608 512l272.192 271.552a32 32 0 0 1-40.832 48.96l-4.48-3.712L511.36 557.248 240.448 828.8a32 32 0 0 1-48.96-40.832l3.712-4.48L466.048 512 195.2 240.448a32 32 0 0 1 40.832-48.96l4.48 3.712L511.36 466.752l272.192-271.552a32 32 0 0 1 45.248 0z","p-id":"4005",fill:"#8a8a8a"}})])]),t._l(t.shortcuts,(function(e,s){return i("div",{key:s,staticClass:"item flex flex-between item-center"},[i("div",{staticClass:"fo-14 bold"},[t._v(t._s(e.label))]),i("div",{staticClass:"fo-14"},[t._v(t._s(t.isMac?e.mac:e.win))])])}))],2):t._e()},n=[],a={props:["value"],model:{prop:"value",event:"change"},data(){return{shortcuts:[{label:"撤销",mac:"⌘ + Z",win:"Ctrl + Z"},{label:"恢复",mac:"⌘ + Shift + Z",win:"Ctrl + Shift + Z"},{label:"复制",mac:"⌘ + C",win:"Ctrl + C"},{label:"粘贴",mac:"⌘ + V",win:"Ctrl + V"},{label:"剪切",mac:"⌘ + X",win:"Ctrl + X"},{label:"保存",mac:"⌘ + S",win:"Ctrl + S"},{label:"锁定/取消锁定",mac:"⌘ + L",win:"Ctrl + L"},{label:"移动画布",mac:"空格 + 鼠标拖拽",win:"空格 + 鼠标拖拽"},{label:"移动元素",mac:"←↑↓→",win:"←↑↓→"}]}},computed:{isMac(){let t=navigator.userAgent.toLowerCase();return/macintosh|mac os x/i.test(t)}},methods:{}},r=a,o=(i("c4c7"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"4d0448c2",null);e["default"]=l.exports},a355:function(t,e,i){},a394:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"render-aiclear",attrs:{id:"aiclearcontent"}},[s("div",{staticClass:"aiclear-img",style:{width:t.width+"px",height:t.height+"px",backgroundImage:"url("+t.oimg+")"}},[s("div",{staticClass:"clears-text"},[t._v("优化前")]),s("div",{staticClass:"flex flex-end item-center"},[s("div",{staticClass:"aiclear-img2 flex flex-start ",style:{width:t.width2+"px",height:t.height+"px",backgroundImage:"url("+t.cimg+")"}},[s("div",{staticClass:"aiclear-slide",style:{height:t.height+"px"}},[s("img",{staticClass:"aiclear-slide-img",style:{top:2*t.height/3+"px"},attrs:{src:i("17dc"),id:"aiclearSlide"}})]),s("div",{staticClass:"clears-text"},[t._v("优化后")])])])])])},n=[],a={props:["oImg","cImg"],data(){return{oimg:this.oImg,cimg:this.cImg,width:0,height:0,width2:0}},watch:{oimg(t){this.oImg=t},cimg(t){this.cImg=t}},mounted(){this.initOimg(),this.init()},methods:{init(){let t=document.getElementById("aiclearcontent"),e=document.getElementById("aiclearSlide");e.onmousedown=e=>{let i=e.clientX,s=this.width2;t.onmousemove=t=>{let e=t.clientX-i;return this.width2=s-e,!1},t.onmouseup=e=>{t.onmousemove=null,t.onmouseup=null}}},initOimg(){const t=new Image;t.src=this.oimg,t.onload=()=>{this.width=t.width,this.height=t.height,this.width2=t.width/2}}}},r=a,o=(i("dce5"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,null,null);e["default"]=l.exports},a3a3:function(t,e,i){},a456:function(t,e,i){},a4f1:function(t,e,i){t.exports=i.p+"editor-assets/img/mode-a.79fbda82.svg"},a5d2:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=i("c243"),a=i("5726"),r=c(a),o=i("e762"),l=c(o);function c(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function u(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var p=function(t){function e(t,i){return h(this,e),d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return u(e,t),s(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{2}$/)}},{key:"encode",value:function(){var t=n.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,r.default)(this.data,t,"01"),text:this.text}}}]),e}(l.default);e.default=p},a5d5:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg-icon",[i("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.752 8.526C16.41 5.623 13.965 3.372 11 3.372S5.59 5.623 5.249 8.525c-2.394.551-4.18 2.715-4.18 5.3 0 3.002 2.409 5.436 5.38 5.436h9.102l.193-.003c2.882-.103 5.186-2.496 5.186-5.433 0-2.585-1.786-4.749-4.178-5.299zm-9.67.148a3.973 3.973 0 017.862.18l.132 1.112 1.093.249.165.042a3.577 3.577 0 01-.836 7.016l-.157.002h-8.71l-.17-.004a3.575 3.575 0 01-.63-7.057l1.093-.249.132-1.112.026-.18z",fill:"#636C78"}}),i("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.858 11.813l1.404 1.404 2.81-2.808 1.404 1.404-4.214 4.214-4.213-4.214 1.405 1.404 1.404-1.404z",fill:"#636C78"}})])},n=[],a=i("54f4"),r={name:"IconSaved",components:{SvgIcon:a["a"]}},o=r,l=i("2877"),c=Object(l["a"])(o,s,n,!1,null,null,null);e["a"]=c.exports},a643:function(t,e,i){},a65f:function(t,e,i){},a6d7:function(t,e,i){"use strict";var s=i("993f"),n=i.n(s);n.a},a6ee:function(t,e,i){},a6f8:function(t,e,i){},a73c5:function(t,e,i){var s=i("6d8b"),n=s.retrieve2,a=s.retrieve3,r=s.each,o=s.normalizeCssArray,l=s.isString,c=s.isObject,h=i("e86a"),d=i("5693"),u=i("5e76"),p=i("7d6d"),f=i("82eb"),m=f.ContextCachedBy,g=f.WILL_BE_RESTORED,v=h.DEFAULT_FONT,b={left:1,right:1,center:1},y={top:1,bottom:1,middle:1},_=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],x={},w={};function C(t){return k(t),r(t.rich,k),t}function k(t){if(t){t.font=h.makeFont(t);var e=t.textAlign;"middle"===e&&(e="center"),t.textAlign=null==e||b[e]?e:"left";var i=t.textVerticalAlign||t.textBaseline;"center"===i&&(i="middle"),t.textVerticalAlign=null==i||y[i]?i:"top";var s=t.textPadding;s&&(t.textPadding=o(t.textPadding))}}function S(t,e,i,s,n,a){s.rich?O(t,e,i,s,n,a):A(t,e,i,s,n,a)}function A(t,e,i,s,n,a){"use strict";var r,o=T(s),l=!1,c=e.__attrCachedBy===m.PLAIN_TEXT;a!==g?(a&&(r=a.style,l=!o&&c&&r),e.__attrCachedBy=o?m.NONE:m.PLAIN_TEXT):c&&(e.__attrCachedBy=m.NONE);var d=s.font||v;l&&d===(r.font||v)||(e.font=d);var u=t.__computedFont;t.__styleFont!==d&&(t.__styleFont=d,u=t.__computedFont=e.font);var f=s.textPadding,b=s.textLineHeight,y=t.__textCotentBlock;y&&!t.__dirtyText||(y=t.__textCotentBlock=h.parsePlainText(i,u,f,b,s.truncate));var x=y.outerHeight,C=y.lines,k=y.lineHeight,S=L(w,t,s,n),A=S.baseX,O=S.baseY,j=S.textAlign||"left",I=S.textVerticalAlign;M(e,s,n,A,O);var D=h.adjustTextY(O,x,I),P=A,N=D;if(o||f){var F=h.getWidth(i,u),$=F;f&&($+=f[1]+f[3]);var U=h.adjustTextX(A,$,j);o&&E(t,e,s,U,D,$,x),f&&(P=B(A,j,f),N+=f[0])}e.textAlign=j,e.textBaseline="middle",e.globalAlpha=s.opacity||1;for(var H=0;H<_.length;H++){var V=_[H],G=V[0],W=V[1],Y=s[G];l&&Y===r[G]||(e[W]=p(e,W,Y||V[2]))}N+=k/2;var q=s.textStrokeWidth,X=l?r.textStrokeWidth:null,Q=!l||q!==X,Z=!l||Q||s.textStroke!==r.textStroke,K=R(s.textStroke,q),J=z(s.textFill);if(K&&(Q&&(e.lineWidth=q),Z&&(e.strokeStyle=K)),J&&(l&&s.textFill===r.textFill||(e.fillStyle=J)),1===C.length)K&&e.strokeText(C[0],P,N),J&&e.fillText(C[0],P,N);else for(H=0;H<C.length;H++)K&&e.strokeText(C[H],P,N),J&&e.fillText(C[H],P,N),N+=k}function O(t,e,i,s,n,a){a!==g&&(e.__attrCachedBy=m.NONE);var r=t.__textCotentBlock;r&&!t.__dirtyText||(r=t.__textCotentBlock=h.parseRichText(i,s)),j(t,e,r,s,n)}function j(t,e,i,s,n){var a=i.width,r=i.outerWidth,o=i.outerHeight,l=s.textPadding,c=L(w,t,s,n),d=c.baseX,u=c.baseY,p=c.textAlign,f=c.textVerticalAlign;M(e,s,n,d,u);var m=h.adjustTextX(d,r,p),g=h.adjustTextY(u,o,f),v=m,b=g;l&&(v+=l[3],b+=l[0]);var y=v+a;T(s)&&E(t,e,s,m,g,r,o);for(var _=0;_<i.lines.length;_++){var x,C=i.lines[_],k=C.tokens,S=k.length,A=C.lineHeight,O=C.width,j=0,D=v,P=y,R=S-1;while(j<S&&(x=k[j],!x.textAlign||"left"===x.textAlign))I(t,e,x,s,A,b,D,"left"),O-=x.width,D+=x.width,j++;while(R>=0&&(x=k[R],"right"===x.textAlign))I(t,e,x,s,A,b,P,"right"),O-=x.width,P-=x.width,R--;D+=(a-(D-v)-(y-P)-O)/2;while(j<=R)x=k[j],I(t,e,x,s,A,b,D+x.width/2,"center"),D+=x.width,j++;b+=A}}function M(t,e,i,s,n){if(i&&e.textRotation){var a=e.textOrigin;"center"===a?(s=i.width/2+i.x,n=i.height/2+i.y):a&&(s=a[0]+i.x,n=a[1]+i.y),t.translate(s,n),t.rotate(-e.textRotation),t.translate(-s,-n)}}function I(t,e,i,s,r,o,l,c){var h=s.rich[i.styleName]||{};h.text=i.text;var d=i.textVerticalAlign,u=o+r/2;"top"===d?u=o+i.height/2:"bottom"===d&&(u=o+r-i.height/2),!i.isLineHolder&&T(h)&&E(t,e,h,"right"===c?l-i.width:"center"===c?l-i.width/2:l,u-i.height/2,i.width,i.height);var p=i.textPadding;p&&(l=B(l,c,p),u-=i.height/2-p[2]-i.textHeight/2),P(e,"shadowBlur",a(h.textShadowBlur,s.textShadowBlur,0)),P(e,"shadowColor",h.textShadowColor||s.textShadowColor||"transparent"),P(e,"shadowOffsetX",a(h.textShadowOffsetX,s.textShadowOffsetX,0)),P(e,"shadowOffsetY",a(h.textShadowOffsetY,s.textShadowOffsetY,0)),P(e,"textAlign",c),P(e,"textBaseline","middle"),P(e,"font",i.font||v);var f=R(h.textStroke||s.textStroke,g),m=z(h.textFill||s.textFill),g=n(h.textStrokeWidth,s.textStrokeWidth);f&&(P(e,"lineWidth",g),P(e,"strokeStyle",f),e.strokeText(i.text,l,u)),m&&(P(e,"fillStyle",m),e.fillText(i.text,l,u))}function T(t){return!!(t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor)}function E(t,e,i,s,n,a,r){var o=i.textBackgroundColor,h=i.textBorderWidth,p=i.textBorderColor,f=l(o);if(P(e,"shadowBlur",i.textBoxShadowBlur||0),P(e,"shadowColor",i.textBoxShadowColor||"transparent"),P(e,"shadowOffsetX",i.textBoxShadowOffsetX||0),P(e,"shadowOffsetY",i.textBoxShadowOffsetY||0),f||h&&p){e.beginPath();var m=i.textBorderRadius;m?d.buildPath(e,{x:s,y:n,width:a,height:r,r:m}):e.rect(s,n,a,r),e.closePath()}if(f)if(P(e,"fillStyle",o),null!=i.fillOpacity){var g=e.globalAlpha;e.globalAlpha=i.fillOpacity*i.opacity,e.fill(),e.globalAlpha=g}else e.fill();else if(c(o)){var v=o.image;v=u.createOrUpdateImage(v,null,t,D,o),v&&u.isImageReady(v)&&e.drawImage(v,s,n,a,r)}if(h&&p)if(P(e,"lineWidth",h),P(e,"strokeStyle",p),null!=i.strokeOpacity){g=e.globalAlpha;e.globalAlpha=i.strokeOpacity*i.opacity,e.stroke(),e.globalAlpha=g}else e.stroke()}function D(t,e){e.image=t}function L(t,e,i,s){var n=i.x||0,a=i.y||0,r=i.textAlign,o=i.textVerticalAlign;if(s){var l=i.textPosition;if(l instanceof Array)n=s.x+N(l[0],s.width),a=s.y+N(l[1],s.height);else{var c=e&&e.calculateTextPosition?e.calculateTextPosition(x,i,s):h.calculateTextPosition(x,i,s);n=c.x,a=c.y,r=r||c.textAlign,o=o||c.textVerticalAlign}var d=i.textOffset;d&&(n+=d[0],a+=d[1])}return t=t||{},t.baseX=n,t.baseY=a,t.textAlign=r,t.textVerticalAlign=o,t}function P(t,e,i){return t[e]=p(t,e,i),t[e]}function R(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function z(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function N(t,e){return"string"===typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function B(t,e,i){return"right"===e?t-i[1]:"center"===e?t+i[3]/2-i[1]/2:t+i[3]}function F(t,e){return null!=t&&(t||e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor||e.textPadding)}e.normalizeTextStyle=C,e.renderText=S,e.getBoxPosition=L,e.getStroke=R,e.getFill=z,e.parsePercent=N,e.needDrawText=F},a743:function(t,e,i){t.exports=i.p+"editor-assets/img/subsidy.fbee2e1e.svg"},a753:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tool-panel-wrap"},[i("div",{staticClass:"menu-item blue",on:{click:function(e){return e.stopPropagation(),t.onOpenBarDialog(e)}}},[t._m(0),t._m(1)]),i("div",{staticClass:"menu-item green",on:{click:function(e){return e.stopPropagation(),t.onOpenQrDialog(e)}}},[t._m(2),t._m(3)]),i("div",{staticClass:"menu-item orange",on:{click:t.onOpenTableDialog}},[t._m(4),t._m(5)]),i("edit-barcode",{attrs:{visible:t.showBarCodeDialog,data:t.barCodeTypeObject},on:{close:function(e){t.showBarCodeDialog=!1},callback:t.onBarcodeChange}}),i("edit-qrcode",{attrs:{visible:t.showQrCodeDialog,data:t.qrCodeTypeObject},on:{close:function(e){t.showQrCodeDialog=!1},callback:t.onQrcodeChange}}),i("table-panel",{directives:[{name:"show",rawName:"v-show",value:t.showTablePickPanel,expression:"showTablePickPanel"}],on:{close:function(e){t.showTablePickPanel=!1},callbackByRowColumn:t.onAddTableDesignByRowColumn,callbackByTemplate:t.onAddTableDesignByTemplate}})],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"left"},[s("img",{attrs:{src:i("4b3a")}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"right"},[i("div",{staticClass:"title"},[t._v("条形码")]),i("div",{staticClass:"desc"},[t._v("快速生成一维码支持4种码制")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"left"},[s("img",{attrs:{src:i("ebed")}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"right"},[i("div",{staticClass:"title"},[t._v("二维码")]),i("div",{staticClass:"desc"},[t._v("快速生成二维码")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"left"},[s("img",{attrs:{src:i("f469")}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"right"},[i("div",{staticClass:"title"},[t._v("表格")]),i("div",{staticClass:"desc"},[t._v("快速生成表格多种精美样式")])])}],a=i("5530"),r=i("da71"),o=i("5880"),l=i("c64e"),c=i.n(l),h=i("fe94"),d=i("7d88"),u=i("4d13"),p=i("c398"),f={data(){return{height:window.innerHeight-73,showTablePickPanel:!1,showBarCodeDialog:!1,showQrCodeDialog:!1,qrCodeTypeObject:{},barCodeTypeObject:{}}},components:{editBarcode:d["default"],editQrcode:u["default"],tablePanel:p["default"]},computed:Object(a["a"])({},Object(o["mapState"])("editor-v2",["knife_data","project_data","scale"])),methods:{openLeftSidePanel(){this.$store.commit("editor-v2/set_left_side_show",!0),this.$route.query.id||this.$route.query.workOuterId?this.$store.commit("editor-v2/set_left_side_cur_menu_index",1):this.$store.commit("editor-v2/set_left_side_cur_menu_index",0)},onOpenTableDialog(){if(!this.project_data.id)return this.$message.info("请选择一个模板开始设计"),void this.openLeftSidePanel();this.showTablePickPanel=!0},onOpenQrDialog(){if(!this.project_data.id)return this.$message.info("请选择一个模板开始设计"),void this.openLeftSidePanel();this.qrCodeTypeObject={uuid:c()(),type:"qrcode",value:"https://",codeType:"url",width:200,qricon:"",height:100,fills:[{index:0,class:"foreground",color:"#000000"},{index:1,class:"background",color:"#ffffff"}],style:{position:"absolute",top:50,left:100,rotate:360-this.project_data.rotate,opacity:100,width:50,height:50}},this.showQrCodeDialog=!0},onQrcodeChange(t){t.uuid||(t.uuid=c()()),this.setDesignInCenter(t),this.$store.commit("editor-v2/insertDesignItem",t),this.showQrCodeDialog=!1},setDesignInCenter(t){const{totalX:e,totalY:i}=this.knife_data,{width:s,height:n}=t.style;t.style.left=(e-s)/2,t.style.top=(i-n)/2},onOpenBarDialog(){if(!this.project_data.id)return this.$message.info("请选择一个模板开始设计"),void this.openLeftSidePanel();this.barCodeTypeObject={uuid:c()(),type:"barcode",codeMode:"EAN13",value:"0000000000000",displayValue:!0,src:r["SIYUAN_FONT"],example:r["SIYUAN_EXAMPLE"],id:r["SIYUAN_FONT_ID"],qricon:null,fills:[{index:0,class:"foreground",color:"#000000"},{index:1,class:"background",color:"#ffffff"}],style:{position:"absolute",top:50,left:100,rotate:360-this.project_data.rotate,color:"#000000",opacity:100,fontFamily:r["SIYUAN_FONT_FAMILY"],fontSize:14,width:50,height:25}},this.showBarCodeDialog=!0},onBarcodeChange(t){t.uuid||(t.uuid=c()()),this.setDesignInCenter(t),this.$store.commit("editor-v2/insertDesignItem",t),this.showBarCodeDialog=!1},onCloseTablePickPanel(){this.showTablePickPanel=!1},onAddTableDesignByRowColumn(t,e){const{scale:i}=this,{rotate:s}=this.project_data,{totalX:n,totalY:a}=this.knife_data,{rowNumber:r,columnNumber:o}=e,l=r||4,d=o||4,u=30/i*d,p=10/i*l,f={type:"table",uuid:c()(),table:{row:l,column:d,zIndex:0,lines:{},borderWidth:Object(h["a"])(1).pt2px(),previewStyle:{id:t.id,row:t.row,column:t.column},cells:Array.from({length:d}).map(t=>Array.from({length:l}).map(t=>({}))),defaultStyle:{fontSize:3/i}},value:"",style:{position:"absolute",rotate:360-s,opacity:100,left:(n-u)/2,top:(a-p)/2,width:u,height:p}};this.$store.commit("editor-v2/insertDesignItem",f),this.showTablePickPanel=!1},onAddTableDesignByTemplate({style:t}){const e=JSON.parse(JSON.stringify(t));e.uuid=c()();const{totalX:i,totalY:s}=this.knife_data,{width:n,height:a}=e.style;e.style.left||(e.style.left=(i-n)/2),e.style.top||(e.style.top=(s-a)/2),e.style.rotate=360-this.project_data.rotate,this.$store.commit("editor-v2/insertDesignItem",e),this.showTablePickPanel=!1}}},m=f,g=(i("6321"),i("2877")),v=Object(g["a"])(m,s,n,!1,null,"27ec98a8",null);e["default"]=v.exports},a778:function(t,e,i){"use strict";var s=i("2c45"),n=i.n(s);n.a},a7a0:function(t,e,i){},a7fc:function(t,e,i){},a828:function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("61ab"),a=i("c7ee"),r=i("ed08");i("ea97");e["default"]=Object(s["b"])({props:{cursor:{type:String,default:"default"},lineWidth:{type:Number,default:1}},setup(t,e){const i=e.vuex.mapState("table",["columns"]),o=e.vuex.mapState(["scale"]),l=Object(s["j"])(!1),c=Object(s["j"])(0),h=(Object(s["a"])(()=>10/o.scale.value),t=>{e.emit("dragLine",{event:t,index:c.value})});Object(s["k"])(()=>l.value,()=>{l.value?document.body.style.cursor=t.cursor:document.body.style.cursor=""});const d=async t=>{e.emit("dragLine",{event:t,index:c.value,update:!0}),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",d),await Object(r["D"])(0),l.value=!1};return()=>Object(s["c"])("div",{class:"drag-table-header flex item-center",style:{height:24/o.scale.value+"px",lineHeight:24/o.scale.value+"px",fontSize:14/o.scale.value+"px",marginTop:`-${32/o.scale.value}px`}},[Object(s["c"])("div",{class:"flex item-center drag-container flex-none"},[i.columns.value.map((a,r)=>Object(s["c"])("div",{key:r,class:"drag-item "+(a.focus?"focus":a.active?"active":""),style:{width:(r===i.columns.value.length-1||0===r?a.width+t.lineWidth/2:a.width+1)+"px"},on:{click:()=>{l.value||e.emit("change",r)}}},[n["b"][r],Object(s["c"])("div",{class:"line "+t.cursor,style:{width:1/o.scale.value+"px"},on:{mousedown:t=>{c.value=r,t.stopPropagation(),e.emit("mousedown"),l.value=!0,h(t),document.addEventListener("mousemove",h),document.addEventListener("mouseup",d)}}})]))]),Object(s["c"])("div",{class:"add-btn-wrapper flex-none",style:{marginLeft:20/o.scale.value+"px"}},[Object(s["c"])(a["default"],{on:{click:()=>e.emit("addOne")},attrs:{isVertical:!0}})])])}})},a83d:function(t,e,i){"use strict";var s=i("a643"),n=i.n(s);n.a},a87d:function(t,e,i){var s=i("22d1"),n=i("401b"),a=n.applyTransform,r=i("9850"),o=i("41ef"),l=i("e86a"),c=i("a73c5"),h=i("9e2e"),d=i("19eb"),u=i("0da8"),p=i("76a5"),f=i("cbe5"),m=i("20c8"),g=i("42e5"),v=i("d3a4"),b=m.CMD,y=Math.round,_=Math.sqrt,x=Math.abs,w=Math.cos,C=Math.sin,k=Math.max;if(!s.canvasSupported){var S=",",A="progid:DXImageTransform.Microsoft",O=21600,j=O/2,M=1e5,I=1e3,T=function(t){t.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",t.coordsize=O+","+O,t.coordorigin="0,0"},E=function(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")},D=function(t,e,i){return"rgb("+[t,e,i].join(",")+")"},L=function(t,e){e&&t&&e.parentNode!==t&&t.appendChild(e)},P=function(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)},R=function(t,e,i){return(parseFloat(t)||0)*M+(parseFloat(e)||0)*I+i},z=c.parsePercent,N=function(t,e,i){var s=o.parse(e);i=+i,isNaN(i)&&(i=1),s&&(t.color=D(s[0],s[1],s[2]),t.opacity=i*s[3])},B=function(t){var e=o.parse(t);return[D(e[0],e[1],e[2]),e[3]]},F=function(t,e,i){var s=e.fill;if(null!=s)if(s instanceof g){var n,r=0,o=[0,0],l=0,c=1,h=i.getBoundingRect(),d=h.width,u=h.height;if("linear"===s.type){n="gradient";var p=i.transform,f=[s.x*d,s.y*u],m=[s.x2*d,s.y2*u];p&&(a(f,f,p),a(m,m,p));var v=m[0]-f[0],b=m[1]-f[1];r=180*Math.atan2(v,b)/Math.PI,r<0&&(r+=360),r<1e-6&&(r=0)}else{n="gradientradial";f=[s.x*d,s.y*u],p=i.transform;var y=i.scale,_=d,x=u;o=[(f[0]-h.x)/_,(f[1]-h.y)/x],p&&a(f,f,p),_/=y[0]*O,x/=y[1]*O;var w=k(_,x);l=0/w,c=2*s.r/w-l}var C=s.colorStops.slice();C.sort((function(t,e){return t.offset-e.offset}));for(var S=C.length,A=[],j=[],M=0;M<S;M++){var I=C[M],T=B(I.color);j.push(I.offset*c+l+" "+T[0]),0!==M&&M!==S-1||A.push(T)}if(S>=2){var E=A[0][0],D=A[1][0],L=A[0][1]*e.opacity,P=A[1][1]*e.opacity;t.type=n,t.method="none",t.focus="100%",t.angle=r,t.color=E,t.color2=D,t.colors=j.join(","),t.opacity=P,t.opacity2=L}"radial"===n&&(t.focusposition=o.join(","))}else N(t,s,e.opacity)},$=function(t,e){e.lineDash&&(t.dashstyle=e.lineDash.join(" ")),null==e.stroke||e.stroke instanceof g||N(t,e.stroke,e.opacity)},U=function(t,e,i,s){var n="fill"===e,a=t.getElementsByTagName(e)[0];null!=i[e]&&"none"!==i[e]&&(n||!n&&i.lineWidth)?(t[n?"filled":"stroked"]="true",i[e]instanceof g&&P(t,a),a||(a=v.createNode(e)),n?F(a,i,s):$(a,i),L(t,a)):(t[n?"filled":"stroked"]="false",P(t,a))},H=[[],[],[]],V=function(t,e){var i,s,n,r,o,l,c=b.M,h=b.C,d=b.L,u=b.A,p=b.Q,f=[],m=t.data,g=t.len();for(r=0;r<g;){switch(n=m[r++],s="",i=0,n){case c:s=" m ",i=1,o=m[r++],l=m[r++],H[0][0]=o,H[0][1]=l;break;case d:s=" l ",i=1,o=m[r++],l=m[r++],H[0][0]=o,H[0][1]=l;break;case p:case h:s=" c ",i=3;var v,x,k=m[r++],A=m[r++],M=m[r++],I=m[r++];n===p?(v=M,x=I,M=(M+2*k)/3,I=(I+2*A)/3,k=(o+2*k)/3,A=(l+2*A)/3):(v=m[r++],x=m[r++]),H[0][0]=k,H[0][1]=A,H[1][0]=M,H[1][1]=I,H[2][0]=v,H[2][1]=x,o=v,l=x;break;case u:var T=0,E=0,D=1,L=1,P=0;e&&(T=e[4],E=e[5],D=_(e[0]*e[0]+e[1]*e[1]),L=_(e[2]*e[2]+e[3]*e[3]),P=Math.atan2(-e[1]/L,e[0]/D));var R=m[r++],z=m[r++],N=m[r++],B=m[r++],F=m[r++]+P,$=m[r++]+F+P;r++;var U=m[r++],V=R+w(F)*N,G=z+C(F)*B,W=(k=R+w($)*N,A=z+C($)*B,U?" wa ":" at ");Math.abs(V-k)<1e-4&&(Math.abs($-F)>.01?U&&(V+=270/O):Math.abs(G-z)<1e-4?U&&V<R||!U&&V>R?A-=270/O:A+=270/O:U&&G<z||!U&&G>z?k+=270/O:k-=270/O),f.push(W,y(((R-N)*D+T)*O-j),S,y(((z-B)*L+E)*O-j),S,y(((R+N)*D+T)*O-j),S,y(((z+B)*L+E)*O-j),S,y((V*D+T)*O-j),S,y((G*L+E)*O-j),S,y((k*D+T)*O-j),S,y((A*L+E)*O-j)),o=k,l=A;break;case b.R:var Y=H[0],q=H[1];Y[0]=m[r++],Y[1]=m[r++],q[0]=Y[0]+m[r++],q[1]=Y[1]+m[r++],e&&(a(Y,Y,e),a(q,q,e)),Y[0]=y(Y[0]*O-j),q[0]=y(q[0]*O-j),Y[1]=y(Y[1]*O-j),q[1]=y(q[1]*O-j),f.push(" m ",Y[0],S,Y[1]," l ",q[0],S,Y[1]," l ",q[0],S,q[1]," l ",Y[0],S,q[1]);break;case b.Z:f.push(" x ")}if(i>0){f.push(s);for(var X=0;X<i;X++){var Q=H[X];e&&a(Q,Q,e),f.push(y(Q[0]*O-j),S,y(Q[1]*O-j),X<i-1?S:"")}}}return f.join("")};f.prototype.brushVML=function(t){var e=this.style,i=this._vmlEl;i||(i=v.createNode("shape"),T(i),this._vmlEl=i),U(i,"fill",e,this),U(i,"stroke",e,this);var s=this.transform,n=null!=s,a=i.getElementsByTagName("stroke")[0];if(a){var r=e.lineWidth;if(n&&!e.strokeNoScale){var o=s[0]*s[3]-s[1]*s[2];r*=_(x(o))}a.weight=r+"px"}var l=this.path||(this.path=new m);this.__dirtyPath&&(l.beginPath(),l.subPixelOptimize=!1,this.buildPath(l,this.shape),l.toStatic(),this.__dirtyPath=!1),i.path=V(l,this.transform),i.style.zIndex=R(this.zlevel,this.z,this.z2),L(t,i),null!=e.text?this.drawRectText(t,this.getBoundingRect()):this.removeRectText(t)},f.prototype.onRemove=function(t){P(t,this._vmlEl),this.removeRectText(t)},f.prototype.onAdd=function(t){L(t,this._vmlEl),this.appendRectText(t)};var G=function(t){return"object"===typeof t&&t.tagName&&"IMG"===t.tagName.toUpperCase()};u.prototype.brushVML=function(t){var e,i,s=this.style,n=s.image;if(G(n)){var r=n.src;if(r===this._imageSrc)e=this._imageWidth,i=this._imageHeight;else{var o=n.runtimeStyle,l=o.width,c=o.height;o.width="auto",o.height="auto",e=n.width,i=n.height,o.width=l,o.height=c,this._imageSrc=r,this._imageWidth=e,this._imageHeight=i}n=r}else n===this._imageSrc&&(e=this._imageWidth,i=this._imageHeight);if(n){var h=s.x||0,d=s.y||0,u=s.width,p=s.height,f=s.sWidth,m=s.sHeight,g=s.sx||0,b=s.sy||0,x=f&&m,w=this._vmlEl;w||(w=v.doc.createElement("div"),T(w),this._vmlEl=w);var C,O=w.style,j=!1,M=1,I=1;if(this.transform&&(C=this.transform,M=_(C[0]*C[0]+C[1]*C[1]),I=_(C[2]*C[2]+C[3]*C[3]),j=C[1]||C[2]),j){var E=[h,d],D=[h+u,d],P=[h,d+p],z=[h+u,d+p];a(E,E,C),a(D,D,C),a(P,P,C),a(z,z,C);var N=k(E[0],D[0],P[0],z[0]),B=k(E[1],D[1],P[1],z[1]),F=[];F.push("M11=",C[0]/M,S,"M12=",C[2]/I,S,"M21=",C[1]/M,S,"M22=",C[3]/I,S,"Dx=",y(h*M+C[4]),S,"Dy=",y(d*I+C[5])),O.padding="0 "+y(N)+"px "+y(B)+"px 0",O.filter=A+".Matrix("+F.join("")+", SizingMethod=clip)"}else C&&(h=h*M+C[4],d=d*I+C[5]),O.filter="",O.left=y(h)+"px",O.top=y(d)+"px";var $=this._imageEl,U=this._cropEl;$||($=v.doc.createElement("div"),this._imageEl=$);var H=$.style;if(x){if(e&&i)H.width=y(M*e*u/f)+"px",H.height=y(I*i*p/m)+"px";else{var V=new Image,W=this;V.onload=function(){V.onload=null,e=V.width,i=V.height,H.width=y(M*e*u/f)+"px",H.height=y(I*i*p/m)+"px",W._imageWidth=e,W._imageHeight=i,W._imageSrc=n},V.src=n}U||(U=v.doc.createElement("div"),U.style.overflow="hidden",this._cropEl=U);var Y=U.style;Y.width=y((u+g*u/f)*M),Y.height=y((p+b*p/m)*I),Y.filter=A+".Matrix(Dx="+-g*u/f*M+",Dy="+-b*p/m*I+")",U.parentNode||w.appendChild(U),$.parentNode!==U&&U.appendChild($)}else H.width=y(M*u)+"px",H.height=y(I*p)+"px",w.appendChild($),U&&U.parentNode&&(w.removeChild(U),this._cropEl=null);var q="",X=s.opacity;X<1&&(q+=".Alpha(opacity="+y(100*X)+") "),q+=A+".AlphaImageLoader(src="+n+", SizingMethod=scale)",H.filter=q,w.style.zIndex=R(this.zlevel,this.z,this.z2),L(t,w),null!=s.text&&this.drawRectText(t,this.getBoundingRect())}},u.prototype.onRemove=function(t){P(t,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(t)},u.prototype.onAdd=function(t){L(t,this._vmlEl),this.appendRectText(t)};var W,Y="normal",q={},X=0,Q=100,Z=document.createElement("div"),K=function(t){var e=q[t];if(!e){X>Q&&(X=0,q={});var i,s=Z.style;try{s.font=t,i=s.fontFamily.split(",")[0]}catch(n){}e={style:s.fontStyle||Y,variant:s.fontVariant||Y,weight:s.fontWeight||Y,size:0|parseFloat(s.fontSize||12),family:i||"Microsoft YaHei"},q[t]=e,X++}return e};l.$override("measureText",(function(t,e){var i=v.doc;W||(W=i.createElement("div"),W.style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",v.doc.body.appendChild(W));try{W.style.font=e}catch(s){}return W.innerHTML="",W.appendChild(i.createTextNode(t)),{width:W.offsetWidth}}));for(var J=new r,tt=function(t,e,i,s){var n=this.style;this.__dirty&&c.normalizeTextStyle(n,!0);var r=n.text;if(null!=r&&(r+=""),r){if(n.rich){var o=l.parseRichText(r,n);r=[];for(var h=0;h<o.lines.length;h++){for(var d=o.lines[h].tokens,u=[],p=0;p<d.length;p++)u.push(d[p].text);r.push(u.join(""))}r=r.join("\n")}var f,m,g=n.textAlign,b=n.textVerticalAlign,_=K(n.font),x=_.style+" "+_.variant+" "+_.weight+" "+_.size+'px "'+_.family+'"';i=i||l.getBoundingRect(r,x,g,b,n.textPadding,n.textLineHeight);var w=this.transform;if(w&&!s&&(J.copy(e),J.applyTransform(w),e=J),s)f=e.x,m=e.y;else{var C=n.textPosition;if(C instanceof Array)f=e.x+z(C[0],e.width),m=e.y+z(C[1],e.height),g=g||"left";else{var k=this.calculateTextPosition?this.calculateTextPosition({},n,e):l.calculateTextPosition({},n,e);f=k.x,m=k.y,g=g||k.textAlign,b=b||k.textVerticalAlign}}f=l.adjustTextX(f,i.width,g),m=l.adjustTextY(m,i.height,b),m+=i.height/2;var A,O,j,M=v.createNode,I=this._textVmlEl;I?(j=I.firstChild,A=j.nextSibling,O=A.nextSibling):(I=M("line"),A=M("path"),O=M("textpath"),j=M("skew"),O.style["v-text-align"]="left",T(I),A.textpathok=!0,O.on=!0,I.from="0 0",I.to="1000 0.05",L(I,j),L(I,A),L(I,O),this._textVmlEl=I);var D=[f,m],P=I.style;w&&s?(a(D,D,w),j.on=!0,j.matrix=w[0].toFixed(3)+S+w[2].toFixed(3)+S+w[1].toFixed(3)+S+w[3].toFixed(3)+",0,0",j.offset=(y(D[0])||0)+","+(y(D[1])||0),j.origin="0 0",P.left="0px",P.top="0px"):(j.on=!1,P.left=y(f)+"px",P.top=y(m)+"px"),O.string=E(r);try{O.style.font=x}catch(N){}U(I,"fill",{fill:n.textFill,opacity:n.opacity},this),U(I,"stroke",{stroke:n.textStroke,opacity:n.opacity,lineDash:n.lineDash||null},this),I.style.zIndex=R(this.zlevel,this.z,this.z2),L(t,I)}},et=function(t){P(t,this._textVmlEl),this._textVmlEl=null},it=function(t){L(t,this._textVmlEl)},st=[h,d,u,f,p],nt=0;nt<st.length;nt++){var at=st[nt].prototype;at.drawRectText=tt,at.removeRectText=et,at.appendRectText=it}p.prototype.brushVML=function(t){var e=this.style;null!=e.text?this.drawRectText(t,{x:e.x||0,y:e.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(t)},p.prototype.onRemove=function(t){this.removeRectText(t)},p.prototype.onAdd=function(t){this.appendRectText(t)}}},a8a4:function(t,e,i){"use strict";var s=i("0391"),n=i.n(s);n.a},a8ca:function(t,e,i){t.exports=i.p+"editor-assets/img/quest.0409ca07.svg"},a8d7:function(t,e,i){t.exports=i.p+"editor-assets/img/qback.f87e4e06.svg"},a911:function(t,e,i){"use strict";var s=i("685a"),n=i.n(s);n.a},a974:function(t,e,i){},a97c:function(t,e,i){},a98a:function(t,e,i){},a998:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box-resizeable"},[i("div",{staticClass:"flex flex-center item-center resizeable",style:{width:t.width+"px",height:t.width+"px"},attrs:{title:t.item.file_name,id:t.idPrefix+t.item.id},on:{mousedown:function(e){return t.$emit("mousedown",e)}}},[i("img",{staticClass:"avoid-clicks",attrs:{src:t.item.file_path+(t.item.file_path.indexOf("svg")>-1?"":"?imageView2/0/w/124/h/124/q/70|imageslim")},on:{load:t.adjustShape}})])])},n=[],a={props:{item:{type:Object,default:null},index:{type:Number,default:0},idPrefix:{type:String,default:""},width:{type:Number,default:124}},methods:{adjustShape(t){const e=t.target;e.width>=e.height?(e.style.width="100%",e.style.height="auto",e.style.maxHeight=null):(e.style.height="100%",e.style.width="auto",e.style.maxWidth=null)}}},r=a,o=(i("0009"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,null,null);e["default"]=l.exports},a9d4:function(t,e,i){t.exports=i.p+"editor-assets/img/ang3-w.c0d4bb91.svg"},a9ff:function(t,e,i){"use strict";i.r(e);i("1276");var s=i("750b"),n=i("ed08");i("3828");e["default"]=Object(s["b"])({props:{specialId:{type:String,default:null},value:{default:""},autoSelect:{type:Boolean,default:!1},unit:{type:String,default:""},placeholder:{type:String,default:""},suffix:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:99999999},disabled:{type:Boolean,default:!1},customStyle:{type:[Object,Object],default:()=>({})}},setup(t,e){const i=Object(s["j"])(`${t.value} ${t.unit}`),a=t.autoSelect;Object(s["k"])(()=>t.value,()=>{i.value=`${t.value} ${t.unit}`});const r=s=>{const{min:a,max:r}=t;s=Object(n["H"])(s).target,s=s<a?a:s>r?r:s,e.emit("confirm",""+s),i.value=s+" "+t.unit};return()=>Object(s["c"])("a-input",{attrs:{id:t.specialId,value:i.value,disabled:t.disabled,placeholder:t.placeholder,suffix:t.suffix},on:{click:t=>{i.value=i.value.split(" ")[0],a&&e.root.$nextTick(()=>{t.target.select()})},focus:t=>{i.value=i.value.split(" ")[0],e.emit("focus"),a&&e.root.$nextTick(()=>{t.target.select()})},change:t=>{i.value=t.target.value},pressEnter:t=>{r(t.target.value)},blur:t=>{r(t.target.value.split(" ")[0]),e.emit("blur")}},style:t.customStyle},[t.slot?Object(s["c"])("span",{slot:"suffix"},[t.slot]):""])}})},aa4e:function(t,e,i){"use strict";var s=i("18f5"),n=i.n(s);n.a},aab3:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("5261"),n=o(s),a=i("ca32"),r=o(a);function o(t){return t&&t.__esModule?t:{default:t}}function l(t){var e={};for(var i in r.default)r.default.hasOwnProperty(i)&&(t.hasAttribute("jsbarcode-"+i.toLowerCase())&&(e[i]=t.getAttribute("jsbarcode-"+i.toLowerCase())),t.hasAttribute("data-"+i.toLowerCase())&&(e[i]=t.getAttribute("data-"+i.toLowerCase())));return e["value"]=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),e=(0,n.default)(e),e}e.default=l},ab1d:function(t,e,i){"use strict";i.r(e);i("5319"),i("1276"),i("ddb0");var s=i("8bbf"),n=i.n(s),a=i("750b"),r=i("ed08");i("9037");const o=i("3ee8"),l=(t,e)=>t.split(e).reduce((t,e)=>t+e,""),c=t=>(t=l(t,"-"),l(t,"."));e["default"]=Object(a["b"])({props:{value:{type:String,default:""},width:{type:Number,default:144},fields:{type:[Object,Array],default:()=>[]},handleChange:{type:null,default:()=>{}},placeholder:{type:String,default:""},unit:{type:String,default:""},disabled:{type:Boolean,default:!1}},setup(t,e){Object(a["f"])(()=>{d.value=e.refs.el||null,n.a.nextTick(()=>{d.value=e.refs.el||null})}),Object(a["h"])(()=>{d.value=e.refs.el||null,n.a.nextTick(()=>{d.value=e.refs.el||null})});const{width:i,handleChange:s,fields:l}=t,h=Object(a["j"])(null),d=Object(a["j"])(null),u=Object(a["a"])(()=>!h.value||l.find(t=>t.key===h.value)?t.fields:[{key:h.value,value:h.value},...t.fields]);return()=>Object(a["c"])("a-select",{attrs:{showSearch:!0,getInputElement:()=>Object(a["c"])("a-input",{class:"select-insert",on:{change:async t=>{const e=t.target.value.replace("-","").replace(".","");await Object(r["D"])(0),d.value.$children[0].setState({_inputValue:e})}}}),notFoundContent:null,value:`${t.value} ${t.unit}`,disabled:t.disabled},ref:"el",on:{search:t=>{t=c(t),t=Object(r["H"])(t).target,t<4&&(t=4),h.value=t},change:t=>{null===s||void 0===s||s(t)}},style:{width:i+"px"}},[Object(a["c"])("img",{slot:"suffixIcon",attrs:{src:o},style:{width:"18px",height:"18px",marginTop:"-2px"}}),u.value.map(t=>Object(a["c"])("a-select-option",{key:t.key,attrs:{value:t.key}},[t.value]))])}})},ab50:function(t,e,i){"use strict";var s=i("554f"),n=i.n(s);n.a},ab5b:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTotalWidthOfEncodings=e.calculateEncodingAttributes=e.getBarcodePadding=e.getEncodingHeight=e.getMaximumHeightOfEncodings=void 0;var s=i("fd7c"),n=a(s);function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function o(t,e,i){if(i.displayValue&&e<t){if("center"==i.textAlign)return Math.floor((t-e)/2);if("left"==i.textAlign)return 0;if("right"==i.textAlign)return Math.floor(t-e)}return 0}function l(t,e,i){for(var s=0;s<t.length;s++){var a,l=t[s],c=(0,n.default)(e,l.options);a=c.displayValue?d(l.text,c,i):0;var h=l.data.length*c.width;l.width=Math.ceil(Math.max(a,h)),l.height=r(l,c),l.barcodePadding=o(a,h,c)}}function c(t){for(var e=0,i=0;i<t.length;i++)e+=t[i].width;return e}function h(t){for(var e=0,i=0;i<t.length;i++)t[i].height>e&&(e=t[i].height);return e}function d(t,e,i){var s;if(i)s=i;else{if("undefined"===typeof document)return 0;s=document.createElement("canvas").getContext("2d")}s.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var n=s.measureText(t).width;return n}e.getMaximumHeightOfEncodings=h,e.getEncodingHeight=r,e.getBarcodePadding=o,e.calculateEncodingAttributes=l,e.getTotalWidthOfEncodings=c},ab68:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.disabled?s("NoSelect",{attrs:{disabled:t.disabled},model:{value:t.target.file_name,callback:function(e){t.$set(t.target,"file_name",e)},expression:"target.file_name"}}):s("a-popover",{attrs:{overlayClassName:"ant-no-padding",trigger:"click",placement:t.placement},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[s("div",{staticClass:"font-menu",attrs:{slot:"content"},slot:"content"},[s("div",{ref:"font",staticClass:"font-container"},[s("div",{staticClass:"py-16 px-20"},[s("a-input",{attrs:{placeholder:"请输入关键词"},on:{change:t.handleSearch},model:{value:t.insert,callback:function(e){t.insert=e},expression:"insert"}},[s("a-icon",{attrs:{slot:"prefix",type:"search"},slot:"prefix"})],1),s("div",{staticClass:"mt-16 flex item-center text-pointer"},t._l(t.langs,(function(e){return s("div",{key:e.key,class:["menu-btn",t.menuActive(e.key),e.class],on:{click:function(i){return t.changeFontType(e.key)}}},[t._v(" "+t._s(e.name)+" ")])})),0)],1)]),s("scrollbar",{attrs:{maxHeight:458},on:{reachBottom:t.handleReachBottom}},[s("div",{staticClass:"of"},[s("div",{staticClass:"content-title"},[t._v("当前使用字体")]),s("ul",{staticClass:"font-list"},t._l(t.fonts,(function(e,i){return s("li",{key:i,staticClass:"flex item-center flex-between text-pointer",style:{fontFamily:"f"+e.id},on:{click:function(i){return t.handleChoose(e)}}},[s("span",[t._v(t._s(e.file_name))])])})),0),s("div",{staticClass:"content-title"},[t._v("免费商用")]),s("div",[s("ul",{directives:[{name:"show",rawName:"v-show",value:"cn"===t.lang,expression:"lang === 'cn'"}],staticClass:"font-list"},t._l(t.font["cn"].list,(function(e,n){return s("li",{key:n,staticClass:"flex item-center text-pointer",style:"font-family: bxh-fm-"+e.id,on:{click:function(i){return t.handleChoose(e)}}},[s("span",{key:n},[t._v(t._s(e.file_name))]),s("div",{staticClass:"ml-auto"},[t.fLoading.includes(e.id)?s("a-icon",{staticClass:"status-img text-center",attrs:{type:"loading"}}):t.target.id===e.id?s("img",{staticClass:"status-img",attrs:{src:i("903d"),alt:""}}):t.floaded.includes(e.id)?s("div",{staticClass:"status-img"}):s("img",{staticClass:"status-img",attrs:{src:i("c25e"),alt:""}})],1)])})),0),s("ul",{directives:[{name:"show",rawName:"v-show",value:"en"===t.lang,expression:"lang === 'en'"}],staticClass:"font-list"},t._l(t.font["en"].list,(function(e,n){return s("li",{key:n,staticClass:"flex item-center text-pointer",style:"font-family: bxh-fm-"+e.id,on:{click:function(i){return t.handleChoose(e)}}},[s("span",{key:n},[t._v(t._s(e.file_name))]),s("div",{staticClass:"ml-auto"},[t.fLoading.includes(e.id)?s("a-spin",{staticClass:"status-img text-center"},[s("a-icon",{staticClass:"spin-icon-load",attrs:{type:"loading",size:"20",color:"#515a6e"}})],1):t.target.id===e.id?s("img",{staticClass:"status-img",attrs:{src:i("903d"),alt:""}}):t.loaded.includes(e.id)?s("div",{staticClass:"status-img",attrs:{alt:""}}):s("img",{staticClass:"status-img",attrs:{src:i("c25e"),alt:""}})],1)])})),0),s("div",{staticClass:"text-center nomore"},[t.noMore?s("span",[t._v("没有更多")]):t.loading?s("a-icon",{attrs:{type:"loading"}}):t._e()],1)])])])],1),s("div",{staticClass:"no-select"},["input"===t.nodeType?s("NoSelect",{attrs:{disabled:t.disabled},model:{value:t.target.file_name,callback:function(e){t.$set(t.target,"file_name",e)},expression:"target.file_name"}}):s("NoBorderSelect",{attrs:{disabled:t.disabled},model:{value:t.target.file_name,callback:function(e){t.$set(t.target,"file_name",e)},expression:"target.file_name"}})],1)])],1)},n=[],a=(i("2532"),i("5530")),r=i("5880"),o=i("87a0"),l=i("d4cc"),c=i("9b71"),h=i("365c"),d=i("27d6"),u=i.n(d),p=i("1645");var f={props:{value:{type:Number,default:0},disabled:{type:Boolean,default:!1},placement:{type:String,default:"left"},nodeType:{type:String,default:"input"}},data(){return{visible:!1,keyword:"",insert:"",update:0,langs:[{key:"cn",name:"中文",class:"br-none"},{key:"en",name:"英文",class:"bl-none"}],loaded:[],fLoading:[],target:{}}},components:{NoSelect:l["default"],NoBorderSelect:c["default"]},watch:{value(t){this.getFontDetail()},keyword(t){this.searchFonts(t)},lang(t){this.fontForm.list.length||this.handleRefetch()}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapGetters"])(["fontForm"])),Object(r["mapState"])({loading:"fontLoading",locked:"fontLocked",lang:"fontType",font:"font",floaded:"fontLoaded"})),{},{cssPrefix(){return"bxh-fm-"},list(){return this.fontForm.list},noMore(){return this.fontForm.list.length>=this.fontForm.total},menuActive(){return t=>t===this.lang?"active":""},fonts(){const t=[];return this.$root.projectData.designData.filter(e=>{if("font"===e.type&&e.example)return!t.includes(e.id)&&(t.push(e.id),!0)}).map(t=>({id:t.id,file_name:t.example,file_path:t.src,example:t.example}))}}),methods:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapMutations"])([o["E"],o["l"],o["J"]])),Object(r["mapActions"])(["fetchFonts","searchFonts"])),{},{parseFontData(t){return t?{id:t.id,file_path:t.file_path,thumb_path:t.mini_file_path,example:t.example,file_name:t.example}:{}},async getFontDetail(){if(this.value){const t=this.list.find(t=>t.id===this.value);if(t)this.target=t;else{const t=await Object(h["getFontById"])({id:this.value});this.target=this.parseFontData(t.data)}}},changeFontType(t){this[o["l"]](t)},handleClick(){this.visible=!this.visible},compareObjectByKey(t,e,i){return t[i]===e[i]},handleSearch(t){this.keyword=t.target.value},handleReachBottom(){this.noMore||this.locked||this.handleRefetch()},handleChoose(t){this.$emit("change",t),this.fLoading.includes(t.id)||(this.loaded.includes(t.id)?this.target=t:this.writeFontStyle(t))},handleRefetch(){this.fetchFonts()},prefixHttp(t){return~t.indexOf("http")?t:"https:"+t},fontFamily(t){return t?`${h["FONT_ORIGIN_FILE_PREFIX"]}${t}`:""},writeFontStyle(t){if(!t.file_path)return;const e=this.fontFamily(t.id);if(!e)return;if(this.floaded.includes(t.id))return void(this.target=t);this[o["J"]](t.id);const i=document.getElementById("ownFontStyle");let s=-1;if(i.sheet.rules.length>0)for(let n in i.sheet.rules)i.sheet.rules[n].cssText&&i.sheet.rules[n].cssText.indexOf(t.file_path)>-1&&(s=n);-1===s&&t.file_path&&p["a"].injectFontFamilies([{fontFamily:e,src:t.file_path}]),u.a.load({custom:{families:[e]},loading:()=>{this.fLoading.push(t.id)},fontinactive:(e,i)=>{this.fLoading=this.fLoading.filter(e=>e!==t.id),this.loaded.push(t.id),this.target=t},active:async()=>{this.fLoading=this.fLoading.filter(e=>e!==t.id),this.loaded.push(t.id),this.target=t,setTimeout(()=>{this.$store.commit("increaseCanvasVersion",this.isInside)},1e3)}})}}),mounted(){this.getFontDetail(),this.fontForm.list.length||this.fetchFonts()}},m=f,g=(i("0de3"),i("2877")),v=Object(g["a"])(m,s,n,!1,null,null,null);e["default"]=v.exports},ab70:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("div",{staticClass:"flex items-center flex-between mb-18"},[i("div",{staticClass:"title fw-500"},[t._v(" 尺寸和材质 "),i("a-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"title"},slot:"title"},[i("div",[t._v("盒型代码："+t._s(t.cate_no))]),i("div",[t._v("展开尺寸："+t._s(t.descObj.full))])]),i("i",{staticClass:"iconfont pointer icon-bangzhu c-999"})])],1),t.size_options_length>1?i("a",{staticClass:"fo-active-theme f-14 c-primary pointer",on:{click:t.onEdit}},[t._v(" 修改 ")]):t._e()]),i("div",{staticClass:"flex items-center flex-between mb-18"},[i("div",{staticClass:"title"},[t._v("制造尺寸：")]),i("div",{staticClass:"text-content"},[t._v(" "+t._s(t.descObj.short)+" ")])]),i("div",{staticClass:"flex items-center flex-between mb-18"},[i("div",{staticClass:"title"},[t._v("材质：")]),i("div",{staticClass:"text-content"},[i("img",{staticClass:"material-image",attrs:{src:t.$filters.limit(t.project_data.science_image,{width:22})}}),t._v(" "+t._s(t.project_data.science_name)+" ")])]),i("select-background-color",{attrs:{color:t.background},on:{confirm:t.onSetBackground}}),i("div",{staticClass:"line mb-24 mt-16"}),i("select-surface-craft")],1)},n=[],a=i("5530"),r=i("5880"),o=i("accc"),l=i("1da9"),c={components:{selectBackgroundColor:o["default"],selectSurfaceCraft:l["default"]},props:{},data(){return{isViewMode:!0}},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["is_outside","project_data","knife_data","surface_craft_list","show_project_edit_panel"])),{},{size_options_length(){return this.project_data.cate.size_options.length},descObj(){const{size_option:t,cate:{size_options:e}}=this.project_data,i=e.find(e=>e.sizeName===t);return i?{short:i.shortDesc+" "+i.unit,full:i.fullDesc}:{short:"",full:""}},cate_no(){var t;return null===(t=this.project_data.cate)||void 0===t?void 0:t.cate_no},background(){return this.is_outside?this.project_data.background:this.project_data.inside_background}}),methods:{onSetBackground(t){this.$store.commit("editor-v2/set_background",t)},async onEdit(){"preview"===this.$route.query.type&&await this.$store.dispatch("saveForceCreateV2",{router:this.$router,knife_data:this.knife_data,project_data:this.project_data}),this.$store.commit("editor-v2/set_show_project_edit_panel",!this.show_project_edit_panel),this.$store.commit("editor-v2/set_show_axis_remark",!0)}}},h=c,d=(i("bce2"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,"1266fe60",null);e["default"]=u.exports},ab73:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"risk-panel"},[s("div",{staticClass:"h3"},[t._v(" 印前检测 "),s("a-tooltip",[s("a",{staticClass:"clickable-theme",staticStyle:{display:"'inline-block'"},attrs:{target:"_blank",href:"https://help.baoxiaohe.com/support/archives/401/"}},[s("img",{staticClass:"flex-none",staticStyle:{width:"16px",height:"16px"},attrs:{src:i("4724")}})]),s("template",{slot:"title"},[t._v("查看印刷要求")])],2),s("img",{staticStyle:{float:"right",cursor:"pointer"},attrs:{src:i("7a35")},on:{click:function(e){return t.$emit("close")}}})],1),s("div",{staticClass:"risk-body"},[null===t.status?s("div",[t._m(0),s("a-button",{attrs:{type:"primary",block:""},on:{click:function(e){return t.beginRiskCheck(!1)}}},[t._v(" 开始检测 ")])],1):"checking"===t.status?s("div",{staticClass:"flex flex-center item-center",staticStyle:{"flex-direction":"column",margin:"40px"}},[s("a-progress",{attrs:{type:"circle",percent:t.riskProgress,width:80,"stroke-color":"#ff6634"},scopedSlots:t._u([{key:"format",fn:function(e){return[s("span",{staticStyle:{color:"#ff6634"}},[t._v(t._s(e)+"%")])]}}])}),s("div",{staticClass:"small-font",staticStyle:{"margin-top":"20px"}},[t._v("智能印刷引擎正在为您检测中...")])],1):"checkFinished"===t.status?s("div",[s("div",[0===t.riskData.images.length&&0===t.riskData.fonts.length?s("div",{staticClass:"flex flex-center item-center",staticStyle:{"flex-direction":"column"}},[s("img",{staticStyle:{width:"60px",height:"60px","margin-top":"30px"},attrs:{src:i("5163"),alt:""}}),s("span",{staticClass:"small-font",staticStyle:{"margin-top":"20px","padding-bottom":"16px"}},[t._v("检测完成, 建议您再仔细核查哦")]),s("div",{staticClass:"flex flex-center item-center"},[s("a-button",{staticClass:"mx-8",on:{click:function(e){return t.beginRiskCheck(!1)}}},[t._v("重新检测")]),t.isCompanyDomain||0!==t.project_data.cate.complex_type?t._e():s("a-button",{staticClass:"mx-8",attrs:{type:"primary"},on:{click:t.showProductOrder}},[t._v(" 印刷下单 ")])],1)]):s("div",[s("div",{staticStyle:{"padding-bottom":"64px"}},[s("div",{staticStyle:{"max-height":"500px","overflow-y":"auto"}},[t.riskData.images.length>0?s("div",[s("span",{staticClass:"middle-font"},[s("span",{staticClass:"danger-font"},[t._v(" "+t._s(t.riskData.images.length)+" ")]),t._v(" 张图片分辨率低于300dpi "),s("a-tooltip",[s("img",{staticStyle:{width:"16px",height:"16px"},attrs:{src:i("5176")}}),s("template",{slot:"title"},[t._v(" 图片分辨率低于300dpi，在实际印刷中可能存 在模糊，建议缩小大小或者替换图片 ")])],2)],1),s("span",{staticClass:"clickable-theme",staticStyle:{float:"right","font-size":"14px"},on:{click:t.adjustAllImages}},[t._v(" 调整所有 ")]),s("a-divider",{staticStyle:{margin:"1px 0 10px 0"}}),t._l(t.riskData.images,(function(e){return s("div",{key:e.design.uuid,staticClass:"image-block",class:{active:t.activeImageUUID===e.design.uuid},style:{backgroundImage:"url("+e.design.src+")"},on:{mouseover:function(i){t.hoverImageUUID=e.design.uuid},mouseout:function(e){t.hoverImageUUID=null}}},[s("a",{attrs:{href:"#"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.hoverImageUUID===e.design.uuid,expression:"hoverImageUUID === item.design.uuid"}],staticClass:"flex flex-center item-center image-cover",on:{click:function(i){return t.setItemActive(e)}}},[s("span",{staticClass:"locate-font",attrs:{href:"#"}},[t._v("定位")])])])])}))],2):t._e(),s("div",{staticClass:"clearfix"}),t.riskData.fonts.length>0?s("div",{staticStyle:{"margin-top":"16px"}},[s("span",{staticClass:"middle-font"},[s("span",{staticClass:"danger-font"},[t._v(" "+t._s(t.riskData.fonts.length)+" ")]),t._v(" 处文字字号小于6pt ")]),s("span",{staticClass:"clickable-theme",staticStyle:{float:"right"},on:{click:t.ignoreAllFonts}},[t._v(" 忽略全部 ")]),s("a-tooltip",[s("img",{staticStyle:{width:"16px",height:"16px"},attrs:{src:i("5176")}}),s("template",{slot:"title"},[t._v(" 文字字号小于6pt，在实际印刷中可能存在模糊，建议调整文字大小 ")])],2),s("a-divider",{staticStyle:{margin:"1px 0 10px 0"}}),t._l(t.riskData.fonts,(function(e){return s("a-row",{key:e.design.uuid,staticClass:"font-row"},[s("a-col",{attrs:{span:2}},[s("div",{staticClass:"font-sign flex flex-center"},[t._v("Aa")])]),s("a-col",{staticClass:"line-clamp",style:{fontSize:"14px",lineHeight:"32px",paddingLeft:"16px",paddingright:"16px",fontFamily:e.design.style.fontFamily,cursor:"pointer"},attrs:{span:20},on:{click:function(i){return t.setItemActive(e)}}},[s("a-tooltip",[s("template",{slot:"title"},[t._v("定位")]),t._v(" "+t._s(e.design.value)+" ")],2)],1),s("a-col",{attrs:{span:2}},[s("a-tooltip",{attrs:{placement:"right"}},[s("img",{staticStyle:{width:"16px",height:"16px"},attrs:{src:i("fb29")},on:{click:function(i){return t.ignoreFont(e,!0)}}}),s("template",{slot:"title"},[t._v(" 忽略 ")])],2)],1)],1)}))],2):t._e()])]),s("div",{staticClass:"risk-buttons"},[s("a-button",{attrs:{type:"primary"},on:{click:t.beginRiskCheck}},[t._v(" 重新检测 ")]),t.isCompanyDomain||0!==t.project_data.cate.complex_type?t._e():s("a-button",{staticClass:"mx-8",on:{click:t.showProductOrder}},[t._v(" 继续下单 ")])],1)])])]):t._e()])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"risk-content",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[s("img",{staticClass:"flex-none",staticStyle:{width:"70px",height:"70px",margin:"10px"},attrs:{src:i("7d98")}}),s("div",{staticClass:"small-font",staticStyle:{width:"144px"}},[t._v(" 包小盒智能印刷风险检测， 确保您的印刷清晰完整 ")])])}],a=(i("8a79"),i("ddb0"),i("5530")),r=i("5880"),o=i("fe94"),l=i("da71"),c={data(){return{riskData:{images:[],fonts:[]},status:null,riskProgress:0,activeImageUUID:null,hoverImageUUID:null,autoCheck:!1}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("enterprise",["isCompanyDomain"])),Object(r["mapState"])("editor-v2",["project_data","knife_data","isCup","scale","is_outside","image_design_size_map","last_saved_local_history_ts"])),{},{smallImages(){},hasRisk(){return!!this.riskData&&(this.riskData.fonts.length>0||this.riskData.images.length>0)},isInside(){return!this.is_outside}}),mounted(){},beforeDestroy(){},methods:{beginRiskCheck(t=!1){this.status="checking",this.riskProgress=10,setTimeout(()=>{this.riskProgress=25},300),setTimeout(()=>{this.riskProgress=50},600),setTimeout(()=>{this.riskProgress=75},900),setTimeout(()=>{this.riskProgress=100,this.checkBothSides(),t&&!this.hasRisk&&this.showProductOrder(),this.status="checkFinished"},1200)},checkBothSides(){const t={},e=this.doRiskCheck(this.project_data.inside_design_data,"inside"),i=this.doRiskCheck(this.project_data.design_data,"outside");t.fonts=e.fonts.concat(i.fonts),t.images=e.images.concat(i.images),this.riskData=t},setItemActive(t){const e=t.side,i=t.design;"inside"!==e||this.isInside?"outside"===e&&this.isInside&&this.$store.commit("editor-v2/set_is_outside",!0):this.$store.commit("editor-v2/set_is_outside",!1),this.activeImageUUID=i.uuid,this.$store.commit("editor-v2/singleSelectDesign",i.uuid)},ignoreAllFonts(){for(const t of this.riskData.fonts)this.ignoreFont(t);this.$store.commit("increaseCanvasVersion",!0),this.$store.commit("increaseCanvasVersion",!1),this.$store.commit("increaseProjectVersion"),this.checkBothSides()},ignoreFont(t,e=!1){const{side:i,design:s}=t,n="inside"===i?this.project_data.inside_design_data:this.project_data.design_data,a=n.filter(t=>t.uuid===s.uuid)[0];a&&(a.style.allowSmall=!0,e&&(this.$store.commit("increaseCanvasVersion","inside"===i),this.$store.commit("increaseProjectVersion"),this.checkBothSides()))},adjustAllImages(){const t=this.riskData.images;t.map(t=>this.adjustImage(t)),this.$store.commit("increaseCanvasVersion",!1),this.$store.commit("increaseCanvasVersion",!0),this.$store.commit("increaseProjectVersion"),this.$set(this.riskData,"images",[])},adjustImage(t){const{side:e,design:i}=t,s="inside"===e?this.project_data.inside_design_data:this.project_data.design_data,n=s.filter(t=>t.uuid===i.uuid)[0];if(!n)return;const a=this.image_design_size_map[i.uuid];if(a){if(a.width/Object(o["a"])(n.style.width).mm2inch()<300){const t=n.style.width,e=Object(o["a"])(a.width/300).inch2mm(),i=e/t;n.style.width=e,n.style.height=n.style.height*i,n.bg&&(n.bg.width=n.bg.width*i,n.bg.height=n.bg.height*i,n.bg.x=n.bg.x*i,n.bg.y=n.bg.y*i)}if(a.height/Object(o["a"])(n.style.height).mm2inch()<300){const t=n.style.height,e=Object(o["a"])(a.height/300).inch2mm(),i=e/t;n.style.height=e,n.style.width=n.style.width*i,n.bg&&(n.bg.width=n.bg.width*i,n.bg.height=n.bg.height*i,n.bg.x=n.bg.x*i,n.bg.y=n.bg.y*i)}n.width=Object(o["a"])(n.style.width).mm2px(),n.height=Object(o["a"])(n.style.height).mm2px()}},doRiskCheck(t,e){const i=[],s=[];for(const n of t)if("font"===n.type)Object(o["a"])(n.style.fontSize).mm2pt()<6&&!n.style.allowSmall&&i.push({side:e,design:n});else if("img"===n.type&&!n.src.endsWith(".svg")){const t=this.image_design_size_map[n.uuid];if(!t)continue;(Math.round(t.width/Object(o["a"])(n.style.width).mm2inch())<=299||Math.round(t.height/Object(o["a"])(n.style.height).mm2inch())<=299)&&s.push({side:e,design:n})}return{fonts:i,images:s}},showProductOrder(){this.project_data.science_id!==l["CUSTOMIZED_SCIENCE_ID"]?this.$emit("risk-result",{hasRisk:this.hasRisk}):this.$message.error("自定义材质暂时不支持印刷下单，请联系客服")}}},h=c,d=(i("a6d7"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,"6dbb7032",null);e["default"]=u.exports},abd4:function(t,e,i){"use strict";i.r(e);i("ddb0");e["default"]={_translate_axis(t,e,i,s,n){return{x:(i-t)*Math.cos(n)+(s-e)*Math.sin(n)+t,y:(s-e)*Math.cos(n)-(i-t)*Math.sin(n)+e}},_designStyle2Rect(t){const{left:e,top:i,width:s,height:n,rotate:a}=t,r=e+s,o=i+n,l={x:e+s/2,y:i+n/2},c=Math.PI*a/180,h=[[e,i],[e,o],[r,i],[r,o]].map(t=>this._translate_axis(l.x,l.y,t[0],t[1],c)),d={left:Math.min(...h.map(t=>t.x)),right:Math.max(...h.map(t=>t.x)),top:Math.min(...h.map(t=>t.y)),bottom:Math.max(...h.map(t=>t.y))};return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d},getPosition(t,e,i,s){t=JSON.parse(JSON.stringify(t));const n=this._designStyle2Rect(t),{x:a,y:r,width:o,height:l}=n;let c={x:a,y:r};90===e?c={x:a,y:r+l}:180===e?c={x:a+o,y:r+l}:270===e&&(c={x:a+o,y:r});const h={x:t.left+t.width/2,y:t.top+t.height/2};return{x:-(h.x-c.x),y:-(h.y-c.y),rotate:-e,scale:1/i}}}},abfd:function(t,e,i){"use strict";i.r(e);i("1276");var s=i("750b"),n=i("ed08");i("02c4");const a=i("7a71");e["default"]=Object(s["b"])({props:{good:{type:[Object,Object],default:()=>({})}},setup(t,e){const i=Object(s["j"])(!1),r=Object(s["j"])(!1),o=[{key:!1,value:"3D"},{key:!0,value:"图纸"}],l=()=>{e.emit("open")};return()=>{var c,h,d,u;return Object(s["c"])("div",{class:"good-containerd "+(i.value?"good-containerd__active":""),on:{mousemove:()=>{i.value||(i.value=!0)},mouseleave:()=>{i.value&&(i.value=!1)}}},[Object(s["c"])("transition",{attrs:{name:"el-zoom-in-top"}},[i.value?Object(s["c"])("div",{class:"preview flex flex-between item-center"},[Object(s["c"])("div",{directives:[{name:"show",value:i.value}],class:"flex item-center dot-body"},[o.map((t,e)=>Object(s["c"])("div",{class:"dot "+(r.value===t.key?"active":""),key:e,on:{mousemove:()=>{r.value=t.key}}},[t.value]))])]):""]),Object(s["c"])("div",{class:"image-container"},[Object(s["c"])("img",{directives:[{name:"show",value:!r.value}],on:{click:()=>l()},attrs:{src:Object(n["F"])(null===(c=t.good)||void 0===c?void 0:c.mode_image,200,200,60,"|imageslim"),draggable:"false",alt:""}}),Object(s["c"])("img",{directives:[{name:"show",value:r.value}],on:{click:()=>l()},attrs:{src:Object(n["F"])(null===(h=t.good)||void 0===h?void 0:h.knife_image,200,200,60,"|imageslim"),draggable:"false",alt:""}})]),Object(s["c"])("div",{class:"flex flex-between item-center mt-10"},[Object(s["c"])("div",{class:"title",on:{click:()=>l()}},[null===(d=t.good)||void 0===d?void 0:d.cate_name,i.value?Object(s["c"])("a-tooltip",{attrs:{placement:"top",title:"商用"}},[Object(s["c"])("img",{class:"ml-4",attrs:{src:a,alt:""}})]):""]),Object(s["c"])("div",{class:"id",on:{click:()=>l()}},["ID: ",t.good.mode_no])]),Object(s["c"])("transition",{attrs:{name:"fade"}},[Object(s["c"])("div",{class:"overflow mt-8",directives:[{name:"show",value:i.value}]},[Object(s["c"])("div",{class:"flex item-center flex-wrap keywords"},[null===(u=t.good.keywords)||void 0===u?void 0:u.split(",").map((t,i)=>Object(s["c"])("div",{class:"content",key:i,on:{click:()=>e.emit("search",t)}},[t]))])])])])}}})},ac0f:function(t,e,i){var s=i("cbe5"),n=i("401b"),a=i("4a3f"),r=a.quadraticSubdivide,o=a.cubicSubdivide,l=a.quadraticAt,c=a.cubicAt,h=a.quadraticDerivativeAt,d=a.cubicDerivativeAt,u=[];function p(t,e,i){var s=t.cpx2,n=t.cpy2;return null===s||null===n?[(i?d:c)(t.x1,t.cpx1,t.cpx2,t.x2,e),(i?d:c)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(i?h:l)(t.x1,t.cpx1,t.x2,e),(i?h:l)(t.y1,t.cpy1,t.y2,e)]}var f=s.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i=e.x1,s=e.y1,n=e.x2,a=e.y2,l=e.cpx1,c=e.cpy1,h=e.cpx2,d=e.cpy2,p=e.percent;0!==p&&(t.moveTo(i,s),null==h||null==d?(p<1&&(r(i,l,n,p,u),l=u[1],n=u[2],r(s,c,a,p,u),c=u[1],a=u[2]),t.quadraticCurveTo(l,c,n,a)):(p<1&&(o(i,l,h,n,p,u),l=u[1],h=u[2],n=u[3],o(s,c,d,a,p,u),c=u[1],d=u[2],a=u[3]),t.bezierCurveTo(l,c,h,d,n,a)))},pointAt:function(t){return p(this.shape,t,!1)},tangentAt:function(t){var e=p(this.shape,t,!0);return n.normalize(e,e)}});t.exports=f},ac55:function(t,e,i){t.exports=i.p+"editor-assets/img/watermark.4dc4d4a8.png"},acc7:function(t,e,i){t.exports=i.p+"editor-assets/img/e4.3f50d7d7.svg"},accc:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"select-background-color-wrap"},[s("div",{staticClass:"title"},[t._v("背景颜色")]),s("div",{staticClass:"flex mt-16"},[s("b-pallet",{ref:"pallet",staticClass:"color-item",attrs:{size:"mini",value:t.color},on:{confirm:function(e){return t.onChooseColor(e.rgba)}}}),s("img",{staticClass:"color-item opacity ml-12",attrs:{src:i("e0c1"),alt:""},on:{click:function(e){return t.onChooseColor("")}}})],1),s("div",{staticClass:"my-16 line"}),s("div",{staticClass:"flex flex-between flex-wrap"},t._l(t.$data.$colors,(function(e,i){return s("div",{key:i,staticClass:"color-item",style:{background:e},on:{click:function(i){return t.onChooseColor(e)}}})})),0)])},n=[],a={props:{color:{type:String,default:""}},data(){return{$colors:["rgba(255,24,24,1)","rgba(255,97,13,1)","rgba(255,180,32,1)","rgba(109,212,0,1)","rgba(25,204,129,1)","rgba(253,25,94,1)","rgba(38,107,255,1)","rgba(50,197,255,1)","rgba(0,0,0,1)","rgba(255,255,255,1)"]}},methods:{onChooseColor(t=""){this.$emit("confirm",t)}}},r=a,o=(i("5482"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"13e79d0c",null);e["default"]=l.exports},ad0c:function(t,e,i){"use strict";var s=i("e966"),n=i.n(s);n.a},ad0d:function(t,e,i){"use strict";var s=i("81be"),n=i.n(s);n.a},ad6df:function(t,e,i){t.exports=i.p+"editor-assets/img/vip-next.4e1c236f.svg"},ad9f:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-button",{attrs:{block:"",disabled:t.tailoring},on:{click:t.openTailor}},[s("img",{attrs:{src:i("9e07")}}),t._v(" 裁剪图片 ")])},n=[],a=i("5530"),r=i("5880"),o={computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor",["tailoringUUID","targetDesign"])),{},{tailoring(){return!!this.tailoringUUID}}),methods:Object(a["a"])(Object(a["a"])({},Object(r["mapActions"])("editor",["setTailoringUUID"])),{},{openTailor(){this.setTailoringUUID(this.targetDesign.uuid)}})},l=o,c=(i("dcb9"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,"56769bdd",null);e["default"]=h.exports},ada6:function(t,e,i){"use strict";i.r(e);i("2ca0");var s=i("750b"),n=i("365c");i("b17b");e["default"]=Object(s["b"])({props:{design:{type:[Object,Object],default:()=>({})}},setup(t,e){const a=t=>{e.emit("silentChange",t)},r=()=>JSON.parse(JSON.stringify(t.design)),o=e.vuex.mapState("editor",["loadingCutout","currentCutoutUUID"]),l=e.vuex.mapMutations("editor",["setLoadingCutout","setCurrentCutoutUUID","setShowCutoutTab"]),c=e.vuex.mapActions("menu",["setMenuVisible","setCurrentMenuIndex"]);return()=>Object(s["c"])("div",{class:"image-cutout"},[Object(s["c"])("a-button",{attrs:{block:!0,disabled:o.loadingCutout.value||t.design.isCutout},on:{click:async()=>{e.track({category:"ai-cutout",action:"click"}),l.setLoadingCutout(!0),l.setCurrentCutoutUUID(t.design.uuid),l.setShowCutoutTab(!0);const i=r();try{const s=await Object(n["imageCutout"])({url:t.design.src.startsWith("http")?t.design.src:"http:"+t.design.src});if(s.data){if(o.currentCutoutUUID.value!==i.uuid)return;i.originSrc=i.src,i.src=s.data,i.isCutout=!0,e.bus.$emit("refreshMatierialFileList"),c.setCurrentMenuIndex(4),c.setMenuVisible(!0),a(i)}}catch(s){l.setShowCutoutTab(!1)}finally{l.setLoadingCutout(!1)}}}},[Object(s["c"])("img",{attrs:{src:i("d151")}}),"智能抠图"]),Object(s["c"])("span",{class:"limit-free"},["限免"])])}})},adae:function(t,e,i){},adaed:function(t,e,i){t.exports=i.p+"editor-assets/img/header.ffe60fac.png"},ae17:function(t,e,i){"use strict";var s=i("9e91"),n=i.n(s);n.a},ae36:function(t,e,i){"use strict";var s=i("750b");i("2aee");e["a"]=Object(s["b"])({props:{imageUrl:{type:String,default:""},visible:{type:Boolean,default:!1}},setup(t,e){return()=>Object(s["c"])("div",{class:"obscuration-wrapper flex flex-center item-center",on:{click:()=>{e.emit("cancel")}},style:{display:t.visible?"flex":"none"}},[Object(s["c"])("div",{class:"obscuration-wrapper__panel"},[Object(s["c"])("div",{class:"close-panel flex flex-end"},[Object(s["c"])("div",{class:"close-btn flex flex-center item-center"},[Object(s["c"])("svg",{attrs:{t:"1591951363392",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5098",width:"20",height:"20"},class:"icon"},[Object(s["c"])("path",{attrs:{d:"M566.97558594 521.09667969L856.8828125 231.18945312c14.63378906-14.63378906 14.63378906-38.75976563 0-53.39355468l-1.58203125-1.58203125c-14.63378906-14.63378906-38.75976563-14.63378906-53.39355469 0L512 466.51660156 222.09277344 176.21386719c-14.63378906-14.63378906-38.75976563-14.63378906-53.39355469 0l-1.58203125 1.58203125c-15.02929688 14.63378906-15.02929688 38.75976563 0 53.39355469l289.90722656 289.90722656L167.1171875 811.00390625c-14.63378906 14.63378906-14.63378906 38.75976563 0 53.39355469l1.58203125 1.58203125c14.63378906 14.63378906 38.75976563 14.63378906 53.39355469 0L512 576.07226563 801.90722656 865.97949219c14.63378906 14.63378906 38.75976563 14.63378906 53.39355469 0l1.58203125-1.58203125c14.63378906-14.63378906 14.63378906-38.75976563 0-53.39355469L566.97558594 521.09667969z",fill:"#8a8a8a","p-id":"5099"}})])])]),Object(s["c"])("img",{attrs:{src:t.imageUrl,width:"800px"}})])])}})},ae41:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"image-cutout"},[s("a-button",{attrs:{disabled:t.cutouting||t.hasCutouted,block:""},on:{click:t.onClick}},[s("img",{attrs:{src:i("d151")}}),t._v(" 智能抠图 ")]),s("span",{staticClass:"limit-free"},[t._v("限免")])],1)},n=[],a=i("5530"),r=i("5880"),o={props:{data:{type:Object,default:()=>({})}},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["cur_cutout_uuid"])),{},{cutouting(){return this.cur_cutout_uuid===this.data.uuid},hasCutouted(){return this.data.isCutout}}),methods:{onClick(){const{data:t}=this,{uuid:e,src:i}=t,s=/^http:/.test(i)?i:"http:"+i;this.$http.post("/api/v2/tool/cutout",{url:s}).then(i=>{if(200!==i.code)return this.$message.error(i.msg),void this.onCancel();t.originSrc=t.src,t.src=i.data,t.isCutout=!0,this.$bus.$emit("side-menu/refresh","list"),this.$store.commit("editor-v2/set_cur_cutout_uuid",e)})}}},l=o,c=(i("b566"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,"4575ab3a",null);e["default"]=h.exports},ae69:function(t,e,i){var s=i("cbe5"),n=s.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(t,e){var i=.5522848,s=e.cx,n=e.cy,a=e.rx,r=e.ry,o=a*i,l=r*i;t.moveTo(s-a,n),t.bezierCurveTo(s-a,n-l,s-o,n-r,s,n-r),t.bezierCurveTo(s+o,n-r,s+a,n-l,s+a,n),t.bezierCurveTo(s+a,n+l,s+o,n+r,s,n+r),t.bezierCurveTo(s-o,n+r,s-a,n+l,s-a,n),t.closePath()}});t.exports=n},ae84:function(t,e,i){"use strict";var s=i("44cc"),n=i.n(s);n.a},aef7:function(t,e,i){"use strict";var s=i("0ba6"),n=i.n(s);n.a},af5b:function(t,e,i){},af93:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAD7klEQVRYR+3WXWhbZRgH8P/znpO0lbZSZMWPbtbpmHihXqk4xhR0FSZubtobLzcWtfk6bT46LzQXWnrSNjlJ242u+AGiQnFOcUy8EQWliAjDXgyHKNo6Pzpsxbl+JOf9yylkjNA2XY0UYbkMOf/nx3Oe530j2OCPbHB9XAP8PzpAUkKxge1CqYNZnB5MJ6eqNTsVO5BKjVx3YWYmr0V2i2YTId8I5JXhfOJ0NRCrAkKpfGNx9lKPaHkWgBLBRZINotSkqWDlMokT/xaxIiCZ7L3+r3l5GcRzEBZAHFPa/zZUoV+DuwCZ8pkSdQbi74kI1wtZFpBKjfmnZ36wSYREUAAk7VdmbzbbOfe8lbkDbuE1gDsB/GwoiQ46yXerCgh29d/JonuaRKsIX7z7riY7EAgUSkUC4dw2U+ZfJ7nDQyhlBoec2PvrQSzbgWA0vYOaH1NBG8JnBrPdH5aHRyL29gLxBsAHAP7ok7r7c7nob1eLWBYQStgtep6nCNxDwaeq6AsMD3edK4WHLPs+iLlgtsi5xUl3r2hX+ZT/pPeKqgLwQoIR+wkCwyRbROQLEziYyyW/DR3Jb9J/z50iuMlnqviVmzA2NmaMj0/dmMlY59c6mKuuYYfV9yRc1yGwRUTGfYKDLrhVa+QI3C6CKdNQ0RIiZKV3uZqjhuCFfDZxYi2IigdR2Orb61LnqHkrwC/ra5sfnVucadMsZkm0XIkId9oPF4v8BMB5JYgPOsl3KiEqArzX0RFJPw7qPIHblBiHhnLxV0PR/qfKEU2N8ZO/z9ofQWO3AL+KoKsSYk0ADxG20o+5rk4byuzLO7E3ve/KEN/B8O0xioX5osJoCUElsaNO8q2VhnPNAC8gFutrrq9vvJhKBS5d3givE9pNA3pO1ao276IKh3u3uArHqdEmgmmD2J/Pd3++HOKqAKWAkZER38TZmUcMA7rg1vxkKO33AX9kMl2Tpd90dg5sntfFY9DcA+G4X2oPOI71SzliXYBoNHvTIhc/A7lNqMb9pg5ks90T5eFLQ+niAyGFSu086iTOVAWwdE5E+/eRhSFSboHga7/UHHIc63KBRMJuuLiAHpBBCCf9otocJ3m2agAvKNKZPlBwmQW5WUTOmGbN4dxA9CvLytQt6EJawKVrXEH13NAUfymVEl1VwNImdNn73SKcJQRkwoAZcZX7NDUPi1AoavShB1s72tvb3aoNYXlQMGrvI5El2Qp4/w0oItCEHPeL/4jjWLNVWcPVLhrvsCJ0UlHupfACibGGOvTYdvefqz23ri1YKTCYsG/Wi9LsBxfcrXXfD4bDC5Vux6oCKhX7z2ZgPYVLz1zrwIZ34B9BfMowjnGDbwAAAABJRU5ErkJggg=="},afa0:function(t,e,i){t.exports=i.p+"editor-assets/img/new.75801d6b.svg"},afa06:function(t,e,i){var s=i("6d8b"),n=i("22d1"),a=i("e1fc"),r=i("04f6");function o(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var l=function(){this._roots=[],this._displayList=[],this._displayListLen=0};l.prototype={constructor:l,traverse:function(t,e){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(t,e)},getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,i=this._displayList,s=0,a=e.length;s<a;s++)this._updateAndAddDisplayable(e[s],null,t);i.length=this._displayListLen,n.canvasSupported&&r(i,o)},_updateAndAddDisplayable:function(t,e,i){if(!t.ignore||i){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();var s=t.clipPath;if(s){e=e?e.slice():[];var n=s,a=t;while(n)n.parent=a,n.updateTransform(),e.push(n),a=n,n=n.clipPath}if(t.isGroup){for(var r=t._children,o=0;o<r.length;o++){var l=r[o];t.__dirty&&(l.__dirty=!0),this._updateAndAddDisplayable(l,e,i)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){t.__storage!==this&&(t instanceof a&&t.addChildrenToStorage(this),this.addToStorage(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(var e=0;e<this._roots.length;e++){var i=this._roots[e];i instanceof a&&i.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array){e=0;for(var n=t.length;e<n;e++)this.delRoot(t[e])}else{var r=s.indexOf(this._roots,t);r>=0&&(this.delFromStorage(t),this._roots.splice(r,1),t instanceof a&&t.delChildrenFromStorage(this))}},addToStorage:function(t){return t&&(t.__storage=this,t.dirty(!1)),this},delFromStorage:function(t){return t&&(t.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:o};var c=l;t.exports=c},afc5a:function(t,e,i){"use strict";var s=i("0258"),n=i.n(s);n.a},b033:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["dragsvg",{"dragsvg--active":!1}],on:{contextmenu:function(e){return e.stopPropagation(),e.preventDefault(),t.handleContextMenu(e)}}},[i("div",{staticClass:"bxh-grag-material",style:Object.assign({},{left:t.tdata.style.left+"mm",top:t.tdata.style.top+"mm",transform:"rotate("+(t.tdata.style.rotate||0)+"deg)",overflow:"visible"},t.outline),attrs:{id:"svgDrag2Wrap_"+t.tdata.uuid}},[t.targetDesign&&t.targetDesign.uuid===t.tdata.uuid&&"group"!=t.tdata.type&&!t.inGroup?i("single-control",{directives:[{name:"show",rawName:"v-show",value:t.tailoringUUID!==t.tdata.uuid,expression:"tailoringUUID !== tdata.uuid"}],staticStyle:{transform:"translate(-50mm, -50mm)"}}):t._e(),t.isImageAndNotSvg&&t.targetDesign&&t.targetDesign.uuid===t.tdata.uuid&&"group"!=t.tdata.type&&!t.inGroup?i("tailor-control",{directives:[{name:"show",rawName:"v-show",value:t.tailoringUUID==t.tdata.uuid,expression:"tailoringUUID == tdata.uuid"}],staticStyle:{transform:"translate(-50mm, -50mm)"}}):t._e(),i("tab-picker",{directives:[{name:"show",rawName:"v-show",value:t.showCutoutTab&&t.tdata.uuid===t.currentCutoutUUID,expression:"showCutoutTab && tdata.uuid === currentCutoutUUID"}],style:{transform:"scale("+1/t.scale+")",transformOrigin:"bottom right",position:"absolute",right:0,bottom:"calc(100% + "+10/t.scale+"px)",minWidth:"110px"},attrs:{tabs:t.tabs},on:{click:t.handleCutout}}),i("div",{style:{width:t.tdata.style.width+"mm",height:t.tdata.style.height+"mm",outline:t.tdata.style.borderWidth/t.scale+"px solid "+t.tdata.style.borderColor},attrs:{id:"svgDrag2"+t.tdata.uuid},on:{mouseover:t.materialMouseOver,mouseout:t.materialMouseOut,dblclick:function(e){return e.stopPropagation(),t.handleDblclick(e)}}},[!t.materialLoaded||t.currentCutoutUUID===t.tdata.uuid&&t.loadingCutout?i("div",{staticClass:"loading-cover",style:{background:t.materialLoaded?"rgba(0, 0, 0, 0.5)":""}},[i("a-spin",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},[i("a-icon",{style:{fontSize:16/t.scale+"px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1)],1):t._e(),i("div",{style:{transform:t.transformRotate}},["group"===t.tdata.type?i("svggroup",{ref:"nodeRef",attrs:{group:t.tdata,index:t.flag},on:{mousedown:t.mouseDown,"material-loaded":function(e){return t.handleMaterialLoaded(t.tdata)}}},t._l(t.tdata.designs,(function(e,s){return i("dragsvg",{key:e.uuid,ref:e.uuid+"Ref",refInFor:!0,attrs:{tdata:e,materials:t.materials,flag:s,lines:t.$root.projectData.lineGuides,inGroup:""}})})),1):t._e()],1),"img"===t.tdata.type?i("imagesg",{directives:[{name:"show",rawName:"v-show",value:t.tailoringUUID!==t.tdata.uuid,expression:"tailoringUUID !== tdata.uuid"}],ref:"nodeRef",staticClass:"bxh-material-item",style:{transform:t.transformRotate},attrs:{options:t.tdata},on:{mousedown:t.mouseDown,"material-loaded":function(e){return t.handleMaterialLoaded(t.tdata)}}}):t._e(),"font"===t.tdata.type?i("fontsg",{ref:"nodeRef",staticClass:"bxh-material-item",style:{transform:t.transformRotate},attrs:{options:t.tdata},on:{mousedown:t.mouseDown,"material-loaded":function(e){return t.handleMaterialLoaded(t.tdata)}}}):t._e(),"table"===t.tdata.type?i("tablesg",{ref:"nodeRef",staticClass:"bxh-material-item",style:{transform:t.transformRotate},attrs:{options:t.tdata},on:{mousedown:t.mouseDown,"material-loaded":function(e){return t.handleMaterialLoaded(t.tdata)}}}):t._e(),"barcode"===t.tdata.type?i("barcodesg",{ref:"nodeRef",staticClass:"bxh-material-item",style:{transform:t.transformRotate},attrs:{options:t.tdata},on:{mousedown:t.mouseDown,"material-loaded":function(e){return t.handleMaterialLoaded(t.tdata)}}}):t._e(),"qrcode"===t.tdata.type?i("qrcodesg",{ref:"nodeRef",staticClass:"bxh-material-item",style:{transform:t.transformRotate},attrs:{options:t.tdata},on:{mousedown:t.mouseDown,"material-loaded":function(e){return t.handleMaterialLoaded(t.tdata)}}}):t._e()],1)],1)])},n=[],a=(i("ddb0"),i("5530")),r=i("5880"),o=i("7b0f"),l=i("7b71"),c=i("586d"),h=i("98bd"),d=i("ba27"),u=i("294f"),p=(i("650f"),i("26a1")),f=(i("6116"),i("365c")),m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tabs",on:{click:function(t){t.stopPropagation()},mousedown:function(t){t.stopPropagation()}}},t._l(t.tabs,(function(e,s){return i("div",{key:s,staticClass:"tab-container"},[i("span",{staticClass:"tab",style:{color:e.color,filter:e.disabled?"opacity(50%)":"",cursor:e.disabled?"not-allowed":"pointer"},on:{click:function(i){return i.stopPropagation(),t.handleClick(e)}}},[t._v(" "+t._s(e.title)+" ")]),s<t.tabs.length-1?i("span",{staticClass:"v-line"}):t._e()])})),0)},g=[],v={props:{tabs:{type:Array,default:null}},methods:{handleClick(t){t.disabled||this.$emit("click",t)}}},b=v,y=(i("fcba"),i("2877")),x=Object(y["a"])(b,m,g,!1,null,"06a45ffc",null),w=x.exports,C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.targetDesign&&t.showControl?i("div",{ref:"controlRef",staticClass:"control",style:{left:"50mm",top:"50mm",width:t.targetDesign.style.width+"mm",height:t.targetDesign.style.height+"mm"}},[i("control-point",{style:{left:0,top:0,cursor:t.calculateCursor("nw")},attrs:{scale:t.scale,type:"circle",position:{left:"-50%",top:"-50%"}},on:{resize:function(e){return t.doScale(e,"nw")}}}),t.showControlPoint?i("control-point",{style:{right:0,top:0,cursor:t.calculateCursor("ne")},attrs:{scale:t.scale,type:"circle",position:{right:"-50%",top:"-50%"}},on:{resize:function(e){return t.doScale(e,"ne")}}}):t._e(),t.showControlPoint?i("control-point",{style:{left:0,bottom:0,cursor:t.calculateCursor("sw")},attrs:{scale:t.scale,type:"circle",position:{left:"-50%",bottom:"-50%"}},on:{resize:function(e){return t.doScale(e,"sw")}}}):t._e(),t.showControlPoint?i("control-point",{style:{right:0,bottom:0,cursor:t.calculateCursor("se")},attrs:{scale:t.scale,type:"circle",position:{right:"-50%",bottom:"-50%"}},on:{resize:function(e){return t.doScale(e,"se")}}}):t._e(),t.checkForFont("w")&&t.showControlPoint?i("control-point",{style:{left:0,top:"50%",cursor:t.calculateCursor("w")},attrs:{scale:t.scale,type:"rect",position:{left:"-50%",top:"-50%"}},on:{resize:function(e){return t.doScale(e,"w")}}}):t._e(),t.checkForFont("e")&&t.showControlPoint?i("control-point",{style:{right:0,top:"50%",cursor:t.calculateCursor("e")},attrs:{scale:t.scale,type:"rect",position:{right:"-50%",top:"-50%"}},on:{resize:function(e){return t.doScale(e,"e")}}}):t._e(),t.checkForFont("n")&&t.showControlPoint?i("control-point",{style:{left:"50%",top:0,cursor:t.calculateCursor("n")},attrs:{scale:t.scale,type:"rect",position:{left:"-50%",top:"-50%"}},on:{resize:function(e){return t.doScale(e,"n")}}}):t._e(),t.checkForFont("s")&&t.showControlPoint?i("control-point",{style:{left:"50%",bottom:0,cursor:t.calculateCursor("s")},attrs:{scale:t.scale,type:"rect",position:{left:"-50%",bottom:"-50%"}},on:{resize:function(e){return t.doScale(e,"s")}}}):t._e(),t.showCutoutTab?t._e():i("div",{style:t.rotateStyle,on:{mousedown:function(e){return e.stopPropagation(),t.doRotate(e)}}})],1):t._e()},k=[],S=i("ce94"),A=(i("df11"),i("575b"),i("2af2"),i("2b1a")),O=i("fe94"),j=i("60bb"),M=i.n(j),I={components:{ControlPoint:S["a"]},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor",["targetDesign","showControl","showCutoutTab","currentWorkingGroup"])),Object(r["mapState"])(["scale","isInside","spaceKeyDown"])),{},{isTable(){return"table"===this.design.type},globalRotate(){return this.$root.projectData.rotate},showControlPoint(){return this.design&&this.design.style.width*this.scale>3&&this.design.style.height*this.scale>3},designCenter(){let t=null;if(0===this.globalRotate)t={x:this.design.style.left+this.design.style.width/2,y:this.design.style.top+this.design.style.height/2};else if(90===this.globalRotate)t={x:this.$root.knifeData.totalY-this.design.style.top-this.design.style.height/2,y:this.design.style.left+this.design.style.width/2};else if(180===this.globalRotate)t={x:this.$root.knifeData.totalX-this.design.style.left-this.design.style.width/2,y:this.$root.knifeData.totalY-this.design.style.top-this.design.style.height/2};else{if(270!==this.globalRotate)throw"Unknown rotate, "+this.globalRotate;t={x:this.$root.knifeData.totalY-this.design.style.top-this.design.style.height/2,y:this.$root.knifeData.totalX-this.design.style.left-this.design.style.width/2}}return this.currentWorkingGroup&&this.currentWorkingGroup.uuid!==this.design.uuid&&(t=this.calculateRotation(t,{x:this.currentWorkingGroup.style.left+this.currentWorkingGroup.style.width/2,y:this.currentWorkingGroup.style.top+this.currentWorkingGroup.style.height/2},this.currentWorkingGroup.style.rotate||0)),t},rotateStyle(){const t={position:"absolute",cursor:"grab",height:18/this.scale+"px",width:18/this.scale+"px",backgroundImage:`url(${i("3167")})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",pointerEvents:"auto"},e=-30/this.scale+"px";return 0===this.globalRotate?(t.top=e,t.left="50%",t.transform="translate(-50%, -50%)"):90===this.globalRotate?(t.left=e,t.top="50%",t.transform="translate(-50%, -50%)"):180===this.globalRotate?(t.bottom=e,t.left="50%",t.transform="translate(-50%, 50%)"):(t.right=e,t.bottom="50%",t.transform="translate(50%, 50%)"),t},origin(){return this.currentWorkingGroup?{x:this.currentWorkingGroup.style.left,y:this.currentWorkingGroup.style.top}:{x:0,y:0}}}),data(){return{cursors:["n","ne","e","se","s","sw","w","nw"],design:null,rotateValue:0}},mounted(){this.initDesign(),this.design&&(this.rotateValue=this.design.style.rotate||0,this.currentWorkingGroup&&this.currentWorkingGroup.uuid!=this.targetDesign.uuid&&(this.rotateValue+=this.currentWorkingGroup.style.rotate||0))},methods:{checkForFont(t){if("font"!=this.targetDesign.type)return!0;const{vertical:e}=this.targetDesign.style;switch(t){case"s":case"n":if(!e)return!1;break;case"w":case"e":if(1==e)return!1;break;default:break}return!0},initDesign(){if(!this.targetDesign)return null;const t=this.targetDesign.uuid;this.isInside?this.design=this.$root.projectData.insideDesignData.filter(e=>e.uuid===t)[0]:this.design=this.$root.projectData.designData.filter(e=>e.uuid===t)[0],!this.design&&this.currentWorkingGroup&&(this.design=this.currentWorkingGroup.designs.find(t=>t.uuid===this.targetDesign.uuid))},calculateCursor(t){let e=this.rotateValue+22;e+=this.globalRotate;let i=parseInt(e/45),s=i+this.cursors.indexOf(t);s%=this.cursors.length,s<0&&(s+=this.cursors.length);const n=this.cursors[s]+"-resize";return n},calculateAngle(t){let e=t.offsetX-this.designCenter.x*f["DPI"],i=t.offsetY-this.designCenter.y*f["DPI"],s=Math.atan2(i,e)/Math.PI*180;return s+90},doRotate(t){var e,i;if(this.$store.dispatch("saveIsOpt",!0),0!=t.button||this.spaceKeyDown)return;if(null===(e=this.targetDesign)||void 0===e?void 0:e.locked)return this.$message.error("该对象被锁定");this.$store.commit("editor/setShowRotateTip",!0);const s=null===(i=document.getElementById("svgContainer"))||void 0===i?void 0:i.getBoundingClientRect();s&&(this.rotateValue=this.design.style.rotate,document.onmousemove=t=>{let e=(t.clientX-s.x)/this.scale-50*f["DPI"]-this.origin.x*f["DPI"],i=(t.clientY-s.y)/this.scale-50*f["DPI"]-this.origin.y*f["DPI"],n=this.calculateAngle({offsetX:e,offsetY:i});return this.rotateValue=this.roundAngle(n),this.$store.commit("editor/updateTargetDesign",{style:{rotate:this.rotateValue%360}}),this.design.style.rotate=this.rotateValue%360,this.$store.commit("editor/setTargetDesignStyle",{style:{}}),!1},document.onmouseup=t=>{this.$store.commit("editor/setShowRotateTip",!1),this.$store.commit("editor/updateTargetDesign",{style:{rotate:this.rotateValue}}),this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside),this.design.style.rotate=this.rotateValue,document.onmousemove=null,document.onmouseup=null})},roundAngle(t){const e=5,i=45;t%=360,t<0&&(t+=360);const s=Math.round(t/i);return Math.abs(t-s*i)<e?s*i:t},calculatePosition(t){let e=null;return"nw"==t?e={x:this.design.style.left,y:this.design.style.top}:"ne"===t?e={x:this.design.style.left+this.design.style.width,y:this.design.style.top}:"sw"===t?e={x:this.design.style.left,y:this.design.style.top+this.design.style.height}:"se"===t?e={x:this.design.style.left+this.design.style.width,y:this.design.style.top+this.design.style.height}:"n"===t?e={x:this.design.style.left+this.design.style.width/2,y:this.design.style.top}:"e"===t?e={x:this.design.style.left+this.design.style.width,y:this.design.style.top+this.design.style.height/2}:"s"===t?e={x:this.design.style.left+this.design.style.width/2,y:this.design.style.top+this.design.style.height}:"w"===t&&(e={x:this.design.style.left,y:this.design.style.top+this.design.style.height/2}),e},calculateRotation(t,e,i){const s=Math.cos(i/180*Math.PI),n=Math.sin(i/180*Math.PI),a=t.x-e.x,r=t.y-e.y;return{x:a*s-r*n+e.x,y:a*n+r*s+e.y}},doScale(t,e){var i,s;if(null===(i=this.targetDesign)||void 0===i?void 0:i.locked)return this.$message.error("该对象被锁定");this.$store.commit("editor/setShowSizeTip",!0);const n=this.design.style.width,a=this.design.style.height,r=this.design.style.fontSize||0,o=this.design.style.lineHeight||0;let l=0,c=0,h=0,d=0;this.design.bg&&(l=this.design.bg.x,c=this.design.bg.y,h=this.design.bg.width,d=this.design.bg.height);const u=this.cursors.indexOf(e);let p=u+4;p>=this.cursors.length&&(p%=this.cursors.length);let m=this.calculatePosition(e);this.$store.commit("editor/setMousePosition",{x:m.x*f["DPI"],y:m.y*f["DPI"]});let g=this.calculatePosition(this.cursors[p]);const v={x:this.design.style.left+this.design.style.width/2,y:this.design.style.top+this.design.style.height/2};m=Object(A["b"])(m.x,m.y,v.x,v.y,this.design.style.rotate||0),g=Object(A["b"])(g.x,g.y,v.x,v.y,this.design.style.rotate||0);const b=null===(s=document.getElementById("svgContainer"))||void 0===s?void 0:s.getBoundingClientRect();if(!b)return;const y={x:m.x-g.x,y:m.y-g.y},_=Math.sqrt(y.x*y.x+y.y*y.y);y.x/=_,y.y/=_;let x=parseInt(this.globalRotate/90)%4;x<0&&(x+=4);let w=null;"font"===this.design.type&&(w=document.querySelector("#dragFont"+this.design.uuid)),document.onmousemove=i=>{const s=this.design.style.left,u=this.design.style.top,p=this.design.style.width,v=this.design.style.height;let b=(i.clientX-t.clientX)/this.scale/f["DPI"],_=(i.clientY-t.clientY)/this.scale/f["DPI"];1==x?[b,_]=[_,-b]:2==x?[b,_]=[-b,-_]:3==x&&([b,_]=[-_,b]);const C={x:(b*y.x+_*y.y)*y.x,y:(b*y.x+_*y.y)*y.y},k={x:m.x+C.x,y:m.y+C.y};if(this.$store.commit("editor/setMousePosition",{x:k.x*f["DPI"],y:k.y*f["DPI"]}),this.applyPointBack(e,k,g,n,a,l,c,h,d),this.design.style.width<1&&(this.design.style.width=p,this.design.style.left=s),this.design.style.height<1&&(this.design.style.height=v,this.design.style.top=u),2===e.length&&"font"===this.design.type)this.design.style.vertical?(this.design.style.fontSize=this.design.style.height/a*r,this.design.style.lineHeight=this.design.style.height/a*o):(this.design.style.fontSize=this.design.style.width/n*r,this.design.style.lineHeight=this.design.style.width/n*o);else if(1===e.length&&"font"===this.design.type&&w){const t=Object(O["a"])(this.design.style.fontSize).mm2px(),e=t>12?1:t/12;this.design.style.vertical?this.design.style.width=w.clientWidth*e/f["DPI"]:this.design.style.height=w.clientHeight*e/f["DPI"]}const S={width:this.design.style.width*f["DPI"],height:this.design.style.height*f["DPI"],x:this.design.style.left*f["DPI"],y:this.design.style.top*f["DPI"],style:{},bg:{}};S.style.width=this.design.style.width,S.style.height=this.design.style.height,S.style.left=this.design.style.left,S.style.top=this.design.style.top,this.design.style.fontSize&&(S.style.fontSize=this.design.style.fontSize),this.design.style.lineHeight&&(S.style.lineHeight=this.design.style.lineHeight),this.$store.commit("editor/updateTargetDesign",S)},document.onmouseup=t=>{this.design.style.width=this.design.style.width,this.design.style.height=this.design.style.height,this.design.style.left=this.design.style.left,this.design.style.top=this.design.style.top,this.$store.commit("editor/setShowSizeTip",!1),this.$store.dispatch("saveIsOpt",!1),this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside),document.onmousedown=null,document.onmousemove=null}},applyPointBack(t,e,i,s,n,a,r,o,l){const c=(e.x+i.x)/2,h=(e.y+i.y)/2,d=Object(A["b"])(e.x,e.y,c,h,-this.design.style.rotate),u=Object(A["b"])(i.x,i.y,c,h,-this.design.style.rotate);2===t.length?"nw"===t?(this.design.style.width=u.x-d.x,this.design.style.height=u.y-d.y,this.design.style.left=d.x,this.design.style.top=d.y):"ne"===t?(this.design.style.width=-u.x+d.x,this.design.style.height=u.y-d.y,this.design.style.left=u.x,this.design.style.top=d.y):"se"===t?(this.design.style.width=-u.x+d.x,this.design.style.height=-u.y+d.y,this.design.style.left=u.x,this.design.style.top=u.y):"sw"===t&&(this.design.style.width=u.x-d.x,this.design.style.height=-u.y+d.y,this.design.style.left=d.x,this.design.style.top=u.y):"n"===t?(this.design.style.height=u.y-d.y,this.design.style.left=d.x-s/2,this.design.style.top=d.y):"e"===t?(this.design.style.width=d.x-u.x,this.design.style.left=u.x,this.design.style.top=u.y-n/2):"s"===t?(this.design.style.height=d.y-u.y,this.design.style.left=u.x-s/2,this.design.style.top=u.y):"w"===t&&(this.design.style.width=u.x-d.x,this.design.style.left=d.x,this.design.style.top=d.y-n/2);let p=this.design.style.width/s,f=this.design.style.height/n;this.design.bg&&(this.design.bg.x=a*p,this.design.bg.y=r*f,this.design.bg.width=o*p,this.design.bg.height=l*f)}}},T=I,E=(i("7892"),Object(y["a"])(T,C,k,!1,null,"398537d8",null)),D=E.exports,L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.targetDesign&&t.showControl?i("div",{ref:"controlRef",staticClass:" ",style:{position:"absolute",left:"50mm",top:"50mm",width:t.targetDesign.style.width+"mm",height:t.targetDesign.style.height+"mm"},on:{mousedown:t.handle_wrap_mouse_down}},[i("tailorImage",{attrs:{data:t.targetDesign,isBg:!0}}),i("div",{staticClass:"image-viewport",on:{mousedown:t.handle_viewport_mouse_down}},[i("tailorImage",{attrs:{data:t.targetDesign}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.resizing&&!t.moving,expression:"!resizing && !moving"}],staticClass:"center-and-no-rotate",style:{transform:"rotate(-"+t.targetDesign.style.rotate+"deg)"}},[i("div",{staticClass:"editor-toolbar",style:{left:t.position.x+"mm",top:t.position.y+"mm",transform:"rotate("+t.position.rotate+"deg) scale("+t.position.scale+") translate(0,-60px)"}},[i("span",{staticStyle:{"margin-left":"16px","margin-right":"12px"}},[t._v("缩放")]),i("a-slider",{staticStyle:{width:"144px",display:"inline-block","margin-right":"20px"},attrs:{min:50,max:t.max_scale,tipFormatter:t.showTipFormatter},on:{change:t.bg_scale_change,afterChange:t.bg_scale_after_change},model:{value:t.bg_scale,callback:function(e){t.bg_scale=e},expression:"bg_scale"}}),i("span",{staticClass:"btn",class:{disabled:!t.hasChange()},on:{click:t.onReset}},[t._v("重置")]),i("span",{staticClass:"btn",on:{click:t.onCancel}},[t._v("取消")]),i("span",{staticClass:"btn btn-submit",on:{click:t.onSave}},[t._v("确定")])],1)]),i("control-point",{style:{left:0,top:0,cursor:t.calculateCursor("nw")},attrs:{scale:t.scale,type:"circle",direction:"nw",position:{left:"-50%",top:"-50%"}},on:{resize:function(e){return t.doScale(e,"nw")}}}),t.showControlPoint?i("control-point",{style:{right:0,top:0,cursor:t.calculateCursor("ne")},attrs:{scale:t.scale,type:"circle",direction:"ne",position:{right:"-50%",top:"-50%"}},on:{resize:function(e){return t.doScale(e,"ne")}}}):t._e(),t.showControlPoint?i("control-point",{style:{left:0,bottom:0,cursor:t.calculateCursor("sw")},attrs:{scale:t.scale,type:"circle",direction:"sw",position:{left:"-50%",bottom:"-50%"}},on:{resize:function(e){return t.doScale(e,"sw")}}}):t._e(),t.showControlPoint?i("control-point",{style:{right:0,bottom:0,cursor:t.calculateCursor("se")},attrs:{scale:t.scale,type:"circle",direction:"se",position:{right:"-50%",bottom:"-50%"}},on:{resize:function(e){return t.doScale(e,"se")}}}):t._e(),t.showControlPoint?i("control-point",{style:{left:0,top:"50%",cursor:t.calculateCursor("w")},attrs:{scale:t.scale,type:"rect",direction:"w",position:{left:"-50%",top:"-50%"}},on:{resize:function(e){return t.doScale(e,"w")}}}):t._e(),i("control-point",{style:{right:0,top:"50%",cursor:t.calculateCursor("e")},attrs:{scale:t.scale,type:"rect",direction:"e",position:{right:"-50%",top:"-50%"}},on:{resize:function(e){return t.doScale(e,"e")}}}),["img","qrcode","barcode","table"].includes(this.targetDesign.type)&&t.showControlPoint?i("control-point",{style:{left:"50%",top:0,cursor:t.calculateCursor("n")},attrs:{scale:t.scale,type:"rect",direction:"n",position:{left:"-50%",top:"-50%"}},on:{resize:function(e){return t.doScale(e,"n")}}}):t._e(),["img","qrcode","barcode","table"].includes(this.targetDesign.type)&&t.showControlPoint?i("control-point",{style:{left:"50%",bottom:0,cursor:t.calculateCursor("s")},attrs:{scale:t.scale,type:"rect",direction:"s",position:{left:"-50%",bottom:"-50%"}},on:{resize:function(e){return t.doScale(e,"s")}}}):t._e(),t._l(2,(function(e){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.moving||t.resizing,expression:"moving || resizing"}],staticClass:"grid-line h",style:{top:33.33*e+"%"}})})),t._l(2,(function(e){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.moving||t.resizing,expression:"moving || resizing"}],staticClass:"grid-line v",style:{left:33.33*e+"%"}})}))],2):t._e()},P=[],R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"control-point",style:{width:t.baseLength+"px",height:t.baseLength+"px",zIndex:300},on:{mousedown:function(e){return e.stopPropagation(),t.$emit("resize",e)}}},[i("div",{staticClass:"point",class:{"angle-point":"circle"===t.type,"middle-point":"rect"===t.type},style:Object.assign({},{transform:"rotate("+t.point_rotate+"deg)"},t.position)})])},z=[],N={props:{direction:{type:String},scale:{type:Number},position:{type:Object,default:Object},type:{type:String,default:"circle"},shape:{type:String,default:""}},computed:{baseLength(){return this.type,10/this.scale},point_rotate(){let t=0;switch(this.direction){case"nw":default:t=0;break;case"ne":t=90;break;case"se":t=180;break;case"sw":t=270;break;case"n":case"s":t=0;break;case"e":case"w":t=90;break}return t}}},B=N,F=(i("f7a4"),Object(y["a"])(B,R,z,!1,null,"c237003a",null)),$=F.exports,U={_translate_axis(t,e,i,s,n){return{x:(i-t)*Math.cos(n)+(s-e)*Math.sin(n)+t,y:(s-e)*Math.cos(n)-(i-t)*Math.sin(n)+e}},_designStyle2Rect(t){let{left:e,top:i,width:s,height:n,rotate:a}=t,r=e+s,o=i+n,l={x:e+s/2,y:i+n/2},c=Math.PI*a/180,h=[[e,i],[e,o],[r,i],[r,o]].map(t=>this._translate_axis(l.x,l.y,t[0],t[1],c)),d={left:Math.min(...h.map(t=>t.x)),right:Math.max(...h.map(t=>t.x)),top:Math.min(...h.map(t=>t.y)),bottom:Math.max(...h.map(t=>t.y))};return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d},getPosition(t,e,i,s){t=JSON.parse(JSON.stringify(t));let n=this._designStyle2Rect(t),{x:a,y:r,width:o,height:l}=n,c={x:a,y:r};90==e?c={x:a,y:r+l}:180==e?c={x:a+o,y:r+l}:270==e&&(c={x:a+o,y:r});let h={x:t.left+t.width/2,y:t.top+t.height/2};return{x:-(h.x-c.x),y:-(h.y-c.y),rotate:-e,scale:1/i}}},H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("img",{staticClass:"image",staticStyle:{position:"absolute"},style:{opacity:""+(t.isBg?.3:1),left:t.data.bg.x+"mm",top:t.data.bg.y+"mm",width:t.data.bg.width+"mm",height:t.data.bg.height+"mm"},attrs:{src:t.data.src}})},V=[],G={props:["data","isBg"]},W=G,Y=(i("14f9"),Object(y["a"])(W,H,V,!1,null,"3e4ddc86",null)),q=Y.exports,X={components:{ControlPoint:$,tailorImage:q},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor",["targetDesign","showControl","showCutoutTab","currentWorkingGroup","tailoringUUID"])),Object(r["mapState"])(["isInside"])),Object(r["mapState"])(["scale","isInside","spaceKeyDown"])),{},{designs(){return this.isInside?this.$root.projectData.insideDesignData:this.$root.projectData.designData},isTable(){return"table"===this.design.type},globalRotate(){return this.$root.projectData.rotate},showControlPoint(){return this.design&&this.design.style.width*this.scale>3&&this.design.style.height*this.scale>3},designCenter(){let t=null;if(0===this.globalRotate)t={x:this.design.style.left+this.design.style.width/2,y:this.design.style.top+this.design.style.height/2};else if(90===this.globalRotate)t={x:this.$root.knifeData.totalY-this.design.style.top-this.design.style.height/2,y:this.design.style.left+this.design.style.width/2};else if(180===this.globalRotate)t={x:this.$root.knifeData.totalX-this.design.style.left-this.design.style.width/2,y:this.$root.knifeData.totalY-this.design.style.top-this.design.style.height/2};else{if(270!==this.globalRotate)throw"Unknown rotate, "+this.globalRotate;t={x:this.$root.knifeData.totalY-this.design.style.top-this.design.style.height/2,y:this.$root.knifeData.totalX-this.design.style.left-this.design.style.width/2}}return this.currentWorkingGroup&&this.currentWorkingGroup.uuid!==this.design.uuid&&(t=this.calculateRotation(t,{x:this.currentWorkingGroup.style.left+this.currentWorkingGroup.style.width/2,y:this.currentWorkingGroup.style.top+this.currentWorkingGroup.style.height/2},this.currentWorkingGroup.style.rotate||0)),t},rotate(){return this.$root.projectData.rotate},rotateStyle(){const t={position:"absolute",cursor:"grab",height:18/this.scale+"px",width:18/this.scale+"px",backgroundImage:`url(${i("3167")})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",pointerEvents:"auto"},e=-30/this.scale+"px";return 0===this.globalRotate?(t.top=e,t.left="50%",t.transform="translate(-50%, -50%)"):90===this.globalRotate?(t.left=e,t.top="50%",t.transform="translate(-50%, -50%)"):180===this.globalRotate?(t.bottom=e,t.left="50%",t.transform="translate(-50%, 50%)"):(t.right=e,t.bottom="50%",t.transform="translate(50%, 50%)"),t},origin(){return this.currentWorkingGroup?{x:this.currentWorkingGroup.style.left,y:this.currentWorkingGroup.style.top}:{x:0,y:0}},position(){return U.getPosition(this.targetDesign.style,this.$root.projectData.rotate,this.scale,f["DPI"])}}),data(){return{cursors:["n","ne","e","se","s","sw","w","nw"],design:null,rotateValue:0,oldBg:{},oldStyle:{},bg_scale:100,max_scale:300,moving:!1,resizing:!1}},mounted(){this.oldBg=Object.assign({},this.targetDesign.bg),this.oldStyle=Object.assign({},this.targetDesign.style),this.initDesign(),this.design&&(this.rotateValue=this.design.style.rotate||0,this.currentWorkingGroup&&this.currentWorkingGroup.uuid!=this.targetDesign.uuid&&(this.rotateValue+=this.currentWorkingGroup.style.rotate||0),this.calc_bg_scale(),window.addEventListener("keydown",this.onKeyDown))},beforeDestroy(){window.removeEventListener("keydown",this.onKeyDown)},methods:Object(a["a"])(Object(a["a"])({},Object(r["mapActions"])("editor",["setTailoringUUID"])),{},{showTipFormatter(t){return t<100?"小于图框":t>=300?"已达最大值":t+"%"},hasChange(){let{oldBg:t,oldStyle:e}=this,{bg:i,style:s}=this.targetDesign;if(!t||!e)return!1;let n=["x","y","width","height"];for(let r=0;r<n.length;r++){let e=n[r];if(t[e]!=i[e])return!0}let a=["width","height"];for(let r=0;r<a.length;r++){let t=a[r];if(e[t]!=s[t])return!0}return!1},onKeyDown(t){let{keyCode:e}=t;this.tailoringUUID&&(27===e?this.onCancel():13===e&&this.onSave())},calc_bg_scale(){let{bg:t,style:e}=this.design;this.bg_scale=Math.round(100*Math.min(t.width/e.width,t.height/e.height)),this.bg_scale>300&&(this.max_scale=500)},onCancel(){this.onReset(),this.setTailoringUUID("")},bg_scale_change(t){let{bg:e,style:i}=this.design,{oldStyle:s,oldBg:n}=this,a=0,r=0;if(i.width/e.width>i.height/e.height){let t=i.width;a=t,r=t*e.height/e.width}else{let t=i.height;a=t*e.width/e.height,r=t}let o=a*t/100,l=r*t/100,c=(e.width,e.height,e.x-(o-e.width)/2),h=e.y-(l-e.height)/2;e.width=o,e.height=l,e.x=c,e.y=h},bg_scale_after_change(t){(t<100||t>300)&&this.adjustSize()},onReset(){this.hasChange()&&(this.targetDesign.bg=Object.assign({},this.oldBg),this.targetDesign.style=Object.assign({},this.oldStyle),this.calc_bg_scale())},onSave(){let{uuid:t,bg:e}=this.targetDesign;this.designs.forEach(i=>{i.uuid==t&&(i.bg=e)}),this.setTailoringUUID("")},handle_wrap_mouse_down(t){t.stopPropagation()},initDesign(){if(!this.targetDesign)return null;const t=this.targetDesign.uuid;this.isInside?this.design=this.$root.projectData.insideDesignData.filter(e=>e.uuid===t)[0]:this.design=this.$root.projectData.designData.filter(e=>e.uuid===t)[0],!this.design&&this.currentWorkingGroup&&(this.design=this.currentWorkingGroup.designs.find(t=>t.uuid===this.targetDesign.uuid))},calculateCursor(t){let e=this.rotateValue+22;e+=this.globalRotate;let i=parseInt(e/45),s=i+this.cursors.indexOf(t);s%=this.cursors.length,s<0&&(s+=this.cursors.length);const n=this.cursors[s]+"-resize";return n},calculatePosition(t){let e=null;return"nw"==t?e={x:this.design.style.left,y:this.design.style.top}:"ne"===t?e={x:this.design.style.left+this.design.style.width,y:this.design.style.top}:"sw"===t?e={x:this.design.style.left,y:this.design.style.top+this.design.style.height}:"se"===t?e={x:this.design.style.left+this.design.style.width,y:this.design.style.top+this.design.style.height}:"n"===t?e={x:this.design.style.left+this.design.style.width/2,y:this.design.style.top}:"e"===t?e={x:this.design.style.left+this.design.style.width,y:this.design.style.top+this.design.style.height/2}:"s"===t?e={x:this.design.style.left+this.design.style.width/2,y:this.design.style.top+this.design.style.height}:"w"===t&&(e={x:this.design.style.left,y:this.design.style.top+this.design.style.height/2}),e},calculateRotation(t,e,i){const s=Math.cos(i/180*Math.PI),n=Math.sin(i/180*Math.PI),a=t.x-e.x,r=t.y-e.y;return{x:a*s-r*n+e.x,y:a*n+r*s+e.y}},handle_viewport_mouse_down(t){if(t.stopPropagation(),0!==t.button)return;let e=this.design.bg.x,i=this.design.bg.y;const s=this.design.bg.width,n=this.design.bg.height,a=this.design.style.width,r=this.design.style.height;document.onmousemove=this.moveThrottle(t.clientX,t.clientY,e,i,s,n,a,r),document.onmouseup=()=>{this.adjustSize(),this.moving=!1,document.onmousemove=null,document.onmousedown=null,document.onmouseup=null}},_parse_moveoffset(t,e,i){let{scale:s}=this,n=this.$root.projectData.rotate,a=t/(s*f["DPI"]),r=e/(s*f["DPI"]);90===n?[a,r]=[r,-a]:180===n?[a,r]=[-a,-r]:270===n&&([a,r]=[-r,a]);const o=Math.PI*i/180;let l=a*Math.cos(o)+r*Math.sin(o),c=-a*Math.sin(o)+r*Math.cos(o);return{x:l,y:c}},moveThrottle(t,e,i,s,n,a,r,o){return M.a.throttle(n=>{let a=this._parse_moveoffset(n.clientX-t,n.clientY-e,this.design.style.rotate);return this.design.bg.x=a.x+i,this.design.bg.y=a.y+s,this.moving=!0,!1},5)},doScale(t,e){if(this.targetDesign&&this.targetDesign.locked)return this.$message.error("该对象被锁定");this.$store.commit("editor/setShowSizeTip",!0);const i=this.design.style.width,s=this.design.style.height,n=this.design.style.fontSize||0,a=this.design.style.lineHeight||0,r=this.cursors.indexOf(e);let o=r+4;o>=this.cursors.length&&(o%=this.cursors.length);let l=this.calculatePosition(e);this.$store.commit("editor/setMousePosition",{x:l.x*f["DPI"],y:l.y*f["DPI"]});let c=this.calculatePosition(this.cursors[o]);const h={x:this.design.style.left+this.design.style.width/2,y:this.design.style.top+this.design.style.height/2};l=Object(A["b"])(l.x,l.y,h.x,h.y,this.design.style.rotate||0),c=Object(A["b"])(c.x,c.y,h.x,h.y,this.design.style.rotate||0);const d=document.getElementById("svgContainer")&&document.getElementById("svgContainer").getBoundingClientRect();if(!d)return;const u={x:l.x-c.x,y:l.y-c.y},p=Math.sqrt(u.x*u.x+u.y*u.y);u.x/=p,u.y/=p;let m=parseInt(this.globalRotate/90)%4;m<0&&(m+=4);let g=null;"font"===this.design.type&&(g=document.querySelector("#dragFont"+this.design.uuid)),document.onmousemove=r=>{this.resizing=!0;const o=this.design.style.left,h=this.design.style.top,d=this.design.style.width,p=this.design.style.height;let v=(r.clientX-t.clientX)/this.scale/f["DPI"],b=(r.clientY-t.clientY)/this.scale/f["DPI"];1==m?[v,b]=[b,-v]:2==m?[v,b]=[-v,-b]:3==m&&([v,b]=[-b,v]);const y={x:(v*u.x+b*u.y)*u.x,y:(v*u.x+b*u.y)*u.y},_={x:l.x+y.x,y:l.y+y.y};if(this.$store.commit("editor/setMousePosition",{x:_.x*f["DPI"],y:_.y*f["DPI"]}),this.applyPointBack(e,_,c,i,s),this.design.style.width<1&&(this.design.style.width=d,this.design.style.left=o),this.design.style.height<1&&(this.design.style.height=p,this.design.style.top=h),2===e.length&&"font"===this.design.type)this.design.style.fontSize=this.design.style.width/i*n,this.design.style.lineHeight=this.design.style.width/i*a;else if(1===e.length&&"font"===this.design.type&&g){const t=Object(O["a"])(this.design.style.fontSize).mm2px(),e=t>12?1:t/12;this.design.style.height=g.clientHeight*e/f["DPI"]}const x={width:this.design.style.width*f["DPI"],height:this.design.style.height*f["DPI"],x:this.design.style.left*f["DPI"],y:this.design.style.top*f["DPI"],style:{}};x.style.width=this.design.style.width,x.style.height=this.design.style.height,x.style.left=this.design.style.left,x.style.top=this.design.style.top,this.design.style.fontSize&&(x.style.fontSize=this.design.style.fontSize),this.design.style.lineHeight&&(x.style.lineHeight=this.design.style.lineHeight),this.$store.commit("editor/updateTargetDesign",x)},document.onmouseup=t=>{this.adjustSize(),this.resizing=!1,this.design.style.width=this.design.style.width,this.design.style.height=this.design.style.height,this.design.style.left=this.design.style.left,this.design.style.top=this.design.style.top,this.$store.commit("editor/setShowSizeTip",!1),this.$store.dispatch("saveIsOpt",!1),this.$store.commit("increaseProjectVersion"),this.$store.commit("increaseCanvasVersion",this.isInside),document.onmousedown=null,document.onmousemove=null}},adjustSize(){let{bg:t,style:e}=this.design,i=t.x,s=t.y,n=t.height,a=t.width,r=e.width,o=e.height,{bg_scale:l,oldBg:c}=this;if(i>0&&(this.design.bg.x=0),i<r-a&&(this.design.bg.x=r-a),s>0&&(this.design.bg.y=0),s<o-n&&(this.design.bg.y=o-n),t.width<e.width){let i=c.height/c.width;t.width=e.width,t.height=i*t.width,t.x=0,t.y=0}if(t.height<e.height){let i=c.width/c.height;t.height=e.height,t.width=i*t.height,t.x=0,t.y=0}this.calc_bg_scale()},applyPointBack(t,e,i,s,n){const a=(e.x+i.x)/2,r=(e.y+i.y)/2,o=Object(A["b"])(e.x,e.y,a,r,-this.design.style.rotate),l=Object(A["b"])(i.x,i.y,a,r,-this.design.style.rotate);2===t.length?"nw"===t?(this.design.style.width=l.x-o.x,this.design.style.height=l.y-o.y,this.design.style.left=o.x,this.design.style.top=o.y):"ne"===t?(this.design.style.width=-l.x+o.x,this.design.style.height=l.y-o.y,this.design.style.left=l.x,this.design.style.top=o.y):"se"===t?(this.design.style.width=-l.x+o.x,this.design.style.height=-l.y+o.y,this.design.style.left=l.x,this.design.style.top=l.y):"sw"===t&&(this.design.style.width=l.x-o.x,this.design.style.height=-l.y+o.y,this.design.style.left=o.x,this.design.style.top=l.y):"n"===t?(this.design.style.height=l.y-o.y,this.design.style.left=o.x-s/2,this.design.style.top=o.y):"e"===t?(this.design.style.width=o.x-l.x,this.design.style.left=l.x,this.design.style.top=l.y-n/2):"s"===t?(this.design.style.height=o.y-l.y,this.design.style.left=l.x-s/2,this.design.style.top=l.y):"w"===t&&(this.design.style.width=l.x-o.x,this.design.style.left=o.x,this.design.style.top=o.y-n/2)}}),watch:{tailoringUUID:function(t){t&&(this.oldBg=Object.assign({},this.targetDesign.bg),this.oldStyle=Object.assign({},this.targetDesign.style))}}},Q=X,Z=(i("0061"),Object(y["a"])(Q,L,P,!1,null,"14f1748a",null)),K=Z.exports,J={name:"dragsvg",components:{TabPicker:w,imagesg:l["default"],fontsg:o["default"],barcodesg:c["default"],qrcodesg:h["default"],tablesg:d["default"],svggroup:u["default"],SingleControl:D,tailorControl:K},props:{tdata:{type:Object},flag:{type:Number},lines:{type:Array},materials:{type:Array},inGroup:{type:Boolean}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapGetters"])("editor",["designData"])),Object(r["mapState"])(["scale","spaceKeyDown","isInside"])),Object(r["mapState"])("editor",["showPositionTip","targetDesign","targetDesigns","loadingCutout","currentFace","currentCutoutUUID","showCutoutTab","adsorbInstance","tailoringUUID"])),{},{transformRotate(){const t=this.tdata.style.rotateX?-1:1,e=this.tdata.style.rotateY?-1:1;return`scale(${t},${e})`},tactive(){return this.targetDesigns.filter(t=>t.uuid==this.tdata.uuid).length>0},isTable(){return 1===this.targetDesigns.length&&"table"===this.targetDesigns[0].type},outline(){const t={outlineWidth:1.2/this.scale+"px",outlineColor:"#ff610d",outlineStyle:"none"};return this.targetDesign?(this.targetDesign.uuid===this.tdata.uuid?t.outlineStyle="solid":this.isOver&&(t.outlineStyle="dashed"),t):t},isImageAndNotSvg(){let{type:t,src:e}=this.tdata;return"img"===t&&!/\.svg$/.test(e)}}),data(){return{isOver:!1,loading:!1,lineArr:[],totalFills:[],materialLoaded:!1,is_svg:!1,sizeTip:{x:0,y:0},tabs:[{title:"取消",value:"cancel",color:"rgba(0,0,0, 65%)",disabled:!1},{title:"完成",value:"ok",color:"#ff610d",disabled:!1}]}},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapMutations"])("editor",["setHighLines","clearHighLines"])),Object(r["mapActions"])("editor",["setTailoringUUID"])),{},{refresh(t,e){if(e!==this.tdata.uuid){const i=this.$refs[e+"Ref"];i.length>0&&i[0].refresh&&i[0].refresh(t,e)}else this.$refs.nodeRef&&this.$refs.nodeRef.refresh&&this.$refs.nodeRef.refresh(t)},handleMaterialLoaded(t){this.materialLoaded=!0;const e=this.$root.projectData.insideDesignData.some(e=>e.uuid===t.uuid);e?this.$store.commit("render/decreaseInsideMaterialPending",t.uuid):this.$store.commit("render/decreaseOutsideMaterialPending",t.uuid)},materialMouseOver(t){if(this.tactive)return;const e=t.path&&t.path.find(t=>t.id==="svgDrag2"+this.tdata.uuid)||t.target;if(!e)return;this.isOver=!0;const i=e.getBoundingClientRect();this.showPositionTip||("font"===this.tdata.type?i.text="双击修改文字":"table"===this.tdata.type?i.text="双击编辑表格":i.text=""),this.$store.dispatch("saveMaterialTip",i).then(()=>{this.$store.dispatch("saveShowMaterialTip",!0)})},materialMouseOut(t){this.isOver=!1,("font"!==this.tdata.type||this.showPositionTip)&&("table"!==this.tdata.type||this.showPositionTip)||this.$store.dispatch("saveShowMaterialTip",!1)},backData(){this.$store.dispatch("saveIsOpt",!1),setTimeout(()=>{this.$store.commit("increaseCanvasVersion",this.isInside)},1e3),this.$store.commit("increaseProjectVersion")},updateData(){Object(p["a"])(this.tdata,this.$root.knifeData.totalX,this.$root.knifeData.totalY)},handleDblclick(){this.inGroup&&(this.$parent.isGroupEditing||this.$parent.group.locked||(this.$store.dispatch("editor/saveTargetDesigns",[this.tdata]),this.$store.commit("editor/changeGroup",this.$parent.group)))},async mouseDown(t){if(!this.inGroup||this.$parent.isGroupEditing){if(this.inGroup?this.$store.commit("editor/changeGroup",this.$parent.group):this.$store.commit("editor/changeGroup",null),0!=t.button)return this.rightMouseDown(t);if(this.spaceKeyDown||(t.stopPropagation(),document.body.style.cursor="move"),this.tdata)if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.tdata.locked)return;const t=[...this.targetDesigns,this.tdata];0===this.targetDesigns.filter(t=>t.uuid===this.tdata.uuid).length&&this.$store.dispatch("editor/saveTargetDesigns",t)}else{if(this.$store.dispatch("editor/saveTargetDesigns",[this.tdata]),this.tdata.locked)return document.body.style.cursor="default",this.$message.error("该对象被锁定");if(!this.inGroup&&0===t.button){this.tailoringUUID!=this.tdata.uuid&&this.setTailoringUUID(""),this.$store.dispatch("saveIsOpt",!0),this.$store.commit("editor/setShowPositionTip",!0);let e=this.tdata.style.left,i=this.tdata.style.top;this.adsorbInstance.set({scale:this.scale,isInside:this.isInside,rotate:this.$root.projectData.rotate,envDesigns:this.designData.filter(t=>t.uuid!=this.tdata.uuid),movingDesigns:[this.tdata],guideLines:this.lines}),document.onmousemove=this.moveThrottle(t.clientX,t.clientY),document.onmouseup=()=>{this.clearHighLines(),this.$store.commit("editor/setShowPositionTip",!1),this.spaceKeyDown||(document.body.style.cursor="default"),e===this.tdata.style.left&&i===this.tdata.style.top||(this.updateData(),this.backData()),this.inGroup&&this.$parent.$emit("resize"),document.onmousemove=null,document.onmousedown=null,document.onmouseup=null}}}}},moveThrottle(t,e){return _.throttle(i=>{let s=this.adsorbInstance.calc(i.clientX-t,i.clientY-e);return this.tdata.style.left=s.x,this.tdata.style.top=s.y,s.highlines&&s.highlines.length?this.setHighLines(s.highlines):this.clearHighLines(),!1},5)},rightMouseDown(t){if(2!==t.button)return;t.stopPropagation();const e=[],i=this.isInside?this.$root.projectData.insideDesignData:this.$root.projectData.designData;let s=!1;i.map(i=>{const n=document.getElementById("svgDrag2"+i.uuid);if(n){const a=n.getBoundingClientRect();Object(p["e"])(t,a)&&(e.push(i),this.targetDesign&&this.targetDesign.uuid===i.uuid&&(s=!0))}}),this.$store.commit("editor/setPotentialDesigns",e.reverse()),s||this.$store.dispatch("editor/saveTargetDesigns",[e[0]])},handleContextMenu(t){this.$store.dispatch("editor/saveTargetDesigns",[this.tdata]),this.$store.commit("editor/changeGroup",this.$parent.group),this.$bus.$emit("show-design-menu",{event:t,design:this.tdata})},handleCutout(t){this.handleCutoutChoice("ok"===t.value)},handleCutoutChoice(t){if(!this.tdata||this.currentCutoutUUID!=this.tdata.uuid)return;const e=this.isInside?this.$root.projectData.insideDesignData:this.$root.projectData.designData,i=e.find(t=>t.uuid===this.tdata.uuid);i&&this.currentCutoutUUID&&(t?(delete i.originSrc,i.isCutout=!0,this.$store.commit("editor/setCurrentCutoutUUID",null)):(i.src=i.originSrc||i.src,i.isCutout=!1,delete i.originSrc,this.$store.commit("editor/setLoadingCutout",!1),this.$store.commit("editor/setCurrentCutoutUUID",null)),this.$store.commit("editor/setShowCutoutTab",!1))}}),watch:{loadingCutout(t){this.tdata&&this.tdata.uuid==this.currentCutoutUUID&&(this.tabs[1].disabled=!!t,this.targetDesign&&this.targetDesign.uuid==this.tdata.uuid||this.handleCutoutChoice(!0))}}},tt=J,et=(i("6610"),Object(y["a"])(tt,s,n,!1,null,null,null));e["default"]=et.exports},b13d:function(t,e,i){},b16f:function(t,e,i){var s=i("4ab1"),n=i("6d8b"),a=i("4942"),r=i("41ef");function o(t,e){s.call(this,t,e,["linearGradient","radialGradient"],"__gradient_in_use__")}n.inherits(o,s),o.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var i=this;n.each(["fill","stroke"],(function(s){if(e.style[s]&&("linear"===e.style[s].type||"radial"===e.style[s].type)){var n,a=e.style[s],r=i.getDefs(!0);a._dom?(n=a._dom,r.contains(a._dom)||i.addDom(n)):n=i.add(a),i.markUsed(e);var o=n.getAttribute("id");t.setAttribute(s,"url(#"+o+")")}}))}},o.prototype.add=function(t){var e;if("linear"===t.type)e=this.createElement("linearGradient");else{if("radial"!==t.type)return a("Illegal gradient type."),null;e=this.createElement("radialGradient")}return t.id=t.id||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-gradient-"+t.id),this.updateDom(t,e),this.addDom(e),e},o.prototype.update=function(t){var e=this;s.prototype.update.call(this,t,(function(){var i=t.type,s=t._dom.tagName;"linear"===i&&"linearGradient"===s||"radial"===i&&"radialGradient"===s?e.updateDom(t,t._dom):(e.removeDom(t),e.add(t))}))},o.prototype.updateDom=function(t,e){if("linear"===t.type)e.setAttribute("x1",t.x),e.setAttribute("y1",t.y),e.setAttribute("x2",t.x2),e.setAttribute("y2",t.y2);else{if("radial"!==t.type)return void a("Illegal gradient type.");e.setAttribute("cx",t.x),e.setAttribute("cy",t.y),e.setAttribute("r",t.r)}t.global?e.setAttribute("gradientUnits","userSpaceOnUse"):e.setAttribute("gradientUnits","objectBoundingBox"),e.innerHTML="";for(var i=t.colorStops,s=0,n=i.length;s<n;++s){var o=this.createElement("stop");o.setAttribute("offset",100*i[s].offset+"%");var l=i[s].color;if(l.indexOf(!1)){var c=r.parse(l)[3],h=r.toHex(l);o.setAttribute("stop-color","#"+h),o.setAttribute("stop-opacity",c)}else o.setAttribute("stop-color",i[s].color);e.appendChild(o)}t._dom=e},o.prototype.markUsed=function(t){if(t.style){var e=t.style.fill;e&&e._dom&&s.prototype.markUsed.call(this,e._dom),e=t.style.stroke,e&&e._dom&&s.prototype.markUsed.call(this,e._dom)}};var l=o;t.exports=l},b17b:function(t,e,i){},b1d4:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-popover",{attrs:{placement:"topRight",overlayClassName:"tip-render-guide"}},[s("template",{slot:"content"},[s("div",{staticClass:"tip-fake-render"},[s("div",{staticClass:"fo-14"},[t._v("构图辅助线")]),s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"guide-item"},[s("div",{class:"guide-item-rect "+(0===t.VALUE?"guide-item-rect--active":""),on:{click:function(e){return t.changeValue(0)}}},[s("div",{staticClass:"flex flex-end "},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.VALUE,expression:"VALUE === 0"}],staticClass:"check-icon flex flex-center item-center"},[s("a-icon",{staticStyle:{color:"#fff","font-size":"10px",transform:"scale(0.7,0.7)"},attrs:{type:"check"}})],1)])]),s("div",{staticClass:" fo-14 mt-8 text-center"},[t._v("无")])]),s("div",{staticClass:"guide-item"},[s("div",{class:"guide-item-rect "+(1===t.VALUE?"guide-item-rect--active":""),on:{click:function(e){return t.changeValue(1)}}},[s("div",{staticClass:"flex flex-end ",staticStyle:{height:"1px"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:1===t.VALUE,expression:"VALUE === 1"}],staticClass:"check-icon flex flex-center item-center"},[s("a-icon",{staticStyle:{color:"#fff","font-size":"10px",transform:"scale(0.7,0.7)"},attrs:{type:"check"}})],1)]),s("div",{staticClass:"line1"}),s("div",{staticClass:"line2"})]),s("div",{staticClass:"fo-14 mt-8 text-center"},[t._v("九宫格")])]),s("div",{staticClass:"guide-item"},[s("div",{class:"guide-item-rect "+(2===t.VALUE?"guide-item-rect--active":""),on:{click:function(e){return t.changeValue(2)}}},[s("div",{staticClass:"flex flex-end ",staticStyle:{height:"1px"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:2===t.VALUE,expression:"VALUE === 2"}],staticClass:"check-icon flex flex-center item-center"},[s("a-icon",{staticStyle:{color:"#fff","font-size":"10px",transform:"scale(0.7,0.7)"},attrs:{type:"check"}})],1)]),s("div",{staticClass:"line3"}),s("div",{staticClass:"line4"})]),s("div",{staticClass:" fo-14 mt-8 text-center"},[t._v("黄金分割")])])])])]),s("div",{staticClass:"flex flex-center item-center guide"},[s("img",{attrs:{src:i("39f3"),width:"18px"}})])],2)},n=[],a={props:["value"],model:{prop:"value",event:"change"},data(){return{VALUE:this.value}},watch:{value(t){this.VALUE=t}},methods:{changeValue(t){this.VALUE=t,this.$emit("change",t)}}},r=a,o=(i("347e"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,null,null);e["default"]=l.exports},b1d8:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=i("aab3"),a=c(n),r=i("752b"),o=c(r),l=i("dca2");function c(t){return t&&t.__esModule?t:{default:t}}function h(t){if("string"===typeof t)return d(t);if(Array.isArray(t)){for(var e=[],i=0;i<t.length;i++)e.push(h(t[i]));return e}if("undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLImageElement)return u(t);if(t&&t.nodeName&&"svg"===t.nodeName.toLowerCase()||"undefined"!==typeof SVGElement&&t instanceof SVGElement)return{element:t,options:(0,a.default)(t),renderer:o.default.SVGRenderer};if("undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement)return{element:t,options:(0,a.default)(t),renderer:o.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:o.default.CanvasRenderer};if(t&&"object"===("undefined"===typeof t?"undefined":s(t))&&!t.nodeName)return{element:t,renderer:o.default.ObjectRenderer};throw new l.InvalidElementException}function d(t){var e=document.querySelectorAll(t);if(0!==e.length){for(var i=[],s=0;s<e.length;s++)i.push(h(e[s]));return i}}function u(t){var e=document.createElement("canvas");return{element:e,options:(0,a.default)(t),renderer:o.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}}e.default=h},b1dc:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"render-light",style:{height:t.height+"px"}},[s("scrollbar",{attrs:{maxHeight:t.height+"px"}},[s("div",{staticClass:"p-20"},[s("a-button",{attrs:{icon:"plus",block:""},on:{click:t.addLight}},[t._v("添加灯光")]),s("div",{staticClass:"pfow mt-24"},[t._v("光照模版")]),s("div",{staticClass:"flex flex-between flex-wrap"},[t._l(t.tpList,(function(e,i){return s("div",{key:i,staticClass:"light-item ",on:{click:function(i){return t.chooseLight(e)}}},[s("div",{staticClass:"img",style:{backgroundImage:"url("+t.thumbImg(e.example_image,104,78,90)+")"}}),s("div",{staticClass:"text"},[t._v(t._s(e.title))])])})),s("a-popover",{attrs:{trigger:"hover",placement:"rightTop",overlayClassName:"render-bg-item-pop"}},[s("template",{slot:"content"},[s("div",{staticClass:"flex flex-between item-center"},[s("div",{staticClass:"pfow"},[t._v("我的光照模板")]),s("div",{staticClass:"fo-12 fo-gray pr-12"},[t._v(t._s(t.tpList2.length)+" / 10")])]),s("a-button",{staticClass:" mt-12 ",staticStyle:{width:"216px"},attrs:{type:"primary",block:"",loading:t.tpLoading},on:{click:t.setIntotmp}},[t._v("当前光照设置为模板")]),s("scrollbar",{attrs:{maxHeight:258},on:{reachBottom:function(e){return t.getTempMode(!0,"2")}}},[s("div",{staticClass:"flex flex-start flex-wrap"},t._l(t.tpList2,(function(e,n){return s("div",{key:n,staticClass:"light-item mr-8",on:{click:function(i){return t.chooseLight(e)}}},[s("div",{staticClass:"img",style:{backgroundImage:"url("+t.bgl+")"}},[s("div",{staticClass:"del-btn flex flex-center item-center",on:{click:function(i){return i.stopPropagation(),t.delTpMode(e.id)}}},[s("img",{attrs:{src:i("87dd")}})])]),s("div",{staticClass:"flex flex-between item-center"},[s("div",{staticClass:"text ell"},[t._v(t._s(e.title))]),s("img",{staticClass:"kll mt-8",attrs:{src:i("1bf0")},on:{click:function(e){return t.showText(n)}}})])])})),0),t.tpList2.length>0&&t.tpList2.length>=t.tpcount2?s("div",{staticClass:"mt-12 fo-12 fo-gray text-center"},[t._v(" 没有更多了 ")]):t._e(),0===t.tpList2.length?s("div",{staticClass:"text-center mt-40"},[s("img",{attrs:{src:i("e597"),width:"155px"}}),s("div",{staticClass:"fo-12 fo-gray mt-16"},[t._v("您还没有灯光模板哦~")])]):t._e()])],1),s("div",{staticClass:"light-item "},[s("div",{staticClass:"img  flex flex-center item-center fo-14 fo-gray"},[t._v("我的")])])],2)],2)],1)]),s("a-modal",{attrs:{title:"修改模板名称",footer:null,zIndex:5e3,width:300},model:{value:t.showTmpTitle,callback:function(e){t.showTmpTitle=e},expression:"showTmpTitle"}},[s("a-input",{model:{value:t.tmpName,callback:function(e){t.tmpName=e},expression:"tmpName"}}),s("a-button",{staticClass:"mt-16",attrs:{type:"primary",block:"",loading:t.uploading},on:{click:t.uptmp}},[t._v("提交修改")])],1)],1)},n=[],a=i("365c"),r=i("ed08"),o=i("d7ea"),l=i.n(o),c={props:{height:{type:Number}},data(){return{bgl:l.a,tpQuery:{current:1,pageSize:7,publish_type:"official",template_type:"shine"},tpList:[],tpList2:[],tpQuery2:{current:1,pageSize:10,publish_type:"my",template_type:"shine"},tpLoading:!1,tpcount:0,tpcount2:0,tmpName:"",tmpId:"",showTmpTitle:!1,uploading:!1}},mounted(){this.getTempMode(!1,""),this.getTempMode(!1,"2"),this.$bus.$on("finishAddTmp",()=>{this.tpLoading=!1,this.getTempMode(!1,"2")})},beforeDestroy(){this.$bus.$off("finishAddTmp")},methods:{thumbImg:r["F"],chooseLight(t){this.$bus.$emit("chooseLightMode",{light:t.d3_params.scene.light,envLight:t.d3_params.scene.envLight,lights:t.d3_params.scene.lights})},uptmp(){this.uploading=!0,Object(a["delRenderTemp"])({template_id:this.tmpId,title:this.tmpName}).then(t=>{this.uploading=!1,200===t.code&&(this.showTmpTitle=!1,this.$message.success("修改成功"),this.getTempMode(!1,"2"))})},showText(t){this.tmpName=this.tpList2[t].title,this.tmpId=this.tpList2[t].id,this.showTmpTitle=!0},setIntotmp(){this.$confirm({title:"确定将当前灯光设为你的灯光模板！",okText:"确定",okType:"primary",cancelText:"取消",zIndex:4005,centered:!0,onOk:async()=>{this.tpLoading=!0,this.$bus.$emit("setLightIntoMode")}})},addLight(){this.$bus.$emit("renderAddLight")},delTpMode(t){this.$confirm({title:"删除后数据无法恢复，是否要继续删除?",okText:"删除",okType:"danger",cancelText:"取消",centered:!0,zIndex:4005,onOk:()=>{Object(a["delRenderTemp"])({status:0,template_id:t}).then(t=>{200===t.code&&(this.$message.success("删除成功"),this.getTempMode(!1,"2"))})}})},getTempMode(t,e){t&&this["tpcount"+e]>0&&this["tpcount"+e]<=this["tpList"+e].length||(t?this["tpQuery"+e].current+=1:this["tpQuery"+e].current=1,Object(a["getRenderTemp"])(this["tpQuery"+e]).then(i=>{200==i.code&&(this["tpList"+e]=t?this["tpList"+e].concat(i.data):i.data,this["tpcount"+e]=i.total)}))}}},h=c,d=(i("595b"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,null,null);e["default"]=u.exports},b202:function(t,e,i){},b21f:function(t,e,i){"use strict";i.r(e);i("1276");var s=i("750b"),n=i("ed08");i("7dec");e["default"]=Object(s["b"])({props:{specialId:{type:String,default:null},value:{default:""},unit:{type:String,default:""},placeholder:{type:String,default:""},suffix:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:99999999},disabled:{type:Boolean,default:!1},customStyle:{type:[Object,Object],default:()=>({})}},setup(t,e){const i=Object(s["j"])(`${t.value} ${t.unit}`);Object(s["k"])(()=>t.value,()=>{i.value=`${t.value} ${t.unit}`});const a=s=>{const{min:a,max:r}=t;s=Object(n["H"])(s).target,s=s<a?a:s>r?r:s,e.emit("confirm",""+s),i.value=s+" "+t.unit};return()=>Object(s["c"])("a-input",{attrs:{id:t.specialId,value:i.value,disabled:t.disabled,placeholder:t.placeholder,suffix:t.suffix},on:{click:()=>{i.value=i.value.split(" ")[0]},focus:()=>{i.value=i.value.split(" ")[0],e.emit("focus")},change:t=>{i.value=t.target.value},pressEnter:t=>{a(t.target.value)},blur:t=>{a(t.target.value.split(" ")[0]),e.emit("blur")}},style:t.customStyle},[t.slot?Object(s["c"])("span",{slot:"suffix"},[t.slot]):""])}})},b2ac:function(t,e,i){"use strict";var s=i("4e31"),n=i.n(s);n.a},b2ee:function(t,e,i){"use strict";var s=i("5c17"),n=i.n(s);n.a},b308:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"materialRef",staticClass:"element-qrcode-wrap",style:{width:t.data.style.width+"mm",height:t.data.style.height+"mm",opacity:(t.data.style.opacity||100)/100},on:{dblclick:function(e){return e.stopPropagation(),t.$bus.$emit("setting-qrcode/showEdit")},mousedown:function(e){return t.$emit("mousedown",e)}}},[t.data.qricon?i("img",{staticClass:"qricon",attrs:{src:t.data.qricon,alt:""}}):t._e(),i("img",{class:"qrcodeNode_"+t.data.uuid,staticStyle:{width:"100%",height:"100%","pointer-events":"none"},attrs:{id:"qrcodeNode_"+t.data.uuid,src:t.qrcodeContent}})])},n=[],a=i("be4e"),r=i.n(a),o=i("6796"),l={mixins:[o["a"]],data(){return{qrcodeContent:null}},props:{data:{type:Object,default:Object},color:{type:String,default:""}},mounted(){this.drawCode(),this.$emit("loaded")},methods:{refresh(){this.drawCode()},drawCode(){const t=this.data.fills||[];let e=null,i=null;e=t.filter(t=>"background"===t.class)[0]||{},i=this.color?{color:this.color}:t.filter(t=>"foreground"===t.class)[0]||{};const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.classList.add("barcodeNode_"+this.data.uuid);const n=new r.a({content:this.data.value,ecl:"M",padding:1,join:!0,background:e.color||"#ffffff",color:i.color||"#000000"}).svg();this.qrcodeContent="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(n))),this.$emit("material-loaded")}},watch:{data:{handler(){this.refresh()},deep:!0}}},c=l,h=(i("cea1"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,"e2912f3a",null);e["default"]=d.exports},b30c:function(t,e,i){},b35b:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADEElEQVRYR82XTWhUZxSG3/ebjFFbwT8iSm1JwY2FquCiIIi6iaIV2kKgQV1LxmSaoHPHhTAUwRlqnNyZ3MFZubDtopAEsb9uRFd2Z6BUN+IfVI34B/47974yE6OTSWfuHUcm3u13vvM+5/3OPd+9xAw/nGF9vL8AicQvs27fu/y9oF0QllZzikQB4nUBVwhdNoa/ZdKxUZIK4m5VByLRVFKSFSRJZQyBMRMKHcim9530218VoDua/K9W5X6Ji+vGmN6hwVi2Vmx1gN5kmYUUiVMQxiuSzQHVJuAjCJ9OF+ILEw59PjSw92LVI6y20F0GQPIvx7Y216qkp39gjecWDknqKI8jOejYVl9jAOBxJ2Pt8rM9kcjPHb93/zykFZOxJP527PgXTQEoinRHUw6k7teC5IWcba1sGsCeaPKQJ8TfOFD7+AI1IQMeQVE0Ek39Wd4HJA46dvxAQw6A+DFnx3f69UBP3w9fuq53AlCpMJJPWtDabtvf3WoIgODVEMw2Mny7PJEx+uC5CktAdzk8dErcDig8IY7nhOkasmPD72AO+NU+dZ3EWROilT1infPbGagH/JJUvPdPBBwzNMPZ9N7TfnfCOweYAkv+0WrCO9Lp/ruN9QBREPAzZCpHMQw1W8BiSYtJrpU0vwLinw3r2ld3dna6/wcR1IGTuUx8u99RFK/wOw+udriem59ykRG7c3Y8/9YA9cyB0izoS34ml2OAQhOiPJ3LWJuaBlCC6E2eF7BqQp/Xc7b1cXMBoskRCV+V9MFnTsaa3TSAfD4fHvv3/iVIy18NpWuOHf+kEYCfnIy1w68Ji+uxWGreo2c6KqFrMp7EqGPHv24E4KYJmZ3Gm/ZFhAIwh3QXCmap5G2ksEXAonKxkOE32UFrpC6ASG/qqaDWIFXXnPXk745tba17EEWiyTMS1jcCQPJXLfjw21wi8rBugJ7+gVWuWzgFqa0+CL4AdMYYOtl07MRb3wWld3n/0CI+ftgBYlk1CE/GBTVuYG60wLvR0mKuHT6871FQ6Pf31yxoBY3GzbgDLwHxy00wLSywLQAAAABJRU5ErkJggg=="},b3ba:function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("d1fe"),a=i("4794");i("33503");e["default"]=Object(s["b"])({props:{list:{type:[Object,Array],default:()=>[]},hide3d:{type:Boolean,default:!1},width:{type:Number,default:1e3},minWidth:{type:String,default:"1000px"},loading:{type:Boolean,default:!1},showFree:{type:Boolean,default:!1},actionOnLeave:{type:Boolean,default:!1}},setup(t){const e=["3D","2D"],i=Object(s["j"])("3D"),r=Object(s["a"])(()=>(t.width-80)/5);return()=>Object(s["c"])("a-spin",{attrs:{spinning:t.loading}},[Object(s["c"])("div",{class:"list-wrapper",style:{minWidth:t.minWidth}},[t.hide3d?"":Object(s["c"])("div",[Object(s["c"])("div",{class:"flex item-center content-container float-right"},[e.map((t,e)=>Object(s["c"])("div",{class:"content "+(t===i.value?"active":""),key:e,on:{click:()=>{i.value=t}}},[t]))]),Object(s["c"])("div",{class:"clearfix"})]),Object(s["c"])("div",{class:"mode-list flex flex-wrap item-center",style:{minWidth:t.minWidth}},[t.list.length?t.list.map(e=>Object(s["c"])("div",{class:"mode-item",key:e.id},[Object(s["c"])(n["default"],{attrs:{actionOnLeave:t.actionOnLeave,showFree:t.showFree,mode:e,is3d:"3D"===i.value,width:r.value+"px"}})])):Object(s["c"])(a["a"])])])])}})},b3cb:function(t,e,i){"use strict";var s=i("d68e"),n=i.n(s);n.a},b430:function(t,e,i){"use strict";var s=i("f1b6"),n=i.n(s);n.a},b46a:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:"editor-order__container "+(t.visible&&"editor-order__container--open"),style:{height:t.height+"px"}},[s("div",{staticClass:"p-16 bg-white"},[s("div",{staticClass:"flex flex-between"},[s("div",{staticClass:"fo-16 bold-600"},[t._v("印品选择")]),s("img",{staticClass:"pointer",attrs:{src:i("729c")},on:{click:function(e){t.visible=!1}}})]),s("div",{staticClass:"flex flex-between item-center mt-24"},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"fo-14 bold-600 editor-order__container__text"},[t._v("面积：")]),s("div",{staticClass:"fo-14 ml-16"},[t._v(t._s((parseInt(t.price.area)/100/100/100).toFixed(1))+"m²")])])]),s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"fo-14 bold-600 editor-order__container__text"},[t._v("纸张：")]),s("div",{staticClass:"fo-14 ml-16"},[s("bxhselect",{attrs:{value:t.$root.projectData.science_id,options:t.science,label:"science_name",prop:"id",width:168,req:!1},on:{change:t.scienceChange}})],1)]),s("div",{staticClass:"fo-info pointer fo-12"},[t._v("材质介绍")])]),s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"fo-14 bold-600 editor-order__container__text"},[t._v("工艺：")]),s("div",{staticClass:"fo-14 ml-16"},[s("bxhselect",{attrs:{value:t.$root.projectData.membrane_id,options:t.membrane,label:"science_name",prop:"id",width:230},on:{change:t.membraneChange}})],1)])]),t._m(0),t._m(1),s("div",{staticClass:"flex flex-start item-end mt-24"},[s("div",{staticClass:"fo-14 bold-600 editor-order__container__text"},[t._v("价格")]),s("div",{staticClass:"ml-16 fo-24 bold",staticStyle:{"line-height":"24px"}},[s("span",{staticClass:"fo-gray"},[t._v("￥")]),t._v(" "+t._s(t.price.totalPrice)+" ")]),s("div",{staticClass:"ml-8"},[t.discount>0?s("div",{staticClass:"editor-order__container__discount"},[t._v(t._s(t.discount)+"折")]):t._e(),s("div",{staticClass:"fo-12 fo-gray editor-order__container__line"},[t._v(" ￥"+t._s((parseFloat(t.price.originPrice)*t.num).toFixed(2))+" ")])])]),s("div",{staticClass:"flex flex-start item-end mt-24"},[t._m(2),s("div",{staticClass:"editor-order__container__order ml-16",on:{click:t.checkOrder}},[t._v(" 确认下单 ")])]),s("div",{staticClass:"fo-12 fo-gray mt-12 text-center mb-24"},[t._v(" 下单即代表您知晓印刷须知 ")])]),s("div",{staticClass:"p-16"},[s("div",{staticClass:"fo-14 mb-16 bold-600"},[t._v("印刷信息")]),s("div",{staticClass:"fo-12 fo-gray lh-20"},[t._v(" 尺寸：L "+t._s(t.$root.projectData.length||0)+"mm / "+t._s(t.$root.projectData.width||0)+"mm / "+t._s(t.$root.projectData.height||0)+"mm ")]),s("div",{staticClass:"fo-12 fo-gray lh-20"},[t._v("工期：1-3工作日发货")]),s("div",{staticClass:"fo-12 fo-gray lh-20"},[t._v("快递：全国包邮")])])])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex flex-between item-center mt-12"},[i("div",{staticClass:"flex flex-start item-center"},[i("div",{staticClass:"fo-14 bold-600 editor-order__container__text"},[t._v("数量")]),i("div",{staticClass:"fo-14 ml-16"})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex flex-between item-center mt-12"},[i("div",{staticClass:"flex flex-start item-center"},[i("div",{staticClass:"fo-14 bold-600 editor-order__container__text"}),i("div",{staticClass:"fo-12 ml-16 fo-theme"},[t._v("数量越多折扣力度越大")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"editor-order__container__concat flex flex-center item-center"},[s("img",{attrs:{src:i("5727")}})])}],a=(i("b680"),i("5880"),i("5a4f")),r={components:{bxhselect:a["a"]},props:{value:{type:Boolean,require:!0,default:!1},load:{type:Boolean,default:!1}},model:{prop:"value",event:"change"},watch:{value(t){this.visible=t,t&&this.calculate()},visible(t){this.$emit("change",t)},load(t){t&&this.initCanvas()}},data(){return{visible:this.value,height:window.innerHeight-52,imgsFlag:0,science:[],science_id:"",membrane:[],num:100,price:{totalPrice:"0.00",originPrice:"0.00",totalDiscount:"0.00",area:"0.00"},discount:0}},mounted(){this.resize()},methods:{resize(){window.onresize=()=>{this.height=window.innerHeight-52}},initCanvas(){let t=document.getElementById("orderCanvas");t.width=220,t.height=220;let e=t.getContext("2d"),i=1;i=this.$root.knifeData.totalWidth>this.$root.knifeData.totalLength?t.width/this.$root.knifeData.totalWidth:t.height/this.$root.knifeData.totalLength,e.scale(i,i),this.drawCutline(e),this.drawFoldline(e)},calculate(){this.$api.material.calculate({project_id:this.$root.projectData.id,num:this.num}).then(t=>{t&&(this.price=t.data,this.discount=(parseFloat(t.data.totalPrice)/(parseFloat(t.data.originPrice)*this.num)*10).toFixed(1))})},scienceChange(t){this.$root.projectData.science_id=t,this.visible&&this.calculate()},membraneChange(t){this.$root.projectData.membrane_id=t,this.visible&&this.calculate()},numChange(t){this.calculate()},checkOrder(){this.$router.push({path:"/orders",query:{id:this.$root.projectData.id,num:this.num}})},drawCutline(t){t.beginPath(),t.strokeStyle="red";let e=this.$root.knifeData.cutLineData;for(let i in e)this.filterSvgPath(t,e[i]);t.stroke()},drawFoldline(t){let e=this.$root.knifeData.foldLine;for(let i in e)t.beginPath(),t.strokeStyle="lime",t.moveTo(e[i].x1,e[i].y1),t.lineTo(e[i].x2,e[i].y2),t.closePath(),t.stroke()},drawHoles(t){let e=this.$root.knifeData.holes;for(let i in e){t.beginPath(),t.strokeStyle="red";for(let s in e[i])this.filterSvgPath(t,e[i][s]);t.stroke()}},filterSvgPath(t,e){switch(e.mtd){case"M":t.moveTo(e.x,e.y);break;case"L":t.lineTo(e.x,e.y);break;case"Q":t.quadraticCurveTo(e.cx,e.cy,e.x,e.y);break;case"Z":t.closePath();break}}}},o=r,l=(i("4140"),i("2877")),c=Object(l["a"])(o,s,n,!1,null,null,null);e["default"]=c.exports},b4df:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isWorld?t._e():[s("div",{staticClass:"mb-16"},[s("a-button",{attrs:{block:""},on:{click:t.goBack}},[t._v(" 返回全部面 ")])],1)],t.isWorld?[s("div",{staticClass:"flex items-center flex-between mb-18"},[s("div",{staticClass:"title"},[t._v(" 尺寸和材质 "),s("a-tooltip",[s("a-icon",{staticClass:"icon",style:{color:"rgba(0,0,0, 0.45)"},attrs:{type:"info-circle"}}),s("template",{slot:"title"},[s("div",[t._v("盒型代码："+t._s(t.cate_no))]),s("div",[t._v("展开尺寸："+t._s(t.descObj.full))])])],2)],1),s("a",{staticClass:"fo-active-theme",on:{click:t.onEdit}},[t._v(" 编辑 ")])]),s("div",{staticClass:"flex items-center flex-between mb-18"},[s("div",{staticClass:"title"},[t._v("制造尺寸：")]),s("div",{staticClass:"text-content"},[t._v(" "+t._s(t.descObj.short)+" ")])]),s("div",{staticClass:"flex items-center flex-between mb-18"},[s("div",{staticClass:"title"},[t._v("材质：")]),s("div",{staticClass:"text-content"},[s("img",{staticClass:"image mx-8",attrs:{src:t.science_image}}),t._v(" "+t._s(t.science_name)+" ")])])]:t._e(),s("div",{staticClass:"title"},[t._v("背景颜色")]),s("div",{staticClass:"mt-16"},[s("div",{staticClass:"flex"},[s("Pallet",{attrs:{size:"mini",cmyk:t.bg.cmyk,value:t.bg.rgba||""},on:{confirm:t.onPalletPickColor}}),s("img",{staticClass:"opacity ml-12 text-pointer",attrs:{src:i("e0c1"),alt:""},on:{click:function(e){return t.onChooseColor()}}})],1),s("div",{staticClass:"my-16 line"}),s("div",{staticClass:"flex flex-start flex-wrap"},t._l(t.colors,(function(e,i){return s("div",{key:i,staticClass:"color-content text-pointer mb-8",style:{background:e},on:{click:function(i){return t.onChooseColor(e)}}})})),0)]),t.isWorld?[s("div",{staticClass:"line mb-24 mt-16"}),s("div",{staticClass:"surface"},[s("div",{staticClass:"title"},[t._v("表面处理")]),s("div",{staticClass:"flex items-center flex-start mtb-18"},[s("div",{staticClass:"title mt-8 mr-10"},[t._v("工艺")]),s("div",{staticClass:"text-content"},[s("a-select",{staticStyle:{width:"120px"},attrs:{value:t.cur_membrane_id},on:{change:t.onChooseMembrane}},t._l(t.surfaceScienceList,(function(e,i){return s("a-select-option",{key:i,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)])])]:t._e()],2)},n=[],a=i("5530"),r=i("6116"),o=i("5880"),l=i("7018"),c={components:{Pallet:l["a"]},props:{bg:{type:[Object,Object],default:()=>({rgba:"rgba(0,0,0,1)",cmyk:""})},isWorld:{type:Boolean,default:!1}},data(){return{colors:["rgba(255,24,24,1)","rgba(255,97,13,1)","rgba(255,180,32,1)","rgba(109,212,0,1)","rgba(25,204,129,1)","rgba(253,25,94,1)","rgba(38,107,255,1)","rgba(50,197,255,1)","rgba(0,0,0,1)","rgba(255,255,255,1)"],surfaceScienceList:[]}},computed:Object(a["a"])(Object(a["a"])({},Object(o["mapState"])(["isInside"])),{},{cate_no(){return this.$root.projectData.cate.cate_no},descObj(){const{size_option:t,cate:{size_options:e}}=this.$root.projectData;let i=e.find(e=>e.sizeName==t);return i?{short:i.shortDesc+" "+i.unit,full:i.fullDesc}:{short:"",full:""}},science_name(){return this.$root.projectData.science_name},science_image(){let t=this.$root.projectData.science_image;return Object(r["C"])(t,64,64)},cur_membrane_id(){return this.$root.projectData.membrane_id||35}}),mounted(){this.fetchSurfaceSciences().then(t=>{this.surfaceScienceList=t})},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(o["mapActions"])("property",["fetchSurfaceSciences"])),Object(o["mapActions"])(["increaseMaterialVersion","saveForceCreate"])),Object(o["mapMutations"])(["increaseCanvasVersion","increaseProjectVersion"])),{},{onPalletPickColor(t){this.$emit("confirm",t)},onChooseColor(t){t?this.$emit("confirm",{rgba:t,cmyk:""}):this.$emit("confirm",{rgba:"",cmyk:""})},onChooseMembrane(t){const e=this.surfaceScienceList.find(e=>e.id===t);this.$root.projectData.membrane_name=e.science_name,this.$root.projectData.membrane_id=e.id,this.increaseMaterialVersion(this.isInside),this.increaseCanvasVersion(this.isInside),this.increaseProjectVersion()},onEdit(){this.$emit("open")},goBack(){this.$store.commit("editor/toggleCurrentFace",null)}})},h=c,d=(i("12de"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,"484ea13c",null);e["default"]=u.exports},b532:function(t,e,i){"use strict";var s=i("11ad"),n=i.n(s);n.a},b547:function(t,e,i){},b566:function(t,e,i){"use strict";var s=i("709c"),n=i.n(s);n.a},b586:function(t,e,i){},b593:function(t,e,i){"use strict";i.r(e);i("ddb0");var s=i("750b"),n=i("12f2"),a=i("44c4"),r=i("04d3"),o=i("3ccf"),l=i("365c"),c=i("f4b1"),h=i("ed08");i("af90");e["default"]=Object(s["b"])({setup(t,e){const{data:i}=Object(o["c"])(l["getBusinessConfig"]),[d]=Object(o["b"])(l["accountLogin"]),u=Object(s["j"])(0),p=Object(s["j"])(0),f=Object(s["j"])(0),m=Object(s["j"])(0),g=Object(s["j"])(!1),v=Object(s["i"])({mobileNumber:"",verifyCode:""}),b=()=>{window.open("https://www.wenjuan.com/s/67FRRzV/")},y=()=>{let t="";v.mobileNumber?v.verifyCode?Object(h["u"])(v.mobileNumber)||(t="手机号格式有误"):t="请输入验证码":t="请输入手机号",t?e.root.$message.error(t):d({variables:v,update(t){const{redirect:e}=t;window.location.href=e}})};return Object(s["f"])(()=>{const t=e.refs.video.play();t&&t.catch(()=>{e.refs.video.muted=!0,e.refs.video.play()})}),Object(s["k"])(()=>i.value,()=>{var t,e;i.value&&Object(h["y"])([...null===(t=i.value)||void 0===t?void 0:t.data.navMenus.map(t=>t.img),...null===(e=i.value)||void 0===e?void 0:e.data.featureList.map(t=>t.icon)])}),()=>{var t,o,l,h,d,_,x,w,C;return Object(s["c"])("div",{class:"business-wrapper"},[Object(s["c"])(n["default"]),Object(s["c"])("div",{class:"flex item-center main-frame flex-center",style:{backgroundImage:`url(${null===(t=i.value)||void 0===t?void 0:t.data.banner})`,backgroundPosition:"center",backgroundAttachment:"fixed",backgroundSize:"cover",backgroundRepeat:"no-repeat"}},[Object(s["c"])("div",{class:"left-container"},[Object(s["c"])("div",{class:"h1"},["随时随地快速搭建属于商家的智慧包装设计平台"]),Object(s["c"])("p",{class:"mt-30"},["包小盒通过运用云计算、人工智能、自动化、物联网等先进技术，助力包装印刷行业商家企业推动数字化转型，进而开展由内而外的智慧工业4.0转型。"]),Object(s["c"])("a-button",{class:"mt-70 lucency-btn",attrs:{size:"large"},on:{click:()=>b()}},["免费试用"])]),Object(s["c"])("div",{class:"login-container"},[Object(s["c"])("div",{class:"login-title"},["欢迎登录包小盒商家后台"]),Object(s["c"])("a-input",{class:"mt-40",attrs:{placeholder:"输入手机号"},on:{change:t=>v.mobileNumber=t.target.value}}),Object(s["c"])("div",{class:"flex item-center flex-between mt-20"},[Object(s["c"])("a-input",{attrs:{placeholder:"输入验证码"},style:"width:190px",on:{change:t=>v.verifyCode=t.target.value}}),Object(s["c"])(a["a"],{attrs:{mobile:v.mobileNumber,isLogin:!0},on:{change:t=>m.value=t,error:t=>e.root.$message.error(t),disable:t=>g.value=t}},[Object(s["c"])("a-button",{attrs:{disabled:g.value},class:"get-code"},[g.value?m.value+"秒后获取":"获取验证码"])])]),Object(s["c"])("div",{class:"flex item-center flex-between mt-10"},[Object(s["c"])("span",["没有收到验证码？"]),Object(s["c"])("span",{class:"theme text-pointer",on:{click:()=>{window.open("/")}}},["查看帮助"])]),Object(s["c"])("div",{class:"mt-40"},[Object(s["c"])(r["default"],{on:{click:y}},["登录"])])])]),Object(s["c"])("div",{class:"flex item-center flex-center feature-list"},[Object(s["c"])("div",{class:"bg-white wrapper"},[Object(s["c"])("div",{class:"sub-title"},["在线3D包装印刷设计系统解决方案"]),Object(s["c"])("div",{class:"flex mt-80"},[Object(s["c"])("div",{class:"left"},[Object(s["c"])("div",{class:"topic-item active",style:{transform:`translate(0,${100*u.value}%)`}}),null===(o=i.value)||void 0===o?void 0:o.data.featureList.map((t,e)=>Object(s["c"])("div",{class:"topic-item text-pointer "+(u.value===e?"topic-item-active":""),on:{click:()=>u.value=e}},[Object(s["c"])("div",{class:"flex item-center"},[Object(s["c"])("i",{class:"iconfont",domProps:{innerHTML:t.icon}}),Object(s["c"])("div",{class:"content"},[Object(s["c"])("div",{class:"topic-title"},[t.title]),Object(s["c"])("div",{class:"topic-desc"},[t.desc])])])]))]),Object(s["c"])("div",{class:"right"},[Object(s["c"])("video",{ref:"video",attrs:{src:null===(l=i.value)||void 0===l?void 0:l.data.featureList[u.value].video,muted:!0,autoplay:"autoplay",loop:"loop",preload:"auto","webkit-playinline":!0,playsinline:!0}},[Object(s["c"])("source",{attrs:{src:null===(h=i.value)||void 0===h?void 0:h.data.featureList[u.value].video,type:"video/mp4"}})])])]),Object(s["c"])("div",{class:"btn-wrapper"},[Object(s["c"])(r["default"],{on:{click:()=>b()}},["免费试用"])])])]),Object(s["c"])("div",{class:"flex flex-center item-center solution",style:{backgroundImage:"url(//yun.baoxiaohe.com/user-materials/e9b25d22-eba2-45d2-901c-05555814dab5.jpg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}},[Object(s["c"])("div",{class:"wrapper"},[Object(s["c"])("div",{class:"sub-title",style:{color:"#fff"}},["包小盒解决了哪些问题"]),Object(s["c"])("div",{class:"mt-80"},[Object(s["c"])("div",{class:"flex item-center mt-80"},[Object(s["c"])("div",{class:"left"},[Object(s["c"])("div",{class:"topic-item bg-active",style:{transform:`translate(0,${100*p.value}%)`}}),null===(d=i.value)||void 0===d?void 0:d.data.solutions.map((t,e)=>Object(s["c"])("div",{class:"topic-item text-pointer p-20 "+(p.value===e?"active":""),on:{click:()=>p.value=e}},[Object(s["c"])("div",{class:"flex item-start"},[Object(s["c"])("div",{class:"content"},[Object(s["c"])("div",{class:"topic-title"},[e+1," ",t.title]),Object(s["c"])("div",{class:"topic-desc py-10"},[t.title]),Object(s["c"])("div",{class:"topic-sm-desc"},[t.desc])])])]))]),Object(s["c"])("div",{class:"right"},[Object(s["c"])("img",{attrs:{src:null===(_=i.value)||void 0===_?void 0:_.data.solutions[p.value].image,alt:""}})])]),Object(s["c"])("div",{class:"btn-wrapper"},[Object(s["c"])(r["default"],{on:{click:()=>b()}},["免费试用"])])])])]),Object(s["c"])("div",{class:"banner-wrapper",style:{backgroundSize:"cover",backgroundPosition:"center",background:"url(//yun.baoxiaohe.com/user-materials/440a2265-ea7c-4ba2-813a-94e9ab4ffdcc.jpg)",backgroundRepeat:"no-repeat"}},[Object(s["c"])("div",{class:"wrapper"},[Object(s["c"])("strong",{class:"theme"},["一站式企业服务，与你一起成长"]),Object(s["c"])("div",{class:"sub-title mt-20"},["更专业 更可靠"]),Object(s["c"])("div",{class:"mt-80 flex item-center"},[null===(x=i.value)||void 0===x?void 0:x.data.professional.map((t,e)=>Object(s["c"])("div",{class:"styleCard text-center flex item-center flex-center "+(f.value===e?"active":""),on:{mousemove:()=>{f.value=e}},style:{background:`url(${t.image}) center`}},[Object(s["c"])("div",{class:"mask-card"}),Object(s["c"])("div",[Object(s["c"])("div",{class:"title"},[t.title]),Object(s["c"])("div",{class:"desc",directives:[{name:"show",value:f.value===e}]},[t.desc])])]))]),Object(s["c"])("div",{class:"btn-wrapper"},[Object(s["c"])(r["default"],{on:{click:()=>b()}},["免费试用"])])])]),Object(s["c"])("div",{class:"start-wrapper"},[Object(s["c"])("div",{class:"wrapper"},[Object(s["c"])("div",{class:"theme"},["准备好打造智慧包装印刷企业"]),Object(s["c"])("div",{class:"sub-title mt-20"},["您的数字转型之旅从这里起步！"]),Object(s["c"])("div",{class:"flex item-center flex-between nav-list"},[null===(w=i.value)||void 0===w?void 0:w.data.navMenus.map((t,e)=>Object(s["c"])("div",{class:"nav-item",key:e},[Object(s["c"])("img",{attrs:{src:t.img,alt:""}}),Object(s["c"])("div",{class:"title mt-20"},[t.title]),Object(s["c"])("div",{class:"desc mt-30"},[t.desc])]))]),Object(s["c"])("div",{class:"btn-wrapper"},[Object(s["c"])(r["default"],{on:{click:()=>b()}},["免费试用"])])])]),Object(s["c"])("div",{class:"bg-gray business-wrapper"},[Object(s["c"])("div",{class:"wrapper"},[Object(s["c"])("div",{class:"sub-title"},["商家版开通指南"]),Object(s["c"])("img",{attrs:{src:null===(C=i.value)||void 0===C?void 0:C.data.startPc,alt:""},class:"business mt-80"}),Object(s["c"])("div",{class:"btn-wrapper"},[Object(s["c"])(r["default"],{on:{click:()=>b()}},["免费试用"])])])]),Object(s["c"])(c["default"],{attrs:{theme:"dark"}})])}}})},b6e5:function(t,e,i){},b74a:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-popover",{attrs:{trigger:"click",placement:"topRight","overlay-class-name":"ant-no-padding"},on:{visibleChange:t.onAvatarVisibleChange},model:{value:t.showAvatarPopover,callback:function(e){t.showAvatarPopover=e},expression:"showAvatarPopover"}},[s("template",{slot:"content"},[t.features.leftSide__avatar.includes("my-designs")?s("div",{staticClass:"menu-item",on:{click:function(e){return t.goLink("/admin/design")}}},[s("img",{attrs:{src:i("ec03")}}),s("div",{staticClass:"fo-14 ml-12"},[t._v("设计方案")])]):t._e(),t.features.leftSide__avatar.includes("mycollect")?s("div",{staticClass:"menu-item",on:{click:function(e){return t.goLink("/mycollect")}}},[s("img",{attrs:{src:i("fd43")}}),s("div",{staticClass:"fo-14 ml-12"},[t._v("收藏夹")])]):t._e(),t.features.leftSide__avatar.includes("orders")?s("div",{staticClass:"menu-item",on:{click:function(e){return t.goLink("/orders")}}},[s("img",{attrs:{src:i("0f11")}}),s("div",{staticClass:"fo-14 ml-12"},[t._v("订单与发票")])]):t._e(),t.features.leftSide__avatar.includes("personalcenter")?s("div",{staticClass:"menu-item",on:{click:function(e){return t.goLink("/account/users")}}},[s("img",{attrs:{src:i("2fbb")}}),s("div",{staticClass:"fo-14 ml-12"},[t._v("账号设置")])]):t._e(),t.features.leftSide__avatar.includes("logout")?s("a-divider",{staticClass:"my-1"}):t._e(),t.features.leftSide__avatar.includes("logout")?s("div",{staticClass:"menu-item",on:{click:t.onLogout}},[s("img",{attrs:{src:i("f8fc")}}),s("div",{staticClass:"fo-14 ml-12"},[t._v("退出登录")])]):t._e()],1),t.accessToken?s("div",{staticClass:"left-side-menu__avatar"},[t.enterprise_user_info.avatarUrl?s("img",{attrs:{src:t.enterprise_user_info.avatarUrl}}):t._e(),t.enterprise_user_info.avatarUrl?t._e():s("img",{attrs:{src:i("131e")}}),s("div",{staticStyle:{height:"1px"}},[t.isVip?s("img",{staticClass:"avatar-flag",attrs:{src:i("37dd")}}):t._e(),t.isVip?t._e():s("img",{staticClass:"avatar-flag",attrs:{src:i("d79b")}})]),s("div",{staticClass:"text"},[t._v("我的")])]):t._e(),t.accessToken?t._e():s("div",{staticClass:"left-side-menu__avatar"},[s("img",{class:"avatar--no",attrs:{src:i("131e")}}),s("div",{staticClass:"text"},[t._v("登录")])])],2)},n=[],a=i("5530"),r=i("5880"),o=i("9393"),l=i("f856"),c={mixins:[o["a"]],data(){return{showAvatarPopover:!1}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("enterprise",["isCompanyDomain","enterprise_user_info"])),Object(r["mapState"])("profile",["user","accessToken"])),{},{features(){return this.isCompanyDomain?l["a"].enterprise:l["a"].www},isVip(){return this.enterprise_user_info.isVip}}),methods:{onLogout(){this.$store.dispatch("profile/logout","/")},showLoginDialog(){this.$store.commit("profile/SET_SHOW_LOGIN_MODAL",!0)},onAvatarVisibleChange(t){this.accessToken||(this.showAvatarPopover=!1,this.showLoginDialog())},goLink(t){window.open(t,"_blank")}}},h=c,d=(i("f295"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,"17b793d2",null);e["default"]=u.exports},b79e:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"high-light-line-wrap",style:{left:t.data.x+"mm",top:t.data.y+"mm",width:t.width,height:t.height,transform:"scale(1,"+(t.scale>1?1/t.scale:1)+")"}})},n=[],a={props:{data:{required:!0,type:Object},scale:{required:!0,type:Number}},computed:{width(){const{width:t}=this.data;return 0===t?Math.ceil(1/this.scale)+"px":t+"mm"},height(){const{height:t}=this.data;return 0===t?Math.ceil(1/this.scale)+"px":t+"mm"}}},r=a,o=(i("98b77"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"5bb47b20",null);e["default"]=l.exports},b7d1:function(t,e,i){(function(e){function i(t,e){if(s("noDeprecation"))return t;var i=!1;function n(){if(!i){if(s("throwDeprecation"))throw new Error(e);s("traceDeprecation"),i=!0}return t.apply(this,arguments)}return n}function s(t){try{if(!e.localStorage)return!1}catch(_){return!1}var i=e.localStorage[t];return null!=i&&"true"===String(i).toLowerCase()}t.exports=i}).call(this,i("c8ba"))},b8cd:function(t,e,i){"use strict";var s=i("632a"),n=i.n(s);n.a},b8df:function(t,e,i){const s=i("6cfe"),n=i("262e8"),a=i("5ab7");t.exports={defaultOptions:s,getCreateFFmpegCore:n,fetchFile:a}},b8f0:function(t,e,i){t.exports=i.p+"editor-assets/img/ang5-w.df426ead.svg"},b911:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["line-guide-wrap",{"type-x":"x"==t.data.type,"type-y":"y"==t.data.type}],style:{left:t.data.x+"mm",top:t.data.y+"mm"},on:{mousedown:function(e){return t.listenGuideLineMouseDown(e)}}},["x"==t.data.type?i("span",{staticClass:"show-tip"},[t._v(" Y:"+t._s(Math.round(t.data.y*t.$root.constant.DPI))+" px ")]):i("span",{staticClass:"show-tip"},[t._v(" X:"+t._s(Math.round(t.data.x*t.$root.constant.DPI))+" px")])])},n=[],a=i("60bb"),r=i.n(a),o={props:{data:{required:!0,type:Object}},methods:{listenGuideLineMouseDown(t){t.stopPropagation(),this.$store.commit("editor-v2/set_enable_local_history",!1);const{x:e,y:i,type:s}=this.data;document.onmousemove=this.moveThrottle(e,i,s,t.clientX,t.clientY),document.onmouseup=()=>{this.$store.commit("editor-v2/set_enable_local_history",!0),document.onmousedown=null,document.onmousemove=null,document.onmouseup=null}},moveThrottle(t,e,i,s,n){return r.a.throttle(a=>{const{DPI:r}=this.$root.constant;let o="",l="";"x"==i?(o="y",l=e+(a.clientY-n)/r):(o="x",l=t+(a.clientX-s)/r),this.$emit("callback",o,l)},5)}}},l=o,c=(i("ea4b"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,"db030f2a",null);e["default"]=h.exports},b91b:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-spin",{attrs:{spinning:t.globalLoading}},[s("div",{ref:"galleryRef",staticClass:"editor-gallery"},[s("div",{staticClass:"px-8"},[s("div",{staticClass:"flex item-center"},[t.isSearch?s("a-icon",{staticClass:"mr-10",attrs:{type:"left"},on:{click:t.refreshSearch}}):t._e(),s("div",{staticClass:"gallery-search flex item-center px-12 pr-8"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"fo-14",attrs:{type:"text",placeholder:"输入素材关键字"},domProps:{value:t.keyword},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch(e)},input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),s("img",{staticClass:"ml-auto",attrs:{src:i("bb14")},on:{click:t.handleSearch}})])],1),t.isSearch?t._e():s("div",{staticClass:"tags-group flex mt-16"},t._l(t.tags,(function(e,i){return s("div",{key:i,class:"tags-group__tags fo-14 "+(i===t.tagsFlag&&"tags-group--active"),on:{click:function(e){return t.changeTags(i)}}},[t._v(" "+t._s(e)+" ")])})),0),s("div",{staticClass:"line mt-16"}),!t.isCurrent||t.tagsFlag||t.isSearch?t._e():s("div",{staticClass:"gallery-simple"},[s("div",{staticClass:"icon-list mt-10"},[s("div",{staticClass:"flex item-center flex-between"},[s("div",{staticClass:"left flex item-center text-pointer",on:{click:function(e){t.current=null}}},[s("a-icon",{staticStyle:{width:"6px",height:"6px",color:"#abafb6","margin-bottom":"6px"},attrs:{type:"left"}}),s("div",{staticClass:"title ml-8 mt-2"},[t._v(t._s(t.currentTarget.name))])],1),t.showAllBtn?s("div",{staticClass:"right flex item-center text-pointer",on:{click:function(e){t.showAll=!t.showAll}}},[s("div",{staticClass:"more fo-12"},[t._v(" "+t._s(t.category[t.cateCurrent]?t.category[t.cateCurrent].name:"全部")+" ")]),s("img",{style:"width:12px;height:12px; "+(t.showAll?"transform: rotate(180deg)":""),attrs:{src:i("2d41"),alt:""}})]):t._e()]),s("transition",{attrs:{name:"fade"}},[t.showAll?s("div",{staticClass:"scene-list scene-tab"},[s("Category",{attrs:{current:t.cateCurrent,category:t.category},on:{change:t.changeSubcate}})],1):t._e()])],1)])]),t.isCurrent||t.isSearch||t.tagsFlag?t._e():s("scrollbar",{attrs:{"max-height":t.sceneHeight}},[s("div",{staticClass:"page-simples px-12"},t._l(t.templates,(function(e,n){return s("div",{key:n,staticClass:"scene-container mt-10"},[s("div",{staticClass:"scene-content flex item-center flex-between"},[s("div",{staticClass:"scene-title fo-14"},[t._v(" "+t._s(e.name)+" ")]),s("div",{staticClass:"more fo-12 text-pointer",on:{click:function(e){return t.handleCurrent(n)}}},[s("span",[t._v("更多")]),s("a-icon",{staticClass:"fo-12",attrs:{type:"right"}})],1)]),s("div",{staticClass:"flex flex-wrap w-256 search-results flex-between"},t._l(e.materials,(function(e,a){return s("div",{key:a,staticClass:"gallery-content-ov mb-8"},[s("div",{staticClass:"gallery-content-ov-panel flex flex-end"},[s("div",{staticClass:"rect flex flex-center item-center",on:{click:function(e){return t.selectedToCollection(n,a)}}},[e.is_liked?s("img",{attrs:{src:i("f46f")}}):s("img",{attrs:{src:i("d9e2")}})])]),s("div",{staticClass:"gallery-content__image"},[s("resizeable",{attrs:{item:e,index:a,width:80,"id-prefix":"galleryItem"},on:{mousedown:function(i){return t.imgMove(i,e)}}})],1)])})),0)])})),0)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isCurrent||t.isSearch||t.tagsFlag,expression:"isCurrent || isSearch || tagsFlag"}],ref:"galleryContent",staticClass:"gallery-content mt-16",style:{height:t.contentHeight+"px",scrollbarWidth:"thin"},attrs:{id:"galleryContent"}},[t.isEmpty?s("div",{staticClass:"no-data"},[s("Nodata")],1):s("div",{staticClass:"pl-8"},[!t.isCurrent||t.tagsFlag||t.isSearch?t._e():s("div",{ref:"sceneList",staticClass:"scene-list mb-16"},[s("Category",{attrs:{current:t.cateCurrent,category:t.category},on:{change:t.changeSubcate}})],1),s("div",{staticClass:"flex flex-wrap w-256 search-results"},t._l(t.materials,(function(e,n){return s("div",{key:n,staticClass:"gallery-content-ov mb-8 mr-6"},[s("div",{staticClass:"gallery-content-ov-panel flex flex-end"},[s("div",{staticClass:"rect flex flex-center item-center",on:{click:function(e){return t.selectedToCollection(n)}}},[t.tagsFlag||e.is_liked?s("img",{attrs:{src:i("f46f")}}):s("img",{attrs:{src:i("d9e2")}})])]),s("div",{staticClass:"gallery-content__image"},[s("resizeable",{attrs:{item:e,index:n,width:80,"id-prefix":"galleryItem"},on:{mousedown:function(i){return t.imgMove(i,e)}}})],1)])})),0),s("div",{directives:[{name:"show",rawName:"v-show",value:t.simpleLoading,expression:"simpleLoading"}],staticClass:"text-center my-16"},[s("a-spin",{staticClass:"text-center"},[s("a-icon",{staticClass:"spin-icon-load",attrs:{type:"loading",size:"20",color:"#FF6634"}})],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.noMore,expression:"noMore"}],staticClass:"text-center fo-12 fo-gray"},[t._v("没有更多了")])])])],1)])},n=[],a=(i("ddb0"),i("5530")),r=i("5880"),o=i("26a1"),l=i("1b67"),c=i("4794"),h=i("c64e"),d=i.n(h),u=i("a998"),p=i("4f88"),f=i("365c"),m={components:{Resizeable:u["default"],Nodata:c["a"],Category:p["default"]},props:{load:{type:Boolean,default:!1}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])(["scale"])),Object(r["mapState"])("material",{globalLoading:"loading",templates:"templates",materials:"materials",category:"category",noMore:"noMore",tagsFlag:"tagsFlag"})),Object(r["mapState"])("profile",["user"])),Object(r["mapGetters"])("material",["isEmpty","simpleLoading"])),{},{height(){return 500},isCurrent(){return"number"===typeof this.current},currentTarget(){return this.isCurrent?this.templates[this.current]:{}},contentHeight(){const t=this.isSearch?90:0;return window.innerHeight+t-220},sceneHeight(){return window.innerHeight-170}}),data(){return{tags:["全部素材","我的收藏"],topCates:[],topCatesFlag:-1,locked:!1,search:!1,cateCurrent:-1,isSearch:!1,subCates:[],keyword:"",timeout:null,current:null,showAll:!1,showTagsAll:!1,visibleShowTagsAll:!1,refresh:0,showAllBtn:!1,query:{currentPage:1,pageSize:30,file_type:"image",keyword:"",top_cate:"",sub_cate:""},queryCount:100,cateQuery:{currentPage:1,pageSize:10,type:"image",top_cate:"",count:""},imgData:[],loading:!0,nextLoading:!1,tempImg:null,tempShow:!0,rotate:0,layer:{}}},mounted(){this.listenGallery(),this.fetchAllFilesAndCates()},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapMutations"])("material",[l["b"],l["c"],l["a"],l["d"],l["e"]])),Object(r["mapActions"])("material",["fetchAllFilesAndCates","fetchCategories","fetchMaterials","fetchMaterialsMore"])),{},{handleReachBottom(){},handleCurrent(t){this.current=t,this.$refs.galleryContent.scrollTop=0,this.cateCurrent=-1,this.fetchCategories(this.currentTarget.id),this[l["b"]]({current:1,top_cate:this.currentTarget.id,sub_cate:"",keyword:""}),this.fetchMaterials(!0)},selectedToCollection(t,e){const i="number"===typeof e?this.templates[t].materials[e]:this.materials[t];this.$api.material.collectAdd({type:1,type_id:i.id||i.file_id}).then(i=>{i&&(this.tagsFlag?this[l["e"]](t):("number"===typeof e?this[l["d"]]({index:t,indd:e}):this[l["a"]](t),this.$message.success(i.errmsg)))})},async init(){this.listenGallery(),this.cateQuery.top_cate=null,await this.getCate(),this.query.top_cate=this.topCates[0].id,this.cateQuery.top_cate=this.topCates[0].id,await this.getCate(this.topCates[0].id),await this.getImgList()},imgMove(t,e){var i,s;const n=null===(i=t.target.children[0])||void 0===i?void 0:i.getBoundingClientRect();if(!n)return!1;if(0!==t.button)return!1;this.tempShow=!0,this.tempImg=e.file_path;const a=document.getElementById("galleryItem"+e.id),r=null===(s=t.target)||void 0===s?void 0:s.getBoundingClientRect();if(!r)return;const l=t.clientX,c=t.clientY;a.style.position="fixed",a.style.left=r.x+"px",a.style.top=r.y+"px",a.style.zIndex=1e4;const h=r.x,u=r.y;document.onmousemove=t=>{const e=t.clientX-l,i=t.clientY-c;return a.style.left=h+e+"px",a.style.top=u+i+"px",!1},document.onmouseup=i=>{var s,r;const l=null===(s=i.target.querySelector("img"))||void 0===s?void 0:s.getBoundingClientRect();if(!Object(o["b"])(i,t,this.$refs.galleryRef))return a.style.position="static",a.style.zIndex="auto",document.onmousemove=null,void(document.onmouseup=null);this.$track({category:"AdoptMaterial",action:"click",label:""});const c=null===(r=document.getElementById("svgContainer"))||void 0===r?void 0:r.getBoundingClientRect(),h=d()(),u={type:"img",src:e.file_path,id:e.id,uuid:h,can_set_color:e.can_set_color||0,style:{position:"absolute",top:50,left:100,width:n.width/f["DPI"]/this.scale,height:n.height/f["DPI"]/this.scale,rotate:360-this.$root.projectData.rotate||0,opacity:100},bg:{x:0,y:0,width:n.width/f["DPI"]/this.scale,height:n.height/f["DPI"]/this.scale}},p=(l.x-c.x)/this.scale-189,m=(l.y-c.y)/this.scale-189;[u.style.left,u.style.top]=Object(o["c"])(this.$root.projectData.rotate,p/f["DPI"],m/f["DPI"],u.style.width,u.style.height,this.$root.knifeData.totalX,this.$root.knifeData.totalY),Object(o["d"])(i,t)&&(delete u.style.left,delete u.style.top),this.$store.dispatch("editor/setEditorTempMaterial",u),this.$store.commit("increaseCanvasVersion",!0),this.$store.commit("increaseCanvasVersion",!1),a.style.position="static",a.style.zIndex="auto",document.onmousemove=null,document.onmouseup=null}},handleLoad(){this.queryCount>this.imgData.length&&(this.query.currentPage+=1,this.getImgList())},shouldShowAllBtn(t){var e;const i=null===(e=this.$refs.sceneList)||void 0===e?void 0:e.getBoundingClientRect();i&&(t.target.scrollTop>i.height?this.showAllBtn=!0:(this.showAllBtn=!1,this.showAll=!1))},listenGallery(){const t=document.getElementById("galleryContent");t&&(t.onscroll=t=>{this.shouldShowAllBtn(t),t.target.clientHeight+t.target.scrollTop>=t.target.scrollHeight-1&&this.fetchMaterialsMore()})},async changeTopcate(t){this.topCatesFlag=t,this.query.top_cate=this.topCates[t].id,this.cateQuery.pageSize=10,this.query.sub_cate="",this.query.currentPage=1,await this.getCate(this.topCates[t].id),await this.getImgList()},async changeSubcate(t){const e=this.category[t];this.$refs.galleryContent.scrollTop=0,this.cateCurrent=t,-1===t?this[l["b"]]({top_cate:this.currentTarget.id,sub_cate:"",current:1}):this[l["b"]]({top_cate:"",sub_cate:e.id,current:1}),this.fetchMaterials(!0)},imageResize(t){},changeTags(t){this[l["c"]](t),this[l["b"]]({top_cate:"",sub_cate:"",current:1}),this.fetchMaterials(!0)},refreshSearch(){this.keyword="",this.handleSearch()},handleSearch(){this.isSearch=!!this.keyword,this.$refs.galleryContent.scrollTop=0,this[l["b"]]({current:1,top_cate:"",sub_cate:"",keyword:this.keyword}),this.fetchMaterials(!0)},searchInput(t){this[l["b"]]({keyword:t.target.value})},async getCate(t){t?(this.cateQuery.top_cate!==t&&(this.cateQuery.currentPage=1),this.cateQuery.top_cate=t):this.cateQuery.currentPage=1;const e=await this.$api.material.getGalleryCateList(this.cateQuery);if(e)if(t){if(1===this.cateQuery.currentPage)this.subCates=e.data.data;else{const t=[...this.subCates,...e.data.data];this.$nextTick(()=>{this.subCates=t})}this.cateQuery.count=e.data.count}else this.topCates=e.data.data},async getImgList(){this.locked=!0,1===this.query.currentPage?this.loading=!0:this.nextLoading=!0;const t=this.tagsFlag?this.$api.collection.list:this.$api.material.list;try{const e=await t(this.query);e&&(this.tagsFlag&&e.data.data.forEach(t=>{t.selected=!0}),1===this.query.currentPage?this.imgData=e.data.data:this.imgData=this.imgData.concat(e.data.data),this.queryCount=e.data.count),1===this.query.currentPage?this.loading=!1:this.nextLoading=!1}finally{this.locked=!1}}})},g=m,v=(i("79b2"),i("2877")),b=Object(v["a"])(g,s,n,!1,null,null,null);e["default"]=b.exports},b92a:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div")},n=[],a=i("2877"),r={},o=Object(a["a"])(r,s,n,!1,null,null,null);e["default"]=o.exports},b937:function(t,e,i){t.exports=i.p+"editor-assets/img/more.fb534483.svg"},b95a:function(t,e,i){t.exports=i.p+"editor-assets/img/toutiao.3d5ed11b.svg"},b9b5:function(t,e,i){"use strict";var s=i("9d8a").codes.ERR_INVALID_OPT_VALUE;function n(t,e,i){return null!=t.highWaterMark?t.highWaterMark:e?t[i]:null}function a(t,e,i,a){var r=n(e,a,i);if(null!=r){if(!isFinite(r)||Math.floor(r)!==r||r<0){var o=a?i:"highWaterMark";throw new s(o,r)}return Math.floor(r)}return t.objectMode?16:16384}t.exports={getHighWaterMark:a}},b9b6:function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("ca9b"),a=i("f4b1"),r=(i("fda5"),i("4364")),o=i("eda1"),l=i("1060");e["default"]=Object(s["b"])({data(){return this.pageMd5=Object(l["b"])(),{loading:!1,data:null,images:[]}},computed:{projectId(){return this.$route.query.project_id},count(){return this.$route.query.count}},async mounted(){this.initData(),this.loadImages()},methods:{async initData(){this.loading=!0;try{const{data:t}=await this.$api2.calculateProductOrder({project_id:this.projectId,count:this.count});this.data=t}catch(t){}finally{this.loading=!1}},async loadImages(){try{const t=await this.$api.project.image({project_id:this.projectId,type:2,currentPage:1,pageSize:1});this.images=t.data}catch(t){}}},render(){const t=arguments[0];return t("a-spin",{attrs:{spinning:this.loading}},[t(n["default"]),t(o["default"],[null!==this.data&&t(r["default"],{attrs:{data:this.data,images:this.images,projectId:this.projectId,count:Number(this.count),pageMd5:this.pageMd5}})]),t(a["default"])])}})},b9c1:function(t,e,i){"use strict";i.r(e);var s=i("750b");i("945a");e["default"]=Object(s["b"])({props:{active:{type:Boolean,default:!1},type:{type:String,default:""}},setup(t,e){const i=Object(s["a"])(()=>{let e="noselect template-btn";return"text"!==t.type&&t.type,"box-bg"===t.type&&(e+=" nomal-background"),t.active&&(e+=" tempalte-btn-active",e+="text"===t.type?"":" template-bg-active"),e});return()=>Object(s["c"])("div",{class:""+i.value,on:{click:()=>e.emit("click")}},[Object(s["c"])("div",{class:"flex item-center flex-center"},[Object.keys(e.slots).map(t=>e.slots[t]())])])}})},b9fb:function(t,e,i){},ba27:function(t,e,i){"use strict";i.r(e);i("1276"),i("ddb0");var s=i("5530"),n=i("750b"),a=i("04df"),r=i("ed08"),o=i("ad6d9"),l=i("a7fd"),c=i("a828"),h=i("9ecc"),d=i("3b15"),u=i("365c");i("2790");const p={NS:"ns-resize",EW:"ew-resize",NESW:"nesw-resize",NWSE:"nwse-resize"};e["default"]=Object(n["b"])({props:{options:{type:Object,default:()=>({})},textEditable:{type:Boolean,default:!1}},setup(t,e){const i=Object(n["j"])(null),c=Object(n["j"])(!1),h=Object(n["j"])(!0),d=Object(n["j"])(!1),f=Object(n["j"])(!1),m=Object(n["j"])(!1),g=Object(n["i"])({x:0,y:0}),v=Object(n["i"])({x:100,y:100}),b=Object(n["i"])({header:"",sider:""}),y=Object(n["i"])({x:1,y:1,width:100,height:100}),_=e.vuex.mapState(["scale"]),x=e.vuex.mapState("editor",["targetDesigns"]),w=e.vuex.mapState("table",["columns","rows","selected"]),C=e.vuex.mapMutations("editor",[o["a"],"addToUuidTable"]),k=e.vuex.mapMutations("table",[l["a"],l["c"],l["e"],l["b"],l["d"]]),S=Object(n["a"])(()=>t.options.style);Object(n["k"])(()=>t.options.style.borderRadius,()=>{f.value=!0,I()},{lazy:!0}),Object(n["k"])(()=>x.targetDesigns.value,()=>{var e,s;1===x.targetDesigns.value.length&&"table"===(null===(e=x.targetDesigns.value[0])||void 0===e?void 0:e.type)&&(null===(s=x.targetDesigns.value[0])||void 0===s?void 0:s.uuid)===t.options.uuid||c.value&&(c.value=!1,i.value.setEditable(!1),C[o["a"]](!0)),D()},{lazy:!0});const A=()=>{var t;const i=null===(t=document.querySelector("#svgContainer"))||void 0===t?void 0:t.getBoundingClientRect();i&&(90===e.root.projectData.rotate?(g.x=i.y,g.y=document.body.clientWidth-i.x-i.width):180===e.root.projectData.rotate?(g.x=document.body.clientWidth-i.x-i.width,g.y=document.body.clientHeight-i.y-i.height):270===e.root.projectData.rotate?(g.x=document.body.clientHeight-i.y-i.height,g.y=i.x):(g.x=i.x,g.y=i.y))};Object(n["k"])([()=>e.root.projectData.rotate,()=>_.scale.value],()=>{A()},{lazy:!0});const O=Object(n["a"])(()=>(e.root.projectData.rotate+t.options.style.rotate)%360),j=Object(n["a"])(()=>{var e;return null!==(e=t.options.table.borderWidth)&&void 0!==e?e:1});Object(n["k"])(()=>c.value,()=>{k[l["b"]](c.value)}),Object(n["k"])(()=>O.value,()=>{let t=O.value/90%4;t<0&&(t+=4),0===t||2===t?(b.header=p.EW,b.sider=p.NS):1===t||3===t?(b.header=p.NS,b.sider=p.EW):t>0&&t<1||t>2&&t<3?(b.header=p.NWSE,b.sider=p.NESW):(b.header=p.NESW,b.sider=p.NWSE)});const M=Object(n["a"])(()=>{let t=parseInt(e.root.projectData.rotate/90)%4;return t<0?t+4:t});Object(n["k"])(Object.keys(t.options.style).map(e=>()=>t.options.style[e]),()=>{const e=Object(r["e"])(t.options.style.left,t.options.style.top,t.options.style.left+t.options.style.width/2,t.options.style.top+t.options.style.height/2,t.options.style.rotate);v.x=e.x*u["DPI"],v.y=e.y*u["DPI"]}),Object(n["k"])(()=>c.value,()=>{c.value||(C.addToUuidTable(t.options.uuid),k[l["e"]]())});const I=()=>{f.value?(i.value.dispose(),e.root.$nextTick(()=>{i.value=new a["a"]({id:"table"+t.options.uuid},t.options,c.value,d.value),d.value=!1}),f.value=!1):i.value.refreshCell(t.options)},T=t=>90===e.root.projectData.rotate?{clientX:t.clientY,clientY:document.body.clientWidth-t.clientX}:180===e.root.projectData.rotate?{clientX:document.body.clientWidth-t.clientX,clientY:document.body.clientHeight-t.clientY}:270===e.root.projectData.rotate?{clientX:document.body.clientHeight-t.clientY,clientY:t.clientX}:{clientX:t.clientX,clientY:t.clientY},E=()=>{const e=[],i=[],{borderWidth:s=1,column:n,row:a}=t.options.table,r=y.width*u["DPI"]-s-n,o=y.height*u["DPI"]-a-s,c=S.value.width*u["DPI"]-n-s,d=S.value.height*u["DPI"]-a-s,p=c/r,f=d/o;t.options.table.cells.forEach((t,s)=>{t.forEach((t,n)=>{var a,r,o,l;(h.value&&(t.cellHeight&&(t.cellHeight*=f),t.cellWidth&&(t.cellWidth*=p),t.merge&&t.mergeConfig&&(t.mergeConfig.oldWidth*=p,t.mergeConfig.oldHeight*=f)),0===s)&&i.push({height:t.merge&&(null===(a=t.mergeConfig)||void 0===a?void 0:a.oldHeight)?null===(r=t.mergeConfig)||void 0===r?void 0:r.oldHeight:t.cellHeight});0===n&&e.push({width:t.merge&&(null===(o=t.mergeConfig)||void 0===o?void 0:o.oldWidth)?null===(l=t.mergeConfig)||void 0===l?void 0:l.oldWidth:t.cellWidth})})}),h.value||(h.value=!0),k[l["a"]](e),k[l["c"]](i)},D=Object(r["g"])(()=>{var e;1===x.targetDesigns.value.length&&"table"===x.targetDesigns.value[0].type&&(null===(e=x.targetDesigns.value[0])||void 0===e?void 0:e.uuid)===t.options.uuid&&(E(),1!==y.x&&(t.options.table.cells.forEach(t=>{t.forEach(t=>{t.fontSize&&(t.fontSize*=y.x)})}),t.options.table.defaultStyle.fontSize*=y.x),y.x=1,y.y=1,y.width=S.value.width,y.height=S.value.height,I())},100),L=()=>{e.emit("material-loaded",!0)},P="table-event"+t.options.uuid,R=e=>{const i=Math.max(e-1,0);h.value=!1,d.value=!0,t.options.table.column+=1,t.options.style.width+=(w.columns.value[i].width+1)/u["DPI"],t.options.table.cells.splice(e,0,Array.from({length:t.options.table.row}).map((e,s)=>{const n={},a=t.options.table.cells[i][s];return(null===a||void 0===a?void 0:a.cellWidth)&&(n.cellWidth=a.cellWidth),(null===a||void 0===a?void 0:a.cellHeight)&&(n.cellHeight=a.cellHeight),a.merge&&a.mergeConfig&&(n.cellWidth=a.mergeConfig.oldWidth,n.cellHeight=a.mergeConfig.oldHeight),n}))},z=e=>{h.value=!1,d.value=!0,t.options.table.row+=1;const i=Math.max(e-1,0);t.options.style.height+=(w.rows.value[i].height+1)/u["DPI"],t.options.table.cells.forEach(t=>{const s={},n=t[i];n.cellHeight&&(s.cellHeight=n.cellHeight),n.cellWidth&&(s.cellWidth=n.cellWidth),n.merge&&n.mergeConfig&&(s.cellWidth=n.mergeConfig.oldWidth,s.cellHeight=n.mergeConfig.oldHeight),t.splice(e,0,s)})};return Object(n["f"])(()=>{A(),e.bus.$on(P,({index:e,target:s})=>{if(h.value=!1,"line"===s.action){const{xstart:t,ystart:e,xend:n,yend:a,color:r}=s;i.value.lineContainer.setLineByCoord({color:r},t,e,n,a)}else if("edit"===s.action)c.value=!0,C[o["a"]](!1),i.value.setSelectEditor();else if("delete"===s.action)"column"===s.type?(t.options.table.column-=1,t.options.style.width-=(w.columns.value[e].width+1)/u["DPI"],t.options.table.cells=t.options.table.cells.map((t,i)=>i===e?void 0:i>e?t.map(t=>(t.merge&&t.mergeConfig&&(t.mergeConfig.xstart-=1,t.mergeConfig.xend-=1),t)):t.map(t=>(t.merge&&t.mergeConfig&&(t.mergeConfig.xend>=e&&(t.mergeConfig.xend-=1,t.cellWidth-=w.columns.value[e].width+1),t.mergeConfig.xstart===t.mergeConfig.xend&&t.mergeConfig.ystart===t.mergeConfig.yend&&(t.cellWidth=t.mergeConfig.oldWidth,t.cellHeight=t.mergeConfig.oldHeight,delete t.mergeConfig)),t))).filter(Boolean),t.options.table.lines=Object.keys(t.options.table.lines).reduce((i,s)=>{const n=t.options.table.lines[s],a=s.split(",").map(t=>parseInt(t)),r=a[0];return r===e||(r>e?(a[0]-=1,a[2]-=1,i[a.join()]=n):i[s]=n),i},{})):(t.options.table.row-=1,t.options.style.height-=(w.rows.value[e].height+1)/u["DPI"],t.options.table.cells=t.options.table.cells.map(t=>t.map((t,i)=>i===e?void 0:i>e?(t.merge&&t.mergeConfig&&(t.mergeConfig.ystart-=1,t.mergeConfig.yend-=1),t):(t.merge&&t.mergeConfig&&(t.mergeConfig.yend>=e&&(t.mergeConfig.yend-=1,t.cellHeight-=w.rows.value[e].height+1),t.mergeConfig.xstart===t.mergeConfig.xend&&t.mergeConfig.ystart===t.mergeConfig.yend&&(t.cellWidth=t.mergeConfig.oldWidth,t.cellHeight=t.mergeConfig.oldHeight,delete t.mergeConfig)),t)).filter(Boolean)),t.options.table.lines=Object.keys(t.options.table.lines).reduce((i,s)=>{const n=t.options.table.lines[s],a=s.split(",").map(t=>parseInt(t)),r=a[1];return r===e||(r>e?(a[1]-=1,a[3]-=1,i[a.join()]=n):i[s]=n),i},{}));else if("merge"===s.action){let e=!1;w.selected.value.forEach(([i,s],n)=>{if(n){const n=t.options.table.cells[i][s];n.value&&" "!==n.value&&(e=!0)}}),e?m.value=!0:(i.value.mergeCells(),k[l["d"]]([w.selected.value[0]]))}else if("split"===s.action)i.value.splitCell();else if("previewStyle"===s.action)d.value=!0;else{e+="decrease"===s.action?0:1;const t="column"===s.type?R:z;t(e)}}),L(),y.width=S.value.width,y.height=S.value.height,e.root.$nextTick(()=>{i.value=new a["a"]({id:"table"+t.options.uuid},t.options,c.value,!1),D()})}),Object(n["g"])(()=>{e.bus.$off(P)}),Object(n["k"])(["width","height"].map(e=>()=>t.options.style[e]),()=>{f.value=!0,t.options.table.cancelUpdate?(t.options.table.cancelUpdate=!1,y.x=1,y.y=1,y.width=t.options.style.width,y.height=t.options.style.height):(y.x=t.options.style.width/y.width,y.y=t.options.style.height/y.height),D()},{lazy:!0}),Object(n["k"])(()=>t.options,()=>{f.value=!0,D()},{lazy:!0}),Object(s["a"])(Object(s["a"])({editable:c,tableRef:i,resizeRef:h,mutations:C,scale:y,globalState:_,tablePosition:v},w),{},{currentRotate:M,transformEvent:T,svgPosition:g,addOneRow:z,borderWidth:j,tableMutations:k,cursor:b,visible:m,addOneColumn:R,refresh:D,dblclick:()=>{},resize:()=>{}})},render(){const t=arguments[0];return t("div",{class:"drag-table-wrapper",style:this.editable?{opacity:1}:{}},[t("a-modal",{attrs:{centered:!0,visible:this.visible},on:{ok:()=>{this.tableRef.mergeCells(),this.tableMutations[l["d"]]([this.selected[0]]),this.visible=!1},cancel:()=>{this.visible=!1}}},[t("p",["合并后的单元格将只保留左上角单元格中的值，确定继续吗？"])]),t("div",{on:{mousedown:t=>{t.stopPropagation()}}},[t(d["default"],{directives:[{name:"show",value:this.editable}],on:{click:()=>{this.tableRef.selectAll()}}}),t(c["default"],{attrs:{lineWidth:this.borderWidth,cursor:this.cursor.header},directives:[{name:"show",value:this.editable}],on:{dragLine:({event:t,index:e,update:i})=>{t=this.transformEvent(t),this.resizeRef=!1;const s=(t.clientX-this.svgPosition.x)/this.globalState.scale.value-50*u["DPI"],n=(t.clientY-this.svgPosition.y)/this.globalState.scale.value-50*u["DPI"],a=Object(r["G"])(this.options.style.rotate),o=(s-this.tablePosition.x)*a[0]+(n-this.tablePosition.y)*a[1];if(this.tableRef.dragLineY({clientX:o,clientY:0},e,i),i){const t=this.columns.reduce((t,i,s)=>(e>s&&(t+=i.width),t),0),i=Math.max(o-t,10/this.globalState.scale.value),s=i-this.columns[e].width-this.borderWidth;this.options.style.width+=s/u["DPI"],this.options.table.cells.forEach((t,n)=>{e===n&&t.forEach(t=>{t.cellWidth?t.cellWidth+=s:t.cellWidth=i,t.merge&&t.mergeConfig&&(t.mergeConfig.oldWidth+=s)})}),this.tableRef.changeSize(),setTimeout(()=>{this.tableRef.refreshMergeCells()},200)}},mousedown:()=>{this.tableRef.setEditable(!1)},addOne:()=>{this.addOneColumn(this.columns.length)},change:t=>{this.tableRef.changeColumnCells(t)}}}),t(h["default"],{attrs:{lineWidth:this.borderWidth,cursor:this.cursor.sider},directives:[{name:"show",value:this.editable}],on:{dragLine:({event:t,index:e,update:i})=>{t=this.transformEvent(t),this.resizeRef=!1;const s=(t.clientX-this.svgPosition.x)/this.globalState.scale.value-50*u["DPI"],n=(t.clientY-this.svgPosition.y)/this.globalState.scale.value-50*u["DPI"],a=Object(r["G"])(this.options.style.rotate),o=-(s-this.tablePosition.x)*a[1]+(n-this.tablePosition.y)*a[0];if(this.tableRef.dragLineX({clientX:0,clientY:o},e,i),i){const t=this.rows.reduce((t,i,s)=>(e>s&&(t+=i.height),t),0),i=Math.max(o-t,10/this.globalState.scale.value),s=i-this.rows[e].height-this.borderWidth;this.options.style.height+=s/u["DPI"],this.options.table.cells.forEach(t=>{t.forEach((t,n)=>{e===n&&(t.cellHeight?t.cellHeight+=s:t.cellHeight=i,t.merge&&t.mergeConfig&&(t.mergeConfig.oldHeight+=s))})}),this.tableRef.changeSize(),setTimeout(()=>{this.tableRef.refreshMergeCells()},200)}},mousedown:()=>{this.tableRef.setEditable(!1)},addOne:()=>{this.addOneRow(this.rows.length)},change:t=>{this.tableRef.changeRowCells(t)}}})]),t("div",{attrs:{id:"table"+this.options.uuid,tabindex:"0"},class:"table-wrapper",ref:"wrapperRef",style:{width:this.scale.width+"mm",height:this.scale.height+"mm",transformOrigin:"0px 0px",transform:`scale(${this.scale.x},${this.scale.y})`,background:"transparent"},on:{dblclick:()=>{this.tableRef.setEditable(!0),this.editable=!0,this.mutations[o["a"]](!1)},mousedown:t=>{this.editable?t.stopPropagation():this.$emit("mousedown",t)}}})])}})},ba44:function(t,e,i){t.exports=i.p+"editor-assets/img/rotate-a.5cee4b0f.svg"},bab4:function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("b9c1");i("939b");e["default"]=Object(s["b"])({props:{list:{type:[Object,Array],default:()=>[]},loading:{type:Boolean,default:!1},hideChildren:{type:Boolean,default:!1}},setup(t,e){const i=Object(s["j"])([]),a=Object(s["j"])(""),r=Object(s["j"])(""),o=Object(s["a"])(()=>""===a.value?"":t.list[a.value]);return Object(s["k"])(()=>i.value,()=>{e.emit("change",i.value.join())},{lazy:!0}),()=>{var i;return Object(s["c"])("div",{class:"tabs-wrapper"},[Object(s["c"])("a-spin",{attrs:{spinning:t.loading}},[Object(s["c"])("div",{class:"template-header"},["分类:",Object(s["c"])(n["default"],{attrs:{type:"box",active:""===a.value},class:"ml-8 flex-item",on:{click:()=>{a.value="",r.value="",e.emit("change","")}}},["全部"]),null===(i=t.list)||void 0===i?void 0:i.map((t,i)=>Object(s["c"])(n["default"],{key:i,attrs:{type:"box",active:a.value===i},class:"ml-8 flex-item",on:{click:()=>{a.value=i,r.value="",e.emit("change",[t.id])}}},[t.name])),!t.hideChildren&&o.value?Object(s["c"])("div",["类型:",Object(s["c"])(n["default"],{attrs:{type:"box",active:""===r.value},class:"ml-8 flex-item",on:{click:()=>{r.value="",e.emit("change",[o.value.id])}}},["全部"]),o.value.children.map((t,i)=>Object(s["c"])(n["default"],{attrs:{type:"box",active:r.value===i},class:"ml-8 flex-item",key:i,on:{click:()=>{r.value=i,e.emit("change",[o.value.id,t.id])}}},[t.name]))]):""])])])}}})},bb11:function(t,e,i){var s=i("cbe5"),n=Math.sin,a=Math.cos,r=Math.PI/180,o=s.extend({type:"rose",shape:{cx:0,cy:0,r:[],k:0,n:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i,s,o,l=e.r,c=e.k,h=e.n,d=e.cx,u=e.cy;t.moveTo(d,u);for(var p=0,f=l.length;p<f;p++){o=l[p];for(var m=0;m<=360*h;m++)i=o*n(c/h*m%360*r)*a(m*r)+d,s=o*n(c/h*m%360*r)*n(m*r)+u,t.lineTo(i,s)}}});t.exports=o},bb14:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAYAAACALL/6AAAAx0lEQVQoU2NkIBIcOno6+D8Dox0jkeoZ9h8+U8PIwOgJ13DoxFm9v38ZjBytjRdgMwRFw+GTF9T+/v5zhIGR4YCDtUkYXg1HjpyT+sP4/yjj//9PP3EwuPmamHzDq+HgkTMn/jMwmDMwMDxjZGT8istP////F2JgYLjGePDImQX/GRjiGRgYljH+ZzyILxD+MzGdZ2xoaGBydPGe+J+BIYWRmTnc3tJoEz5N8FAChQITE2OuvbWxOFEaQIquXr3Kpq2t/QufBgDfHEnd+rQfjQAAAABJRU5ErkJggg=="},bb5d:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("f08e"),n=function(t){return t.match(new RegExp("^"+s.A_CHARS+"*"))[0].length},a=function(t){return t.match(new RegExp("^"+s.B_CHARS+"*"))[0].length},r=function(t){return t.match(new RegExp("^"+s.C_CHARS+"*"))[0]};function o(t,e){var i=e?s.A_CHARS:s.B_CHARS,n=t.match(new RegExp("^("+i+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(n)return n[1]+String.fromCharCode(204)+l(t.substring(n[1].length));var a=t.match(new RegExp("^"+i+"+"))[0];return a.length===t.length?t:a+String.fromCharCode(e?205:206)+o(t.substring(a.length),!e)}function l(t){var e=r(t),i=e.length;if(i===t.length)return t;t=t.substring(i);var s=n(t)>=a(t);return e+String.fromCharCode(s?206:205)+o(t,s)}e.default=function(t){var e=void 0,i=r(t).length;if(i>=2)e=s.C_START_CHAR+l(t);else{var c=n(t)>a(t);e=(c?s.A_START_CHAR:s.B_START_CHAR)+o(t,c)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,(function(t,e){return String.fromCharCode(203)+e}))}},bbca:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAs0lEQVQoU6XQO0pDARCF4e9UFgEbF2BlFcXCSoRUdnZCECs34CYUK7GwkhSBZAVJ7x4EGwOCG9DW0sfIhRuIF6ycah4/c+ZMrERVHeIWPVwmmSzHqapNrLeNGS5QGGMfH3hvwDmO8ILPVYU238J9mqKq3rCT5LULVtVTkv4vEHftjXsYJDn+C1zgHAc4TbLxb/AaI+w2jpOcdTc+4yTJY+eva3hIsr00M8QNvjquv3GVZPoD7mxU1LVrO9EAAAAASUVORK5CYII="},bcaa:function(t,e,i){var s=i("4ab1"),n=i("6d8b");function a(t,e){s.call(this,t,e,["filter"],"__filter_in_use__","_shadowDom")}function r(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY||t.textShadowBlur||t.textShadowOffsetX||t.textShadowOffsetY)}n.inherits(a,s),a.prototype.addWithoutUpdate=function(t,e){if(e&&r(e.style)){var i;if(e._shadowDom){i=e._shadowDom;var s=this.getDefs(!0);s.contains(e._shadowDom)||this.addDom(i)}else i=this.add(e);this.markUsed(e);var n=i.getAttribute("id");t.style.filter="url(#"+n+")"}},a.prototype.add=function(t){var e=this.createElement("filter");return t._shadowDomId=t._shadowDomId||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-shadow-"+t._shadowDomId),this.updateDom(t,e),this.addDom(e),e},a.prototype.update=function(t,e){var i=e.style;if(r(i)){var n=this;s.prototype.update.call(this,e,(function(){n.updateDom(e,e._shadowDom)}))}else this.remove(t,e)},a.prototype.remove=function(t,e){null!=e._shadowDomId&&(this.removeDom(t),t.style.filter="")},a.prototype.updateDom=function(t,e){var i=e.getElementsByTagName("feDropShadow");i=0===i.length?this.createElement("feDropShadow"):i[0];var s,n,a,r,o=t.style,l=t.scale&&t.scale[0]||1,c=t.scale&&t.scale[1]||1;if(o.shadowBlur||o.shadowOffsetX||o.shadowOffsetY)s=o.shadowOffsetX||0,n=o.shadowOffsetY||0,a=o.shadowBlur,r=o.shadowColor;else{if(!o.textShadowBlur)return void this.removeDom(e,o);s=o.textShadowOffsetX||0,n=o.textShadowOffsetY||0,a=o.textShadowBlur,r=o.textShadowColor}i.setAttribute("dx",s/l),i.setAttribute("dy",n/c),i.setAttribute("flood-color",r);var h=a/2/l,d=a/2/c,u=h+" "+d;i.setAttribute("stdDeviation",u),e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width",Math.ceil(a/2*200)+"%"),e.setAttribute("height",Math.ceil(a/2*200)+"%"),e.appendChild(i),t._shadowDom=e},a.prototype.markUsed=function(t){t._shadowDom&&s.prototype.markUsed.call(this,t._shadowDom)};var o=a;t.exports=o},bce2:function(t,e,i){"use strict";var s=i("c7c7"),n=i.n(s);n.a},bd00:function(t,e,i){t.exports=i.p+"editor-assets/img/close-5.f5fbf0ab.svg"},bd16:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-popover",{attrs:{trigger:"click",placement:"topRight","overlay-class-name":"ant-no-padding"},on:{visibleChange:t.onAvatarVisibleChange},model:{value:t.showAvatarPopover,callback:function(e){t.showAvatarPopover=e},expression:"showAvatarPopover"}},[s("template",{slot:"content"},[s("div",{staticClass:"menu-item",on:{click:function(e){return t.goLink("/mydesign")}}},[s("img",{attrs:{src:i("ec03")}}),s("div",{staticClass:"fo-14 ml-12"},[t._v("设计方案")])]),s("div",{staticClass:"menu-item",on:{click:function(e){return t.goLink("/mycollect")}}},[s("img",{attrs:{src:i("fd43")}}),s("div",{staticClass:"fo-14 ml-12"},[t._v("收藏夹")])]),t.features.leftSide__avatar.includes("orders")?s("div",{staticClass:"menu-item",on:{click:function(e){return t.goLink("/orders")}}},[s("img",{attrs:{src:i("0f11")}}),s("div",{staticClass:"fo-14 ml-12"},[t._v("订单与发票")])]):t._e(),s("div",{staticClass:"menu-item",on:{click:function(e){return t.goLink("/personalcenter")}}},[s("img",{attrs:{src:i("2fbb")}}),s("div",{staticClass:"fo-14 ml-12"},[t._v("账号设置")])]),s("a-divider",{staticClass:"my-1"}),s("div",{staticClass:"menu-item",on:{click:t.onLogout}},[s("img",{attrs:{src:i("f8fc")}}),s("div",{staticClass:"fo-14 ml-12"},[t._v("退出登录")])])],1),t.accessToken?s("div",{staticClass:"left-side-menu__avatar"},[t.user.avatar_url?t._e():s("img",{class:"avatar--"+t.vip.type,attrs:{src:i("131e")}}),t.user.avatar_url?s("img",{class:"avatar--"+t.vip.type,attrs:{src:t.user.avatar_url}}):t._e(),s("div",{staticStyle:{height:"1px"}},[t.isVip?"personal"===t.vip.type?s("img",{staticClass:"avatar-flag",attrs:{src:i("25a3"),alt:""}}):s("img",{staticClass:"avatar-flag",attrs:{src:i("1c5f"),alt:""}}):s("img",{staticClass:"avatar-flag",attrs:{src:i("d79b"),alt:""}})]),s("div",{staticClass:"text"},[t._v("我的")])]):t._e(),t.accessToken?t._e():s("div",{staticClass:"left-side-menu__avatar"},[s("img",{class:"avatar--no",attrs:{src:i("131e")}}),s("div",{staticClass:"text"},[t._v("登录")])])],2)},n=[],a=i("5530"),r=i("5880"),o=i("9393"),l=i("f856"),c={mixins:[o["a"]],data(){return{showAvatarPopover:!1}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("enterprise",["isCompanyDomain"])),Object(r["mapState"])("profile",["user","accessToken"])),Object(r["mapGetters"])("profile",["isVip"])),{},{features(){return this.isCompanyDomain?l["a"].enterprise:l["a"].www}}),methods:{onLogout(){this.$store.dispatch("profile/logout","/design")},showLoginDialog(){this.$store.commit("profile/SET_SHOW_LOGIN_MODAL",!0)},onAvatarVisibleChange(t){this.accessToken||(this.showAvatarPopover=!1,this.showLoginDialog())},goLink(t){window.open(t,"_blank")}}},h=c,d=(i("19f7"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,"adc39e7e",null);e["default"]=u.exports},bd6b:function(t,e,i){var s=i("06ad"),n=i("4942"),a=i("6d8b"),r=a.isString,o=a.isFunction,l=a.isObject,c=a.isArrayLike,h=a.indexOf,d=function(){this.animators=[]};function u(t,e,i,s,n,a,l,c){r(s)?(a=n,n=s,s=0):o(n)?(a=n,n="linear",s=0):o(s)?(a=s,s=0):o(i)?(a=i,i=500):i||(i=500),t.stopAnimation(),p(t,"",t,e,i,s,c);var h=t.animators.slice(),d=h.length;function u(){d--,d||a&&a()}d||a&&a();for(var f=0;f<h.length;f++)h[f].done(u).start(n,l)}function p(t,e,i,s,n,a,r){var o={},h=0;for(var d in s)s.hasOwnProperty(d)&&(null!=i[d]?l(s[d])&&!c(s[d])?p(t,e?e+"."+d:d,i[d],s[d],n,a,r):(r?(o[d]=i[d],f(t,e,d,s[d])):o[d]=s[d],h++):null==s[d]||r||f(t,e,d,s[d]));h>0&&t.animate(e,!1).when(null==n?500:n,o).delay(a||0)}function f(t,e,i,s){if(e){var n={};n[e]={},n[e][i]=s,t.attr(n)}else t.attr(i,s)}d.prototype={constructor:d,animate:function(t,e){var i,a=!1,r=this,o=this.__zr;if(t){var l=t.split("."),c=r;a="shape"===l[0];for(var d=0,u=l.length;d<u;d++)c&&(c=c[l[d]]);c&&(i=c)}else i=r;if(i){var p=r.animators,f=new s(i,e);return f.during((function(t){r.dirty(a)})).done((function(){p.splice(h(p,f),1)})),p.push(f),o&&o.animation.addAnimator(f),f}n('Property "'+t+'" is not existed in element '+r.id)},stopAnimation:function(t){for(var e=this.animators,i=e.length,s=0;s<i;s++)e[s].stop(t);return e.length=0,this},animateTo:function(t,e,i,s,n,a){u(this,t,e,i,s,n,a)},animateFrom:function(t,e,i,s,n,a){u(this,t,e,i,s,n,a,!0)}};var m=d;t.exports=m},bd85:function(t,e,i){"use strict";i.r(e);var s=i("750b");e["default"]=Object(s["b"])({setup(t,e){return()=>{var t,i;return Object(s["c"])("a-button",{style:"line-height:1.499",on:{click:()=>e.emit("click")},attrs:{block:!0}},[null===(t=(i=e.slots).default)||void 0===t?void 0:t.call(i)])}}})},bd8a:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(e){n(this,t),this.api=e}return s(t,[{key:"handleCatch",value:function(t){if("InvalidInputException"!==t.name)throw t;if(this.api._options.valid===this.api._defaults.valid)throw t.message;this.api._options.valid(!1),this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(t){try{var e=t.apply(void 0,arguments);return this.api._options.valid(!0),e}catch(i){return this.handleCatch(i),this.api}}}]),t}();e.default=a},bd9e:function(t,e,i){"use strict";var s=i("c825"),n=i.n(s);n.a},bdc2:function(t,e,i){},bdfe:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=i("c243"),a=i("5726"),r=c(a),o=i("e762"),l=c(o);function c(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function u(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var p=function(t){function e(t,i){h(this,e);var s=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return s.fontSize=!i.flat&&i.fontSize>10*i.width?10*i.width:i.fontSize,s.guardHeight=i.height+s.fontSize/2+i.textMargin,s}return u(e,t),s(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(t,e){return this.text.substr(t,e)}},{key:"leftEncode",value:function(t,e){return(0,r.default)(t,e)}},{key:"rightText",value:function(t,e){return this.text.substr(t,e)}},{key:"rightEncode",value:function(t,e){return(0,r.default)(t,e)}},{key:"encodeGuarded",value:function(){var t={fontSize:this.fontSize},e={height:this.guardHeight};return[{data:n.SIDE_BIN,options:e},{data:this.leftEncode(),text:this.leftText(),options:t},{data:n.MIDDLE_BIN,options:e},{data:this.rightEncode(),text:this.rightText(),options:t},{data:n.SIDE_BIN,options:e}]}},{key:"encodeFlat",value:function(){var t=[n.SIDE_BIN,this.leftEncode(),n.MIDDLE_BIN,this.rightEncode(),n.SIDE_BIN];return{data:t.join(""),text:this.text}}}]),e}(l.default);e.default=p},be18:function(t,e,i){t.exports=i.p+"editor-assets/img/lock.94a05a67.svg"},be2d:function(t,e,i){},be3e:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("a-button",{attrs:{block:""},on:{click:t.onEdit}},[t._v(" 编辑二维码内容 ")]),i("a-divider"),i("width-height-input"),i("foreground-background-picker"),i("qr-icons",{staticClass:"mtb-16",attrs:{design:t.curDesign},on:{useIcon:t.useIcon}}),i("a-divider"),i("design-common-operation",{staticClass:"mt-16"}),i("edit-qrcode",{ref:"editQrcodeRef",attrs:{visible:t.showQrCodeDialog,data:t.curDesign},on:{close:function(e){t.showQrCodeDialog=!1},callback:t.handleQrcodeChange}})],1)},n=[],a=i("5530"),r=i("5880"),o=i("13f9"),l=i("d026"),c=i("0ee7"),h=i("1e9d"),d=i("4d13"),u={components:{widthHeightInput:o["default"],foregroundBackgroundPicker:l["default"],qrIcons:c["default"],designCommonOperation:h["default"],editQrcode:d["default"]},computed:Object(a["a"])({},Object(r["mapGetters"])("editor-v2",["curDesign"])),data(){return{showQrCodeDialog:!1}},mounted(){this.$bus.$on("setting-qrcode/showEdit",t=>{this.onEdit()})},beforeDestroy(){this.$bus.$off("setting-qrcode/showEdit")},methods:{onEdit(){this.showQrCodeDialog=!0},useIcon(t){this.curDesign.qricon=t},handleQrcodeChange(t){this.showQrCodeDialog=!1,Object.assign(this.curDesign,t)}}},p=u,f=i("2877"),m=Object(f["a"])(p,s,n,!1,null,null,null);e["default"]=m.exports},be4e:function(t,e,i){function s(t){this.mode=a.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,i=this.data.length;e<i;e++){var s=[],n=this.data.charCodeAt(e);n>65536?(s[0]=240|(1835008&n)>>>18,s[1]=128|(258048&n)>>>12,s[2]=128|(4032&n)>>>6,s[3]=128|63&n):n>2048?(s[0]=224|(61440&n)>>>12,s[1]=128|(4032&n)>>>6,s[2]=128|63&n):n>128?(s[0]=192|(1984&n)>>>6,s[1]=128|63&n):s[0]=n,this.parsedData.push(s)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function n(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}s.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,i=this.parsedData.length;e<i;e++)t.put(this.parsedData[e],8)}},n.prototype={addData:function(t){var e=new s(t);this.dataList.push(e),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++)this.modules[i][s]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=n.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var i=-1;i<=7;i++)if(!(t+i<=-1||this.moduleCount<=t+i))for(var s=-1;s<=7;s++)e+s<=-1||this.moduleCount<=e+s||(this.modules[t+i][e+s]=0<=i&&i<=6&&(0==s||6==s)||0<=s&&s<=6&&(0==i||6==i)||2<=i&&i<=4&&2<=s&&s<=4)},getBestMaskPattern:function(){for(var t=0,e=0,i=0;i<8;i++){this.makeImpl(!0,i);var s=l.getLostPoint(this);(0==i||t>s)&&(t=s,e=i)}return e},createMovieClip:function(t,e,i){var s=t.createEmptyMovieClip(e,i),n=1;this.make();for(var a=0;a<this.modules.length;a++)for(var r=a*n,o=0;o<this.modules[a].length;o++){var l=o*n,c=this.modules[a][o];c&&(s.beginFill(0,100),s.moveTo(l,r),s.lineTo(l+n,r),s.lineTo(l+n,r+n),s.lineTo(l,r+n),s.endFill())}return s},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=l.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var i=0;i<t.length;i++){var s=t[e],n=t[i];if(null==this.modules[s][n])for(var a=-2;a<=2;a++)for(var r=-2;r<=2;r++)this.modules[s+a][n+r]=-2==a||2==a||-2==r||2==r||0==a&&0==r}},setupTypeNumber:function(t){for(var e=l.getBCHTypeNumber(this.typeNumber),i=0;i<18;i++){var s=!t&&1==(e>>i&1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=s}for(i=0;i<18;i++){s=!t&&1==(e>>i&1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=s}},setupTypeInfo:function(t,e){for(var i=this.errorCorrectLevel<<3|e,s=l.getBCHTypeInfo(i),n=0;n<15;n++){var a=!t&&1==(s>>n&1);n<6?this.modules[n][8]=a:n<8?this.modules[n+1][8]=a:this.modules[this.moduleCount-15+n][8]=a}for(n=0;n<15;n++){a=!t&&1==(s>>n&1);n<8?this.modules[8][this.moduleCount-n-1]=a:n<9?this.modules[8][15-n-1+1]=a:this.modules[8][15-n-1]=a}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var i=-1,s=this.moduleCount-1,n=7,a=0,r=this.moduleCount-1;r>0;r-=2){6==r&&r--;while(1){for(var o=0;o<2;o++)if(null==this.modules[s][r-o]){var c=!1;a<t.length&&(c=1==(t[a]>>>n&1));var h=l.getMask(e,s,r-o);h&&(c=!c),this.modules[s][r-o]=c,n--,-1==n&&(a++,n=7)}if(s+=i,s<0||this.moduleCount<=s){s-=i,i=-i;break}}}}},n.PAD0=236,n.PAD1=17,n.createData=function(t,e,i){for(var s=u.getRSBlocks(t,e),a=new p,r=0;r<i.length;r++){var o=i[r];a.put(o.mode,4),a.put(o.getLength(),l.getLengthInBits(o.mode,t)),o.write(a)}var c=0;for(r=0;r<s.length;r++)c+=s[r].dataCount;if(a.getLengthInBits()>8*c)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+8*c+")");a.getLengthInBits()+4<=8*c&&a.put(0,4);while(a.getLengthInBits()%8!=0)a.putBit(!1);while(1){if(a.getLengthInBits()>=8*c)break;if(a.put(n.PAD0,8),a.getLengthInBits()>=8*c)break;a.put(n.PAD1,8)}return n.createBytes(a,s)},n.createBytes=function(t,e){for(var i=0,s=0,n=0,a=new Array(e.length),r=new Array(e.length),o=0;o<e.length;o++){var c=e[o].dataCount,h=e[o].totalCount-c;s=Math.max(s,c),n=Math.max(n,h),a[o]=new Array(c);for(var u=0;u<a[o].length;u++)a[o][u]=255&t.buffer[u+i];i+=c;var p=l.getErrorCorrectPolynomial(h),f=new d(a[o],p.getLength()-1),m=f.mod(p);r[o]=new Array(p.getLength()-1);for(u=0;u<r[o].length;u++){var g=u+m.getLength()-r[o].length;r[o][u]=g>=0?m.get(g):0}}var v=0;for(u=0;u<e.length;u++)v+=e[u].totalCount;var b=new Array(v),y=0;for(u=0;u<s;u++)for(o=0;o<e.length;o++)u<a[o].length&&(b[y++]=a[o][u]);for(u=0;u<n;u++)for(o=0;o<e.length;o++)u<r[o].length&&(b[y++]=r[o][u]);return b};for(var a={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},r={L:1,M:0,Q:3,H:2},o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},l={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){var e=t<<10;while(l.getBCHDigit(e)-l.getBCHDigit(l.G15)>=0)e^=l.G15<<l.getBCHDigit(e)-l.getBCHDigit(l.G15);return(t<<10|e)^l.G15_MASK},getBCHTypeNumber:function(t){var e=t<<12;while(l.getBCHDigit(e)-l.getBCHDigit(l.G18)>=0)e^=l.G18<<l.getBCHDigit(e)-l.getBCHDigit(l.G18);return t<<12|e},getBCHDigit:function(t){var e=0;while(0!=t)e++,t>>>=1;return e},getPatternPosition:function(t){return l.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,i){switch(t){case o.PATTERN000:return(e+i)%2==0;case o.PATTERN001:return e%2==0;case o.PATTERN010:return i%3==0;case o.PATTERN011:return(e+i)%3==0;case o.PATTERN100:return(Math.floor(e/2)+Math.floor(i/3))%2==0;case o.PATTERN101:return e*i%2+e*i%3==0;case o.PATTERN110:return(e*i%2+e*i%3)%2==0;case o.PATTERN111:return(e*i%3+(e+i)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new d([1],0),i=0;i<t;i++)e=e.multiply(new d([1,c.gexp(i)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case a.MODE_NUMBER:return 10;case a.MODE_ALPHA_NUM:return 9;case a.MODE_8BIT_BYTE:return 8;case a.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case a.MODE_NUMBER:return 12;case a.MODE_ALPHA_NUM:return 11;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case a.MODE_NUMBER:return 14;case a.MODE_ALPHA_NUM:return 13;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),i=0,s=0;s<e;s++)for(var n=0;n<e;n++){for(var a=0,r=t.isDark(s,n),o=-1;o<=1;o++)if(!(s+o<0||e<=s+o))for(var l=-1;l<=1;l++)n+l<0||e<=n+l||0==o&&0==l||r==t.isDark(s+o,n+l)&&a++;a>5&&(i+=3+a-5)}for(s=0;s<e-1;s++)for(n=0;n<e-1;n++){var c=0;t.isDark(s,n)&&c++,t.isDark(s+1,n)&&c++,t.isDark(s,n+1)&&c++,t.isDark(s+1,n+1)&&c++,0!=c&&4!=c||(i+=3)}for(s=0;s<e;s++)for(n=0;n<e-6;n++)t.isDark(s,n)&&!t.isDark(s,n+1)&&t.isDark(s,n+2)&&t.isDark(s,n+3)&&t.isDark(s,n+4)&&!t.isDark(s,n+5)&&t.isDark(s,n+6)&&(i+=40);for(n=0;n<e;n++)for(s=0;s<e-6;s++)t.isDark(s,n)&&!t.isDark(s+1,n)&&t.isDark(s+2,n)&&t.isDark(s+3,n)&&t.isDark(s+4,n)&&!t.isDark(s+5,n)&&t.isDark(s+6,n)&&(i+=40);var h=0;for(n=0;n<e;n++)for(s=0;s<e;s++)t.isDark(s,n)&&h++;var d=Math.abs(100*h/e/e-50)/5;return i+=10*d,i}},c={glog:function(t){if(t<1)throw new Error("glog("+t+")");return c.LOG_TABLE[t]},gexp:function(t){while(t<0)t+=255;while(t>=256)t-=255;return c.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},h=0;h<8;h++)c.EXP_TABLE[h]=1<<h;for(h=8;h<256;h++)c.EXP_TABLE[h]=c.EXP_TABLE[h-4]^c.EXP_TABLE[h-5]^c.EXP_TABLE[h-6]^c.EXP_TABLE[h-8];for(h=0;h<255;h++)c.LOG_TABLE[c.EXP_TABLE[h]]=h;function d(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);var i=0;while(i<t.length&&0==t[i])i++;this.num=new Array(t.length-i+e);for(var s=0;s<t.length-i;s++)this.num[s]=t[s+i]}function u(t,e){this.totalCount=t,this.dataCount=e}function p(){this.buffer=[],this.length=0}d.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),i=0;i<this.getLength();i++)for(var s=0;s<t.getLength();s++)e[i+s]^=c.gexp(c.glog(this.get(i))+c.glog(t.get(s)));return new d(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=c.glog(this.get(0))-c.glog(t.get(0)),i=new Array(this.getLength()),s=0;s<this.getLength();s++)i[s]=this.get(s);for(s=0;s<t.getLength();s++)i[s]^=c.gexp(c.glog(t.get(s))+e);return new d(i,0).mod(t)}},u.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],u.getRSBlocks=function(t,e){var i=u.getRsBlockTable(t,e);if(void 0==i)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var s=i.length/3,n=[],a=0;a<s;a++)for(var r=i[3*a+0],o=i[3*a+1],l=i[3*a+2],c=0;c<r;c++)n.push(new u(o,l));return n},u.getRsBlockTable=function(t,e){switch(e){case r.L:return u.RS_BLOCK_TABLE[4*(t-1)+0];case r.M:return u.RS_BLOCK_TABLE[4*(t-1)+1];case r.Q:return u.RS_BLOCK_TABLE[4*(t-1)+2];case r.H:return u.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},p.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var i=0;i<e;i++)this.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var f=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function m(t){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M"},"string"===typeof t&&(t={content:t}),t)for(var e in t)this.options[e]=t[e];if("string"!==typeof this.options.content)throw new Error("Expected 'content' as string!");if(0===this.options.content.length)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0)||!(this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");function i(t){switch(t){case"L":return r.L;case"M":return r.M;case"Q":return r.Q;case"H":return r.H;default:throw new Error("Unknwon error correction level: "+t)}}function s(t,e){for(var i=a(t),s=1,n=0,r=0,o=f.length;r<=o;r++){var l=f[r];if(!l)throw new Error("Content too long: expected "+n+" but got "+i);switch(e){case"L":n=l[0];break;case"M":n=l[1];break;case"Q":n=l[2];break;case"H":n=l[3];break;default:throw new Error("Unknwon error correction level: "+e)}if(i<=n)break;s++}if(s>f.length)throw new Error("Content too long");return s}function a(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}var o=this.options.content,l=s(o,this.options.ecl),c=i(this.options.ecl);this.qrcode=new n(l,c),this.qrcode.addData(o),this.qrcode.make()}m.prototype.svg=function(t){var e=this.options||{},i=this.qrcode.modules;"undefined"==typeof t&&(t={container:e.container||"svg"});for(var s="undefined"==typeof e.pretty||!!e.pretty,n=s?"  ":"",a=s?"\r\n":"",r=e.width,o=e.height,l=i.length,c=r/(l+2*e.padding),h=o/(l+2*e.padding),d="undefined"!=typeof e.join&&!!e.join,u="undefined"!=typeof e.swap&&!!e.swap,p="undefined"==typeof e.xmlDeclaration||!!e.xmlDeclaration,f="undefined"!=typeof e.predefined&&!!e.predefined,m=f?n+'<defs><path id="qrmodule" d="M0 0 h'+h+" v"+c+' H0 z" style="fill:'+e.color+';shape-rendering:crispEdges;" /></defs>'+a:"",g=n+'<rect x="0" y="0" width="'+r+'" height="'+o+'" style="fill:'+e.background+';shape-rendering:crispEdges;"/>'+a,v="",b="",y=0;y<l;y++)for(var _=0;_<l;_++){var x=i[_][y];if(x){var w=_*c+e.padding*c,C=y*h+e.padding*h;if(u){var k=w;w=C,C=k}if(d){var S=c+w,A=h+C;w=Number.isInteger(w)?Number(w):w.toFixed(2),C=Number.isInteger(C)?Number(C):C.toFixed(2),S=Number.isInteger(S)?Number(S):S.toFixed(2),A=Number.isInteger(A)?Number(A):A.toFixed(2),b+="M"+w+","+C+" V"+A+" H"+S+" V"+C+" H"+w+" Z "}else v+=f?n+'<use x="'+w.toString()+'" y="'+C.toString()+'" href="#qrmodule" />'+a:n+'<rect x="'+w.toString()+'" y="'+C.toString()+'" width="'+c+'" height="'+h+'" style="fill:'+e.color+';shape-rendering:crispEdges;"/>'+a}}d&&(v=n+'<path x="0" y="0" style="fill:'+e.color+';shape-rendering:crispEdges;" d="'+b+'" />');var O="";switch(t.container){case"svg":p&&(O+='<?xml version="1.0" standalone="yes"?>'+a),O+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+r+'" height="'+o+'">'+a,O+=m+g+v,O+="</svg>";break;case"svg-viewbox":p&&(O+='<?xml version="1.0" standalone="yes"?>'+a),O+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+r+" "+o+'">'+a,O+=m+g+v,O+="</svg>";break;case"g":O+='<g width="'+r+'" height="'+o+'">'+a,O+=m+g+v,O+="</g>";break;default:O+=(m+g+v).replace(/^\s+/,"");break}return O},m.prototype.save=function(t,e){var s=this.svg();"function"!=typeof e&&(e=function(t,e){});try{var n=i("3e8f");n.writeFile(t,s,e)}catch(a){e(a)}},t.exports=m},be5e:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=i("fd7c"),a=o(n),r=i("ab5b");function o(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c="http://www.w3.org/2000/svg",h=function(){function t(e,i,s){l(this,t),this.svg=e,this.encodings=i,this.options=s,this.document=s.xmlDocument||document}return s(t,[{key:"render",value:function(){var t=this.options.marginLeft;this.prepareSVG();for(var e=0;e<this.encodings.length;e++){var i=this.encodings[e],s=(0,a.default)(this.options,i.options),n=this.createGroup(t,s.marginTop,this.svg);this.setGroupOptions(n,s),this.drawSvgBarcode(n,s,i),this.drawSVGText(n,s,i),t+=i.width}}},{key:"prepareSVG",value:function(){while(this.svg.firstChild)this.svg.removeChild(this.svg.firstChild);(0,r.calculateEncodingAttributes)(this.encodings,this.options);var t=(0,r.getTotalWidthOfEncodings)(this.encodings),e=(0,r.getMaximumHeightOfEncodings)(this.encodings),i=t+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(i,e),this.options.background&&this.drawRect(0,0,i,e,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(t,e,i){var s,n=i.data;s="top"==e.textPosition?e.fontSize+e.textMargin:0;for(var a=0,r=0,o=0;o<n.length;o++)r=o*e.width+i.barcodePadding,"1"===n[o]?a++:a>0&&(this.drawRect(r-e.width*a,s,e.width*a,e.height,t),a=0);a>0&&this.drawRect(r-e.width*(a-1),s,e.width*a,e.height,t)}},{key:"drawSVGText",value:function(t,e,i){var s,n,a=this.document.createElementNS(c,"text");e.displayValue&&(a.setAttribute("style","font:"+e.fontOptions+" "+e.fontSize+"px "+e.font),n="top"==e.textPosition?e.fontSize-e.textMargin:e.height+e.textMargin+e.fontSize,"left"==e.textAlign||i.barcodePadding>0?(s=0,a.setAttribute("text-anchor","start")):"right"==e.textAlign?(s=i.width-1,a.setAttribute("text-anchor","end")):(s=i.width/2,a.setAttribute("text-anchor","middle")),a.setAttribute("x",s),a.setAttribute("y",n),a.appendChild(this.document.createTextNode(i.text)),t.appendChild(a))}},{key:"setSvgAttributes",value:function(t,e){var i=this.svg;i.setAttribute("width",t+"px"),i.setAttribute("height",e+"px"),i.setAttribute("x","0px"),i.setAttribute("y","0px"),i.setAttribute("viewBox","0 0 "+t+" "+e),i.setAttribute("xmlns",c),i.setAttribute("version","1.1"),i.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(t,e,i){var s=this.document.createElementNS(c,"g");return s.setAttribute("transform","translate("+t+", "+e+")"),i.appendChild(s),s}},{key:"setGroupOptions",value:function(t,e){t.setAttribute("style","fill:"+e.lineColor+";")}},{key:"drawRect",value:function(t,e,i,s,n){var a=this.document.createElementNS(c,"rect");return a.setAttribute("x",t),a.setAttribute("y",e),a.setAttribute("width",i),a.setAttribute("height",s),n.appendChild(a),a}}]),t}();e.default=h},be61:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAACFklEQVQ4T2NkwAIaGhpYXr5ld2BkZHBg+M+oycDwXxSijPE1A+P/6///MxwQF/55oKGh4Q+6dkZ0gay8TkcGhv/5DAwMMtgsQxJ7wsDAOHHapPL9yOoQBjY0MGW/58z5//9/HAGDUKQZGRkXTRX8PoWhoeEf2A8w2ez8zjxSDYPpBRs6sXwS3ECoN7tJcRmmWsZSkPcZQRHw6h3HGvQwY2dnY/TxtJUwNFAX4ufnZvv48euv8xduvtuy/fCLnz9//cdi+RMxoR8hjJm57S6MjIwdyApAhhXlR6t9//7jz/qN+58+e/r6p5S0KHugv6M0JycHS9/EpbewGfr///8Kxqy89hYGBkYPZAODA5wlZWXFuCZMXn4XJG5rbSB0+OiFdyB2QW6k8uPHr76t3bD3OaYr/+9gzMrtWMvAyCCPLNnSkKU9e966uw8fvfgBEp86sdw4O7/zLIgtLyfBkZoUpFzTMO0qhoH/GR4yZuW2H2JgZORClpzcX2pYVNJ3wcJCVzAizF0RJrdi5c77J05eft/XU2SQW9h9HtPA/9+wGki+C8EGYnoZIwytDIQOHyMiDMFexhIp+GJZRVmWf878jXcuXLz5CWukYEs2IIW40uHd+0++Rkd4KMyet+HOrdsPvyEbCk42uBI2vlyjpirP9evnz/8PHr34jlxYgBM2SICqWY8mhQPYUGoXXzCXUq+ARQpdSqoAAOrDNoyhqFj3AAAAAElFTkSuQmCC"},be88:function(t,e,i){},be98:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=i("5726"),a=c(n),r=i("e762"),o=c(r),l=i("e8b2");function c(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function u(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var p=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],f=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],m=function(t){function e(t,i){h(this,e);var s=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));if(s.isValid=!1,-1!==t.search(/^[0-9]{6}$/))s.middleDigits=t,s.upcA=g(t,"0"),s.text=i.text||""+s.upcA[0]+t+s.upcA[s.upcA.length-1],s.isValid=!0;else{if(-1===t.search(/^[01][0-9]{7}$/))return d(s);if(s.middleDigits=t.substring(1,t.length-1),s.upcA=g(s.middleDigits,t[0]),s.upcA[s.upcA.length-1]!==t[t.length-1])return d(s);s.isValid=!0}return s.displayValue=i.displayValue,i.fontSize>10*i.width?s.fontSize=10*i.width:s.fontSize=i.fontSize,s.guardHeight=i.height+s.fontSize/2+i.textMargin,s}return u(e,t),s(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var t="";return t+="101",t+=this.encodeMiddleDigits(),t+="010101",{data:t,text:this.text}}},{key:"guardedEncoding",value:function(){var t=[];return this.displayValue&&t.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),t.push({data:"101",options:{height:this.guardHeight}}),t.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),t.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&t.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),t}},{key:"encodeMiddleDigits",value:function(){var t=this.upcA[0],e=this.upcA[this.upcA.length-1],i=f[parseInt(e)][parseInt(t)];return(0,a.default)(this.middleDigits,i)}}]),e}(o.default);function g(t,e){for(var i=parseInt(t[t.length-1]),s=p[i],n="",a=0,r=0;r<s.length;r++){var o=s[r];n+="X"===o?t[a++]:o}return n=""+e+n,""+n+(0,l.checksum)(n)}e.default=m},bea0:function(t,e,i){var s,n;(function(a,r){s=r,n="function"===typeof s?s.call(e,i,e,t):s,void 0===n||(t.exports=n)})(0,(function(){var t={172351395:{name:"EBML",type:"Container"},646:{name:"EBMLVersion",type:"Uint"},759:{name:"EBMLReadVersion",type:"Uint"},754:{name:"EBMLMaxIDLength",type:"Uint"},755:{name:"EBMLMaxSizeLength",type:"Uint"},642:{name:"DocType",type:"String"},647:{name:"DocTypeVersion",type:"Uint"},645:{name:"DocTypeReadVersion",type:"Uint"},108:{name:"Void",type:"Binary"},63:{name:"CRC-32",type:"Binary"},190023271:{name:"SignatureSlot",type:"Container"},16010:{name:"SignatureAlgo",type:"Uint"},16026:{name:"SignatureHash",type:"Uint"},16037:{name:"SignaturePublicKey",type:"Binary"},16053:{name:"Signature",type:"Binary"},15963:{name:"SignatureElements",type:"Container"},15995:{name:"SignatureElementList",type:"Container"},9522:{name:"SignedElement",type:"Binary"},139690087:{name:"Segment",type:"Container"},21863284:{name:"SeekHead",type:"Container"},3515:{name:"Seek",type:"Container"},5035:{name:"SeekID",type:"Binary"},5036:{name:"SeekPosition",type:"Uint"},88713574:{name:"Info",type:"Container"},13220:{name:"SegmentUID",type:"Binary"},13188:{name:"SegmentFilename",type:"String"},1882403:{name:"PrevUID",type:"Binary"},1868715:{name:"PrevFilename",type:"String"},2013475:{name:"NextUID",type:"Binary"},1999803:{name:"NextFilename",type:"String"},1092:{name:"SegmentFamily",type:"Binary"},10532:{name:"ChapterTranslate",type:"Container"},10748:{name:"ChapterTranslateEditionUID",type:"Uint"},10687:{name:"ChapterTranslateCodec",type:"Uint"},10661:{name:"ChapterTranslateID",type:"Binary"},710577:{name:"TimecodeScale",type:"Uint"},1161:{name:"Duration",type:"Float"},1121:{name:"DateUTC",type:"Date"},15273:{name:"Title",type:"String"},3456:{name:"MuxingApp",type:"String"},5953:{name:"WritingApp",type:"String"},103:{name:"Timecode",type:"Uint"},6228:{name:"SilentTracks",type:"Container"},6359:{name:"SilentTrackNumber",type:"Uint"},39:{name:"Position",type:"Uint"},43:{name:"PrevSize",type:"Uint"},35:{name:"SimpleBlock",type:"Binary"},32:{name:"BlockGroup",type:"Container"},33:{name:"Block",type:"Binary"},34:{name:"BlockVirtual",type:"Binary"},13729:{name:"BlockAdditions",type:"Container"},38:{name:"BlockMore",type:"Container"},110:{name:"BlockAddID",type:"Uint"},37:{name:"BlockAdditional",type:"Binary"},27:{name:"BlockDuration",type:"Uint"},122:{name:"ReferencePriority",type:"Uint"},123:{name:"ReferenceBlock",type:"Int"},125:{name:"ReferenceVirtual",type:"Int"},36:{name:"CodecState",type:"Binary"},13730:{name:"DiscardPadding",type:"Int"},14:{name:"Slices",type:"Container"},104:{name:"TimeSlice",type:"Container"},76:{name:"LaceNumber",type:"Uint"},77:{name:"FrameNumber",type:"Uint"},75:{name:"BlockAdditionID",type:"Uint"},78:{name:"Delay",type:"Uint"},79:{name:"SliceDuration",type:"Uint"},72:{name:"ReferenceFrame",type:"Container"},73:{name:"ReferenceOffset",type:"Uint"},74:{name:"ReferenceTimeCode",type:"Uint"},47:{name:"EncryptedBlock",type:"Binary"},106212971:{name:"Tracks",type:"Container"},46:{name:"TrackEntry",type:"Container"},87:{name:"TrackNumber",type:"Uint"},13253:{name:"TrackUID",type:"Uint"},3:{name:"TrackType",type:"Uint"},57:{name:"FlagEnabled",type:"Uint"},8:{name:"FlagDefault",type:"Uint"},5546:{name:"FlagForced",type:"Uint"},28:{name:"FlagLacing",type:"Uint"},11751:{name:"MinCache",type:"Uint"},11768:{name:"MaxCache",type:"Uint"},254851:{name:"DefaultDuration",type:"Uint"},216698:{name:"DefaultDecodedFieldDuration",type:"Uint"},209231:{name:"TrackTimecodeScale",type:"Float"},4991:{name:"TrackOffset",type:"Int"},5614:{name:"MaxBlockAdditionID",type:"Uint"},4974:{name:"Name",type:"String"},177564:{name:"Language",type:"String"},6:{name:"CodecID",type:"String"},9122:{name:"CodecPrivate",type:"Binary"},362120:{name:"CodecName",type:"String"},13382:{name:"AttachmentLink",type:"Uint"},1742487:{name:"CodecSettings",type:"String"},1785920:{name:"CodecInfoURL",type:"String"},438848:{name:"CodecDownloadURL",type:"String"},42:{name:"CodecDecodeAll",type:"Uint"},12203:{name:"TrackOverlay",type:"Uint"},5802:{name:"CodecDelay",type:"Uint"},5819:{name:"SeekPreRoll",type:"Uint"},9764:{name:"TrackTranslate",type:"Container"},9980:{name:"TrackTranslateEditionUID",type:"Uint"},9919:{name:"TrackTranslateCodec",type:"Uint"},9893:{name:"TrackTranslateTrackID",type:"Binary"},96:{name:"Video",type:"Container"},26:{name:"FlagInterlaced",type:"Uint"},5048:{name:"StereoMode",type:"Uint"},5056:{name:"AlphaMode",type:"Uint"},5049:{name:"OldStereoMode",type:"Uint"},48:{name:"PixelWidth",type:"Uint"},58:{name:"PixelHeight",type:"Uint"},5290:{name:"PixelCropBottom",type:"Uint"},5307:{name:"PixelCropTop",type:"Uint"},5324:{name:"PixelCropLeft",type:"Uint"},5341:{name:"PixelCropRight",type:"Uint"},5296:{name:"DisplayWidth",type:"Uint"},5306:{name:"DisplayHeight",type:"Uint"},5298:{name:"DisplayUnit",type:"Uint"},5299:{name:"AspectRatioType",type:"Uint"},963876:{name:"ColourSpace",type:"Binary"},1029411:{name:"GammaValue",type:"Float"},230371:{name:"FrameRate",type:"Float"},97:{name:"Audio",type:"Container"},53:{name:"SamplingFrequency",type:"Float"},14517:{name:"OutputSamplingFrequency",type:"Float"},31:{name:"Channels",type:"Uint"},15739:{name:"ChannelPositions",type:"Binary"},8804:{name:"BitDepth",type:"Uint"},98:{name:"TrackOperation",type:"Container"},99:{name:"TrackCombinePlanes",type:"Container"},100:{name:"TrackPlane",type:"Container"},101:{name:"TrackPlaneUID",type:"Uint"},102:{name:"TrackPlaneType",type:"Uint"},105:{name:"TrackJoinBlocks",type:"Container"},109:{name:"TrackJoinUID",type:"Uint"},64:{name:"TrickTrackUID",type:"Uint"},65:{name:"TrickTrackSegmentUID",type:"Binary"},70:{name:"TrickTrackFlag",type:"Uint"},71:{name:"TrickMasterTrackUID",type:"Uint"},68:{name:"TrickMasterTrackSegmentUID",type:"Binary"},11648:{name:"ContentEncodings",type:"Container"},8768:{name:"ContentEncoding",type:"Container"},4145:{name:"ContentEncodingOrder",type:"Uint"},4146:{name:"ContentEncodingScope",type:"Uint"},4147:{name:"ContentEncodingType",type:"Uint"},4148:{name:"ContentCompression",type:"Container"},596:{name:"ContentCompAlgo",type:"Uint"},597:{name:"ContentCompSettings",type:"Binary"},4149:{name:"ContentEncryption",type:"Container"},2017:{name:"ContentEncAlgo",type:"Uint"},2018:{name:"ContentEncKeyID",type:"Binary"},2019:{name:"ContentSignature",type:"Binary"},2020:{name:"ContentSigKeyID",type:"Binary"},2021:{name:"ContentSigAlgo",type:"Uint"},2022:{name:"ContentSigHashAlgo",type:"Uint"},206814059:{name:"Cues",type:"Container"},59:{name:"CuePoint",type:"Container"},51:{name:"CueTime",type:"Uint"},55:{name:"CueTrackPositions",type:"Container"},119:{name:"CueTrack",type:"Uint"},113:{name:"CueClusterPosition",type:"Uint"},112:{name:"CueRelativePosition",type:"Uint"},50:{name:"CueDuration",type:"Uint"},4984:{name:"CueBlockNumber",type:"Uint"},106:{name:"CueCodecState",type:"Uint"},91:{name:"CueReference",type:"Container"},22:{name:"CueRefTime",type:"Uint"},23:{name:"CueRefCluster",type:"Uint"},4959:{name:"CueRefNumber",type:"Uint"},107:{name:"CueRefCodecState",type:"Uint"},155296873:{name:"Attachments",type:"Container"},8615:{name:"AttachedFile",type:"Container"},1662:{name:"FileDescription",type:"String"},1646:{name:"FileName",type:"String"},1632:{name:"FileMimeType",type:"String"},1628:{name:"FileData",type:"Binary"},1710:{name:"FileUID",type:"Uint"},1653:{name:"FileReferral",type:"Binary"},1633:{name:"FileUsedStartTime",type:"Uint"},1634:{name:"FileUsedEndTime",type:"Uint"},4433776:{name:"Chapters",type:"Container"},1465:{name:"EditionEntry",type:"Container"},1468:{name:"EditionUID",type:"Uint"},1469:{name:"EditionFlagHidden",type:"Uint"},1499:{name:"EditionFlagDefault",type:"Uint"},1501:{name:"EditionFlagOrdered",type:"Uint"},54:{name:"ChapterAtom",type:"Container"},13252:{name:"ChapterUID",type:"Uint"},5716:{name:"ChapterStringUID",type:"String"},17:{name:"ChapterTimeStart",type:"Uint"},18:{name:"ChapterTimeEnd",type:"Uint"},24:{name:"ChapterFlagHidden",type:"Uint"},1432:{name:"ChapterFlagEnabled",type:"Uint"},11879:{name:"ChapterSegmentUID",type:"Binary"},11964:{name:"ChapterSegmentEditionUID",type:"Uint"},9155:{name:"ChapterPhysicalEquiv",type:"Uint"},15:{name:"ChapterTrack",type:"Container"},9:{name:"ChapterTrackNumber",type:"Uint"},0:{name:"ChapterDisplay",type:"Container"},5:{name:"ChapString",type:"String"},892:{name:"ChapLanguage",type:"String"},894:{name:"ChapCountry",type:"String"},10564:{name:"ChapProcess",type:"Container"},10581:{name:"ChapProcessCodecID",type:"Uint"},1293:{name:"ChapProcessPrivate",type:"Binary"},10513:{name:"ChapProcessCommand",type:"Container"},10530:{name:"ChapProcessTime",type:"Uint"},10547:{name:"ChapProcessData",type:"Binary"},39109479:{name:"Tags",type:"Container"},13171:{name:"Tag",type:"Container"},9152:{name:"Targets",type:"Container"},10442:{name:"TargetTypeValue",type:"Uint"},9162:{name:"TargetType",type:"String"},9157:{name:"TagTrackUID",type:"Uint"},9161:{name:"TagEditionUID",type:"Uint"},9156:{name:"TagChapterUID",type:"Uint"},9158:{name:"TagAttachmentUID",type:"Uint"},10184:{name:"SimpleTag",type:"Container"},1443:{name:"TagName",type:"String"},1146:{name:"TagLanguage",type:"String"},1156:{name:"TagDefault",type:"Uint"},1159:{name:"TagString",type:"String"},1157:{name:"TagBinary",type:"Binary"}};function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function i(t,e){this.name=t||"Unknown",this.type=e||"Unknown"}function s(t,e){i.call(this,t,e||"Uint")}function n(t){return t.length%2===1?"0"+t:t}function a(t,e){i.call(this,t,e||"Float")}function r(t,e){i.call(this,t,e||"Container")}function o(t){r.call(this,"File","File"),this.setSource(t)}return i.prototype.updateBySource=function(){},i.prototype.setSource=function(t){this.source=t,this.updateBySource()},i.prototype.updateByData=function(){},i.prototype.setData=function(t){this.data=t,this.updateByData()},e(s,i),s.prototype.updateBySource=function(){this.data="";for(var t=0;t<this.source.length;t++){var e=this.source[t].toString(16);this.data+=n(e)}},s.prototype.updateByData=function(){var t=this.data.length/2;this.source=new Uint8Array(t);for(var e=0;e<t;e++){var i=this.data.substr(2*e,2);this.source[e]=parseInt(i,16)}},s.prototype.getValue=function(){return parseInt(this.data,16)},s.prototype.setValue=function(t){this.setData(n(t.toString(16)))},e(a,i),a.prototype.getFloatArrayType=function(){return this.source&&4===this.source.length?Float32Array:Float64Array},a.prototype.updateBySource=function(){var t=this.source.reverse(),e=this.getFloatArrayType(),i=new e(t.buffer);this.data=i[0]},a.prototype.updateByData=function(){var t=this.getFloatArrayType(),e=new t([this.data]),i=new Uint8Array(e.buffer);this.source=i.reverse()},a.prototype.getValue=function(){return this.data},a.prototype.setValue=function(t){this.setData(t)},e(r,i),r.prototype.readByte=function(){return this.source[this.offset++]},r.prototype.readUint=function(){for(var t=this.readByte(),e=8-t.toString(2).length,i=t-(1<<7-e),s=0;s<e;s++)i*=256,i+=this.readByte();return i},r.prototype.updateBySource=function(){for(this.data=[],this.offset=0;this.offset<this.source.length;this.offset=o){var e=this.readUint(),n=this.readUint(),o=Math.min(this.offset+n,this.source.length),l=this.source.slice(this.offset,o),c=t[e]||{name:"Unknown",type:"Unknown"},h=i;switch(c.type){case"Container":h=r;break;case"Uint":h=s;break;case"Float":h=a;break}var d=new h(c.name,c.type);d.setSource(l),this.data.push({id:e,idHex:e.toString(16),data:d})}},r.prototype.writeUint=function(t,e){for(var i=1,s=128;t>=s&&i<8;i++,s*=128);if(!e)for(var n=s+t,a=i-1;a>=0;a--){var r=n%256;this.source[this.offset+a]=r,n=(n-r)/256}this.offset+=i},r.prototype.writeSections=function(t){this.offset=0;for(var e=0;e<this.data.length;e++){var i=this.data[e],s=i.data.source,n=s.length;this.writeUint(i.id,t),this.writeUint(n,t),t||this.source.set(s,this.offset),this.offset+=n}return this.offset},r.prototype.updateByData=function(){var t=this.writeSections("draft");this.source=new Uint8Array(t),this.writeSections()},r.prototype.getSectionById=function(t){for(var e=0;e<this.data.length;e++){var i=this.data[e];if(i.id===t)return i.data}return null},e(o,r),o.prototype.fixDuration=function(t){var e=this.getSectionById(139690087);if(!e)return!1;var i=e.getSectionById(88713574);if(!i)return!1;var s=i.getSectionById(710577);if(!s)return!1;var n=i.getSectionById(1161);if(n){if(!(n.getValue()<=0))return!1;n.setValue(t)}else n=new a("Duration","Float"),n.setValue(t),i.data.push({id:1161,data:n});return s.setValue(1e6),i.updateByData(),e.updateByData(),this.updateByData(),!0},o.prototype.toBlob=function(){return new Blob([this.source.buffer],{type:"video/webm"})},function(t,e,i){try{var s=new FileReader;s.onloadend=function(){try{var n=new o(new Uint8Array(s.result));n.fixDuration(e)&&(t=n.toBlob())}catch(a){}i(t)},s.readAsArrayBuffer(t)}catch(n){i(t)}}}))},befe:function(t,e,i){},bf03:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"rendererd-mode",style:{width:t.WIDTH+"px",height:t.HEIGHT+"px"},attrs:{id:"mode3dContainer"}},[i("canvas",{staticClass:"rendererd-mode-canvas",attrs:{id:"renderCanvas",tanindex:"-1"}}),i("div",{staticClass:"mask-opt flex flex-center",style:{width:t.ratioWidth+"px",height:t.ratioHeight+"px",borderLeftWidth:Math.round((t.WIDTH-240-t.ratioWidth)/2)+"px",borderRightWidth:Math.round((t.WIDTH-240-t.ratioWidth)/2)+"px",borderBottomWidth:Math.round((t.HEIGHT-t.ratioHeight)/2)+"px",borderTopWidth:Math.round((t.HEIGHT-t.ratioHeight)/2)+"px"},attrs:{id:"maskOpt"}},[i("div",{staticClass:"mask-opt__panel",style:{width:t.ratioWidth+"px",height:t.ratioHeight+"px"}},[i("div",{staticClass:"ratio"},[t._v(" "+t._s(t.ratioText())+" ")]),1===t.guideFlag?i("div",{staticClass:"mask-opt__panel-line1",style:{height:t.ratioHeight/3+"px",top:t.ratioHeight/3-2+"px"}}):t._e(),1===t.guideFlag?i("div",{staticClass:"mask-opt__panel-line2",style:{width:t.ratioWidth/3+"px",top:-t.ratioHeight/3+"px"}}):t._e(),2===t.guideFlag?i("div",{staticClass:"mask-opt__panel-line1",style:{height:.382*t.ratioHeight/2+"px",top:t.ratioHeight/2-.382*t.ratioHeight/4+"px"}}):t._e(),2===t.guideFlag?i("div",{staticClass:"mask-opt__panel-line2",style:{width:.382*t.ratioWidth/2+"px",top:-.382*t.ratioHeight/2+"px"}}):t._e()])]),i("div",{staticClass:"top",style:{height:Math.round((t.HEIGHT-t.ratioHeight)/2)+"px",width:t.WIDTH+"px",top:0},on:{click:function(e){return e.stopPropagation(),t.clearChooseMode(e)}}}),i("div",{staticClass:"top",style:{height:parseInt((t.HEIGHT-t.ratioHeight)/2)+"px",width:t.WIDTH+"px",bottom:0},on:{click:function(e){return e.stopPropagation(),t.clearChooseMode(e)}}}),i("div",{staticClass:"top",style:{height:t.HEIGHT+"px",width:parseInt((t.WIDTH-240-t.ratioWidth)/2)+"px",top:parseInt((t.HEIGHT-t.ratioHeight)/2)+"px",left:0},on:{click:function(e){return e.stopPropagation(),t.clearChooseMode(e)}}}),i("div",{staticClass:"top",style:{height:t.HEIGHT+"px",width:Math.round((t.WIDTH-240-t.ratioWidth)/2)+"px",top:Math.round((t.HEIGHT-t.ratioHeight)/2)+"px",left:Math.round((t.WIDTH-240-t.ratioWidth)/2)+t.ratioWidth+"px"},on:{click:function(e){return e.stopPropagation(),t.clearChooseMode(e)}}}),i("a-tooltip",{attrs:{placement:"top","overlay-class-name":"tip-higher"}},[i("template",{slot:"title"},[i("span",{staticClass:"fo-12"},[t._v("包小盒独创研发的云渲染引擎（Rendering Engine by BXH，简称REB），通过改变环 境、光照和材质来模拟真实棚拍效果图的成像 技术。")])]),i("div",{staticClass:"tip-guys flex flex-start item-center"},[i("img",{attrs:{src:s("7b9c"),alt:""}}),i("div",{staticClass:"ml-4 fo-mode fo-12"},[t._v("包小盒云渲染引擎强力支持")])])],2),i("a-button",{staticClass:"render-btn",style:{position:"fixed",bottom:"30px",left:(this.WIDTH-240)/2+256-60+"px"},attrs:{loading:t.renderLoad,type:"primary"},on:{click:function(e){return t.screenshot()}}},[i("img",{attrs:{src:s("6d570"),alt:""}}),i("span",{staticClass:"fo-14 fo-white ml-8"},[t._v("立即渲染")])]),t.user.is_admin?i("a-button",{staticClass:"render-btn",style:{position:"fixed",bottom:"30px",left:(this.WIDTH-240)/2+256+70+"px",width:"50px",padding:"0"},attrs:{loading:t.renderLoad,type:"primary"},on:{click:function(e){return t.startRender()}}},[i("span",{staticClass:"fo-14 fo-white"},[t._v("下载")])]):t._e(),i("guide",{model:{value:t.guideFlag,callback:function(e){t.guideFlag=e},expression:"guideFlag"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showShotCutImg,expression:"showShotCutImg"}],staticClass:"screenshot",style:{width:t.ratioWidth+"px",height:t.ratioHeight+"px",left:(t.WIDTH-240-t.ratioWidth)/2+256+56+"px",top:(t.HEIGHT-t.ratioHeight)/2+56+"px"},attrs:{id:"imgCut"}},[i("img",{attrs:{src:t.shotcutImg}})])],1),i("property",{ref:"property",attrs:{height:t.HEIGHT,active:t.activeModel,transform:t.transformMode,lights:t.lights},on:{"mode-change":t.chooseMode,"transform-change":t.transformSetMode,"transform-action":t.transformChange,copy:t.copyMode,del:t.delMode,"folder-change":t.doAnimate,"attch-change":function(e){return t.$emit("attch-history","animate")},"attch-history":function(e){return t.$emit("attch-history",e)},"change-size":function(e){return t.$emit("change-size",e)},"ratio-change":function(e){return t.$emit("ratio-change",e)},lightColorChange:t.lightColorChange,lightPositionChange:t.lightPositionChange,lightPowerChange:t.lightPowerChange,lightHeightChange:t.lightHeightChange,shadowChange:t.changeShadow,openSunLightChange:t.openSunLightChange}}),i("progress-bar",{on:{cancel:function(e){t.needsToCancel=!0}},model:{value:t.progressBarShow,callback:function(e){t.progressBarShow=e},expression:"progressBarShow"}})],1)},a=[],r=(s("5319"),s("1276"),s("2ca0"),s("5cc6"),s("b39a"),s("ddb0"),s("2b3d"),s("5530")),o=s("5fda"),l=s("c64e"),c=s.n(l),h=s("5a0c"),d=s.n(h),u=s("ed08"),p=s("5943"),f=s("54c2"),m=s("054f"),g=s("5a38"),v=s.n(g),b=s("5880"),y=s("c45c"),_=s("54ca"),x=(s("a362"),{props:["width","height","ratio","bg"],components:{guide:p["default"],property:y["default"],progressBar:_["default"]},data(){return{WIDTH:this.width,HEIGHT:this.height,renderer:null,scene:null,camera:null,controls:null,scene:null,transformControl:null,optControls:null,raycaster:null,mouse:null,INTERSECTED:null,textureCube:null,fog:null,grid:null,axesHelper:null,isClick:!1,ratioHeight:0,ratioWidth:0,transformMode:"translate",guideFlag:0,group:null,renderLoad:!1,bgmesh:null,size:"",light:null,envLight:null,lights:[],transparent:!1,background:"rgba(255,255,255,1)",shotcutImg:"",showShotCutImg:!1,lightColor:"rgba(255,255,255,1)",shadowRaduis:10,hoverHelp:"",activeModel:"",modeList:{},uploadImageUrl:"",suffix:"",moved:!1,envLightColor:"rgba(255,255,255,1)",envLightIntensity:.6,envUrl:"",envIntensity:.7,progressBarShow:!1,needsToCancel:!1}},watch:{width(t){this.WIDTH=t,this.camera.aspect=(this.WIDTH-240)/this.HEIGHT,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.WIDTH-240,this.HEIGHT),this.initRatio(this.ratio),this.transparent?this.scene.background.repeat.x=(this.WIDTH-240)/16:this.background&&!this.background.startsWith("rgba")&&this.initCanvas(this.background),this.doRender()},height(t){this.HEIGHT=t,this.camera.aspect=(this.WIDTH-240)/this.HEIGHT,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.WIDTH-240,this.HEIGHT),this.initRatio(this.ratio),this.transparent?this.scene.background.repeat.x=this.HEIGHT/16:this.background&&!this.background.startsWith("rgba")&&this.initCanvas(this.background),this.doRender()},ratio(t){this.initRatio(t),this.background&&!this.background.startsWith("rgba")&&this.initCanvas(this.background)},bg(t){const e=JSON.parse(t);if(this.transparent=e.transparent,this.transparent){const t=(new o["TextureLoader"]).load(v.a,e=>{t.wrapS=o["RepeatWrapping"],t.wrapT=o["RepeatWrapping"],t.repeat.set((this.WIDTH-240)/16,this.HEIGHT/16),this.scene.background=t,this.fog.color=new o["Color"](16777215),this.doRender()})}else if(e.bg.startsWith("rgba")){const t=new o["Color"](e.bg),i=t;this.scene.background=i,this.bgmesh.material.map=null,this.bgmesh.material.color=i,this.fog.color=t,this.doRender()}else this.fog.color=new o["Color"](16777215),this.initCanvas(e.bg);e.suffix&&(this.suffix=e.suffix),this.background=e.bg}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(b["mapState"])("profile",["user"])),Object(b["mapState"])("editor-v2",["project_data","knife_data","isCup","scale","is_outside","last_saved_local_history_ts","element_craft_list"])),{},{crafts(){return this.element_craft_list},isInside(){return!this.is_outside},modelScale(){return this.knife_data.size?f["a"].modelScale(this.knife_data.size):0}}),mounted(){this.init(),this.initRatio(this.ratio),this.handleKeyDown(),this.$bus.$on("envLightChange",t=>{this.setEnvLight(t)}),this.$bus.$on("renderAddLight",()=>{this.addLight({},{})}),this.$bus.$on("lightCurrentPositionChange",t=>{this.lightCurrentPositionChange(t)}),this.$bus.$on("lightCurrentPowerChange",t=>{this.lightCurrentPowerChange(t)}),this.$bus.$on("lightCurrentHeightChange",t=>{this.lightCurrentHeightChange(t)}),this.$bus.$on("lightCurrentColorChange",t=>{this.lightCurrentColorChange(t)}),this.$bus.$on("doLightCopy",()=>{this.lightsCopy()}),this.$bus.$on("doLightDel",()=>{this.lightsDel()})},beforeDestroy(){this.$bus.$off("envLightChange"),this.$bus.$off("renderAddLight"),this.$bus.$off("lightCurrentPositionChange"),this.$bus.$off("lightCurrentPowerChange"),this.$bus.$off("lightCurrentHeightChange"),this.$bus.$off("lightCurrentColorChange"),this.$bus.$off("doLightCopy"),this.$bus.$off("doLightDel")},methods:{lightsCopy(){const t=this.lights[this.activeModel.replace("s","")],e=this.scene.getObjectById(t.id);this.addLight(t,e.position),this.doRender()},lightsDel(){const t=this.activeModel.replace("s",""),e=this.lights[t],i=this.scene.getObjectById(e.id);this.clearChooseMode(),this.scene.remove(i),this.lights.splice(t,1),this.doRender()},initSceneLights(t){for(const e in this.lights){const t=this.scene.getObjectById(this.lights[e].id);this.scene.remove(t)}this.lights=[];for(const e of t)this.addLight(e,e.position)},lightCurrentColorChange(t){const e=this.lights[this.activeModel.replace("s","")];e.color=t,this.scene.getObjectById(e.id).color=new o["Color"](t),this.scene.getObjectById(e.id).children[0].update(),this.doRender()},lightCurrentHeightChange(t){const e=this.lights[this.activeModel.replace("s","")];this.scene.getObjectById(e.id).position.setY(t),this.scene.getObjectById(e.id).lookAt(0,0,0),this.doRender()},lightCurrentPowerChange(t){const e=this.lights[this.activeModel.replace("s","")];e.intensity=t,this.scene.getObjectById(e.id).intensity=t,this.doRender()},lightCurrentPositionChange(t){const e=this.lights[this.activeModel.replace("s","")],i=this.scene.getObjectById(e.id);i.position.setX(t.x),i.position.setZ(t.z),i.lookAt(0,0,0),this.doRender()},addLight(t,e){const i={color:t.color||"rgba(255,255,255,1)",intensity:t.intensity||1,width:t.width||5,height:t.height||5,id:"",name:t.name||(this.lights.length>0?"灯光"+(this.lights.length+1):"灯光")},s=new o["RectAreaLight"](i.color,i.intensity,i.width,i.height);s.name=i.name,i.id=s.id,s.position.set(e.x||5,e.y||5,e.z||5),this.scene.add(s),s.lookAt(0,0,0),this.lights.push(i)},setEnvLight({envUrl:t,envLightIntensity:e,color:i,intensity:s}){this.envLightColor=i,this.envLightIntensity=e,this.envIntensity=s,this.envUrl=t,this.$bus.$emit("envLightIntensityChange",e),this.envLight.intensity=s,this.envLight.color=new o["Color"](i),this.doRender()},openSunLightChange(t){this.light.visible=t,this.doRender()},ratioText(){return this.$refs.property?this.$refs.property.claritys[this.$refs.property.clarityIndex].w+" x "+this.$refs.property.claritys[this.$refs.property.clarityIndex].h+" px":""},lightPowerChange(t){this.light.intensity=t,this.doRender()},lightPositionChange(t){this.light.position.x=t.x,this.light.position.z=t.z,this.light.lookAt(0,0,0),this.doRender()},lightHeightChange(t){this.light.position.y=t,this.light.lookAt(0,0,0),this.doRender()},setShadowValue(t){this.$refs.property.shadowValue=t},setPowerValue(t){this.$refs.property.lightPowerValue=Math.floor(50*t*10/10)},setLightValue(t){this.$refs.property.lightPositionValue=parseInt(180*Math.atan(t.z/t.x)/Math.PI)},setLightHeightValue(t){this.$refs.property.lightHeightValue=t/4},setRatio(t,e){this.$refs.property.setRatio(t,e)},calculateSize(t,e,i,s){const n={x:Math.abs(e.max.x-e.min.x),y:Math.abs(e.max.y-e.min.y),z:Math.abs(e.max.z-e.min.z)},a=(Math.abs(t.max.x-t.min.x),Math.abs(t.max.y-t.min.y),Math.abs(t.max.z-t.min.z),{x:i.x-n.x/2-(s.x-n.x/2),y:i.y-n.y/2-(s.y-n.y/2),z:i.z-n.z/2-(s.z-n.z/2)});return["x","y","z"].forEach(t=>{Math.abs(i[t]+n[t]/2-(s[t]-n[t]/2))<Math.abs(a[t])&&(a[t]=i[t]+n[t]/2-(s[t]-n[t]/2)),Math.abs(i[t]+n[t]/2-(s[t]+n[t]/2))<Math.abs(a[t])&&(a[t]=i[t]+n[t]/2-(s[t]+n[t]/2)),Math.abs(i[t]-n[t]/2-(s[t]+n[t]/2))<Math.abs(a[t])&&(a[t]=i[t]-n[t]/2-(s[t]+n[t]/2))}),a},async getAllParams(t=!1){if(t&&this.background&&!this.background.startsWith("rgba")){const t=new FormData;t.append("type",1),t.append("project_id",this.project_data.id),t.append("file",this.convertBase64UrlToBlob(this.background,this.suffix||"png"));const e=await m["a"].putFile(t.get("file"),{xapi:"renderbg",rename:c()()+"."+(this.suffix||"png"),type:JSON.stringify({type:1,project_id:this.project_data.id})});0===e.errno&&(this.uploadImageUrl=e.data.url)}const e=[];for(const a of this.lights){const t=this.scene.getObjectById(a.id);e.push(Object.assign(a,{position:t.position}))}const i={scene:{camera:{position:this.camera.position},backgroundUrl:this.uploadImageUrl,background:this.background.startsWith("rgba")?this.background:this.uploadImageUrl,transparent:this.transparent,ratio:this.ratio,light:{position:this.light.position,intensity:this.light.intensity,color:"#"+this.light.color.getHexString(),visible:this.light.visible},lights:e,envLight:{color:this.envLightColor,intensity:this.envIntensity,envLightIntensity:this.envLightIntensity,envUrl:this.envUrl},shadow:{radio:this.shadowRaduis},groups:[]}};this.group.children[0].children[1].geometry.computeBoundingBox();const s=this.group.children[0].children[1].geometry.boundingBox,n=this.group.children[0].position;for(const a in this.group.children){const t=this.group.children[a];let e=null;if(a>0){t.children[1].geometry.computeBoundingBox();const i=t.children[1].geometry.boundingBox;e=this.calculateSize(i,s,t.position,n)}i.scene.groups.push({position:t.position,rotation:t.rotation,spacing:e,folderCurrent:this.modeList["id_"+t.id].current,name:t.name})}return i},handleKeyDown(){const t=document.getElementById("mode3dContainer");t.addEventListener("keydown",t=>{const{ctrlKey:e,metaKey:i,shiftKey:s,code:n}=t;this.activeModel&&((e||i)&&"KeyC"===n&&this.copyMode(),(e||i)&&"KeyZ"===n&&this.$emit("rollback"),(e||i)&&s&&"KeyZ"===n&&this.$emit("recovery"),"Backspace"===n&&this.group.children.length>1&&this.delMode(),"Tab"===n&&this.transformSetMode("translate"===this.transformMode?"rotate":"translate")),(e||i)&&"KeyG"===n&&(this.grid.visible=!this.grid.visible),(e||i)&&"KeyI"===n&&(this.axesHelper.visible=!this.axesHelper.visible),t.preventDefault(),this.doRender()})},copyMode(){if(this.group.children.length>=20)return this.$message.warning("同一模型数量最多为20个"),!1;const t=this.group.getObjectById(this.activeModel),e=t.clone();e.position.set(e.position.x+4.5,e.position.y,e.position.z),e.name=t.name+"-副本",this.initModeLineData(e,this.activeModel),this.group.add(e),this.chooseMode(e),this.$refs.property.setSceneChildren(this.group.children),this.$emit("attch-history","copyMode")},delMode(){const t=this.group.getObjectById(this.activeModel);let e=-1;for(const i in this.modeList)this.modeList[i].id==this.activeModel&&(e=i);e>-1&&this.modeList.splice(e,i);this.group.remove(t);this.clearChooseMode(),this.$refs.property.setSceneChildren(this.group.children),this.doRender(),this.$emit("attch-history","delMode")},chooseMode(t){if(t){if("number"===typeof t)return-1==t?void this.clearChooseMode():(this.clearChooseMode(),void(this.activeModel=t));if("string"===typeof t&&t.indexOf("s")>-1){this.clearChooseMode(),this.activeModel=t;const e=this.lights[t.replace("s","")],i=this.scene.getObjectById(e.id);return this.doRender(),void this.$bus.$emit("getCurrentLight",{light:e,position:i.position})}this.activeModel=t.id,this.transformSetMode("translate"),this.transformControl.attach(t),this.setFolderValue(),this.doRender()}},transformChange(t){const e=this.group.getObjectById(this.activeModel);e.position.set(parseFloat(t.position.x||0),parseFloat(t.position.y||0),parseFloat(t.position.z||0)),e.rotation.set(parseFloat(t.rotation.x||0),parseFloat(t.rotation.y||0),parseFloat(t.rotation.z||0)),this.doRender(),this.$emit("attch-history","transformChange")},clearChooseMode(){this.activeModel="",this.transformControl.detach(),this.doRender()},changeShadow(t){this.shadowRaduis=t,this.light.shadow.radius=this.shadowRaduis,this.doRender()},lightColorChange(t){this.lightColor=t,this.changeLightColor(),this.$emit("attch-history","colorConfirmLight")},changeLightColor(){this.light.color=new o["Color"](this.lightColor),this.$refs.property.lightColor=this.lightColor,this.doRender()},async screenshot(t=!1,e=!0){this.$track({category:"render-3d",action:"click"});const i=this.renderer.domElement;this.renderer.render(this.scene,this.camera);i.getContext("2d");const s=new Image;s.src=i.toDataURL("image/png"),s.onload=async()=>{const i=document.createElement("canvas");i.width=this.ratioWidth,i.height=this.ratioHeight;const n=i.getContext("2d");n.drawImage(s,(this.WIDTH-240-this.ratioWidth)/2,(this.HEIGHT-this.ratioHeight)/2,this.ratioWidth,this.ratioHeight,0,0,this.ratioWidth,this.ratioHeight),this.shotcutImg=i.toDataURL("image/jpeg",.9);const a=document.getElementById("imgCut");let r=1,o=0,l=0;const h=parseInt(a.style.top.replace("px")),d=parseInt(a.style.left.replace("px")),u=window.innerWidth;e&&(this.showShotCutImg=!0);const p=new FormData;p.append("type",1),p.append("project_id",this.project_data.id),p.append("file",this.convertBase64UrlToBlob(this.shotcutImg));const f=await m["a"].putFile(p.get("file"),{xapi:"rendercut",rename:c()()+".png",type:JSON.stringify({type:1,project_id:this.project_data.id})});await this.startRender(!0,"",t,f.data.url),e&&(this.$nextTick(()=>{const t=setInterval(()=>{r-=.02,o-=.02*(56+this.HEIGHT/2),l+=.01*(u-512+50+56),a.style.transform=`scale(${r})`,a.style.top=h+o+"px",a.style.left=d+l+"px",r<=.02&&(clearInterval(t),this.showShotCutImg=!1,a.style.left=(this.WIDTH-240-this.ratioWidth)/2+256+56+"px",a.style.top=(this.HEIGHT-this.ratioHeight)/2+56+"px",a.style.transform="scale(1)")},15)}),this.$emit("change-result-animate"))}},convertBase64UrlToBlob(t,e="png"){const i=window.atob(t.split(",")[1]),s=new ArrayBuffer(i.length),n=new Uint8Array(s);for(let a=0;a<i.length;a++)n[a]=i.charCodeAt(a);return new Blob([s],{type:"image/"+e})},async startRender(t,e,i,s,n=!1){n||(this.progressBarShow=!0);const a={embedImages:!0,truncateDrawRange:!1,forceIndices:!0,binary:!0,maxTextureSize:4096,onlyVisible:!1};if(this.background&&!this.background.startsWith("rgba")){await this.initCanvas(this.background,"prod")}const r=new u["a"],o=JSON.stringify(await this.getAllParams(!0));this.renderLoad=!0;const l=[this.scene.getObjectByName("container"),this.scene.getObjectByName("plane"),this.bgmesh];return new Promise(h=>{r.parse(l,async a=>{if(t){const t=new Blob([a],{type:"application/octet-stream"});t.lastModifiedDate=new Date;const r=c()();t.name=r+".glb";const l=await m["a"].putFile(t,{xapi:"glb",rename:d()().format("YYYYMMDD")+"/"+t.name,type:"glb"});if(!l||!l.data||!l.data.url)return void this.$message.error("上传模型失败");if(h(l.data.url),n)return this.progressBarShow=!1,this.renderLoad=!1,!1;if(this.needsToCancel)return this.needsToCancel=!1,this.renderLoad=!1,void(this.progressBarShow=!1);const u=new FormData;if(u.append("filepath",l.data.url),u.append("uuid",r),u.append("type","model"),u.append("quality",this.renderQuality),u.append("project_id",this.project_data.id),u.append("size",this.size),u.append("version",3),u.append("d3_params",o),u.append("task_id",e),u.append("thumbpath",s),u.append("params",JSON.stringify({camera:{position:this.camera.position},light:{position:this.light.position,intensity:10*this.light.intensity,color:this.lightColor,angle:this.shadowRaduis*Math.PI/180},background:this.transparent?"transparent":this.background.startsWith("rgba")?"color":"image",shadow:"SUN"})),this.needsToCancel)return this.needsToCancel=!1,this.renderLoad=!1,void(this.progressBarShow=!1);this.$api.material.uploadModelFilev2(u).then(t=>{this.renderLoad=!1,h(!1),this.progressBarShow=!1,i&&(h(!0),this.$emit("change-task",t.data.task_id),this.needsToCancel&&(this.$api.material.delImage({id:t.data.task_id}),this.needsToCancel=!1))})}else{const t=document.createElement("a");t.style.display="none",document.body.appendChild(t);const e=new Blob([a],{type:"application/octet-stream"});t.href=URL.createObjectURL(e),t.download="test.glb",t.click(),this.renderLoad=!1,this.progressBarShow=!1}},a)})},initRatio(t){const e=t.split(":"),i=e[0]/e[1];this.WIDTH-240>this.HEIGHT?(this.ratioHeight=this.HEIGHT-60,this.ratioWidth=this.HEIGHT-60):(this.ratioHeight=this.WIDTH-240-60,this.ratioWidth=this.WIDTH-240-60),i>1?this.ratioHeight=this.ratioHeight/i:this.ratioWidth=this.ratioWidth*i},initCanvas(t,e="local"){if(!t.startsWith("rgba")){const i=new Image;return i.src=t,new Promise(t=>{i.onload=()=>{const s=i.width/i.height,n=this.ratioWidth/this.ratioHeight;let a=0,r=0;s>n?(r=this.ratioHeight,a=s*this.ratioHeight):(a=this.ratioWidth,r=this.ratioWidth/s);const l=(this.WIDTH-240-a)/2,c=(this.HEIGHT-r)/2,h=document.createElement("canvas"),d=h.getContext("2d");if("local"===e){h.width=this.WIDTH-240,h.height=this.HEIGHT,d.fillStyle="#ffffff",d.fillRect(0,0,this.WIDTH-240,this.HEIGHT),d.drawImage(i,l,c,a,r);const t=new o["CanvasTexture"](h);this.scene.background=t}else{h.width=a,h.height=r,d.translate(0,r),d.scale(1,-1),d.drawImage(i,0,0,a,r);const t=new o["CanvasTexture"](h);this.bgmesh.material.map=t}this.doRender(),t(!0)}})}{const e=document.createElement("canvas"),i=e.getContext("2d");e.width=this.ratioWidth,e.height=this.ratioHeight,i.fillStyle=t,i.fillRect(0,0,this.ratioWidth,this.ratioHeight);const s=new o["CanvasTexture"](e);this.bgmesh.material.map=s}},init(){this.initRenderer(),this.initCamera(),this.initRaycaster(),this.initControls(),this.initScene(),this.initLight(),this.initGeo(),this.doRender(),this.$refs.property.setSceneChildren(this.group.children)},initRenderer(){if(this.renderer)return;const t=document.getElementById("renderCanvas");this.renderer=new o["WebGLRenderer"]({canvas:t,antialias:!0,alpha:!1}),this.renderer.setSize(this.WIDTH-240,this.HEIGHT)},initCamera(){this.camera||(this.camera=new o["PerspectiveCamera"](45,(this.WIDTH-240)/this.HEIGHT,.1,1e3),this.camera.position.set(3,8,13),this.camera.lookAt(0,0,0),this.camera.focus=36)},setCameraPosition(t,e,i){this.camera.position.set(t,e,i),this.camera.lookAt(0,0,0),this.doRender()},initControls(){if(this.controls)return;const t=document.getElementById("renderCanvas");if(this.controls=new u["b"](this.camera,this.renderer.domElement),this.controls.enableKeys=!1,this.controls.enablePan=!1,this.controls.update(),this.controls.addEventListener("change",this.doRender),this.transformControl=new u["d"](this.camera,this.renderer.domElement),this.transformControl.addEventListener("change",this.doRender),this.transformControl.addEventListener("dragging-changed",e=>{this.controls.enabled=!e.value;let i=1;t.onmousemove=()=>{i++},t.onmouseup=()=>{i>1&&e.value&&this.$emit("attch-history","dragging-changed"),t.onmousemove=null,t.onmouseup=null}}),!this.optControls){const t=document.getElementById("maskOpt");this.optControls=new u["b"](this.camera,t),this.optControls.enablePan=!1,this.optControls.addEventListener("change",this.doRender)}},initScene(){if(this.scene||(this.scene=new o["Scene"]),this.fog||(this.fog=new o["Fog"](16316664,10,50)),this.scene.fog=this.fog,this.scene.background=new o["Color"](16316664),!this.bgmesh){const t=new o["BoxBufferGeometry"](.1,.1,.1),e=new o["MeshStandardMaterial"]({color:16316664});this.bgmesh=new o["Mesh"](t,e),this.bgmesh.visible=!1,this.bgmesh.name="backgroundTexture",this.scene.add(this.bgmesh)}},initEnvironment(t){if(!t)return;const e=new o["PMREMGenerator"](this.renderer);e.compileEquirectangularShader(),(new u["c"]).setDataType(o["UnsignedByteType"]).load(t,t=>{const i=e.fromEquirectangular(t).texture;e.dispose(),this.scene.environment=i,this.doRender()})},initLight(){this.renderer.shadowMap.enabled=!0,this.envLight||(this.envLight=new o["AmbientLight"](this.envLightColor,this.envIntensity),this.scene.add(this.envLight)),this.scene.add(this.transformControl),this.light||(this.light=new o["DirectionalLight"](16777215,.34),this.light.position.set(Math.sqrt(5),5*Math.sqrt(2),Math.sqrt(5)),this.light.castShadow=!0,this.light.shadow.camera.near=.5,this.light.shadow.camera.far=500,this.light.shadow.mapSize.width=1024,this.light.shadow.mapSize.height=1024,this.light.shadow.radius=this.shadowRaduis,this.light.name="light",this.scene.add(this.light),this.doRender()),this.initFloor()},getY(){return-this.knife_data.transform.renderY*this.modelScale+this.knife_data.transform.position.y*this.modelScale-.03},initFloor(){const t=new o["ShadowMaterial"]({opacity:.3}),e=this.getY();t.side=o["DoubleSide"];const i=new o["Mesh"](new o["PlaneBufferGeometry"](500,500,1,1),t);i.rotation.x=-Math.PI/2,i.receiveShadow=!0,i.name="plane",i.updateMatrix(),this.scene.add(i),i.position.setY(e),this.axesHelper||(this.axesHelper=new o["AxesHelper"](10),this.axesHelper.visible=!1,this.scene.add(this.axesHelper)),this.grid||(this.grid=new o["GridHelper"](100,100,14803425,14803425),this.grid.material.opacity=.2,this.grid.material.transparent=!1,this.grid.name="grid",this.grid.visible=!0,this.scene.add(this.grid),this.grid.position.setY(e))},initRaycaster(){if(this.raycaster)return;this.raycaster=new o["Raycaster"],this.mouse=new o["Vector2"];const t=document.getElementById("mode3dContainer");t.addEventListener("mousemove",this.onDocumentMouseMove,!1),t.addEventListener("dblclick",this.onDocumentMouseClick,!1),t.addEventListener("mousedown",this.onDocumentMouseDown,!1),t.addEventListener("mouseup",this.onDocumentMouseUp,!1)},initGroup(){this.group||(this.group=new o["Group"],this.group.name="container",this.scene.add(this.group),this.doRender())},initGeo(){this.initGroup(),this.addGroup(null),this.doRender(),this.$emit("init-success")},addGroup(t,e=!1){const i=new o["Group"],s=this.$root.scene.getObjectByName("allGroup").clone();s.name="allGroupMesh",i.add(s);i.id;this.group.add(i),this.initModeLineData(i,null,t?t.folderCurrent:100),this.doAnimate(t?t.folderCurrent:100,i.id),setTimeout(()=>{document.getElementById("renderCanvas").focus(),this.doRender()},5e3),setTimeout(()=>{document.getElementById("renderCanvas").focus(),this.doRender()},1e4);const n=new o["BoxHelper"](i,16737844);if(n.visible=!1,n.material.lineWidth=4,n.name="groupHelp",i.add(n),i.name=t?t.name:"allGroup-"+this.project_data.project_name,t){const e={x:t.position.x,y:t.position.y,z:t.position.z};if(i.rotation.set(t.rotation._x,t.rotation._y,t.rotation._z),t.spacing&&this.group.children.length>0){this.group.children[0].children[1].geometry.computeBoundingBox();const i=this.group.children[0].children[1].geometry.boundingBox,s=this.group.children[0].position;n.geometry.computeBoundingBox();const a=n.geometry.boundingBox,r=this.calculateSize(a,i,e,s);["x","y","z"].forEach(i=>{r[i]>t.spacing[i]?e[i]>s[i]?e[i]+=r[i]-t.spacing[i]:e[i]-=r[i]-t.spacing[i]:e[i]>s[i]?e[i]-=r[i]-t.spacing[i]:e[i]+=r[i]-t.spacing[i]})}i.position.set(e.x,e.y,e.z)}i.castShadow=!0,i.add(this.$root.scene.getObjectByName("textureGroup").clone()),n.geometry.computeBoundingBox();const a=n.geometry.boundingBox,r=this.scene.getObjectByName("plane"),l=this.scene.getObjectByName("grid");0===this.group.children.length&&r.position.setY(this.getY()),a.min.y<r.position.y&&(r.position.setY(a.min.y),l.position.setY(a.min.y)),e&&this.chooseMode(i),this.doRender()},setGroups(t){if(this.clearChooseMode(),this.activeModel=null,this.scene.remove(this.scene.getObjectByName("container")),this.modeList={},this.group=null,this.initGroup(),this.$root.scene.getObjectByName("allGroup"))for(const e in t)this.addGroup(t[e]);else setTimeout(()=>{for(const e in t)this.addGroup(t[e])},2e3);this.$refs.property.setSceneChildren(this.group.children)},initModeLineData(t,e,i=100){const s={animate:this.knife_data.animate,current:i};this.accumulateRotations(s.animate),e&&(s.current=this.modeList["id_"+e].current);for(const n of this.knife_data.folds)n.name;this.modeList["id_"+t.id]=s},setFolderValue(){this.activeModel&&(this.$refs.property.folderValue=this.modeList["id_"+this.activeModel].current)},accumulateRotations(t){for(const e in t){const i=t[e];for(const s of i){const i=this.getOldAnimation(t,s.name,e);s.initialRotate=i?i.rotate+(i.initialRotate||0):0}}},getOldAnimation(t,e,i){for(let s=i-1;s>=0;s--){const i=t[s].filter(t=>t.name===e);if(i.length>0)return i[0]}return null},resetModal(t){for(const e of this.knife_data.folds)"x"===e.name||e.path||t.getObjectByName(e.name)&&t.getObjectByName(e.name).rotation.set(0,0,0)},doAnimate(t,e){if(!this.activeModel&&!e)return;if(t>100||t<0)return;this.modeList["id_"+(this.activeModel||e)].current=t;const i=this.modeList["id_"+(e||this.activeModel)],s=this.group.getObjectById(e||this.activeModel);this.resetModal(s);const n=1e3*i.animate.length*(t/100)-1,a=parseInt(n/1e3),r=n-1e3*a;if(a>=i.animate.length)return;for(let c=0;c<a;c++){const t=i.animate[c];for(const e of t){const t=new o["Vector3"](e.vector.x,e.vector.y,e.vector.z).normalize();s.getObjectByName(e.name).setRotationFromAxisAngle(t,(e.initialRotate+e.rotate)*Math.PI/180)}}const l=i.animate[a];for(const c of l){const t=new o["Vector3"](c.vector.x,c.vector.y,c.vector.z).normalize(),e=r/1e3*c.rotate;s.getObjectByName(c.name).setRotationFromAxisAngle(t,(c.initialRotate+e)*Math.PI/180)}this.doRender()},transformSetMode(t){if(this.transformControl)return this.transformMode=t,this.transformControl.setMode(t),this.doRender(),!1},doRender(){if(this.renderer.render(this.scene,this.camera),this.$emit("camera-change",{position:this.camera.position,rotation:this.camera.rotation}),this.group&&this.activeModel&&"number"===typeof this.activeModel&&this.activeModel>0){const t=this.group.getObjectById(this.activeModel);this.$refs.property.setPosition(t.position),this.$refs.property.setRotate(t.rotation)}},moveclickRender(){this.raycaster.setFromCamera(this.mouse,this.camera);const t=this.raycaster.intersectObjects(this.group.children,!0);if(t.length>0)this.INTERSECTED!=t[0].object&&(this.INTERSECTED=t[0].object,this.clearHover(),"allGroupMesh"===this.INTERSECTED.parent.name?(this.INTERSECTED.parent.parent.children[1].visible=!0,this.hoverHelp=this.INTERSECTED.parent.parent.children[1].id,this.isClick&&this.chooseMode(this.INTERSECTED.parent.parent)):this.INTERSECTED.parent.name.indexOf("allGroup")>-1&&(this.INTERSECTED.parent.children[1].visible=!0,this.hoverHelp=this.INTERSECTED.parent.children[1].id,this.isClick&&this.chooseMode(this.INTERSECTED.parent)));else{if(this.hoverHelp){const t=this.scene.getObjectById(this.hoverHelp);t&&t.type&&"BoxHelper"===t.type&&(t.visible=!1)}this.hoverHelp="",this.isClick&&this.clearChooseMode()}this.INTERSECTED=null,this.doRender()},clearHover(){if(this.hoverHelp){const t=this.scene.getObjectById(this.hoverHelp);t&&t.type&&"BoxHelper"===t.type&&(t.visible=!1)}},onDocumentMouseMove(t){t.preventDefault(),this.mouse.x=(t.clientX-256)/(this.WIDTH-240)*2-1,this.mouse.y=-(t.clientY-56)/this.HEIGHT*2+1,this.moved=!0,this.moveclickRender()},onDocumentMouseClick(t){this.isClick=!0,t.preventDefault(),this.mouse.x=(t.clientX-256)/(this.WIDTH-240)*2-1,this.mouse.y=-(t.clientY-56)/this.HEIGHT*2+1,this.moveclickRender(),this.isClick=!1},onDocumentMouseDown(t){t.clientX,t.clientY,document.getElementById("mode3dContainer");this.moved=!1},onDocumentMouseUp(t){this.moved||(this.isClick=!0,t.preventDefault(),this.mouse.x=(t.clientX-256)/(this.WIDTH-240)*2-1,this.mouse.y=-(t.clientY-56)/this.HEIGHT*2+1,this.moveclickRender(),this.isClick=!1)}}}),w=x,C=(s("591d"),s("2877")),k=Object(C["a"])(w,n,a,!1,null,null,null);e["default"]=k.exports},bf09:function(t,e,i){},bf0b:function(t,e,i){"use strict";var s=i("d628"),n=i.n(s);n.a},bf1b:function(t,e,i){"use strict";var s=i("699c"),n=i.n(s);n.a},bf60:function(t,e,i){"use strict";i.r(e);var s=i("750b");e["default"]=Object(s["b"])({props:{value:{type:Number,default:100},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},disabled:{type:Boolean,default:!1}},setup(t,e){const i=Object(s["j"])(t.value);return Object(s["k"])(()=>t.value,()=>{i.value=t.value}),()=>Object(s["c"])("span",{style:{width:"100%"}},[Object(s["c"])("a-slider",{attrs:{value:i.value,min:t.min,max:t.max,step:t.step,disabled:t.disabled},on:{change:(t=0)=>{i.value=t,e.emit("change",t)},afterChange:t=>{e.emit("confirm",t)}}})])}})},bf7b:function(t,e,i){t.exports=i.p+"editor-assets/img/ang1-b.4caa48e4.svg"},bfb3:function(t,e,i){},bfc4:function(t,e,i){"use strict";var s=i("678b"),n=i.n(s);n.a},bfe0:function(t,e,i){"use strict";var s=i("784e"),n=i.n(s);n.a},bff9:function(t,e,i){},c004:function(t,e,i){var s=i("cbe5"),n=Math.PI,a=Math.sin,r=Math.cos,o=s.extend({type:"isogon",shape:{x:0,y:0,r:0,n:0},buildPath:function(t,e){var i=e.n;if(i&&!(i<2)){var s=e.x,o=e.y,l=e.r,c=2*n/i,h=-n/2;t.moveTo(s+l*r(h),o+l*a(h));for(var d=0,u=i-1;d<u;d++)h+=c,t.lineTo(s+l*r(h),o+l*a(h));t.closePath()}}});t.exports=o},c00b:function(t,e,i){"use strict";var s=i("0dc2"),n=i.n(s);n.a},c030:function(t,e,i){},c037:function(t,e,i){"use strict";var s=i("f326"),n=i.n(s);n.a},c057:function(t,e,i){"use strict";var s=i("b586"),n=i.n(s);n.a},c071:function(t,e,i){"use strict";i.r(e);i("ddb0");var s=i("5530"),n=i("750b"),a=i("3ccf"),r=i("bab4"),o=i("b3ba"),l=i("365c"),c=i("ed08");i("8f33");e["default"]=Object(n["b"])({setup(t,e){const{page:i}=e.route.query,h=Number(i||1),d=e.vuex.mapState(["queries"]),u=e.vuex.mapState("layout",["width"]),{loading:p,data:f}=Object(a["c"])(l["getTags"]),m=Object(n["j"])({current:h,pageSize:40,category:"",keywords:"",tagCateId:"",tagIds:""}),{loading:g,data:v,refetch:b}=Object(a["c"])(l["getModes"],{variables:m.value},{lazy:!0}),y=Object(n["j"])([]),_=t=>y.value.find(e=>e.id===t),x=t=>{y.value.find(e=>e.id===t)&&_(t).children.map(t=>t.id).join()},w=([t,e])=>e?t:t?x(t):"";Object(n["k"])([()=>d.queries.value,()=>y.value],()=>{var t;if(null===(t=y.value)||void 0===t?void 0:t.length){let{k:t="",category:i=""}=d.queries.value;"all"===t&&(t="");const[n,a]=Object(c["x"])(i);let r,o=null;a?(r=a,o=n):r=n;let l="模板中心 - 在线包装设计模板方案_3D渲染效果_印刷打样",h="包装模板,设计模板，在线设计模板",u="包小盒包装设计模板中心，为您提供海量包装设计模板，在线即可高效完成包装设计、3D渲染。";if(y.value.find(t=>t.id===r))if(r&&!o){const t=_(r).name;l=t+"包装设计模板 - 免费3D样机在线设计制作 - 包小盒",h=`包装样机设计,免费${t}包装样机`,u=`包小盒包装设计模板中心，为您提供海量${t}包装样机设计模板，在线即可高效完成免费${t}包装样机设计、3D渲染。`}else if(r&&o){const t=_(r).name,e=_(r).children.find(t=>t.id===n).name;l=`${e}${t}设计模板 - ${e}包装样机在线设计制作 - 包小盒`,h=`${e}样机,${e}包装样机,${e}模板,${e}设计`,u=`包小盒包装设计模板中心，为您提供海量${e}样机，${e}包装样机设计模板，在线即可高效完成${e}包装设计、3D渲染`}Object(c["C"])(l,h,u),m.value=Object(s["a"])(Object(s["a"])({},m.value),{},{keywords:t,current:d.queries.value.page?parseInt(d.queries.value.page):1,category:w([n,a])?w([n,a]):"",tagCateId:a?r:Object(c["x"])(i),tagIds:w([n,a])?w([n,a]):""}),b({variables:m.value}),setTimeout(()=>{e.parent.scrollToTop(300)},300)}}),Object(n["k"])(()=>m.value,()=>{setTimeout(()=>{e.parent.scrollToTop(300)},300)}),Object(n["k"])(()=>f.value,()=>{var t;y.value=(null===(t=f.value)||void 0===t?void 0:t.data.map(t=>Object(s["a"])(Object(s["a"])({},t),{},{active:!1,children:t.children.map(t=>Object(s["a"])(Object(s["a"])({},t),{},{active:!1}))})))||[]});const C=Object(n["a"])(()=>{var t;return(null===(t=v.value)||void 0===t?void 0:t.data)||[]}),k=Object(n["a"])(()=>{var t;return(null===(t=v.value)||void 0===t?void 0:t.total)||10});return()=>Object(n["c"])("div",{class:"template-wrapper p-40"},[Object(n["c"])("div",{class:"page-title"},["模板中心"]),Object(n["c"])(r["default"],{attrs:{list:y.value||[],loading:p.value},on:{change:t=>{const[i,s]=t;let n="";i&&(n="c"+Object(c["w"])(i)),i&&s&&(n=`t${Object(c["w"])(s)}-${n}`),e.router.push({path:`/templates/${m.value.keywords||"all"}/${n||"all"}`})}}}),Object(n["c"])(o["default"],{attrs:{showFree:!0,list:C.value,loading:g.value,width:u.width.value}}),C.value.length?Object(n["c"])("div",{class:"bottom"},[Object(n["c"])("a-pagination",{attrs:{"show-quick-jumper":!0,pageSize:m.value.pageSize,current:m.value.current,total:k.value,tagCateId:m.value.tagCateId,tagIds:m.value.tagIds},on:{change:t=>{m.value=Object(s["a"])(Object(s["a"])({},m.value),{},{current:t}),e.router.push(Object(s["a"])(Object(s["a"])({},e.root.$route),{},{query:Object(s["a"])(Object(s["a"])({},e.root.$route.query),{},{page:t})}))}}})]):"",Object(n["c"])("div",{class:"clearfix"})])}})},c0ae:function(t,e,i){t.exports=i.p+"editor-assets/img/ang3-b.e454d0b5.svg"},c0f9:function(t,e,i){"use strict";var s=i("9e62"),n=i.n(s);n.a},c105:function(t,e,i){},c17b:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.codabar=void 0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=i("e762"),a=r(n);function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=function(t){function e(t,i){o(this,e),0===t.search(/^[0-9\-\$\:\.\+\/]+$/)&&(t="A"+t+"A");var s=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.toUpperCase(),i));return s.text=s.options.text||s.text.replace(/[A-D]/g,""),s}return c(e,t),s(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:"encode",value:function(){for(var t=[],e=this.getEncodings(),i=0;i<this.data.length;i++)t.push(e[this.data.charAt(i)]),i!==this.data.length-1&&t.push("0");return{text:this.text,data:t.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"101100110011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(a.default);e.codabar=h},c189:function(t,e,i){t.exports=i.p+"editor-assets/img/qw.b7df1c30.svg"},c1d5:function(t,e,i){"use strict";var s=i("3dcb"),n=i.n(s);n.a},c209:function(t,e,i){t.exports=i.p+"editor-assets/img/vip-try-entry.d78dfc04.gif"},c243:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SIDE_BIN="101",e.MIDDLE_BIN="01010",e.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},e.EAN2_STRUCTURE=["LL","LG","GL","GG"],e.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],e.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]},c2653:function(t,e,i){"use strict";var s=i("fcff"),n=i.n(s);n.a},c27a:function(t,e,i){"use strict";var s=i("5cef"),n=i.n(s);n.a},c2be:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.canshow,expression:"canshow"}]},["render"!==t.type?s("div",{directives:[{name:"show",rawName:"v-show",value:3!==t.current,expression:"current !== 3"}],staticClass:"record-border",style:{width:t.width+"px",height:("render"===t.type?t.height-2:t.height-54)+"px"}}):t._e(),s("div",{staticClass:"record flex flex-center",style:{width:t.width+"px"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.current,expression:"current === 0"}],staticClass:"record-panel flex flex-center item-center"},[s("div",{staticClass:"ww fo-14 fo-white text-center"},[t._v("点击开始拍摄")]),s("div",{staticClass:"m-auto play-btn flex flex-center item-center",on:{click:t.doStart}},[s("img",{attrs:{src:i("8bef")}})]),s("div",{staticClass:"ww"}),"render"!==t.type?s("img",{staticClass:"close",attrs:{src:i("bd00")},on:{click:function(e){return t.$emit("close")}}}):t._e()]),s("div",{directives:[{name:"show",rawName:"v-show",value:1===t.current,expression:"current === 1"}],staticClass:"record-panel flex flex-between item-center"},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"dot"}),s("div",{staticClass:"fo-14 ml-4 fo-white"},[t._v(" "+t._s(t.time/1e3/60>1?t.time/1e3/60%60<10?"0"+parseInt(t.time/1e3/60%60):parseInt(t.time/1e3/60%60):"00")+" : "+t._s(t.time/1e3%60<10?"0"+parseInt(t.time/1e3)%60:parseInt(t.time/1e3)%60)+" ")]),s("div",{staticClass:"fo-14 ml-12 fo-white"},[t._v("正在拍摄...")])]),s("div",{staticClass:"cricle mr-24"},[s("a-progress",{attrs:{id:"recordPro",type:"circle",showInfo:!1,percent:100*t.time/(2*(t.endTime+2e3)),width:44,strokeColor:"#ffffff",strokeWidth:4}}),s("div",{staticClass:"cricle-panel flex flex-center item-center",on:{click:t.doStop}},[s("img",{attrs:{src:i("db96")}})])],1)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showout,expression:"showout"}],staticClass:"tip text-center",style:{top:(t.height-52)/2-140+"px",left:t.width/2-140+"px"}},[s("div",{staticClass:"flex flex-end item-center"},[s("a-icon",{staticClass:"fo-16 pointer mt-8 mr-8",attrs:{type:"close"},on:{click:t.tipClose}})],1),s("img",{staticClass:"mt-16",attrs:{src:i("1254")}}),s("div",{staticClass:"fo-16 mt-30"},[t._v("拖动可改变3D模型角度（"+t._s(t.out)+"s）")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:3===t.current||4===t.current,expression:"current === 3 || current === 4"}],staticClass:"record-end flex flex-center item-center"},[s("div",{directives:[{name:"show",rawName:"v-show",value:3===t.current,expression:"current === 3"}]},[s("video",{staticClass:"video",style:{height:t.viedoHeight+"px"},attrs:{controls:"",src:t.videoURL}}),s("div",{staticClass:"video-panel mt-16"},[s("a-button",{staticStyle:{width:"92px"},attrs:{size:"large"},on:{click:t.doClose}},[t._v("关闭")]),s("a-button",{staticClass:"ml-12",staticStyle:{width:"92px"},attrs:{size:"large",type:"primary",loading:t.loading},on:{click:t.transcode}},[t._v("下载")])],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:4===t.current,expression:"current === 4"}]},[s("div",{staticClass:"flex flex-center item-center modal"},[s("div",{staticClass:"text-center"},[s("div",{staticClass:"fo-16"},[t._v(" "+t._s(t.spinning?"正在转码中...（请耐心等待）":"正在导出视频...")+" ")]),s("div",{staticClass:"mt-30 flex flex-center"},[t.spinning?s("a-spin",{attrs:{spinning:t.spinning}},[s("a-icon",{staticStyle:{"font-size":"40px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1):s("a-progress",{attrs:{percent:parseInt(t.progress),strokeColor:"#FF610D"}})],1),s("a-button",{staticClass:"mt-50",staticStyle:{width:"100px"},on:{click:t.cancel}},[t._v("取消")])],1)])])])])},n=[],a=(i("ddb0"),i("2b3d"),i("9110")),r=i("c64e"),o=i.n(r),l={data(){return{current:0,intv:null,videoURL:"",blob:null,loading:!1,uuid:"",isNotDo:!1,showout:!1,intv2:null,out:3,viedoHeight:676,progress:0,spinning:!1}},props:{canshow:{type:Boolean},type:{type:String},time:{type:Number},endTime:{type:Number,default:1},width:{type:Number},height:{type:Number},animationInterval:{type:Number}},watch:{canshow(t){const e=localStorage.getItem("recordTip");t&&!e&&(this.showout=!0,this.out=3,this.intv2=setInterval(()=>{this.out--,0===this.out&&(this.tipClose(),localStorage.setItem("recordTip",1))},1e3))},height(t){this.viedoHeight=t<800?t-52-100:676}},beforeDestroy(){clearInterval(this.intv),this.$bus.$off("recorderOver")},mounted(){this.$nextTick(()=>{const t=document.getElementById("recordPro").querySelectorAll(".ant-progress-circle-trail")[0];t.removeAttribute("stroke"),t.style.stroke="rgba(255,255,255,0.3)"}),this.overRecord()},methods:{async transcode(){this.$track({category:"record-download",action:"click"}),this.current=4,this.loading=!0,this.spinning=!0;const t=new File([this.blob],this.uuid+".webm",{type:"video/webm"}),e=Object(a["createFFmpeg"])({corePath:"https://oss.baoxiaohe.com/ffmpeg/ffmpeg-core.js",log:!0}),{name:i}=t;await e.load(),e.setProgress(t=>{this.spinning=!1,this.progress=100*t.ratio});const s=await Object(a["fetchFile"])(t),n=this.$root.projectData.extend_attrs?JSON.stringify(this.$root.projectData.extend_attrs):{},r=`${n.trademark||""}${n.trademark&&n.productName?"-":""}${n.productName||""}${n.trademark||n.productName?"-":""}${this.$root.projectData.project_name}-包装折叠动画.mp4`;e.FS("writeFile",i,s),await e.run("-i",i,"-c:v","libx264","-row-mt","1","-r","30","-s","1280x720",this.uuid+".mp4");const o=e.FS("readFile",this.uuid+".mp4"),l=new Blob([o.buffer],{type:"video/mp4"});if(!this.isNotDo){this.isNotDo=!1;const t=document.createElement("a");t.style.display="none",t.download=r,t.href=URL.createObjectURL(l),document.body.appendChild(t),t.click(),document.body.removeChild(t),this.loading=!1,this.doOff()}this.progress=0,this.spinning=!1,this.isNotDo=!1},cancel(){this.current=3,this.isNotDo=!0,this.loading=!1},tipClose(){clearInterval(this.intv2),this.out=3,this.showout=!1},doOff(){this.current=0,this.$emit("close")},doClose(){this.$confirm({title:"您还未下载视频，确定关闭？",content:"",okText:"确定",okType:"danger",cancelText:"取消",zIndex:5e3,centered:!0,onOk:()=>{this.doOff()},onCancel(){}})},overRecord(){this.$bus.$on("recorderOver",t=>{this.current=3,this.blob=t,this.videoURL=URL.createObjectURL(t)})},doStart(){this.$track({category:"record-begin",action:"click"}),this.current=1,this.$emit("startRecord",!0),this.$bus.$emit("recorderStart"),this.uuid=o()()},doStop(){clearInterval(this.intv),this.$emit("startRecord",!1),this.$bus.$emit("recorderEnd")}}},c=l,h=(i("74f4"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,"ff89ebac",null);e["default"]=d.exports},c308:function(t,e,i){t.exports=i.p+"editor-assets/img/ra.e8f04b63.svg"},c32f:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:["mode-container flex ","render"===t.type?"flex-start":"flex-end ",t.visible?"":"mode-container-hide"],style:{zIndex:t.zIndex,position:"render"!==t.type?"fixed":"unset",width:("render"!==t.type?t.modeStyle.width:t.width)+"px",height:("render"!==t.type?t.modeStyle.height:t.height)+"px",left:("render"!==t.type?t.modeStyle.left:0)+"px",top:("render"!==t.type?(t.modeStyle.top,t.modeStyle.top):0)+"px"},on:{mousemove:function(e){t.showTip=!0},mouseout:function(e){t.showTip=!1}}},["render"!==t.type?s("div",{staticClass:"mode-container__left",on:{click:function(e){t.visible=!t.visible}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showTip||!t.visible,expression:"showTip || !visible"}],staticClass:"btn-draw flex flex-center item-center"},[t.visible?s("img",{attrs:{src:i("4284")}}):s("img",{attrs:{src:i("a178")}})])]):t._e(),s("div",{staticClass:"mode-container__right",style:{width:("render"===t.type?t.width-256:t.modeStyle.width)+"px",height:("render"===t.type?t.height:t.modeStyle.height)+"px"}},[s("a-spin",{directives:[{name:"show",rawName:"v-show",value:!t.outside_designs_loaded,expression:"!outside_designs_loaded"}],staticStyle:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},[s("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1),"render"!==t.type?s("div",{staticClass:"mode-container__top flex flex-end item-center",style:{width:t.modeStyle.width-1+"px"}},[s("a-tooltip",{directives:[{name:"show",rawName:"v-show",value:!t.isBigger,expression:"!isBigger"}],attrs:{title:"开始拍摄",placement:"bottomLeft"}},[s("div",{staticClass:"flex flex-start item-center pointer rec",on:{click:function(e){return t.openRec()}}},[s("div",{staticClass:"tip"}),s("div",{staticClass:"fo-12 ml-4"},[t._v("REC")])])]),t.isCup||t.isBigger?t._e():s("div",{staticClass:"mode-container__top__play flex flex-center item-center",style:{width:t.playStyle.width+"px",height:t.playStyle.height+"px",marginTop:t.playStyle.marginTop+"px",marginRight:t.playStyle.marginRight+"px"}},[t.action.open||t.action.play?t._e():s("img",{style:{width:(t.isBigger?40:20)+"px",height:(t.isBigger?40:20)+"px"},attrs:{src:i("6b4b")},on:{click:function(e){return t.doAction()}}}),t.action.open?s("div",{staticClass:"mode-container__top__play__progress",style:{width:(t.isBigger?204:102)+"px",height:(t.isBigger?8:4)+"px",marginRight:(t.isBigger?14:7)+"px"},attrs:{id:"modeContainerTopPlayProgress"},on:{mousedown:t.progressMouseDown}},[s("div",{staticClass:"mode-container__top__play__progress-value",style:{width:(t.isBigger?204/t.endTime*t.time:102/t.endTime*t.time)+"px",height:(t.isBigger?8:4)+"px",marginRight:(t.isBigger?14:7)+"px"}})]):t._e(),!t.action.play&&t.action.open?s("img",{style:{width:(t.isBigger?12:6)+"px",height:(t.isBigger?12:6)+"px"},attrs:{src:i("cc2e")},on:{click:function(e){return t.doAction()}}}):t._e(),t.action.play?s("img",{style:{width:(t.isBigger?12:6)+"px",height:(t.isBigger?12:6)+"px"},attrs:{src:i("e5e5")},on:{click:function(e){t.action.play=!1,t.stopAction()}}}):t._e(),t.action.open?s("img",{style:{marginLeft:(t.isBigger?14:7)+"px",width:(t.isBigger?12:6)+"px",height:(t.isBigger?12:6)+"px"},attrs:{src:i("9cc5")},on:{click:function(e){return t.outPlayAction()}}}):t._e()]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isBigger,expression:"!isBigger"}],staticClass:"mode-container__top__big-btn",attrs:{title:"放大"},on:{click:t.doBigger}},[s("img",{attrs:{src:i("be61")}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isBigger&&!t.showRecord,expression:"isBigger && !showRecord"}],staticClass:"mode-container__top__close-btn flex flex-center item-center",on:{click:t.closeBigger}},[s("img",{attrs:{src:i("024c")}})])],1):t._e(),s("div",{staticClass:"flex flex-center item-center",style:{width:("render"===t.type?t.width:t.modeStyle.width)+"px",height:("render"===t.type?t.height:t.modeStyle.height)+"px",borderRadius:"0 0 0 4px",background:"#f3f3f3"}},[s("div",{staticClass:"fftrec",style:{width:t.modeStyle.width+"px",height:t.modeStyle.height+"px",transform:"render"===t.type?"scale("+(t.scale,t.scale+")"):""}},["render"===t.type?s("div",{staticClass:"flex flex-start item-center pointer rec2"},[s("div",{staticClass:"tip"}),s("div",{staticClass:"fo-12 ml-4"},[t._v("REC")])]):t._e(),t.isVip||"render"!==t.type?t._e():s("a-tooltip",{attrs:{title:"开通VIP去Logo水印",placement:"top"}},[s("div",{staticClass:"watermark",on:{click:t.clickWatermark}})]),s("mode-3d",{directives:[{name:"show",rawName:"v-show",value:t.outside_designs_loaded,expression:"outside_designs_loaded"}],ref:"mode3d",style:"render"===t.type?{outline:2/t.scale+"px dashed #ff6634",transition:"all linear 0.2s"}:{},attrs:{"animation-interval":t.animationInterval,width:t.modeStyle.width,height:t.modeStyle.height,"show-record":t.showRecord},on:{"get-step":function(e){t.step=e,t.endTime=1e3*e},ready:function(e){"render"===t.type?t.outPlayAction():t.doAction()}}})],1)]),t.isBigger?t._e():s("div",{staticClass:"add-size-panel",on:{mousedown:t.mouseDown,dblclick:t.dbClick}},[s("div",{staticClass:"img",style:{backgroundImage:"url("+t.bigImage+")"}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isBigger,expression:"isBigger"}],staticClass:"new-play-panel"},[s("a-tooltip",{directives:[{name:"show",rawName:"v-show",value:!t.showRecord,expression:"!showRecord"}],attrs:{placement:"top",title:"拍摄"}},[s("div",{staticClass:"pbtn flex flex flex-center",style:{right:"render"===t.type?"280px":"24px"},on:{click:function(e){t.openRec(),t.closeBigger()}}},[s("img",{attrs:{src:i("5dad"),width:"16px"}})])]),s("a-tooltip",{attrs:{placement:"left",title:"自动旋转"}},[s("div",{class:["pbtn ptt flex flex flex-center",t.openRotate?"pbtn--active":""],style:{right:"render"===t.type?"280px":"24px"},on:{click:t.doRotate}},[t.openRotate?s("img",{attrs:{src:i("377a"),width:"16px"}}):s("img",{attrs:{src:i("70bf"),width:"16px"}})])]),t.isCup?t._e():s("div",{class:"pbtn-play "+(t.action.open?"pbtn-play-action":"")+" right-btn-hover d-flex justify-center align-center",style:{right:"render"===t.type?"280px":"24px"},on:{click:function(e){e.stopPropagation(),!t.action.open&&t.doAction()}}},[s("a-tooltip",{attrs:{placement:"left",title:"自动折叠"}},[s("div",{staticClass:"flex flex-center item-center",style:"width: 100%; height: 100%; "+(t.action.open?"display: none !important":"")},[s("svg",{staticClass:"playbar",attrs:{width:"16px",height:"16px",viewBox:"0 0 16 16"}},[s("path",{staticClass:"path",attrs:{transform:"translate(4,1)","fill-rule":"evenodd",stroke:"none","stroke-width":"1",d:"M9.67424623,6.15633851 L1.53687549,0.978011677 C1.07093412,0.68150353 0.452846659,0.818856299 0.156338512,1.28479767 C0.0542333717,1.44524861 -2.4533543e-16,1.63148914 -2.22044605e-16,1.82167316 L0,12.1783268 C-9.13419418e-16,12.7306116 0.44771525,13.1783268 1,13.1783268 C1.19018402,13.1783268 1.37642456,13.1240935 1.53687549,13.0219883 L9.67424623,7.84366149 C10.1401876,7.54715334 10.2775404,6.92906588 9.98103223,6.46312451 C9.90245354,6.33964371 9.79772704,6.2349172 9.67424623,6.15633851 Z"}})])])]),t.action.open?s("div",{staticClass:"action-content"},[s("div",{staticClass:"progress flex flex-center item-center"},[s("div",{ref:"progressPanel",class:"progress-panel "+(t.started?"disable":""),on:{mousedown:function(e){!t.started&&t.progressClick(e)}}},[s("div",{class:"progress-bar "+(t.started?"disable":""),style:{width:216/t.endTime*t.time+"px"}},[s("div",{class:"progress-tab "+(t.started?"disable":""),on:{mousedown:function(e){e.stopPropagation(),!t.started&&t.actionMouseDown(e)}}})])])]),s("div",{class:"opt-btn flex flex-center item-center "+(t.started?"disable":""),on:{click:function(e){e.stopPropagation(),!t.started&&(t.action.play?(t.action.play=!1,t.stopAction()):t.doAction())}}},[t.action.play?t._e():s("svg",{staticClass:"playbar",attrs:{width:".8rem",height:".8rem",viewBox:"0 0 16 16"}},[s("path",{staticClass:"path",attrs:{transform:"translate(4,1)",stroke:"none","stroke-width":"1",d:"M9.67424623,6.15633851 L1.53687549,0.978011677 C1.07093412,0.68150353 0.452846659,0.818856299 0.156338512,1.28479767 C0.0542333717,1.44524861 -2.4533543e-16,1.63148914 -2.22044605e-16,1.82167316 L0,12.1783268 C-9.13419418e-16,12.7306116 0.44771525,13.1783268 1,13.1783268 C1.19018402,13.1783268 1.37642456,13.1240935 1.53687549,13.0219883 L9.67424623,7.84366149 C10.1401876,7.54715334 10.2775404,6.92906588 9.98103223,6.46312451 C9.90245354,6.33964371 9.79772704,6.2349172 9.67424623,6.15633851 Z"}})]),t.action.play?s("svg",{staticClass:"stop",attrs:{viewBox:"0 0 1024 1024",width:"12",height:"12"}},[s("path",{staticClass:"path",attrs:{d:"M77.93008 0m32 0l192 0q32 0 32 32l0 960q0 32-32 32l-192 0q-32 0-32-32l0-960q0-32 32-32Z"}}),s("path",{staticClass:"path",attrs:{d:"M589.93008 0m32 0l192 0q32 0 32 32l0 960q0 32-32 32l-192 0q-32 0-32-32l0-960q0-32 32-32Z"}})]):t._e()]),s("div",{class:"opt-btn flex flex-center item-center "+(t.started?"disable":""),on:{click:function(e){e.stopPropagation(),!t.started&&t.outPlayAction()}}},[s("svg",{attrs:{width:"16px",height:"16px",viewBox:"0 0 32 32"}},[s("rect",{staticClass:"path",attrs:{stroke:"none","stroke-width":"1",x:"4",y:"5",width:"20",height:"20",rx:"4"}})])])]):t._e()],1)],1)],1),s("Recorder",{ref:"record",attrs:{canshow:t.showRecord,"end-time":t.endTime,"animation-interval":t.animationInterval,time:t.recordTime,type:t.type,width:"render"===t.type?t.width:t.modeStyle.width,height:"render"===t.type?t.height:t.modeStyle.height},on:{close:function(e){t.recordTime=0,"render"!==t.type&&(t.showRecord=!1)},startRecord:t.startRecord}})],1)},n=[],a=(i("5319"),i("5530")),r=i("5da9"),o=i("e014"),l=i("5880"),c=i("2036"),h=i.n(c),d=i("9393"),u={name:"Editor",mixins:[d["a"]],props:["value","width","height","type"],components:{mode3d:r["default"],Recorder:o["default"]},model:{prop:"value"},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(l["mapState"])(["knifeVersion","isInside","tubeVisible"])),Object(l["mapGetters"])("render",["canIDrawInsideMap","canIDrawOutsideMap"])),Object(l["mapGetters"])("profile",["isVip"])),Object(l["mapState"])("editor-v2",["scale","project_data","knife_data","is_outside","isCup"])),Object(l["mapGetters"])("editor-v2",["outside_designs_loaded"])),{},{isInside(){return!this.is_outside},zIndex(){return this.tubeVisible?999:1e3}}),watch:{value(t){this.visible=t},visible(t){this.$store.commit("render/setShowD3Panel",t),this.$store.commit("editor-v2/set_show_d3_window",t),this.$emit("change",t),this.modeStyle.right=t?0:-this.modeStyle.width},knifeVersion(){this.is_inverse=!1,this.time=0},recording(t){if(2===t)this.doAction();else if(3===t){let t=0;const e=setInterval(()=>{this.recordTime+=1e3,t++,2===t&&(clearInterval(e),this.$refs.record.doStop(),this.recording=0,this.recordTime=0)},1e3)}}},data(){return{showRecord:"render"===this.type,visible:this.value,animationInterval:20,showTip:!1,knife:{},openRotate:!1,bigImage:h.a,alltime:0,modeStyle:{width:220,height:220,right:0,left:window.innerWidth-220,top:"auto"},started:!1,isBigger:"render"===this.type,playStyle:{width:20,height:20,marginTop:38,marginRight:8},action:{open:!1,play:!1,time:0,isBack:!1},intv:null,time:0,recordTime:0,endTime:0,is_inverse:!1,step:1,recording:0}},mounted(){this.initWidth()},beforeDestroy(){this.time=0,clearInterval(this.intv),window.removeEventListener("resize",this._handeResize)},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(l["mapActions"])(["saveFullTemplate"])),Object(l["mapActions"])("render",["saveCanIRender"])),Object(l["mapMutations"])("render",["setRenderType"])),{},{async openRec(){const t=this.$message.loading("加载中",0);this.setRenderType("video"),this.$route.query.type&&"preview"===this.$route.query.type?(await this.$store.dispatch("saveForceCreateV2",{router:this.$router,knife_data:this.knife_data,project_data:this.project_data}),this.$store.dispatch("render/saveRenderVisible",!0)):(await this.saveFullTemplate({projectData:this.project_data,isAuto:!1,knifeData:this.knife_data}),this.$store.dispatch("render/saveRenderVisible",!0)),setTimeout(t,0)},clickWatermark(){this.isVip||this.showPersonalVip()},doRecord(){this.showRecord=!0,this.outPlayAction()},startDoRecord(){this.doBigger(),this.doRecord()},doRotate(){this.openRotate=!this.openRotate,this.$refs.mode3d.doRotate(this.openRotate)},startRecord(t){t?(this.started=!0,this.time=this.endTime,this.is_inverse=!0,this.recording++,this.openRotate=!0,this.$refs.mode3d.doRotate(this.openRotate),this.doAction()):t||(this.started=!1,this.outPlayAction())},progressClick(t){this.stopAction();const e=t.clientX,i=this.$refs.progressPanel.getBoundingClientRect(),s=e-i.x;this.time=parseInt(s/i.width*this.endTime),this.$refs.mode3d.doAction(this.time)},actionMouseDown(t){const e=t.clientX,i=this.$refs.progressPanel.getBoundingClientRect(),s=this.time/this.endTime*i.width;this.stopAction(),document.onmousemove=t=>{const n=t.clientX-e;let a=s+n;return a>i.width?a=i.width:a<0&&(a=0),this.time=a/i.width*this.endTime,this.$refs.mode3d.doAction(this.time),!1},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}},progressMouseDown(t){this.action.play=!1,this.stopAction();const e=parseFloat(document.getElementById("modeContainerTopPlayProgress").style.width.replace("px",""));this.time=t.offsetX/e*this.endTime,this.$refs.mode3d.doAction(this.time),document.onmousemove=t=>(this.time=t.offsetX/e*this.endTime,this.$refs.mode3d.doAction(this.time),!1),document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}},initWidth(){window.addEventListener("resize",this._handeResize)},_handeResize(){this.modeStyle.left=window.innerWidth-this.modeStyle.width},computeWidth(){},dbClick(){this.modeStyle.width=220,this.modeStyle.height=220,this.modeStyle.left=window.innerWidth-220},outPlayAction(){clearInterval(this.intv),this.outPlay(),this.time=this.endTime,this.$refs.mode3d.doAction(this.time-1),this.is_inverse=!0},mouseDown(t){if(0===t.button){const e=document.querySelector(".editor-header"),i=window.innerHeight-e.clientHeight,s=window.innerWidth,n=t.clientX,a=t.clientY,r=this.modeStyle.width,o=this.modeStyle.height,l=window.innerWidth-this.modeStyle.width;document.onmousemove=t=>{const e=t.clientX-n,c=t.clientY-a;return(this.modeStyle.width<=s||this.modeStyle.width>r-e)&&(this.modeStyle.left=Math.min(l+e,window.innerWidth-220),this.modeStyle.width=Math.max(r-e,220)),(this.modeStyle.height<=i||this.modeStyle.height>o+c)&&(this.modeStyle.height=Math.max(o+c,220)),this.$store.commit("editor-v2/set_d3_window_option",{width:this.modeStyle.width,height:this.modeStyle.height,is_fullscreen:!1}),!1},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}}},doBigger(){this.modeStyle.width=window.innerWidth,this.modeStyle.height=window.innerHeight,this.modeStyle.top="auto",this.modeStyle.left=0,this.isBigger=!0,this.playStyle={width:40,height:40,marginTop:74,marginRight:24},this.action.open&&(this.playStyle.width=290),this.$store.commit("editor-v2/set_d3_window_option",{width:window.innerWidth,height:window.innerHeight,is_fullscreen:!0})},closeBigger(){this.modeStyle.width=220,this.modeStyle.height=220,this.modeStyle.left=window.innerWidth-220,this.modeStyle.top="auto",this.isBigger=!1,this.openRotate=!1,this.$refs.mode3d.doRotate(this.openRotate),this.playStyle={width:20,height:20,marginTop:38,marginRight:8},this.action.open&&(this.playStyle.width=140),this.$store.commit("editor-v2/set_d3_window_option",{width:220,height:220,is_fullscreen:!1})},doAction(){this.action.play=!0,this.action.open=!0,this.saveCanIRender(!1),this.runAnimate(),this.isBigger?this.playStyle.width=290:this.playStyle.width=140},runAnimate(){this.intv&&clearInterval(this.intv);const t=this.animationInterval;this.intv=setInterval(()=>{this.outside_designs_loaded&&(this.$refs.mode3d.doAction(this.time),!this.is_inverse&&this.time<=this.endTime||this.is_inverse&&this.time>=0?(this.is_inverse?this.time-=t:this.time+=t,this.recording>0&&(this.recordTime+=t)):(clearInterval(this.intv),this.outPlay(),this.time>0?(2===this.recording&&this.recording++,this.is_inverse=!0):(1===this.recording&&this.recording++,this.is_inverse=!1)))},t)},stopAction(){clearInterval(this.intv),this.saveCanIRender(!0),this.action.play=!1},outPlay(){this.action.play=!1,this.saveCanIRender(!0),this.action.open=!1,this.isBigger?this.playStyle={width:40,height:40,marginTop:74,marginRight:24}:this.playStyle={width:20,height:20,marginTop:38,marginRight:8}}})},p=u,f=(i("e513"),i("2877")),m=Object(f["a"])(p,s,n,!1,null,"5306c45d",null);e["default"]=m.exports},c353:function(t,e,i){"use strict";i.r(e);var s=i("750b");i("bff9");e["default"]=Object(s["b"])({props:{title:{type:String,default:""},help:{type:Object,default:null}},setup(t,e){return()=>Object(s["c"])("div",{class:"field flex item-center"},[Object(s["c"])("div",{class:{title:!0,"mr-16":null===t.help,"mr-4":null!==t.help}},[t.help?Object(s["c"])("div",{class:{title:!0,"mr-16":null===t.help,"mr-4":null!==t.help}},[t.title,t.help?Object(s["c"])("a-tooltip",[Object(s["c"])("a",{style:{display:"inline-block"},attrs:{target:"_blank",href:t.help.link}},[Object(s["c"])("a-icon",{attrs:{type:"question-circle",theme:"filled"}})]),Object(s["c"])("template",{slot:"title"},[t.help.text])]):""]):t.title]),Object.keys(e.slots).map(t=>e.slots[t]())])}})},c371:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isSvg?i("for-svg"):i("for-not-svg")},n=[],a=i("5530"),r=i("5880"),o=i("441f"),l=i("5909"),c={components:{forSvg:o["default"],forNotSvg:l["default"]},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapGetters"])("editor-v2",["curDesign"])),{},{isSvg(){return/\.svg$/.test(this.curDesign.src)}})},h=c,d=i("2877"),u=Object(d["a"])(h,s,n,!1,null,null,null);e["default"]=u.exports},c376:function(t,e,i){},c38a:function(t,e,i){},c398:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"table-panel-wrap"},[i("div",{staticClass:"header"},[i("a-icon",{staticClass:"text-pointer",attrs:{size:"small",color:"#F5F5F5",type:"left"},on:{click:function(e){return t.$emit("close")}}}),i("span",{staticClass:"text-pointer",on:{click:function(e){return t.$emit("close")}}},[t._v("表格")])],1),i("row-column-popover",{directives:[{name:"show",rawName:"v-show",value:!!t.curStyleItem,expression:"!!curStyleItem"}],attrs:{"data-id":t.curStyleItem&&t.curStyleItem.id,position:t.popoverPosition},on:{change:t.onPopoverChange,mouseenter:t.onPopoverMouseenter,mouseleave:t.onPopoverMouseleave}}),i("perfect-scrollbar",{staticClass:"content-wrap"},[i("div",{staticClass:"style-list"},t._l(t.$data.$tableStyles,(function(e){return i("div",{key:e.id,ref:"styleItem-"+e.id,refInFor:!0,class:["style-item","text-pointer"],on:{click:function(i){return t.$emit("callbackByRowColumn",e,{})},mouseenter:function(i){return t.onStyleItemMouseenter(e)},mouseleave:t.onStyleItemMouseleave}},[i("img",{attrs:{src:e.bigImage}})])})),0),i("div",{staticClass:"template-title"},[t._v("表格模版")]),t._l(t.$data.$tableTemplates,(function(e,s){return i("div",{key:s,staticClass:"template-item mt-12 mx-12 text-pointer",on:{click:function(i){return t.$emit("callbackByTemplate",e)}}},[i("img",{attrs:{src:e.img,alt:""}})])}))],2)],1)},n=[],a=i("2791"),r=i.n(a),o=i("f49b"),l=i.n(o),c=i("8044"),h=i.n(c),d=i("fd81"),u=i.n(d),p=i("b471"),f=i.n(p),m=i("c265"),g=i.n(m),v=i("d32a"),b=i.n(v),y=i("80fd"),_=i.n(y),x=i("0310"),w=i.n(x),C=i("18c1"),k=i.n(C),S=i("4bb4"),A=i("fb0d"),O={components:{rowColumnPopover:S["default"]},data(){return{$tableStyles:[{id:1,image:r.a,bigImage:l.a,column:"all",row:"all"},{id:2,image:h.a,bigImage:u.a,column:"first",row:"first"},{id:3,image:f.a,bigImage:g.a,column:"all",row:"first"},{id:4,image:b.a,bigImage:_.a,column:"none",row:"all"},{id:5,image:w.a,bigImage:k.a,column:"none",row:"first"}],$tableTemplates:A["default"],curStyleItem:null,timeout:null}},computed:{popoverPosition(){const{curStyleItem:t}=this;if(!t)return{};const e=this.$refs["styleItem-"+t.id];if(!e||!e.length)return{};const i=e[0].getBoundingClientRect(),{left:s,top:n}=i;return{left:s+124,top:n}}},beforeDestroy(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},methods:{onPopoverMouseenter(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},onPopoverMouseleave(){this.onStyleItemMouseleave()},onStyleItemMouseenter(t){this.curStyleItem=t,this.onPopoverMouseenter()},onStyleItemMouseleave(){this.timeout=setTimeout(()=>{this.curStyleItem=null},300)},onPopoverChange(t){this.$emit("callbackByRowColumn",this.curStyleItem,t),this.curStyleItem=null}}},j=O,M=(i("ae84"),i("2877")),I=Object(M["a"])(j,s,n,!1,null,"21a1a022",null);e["default"]=I.exports},c3f7:function(t,e,i){},c3ff:function(t,e,i){},c44a:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"no-data-wrap"},[s("img",{staticClass:"image",attrs:{src:i("e597"),alt:""}}),s("p",{staticClass:"tip"},[t._v("暂无内容")])])}],a=(i("e9ff"),i("2877")),r={},o=Object(a["a"])(r,s,n,!1,null,"6b1483a6",null);e["default"]=o.exports},c458:function(t,e,i){"use strict";var s=i("5d89"),n=i.n(s);n.a},c45c:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rendererd-property flex flex-start",style:{right:(t.visible?0:-240)+"px",height:t.HEIGHT+"px"},on:{mouseover:function(e){t.showTip=!0},mouseout:function(e){t.showTip=!1}}},[s("div",{staticClass:"rendererd-property__left",on:{click:function(e){t.visible=!t.visible}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"btn-drawer flex flex-center item-center"},[s("img",{class:t.visible?"":"img",attrs:{src:i("e149")}})])]),s("div",{staticClass:"rendererd-property__content"},[s("div",{staticClass:"flex flex-start item-center"},[t.activeModel?s("a-icon",{staticClass:"ml-8 pointer",staticStyle:{color:"#777777"},attrs:{type:"left"},on:{click:function(e){return t.changeMode(-1)}}}):t._e(),s("div",{staticClass:"fo-14 bold title ell ",staticStyle:{"padding-left":"8px","margin-left":"0"}},[t._v(" 场景对象 ")])],1),s("scrollbar",{staticClass:"rendererd-property__content__children",attrs:{maxHeight:220}},[s("div",{staticStyle:{"min-height":"220px"},on:{click:function(e){t.activeEdit="",t.changeMode(-1)}}},[s("div",{class:"render-child flex flex-between item-center",on:{click:function(e){e.stopPropagation(),t.openLights=!t.openLights}}},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"render-child--icon flex flex-center item-center"},[s("img",{attrs:{src:i("9b3a")}})]),s("div",{staticClass:"fo-14 ml-8"},[t._v("光照")])]),s("img",{style:{transform:"rotate("+(t.openLights?0:180)+"deg)"},attrs:{src:i("262c")}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.openLights,expression:"openLights"}]},[s("div",{class:"render-child flex flex-between item-center "+(-3==t.activeModel?"render-child--active":""),on:{click:function(e){return e.stopPropagation(),t.changeMode(-3)}}},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"render-child--icon flex flex-center item-center",staticStyle:{"margin-left":"30px"}},[-3==t.activeModel?s("img",{attrs:{src:i("3230")}}):s("img",{attrs:{src:i("1f0e")}})]),s("div",{staticClass:"fo-14 ml-8"},[t._v("阳光")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.openSunLight,expression:"!openSunLight"}],class:"fo-12 "+(-3==t.activeModel?"fo-white":""),style:{transform:"scale(0.9,0.9)"}},[t._v(" 已关 ")])]),t._l(t.lights,(function(e,n){return s("div",{key:n+"s",class:"render-child flex flex-start item-center "+(t.activeModel=="s"+n?"render-child--active":""),on:{click:function(e){return e.stopPropagation(),t.changeMode("s"+n)},dblclick:function(e){e.stopPropagation(),t.activeEdit="s"+n}}},[s("div",{staticClass:"render-child--icon flex flex-center item-center",staticStyle:{"margin-left":"30px"}},[t.activeModel=="s"+n?s("img",{attrs:{src:i("9adf")}}):s("img",{attrs:{src:i("77e8")}})]),t.activeEdit==="s"+n?s("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:e.name},on:{click:function(t){t.stopPropagation()},focus:function(t){t.stopPropagation()},blur:function(i){i.stopPropagation(),t.activeEdit="",e.name=i.target.value},keyup:function(i){if(!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter"))return null;t.activeEdit="",e.name=i.target.value}}}):s("div",{staticClass:"fo-14 ml-8"},[t._v(t._s(e.name))])])}))],2),t._l(t.sceneChildren,(function(e,n){return s("div",{key:n,class:"render-child flex flex-start item-center "+(t.activeModel==e.id?"render-child--active":""),on:{click:function(i){return i.stopPropagation(),t.changeMode(e)},dblclick:function(e){e.stopPropagation(),t.activeEdit=n}}},[s("div",{staticClass:"render-child--icon flex flex-center item-center"},[t.activeModel==e.id?s("img",{attrs:{src:i("a4f1")}}):s("img",{attrs:{src:i("1fa1")}})]),t.activeEdit===n?s("input",{staticClass:"input",staticStyle:{width:"160px"},attrs:{type:"text"},domProps:{value:e.name.replace("allGroup-","")},on:{click:function(t){t.stopPropagation()},focus:function(t){t.stopPropagation()},blur:function(i){t.activeEdit="",e.name="allGroup-"+i.target.value},keyup:function(i){if(!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter"))return null;t.activeEdit="",e.name="allGroup-"+i.target.value}}}):s("div",{staticClass:"fo-14 ml-8 ell"},[t._v(t._s(e.name.replace("allGroup-","")))])])}))],2)]),s("scrollbar",{attrs:{maxHeight:t.HEIGHT-260}},[s("div",[""==t.activeModel?s("div",{staticClass:"pl-12"},[s("a-divider"),s("div",{staticClass:"fo-14 pfow "},[t._v("构图比例")]),s("div",{staticClass:"flex flex-start item-center mt-16 "},t._l(t.ratios,(function(e,i){return s("div",{key:i,class:" small-btn "+(i==t.ratioIndex?"bg-b-active":"bg-b-def"),on:{click:function(e){return t.ratioClick(i)}}},[t._v(" "+t._s(e.w)+":"+t._s(e.h)+" ")])})),0),s("div",{staticClass:"fo-14 pfow mt-24"},[t._v("清晰度")]),s("div",{staticClass:"mt-12"},t._l(t.claritys,(function(e,n){return s("div",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!item.hidden"}],key:n,class:" flex flex-between item-center long-btn "+(n===t.clarityIndex?"bg-b-active":"bg-b-def")+" "+(e.close?"bg-close":""),on:{click:function(e){return t.clarityClick(n)}}},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"fo-12 ml-12",staticStyle:{display:"block","white-space":"nowrap"}},[t._v(" "+t._s(e.label)+" ")]),e.vip&&!e.close?s("img",{staticClass:"ml-8",attrs:{src:i("0be3"),height:"14px",alt:""}}):t._e(),e.close?s("div",{staticClass:"wait-open"},[t._v("待开放")]):t._e()]),s("div",{staticClass:"fo-12 mr-12"},[t._v(t._s(e.w)+"*"+t._s(e.h))])])})),0)],1):t._e(),s("rect-area-light",{directives:[{name:"show",rawName:"v-show",value:"string"===typeof t.activeModel&&t.activeModel.indexOf("s")>-1,expression:"typeof activeModel === 'string' && activeModel.indexOf('s') > -1"}]}),s("envLight",{directives:[{name:"show",rawName:"v-show",value:-2===t.activeModel,expression:"activeModel === -2"}]}),s("sunLight",{directives:[{name:"show",rawName:"v-show",value:-3===t.activeModel,expression:"activeModel === -3"}],attrs:{light:t.light},on:{openSunLightChange:t.openSunLightChange}}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.activeModel>=0&&"number"===typeof t.activeModel,expression:"activeModel >= 0 && typeof activeModel === 'number'"}]},[s("div",{staticClass:"fo-14 bold title"},[t._v("操作")]),s("div",{staticClass:"flex flex-center item-center"},[s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",{staticClass:"fo-12"},[t._v("位置平移")])]),s("div",{staticClass:"opt-btn ",on:{click:function(e){return t.changeTransform("translate")}}},[s("img",{directives:[{name:"show",rawName:"v-show",value:"translate"!==t.transformMode,expression:"transformMode !== 'translate'"}],attrs:{src:i("d849")}}),s("img",{directives:[{name:"show",rawName:"v-show",value:"translate"===t.transformMode,expression:"transformMode === 'translate'"}],attrs:{src:i("41fe")}})])],2),s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",{staticClass:"fo-12"},[t._v("位置旋转")])]),s("div",{staticClass:"opt-btn ml-4",on:{click:function(e){return t.changeTransform("rotate")}}},[s("img",{directives:[{name:"show",rawName:"v-show",value:"rotate"!==t.transformMode,expression:"transformMode !== 'rotate'"}],attrs:{src:i("3039")}}),s("img",{directives:[{name:"show",rawName:"v-show",value:"rotate"===t.transformMode,expression:"transformMode === 'rotate'"}],attrs:{src:i("ba44")}})])],2),s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",{staticClass:"fo-12"},[t._v("移动到地面")])]),s("div",{staticClass:"opt-btn ml-4",on:{click:t.moveToGround}},[s("img",{attrs:{src:i("e019")}})])],2),s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",{staticClass:"fo-12"},[t._v("复制")])]),s("div",{staticClass:"opt-btn ml-4",on:{click:t.copyClick}},[s("img",{attrs:{src:i("f522")}})])],2),s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",{staticClass:"fo-12"},[t._v("删除")])]),s("div",{staticClass:"opt-btn ml-4 ",style:{cursor:t.sceneChildren.length>1?"pointer":"not-allowed"},on:{click:function(e){t.sceneChildren.length>1&&t.delClick()}}},[t.sceneChildren.length>1?s("img",{attrs:{src:i("6925")}}):s("img",{attrs:{src:i("cfb5")}})])],2)],1),s("a-divider"),s("div",{staticClass:"fo-14  title"},[t._v("位置")]),s("div",{staticClass:"flex flex-start item-center "},[s("div",{staticClass:"pfow ml-16"},[t._v("X")]),s("input",{staticClass:"tarnsform-input",attrs:{type:"text"},domProps:{value:t.position.x+t.positionUnitX},on:{focus:function(e){t.positionUnitX=""},blur:function(e){return t.transformChange(e,"position","x")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.transformChange(e,"position","x")}}}),s("div",{staticClass:"pfow ml-8"},[t._v("Y")]),s("input",{staticClass:"tarnsform-input",attrs:{type:"text"},domProps:{value:t.position.y+t.positionUnitY},on:{focus:function(e){t.positionUnitY=""},blur:function(e){return t.transformChange(e,"position","y")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.transformChange(e,"position","y")}}}),s("div",{staticClass:"pfow ml-8"},[t._v("Z")]),s("input",{staticClass:"tarnsform-input",attrs:{type:"text"},domProps:{value:t.position.z+t.positionUnitZ},on:{focus:function(e){t.positionUnitZ=""},blur:function(e){return t.transformChange(e,"position","z")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.transformChange(e,"position","z")}}})]),s("div",{staticClass:"fo-14  title mt-12"},[t._v("旋转角度")]),s("div",{staticClass:"flex flex-start item-center "},[s("div",{staticClass:"pfow ml-16"},[t._v("X")]),s("input",{staticClass:"tarnsform-input",attrs:{type:"text"},domProps:{value:t.rotate.x+t.rotateUnitX},on:{focus:function(e){t.rotateUnitX=""},blur:function(e){return t.transformChange(e,"rotate","x")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.transformChange(e,"rotate","x")}}}),s("div",{staticClass:"pfow ml-8"},[t._v("Y")]),s("input",{staticClass:"tarnsform-input",attrs:{type:"text"},domProps:{value:t.rotate.y+t.rotateUnitY},on:{focus:function(e){t.rotateUnitY=""},blur:function(e){return t.transformChange(e,"rotate","y")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.transformChange(e,"rotate","y")}}}),s("div",{staticClass:"pfow ml-8"},[t._v("Z")]),s("input",{staticClass:"tarnsform-input",attrs:{type:"text"},domProps:{value:t.rotate.z+t.rotateUnitZ},on:{focus:function(e){t.rotateUnitZ=""},blur:function(e){return t.transformChange(e,"rotate","z")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.transformChange(e,"rotate","z")}}})]),s("div",{staticClass:"fo-14  title mt-12"},[t._v("折叠")]),s("div",{staticClass:"pl-12 pr-12"},[s("a-slider",{staticStyle:{"margin-top":"5px"},attrs:{"tip-formatter":function(t){return t+"%"},max:100,min:0,step:1},on:{change:t.folderChange,"after-change":function(e){return t.$emit("attch-change")}},model:{value:t.folderValue,callback:function(e){t.folderValue=e},expression:"folderValue"}})],1)],1)],1)])],1)])},n=[],a=(i("5319"),i("1276"),i("ddb0"),i("5530")),r=i("9393"),o=i("5880"),l=i("7018"),c=i("5c7a"),h=i("0d08"),d=i("8d18"),u=i("6116"),p={props:["height","active","transform","light","envLight","lights"],mixins:[r["a"]],components:{Pallet:l["a"],envLight:c["default"],sunLight:h["default"],rectAreaLight:d["default"],RectAreaLight:d["default"]},watch:{height(t){this.HEIGHT=t},active(t){this.activeModel=t||"";for(let e of this.sceneChildren)e.id==t&&(this.sceneTitle=e.name.replace("allGroup-",""))},transform(t){this.transformMode=t}},computed:Object(a["a"])({},Object(o["mapGetters"])("profile",["isVip"])),data(){return{openLights:!0,lightColor:"rgba(255,255,255,1)",sceneTitle:"",activeEdit:"",lightPositionValue:45,lightPowerValue:17,lightHeightValue:2.5,shadowValue:10,lightPositionUnit:"°",lightPowerUnit:"%",lightHeightUnit:"m",shadowUnit:"°",visible:!0,showTip:!1,HEIGHT:this.height,positionUnitX:"mm",positionUnitY:"mm",positionUnitZ:"mm",rotateUnitX:"°",rotateUnitY:"°",rotateUnitZ:"°",sceneChildren:[],activeModel:this.active,transformMode:this.transform,position:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},folderValue:20,ratios:[{w:16,h:9},{w:9,h:16},{w:4,h:3},{w:3,h:4},{w:1,h:1}],ratioIndex:0,claritys:[{label:"1K标清",w:1024,h:576},{label:"2K高清",w:1920,h:1080,vip:!0},{label:"3K超清",w:2560,h:1440,vip:!0,close:!1},{label:"4K超高清",w:3840,h:2160,vip:!0,close:!1}],clarityIndex:0,openSunLight:!0}},mounted(){this.emitSize()},methods:{openSunLightChange(t){this.openSunLight=t,this.$emit("openSunLightChange",t)},colorConfirmLight(t){this.lightColor=t.rgba,this.$emit("lightColorChange",t.rgba)},clearNoNum:u["c"],lightPositionInput(t){"blur"===t.type&&(this.lightPositionUnit="°");let e=0;t.target.value&&(e=parseInt(this.clearNoNum(t.target.value))),e>360&&(e=360),e<0&&(e=0),this.lightPositionValue!=e&&(this.lightPositionValue=e,this.$emit("attch-history","lightPositionInput")),this.lightPositionChange(e)},lightPositionChange(t){const e=6*Math.cos(t*Math.PI/180),i=6*Math.sin(t*Math.PI/180);this.$emit("lightPositionChange",{x:i,z:e})},lightPowerInput(t){"blur"===t.type&&(this.lightPowerUnit="%");let e=0;t.target.value&&(e=parseFloat(this.clearNoNum(t.target.value))),e>100&&(e=100),e<0&&(e=0),this.lightPowerValue!=e&&(this.lightPowerValue=e,this.$emit("attch-history","lightPowerInput")),this.lightPowerChange(e)},shadowInput(t){"blur"===t.type&&(this.shadowUnit="°");let e=0;t.target.value&&(e=parseInt(this.clearNoNum(t.target.value))),e>180&&(e=180),e<0&&(e=0),this.shadowValue!=e&&(this.shadowValue=e,this.$emit("attch-history","shadowInput")),this.shadowChange(e)},shadowChange(t){this.$emit("shadowChange",t)},lightPowerChange(t){this.$emit("lightPowerChange",t/50)},lightHeightInput(t){"blur"===t.type&&(this.lightHeightUnit="m");let e=0;t.target.value&&(e=parseFloat(this.clearNoNum(t.target.value))),e>5&&(e=5),e<0&&(e=0),this.lightHeightValue!=e&&(this.lightHeightValue=e,this.$emit("attch-history","lightHeightInput")),this.lightHeightChange(e)},lightHeightChange(t){this.$emit("lightHeightChange",4*t)},setRatio(t,e=!0){const i=t.split(":");let s=0;for(let n in this.ratios)this.ratios[n].w==i[0]&&(s=n);this.ratioClick(s,e)},ratioClick(t,e){switch(this.ratioIndex=t,this.$emit("ratio-change",this.ratios[this.ratioIndex]),e&&this.$emit("attch-history","ratioClick"),this.ratios[this.ratioIndex].w){case 16:this.claritys[0].w=1024,this.claritys[0].h=576,this.claritys[1].w=1920,this.claritys[1].h=1080,this.claritys[2].w=2560,this.claritys[2].h=1440,this.claritys[3].w=3840,this.claritys[3].h=2160,this.claritys[3].hidden=!1;break;case 9:this.claritys[0].w=576,this.claritys[0].h=1024,this.claritys[1].w=1080,this.claritys[1].h=1920,this.claritys[2].w=1440,this.claritys[2].h=2560,this.claritys[3].w=2160,this.claritys[3].h=3840,this.claritys[3].hidden=!1;break;case 4:this.claritys[0].w=1024,this.claritys[0].h=768,this.claritys[1].w=1600,this.claritys[1].h=1200,this.claritys[2].w=3200,this.claritys[2].h=2400,this.claritys[3].w=4e3,this.claritys[3].h=3e3,this.claritys[3].hidden=!1;break;case 3:this.claritys[0].w=768,this.claritys[0].h=1024,this.claritys[1].w=1200,this.claritys[1].h=1600,this.claritys[2].w=2400,this.claritys[2].h=3200,this.claritys[3].w=3e3,this.claritys[3].h=4e3,this.claritys[3].hidden=!1;break;case 1:this.claritys[0].w=768,this.claritys[0].h=768,this.claritys[1].w=1920,this.claritys[1].h=1920,this.claritys[2].w=3200,this.claritys[2].h=3200,this.claritys[3].hidden=!0;break}this.emitSize()},clarityClick(t){this.claritys[t].close||(this.claritys[t].close||this.claritys[t].vip?this.claritys[t].vip&&(this.isVip?(this.clarityIndex=t,this.emitSize()):this.showPersonalVip()):(this.clarityIndex=t,this.emitSize()))},emitSize(){this.$emit("change-size",this.claritys[this.clarityIndex].w+"*"+this.claritys[this.clarityIndex].h)},moveToGround(){this.position.y=0,this.$emit("transform-action",{position:this.position,rotation:{x:this.rotate.x*Math.PI/180,y:this.rotate.y*Math.PI/180,z:this.rotate.z*Math.PI/180}})},setSceneChildren(t){this.sceneChildren=t},changeMode(t){this.$emit("mode-change",t),"number"!==typeof t&&"string"!==typeof t||(this.activeModel=t,this.activeEdit="")},changeTransform(t){this.$emit("transform-change",t)},copyClick(){this.$emit("copy")},delClick(){this.$emit("del")},setPosition(t){this.position.x=Math.floor(100*t.x)/100,this.position.y=Math.floor(100*t.y)/100,this.position.z=Math.floor(100*t.z)/100},setRotate(t){t.x,Math.PI,this.rotate.x=Math.floor(t.x/Math.PI*180*100)/100,this.rotate.y=Math.floor(t.y/Math.PI*180*100)/100,this.rotate.z=Math.floor(t.z/Math.PI*180*100)/100},folderChange(t){this.$emit("folder-change",t)},transformChange(t,e,i){"position"===e?this["positionUnit"+i.toUpperCase()]="mm":this["rotateUnit"+i.toUpperCase()]="°",this[e][i]=t.target.value.replace(/[^\-?\d.]/g,""),this.$emit("transform-action",{position:this.position,rotation:{x:this.rotate.x*Math.PI/180,y:this.rotate.y*Math.PI/180,z:this.rotate.z*Math.PI/180}})}}},f=p,m=(i("d448"),i("2877")),g=Object(m["a"])(f,s,n,!1,null,null,null);e["default"]=g.exports},c4b1:function(t,e){t.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}}},c4bb:function(t,e,i){"use strict";var s=i("3c87"),n=i.n(s);n.a},c4c7:function(t,e,i){"use strict";var s=i("0906"),n=i.n(s);n.a},c4d7:function(t,e,i){t.exports=i.p+"editor-assets/img/arrange-top.d7dc81ae.svg"},c527:function(t,e,i){"use strict";var s=i("0ccc"),n=i.n(s);n.a},c5fd:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"rendererd-mode",style:{width:t.WIDTH+"px",height:t.HEIGHT+"px"},attrs:{id:"mode3dContainer"}},[i("canvas",{staticClass:"rendererd-mode-canvas",attrs:{id:"renderCanvas",tanindex:"-1"}}),i("div",{staticClass:"mask-opt flex flex-center",style:{width:t.ratioWidth+"px",height:t.ratioHeight+"px",borderLeftWidth:Math.round((t.WIDTH-240-t.ratioWidth)/2)+"px",borderRightWidth:Math.round((t.WIDTH-240-t.ratioWidth)/2)+"px",borderBottomWidth:Math.round((t.HEIGHT-t.ratioHeight)/2)+"px",borderTopWidth:Math.round((t.HEIGHT-t.ratioHeight)/2)+"px"},attrs:{id:"maskOpt"}},[i("div",{staticClass:"mask-opt__panel",style:{width:t.ratioWidth+"px",height:t.ratioHeight+"px"}},[i("div",{staticClass:"ratio"},[t._v(" "+t._s(t.ratioText())+" ")]),1===t.guideFlag?i("div",{staticClass:"mask-opt__panel-line1",style:{height:t.ratioHeight/3+"px",top:t.ratioHeight/3-2+"px"}}):t._e(),1===t.guideFlag?i("div",{staticClass:"mask-opt__panel-line2",style:{width:t.ratioWidth/3+"px",top:-t.ratioHeight/3+"px"}}):t._e(),2===t.guideFlag?i("div",{staticClass:"mask-opt__panel-line1",style:{height:.382*t.ratioHeight/2+"px",top:t.ratioHeight/2-.382*t.ratioHeight/4+"px"}}):t._e(),2===t.guideFlag?i("div",{staticClass:"mask-opt__panel-line2",style:{width:.382*t.ratioWidth/2+"px",top:-.382*t.ratioHeight/2+"px"}}):t._e()])]),i("div",{staticClass:"top",style:{height:Math.round((t.HEIGHT-t.ratioHeight)/2)+"px",width:t.WIDTH+"px",top:0},on:{click:function(e){return e.stopPropagation(),t.clearChooseMode(e)}}}),i("div",{staticClass:"top",style:{height:parseInt((t.HEIGHT-t.ratioHeight)/2)+"px",width:t.WIDTH+"px",bottom:0},on:{click:function(e){return e.stopPropagation(),t.clearChooseMode(e)}}}),i("div",{staticClass:"top",style:{height:t.HEIGHT+"px",width:parseInt((t.WIDTH-240-t.ratioWidth)/2)+"px",top:parseInt((t.HEIGHT-t.ratioHeight)/2)+"px",left:0},on:{click:function(e){return e.stopPropagation(),t.clearChooseMode(e)}}}),i("div",{staticClass:"top",style:{height:t.HEIGHT+"px",width:Math.round((t.WIDTH-240-t.ratioWidth)/2)+"px",top:Math.round((t.HEIGHT-t.ratioHeight)/2)+"px",left:Math.round((t.WIDTH-240-t.ratioWidth)/2)+t.ratioWidth+"px"},on:{click:function(e){return e.stopPropagation(),t.clearChooseMode(e)}}}),i("a-tooltip",{attrs:{placement:"top",overlayClassName:"tip-higher"}},[i("template",{slot:"title"},[i("span",{staticClass:"fo-12"},[t._v("包小盒独创研发的云渲染引擎（Rendering Engine by BXH，简称REB），通过改变环 境、光照和材质来模拟真实棚拍效果图的成像 技术。")])]),i("div",{staticClass:"tip-guys flex flex-start item-center"},[i("img",{attrs:{src:s("7b9c"),alt:""}}),i("div",{staticClass:"ml-4 fo-mode fo-12"},[t._v("包小盒云渲染引擎强力支持")])])],2),i("a-button",{staticClass:"render-btn",style:{position:"fixed",bottom:"30px",left:(this.WIDTH-240)/2+256-60+"px"},attrs:{loading:t.renderLoad,type:"primary"},on:{click:function(e){return t.screenshot()}}},[i("img",{attrs:{src:s("6d570"),alt:""}}),i("span",{staticClass:"fo-14 fo-white ml-8"},[t._v("立即渲染")])]),t.user.is_admin?i("a-button",{staticClass:"render-btn",style:{position:"fixed",bottom:"30px",left:(this.WIDTH-240)/2+256+70+"px",width:"50px",padding:"0"},attrs:{loading:t.renderLoad,type:"primary"},on:{click:function(e){return t.startRender()}}},[i("span",{staticClass:"fo-14 fo-white "},[t._v("下载")])]):t._e(),i("guide",{model:{value:t.guideFlag,callback:function(e){t.guideFlag=e},expression:"guideFlag"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showShotCutImg,expression:"showShotCutImg"}],staticClass:"screenshot",style:{width:t.ratioWidth+"px",height:t.ratioHeight+"px",left:(t.WIDTH-240-t.ratioWidth)/2+256+56+"px",top:(t.HEIGHT-t.ratioHeight)/2+56+"px"},attrs:{id:"imgCut"}},[i("img",{attrs:{src:t.shotcutImg}})])],1),i("property",{ref:"property",attrs:{height:t.HEIGHT,active:t.activeModel,transform:t.transformMode,lights:t.lights},on:{"mode-change":t.chooseMode,"transform-change":t.transformSetMode,"transform-action":t.transformChange,copy:t.copyMode,del:t.delMode,"folder-change":t.doAnimate,"attch-change":function(e){return t.$emit("attch-history","animate")},"attch-history":function(e){return t.$emit("attch-history",e)},"change-size":function(e){return t.$emit("change-size",e)},"ratio-change":function(e){return t.$emit("ratio-change",e)},lightColorChange:t.lightColorChange,lightPositionChange:t.lightPositionChange,lightPowerChange:t.lightPowerChange,lightHeightChange:t.lightHeightChange,shadowChange:t.changeShadow,openSunLightChange:t.openSunLightChange}}),i("progress-bar",{on:{cancel:function(e){t.needsToCancel=!0}},model:{value:t.progressBarShow,callback:function(e){t.progressBarShow=e},expression:"progressBarShow"}})],1)},a=[],r=(s("5319"),s("1276"),s("2ca0"),s("5cc6"),s("b39a"),s("ddb0"),s("2b3d"),s("5530")),o=s("5fda"),l=s("c64e"),c=s.n(l),h=s("5a0c"),d=s.n(h),u=s("ed08"),p=s("b1d4"),f=s("54c2"),m=s("054f"),g=s("5a38"),v=s.n(g),b=s("5880"),y=s("170e"),_=s("ddcb"),x=(s("a362"),{props:["width","height","ratio","bg"],components:{guide:p["default"],property:y["default"],progressBar:_["default"]},data(){return{WIDTH:this.width,HEIGHT:this.height,renderer:null,scene:null,camera:null,controls:null,scene:null,transformControl:null,optControls:null,raycaster:null,mouse:null,INTERSECTED:null,textureCube:null,fog:null,grid:null,axesHelper:null,isClick:!1,ratioHeight:0,ratioWidth:0,transformMode:"translate",guideFlag:0,group:null,renderLoad:!1,bgmesh:null,size:"",light:null,envLight:null,lights:[],transparent:!1,background:"rgba(255,255,255,1)",shotcutImg:"",showShotCutImg:!1,lightColor:"rgba(255,255,255,1)",shadowRaduis:10,hoverHelp:"",activeModel:"",modeList:{},uploadImageUrl:"",suffix:"",moved:!1,envLightColor:"rgba(255,255,255,1)",envLightIntensity:.6,envUrl:"",envIntensity:.7,progressBarShow:!1,needsToCancel:!1}},watch:{width(t){this.WIDTH=t,this.camera.aspect=(this.WIDTH-240)/this.HEIGHT,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.WIDTH-240,this.HEIGHT),this.initRatio(this.ratio),this.transparent?this.scene.background.repeat.x=(this.WIDTH-240)/16:this.background&&!this.background.startsWith("rgba")&&this.initCanvas(this.background),this.doRender()},height(t){this.HEIGHT=t,this.camera.aspect=(this.WIDTH-240)/this.HEIGHT,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.WIDTH-240,this.HEIGHT),this.initRatio(this.ratio),this.transparent?this.scene.background.repeat.x=this.HEIGHT/16:this.background&&!this.background.startsWith("rgba")&&this.initCanvas(this.background),this.doRender()},ratio(t){this.initRatio(t),this.background&&!this.background.startsWith("rgba")&&this.initCanvas(this.background)},bg(t){const e=JSON.parse(t);if(this.transparent=e.transparent,this.transparent){const t=(new o["TextureLoader"]).load(v.a,e=>{t.wrapS=o["RepeatWrapping"],t.wrapT=o["RepeatWrapping"],t.repeat.set((this.WIDTH-240)/16,this.HEIGHT/16),this.scene.background=t,this.fog.color=new o["Color"](16777215),this.doRender()})}else if(e.bg.startsWith("rgba")){const t=new o["Color"](e.bg),i=t;this.scene.background=i,this.bgmesh.material.map=null,this.bgmesh.material.color=i,this.fog.color=t,this.doRender()}else this.fog.color=new o["Color"](16777215),this.initCanvas(e.bg);e.suffix&&(this.suffix=e.suffix),this.background=e.bg}},computed:Object(r["a"])(Object(r["a"])({},Object(b["mapState"])("profile",["user"])),{},{modelScale(){return this.$root.knifeData.size?f["a"].modelScale(this.$root.knifeData.size):0}}),mounted(){this.init(),this.initRatio(this.ratio),this.handleKeyDown(),this.$bus.$on("envLightChange",t=>{this.setEnvLight(t)}),this.$bus.$on("renderAddLight",()=>{this.addLight({},{})}),this.$bus.$on("lightCurrentPositionChange",t=>{this.lightCurrentPositionChange(t)}),this.$bus.$on("lightCurrentPowerChange",t=>{this.lightCurrentPowerChange(t)}),this.$bus.$on("lightCurrentHeightChange",t=>{this.lightCurrentHeightChange(t)}),this.$bus.$on("lightCurrentColorChange",t=>{this.lightCurrentColorChange(t)}),this.$bus.$on("doLightCopy",()=>{this.lightsCopy()}),this.$bus.$on("doLightDel",()=>{this.lightsDel()})},beforeDestroy(){this.$bus.$off("envLightChange"),this.$bus.$off("renderAddLight"),this.$bus.$off("lightCurrentPositionChange"),this.$bus.$off("lightCurrentPowerChange"),this.$bus.$off("lightCurrentHeightChange"),this.$bus.$off("lightCurrentColorChange"),this.$bus.$off("doLightCopy"),this.$bus.$off("doLightDel")},methods:{lightsCopy(){const t=this.lights[this.activeModel.replace("s","")],e=this.scene.getObjectById(t.id);this.addLight(t,e.position),this.doRender()},lightsDel(){const t=this.activeModel.replace("s",""),e=this.lights[t],i=this.scene.getObjectById(e.id);this.clearChooseMode(),this.scene.remove(i),this.lights.splice(t,1),this.doRender()},initSceneLights(t){for(let e in this.lights){const t=this.scene.getObjectById(this.lights[e].id);this.scene.remove(t)}this.lights=[];for(let e of t)this.addLight(e,e.position)},lightCurrentColorChange(t){const e=this.lights[this.activeModel.replace("s","")];e.color=t,this.scene.getObjectById(e.id).color=new o["Color"](t),this.scene.getObjectById(e.id).children[0].update(),this.doRender()},lightCurrentHeightChange(t){const e=this.lights[this.activeModel.replace("s","")];this.scene.getObjectById(e.id).position.setY(t),this.scene.getObjectById(e.id).lookAt(0,0,0),this.doRender()},lightCurrentPowerChange(t){const e=this.lights[this.activeModel.replace("s","")];e.intensity=t,this.scene.getObjectById(e.id).intensity=t,this.doRender()},lightCurrentPositionChange(t){const e=this.lights[this.activeModel.replace("s","")],i=this.scene.getObjectById(e.id);i.position.setX(t.x),i.position.setZ(t.z),i.lookAt(0,0,0),this.doRender()},addLight(t,e){let i={color:t.color||"rgba(255,255,255,1)",intensity:t.intensity||1,width:t.width||5,height:t.height||5,id:"",name:t.name||(this.lights.length>0?"灯光"+(this.lights.length+1):"灯光")};const s=new o["RectAreaLight"](i.color,i.intensity,i.width,i.height);s.name=i.name,i.id=s.id,s.position.set(e.x||5,e.y||5,e.z||5),this.scene.add(s),s.lookAt(0,0,0),this.lights.push(i)},setEnvLight({envUrl:t,envLightIntensity:e,color:i,intensity:s}){this.envLightColor=i,this.envLightIntensity=e,this.envIntensity=s,this.envUrl=t,this.$bus.$emit("envLightIntensityChange",e),this.envLight.intensity=s,this.envLight.color=new o["Color"](i),this.doRender()},openSunLightChange(t){this.light.visible=t,this.doRender()},ratioText(){return this.$refs.property?this.$refs.property.claritys[this.$refs.property.clarityIndex].w+" x "+this.$refs.property.claritys[this.$refs.property.clarityIndex].h+" px":""},lightPowerChange(t){this.light.intensity=t,this.doRender()},lightPositionChange(t){this.light.position.x=t.x,this.light.position.z=t.z,this.light.lookAt(0,0,0),this.doRender()},lightHeightChange(t){this.light.position.y=t,this.light.lookAt(0,0,0),this.doRender()},setShadowValue(t){this.$refs.property.shadowValue=t},setPowerValue(t){this.$refs.property.lightPowerValue=Math.floor(50*t*10/10)},setLightValue(t){this.$refs.property.lightPositionValue=parseInt(180*Math.atan(t.z/t.x)/Math.PI)},setLightHeightValue(t){this.$refs.property.lightHeightValue=t/4},setRatio(t,e){this.$refs.property.setRatio(t,e)},calculateSize(t,e,i,s){let n={x:Math.abs(e.max.x-e.min.x),y:Math.abs(e.max.y-e.min.y),z:Math.abs(e.max.z-e.min.z)},a=(Math.abs(t.max.x-t.min.x),Math.abs(t.max.y-t.min.y),Math.abs(t.max.z-t.min.z),{x:i.x-n.x/2-(s.x-n.x/2),y:i.y-n.y/2-(s.y-n.y/2),z:i.z-n.z/2-(s.z-n.z/2)});return["x","y","z"].forEach(t=>{Math.abs(i[t]+n[t]/2-(s[t]-n[t]/2))<Math.abs(a[t])&&(a[t]=i[t]+n[t]/2-(s[t]-n[t]/2)),Math.abs(i[t]+n[t]/2-(s[t]+n[t]/2))<Math.abs(a[t])&&(a[t]=i[t]+n[t]/2-(s[t]+n[t]/2)),Math.abs(i[t]-n[t]/2-(s[t]+n[t]/2))<Math.abs(a[t])&&(a[t]=i[t]-n[t]/2-(s[t]+n[t]/2))}),a},async getAllParams(t=!1){if(t&&this.background&&!this.background.startsWith("rgba")){let t=new FormData;t.append("type",1),t.append("project_id",this.$root.projectData.id),t.append("file",this.convertBase64UrlToBlob(this.background,this.suffix||"png"));let e=await m["a"].putFile(t.get("file"),{xapi:"renderbg",rename:c()()+"."+(this.suffix||"png"),type:JSON.stringify({type:1,project_id:this.$root.projectData.id})});0===e.errno&&(this.uploadImageUrl=e.data.url)}let e=[];for(let a of this.lights){const t=this.scene.getObjectById(a.id);e.push(Object.assign(a,{position:t.position}))}let i={scene:{camera:{position:this.camera.position},backgroundUrl:this.uploadImageUrl,background:this.background.startsWith("rgba")?this.background:this.uploadImageUrl,transparent:this.transparent,ratio:this.ratio,light:{position:this.light.position,intensity:this.light.intensity,color:"#"+this.light.color.getHexString(),visible:this.light.visible},lights:e,envLight:{color:this.envLightColor,intensity:this.envIntensity,envLightIntensity:this.envLightIntensity,envUrl:this.envUrl},shadow:{radio:this.shadowRaduis},groups:[]}};this.group.children[0].children[1].geometry.computeBoundingBox();const s=this.group.children[0].children[1].geometry.boundingBox,n=this.group.children[0].position;for(let a in this.group.children){const t=this.group.children[a];let e=null;if(a>0){t.children[1].geometry.computeBoundingBox();const i=t.children[1].geometry.boundingBox;e=this.calculateSize(i,s,t.position,n)}i.scene.groups.push({position:t.position,rotation:t.rotation,spacing:e,folderCurrent:this.modeList["id_"+t.id].current,name:t.name})}return i},handleKeyDown(){const t=document.getElementById("mode3dContainer");t.addEventListener("keydown",t=>{const{ctrlKey:e,metaKey:i,shiftKey:s,code:n}=t;this.activeModel&&((e||i)&&"KeyC"===n&&this.copyMode(),(e||i)&&"KeyZ"===n&&this.$emit("rollback"),(e||i)&&s&&"KeyZ"===n&&this.$emit("recovery"),"Backspace"===n&&this.group.children.length>1&&this.delMode(),"Tab"===n&&this.transformSetMode("translate"===this.transformMode?"rotate":"translate")),(e||i)&&"KeyG"===n&&(this.grid.visible=!this.grid.visible),(e||i)&&"KeyI"===n&&(this.axesHelper.visible=!this.axesHelper.visible),t.preventDefault(),this.doRender()})},copyMode(){if(this.group.children.length>=20)return this.$message.warning("同一模型数量最多为20个"),!1;const t=this.group.getObjectById(this.activeModel),e=t.clone();e.position.set(e.position.x+4.5,e.position.y,e.position.z),e.name=t.name+"-副本",this.initModeLineData(e,this.activeModel),this.group.add(e),this.chooseMode(e),this.$refs.property.setSceneChildren(this.group.children),this.$emit("attch-history","copyMode")},delMode(){const t=this.group.getObjectById(this.activeModel);let e=-1;for(let i in this.modeList)this.modeList[i].id==this.activeModel&&(e=i);e>-1&&this.modeList.splice(e,i);this.group.remove(t);this.clearChooseMode(),this.$refs.property.setSceneChildren(this.group.children),this.doRender(),this.$emit("attch-history","delMode")},chooseMode(t){if(t){if("number"===typeof t)return-1==t?void this.clearChooseMode():(this.clearChooseMode(),void(this.activeModel=t));if("string"===typeof t&&t.indexOf("s")>-1){this.clearChooseMode(),this.activeModel=t;const e=this.lights[t.replace("s","")],i=this.scene.getObjectById(e.id);return this.doRender(),void this.$bus.$emit("getCurrentLight",{light:e,position:i.position})}this.activeModel=t.id,this.transformSetMode("translate"),this.transformControl.attach(t),this.setFolderValue(),this.doRender()}},transformChange(t){const e=this.group.getObjectById(this.activeModel);e.position.set(parseFloat(t.position.x||0),parseFloat(t.position.y||0),parseFloat(t.position.z||0)),e.rotation.set(parseFloat(t.rotation.x||0),parseFloat(t.rotation.y||0),parseFloat(t.rotation.z||0)),this.doRender(),this.$emit("attch-history","transformChange")},clearChooseMode(){this.activeModel="",this.transformControl.detach(),this.doRender()},changeShadow(t){this.shadowRaduis=t,this.light.shadow.radius=this.shadowRaduis,this.doRender()},lightColorChange(t){this.lightColor=t,this.changeLightColor(),this.$emit("attch-history","colorConfirmLight")},changeLightColor(){this.light.color=new o["Color"](this.lightColor),this.$refs.property.lightColor=this.lightColor,this.doRender()},async screenshot(t=!1,e=!0){this.$track({category:"render-3d",action:"click"});let i=this.renderer.domElement;this.renderer.render(this.scene,this.camera);i.getContext("2d");let s=new Image;s.src=i.toDataURL("image/png"),s.onload=async()=>{let i=document.createElement("canvas");i.width=this.ratioWidth,i.height=this.ratioHeight;let n=i.getContext("2d");n.drawImage(s,(this.WIDTH-240-this.ratioWidth)/2,(this.HEIGHT-this.ratioHeight)/2,this.ratioWidth,this.ratioHeight,0,0,this.ratioWidth,this.ratioHeight),this.shotcutImg=i.toDataURL("image/jpeg",.9);let a=document.getElementById("imgCut"),r=1,o=0,l=0,h=parseInt(a.style.top.replace("px")),d=parseInt(a.style.left.replace("px")),u=window.innerWidth;e&&(this.showShotCutImg=!0);let p=new FormData;p.append("type",1),p.append("project_id",this.$root.projectData.id),p.append("file",this.convertBase64UrlToBlob(this.shotcutImg));let f=await m["a"].putFile(p.get("file"),{xapi:"rendercut",rename:c()()+".png",type:JSON.stringify({type:1,project_id:this.$root.projectData.id})});await this.startRender(!0,"",t,f.data.url),e&&(this.$nextTick(()=>{let t=setInterval(()=>{r-=.02,o-=.02*(56+this.HEIGHT/2),l+=.01*(u-512+50+56),a.style.transform=`scale(${r})`,a.style.top=h+o+"px",a.style.left=d+l+"px",r<=.02&&(clearInterval(t),this.showShotCutImg=!1,a.style.left=(this.WIDTH-240-this.ratioWidth)/2+256+56+"px",a.style.top=(this.HEIGHT-this.ratioHeight)/2+56+"px",a.style.transform="scale(1)")},15)}),this.$emit("change-result-animate"))}},convertBase64UrlToBlob(t,e="png"){for(var i=window.atob(t.split(",")[1]),s=new ArrayBuffer(i.length),n=new Uint8Array(s),a=0;a<i.length;a++)n[a]=i.charCodeAt(a);return new Blob([s],{type:"image/"+e})},async startRender(t,e,i,s,n=!1){n||(this.progressBarShow=!0);const a={embedImages:!0,truncateDrawRange:!1,forceIndices:!0,binary:!0,maxTextureSize:4096,onlyVisible:!1};if(this.background&&!this.background.startsWith("rgba")){await this.initCanvas(this.background,"prod")}const r=new u["a"],o=JSON.stringify(await this.getAllParams(!0));this.renderLoad=!0;const l=[this.scene.getObjectByName("container"),this.scene.getObjectByName("plane"),this.bgmesh];return new Promise(h=>{r.parse(l,async a=>{if(t){const t=new Blob([a],{type:"application/octet-stream"});t.lastModifiedDate=new Date;const r=c()();t.name=r+".glb";const l=await m["a"].putFile(t,{xapi:"glb",rename:d()().format("YYYYMMDD")+"/"+t.name,type:"glb"});if(!l||!l.data||!l.data.url)return void this.$message.error("上传模型失败");if(h(l.data.url),n)return this.progressBarShow=!1,this.renderLoad=!1,!1;if(this.needsToCancel)return this.needsToCancel=!1,this.renderLoad=!1,void(this.progressBarShow=!1);const u=new FormData;if(u.append("filepath",l.data.url),u.append("uuid",r),u.append("type","model"),u.append("quality",this.renderQuality),u.append("project_id",this.$root.projectData.id),u.append("size",this.size),u.append("version",3),u.append("d3_params",o),u.append("task_id",e),u.append("thumbpath",s),u.append("params",JSON.stringify({camera:{position:this.camera.position},light:{position:this.light.position,intensity:10*this.light.intensity,color:this.lightColor,angle:this.shadowRaduis*Math.PI/180},background:this.transparent?"transparent":this.background.startsWith("rgba")?"color":"image",shadow:"SUN"})),this.needsToCancel)return this.needsToCancel=!1,this.renderLoad=!1,void(this.progressBarShow=!1);this.$api.material.uploadModelFilev2(u).then(t=>{this.renderLoad=!1,h(!1),this.progressBarShow=!1,i&&(h(!0),this.$emit("change-task",t.data.task_id),this.needsToCancel&&(this.$api.material.delImage({id:t.data.task_id}),this.needsToCancel=!1))})}else{var r=document.createElement("a");r.style.display="none",document.body.appendChild(r);const t=new Blob([a],{type:"application/octet-stream"});r.href=URL.createObjectURL(t),r.download="test.glb",r.click(),this.renderLoad=!1,this.progressBarShow=!1}},a)})},initRatio(t){const e=t.split(":"),i=e[0]/e[1];this.WIDTH-240>this.HEIGHT?(this.ratioHeight=this.HEIGHT-60,this.ratioWidth=this.HEIGHT-60):(this.ratioHeight=this.WIDTH-240-60,this.ratioWidth=this.WIDTH-240-60),i>1?this.ratioHeight=this.ratioHeight/i:this.ratioWidth=this.ratioWidth*i},initCanvas(t,e="local"){if(!t.startsWith("rgba")){let i=new Image;return i.src=t,new Promise(t=>{i.onload=()=>{const s=i.width/i.height,n=this.ratioWidth/this.ratioHeight;let a=0,r=0;s>n?(r=this.ratioHeight,a=s*this.ratioHeight):(a=this.ratioWidth,r=this.ratioWidth/s);let l=(this.WIDTH-240-a)/2,c=(this.HEIGHT-r)/2;const h=document.createElement("canvas");let d=h.getContext("2d");if("local"===e){h.width=this.WIDTH-240,h.height=this.HEIGHT,d.fillStyle="#ffffff",d.fillRect(0,0,this.WIDTH-240,this.HEIGHT),d.drawImage(i,l,c,a,r);const t=new o["CanvasTexture"](h);this.scene.background=t}else{h.width=a,h.height=r,d.translate(0,r),d.scale(1,-1),d.drawImage(i,0,0,a,r);const t=new o["CanvasTexture"](h);this.bgmesh.material.map=t}this.doRender(),t(!0)}})}{const e=document.createElement("canvas");let i=e.getContext("2d");e.width=this.ratioWidth,e.height=this.ratioHeight,i.fillStyle=t,i.fillRect(0,0,this.ratioWidth,this.ratioHeight);const s=new o["CanvasTexture"](e);this.bgmesh.material.map=s}},init(){this.initRenderer(),this.initCamera(),this.initRaycaster(),this.initControls(),this.initScene(),this.initLight(),this.initGeo(),this.doRender(),this.$refs.property.setSceneChildren(this.group.children)},initRenderer(){if(this.renderer)return;const t=document.getElementById("renderCanvas");this.renderer=new o["WebGLRenderer"]({canvas:t,antialias:!0,alpha:!1}),this.renderer.setSize(this.WIDTH-240,this.HEIGHT)},initCamera(){this.camera||(this.camera=new o["PerspectiveCamera"](45,(this.WIDTH-240)/this.HEIGHT,.1,1e3),this.camera.position.set(3,8,13),this.camera.lookAt(0,0,0),this.camera.focus=36)},setCameraPosition(t,e,i){this.camera.position.set(t,e,i),this.camera.lookAt(0,0,0),this.doRender()},initControls(){if(this.controls)return;const t=document.getElementById("renderCanvas");if(this.controls=new u["b"](this.camera,this.renderer.domElement),this.controls.enableKeys=!1,this.controls.enablePan=!1,this.controls.update(),this.controls.addEventListener("change",this.doRender),this.transformControl=new u["d"](this.camera,this.renderer.domElement),this.transformControl.addEventListener("change",this.doRender),this.transformControl.addEventListener("dragging-changed",e=>{this.controls.enabled=!e.value;let i=1;t.onmousemove=()=>{i++},t.onmouseup=()=>{i>1&&e.value&&this.$emit("attch-history","dragging-changed"),t.onmousemove=null,t.onmouseup=null}}),!this.optControls){const t=document.getElementById("maskOpt");this.optControls=new u["b"](this.camera,t),this.optControls.enablePan=!1,this.optControls.addEventListener("change",this.doRender)}},initScene(){if(this.scene||(this.scene=new o["Scene"]),this.fog||(this.fog=new o["Fog"](16316664,10,50)),this.scene.fog=this.fog,this.scene.background=new o["Color"](16316664),!this.bgmesh){const t=new o["BoxBufferGeometry"](.1,.1,.1),e=new o["MeshStandardMaterial"]({color:16316664});this.bgmesh=new o["Mesh"](t,e),this.bgmesh.visible=!1,this.bgmesh.name="backgroundTexture",this.scene.add(this.bgmesh)}},initEnvironment(t){if(!t)return;const e=new o["PMREMGenerator"](this.renderer);e.compileEquirectangularShader(),(new u["c"]).setDataType(o["UnsignedByteType"]).load(t,t=>{const i=e.fromEquirectangular(t).texture;e.dispose(),this.scene.environment=i,this.doRender()})},initLight(){this.renderer.shadowMap.enabled=!0,this.envLight||(this.envLight=new o["AmbientLight"](this.envLightColor,this.envIntensity),this.scene.add(this.envLight)),this.scene.add(this.transformControl),this.light||(this.light=new o["DirectionalLight"](16777215,.34),this.light.position.set(Math.sqrt(5),5*Math.sqrt(2),Math.sqrt(5)),this.light.castShadow=!0,this.light.shadow.camera.near=.5,this.light.shadow.camera.far=500,this.light.shadow.mapSize.width=1024,this.light.shadow.mapSize.height=1024,this.light.shadow.radius=this.shadowRaduis,this.light.name="light",this.scene.add(this.light),this.doRender()),this.initFloor()},getY(){return-this.$root.knifeData.transform.renderY*this.modelScale+this.$root.knifeData.transform.position.y*this.modelScale-.03},initFloor(){const t=new o["ShadowMaterial"]({opacity:.3}),e=this.getY();t.side=o["DoubleSide"];const i=new o["Mesh"](new o["PlaneBufferGeometry"](500,500,1,1),t);i.rotation.x=-Math.PI/2,i.receiveShadow=!0,i.name="plane",i.updateMatrix(),this.scene.add(i),i.position.setY(e),this.axesHelper||(this.axesHelper=new o["AxesHelper"](10),this.axesHelper.visible=!1,this.scene.add(this.axesHelper)),this.grid||(this.grid=new o["GridHelper"](100,100,14803425,14803425),this.grid.material.opacity=.2,this.grid.material.transparent=!1,this.grid.name="grid",this.grid.visible=!0,this.scene.add(this.grid),this.grid.position.setY(e))},initRaycaster(){if(this.raycaster)return;this.raycaster=new o["Raycaster"],this.mouse=new o["Vector2"];const t=document.getElementById("mode3dContainer");t.addEventListener("mousemove",this.onDocumentMouseMove,!1),t.addEventListener("dblclick",this.onDocumentMouseClick,!1),t.addEventListener("mousedown",this.onDocumentMouseDown,!1),t.addEventListener("mouseup",this.onDocumentMouseUp,!1)},initGroup(){this.group||(this.group=new o["Group"],this.group.name="container",this.scene.add(this.group),this.doRender())},initGeo(){this.initGroup(),this.addGroup(null),this.doRender(),this.$emit("init-success")},addGroup(t,e=!1){const i=new o["Group"],s=this.$root.scene.getObjectByName("allGroup").clone();s.name="allGroupMesh",i.add(s);i.id;this.group.add(i),this.initModeLineData(i,null,t?t.folderCurrent:100),this.doAnimate(t?t.folderCurrent:100,i.id),setTimeout(()=>{document.getElementById("renderCanvas").focus(),this.doRender()},5e3),setTimeout(()=>{document.getElementById("renderCanvas").focus(),this.doRender()},1e4);const n=new o["BoxHelper"](i,16737844);if(n.visible=!1,n.material.lineWidth=4,n.name="groupHelp",i.add(n),i.name=t?t.name:"allGroup-"+this.$root.projectData.project_name,t){const e={x:t.position.x,y:t.position.y,z:t.position.z};if(i.rotation.set(t.rotation._x,t.rotation._y,t.rotation._z),t.spacing&&this.group.children.length>0){this.group.children[0].children[1].geometry.computeBoundingBox();const i=this.group.children[0].children[1].geometry.boundingBox,s=this.group.children[0].position;n.geometry.computeBoundingBox();const a=n.geometry.boundingBox,r=this.calculateSize(a,i,e,s);["x","y","z"].forEach(i=>{r[i]>t.spacing[i]?e[i]>s[i]?e[i]+=r[i]-t.spacing[i]:e[i]-=r[i]-t.spacing[i]:e[i]>s[i]?e[i]-=r[i]-t.spacing[i]:e[i]+=r[i]-t.spacing[i]})}i.position.set(e.x,e.y,e.z)}i.castShadow=!0,i.add(this.$root.scene.getObjectByName("textureGroup").clone()),n.geometry.computeBoundingBox();const a=n.geometry.boundingBox,r=this.scene.getObjectByName("plane"),l=this.scene.getObjectByName("grid");0===this.group.children.length&&r.position.setY(this.getY()),a.min.y<r.position.y&&(r.position.setY(a.min.y),l.position.setY(a.min.y)),e&&this.chooseMode(i),this.doRender()},setGroups(t){if(this.clearChooseMode(),this.activeModel=null,this.scene.remove(this.scene.getObjectByName("container")),this.modeList={},this.group=null,this.initGroup(),this.$root.scene.getObjectByName("allGroup"))for(let e in t)this.addGroup(t[e]);else setTimeout(()=>{for(let e in t)this.addGroup(t[e])},2e3);this.$refs.property.setSceneChildren(this.group.children)},initModeLineData(t,e,i=100){let s={animate:this.$root.knifeData.animate,current:i};this.accumulateRotations(s.animate),e&&(s.current=this.modeList["id_"+e].current);for(let n of this.$root.knifeData.folds)n.name;this.modeList["id_"+t.id]=s},setFolderValue(){this.activeModel&&(this.$refs.property.folderValue=this.modeList["id_"+this.activeModel].current)},accumulateRotations(t){for(const e in t){const i=t[e];for(const s of i){const i=this.getOldAnimation(t,s.name,e);s.initialRotate=i?i.rotate+(i.initialRotate||0):0}}},getOldAnimation(t,e,i){for(let s=i-1;s>=0;s--){const i=t[s].filter(t=>t.name===e);if(i.length>0)return i[0]}return null},resetModal(t){for(let e of this.$root.knifeData.folds)"x"===e.name||e.path||t.getObjectByName(e.name)&&t.getObjectByName(e.name).rotation.set(0,0,0)},doAnimate(t,e){if(!this.activeModel&&!e)return;if(t>100||t<0)return;this.modeList["id_"+(this.activeModel||e)].current=t;let i=this.modeList["id_"+(e||this.activeModel)],s=this.group.getObjectById(e||this.activeModel);this.resetModal(s);let n=1e3*i.animate.length*(t/100)-1;const a=parseInt(n/1e3),r=n-1e3*a;if(a>=i.animate.length)return;for(let c=0;c<a;c++){const t=i.animate[c];for(const e of t){const t=new o["Vector3"](e.vector.x,e.vector.y,e.vector.z).normalize();s.getObjectByName(e.name).setRotationFromAxisAngle(t,(e.initialRotate+e.rotate)*Math.PI/180)}}const l=i.animate[a];for(const c of l){let t=new o["Vector3"](c.vector.x,c.vector.y,c.vector.z).normalize(),e=r/1e3*c.rotate;s.getObjectByName(c.name).setRotationFromAxisAngle(t,(c.initialRotate+e)*Math.PI/180)}this.doRender()},transformSetMode(t){if(this.transformControl)return this.transformMode=t,this.transformControl.setMode(t),this.doRender(),!1},doRender(){if(this.renderer.render(this.scene,this.camera),this.$emit("camera-change",{position:this.camera.position,rotation:this.camera.rotation}),this.group&&this.activeModel&&"number"===typeof this.activeModel&&this.activeModel>0){const t=this.group.getObjectById(this.activeModel);this.$refs.property.setPosition(t.position),this.$refs.property.setRotate(t.rotation)}},moveclickRender(){this.raycaster.setFromCamera(this.mouse,this.camera);const t=this.raycaster.intersectObjects(this.group.children,!0);if(t.length>0)this.INTERSECTED!=t[0].object&&(this.INTERSECTED=t[0].object,this.clearHover(),"allGroupMesh"===this.INTERSECTED.parent.name?(this.INTERSECTED.parent.parent.children[1].visible=!0,this.hoverHelp=this.INTERSECTED.parent.parent.children[1].id,this.isClick&&this.chooseMode(this.INTERSECTED.parent.parent)):this.INTERSECTED.parent.name.indexOf("allGroup")>-1&&(this.INTERSECTED.parent.children[1].visible=!0,this.hoverHelp=this.INTERSECTED.parent.children[1].id,this.isClick&&this.chooseMode(this.INTERSECTED.parent)));else{if(this.hoverHelp){const t=this.scene.getObjectById(this.hoverHelp);t&&t.type&&"BoxHelper"===t.type&&(t.visible=!1)}this.hoverHelp="",this.isClick&&this.clearChooseMode()}this.INTERSECTED=null,this.doRender()},clearHover(){if(this.hoverHelp){const t=this.scene.getObjectById(this.hoverHelp);t&&t.type&&"BoxHelper"===t.type&&(t.visible=!1)}},onDocumentMouseMove(t){t.preventDefault(),this.mouse.x=(t.clientX-256)/(this.WIDTH-240)*2-1,this.mouse.y=-(t.clientY-56)/this.HEIGHT*2+1,this.moved=!0,this.moveclickRender()},onDocumentMouseClick(t){this.isClick=!0,t.preventDefault(),this.mouse.x=(t.clientX-256)/(this.WIDTH-240)*2-1,this.mouse.y=-(t.clientY-56)/this.HEIGHT*2+1,this.moveclickRender(),this.isClick=!1},onDocumentMouseDown(t){t.clientX,t.clientY,document.getElementById("mode3dContainer");this.moved=!1},onDocumentMouseUp(t){this.moved||(this.isClick=!0,t.preventDefault(),this.mouse.x=(t.clientX-256)/(this.WIDTH-240)*2-1,this.mouse.y=-(t.clientY-56)/this.HEIGHT*2+1,this.moveclickRender(),this.isClick=!1)}}}),w=x,C=(s("e43b"),s("2877")),k=Object(C["a"])(w,n,a,!1,null,null,null);e["default"]=k.exports},c66b:function(t,e,i){"use strict";var s=i("d30d"),n=i.n(s);n.a},c6d2:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));i("1276"),i("5cc6"),i("b39a");var s=i("054f"),n=i("71c7"),a=i("c64e"),r=i.n(a);async function o(t,e){const i=1e3,a=t.totalX/t.totalY,o=i/a,c=new n["a"](e,t);c.setHasShadow(!0);const h=await c.draw(i,o,i/t.totalX,"out"),d=h.toDataURL("image/png"),u=new FormData;u.append("type",2),u.append("project_id",e.id),u.append("file",l(d));const p=await s["a"].putFile(u.get("file"),{xapi:"screenshot",rename:r()()+".png",type:JSON.stringify({type:2,project_id:e.id})});return 1e3==p.errno&&s["a"].removeStorage(),p}function l(t){const e=window.atob(t.split(",")[1]),i=new ArrayBuffer(e.length),s=new Uint8Array(i);for(let n=0;n<e.length;n++)s[n]=e.charCodeAt(n);return new Blob([i],{type:"image/png"})}},c729:function(t,e,i){"use strict";var s=i("17af"),n=i.n(s);n.a},c7a2:function(t,e,i){var s=i("cbe5"),n=i("5693"),a=i("9cf9"),r=a.subPixelOptimizeRect,o={},l=s.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var i,s,a,l;this.subPixelOptimize?(r(o,e,this.style),i=o.x,s=o.y,a=o.width,l=o.height,o.r=e.r,e=o):(i=e.x,s=e.y,a=e.width,l=e.height),e.r?n.buildPath(t,e):t.rect(i,s,a,l),t.closePath()}});t.exports=l},c7a6:function(t,e,i){t.exports=i.p+"editor-assets/img/alipay.9b89020f.svg"},c7c1:function(t,e,i){"use strict";var s=i("1cbc"),n=i.n(s);n.a},c7c7:function(t,e,i){},c7ee:function(t,e,i){"use strict";i.r(e);var s=i("750b");i("33dc");e["default"]=Object(s["b"])({props:{isVertical:{type:Boolean,default:!1}},setup(t,e){const i=e.vuex.mapState(["scale"]),n=Object(s["j"])(!1);return()=>Object(s["c"])("div",{class:"add-button",style:{width:"26px",height:"26px",lineHeight:"26px",fontSize:"18px",boxShadow:"0px 2px 5px 0px rgba(0, 0, 0, 0.1)",transform:`scale(${1/i.scale.value})`,transformOrigin:t.isVertical?"center":"left top"},on:{click:t=>e.emit("click",t)}},[Object(s["c"])("span",{on:{mouseleave:()=>n.value=!1,mousemove:()=>n.value=!0},style:{lineHeight:"26px",height:"26px"}},["+"]),Object(s["c"])("span",{directives:[{name:"show",value:n.value}],class:"tip"},["增加一",t.isVertical?"列":"行"])])}})},c7f0:function(t,e,i){},c812:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABtUlEQVRYR+1XPUvDUBQ9NxVnF1stqNRFN3H3D+gqdRE3QfqVOkiNH7hoMRYHm7Ypgpu4WFz1D7iLmy4VK37ELs5ieyUVJdKWvoaUCPaNyT3nnXfvPe+DYHOEltVpYjo04Uy8lD9QLuxQkR2QiQnH90pgHqrhiR709OqwHS77AmSVrRPqmmKLyxaoloGugH+VgYicmgGqeSYiAvZfnwK5/sHih7UJy8+jPV7/XYSBFWJmQArltMR5K2cINeEvy5muA64ZmLCS130TtKaQgIis3jPQls8JKOU0ZcSRDJglYPAJwH2tCL/+0xuB5h0rgUm5GE/6euFJcRULRGYV6gczmCQcv6OSOEpvGCJihUpgJQrL6hQB2SY9ENU15VJk4u+YtgWYwGDw1OP1F7eYsV4jkihZfgxsFwpzlXYmrxXLCojFdicrJO0A7GuXSCyeDA9XNzOZtauGGQjL6g2AMTEy21G3uqaMNxPwAqBDq/8RbOiaMtBQQDSemmWu5rhDIggwiKRINp04c7QJJYmShhNNKFJV12zo6kbk+lbs+mH0B45jly8kjdzRvRV3M+B+Btx+nDr1PP8EikkAMLFh1UAAAAAASUVORK5CYII="},c825:function(t,e,i){},c825c:function(t,e,i){},c82c:function(t,e,i){"use strict";var s=i("d7f7"),n=i.n(s);n.a},c844:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAB10lEQVRoQ+2YsS5FQRCGv4meh9DSa9QUElESaqUXUHoANR0SrUZ4BGpaD0FFISub7JGbm3udc3Z3JutmbnkzZ3a+/9+dnXOEBf/JgvPhgP/dYXfQHWxcAd+ijRvUW5472CtR4wHuYOMG9ZbnDvZK1HhAFQdDCIfAKnAmIt8lzCGEJeAUeBORm5Jc8dlagC/AGnALHOVCJrgr4AB4FZH1VgA3gEdgJRdyCu4d2BKR5yYAYxEhhGxILbhqW7RTOQdSE6464FgnteFUAIdCWsCpAfZBWsGpAs6DTOe1uwqqdct53bbKPfhXK5/ReGL4PqAOp+7gnO4a/zaBswSM49cdsJOg74Hd3IlnzOVvsUUjXHfmPlJxy7kTzxg4dQdTt7yePHNp/i0a68ZAqjk4A25bRJ76rpAxxQ+JVQH8C65krBsCNB1THXAInCVkVcAxcFaQ1QBz4CwgawKeAyfpEv9tKEPPTc6r1pDcNQEvgb14mXfdckgBkzFTkBcicjw2h2qTidu0dDpJkA/pm8xmU4ClxUycyfht50tEPktzVtuipYVoPe+AWspa5XUHrZTWWscd1FLWKq87aKW01jruoJayVnndQSultdZxB7WUtcrrDloprbXOwjv4A01z5zmmhbsaAAAAAElFTkSuQmCC"},c881:function(t,e,i){"use strict";i.r(e);i("2532"),i("1276"),i("ddb0");var s=i("5530"),n=i("750b"),a=i("3ccf"),r=i("365c"),o=i("b6c6"),l=i("ed08"),c=i("8d87"),h=i("b3ba"),d=i("52ea");i("1f8e");e["default"]=Object(n["b"])({setup(t,e){const u=e.vuex.mapState(["queries","routeName"]),p=e.vuex.mapGetters("profile",["isLogged","isVip"]),f=e.vuex.mapMutations("profile",[o["c"]]),m=e.vuex.mapActions("profile",[o["g"]]),g=e.vuex.mapState("layout",["width"]),v=e.vuex.mapState("profile",["user"]).user.value,b=Object(n["j"])(938),y=Object(n["j"])(384),_=Object(n["j"])(""),x=!!~window.location.href.indexOf("models"),w=x?"模型":"模板",C={functional:!0,render:t=>t("p",{style:"width:300px",class:"fo-12 bold"},["点击“立即使用该",w,"”后可以在线编辑包装",w,"，文字图片背景皆可修改，3分钟即可在线高效完成包装设计，并支持导出矢量设计图纸及3D效果预览。",t("br"),t("br"),"包小盒仅提供设计工具、展示和网络技术服务，对于用户在使用包小盒平台服务过程中自行上传的素材和作品，包小盒不具备审查其内容是否存在侵权等情节的能力。",t("br"),"包小盒平台的",w,"设计内容（包括但不限图片、字体等素材），来源于第三方原创作者，包小盒享有原创作品除署名权之外的其他全部著作权。",t("br"),"若您作为商业用途，请对",w,"中的素材和字体自行确权，包小盒不承担由此引发的一切版权纠纷。用户自行上传和使用素材等内容应遵守相关法律、法规、不得侵犯本网站及权利人的合法权利，情节严重者将依法追究其法律责任，包小盒不承担出现权利纠纷时的任何责任。",t("br"),"若发现您的权利被侵害，请将您的权属证明等信息发送至邮箱：",t("a",{attrs:{href:"mailto:service@baoxiaohe.com"}},["service@baoxiaohe.com"]),"，我们将尽快处理。"])},{loading:k,data:S,refetch:A}=Object(a["c"])(r["getTempDetail"],{},{lazy:!0}),{loading:O,data:j,refetch:M}=Object(a["c"])(r["getBlankDetail"],{},{lazy:!0}),I=x?O:k,T=x?M:A,E=x?j:S,{data:D,refetch:L}=Object(a["c"])(r["getModes"],{},{lazy:!0}),{data:P,refetch:R}=Object(a["c"])(r["getBlanks"],{},{lazy:!0}),[z]=Object(a["b"])(r["createBlank"]),N=x?P:D,B=Object(n["a"])(()=>{var t,e,i;return(x?null===(t=N.value)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.map(t=>Object(s["a"])(Object(s["a"])({},t),{},{title:t.cate_info.name,knife_image:t.knife})):null===(i=N.value)||void 0===i?void 0:i.data)||[]}),F=x?R:L,[$]=Object(a["b"])(r["addTempCollection"]),[U]=Object(a["b"])(r["addBlankCollection"]),H=x?U:$,V=Object(n["a"])(()=>{var t,e,i,s,n;return(x?[null===(t=E.value)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.image,null===(i=E.value)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.knife]:null===(n=E.value)||void 0===n?void 0:n.images)||[]}),G=Object(n["a"])(()=>{var t,e,i,s;return(x?null===(t=E.value)||void 0===t||null===(e=t.data.keywords)||void 0===e?void 0:e.split(","):null===(i=E.value)||void 0===i||null===(s=i.keywords)||void 0===s?void 0:s.split(","))||[]}),W=Object(n["a"])(()=>{var t,e;if(x)return null===(e=E.value)||void 0===e?void 0:e.tags;const i=new Map;return null===(t=E.value)||void 0===t||t.tags.map(({cate_name:t,tag_name:e})=>{i.has(t)?i.set(t,[...i.get(t),e]):i.set(t,[e])}),Array.from(i)}),Y=Object(n["a"])(()=>{var t,e,i;return(null===(t=E.value)||void 0===t||null===(e=t.tags)||void 0===e||null===(i=e.find(t=>"用途"===t.cate_name))||void 0===i?void 0:i.tag_name)||""}),q=Object(n["a"])(()=>{var t,e,i;return(null===(t=E.value)||void 0===t||null===(e=t.tags)||void 0===e||null===(i=e.find(t=>"行业"===t.cate_name))||void 0===i?void 0:i.tag_name)||"特定"}),X=(t,i,s)=>{e.router.push({path:"/design",query:{id:t,type:i,mid:s}})},Q=t=>{e.router.push({path:t.includes("包装样机")?"..":`../${t}/all`})};Object(n["k"])(()=>E.value,()=>{var t,e,i,s,n;if(E.value){var a,r,o,c,h,d,u,p;const t=(null===(a=E.value)||void 0===a?void 0:a.title)||(null===(r=E.value)||void 0===r||null===(o=r.data)||void 0===o||null===(c=o.cate_info)||void 0===c?void 0:c.name),e=((null===(h=E.value)||void 0===h||null===(d=h.data)||void 0===d||null===(u=d.cate_info)||void 0===u?void 0:u.name)||(null===(p=E.value)||void 0===p||p.cate_name),`${t}${x?"":"模版"}制作 - ${t}样机在线设计 - 包小盒`),i=`${t}包装,${t}包装样机,${t}包装模板,${t}包装设计`,s=`包小盒提供${t}包装在线设计制作，多用于${Y.value}，此模板可以用于商业用途，此${t}包装样机属于${q.value}行业。`;Object(l["C"])(e,i,s)}x&&(null===(t=E.value)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.cate_id)?F({variables:{cateTop:null===(s=E.value)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.cate_top_id,pageSize:5}}):!x&&(null===(i=E.value)||void 0===i?void 0:i.cate_id)&&F({variables:{category:E.value.cate_id,pageSize:5}})}),Object(n["k"])(()=>u.queries.value,()=>{if("templateDetail"===u.routeName.value||"modelDetail"===u.routeName.value){const{id:t}=u.queries.value;T({variables:{id:t}}),_.value=Object(l["l"])(u.queries.value.id,x)}});const Z=Object(n["a"])(()=>{var t,e,i,s,n,a;const r=x?(null===(t=E.value)||void 0===t||null===(e=t.data.cate_info)||void 0===e?void 0:e.discount)*(null===(i=E.value)||void 0===i||null===(s=i.data.cate_info)||void 0===s?void 0:s.price):(null===(n=E.value)||void 0===n?void 0:n.price)*(null===(a=E.value)||void 0===a?void 0:a.discount);return r>0?r:"免费"}),K=Object(l["g"])(()=>{const{innerWidth:t}=window,e=Math.max(t-280,1080);b.value=.709*e,y.value=e-b.value},200);return Object(n["f"])(()=>{K(),window.addEventListener("resize",K)}),Object(n["g"])(()=>{window.removeEventListener("resize",K)}),()=>{var t,s,a,r,k,S,A,O,j,T,D;return Object(n["c"])("div",{class:"detail-container px-40"},[Object(n["c"])("a-spin",{attrs:{spinning:I.value}},[Object(n["c"])("div",{class:"container "},[Object(n["c"])("div",{class:"top-main"}),Object(n["c"])("div",{class:"detail-body flex item-start flex-center"},[Object(n["c"])(d["default"],{attrs:{width:b.value+"px",images:V.value,frame:_.value,name:(null===(t=E.value)||void 0===t?void 0:t.title)||(null===(s=E.value)||void 0===s||null===(a=s.data)||void 0===a||null===(r=a.cate_info)||void 0===r?void 0:r.name)}}),Object(n["c"])("div",{class:"plate",style:{width:y.value+"px"}},[Object(n["c"])("div",[Object(n["c"])("div",{class:"flex flex-between item-center"},[Object(n["c"])("div",{class:"title"},[x?null===(k=E.value)||void 0===k||null===(S=k.data)||void 0===S?void 0:S.cate_info.name:null===(A=E.value)||void 0===A?void 0:A.title]),Object(n["c"])("div",{directives:[{name:"show",value:"免费"!==Z.value}]},[Object(n["c"])("div",{directives:[{name:"show",value:!p.isVip.value}],class:"flex-none"},[Object(n["c"])("span",{class:"free"},["¥",Z.value]),Object(n["c"])("span",{class:"start ml-10"},["起"])]),Object(n["c"])("div",{directives:[{name:"show",value:p.isVip.value}],class:"flex-none"},[Object(n["c"])("img",{class:"mb-5",style:"height:20px",attrs:{src:"//yun.baoxiaohe.com/user-materials/f246d7de-b874-4ccc-b307-4630f2a56d5a.png",alt:""}}),Object(n["c"])("span",{class:"free ml-10"},["¥",.5*Z.value]),Object(n["c"])("span",{class:"start ml-10"},["起"])])]),Object(n["c"])("div",{directives:[{name:"show",value:"免费"===Z.value}],class:"flex-none"},[Object(n["c"])("span",{class:"free ml-10"},["免费"])])]),Object(n["c"])("div",{directives:[{name:"show",value:"免费"!==Z.value}]},[Object(n["c"])("div",{directives:[{name:"show",value:!p.isVip.value}],class:"text-right fo-p pointer",on:{click:()=>{if(!p.isLogged.value)return f[o["c"]](!0);m[o["g"]]()}}},["会员专享 ¥",.5*Z.value,Object(n["c"])("span",{class:"start ml-10"},["起"])]),Object(n["c"])("div",{directives:[{name:"show",value:p.isVip.value}],class:"text-right"},["原价 ",Object(n["c"])("span",{style:"text-decoration: line-through"},["¥",Z.value]),Object(n["c"])("span",{class:"start ml-10"},["起"])])])]),Object(n["c"])("div",{class:"mt-24"},[Object(n["c"])("a-button",{attrs:{type:"primary"},on:{click:()=>{if("details"===e.route.name?e.track({category:"CreateViaDetails",action:"click",label:e.route.path}):e.track({category:"CreateViaBlank",action:"click",label:e.route.path}),p.isLogged.value)if(x){const{id:t}=u.queries.value;z({variables:{id:t},update(t){e.router.push("/design?id="+t.data.id)}})}else{const{id:t,project_id:i}=E.value;e.router.push(Object(l["z"])(t,i))}else f[o["c"]](!0)}}},["编辑",w]),Object(n["c"])("a-button",{class:"ml-8 ant-btn-icon-only like-btn",on:{click:()=>{if(!p.isLogged.value)return void f[o["c"]](!0);const{id:t}=u.queries.value;H({variables:{type_id:t},update(){e.root.$message.success("操作成功"),x?M({variables:{id:t}}):E.value.is_collection=!E.value.is_collection}})}}},[x&&Object(n["c"])("span",[(null===(O=E.value)||void 0===O?void 0:O.data.liked)?Object(n["c"])("img",{attrs:{src:i("63eb")}}):Object(n["c"])("img",{attrs:{src:i("0dab")}})]),!x&&Object(n["c"])("span",[(null===(j=E.value)||void 0===j?void 0:j.is_collection)?Object(n["c"])("img",{attrs:{src:i("63eb")}}):Object(n["c"])("img",{attrs:{src:i("0dab")}})])]),Object(n["c"])("a-button",{class:"ml-8 ant-btn-icon-only",on:{click:()=>{window.location.href=_.value}}},[Object(n["c"])("i",{class:"iconfont"},[""])]),Object(n["c"])("a-button",{directives:[{name:"show",value:v.is_admin}],class:"ml-8 ant-btn-icon-only",on:{click:()=>{X(E.value.project_id,"update",E.value.id)}}},[Object(n["c"])("i",{class:"iconfont"},[""])])]),Object(n["c"])("div",{class:"mt-16"},[Object(n["c"])("a-popover",{attrs:{placement:"bottomLeft"}},[Object(n["c"])("template",{slot:"content"},[Object(n["c"])(C)]),Object(n["c"])("a-icon",{attrs:{type:"exclamation-circle"},class:"fo-warning"}),Object(n["c"])("span",{class:"fo-gray ml-4"},[w,"使用说明"])])]),Object(n["c"])("div",{class:"line my-20"}),Object(n["c"])("ul",{class:"desc-container"},[null===(T=W.value)||void 0===T?void 0:T.map(([t,e],i)=>Object(n["c"])("li",{class:"content flex flex-between item-start",key:i},[Object(n["c"])("div",{class:"title flex-none"},[t]),Object(n["c"])("div",{class:"desc"},[e.join(" ")])]))]),Object(n["c"])("div",{class:"summary mt-24"},["包小盒提供可参数化修改的3D",w,"，",w,"、尺寸和材质可自定义修改。你可以点击“编辑",w,"”进行在线平面创作，自主添加修改文字图片及背景颜色。会打字即可在线高效完成包装设计，并支持导出 PDF 高清印刷设计源文件及3D效果预览及分享。"]),Object(n["c"])("div",{class:"line my-20"}),Object(n["c"])("div",{class:"flex flex-wrap item-center"},[["包装样机"].concat(G.value).map(t=>Object(n["c"])(c["default"],{class:"btn-item mr-8 mb-12",attrs:{type:"box-bg"},on:{click:()=>{Q(t)}}},[t]))])])]),Object(n["c"])("div",{class:"detail-footer"},[Object(n["c"])("div",{class:"flex flex-center mt-40 mb-80"},[(null===(D=B.value)||void 0===D?void 0:D.length)?Object(n["c"])("div",{class:"footer-recommends",style:{width:g.width.value+"px"}},[Object(n["c"])("div",{class:"footer-title"},["为你推荐类似",w]),Object(n["c"])(h["default"],{attrs:{showFree:!0,list:B.value,width:g.width.value,minWidth:g.width.value+"px"}})]):""])])])])])}}})},c91b:function(t,e,i){"use strict";var s=i("d43f"),n=i.n(s);n.a},c95d:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"control-point",style:{width:t.baseLength+"px",height:t.baseLength+"px",zIndex:300},on:{mousedown:function(e){return e.stopPropagation(),t.$emit("resize",e)}}},[i("div",{staticClass:"point",class:{"angle-point":"circle"===t.type,"middle-point":"rect"===t.type},style:Object.assign({},{transform:"rotate("+t.point_rotate+"deg)"},t.position)})])},n=[],a={props:{direction:{type:String,default:""},scale:{type:Number,default:1},position:{type:Object,default:Object},type:{type:String,default:"circle"},shape:{type:String,default:""}},computed:{baseLength(){return this.type,10/this.scale},point_rotate(){let t=0;switch(this.direction){case"nw":t=0;break;case"ne":t=90;break;case"se":t=180;break;case"sw":t=270;break;case"n":case"s":t=0;break;case"e":case"w":t=90;break;default:t=0}return t}}},r=a,o=(i("1fbb"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"e31c4af8",null);e["default"]=l.exports},c978:function(t,e,i){},c991:function(t,e,i){"use strict";i.r(e),i.d(e,"TWO_HOURS",(function(){return g})),i.d(e,"orderStatus",(function(){return v}));i("b680"),i("ddb0");var s=i("5530"),n=i("750b"),a=i("3ee8"),r=i.n(a),o=i("3ccf"),l=i("365c"),c=i("4794"),h=i("ed08"),d=i("a362"),u=i("ae36"),p=i("5a0c"),f=i.n(p),m=i("1fd7");i("b285");const g=72e5,v={wait:"等待支付",close:"订单关闭",success:"交易成功",waitDelivery:"待发货",waitTake:"等待收货"};e["default"]=Object(n["b"])({props:{flex:{type:Boolean,default:!1}},setup(t,e){const i=Object(n["j"])({keyword:"",pageSize:10,current:1,days:"",order_type:"",status:""}),a="/copyright"===window.location.pathname;a&&(i.value=Object(s["a"])(Object(s["a"])({},i.value),{},{order_type:"vip",status:"success"}));const p=e.vuex.mapState("layout",["width"]),{data:b,refetch:y}=Object(o["c"])(l["getOrders"],{variables:i.value}),[_]=Object(o["b"])(l["cancelOrder"]),[x,{setFalse:w,setTrue:C}]=Object(h["I"])(!1),[k,{setFalse:S,setTrue:A}]=Object(h["I"])(!1),O=Object(n["j"])({}),j=Object(n["j"])(""),M=a?[{key:"vip",value:"vip方案"},{key:"copyright",value:"授权方案"}]:[{key:"",value:"全部订单"},{key:"wait",value:"待付款"},{key:"waitDelivery",value:"待发货"},{key:"waitTake",value:"待收货"},{key:"success",value:"已完成"}],I=a?[{title:"方案信息",width:20,minWidth:"413px"},{title:"授权信息",width:9},{title:"时间",width:9},{title:"订单ID",width:9,minWidth:"200px"},{title:"授权书",width:9}]:[{title:"商品信息",width:20,minWidth:"413px"},{title:"单价",width:9},{title:"数量",width:9},{title:"总价",width:9},{title:"订单状态",width:9,minWidth:"100px"},{title:"操作",width:9,minWidth:"160px"}];Object(n["k"])(()=>i.value,()=>{y({variables:i.value})},{lazy:!0});const T={functional:!0,render:(t,{props:e})=>t("div",{class:"pay-info "+(e.flex&&"flex flex-between")},["vip"===e.payInfo[0].type?e.payInfo[0].label:t("div",{class:"c-black"},["单购作品结算(印刷PDF)"]),"vip"===e.payInfo[0].type?"":t("a-popover",{attrs:{placement:"bottom"}},[t("template",{slot:"content"},[t("div",{class:"d-flex item-center"},[e.payInfo.map(e=>t("div",{class:"c-black",key:e.id},[e.label,"：￥",e.price]))])]),t("div",{class:"c-black ml-auto text-pointer"},[t("span",["含",e.payInfo.length,"个付费点"]),t("img",{class:"arrow",attrs:{src:r.a,alt:""}})])])])},E=I.reduce((t,e)=>t+e.width,0),D=Object(n["a"])(()=>p.width.value/E),L={functional:!0,render:(t,{props:{order:e}})=>{const i=Object(m["getPayInfo"])(e);let s="";return Object(m["isOrderTypeVip"])(e)?t("img",{on:{click:()=>{1!==i[0].vipType&&2!==i[0].vipType&&(j.value=e.project.screenshot,A())}},attrs:{src:Object(h["F"])(1===i[0].vipType?l["NORMAL_VIP"]:2===i[0].vipType?l["PROD_VIP"]:e.project.screenshot,240,168),alt:""}}):(s=e.project.screenshot,t("img",{on:{click:()=>{j.value=s,A()}},attrs:{src:Object(h["F"])(s,240,168),alt:""}}))}},P={functional:!0,render:(t,{props:s,parent:n})=>{var r,o,l,c,h,d,u,p,m,b,x,w,k,S,A;let j=s.order.payInfo;const M=`${null===(r=s.order.project)||void 0===r?void 0:r.length}x${null===(o=s.order.project)||void 0===o?void 0:o.width}x${null===(l=s.order.project)||void 0===l?void 0:l.height}mm`;return t("div",{class:"table-item mt-24"},[t("div",{class:"bg-gray flex item-center px-20"},[t("span",[f()(parseInt(s.order.createTime)).format("YYYY-MM-DD HH:mm:ss")]),t("span",{class:"ml-10"},["订单号: ",s.order.orderNo])]),t("div",{class:"table-body flex"},[t("div",{class:"table-cell flex item-center",style:{width:(null===(c=I[0])||void 0===c?void 0:c.width)*D.value+"px",minWidth:I[0].minWidth}},[t("div",{class:"container"},[t("div",{class:"content"},[t("div",{class:"image-box"},[t(L,{attrs:{order:s.order}})]),t("div",{class:"title mt-12"},[(null===(h=s.order.project)||void 0===h?void 0:h.projectName)||(null===(d=j[0])||void 0===d?void 0:d.label)]),t("div",{class:"c-gray"},["copyright"===s.order.orderType&&`${null===(u=s.order.project)||void 0===u?void 0:u.scienceName} / ${M}`])]),!a&&"copyright"===s.order.orderType&&t("div",{class:"details p-20 flex"},[t("div",{class:"d-tag mr-4"},["版权付费"]),t(T,{attrs:{payInfo:j,flex:!0}})])])]),t("div",{class:"table-cell flex item-center",style:{width:(null===(p=I[1])||void 0===p?void 0:p.width)*D.value+"px"}},[t("div",{class:"content"},a?[t(T,{attrs:{payInfo:j}})]:[t("div",{class:"c-black"},["￥",s.order.totalFee]),t("div",{class:"c-gray "+(s.order.discount&&"agora")},[(parseFloat(s.order.discount)+parseFloat(s.order.totalFee)).toFixed(2)])])]),t("div",{class:"table-cell flex item-center",style:{width:(null===(m=I[2])||void 0===m?void 0:m.width)*D.value+"px"}},[t("div",{class:"content"},[t("div",{class:"c-black"},a?[f()(parseInt(s.order.createTime)).format("YYYY年MM月DD日 HH:mm:ss")]:[s.order.goodsCount])])]),t("div",{class:"table-cell flex item-center",style:{width:(null===(b=I[3])||void 0===b?void 0:b.width)*D.value+"px",minWidth:null===(x=I[3])||void 0===x?void 0:x.minWidth}},[t("div",{class:"content"},[a?t("div",{class:"c-black"},[s.order.orderNo]):t("div",{class:"c-red"},["￥",s.order.totalFee])])]),t("div",{class:"table-cell flex item-center",style:{width:(null===(w=I[4])||void 0===w?void 0:w.width)*D.value+"px",minWidth:null===(k=I[4])||void 0===k?void 0:k.minWidth}},[t("div",{class:"content"},[a?t("div",{class:"theme text-pointer",on:{click:()=>{O.value=s.order,C()}}},["下载"]):t("div",{class:"c-black"},[v[s.order.payStatus],t("div",{class:"c-theme text-pointer",on:{click:()=>{e.router.push("/orders/"+s.order.id)}}},["订单详情"])])])]),a?"":t("div",{class:"table-cell flex item-center flex-none",style:{width:(null===(S=I[5])||void 0===S?void 0:S.width)*D.value+"px",minWidth:null===(A=I[5])||void 0===A?void 0:A.minWidth}},["wait"===s.order.payStatus?t("div",{class:"content"},[t("div",{class:"c-gray"},["请在",f()(parseInt(s.order.createTime)+g).format("YYYY-MM-DD HH:mm:ss"),"前付款"]),t("a-button",{attrs:{type:"primary"},class:"my-8",on:{click:()=>{e.router.push({path:"/pay",query:{order_num:s.order.id,total_fee:s.order.totalFee}})}}},["付款"]),t("br"),t("a-popconfirm",{attrs:{title:"确认取消订单？","ok-text":"确认","cancel-text":"取消"},on:{confirm:()=>{_({variables:{order_no:s.order.orderNo},update(){n.$message.success("操作成功"),y({variables:i.value})}})}}},[t("span",{class:"c-black text-pointer"},["取消订单"])])]):""])])])}};return()=>Object(n["c"])("div",{class:"order-wrap py-32 px-40"},[Object(n["c"])(u["a"],{attrs:{visible:k.value,imageUrl:j.value},on:{cancel:()=>S()}}),Object(n["c"])("div",{class:"page-title"},[a?"授权记录":"全部订单"]),Object(n["c"])(d["default"],{attrs:{target:O.value,visible:x.value},on:{close:()=>w()}}),Object(n["c"])("a-tabs",{class:"mt-24",attrs:{animated:!1,"default-active-key":""},on:{change:t=>{const e=Object(s["a"])(Object(s["a"])({},i.value),{},{[a?"order_type":"pay_status"]:t});a&&(e.pay_status="success"),i.value=e}}},[M.map(t=>{var r,o,l;return Object(n["c"])("a-tab-pane",{key:t.key,attrs:{tab:t.value}},[Object(n["c"])("div",[Object(n["c"])("div",{class:"mt-12 flex flex-between item-center"},[Object(n["c"])("a-input-search",{style:{width:"260px"},attrs:{placeholder:a?"输入商品名称或订单号搜索":"输入订单号搜索"},on:{search:t=>{i.value=Object(s["a"])(Object(s["a"])({},i.value),{},{keyword:t,current:1})}}},[Object(n["c"])("a-button",{class:"search-btn",slot:"enterButton"},["搜索"])]),Object(n["c"])("div",{class:"right"},["下单时间：",Object(n["c"])("a-select",{attrs:{value:i.value.days},style:"width: 120px",on:{change:t=>{i.value=Object(s["a"])(Object(s["a"])({},i.value),{},{days:t,current:1})}}},[Object(n["c"])("a-select-option",{attrs:{value:""}},["全部"]),Object(n["c"])("a-select-option",{attrs:{value:"7"}},["近一周"]),Object(n["c"])("a-select-option",{attrs:{value:"30"}},["近三个月"])])])]),(null===(r=b.value)||void 0===r?void 0:r.data.length)?Object(n["c"])("div",{class:"table-wrapper"},[Object(n["c"])("div",{class:"table-header bg-gray flex item-center"},[I.map((t,e)=>Object(n["c"])("div",{key:e,class:"pl-20",style:{width:t.width*D.value+"px",minWidth:t.minWidth}},[t.title]))]),null===(o=b.value)||void 0===o?void 0:o.data.map((t,e)=>Object(n["c"])(P,{attrs:{order:t},key:e})),Object(n["c"])("a-pagination",{class:"float-right mt-20",attrs:{"show-quick-jumper":!0,value:i.current,total:null===(l=b.value)||void 0===l?void 0:l.total,defaultPageSize:i.pageSize},on:{change:t=>{i.value=Object(s["a"])(Object(s["a"])({},i.value),{},{current:t}),e.parent.scrollToTop(300)}}}),Object(n["c"])("div",{class:"clearfix"})]):Object(n["c"])(c["a"])])])})])])}})},c9b8:function(t,e,i){"use strict";var s=i("7472"),n=i.n(s);n.a},ca19:function(t,e,i){t.exports=i.p+"editor-assets/img/arrange-left.88b8c55a.svg"},ca32:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};e.default=s},ca5c:function(t,e,i){t.exports=i.p+"editor-assets/img/tc.b0f4209e.svg"},ca90:function(t,e,i){},ca9b:function(t,e,i){"use strict";i.r(e);i("2ca0");var s=i("750b"),n=i("1ae4"),a=i.n(n),r=i("b95a"),o=i.n(r),l=i("e6c72"),c=i.n(l),h=i("0c09"),d=i.n(h),u=i("cc79"),p=i.n(u),f=i("fba3"),m=i.n(f),g=i("8599"),v=i.n(g),b=i("b6c6"),y=i("2af2"),_=i("1d43"),x=i.n(_),w=i("cedc"),C=i.n(w),k=i("ed08"),S=i("ad6df"),A=i.n(S),O=i("5a0c"),j=i.n(O),M=i("6116");i("2557");const I="https://cdn.baoxiaohe.com/7bb738b3-3c05-4a06-bbac-4616cacd26e6.png",T=[{header:{text:"普通用户",bg:"#9BB1CB",color:"#fff"},subColor:"#19436F",descColor:"rgba(#19436F,.7)",btnText:"开通",background:"//yun.baoxiaohe.com/user-materials/a9ec1ef3-624e-4d18-b421-9fcfa90fb6d2.png",tag:"https://yun.baoxiaohe.com/user-materials/16a9722f-613c-44ff-88f4-7fca84b6b3c0.png"},{header:{text:"个人VIP",bg:"linear-gradient(318deg,#f7bb77 12%, #ffdcad 82%)",color:"rgba(#000000,.65)"},subColor:"#6F4911",descColor:"#6F4911",btnText:"续费",background:"//yun.baoxiaohe.com/user-materials/1c754dde-f8ef-48dd-8edc-6dd79cffcc32.png",tag:"//yun.baoxiaohe.com/user-materials/f246d7de-b874-4ccc-b307-4630f2a56d5a.png"},{header:{text:"企业VIP",bg:"linear-gradient(318deg,#f7bb77 12%, #ffdcad 82%)",color:"rgba(#000000,.65)"},subColor:"#FFDCAD",descColor:"#FFDCAD",btnText:"续费",background:"//yun.baoxiaohe.com/user-materials/5700d57a-e883-4e40-b47f-e91fc96e859c.png",tag:"//yun.baoxiaohe.com/user-materials/690245d0-821f-435d-8bf4-5fa2285e1d51.png"}];e["default"]=Object(s["b"])({props:{toutiao:{type:Boolean,require:!1,default:!1},hasBigBanner:{type:Boolean,default:!1}},setup(t,e){const n=e.vuex.mapState(["info","router","queries"]),r=e.vuex.mapState("profile",["user","vipConfig",""]),l=e.vuex.mapMutations("profile",[b["c"],b["d"]]),h=e.vuex.mapActions("profile",[b["h"],"logout"]),u=e.vuex.mapGetters("profile",["mchConf","isLogged","isVip","isPersonalVip","isProdVip","isMch","getVipDeadline"]),f=Object(s["a"])(()=>u.isProdVip.value?2:u.isPersonalVip.value?1:0),g=Object(s["a"])(()=>{const t=[];return u.isLogged.value&&u.isVip.value||t.unshift({title:"开通会员畅享渲染",icon:()=>Object(s["c"])("img",{class:"vip mr-6 mb-2",attrs:{src:A.a}}),color:"#CD9745",wrapClass:"vip-item",url:"/vip"}),t.unshift({title:"客户端下载",icon:null,color:"",url:"https://support.baoxiaohe.com/client.html"}),t}),_=Object(s["a"])(()=>T[f.value]),w=Object(s["j"])(!1),S=Object(s["j"])(""),O=Object(s["a"])(()=>"home"===e.root.$route.name),E=Object(s["a"])(()=>t.hasBigBanner),D=Object(s["j"])(E.value),L=Object(s["a"])(()=>D.value&&E.value),P=Object(s["j"])(0),R=Object(s["j"])(document.querySelector("html").scrollTop),z=(t,e)=>{const i=t.getBoundingClientRect().height;N(document.querySelector("html").scrollTop,i);const s=e.getBoundingClientRect().y;s-i-20<=0?(document.querySelector("html").scrollTop>R.value&&Object(M["a"])(document.querySelector("html"),window.innerHeight,200),D.value=!1,document.querySelector(".layout-body-scroll-container").style.overflowY="scroll"):(D.value=!0,document.querySelector(".layout-body-scroll-container").style.overflowY="hidden"),R.value=document.querySelector("html").scrollTop},N=(t,e)=>{const i=.5*window.innerHeight;if(t>i){const e=(t-i)/(window.innerHeight-i);P.value=.75*e}else P.value=0},B=()=>{z(document.querySelector(".header-container"),document.querySelector(".layout"))};Object(s["f"])(()=>{h[b["h"]](),O.value&&document.addEventListener("scroll",B)}),Object(s["g"])(()=>{document.removeEventListener("scroll",B)});const F=["/templates","/models"],$=t=>!t.reduce((t,e)=>t&&!~n.router.value.indexOf(e),!0),U=Object(s["a"])(()=>$(["/models"])),H=Object(s["a"])(()=>U.value?"模型名称/ID":"设计模板名称"),V=()=>{const{category:t=""}=n.queries.value,i=U.value?"/models":"/templates",s=S.value||"all";e.router.push({path:`${i}/${s}/${t.length>6?t:"all"}`}),e.track({category:"search-"+(U.value?"model":"template"),action:"search",label:S.value})};Object(s["k"])(()=>n.queries.value,()=>{const{k:t=""}=n.queries.value;S.value="all"===t?"":t}),Object(s["k"])(()=>O.value,t=>{if(t)D.value=E.value;else{D.value=!E.value;const t=document.querySelector(".layout-body-scroll-container");t&&(t.style.overflowY="scroll")}}),Object(s["k"])(()=>E.value,()=>{D.value=E.value}),Object(s["k"])(()=>u.isLogged.value,t=>{if(t){const t=document.querySelector(".layout-body-scroll-container");t&&(t.style.overflowY="scroll")}});Object(s["a"])(()=>$(F));const G=[{title:"设计方案",icon:p.a,url:"/mydesign"},{title:"授权记录",icon:v.a,url:"/copyright"},{title:"订单与发票",icon:m.a,url:"/orders"},{title:"账号设置",icon:d.a,url:"/personalcenter"},{title:"退出登录",icon:c.a,url:"",active:!0,onClick:()=>{h.logout()}}];return()=>{var n,c,h,d,p,m,v,A,O,M,T;return Object(s["c"])("div",{class:["header-container flex item-center px-30",{"header-container--fixed-top-most":L.value,"header-container--has-colorful-bg":L.value}],style:L.value?`background-color:rgba(0, 0, 0, ${P.value});`:""},[Object(s["c"])("router-link",{attrs:{to:t.toutiao?"/toutiao":"/"}},[(null===(n=u.mchConf.value)||void 0===n?void 0:n.logo)?Object(s["c"])("img",{class:"mch-logo",attrs:{src:null===(c=u.mchConf.value)||void 0===c?void 0:c.logo,alt:""}}):t.toutiao?Object(s["c"])("img",{class:"header-logo",attrs:{src:o.a,alt:""},style:"width:186px"}):Object(s["c"])("img",{class:"header-logo",attrs:{src:L.value?i("e1d6"):a.a,alt:""}})]),L.value?"":Object(s["c"])("div",{class:"search-content"},[Object(s["c"])("a-input",{class:"ant-input-no-border",attrs:{placeholder:`搜索${H.value}/关键词`,value:S.value},on:{change:t=>{S.value=t.target.value},pressEnter:V}},[Object(s["c"])("img",{on:{click:V},attrs:{src:C.a,alt:""},style:{width:"15px",height:"15px"},slot:"prefix"})])]),Object(s["c"])("ul",{class:"tab-list flex item-center ml-auto"},[null===(h=g.value)||void 0===h?void 0:h.map(t=>{var i;return Object(s["c"])("li",{class:"tab-item ml-14 "+t.wrapClass,style:{color:t.color||"rgba(#000,45%)"},on:{click:()=>{t.url.startsWith("http")?window.open(t.url):e.router.push({path:t.url})}}},[null===(i=t.icon)||void 0===i?void 0:i.call(t),t.title])}),Object(s["c"])("span",{class:"ml-10",style:{color:L.value?"white":"rgba(0,0,0,.4)",fontWeight:"lighter"}},["|"]),Object(s["c"])(y["a"],[Object(s["c"])("li",{class:"tab-item item-center flex ml-10",style:{color:"rgba(#000,45%)"}},[Object(s["c"])("img",{style:{width:"16px",height:"16px"},attrs:{src:L.value?i("f298"):x.a,alt:""}}),Object(s["c"])("span",{class:"ml-8"},["创建设计"])])])]),u.isLogged.value?Object(s["c"])("a-popover",{attrs:{placement:"bottomRight",overlayClassName:"user-popover"},class:"ml-20",on:{visibleChange:t=>{w.value=t}}},[Object(s["c"])("template",{slot:"content"},[Object(s["c"])("div",{class:"user-content-list"},[Object(s["c"])("div",{class:"top-header",style:{backgroundImage:`url(${null===(d=_.value)||void 0===d?void 0:d.background})`,backgroundSize:"120% 120%",backgroundPosition:"center"}},[Object(s["c"])("div",{class:"top-tag",style:{background:null===(p=_.value)||void 0===p?void 0:p.header.bg,color:null===(m=_.value)||void 0===m?void 0:m.header.color}},[null===(v=_.value)||void 0===v?void 0:v.header.text]),Object(s["c"])("div",{class:"user-info"},[Object(s["c"])("div",{class:"title",style:{color:null===(A=_.value)||void 0===A?void 0:A.subColor}},[r.user.value.nickName]),Object(s["c"])("div",{class:"id-title mt-4",style:{color:null===(O=_.value)||void 0===O?void 0:O.descColor}},["ID: ",r.user.value.user_id||"100000"]),Object(s["c"])("div",{class:"flex flex-between item-center"},[Object(s["c"])("div",{class:"id-title mt-4",style:{color:null===(M=_.value)||void 0===M?void 0:M.descColor}},[u.getVipDeadline.value?"有效期至"+j()(u.getVipDeadline.value).format("YYYY年MM月DD日"):"您还未开通会员VIP哦～"]),Object(s["c"])("div",{class:"content-btn",on:{click:()=>{l[b["d"]](!0)}}},[null===(T=_.value)||void 0===T?void 0:T.btnText])])])]),Object(s["c"])("ul",{class:"content-list"},[G.map((t,i)=>Object(s["c"])("li",{key:i,class:t.active?"active":"",on:{click:()=>{var i;t.url&&e.router.push(t.url),null===(i=t.onClick)||void 0===i||i.call(t)}}},[Object(s["c"])("img",{attrs:{src:t.icon,alt:""}}),Object(s["c"])("span",[t.title])]))])])]),Object(s["c"])("div",{class:"user-info flex item-center text-pointer",on:{click:()=>{e.router.push("/personalcenter")}}},[Object(s["c"])("img",{attrs:{src:Object(k["F"])(r.user.value.avatar_url,50,50)||I,alt:""},class:"avatar-img "+(2===f.value?"avatar-pro":1===f.value?"avatar":"")}),Object(s["c"])("img",{class:"tag-img",attrs:{src:_.value.tag,alt:""}}),Object(s["c"])("i",{class:"iconfont ml-8 selected-icon "+(w.value?"rotate-half":"")},[""])])]):Object(s["c"])("a-button",{class:"ml-20",on:{click:()=>{l[b["c"]](!0)}}},["登录/注册"])])}}})},caa8:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"canvas-scaler-wrap"},[i("div",{staticClass:"btn-wrap"},[i("div",{staticClass:"btn",class:t.subBtnDisabled?"disabled":"",on:{click:t.onDecreaseScale}},[t._v(" - ")]),i("div",[t._v(t._s(Math.floor(100*t.scale))+"%")]),i("div",{staticClass:"btn",class:t.addBtnDisabled?"disabled":"",on:{click:t.onIncreaseScale}},[t._v(" + ")])]),i("div",{staticClass:"menu"},t._l(t.menu,(function(e,s){return i("div",{key:s,staticClass:"menu-item",class:[{actived:t.scale===e.value,"border-t":"adjust"===e.value}],on:{click:function(i){return t.on_set_scale(e.value)}}},[t._v(" "+t._s(e.label)+" ")])})),0)])},n=[],a=i("5530"),r=i("5880"),o={computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["scale"])),{},{subBtnDisabled(){return this.scale-this.$data.$step<=this.$data.$minScale},addBtnDisabled(){return this.scale+this.$data.$step>=this.$data.$maxScale}}),data(){return{menu:[{label:"20%",value:.2},{label:"50%",value:.5},{label:"100%",value:1},{label:"200%",value:2},{label:"300%",value:3},{label:"适应屏幕",value:"adjust"},{label:"实际大小",value:1}],$minScale:.2,$maxScale:5,$step:.25}},methods:{on_set_scale(t){"adjust"!==t?this._set_scale(t):this.$bus.$emit("design/adjustScreenSize")},_set_scale(t){this.$store.commit("editor-v2/set_scale",Math.max(Math.min(t,this.$data.$maxScale),this.$data.$minScale))},onDecreaseScale(){let{scale:t}=this;t-=this.$data.$step,this._set_scale(t)},onIncreaseScale(){let{scale:t}=this;t+=this.$data.$step,this._set_scale(t)}}},l=o,c=(i("a254"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,"3b3fde3a",null);e["default"]=h.exports},cadb:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return"table"==t.curDesign.type?s("div",{staticClass:"editor-property"},[s("a-button",{attrs:{type:"primary",block:""},on:{click:t.onEdit}},[t._v(" 编辑表格内容 ")]),s("a-divider",{staticStyle:{margin:"24px 0 0 0"}}),s("div",{staticClass:"table-preview-style-container mt-24"},[s("Field",{attrs:{title:"表格样式"}}),s("a-popover",{attrs:{placement:"left","overlay-class-name":"table-preview-style-container"}},[s("div",{staticClass:"table-preview-style flex item-center flex-between flex-wrap",attrs:{slot:"content"},slot:"content"},t._l(t.previewStyle,(function(e,i){return s("div",{key:i,class:"table-preview-item text-pointer "+(t.curDesign.table.previewStyle.id===e.id?" active":""),on:{click:function(i){return t.onChooseStyle(e)}}},[s("img",{attrs:{src:e.image,alt:""}})])})),0),s("div",{staticClass:"choose-style flex mt-16 flex-center item-center text-pointer"},[s("img",{staticClass:"table-contain",attrs:{src:t.selectedPreviewStyle.bigImage,alt:""}}),s("img",{staticClass:"select-icon",attrs:{src:i("3ee8"),alt:""}})])])],1),s("div",{staticClass:"colors-list"},[s("ul",{staticClass:"helper-list flex items-center mt-16 flex-between"},[s("li",[t._v("背景")]),s("li",{staticClass:"flex item-center flex-between"},[s("span",{staticClass:"flex-none"},[t._v("边框")]),s("NoBorderInput",{attrs:{unit:"pt",value:Math.round(t.px2pt(t.curDesign.table.borderWidth))||1,align:"right"},on:{confirm:t.onSetBorderWidth}})],1)])]),s("div",{staticClass:"color-fills-container flex-wrap flex flex-between items-center mt-16"},[s("b-pallet",{staticStyle:{width:"90px !important"},attrs:{size:"mini",disabled:t.curDesign.locked,value:t.colors.backgroundColor,cmyk:""},on:{confirm:t.onSetBackgroundColor}}),s("b-pallet",{staticStyle:{width:"90px !important"},attrs:{size:"mini",disabled:t.curDesign.locked,value:t.colors.borderColor,cmyk:""},on:{confirm:t.onSetBorderColor}})],1),s("div",[t._m(0),s("div",{staticClass:"color-fills-container flex-wrap flex items-center mt-16"},[s("InputNumberWithControl",{attrs:{"outer-number":t.curDesign.style.borderRadius,min:0,unit:"°",step:1,"custom-class":"border-radius-input"},on:{change:t.onSetBorderRadius}})],1)]),s("div",{staticClass:"mt-16"},[s("Field",{attrs:{title:"字体"}},[s("FontMenu",{attrs:{value:t.fontFamily,disabled:t.curDesign.locked},on:{change:t.onChangeFontFamily}})],1)],1),s("Field",{staticClass:"mt-12",attrs:{title:"字号"}},[s("Select",{attrs:{fields:t.fontSizes,unit:"pt",value:t.ptFontSize,disabled:t.curDesign.locked,"handle-change":t.onChangeFontSize}}),s("div",{staticClass:"box ml-16"},[s("b-pallet",{attrs:{disabled:t.curDesign.locked,value:t.fontColor},on:{confirm:t.onSetFontColor}})],1)],1),s("div",{staticClass:"mt-16"},[s("Field",{staticClass:"my-10",attrs:{title:"文字对齐"}}),s("div",{staticClass:"flex item-center flex-wrap flex-between"},t._l(t.$data.$textAlignButtons,(function(e,i){return s("a-tooltip",{key:i,attrs:{effect:"dark",placement:"top"}},[s("template",{slot:"title"},[t._v(" "+t._s(e.tip)+" ")]),s("div",{staticClass:"btn-wrap"},[s("div",{class:"box-button "+(t.curDesign.locked?"disabled":""),on:{click:function(i){return t.onSetTextAlign(e)}}},[s("img",{attrs:{src:e.url,alt:""}})])])],2)})),1)],1),s("a-divider"),s("design-common-operation")],1):t._e()},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"helper-list flex items-center mt-16 flex-between"},[i("li",[t._v("圆角")])])}],a=(i("b680"),i("5319"),i("ddb0"),i("5530")),r=i("5880"),o=i("0ea8"),l=i("365c"),c=i("c353"),h=i("8e93"),d=i("8067"),u=i("1e9d"),p=i("ed08"),f=i("3ef4"),m=i("843d"),g={components:{Field:c["default"],NoBorderInput:h["default"],InputNumberWithControl:d["default"],designCommonOperation:u["default"],FontMenu:m["default"],Select:o["default"]},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("table",["selected","previewStyle"])),Object(r["mapState"])("editor-v2",["element_craft_list"])),Object(r["mapGetters"])("editor-v2",["curDesigns"])),Object(r["mapGetters"])("table",["selectedCoord"])),{},{curDesign(){return this.curDesigns[0]},selectedPreviewStyle(){return this.previewStyle.find(t=>t.id===this.curDesign.table.previewStyle.id)},fontSizes(){return l["FONT_LIST"].map(t=>({key:t,value:t}))},fontColor(){return this.seletedTarget.color||"rgba(0,0,0,1)"},ptFontSize(){var t;return null===(t=this.mm2pt(this.seletedTarget.fontSize||12))||void 0===t?void 0:t.toFixed(1)},colors(){var t,e;const i=this.selected[0]||[],s=i[0],n=i[1];let a="";const r=f["a"].getLineKeysByCoord(s,n,s+1,n+1);return r.forEach(t=>{var e;const i=(null===(e=this.curDesign.table.lines[t])||void 0===e?void 0:e.color)||"";!a&&i&&"transparent"!==i&&(a=i)}),{backgroundColor:(null===(t=this.curDesign.table.cells[s])||void 0===t||null===(e=t[n])||void 0===e?void 0:e.background)||"#fff",borderColor:a||"#fff"}},seletedTarget(){var t,e,i;const[s,n]=this.selectedCoord;return Object.assign({},(null===(t=this.curDesign.table)||void 0===t?void 0:t.defaultStyle)||{},Object(p["q"])(s)&&Object(p["q"])(n)&&(null===(e=this.curDesign.table)||void 0===e||null===(i=e.cells[s])||void 0===i?void 0:i[n])||{})},fontFamily(){var t;return parseInt(null===(t=this.seletedTarget.fontFamily)||void 0===t?void 0:t.replace("f",""))||l["SIYUAN_FONT_ID"]}}),data(){return{$textAlignButtons:[{key:"textAlign",value:"left",url:i("f7e9"),tip:"居左"},{key:"textAlign",value:"center",url:i("5211"),tip:"居中"},{key:"textAlign",value:"right",url:i("2e61"),tip:"居右"},{key:"verticalAlign",value:"top",url:i("1d57"),tip:"居顶"},{key:"verticalAlign",value:"center",url:i("c812"),tip:"居中"},{key:"verticalAlign",value:"bottom",url:i("716d"),tip:"居底"}]}},methods:{mm2pt(t){return Object(p["H"])(t).mm2pt()},pt2mm(t){return Object(p["H"])(t).pt2mm()},pt2px(t){return Object(p["H"])(t).pt2px()},px2pt(t){return Object(p["H"])(t).px2pt()},px2mm(t){return Object(p["H"])(t).px2mm()},onSetTextAlign(t){const{key:e,value:i}=t,s=this.curDesign;s.style&&this.selected.forEach(([t,n])=>{this.$set(s.table.cells[t][n],e,i)})},onSetFontColor(t){const e=this.curDesign;e.style&&this.selected.forEach(([i,s])=>{this.$set(e.table.cells[i][s],"color",t.rgba)})},onChangeFontSize(t){const e=this.curDesign;if(!e.style)return;const i=this.pt2mm(t);this.selected.forEach(([t,s])=>{this.$set(e.table.cells[t][s],"fontSize",i)})},onChangeFontFamily(t){const e=this.curDesign;if(e.style)if("table"===e.type)this.selected.forEach(([i,s])=>{e.table.cells[i][s].fontFamily="f"+t.id,e.table.cells[i][s].fontSrc=t.file_path});else{if("{}"===JSON.stringify(e))return;e.style.fontFamily="f"+t.id,e.id=t.id,e.src=t.file_path,e.example=t.example,e.thumb=t.thumb_path}},onSetBorderRadius(t){this.curDesign&&this.curDesign.style&&(this.curDesign.style.borderRadius=parseInt(t))},onSetBorderColor(t,e){const i=this.selected;if(1===this.selected.length){const[t,e]=this.selected[0],s=this.curDesign.table.cells[t][e];s.merge&&s.mergeConfig&&i.push([s.mergeConfig.xend,s.mergeConfig.yend])}const[s,n,a,r]=i.reduce(([t,e,i,s],[n,a])=>[Math.min(t,n),Math.max(e,n),Math.min(i,a),Math.max(s,a)],[1e6,0,1e6,0]);this.setAttributeBorder({xstart:s,xend:n+1,ystart:a,yend:r+1,color:t.rgba})},setAttributeBorder({xstart:t,ystart:e,xend:i,yend:s,color:n}){this.$bus.$emit("table-event"+this.curDesign.uuid,{target:{action:"line",color:n,xstart:t,ystart:e,xend:i,yend:s}})},onSetBackgroundColor(t){const e=this.curDesign;e.style&&this.selected.forEach(([i,s])=>{Object(p["q"])(i)&&Object(p["q"])(s)&&this.$set(e.table.cells[i][s],"background",t.rgba)})},onSetBorderWidth(t){const e=this.curDesign;if(!e||!e.style||!e.table)return;const i=e.table.borderWidth||this.pt2px(1),s=this.pt2px(t);e.table.borderWidth=s;const n=this.px2mm(s-i);e.table.cancelUpdate=!0,e.style.width+=n,e.style.height+=n},onChooseStyle(t){const e=this.curDesign;e.style&&(e.table.previewStyle={id:t.id,row:t.row,column:t.column},e.table.borders=[],this.$bus.$emit("table-event"+e.uuid,{target:{action:"previewStyle"}}))},onEdit(){this.$bus.$emit("table-event"+this.curDesign.uuid,{target:{action:"edit"}})}}},v=g,b=(i("036c"),i("57af"),i("2877")),y=Object(b["a"])(v,s,n,!1,null,"507ee3f8",null);e["default"]=y.exports},cb04:function(t,e,i){"use strict";i.r(e);i("ddb0");var s=i("750b"),n=i("3ccf"),a=i("365c");i("09b9");const r=6e4,o=3e3,l=2e3,c=i("2b3a");e["default"]=Object(s["b"])({props:{type:{type:String,default:"bind"}},setup(t,e){const i=Object(s["j"])(null),h=Object(s["j"])(null),d="bind"===t.type,u=d?a["bindWxQrcode"]:a["relieveWxQrcode"],p=d?a["checkWxBind"]:a["checkWxRelieve"],{loading:f,data:m,refetch:g}=Object(n["c"])(u),[v]=Object(n["b"])(p);return Object(s["f"])(()=>{h.value=setInterval(()=>{g()},r-o),i.value=setInterval(()=>{v({update(t){const i=t.data.status;if(1===i){let t=d?"绑定":"解绑";t+="成功",e.root.$message[i?"success":"error"](t),e.emit("close")}}})},l)}),Object(s["e"])(()=>{i.value&&(clearInterval(i.value),i.value=null),h.value&&(clearInterval(h.value),h.value=null)}),()=>{var t;return Object(s["c"])("div",{class:"bind-component"},[Object(s["c"])("a-spin",{attrs:{spinning:f.value}},[Object(s["c"])("div",{class:"wx-qrcode flex flex-center item-center",style:{backgroundImage:m.value?`url(https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=${null===(t=m.value)||void 0===t?void 0:t.data.ticket})`:void 0}},[Object(s["c"])("img",{attrs:{src:c,alt:!0}})])]),Object(s["c"])("div",{class:"title mt-16"},[d?"扫一扫，立即绑定":"为保障帐号安全，解绑前请用微信登录验证身份"])])}}})},cb11:function(t,e,i){var s=i("cbe5"),n=i("9cf9"),a=n.subPixelOptimizeLine,r={},o=s.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i,s,n,o;this.subPixelOptimize?(a(r,e,this.style),i=r.x1,s=r.y1,n=r.x2,o=r.y2):(i=e.x1,s=e.y1,n=e.x2,o=e.y2);var l=e.percent;0!==l&&(t.moveTo(i,s),l<1&&(n=i*(1-l)+n*l,o=s*(1-l)+o*l),t.lineTo(n,o))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}});t.exports=o},cb6d:function(t,e){function i(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}function s(t,e){return{target:t,topTarget:e&&e.topTarget}}i.prototype={constructor:i,_dragStart:function(t){var e=t.target;while(e&&!e.draggable)e=e.parent;e&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.dispatchToElement(s(e,t),"dragstart",t.event))},_drag:function(t){var e=this._draggingTarget;if(e){var i=t.offsetX,n=t.offsetY,a=i-this._x,r=n-this._y;this._x=i,this._y=n,e.drift(a,r,t),this.dispatchToElement(s(e,t),"drag",t.event);var o=this.findHover(i,n,e).target,l=this._dropTarget;this._dropTarget=o,e!==o&&(l&&o!==l&&this.dispatchToElement(s(l,t),"dragleave",t.event),o&&o!==l&&this.dispatchToElement(s(o,t),"dragenter",t.event))}},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.dispatchToElement(s(e,t),"dragend",t.event),this._dropTarget&&this.dispatchToElement(s(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null}};var n=i;t.exports=n},cb86:function(t,e,i){},cbb8:function(t,e,i){},cbe5:function(t,e,i){var s=i("19eb"),n=i("6d8b"),a=i("20c8"),r=i("d833"),o=i("dc2f"),l=o.prototype.getCanvasPattern,c=Math.abs,h=new a(!0);function d(t){s.call(this,t),this.path=null}d.prototype={constructor:d,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(t,e){var i,s=this.style,n=this.path||h,a=s.hasStroke(),r=s.hasFill(),o=s.fill,c=s.stroke,d=r&&!!o.colorStops,u=a&&!!c.colorStops,p=r&&!!o.image,f=a&&!!c.image;(s.bind(t,this,e),this.setTransform(t),this.__dirty)&&(d&&(i=i||this.getBoundingRect(),this._fillGradient=s.getGradient(t,o,i)),u&&(i=i||this.getBoundingRect(),this._strokeGradient=s.getGradient(t,c,i)));d?t.fillStyle=this._fillGradient:p&&(t.fillStyle=l.call(o,t)),u?t.strokeStyle=this._strokeGradient:f&&(t.strokeStyle=l.call(c,t));var m=s.lineDash,g=s.lineDashOffset,v=!!t.setLineDash,b=this.getGlobalScale();if(n.setScale(b[0],b[1],this.segmentIgnoreThreshold),this.__dirtyPath||m&&!v&&a?(n.beginPath(t),m&&!v&&(n.setLineDash(m),n.setLineDashOffset(g)),this.buildPath(n,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(t.beginPath(),this.path.rebuildPath(t)),r)if(null!=s.fillOpacity){var y=t.globalAlpha;t.globalAlpha=s.fillOpacity*s.opacity,n.fill(t),t.globalAlpha=y}else n.fill(t);if(m&&v&&(t.setLineDash(m),t.lineDashOffset=g),a)if(null!=s.strokeOpacity){y=t.globalAlpha;t.globalAlpha=s.strokeOpacity*s.opacity,n.stroke(t),t.globalAlpha=y}else n.stroke(t);m&&v&&t.setLineDash([]),null!=s.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))},buildPath:function(t,e,i){},createPathProxy:function(){this.path=new a},getBoundingRect:function(){var t=this._rect,e=this.style,i=!t;if(i){var s=this.path;s||(s=this.path=new a),this.__dirtyPath&&(s.beginPath(),this.buildPath(s,this.shape,!1)),t=s.getBoundingRect()}if(this._rect=t,e.hasStroke()){var n=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||i){n.copy(t);var r=e.lineWidth,o=e.strokeNoScale?this.getLineScale():1;e.hasFill()||(r=Math.max(r,this.strokeContainThreshold||4)),o>1e-10&&(n.width+=r/o,n.height+=r/o,n.x-=r/o/2,n.y-=r/o/2)}return n}return t},contain:function(t,e){var i=this.transformCoordToLocal(t,e),s=this.getBoundingRect(),n=this.style;if(t=i[0],e=i[1],s.contain(t,e)){var a=this.path.data;if(n.hasStroke()){var o=n.lineWidth,l=n.strokeNoScale?this.getLineScale():1;if(l>1e-10&&(n.hasFill()||(o=Math.max(o,this.strokeContainThreshold)),r.containStroke(a,o/l,t,e)))return!0}if(n.hasFill())return r.contain(a,t,e)}return!1},dirty:function(t){null==t&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?(this.setShape(e),this.__dirtyPath=!0,this._rect=null):s.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var i=this.shape;if(i){if(n.isObject(t))for(var s in t)t.hasOwnProperty(s)&&(i[s]=t[s]);else i[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&c(t[0]-1)>1e-10&&c(t[3]-1)>1e-10?Math.sqrt(c(t[0]*t[3]-t[2]*t[1])):1}},d.extend=function(t){var e=function(e){d.call(this,e),t.style&&this.style.extendFrom(t.style,!1);var i=t.shape;if(i){this.shape=this.shape||{};var s=this.shape;for(var n in i)!s.hasOwnProperty(n)&&i.hasOwnProperty(n)&&(s[n]=i[n])}t.init&&t.init.call(this,e)};for(var i in n.inherits(e,d),t)"style"!==i&&"shape"!==i&&(e.prototype[i]=t[i]);return e},n.inherits(d,s);var u=d;t.exports=u},cc24:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{attrs:{tabindex:"1"},on:{mousedown:t.onContainerMouseDown,wheel:function(e){return e.stopPropagation(),e.preventDefault(),t.onWheelChangeScale(e)},keydown:t.onKeyDown,keyup:t.onKeyUp}},[i("zoomable-canvas",{attrs:{offset:t.zoomable_canvas_offset}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showSelectionRect,expression:"showSelectionRect"}],staticClass:"mouse-selection-range",style:{left:t.selectionRect.x+"px",top:t.selectionRect.y+"px",width:t.selectionRect.width+"px",height:t.selectionRect.height+"px"}}),t._l(t.project_data.line_guides,(function(t,e){return i("guide-line",{key:e,attrs:{data:t},on:{callback:function(e,i){return t[e]=i}}})})),i("cutout-bar")],2)},n=[],a=(i("ddb0"),i("5530")),r=i("60bb"),o=i.n(r),l=i("5880"),c=i("da71"),h=i("87a0"),d=i("dcaf"),u=i("e3a1"),p=i("b911"),f=i("f168"),m=i("31df"),g={components:{zoomableCanvas:d["default"],cutoutBar:u["default"],guideLine:p["default"]},mixins:[f["a"],m["a"]],data(){return{showSelectionRect:!1,selectionRect:{x:0,y:0,width:0,height:0},$maxScale:5,$minScale:.05}},computed:Object(a["a"])(Object(a["a"])({},Object(l["mapState"])("editor-v2",["scale","is_outside","project_data","cur_face_name","space_key_pressed","canvas_move_button_pressed","cur_tailor_uuid","cur_cutout_uuid","zoomable_canvas_offset"])),Object(l["mapGetters"])("editor-v2",["curDesigns","design_data"])),mounted(){this.$bus.$on("shortcut",t=>{this.handleShortcut(t)})},destroyed(){this.$bus.$off("shortcut")},methods:{onKeyDown(t){if(" "===t.key)document.body.style.cursor="grabbing",this.$store.commit("editor-v2/set_space_key_pressed",!0);else if("Backspace"===t.key){if(-1!==["INPUT","TEXTAREA"].indexOf(t.target.tagName))return;if("true"===t.target.contentEditable||"plaintext-only"===t.target.contentEditable)return;t.preventDefault()}else if("Escape"===t.key){if(-1!==["INPUT","TEXTAREA"].indexOf(t.target.tagName))return;if("true"===t.target.contentEditable||"plaintext-only"===t.target.contentEditable)return;this.cur_face_name&&this.$store.commit("editor-v2/set_cur_face_name",""),t.preventDefault()}let e=!1;const i=t.ctrlKey||t.metaKey;if(!i||"A"!==t.key&&"a"!==t.key)if(!i||t.shiftKey||"Z"!==t.key&&"z"!==t.key)if(i&&t.shiftKey&&("Z"===t.key||"z"===t.key))e=!0,this.$bus.$emit("design/localhistory_reRollback");else if(!i||"v"!==t.key&&"V"!==t.key)if(!i||"s"!==t.key&&"S"!==t.key){if(this.curDesigns.length)if(!i||"L"!==t.key&&"l"!==t.key)if(!i||"c"!==t.key&&"C"!==t.key)if(!i||"x"!==t.key&&"X"!==t.key)if(!t.shiftKey||"H"!==t.key&&"h"!==t.key)if(!t.shiftKey||"V"!==t.key&&"v"!==t.key)if("Delete"===t.key||"Backspace"===t.key)e=!0,this.$bus.$emit("shortcut",{action:h["a"].DELETE});else{const i=["ArrowUp","ArrowLeft","ArrowDown","ArrowRight"];-1!==i.indexOf(t.key)&&(e=!0,this.$bus.$emit("shortcut",{action:h["a"].MOVE,event:t}))}else e=!0,this.$bus.$emit("shortcut",{action:h["a"].ROTATE_Y});else e=!0,this.$bus.$emit("shortcut",{action:h["a"].ROTATE_X});else e=!0,this.$bus.$emit("shortcut",{action:h["a"].CUT});else e=!0,this.$bus.$emit("shortcut",{action:h["a"].COPY});else e=!0,this.$bus.$emit("shortcut",{action:this.curDesigns[0].locked?h["a"].UNLOCK:h["a"].LOCK})}else e=!0,this.$bus.$emit("shortcut",{action:h["a"].SAVE});else{const t=localStorage.getItem("clipboard");t&&""!==t&&"{}"!==t?(e=!0,this.$bus.$emit("shortcut",{action:h["a"].PASTE})):e=!1}else e=!0,this.$bus.$emit("design/localhistory_rollback");else e=!0,this.$bus.$emit("shortcut",{action:h["a"].SELECT_ALL});e&&t.preventDefault()},onKeyUp(t){" "===t.key&&(document.body.style.cursor="default",this.$store.commit("editor-v2/set_space_key_pressed",!1))},onWheelChangeScale(t){const e=5,i=this.scale-t.deltaY/1e3/(10-e);this.$store.commit("editor-v2/set_scale",Math.max(Math.min(i,this.$data.$maxScale),this.$data.$minScale))},getDistanceLocalValue(t,e){t=Object.assign({x:0,y:0},t),e=Object.assign({scale:1,rotate:0,isMM:!0},e);let{x:i,y:s}=t;const{rotate:n,scale:a,isMM:r}=e;return 90===n?[i,s]=[s,-i]:180===n?[i,s]=[-i,-s]:270===n&&([i,s]=[-s,i]),i/=a,s/=a,r&&(i/=c["DPI"],s/=c["DPI"]),{x:i,y:s}},_move_zoomable_canvas(t){if(0!==t.button)return;const{x:e,y:i}=this.zoomable_canvas_offset;document.onmousemove=this.throttleMoveCanvas(t.clientX,t.clientY,e,i),document.onmouseup=()=>{this.canvas_move_button_pressed&&(this.$store.commit("editor-v2/set_canvas_move_button_pressed",!1),document.body.style.cursor="default"),document.onmousemove=null,document.onmouseup=null}},throttleMoveCanvas(t,e,i,s){return o.a.throttle(n=>{const a=this.getDistanceLocalValue({x:n.clientX-t,y:n.clientY-e},{scale:this.scale,rotate:this.project_data.rotate,isMM:!1});return this.zoomable_canvas_offset.x=i+a.x,this.zoomable_canvas_offset.y=s+a.y,!1},5)},onContainerMouseDown(t){if(this.cur_tailor_uuid&&this.$store.commit("editor-v2/set_cur_tailor_uuid",""),this.cur_cutout_uuid&&this.$store.commit("editor-v2/set_cur_cutout_uuid",""),this.space_key_pressed||this.canvas_move_button_pressed)return this._move_zoomable_canvas(t),void t.stopPropagation();0===t.button&&(this._selectDesignItemByRect({x:0,y:0,width:0,height:0}),document.onmousemove=this.throttleMouseSelect(t.clientX,t.clientY),document.onmouseup=()=>{this.showSelectionRect=!1,this.selectionRect={left:0,top:0,width:0,height:0},document.onmousedown=null,document.onmousemove=null,document.onmouseup=null})},throttleMouseSelect(t,e){return o.a.throttle(i=>{this.showSelectionRect=!0;const s={x:Math.min(i.clientX,t),y:Math.min(i.clientY,e),width:Math.abs(i.clientX-t),height:Math.abs(i.clientY-e)};return this.selectionRect=s,this._selectDesignItemByRect(s),!1},5)},_selectDesignItemByRect(t){const e=t.x,i=t.y,s=t.x+t.width,n=t.y+t.height;this.design_data.forEach((t,a)=>{if(t.designs&&t.designs.forEach(t=>{t._selected=!1}),t.locked)t._selected=!1;else{const a=document.querySelector(`#element${t.uuid}:not([style*="display:none"])`).getBoundingClientRect();(e>=a.x&&e<=a.right||s>=a.x&&s<=a.right||e<a.x&&s>a.right)&&(i>=a.y&&i<=a.bottom||n>=a.y&&n<=a.bottom||i<a.y&&n>a.bottom)?t._selected=!0:t._selected=!1}})}}},v=g,b=(i("b2ee"),i("2877")),y=Object(b["a"])(v,s,n,!1,null,"e11b3810",null);e["default"]=y.exports},cc2e:function(t,e,i){t.exports=i.p+"editor-assets/img/play.600a9f2d.svg"},cc68:function(t,e,i){},cc79:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADEklEQVRYR8XXWeimYxjH8c8wTVmOZJSYGg6kGRRppOZwlmRNqZE1iSMxTQ6EqalpapqGCGU9QMpEkrIrOVFygJRIyG5I2bIk6af70e3+P8v7zj/977P3fZ7rvr7Xfj3LLPFZtsT6TQEcjrNxGF7CZ3MAH4LV+Bw/DcmNAUT4IRxThH/DNrw8AXEEbsVZ/Gvg6+W/BQYMAUT5IzgK7+ILbMafuH4Eopb7HR9jVfHgL7gKb9UG9AHUl7yBa/ArbsTVIxC13Ju4Ad8iYdxVDAjE+XUoW4Ah5R10DXEx3ikPpuQOxu0FIuG4sruwBliOp3ACasvbkCcP4olY+EJJtC5cY3LxxGslHKd3iVkDnIQn8VVJoLi9O8noc/Eq9iO/83zK8hb+aZyIC/BeHtYAx+F5JE4X4pMiHfL7cRruxW0zur1VvhKvYAVOLQYs6AN3YWOx8jL8gAextnjm0lLX81oejz2AuP5ZbO3LgfyXF+/DugKRLI7yT3EFvjwAt7d3pgq+HwJoIf7Ah6UUA3MgltcGxatdaP9hGGpELXUEc2bJ9jpxR5WPAbSe+K7ceuREic6lfAqgg3gYp5Sbx+p8buWzANQxT/1v6sqnrbHyuy90/4l5Kzc1DRcb8zPL8LplaIDNMg0X4/Yt2DE2ReeZhgNeX9A72lIbnaItQNrkM6XeF2N5CzsI0QKsL633ozIP6oHUXpqEe7EsLSnTS6omswHbsRcZQDkdRDarc7qdoAW4HDfjsRK7Wdyed2qAKL8DGe9ZzfZVl9xZdoLdZd1b0AlvKsvCnjI8+gDaUvu69ImU6T1Ixkd5hk/uqfvDo8jYj3ce7+sDdyMWZNl4rkd7X51/Uw2wv3DQgPKuLWe/PA8/9wFkI1qDi6p1a5YOV4P9WOS7BjTanNoceAInYyfeLit51vJjcQaOr3aFtsNNeSchmpyGyeTEZ+hE6bXtSG3i3Lk6m1W8cfQIdO84ztaTGCWRsh/myyZxS2mmN2RHGDvxRJIvm1XOB7huCHrq02xC1+jj7JiH4v3Sintf/j8BZoJfcoC/ASXl+SGA6WtYAAAAAElFTkSuQmCC"},ccda:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"no-id-tip-wrap"},[i("div",[i("i",{staticClass:"iconfont icon-kongsheji"}),i("div",{staticClass:"tip"},[t.accessToken?t._e():i("span",[t._v(" 登录后")]),t._v("请选择一个模板开始设计")]),t.accessToken?t._e():i("div",{staticClass:"btn-login",on:{click:t.onShowLoginPanel}},[t._v("登录")])])])},n=[],a=i("5530"),r=i("5880"),o={computed:Object(a["a"])({},Object(r["mapState"])("profile",["accessToken"])),methods:{onShowLoginPanel(){this.$store.commit("profile/SET_SHOW_LOGIN_MODAL",!0)}}},l=o,c=(i("2199"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,"726c762a",null);e["default"]=h.exports},cd0e:function(t,e,i){t.exports=i.p+"editor-assets/img/button-draw-left-l.86cf461a.svg"},cd2a:function(t,e,i){},cd53:function(t,e,i){"use strict";var s=i("ec22"),n=i.n(s);n.a},cdaa:function(t,e,i){var s=i("607d"),n=s.addEventListener,a=s.removeEventListener,r=s.normalizeEvent,o=s.getNativeEvent,l=i("6d8b"),c=i("1fab"),h=i("22d1"),d=300,u=h.domSupported,p=function(){var t=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],i={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},s=l.map(t,(function(t){var e=t.replace("mouse","pointer");return i.hasOwnProperty(e)?e:t}));return{mouse:t,touch:e,pointer:s}}(),f={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]};function m(t){return"mousewheel"===t&&h.browser.firefox?"DOMMouseScroll":t}function g(t){var e=t.pointerType;return"pen"===e||"touch"===e}function v(t){t.touching=!0,null!=t.touchTimer&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout((function(){t.touching=!1,t.touchTimer=null}),700)}function b(t){t&&(t.zrByTouch=!0)}function y(t,e){return r(t.dom,new x(t,e),!0)}function _(t,e){var i=e,s=!1;while(i&&9!==i.nodeType&&!(s=i.domBelongToZr||i!==e&&i===t.painterRoot))i=i.parentNode;return s}function x(t,e){this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY}var w=x.prototype;w.stopPropagation=w.stopImmediatePropagation=w.preventDefault=l.noop;var C={mousedown:function(t){t=r(this.dom,t),this._mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=r(this.dom,t);var e=this._mayPointerCapture;!e||t.zrX===e[0]&&t.zrY===e[1]||M(this,!0),this.trigger("mousemove",t)},mouseup:function(t){t=r(this.dom,t),M(this,!1),this.trigger("mouseup",t)},mouseout:function(t){t=r(this.dom,t),this._pointerCapturing&&(t.zrEventControl="no_globalout");var e=t.toElement||t.relatedTarget;t.zrIsToLocalDOM=_(this,e),this.trigger("mouseout",t)},touchstart:function(t){t=r(this.dom,t),b(t),this._lastTouchMoment=new Date,this.handler.processGesture(t,"start"),C.mousemove.call(this,t),C.mousedown.call(this,t)},touchmove:function(t){t=r(this.dom,t),b(t),this.handler.processGesture(t,"change"),C.mousemove.call(this,t)},touchend:function(t){t=r(this.dom,t),b(t),this.handler.processGesture(t,"end"),C.mouseup.call(this,t),+new Date-this._lastTouchMoment<d&&C.click.call(this,t)},pointerdown:function(t){C.mousedown.call(this,t)},pointermove:function(t){g(t)||C.mousemove.call(this,t)},pointerup:function(t){C.mouseup.call(this,t)},pointerout:function(t){g(t)||C.mouseout.call(this,t)}};l.each(["click","mousewheel","dblclick","contextmenu"],(function(t){C[t]=function(e){e=r(this.dom,e),this.trigger(t,e)}}));var k={pointermove:function(t){g(t)||k.mousemove.call(this,t)},pointerup:function(t){k.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this._pointerCapturing;M(this,!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function S(t,e){var i=e.domHandlers;h.pointerEventsSupported?l.each(p.pointer,(function(s){O(e,s,(function(e){i[s].call(t,e)}))})):(h.touchEventsSupported&&l.each(p.touch,(function(s){O(e,s,(function(n){i[s].call(t,n),v(e)}))})),l.each(p.mouse,(function(s){O(e,s,(function(n){n=o(n),e.touching||i[s].call(t,n)}))})))}function A(t,e){function i(i){function s(s){s=o(s),_(t,s.target)||(s=y(t,s),e.domHandlers[i].call(t,s))}O(e,i,s,{capture:!0})}h.pointerEventsSupported?l.each(f.pointer,i):h.touchEventsSupported||l.each(f.mouse,i)}function O(t,e,i,s){t.mounted[e]=i,t.listenerOpts[e]=s,n(t.domTarget,m(e),i,s)}function j(t){var e=t.mounted;for(var i in e)e.hasOwnProperty(i)&&a(t.domTarget,m(i),e[i],t.listenerOpts[i]);t.mounted={}}function M(t,e){if(t._mayPointerCapture=null,u&&t._pointerCapturing^e){t._pointerCapturing=e;var i=t._globalHandlerScope;e?A(t,i):j(i)}}function I(t,e){this.domTarget=t,this.domHandlers=e,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function T(t,e){c.call(this),this.dom=t,this.painterRoot=e,this._localHandlerScope=new I(t,C),u&&(this._globalHandlerScope=new I(document,k)),this._pointerCapturing=!1,this._mayPointerCapture=null,S(this,this._localHandlerScope)}var E=T.prototype;E.dispose=function(){j(this._localHandlerScope),u&&j(this._globalHandlerScope)},E.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},l.mixin(T,c);var D=T;t.exports=D},cde0:function(t,e,i){"use strict";var s=i("d5d6"),n=i.n(s);n.a},ce33:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-modal",{attrs:{footer:null,title:"下单印刷（一个起印）",width:900},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[s("div",{staticClass:"main-content"},[s("a-row",{attrs:{type:"flex",justify:"space-between"}},[s("a-col",[s("preview",{ref:"previewRef"})],1),s("a-col",{staticClass:"product-details box"},[s("div",{staticClass:"title"},[t._v("包装详情")]),s("div",{staticClass:"contents"},[s("div",{staticClass:"content line"},[s("div",{staticClass:"content-name"},[t._v("品名：")]),s("div",{staticClass:"content-value"},[t._v(t._s(t.productName))])]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v(t._s(t.sizeTypeName)+"：")]),s("div",{staticClass:"content-value"},[t._v(t._s(t.sizeValue)+" mm")])]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("展开面积：")]),s("div",{staticClass:"content-value"},[t._v(" "+t._s(t.knifeData.totalX.toFixed(2))+"mm X "+t._s(t.knifeData.totalY.toFixed(2))+"mm ")])]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("材质：")]),s("div",{staticClass:"content-value"},[t._v(t._s(t.materialScience))])]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("表面工艺：")]),s("div",{staticClass:"content-value"},[t._v(t._s(t.surfaceScience))])]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("特殊工艺：")]),s("div",{staticClass:"content-value"},[t._l(t.specialCrafts,(function(e,i){return s("span",{key:i,staticClass:"craft-list"},[s("div",{staticClass:"color-box",style:{backgroundColor:e.color}}),t._v(" 局部"+t._s(e.craftTitle)),i<t.specialCrafts.length-1?[t._v("，")]:t._e()],2)})),0===t.specialCrafts.length?s("span",[t._v("无")]):t._e()],2)]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("印刷风险检测：")]),s("div",{staticClass:"content-value"},[t.hasRisk?s("a-tooltip",{attrs:{placement:"topRight"}},[s("template",{slot:"title"},[s("span",[t._v("建议返回调整图片文字的分辨率")])]),t.hasRisk?s("span",{staticClass:"has-risk"},[t._v("存在印刷风险")]):t._e()],2):s("span",{staticClass:"no-risk"},[t._v("已检测，无风险")])],1)])])])],1),s("div",{staticClass:"price-details box mt-32"},[s("div",{staticClass:"title"},[t._v("价格详情")]),t.priceSummary?s("a-row",{staticClass:"price-content"},[s("a-col",{staticClass:"price-box",attrs:{span:4}},[s("div",{staticClass:"left-aligned-line"},[s("div",{staticClass:"price-key"},[t._v("单价：")]),s("div",{staticClass:"price-value"},[s("span",{staticClass:"money unit-price"},[t._v(t._s(((t.priceSummary.payFee+t.subsidyMoney)/t.priceSummary.count).toFixed(2)))]),t._v(" 元/个 ")])]),s("div",{staticClass:"left-aligned-line"},[s("div",{staticClass:"price-key"},[t._v("数量：")]),s("div",{staticClass:"price-value"},[s("a-input-number",{attrs:{min:1,max:t.maxCount,formatter:t.numberFormatter,parser:t.numberFormatter},on:{change:function(e){t.productCount=t.handleIntegerChange.apply(void 0,arguments)}},model:{value:t.productCount,callback:function(e){t.productCount=e},expression:"productCount"}})],1)]),s("div",{staticClass:"left-aligned-line"},[s("div",{staticClass:"price-key"},[t._v("开机费：")]),s("div",{staticClass:"price-value"},[t._v(t._s(0)+"元/次")])]),s("div",{staticClass:"left-aligned-line"},[s("div",{staticClass:"price-key"},[t._v("补贴：")]),s("div",{staticClass:"subsidy fo-p fo-14 mr-20"},[t._v(t._s(-t.subsidyMoney)+"元")]),s("div",{staticStyle:{"line-height":"16px"}},[s("img",{attrs:{src:i("a743")}})])])]),s("a-col",{staticClass:"price-discount-box price-box",attrs:{offset:2,span:8}},[t._l(t.discounts,(function(e,i){return s("div",{key:i,staticClass:"price-discount-list"},[void 0!==e.min?[t._v(" "+t._s(e.min)),e.max?s("span",[t._v("-"+t._s(e.max))]):t._e(),t._v("元: "+t._s(10*e.discount)+"折 ")]:t._e()],2)})),[s("a-popover",[t._v(" 制作数量大于50或金额超过1000时， 添加 "),s("span",{staticClass:"text-pointer",staticStyle:{color:"#00b578"}},[t._v("客服微信")]),t._v(" 获得更低报价 "),s("template",{slot:"content"},[s("img",{staticStyle:{width:"200px",heigth:"200px"},attrs:{src:"https://yun.baoxiaohe.com/static/bwqrcode.jpg"}})])],2)]],2),s("a-col",{staticClass:"customer-service-tips",attrs:{offset:1,span:6}},[s("img",{staticStyle:{width:"100px",heigth:"100px"},attrs:{src:"https://yun.baoxiaohe.com/static/bwqrcode.jpg"}}),s("div",{staticClass:"mt-10"},[t._v("如有疑问请咨询客服")])])],1):s("a-row",{attrs:{type:"flex",align:"middle",justify:"center"}},[s("a-col",{staticClass:"mt-10 customer-service-tips-empty"},[s("img",{staticStyle:{width:"110px",heigth:"110px"},attrs:{src:"https://yun.baoxiaohe.com/static/bwqrcode.jpg"}}),s("div",{staticClass:"mt-10"},[t._v("如有疑问请咨询客服")])])],1)],1),t.priceSummary?s("a-row",{staticClass:"summary mt-30",staticStyle:{position:"relative"},attrs:{type:"flex",justify:"space-between",align:"bottom"}},[s("a-col",[s("a-popover",{attrs:{title:"金额明细","overlay-class-name":"summary-in-detail-popover"}},[s("template",{slot:"content"},[s("div",{staticClass:"summary-in-detail"},[s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("原价：")]),s("div",{staticClass:"content-value"},[t._v(" "+t._s(((t.priceSummary.payFee+t.subsidyMoney)/t.priceSummary.count/t.discount).toFixed(2))+" 元 x "+t._s(t.priceSummary.count)+" 个 ")])]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("折扣：")]),s("div",{staticClass:"content-value"},[t._v(" "+t._s(t.humanDiscounts(t.discount))+" ")])]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("开机费：")]),s("div",{staticClass:"content-value"},[t._v(t._s(0))])]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("邮费：")]),s("div",{staticClass:"content-value"},[t._v("顺丰到付")])]),s("div",{staticClass:"line"},[s("div",{staticClass:"content-name"},[t._v("补贴：")]),s("div",{staticClass:"subsidy fo-p fo-14"},[t._v(t._s(-t.subsidyMoney)+"元")])])])]),s("a-icon",{staticClass:"mr-8 text-pointer",attrs:{type:"menu"}})],2),t._v(" 印刷总价：¥ "),s("span",{staticClass:"money summary-money"},[t._v(t._s(t.priceSummary.payFee))]),s("span",{staticClass:"tips"},[t._v("（不含运费）")])],1),s("a-col",[s("a-button",{attrs:{type:"primary"},on:{click:t.gotoPrepay}},[t._v("立即下单")])],1)],1):t._e()],1)])],1)},n=[],a=(i("25f0"),i("ddb0"),i("5530")),r=i("365c"),o=i("4212"),l=i("5880"),c=i("78da"),h=i("ed08"),d=i("57e0"),u={props:{},components:{Preview:c["default"],AddressPicker:d["a"]},data(){return{visible:!1,maxCount:100,productCount:1,priceSummary:null,hasRisk:!1}},mounted(){},methods:{show({hasRisk:t}){this.visible=!0,this.hasRisk=t,this.$store.dispatch("property/fetchMaterialSciences"),this.$store.dispatch("property/fetchSurfaceSciences"),this.$store.dispatch("property/fetchCrafts"),this.prepareData(),this.$nextTick(()=>{this.$refs.previewRef.initImage()})},debounceHandleIntegerChange:t=>Object(h["g"])((void 0).handleIntegerChange(t),1e3),handleIntegerChange(t){t=(t||1).toString();let e=1;const i=/^\d+/.exec(t);return i.length>0&&(e=parseInt(i[0])),this.prepareData(),e},numberFormatter(t){return parseInt(t)>this.maxCount?this.maxCount:t},hide(){this.visible=!1},humanDiscounts(t){return 1===t?"无":(t*=10,Number.isInteger(t)?t+"折":Math.round(10*t)/10+"折")},prepareData(){this.$api2.calculateProductOrder({project_id:this.$root.projectData.id,count:this.productCount}).then(t=>{this.priceSummary=t.data})},gotoPrepay(){this.$router.push(`/preorder?project_id=${this.$root.projectData.id}&count=${this.productCount}`)}},computed:Object(a["a"])(Object(a["a"])({},Object(l["mapState"])("property",["materialSciences","surfaceSciences","crafts"])),{},{projectData(){return this.$root.projectData},knifeData(){return this.$root.knifeData},productName(){const t=this.$root.projectData.extend_attrs||{},e=[t.trademark,t.productName,this.$root.projectData.project_name];return e.filter(t=>t).join("")},sizeTypeName(){var t;return null===(t=r["SIZE_TYPES"].filter(t=>t.key===this.$root.projectData.size_type)[0])||void 0===t?void 0:t.value},sizeValue(){let t=this.$root.knifeData.size;"dm"===this.$root.projectData.size_type?t=this.$root.knifeData.knifeSize:"ed"===this.$root.projectData.size_type&&(t=this.$root.knifeData.outSize);const e=Object(o["a"])(t.L,t.W,t.H,t.like),i=e.join("x");return i},materialScience(){var t;return null===(t=(this.materialSciences||[]).filter(t=>t.id===this.$root.projectData.science_id)[0])||void 0===t?void 0:t.name},surfaceScience(){var t;return(null===(t=(this.surfaceSciences||[]).filter(t=>t.id===this.$root.projectData.membrane_id)[0])||void 0===t?void 0:t.name)||"无"},specialCrafts(){const t=[...this.$root.projectData.designData,...this.$root.projectData.insideDesignData].filter(t=>t.style.craft),e={};for(const s of t)e[s.style.craft]?e[s.style.craft].push(s):e[s.style.craft]=[s];const i=[];for(const s of Object.keys(e)){const t=this.crafts.find(t=>t.id==s);t&&i.push({craftTitle:t.name,color:t.color,area:Math.round(e[s].map(t=>t.style.width*t.style.height).reduce((t,e)=>t+e))})}return i},discounts(){var t,e;const i=(null===(t=this.priceSummary)||void 0===t||null===(e=t.saleInfo)||void 0===e?void 0:e.list)||[];if(0===i.length)return[];const s=[];for(let n=0;n<i.length-1;n++)s.push({min:i[n].min,max:i[n+1].min-.01,discount:i[n].discount,info:i[n].info});return s.push({min:i[i.length-1].min,info:i[i.length-1].info,discount:i[i.length-1].discount}),s},subsidyMoney(){var t,e,i;return null===(t=this.priceSummary)||void 0===t||null===(e=t.saleInfo)||void 0===e||null===(i=e.use)||void 0===i?void 0:i.subsidy},discount(){var t,e,i;return null===(t=this.priceSummary)||void 0===t||null===(e=t.saleInfo)||void 0===e||null===(i=e.use)||void 0===i?void 0:i.discount}})},p=u,f=(i("9c56"),i("c057"),i("2877")),m=Object(f["a"])(p,s,n,!1,null,"fcb1ed1a",null);e["default"]=m.exports},ce94:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"control-point",style:{width:t.baseLength+"px",height:t.baseLength+"px",zIndex:300},on:{mousedown:function(e){return e.stopPropagation(),t.$emit("resize",e)}}},["circle"===t.type?i("div",{staticClass:"circle",style:Object.assign({},{width:t.baseLength+"px",height:t.baseLength+"px",borderWidth:(1/t.scale<1?1:1/t.scale)+"px"},t.position)}):"rect"===t.type?i("div",{staticClass:"rect",style:Object.assign({},{width:t.baseLength+"px",height:t.baseLength+"px"},t.position)}):t._e()])},n=[],a={props:{scale:{type:Number},position:{type:Object,default:Object},type:{type:String,default:"circle"},shape:{type:String,default:""}},computed:{baseLength(){return("circle"===this.type?10:6)/this.scale}}},r=a,o=(i("53ae"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"67a781eb",null);e["a"]=l.exports},ce97:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"render-aiclear",attrs:{id:"aiclearcontent"}},[s("div",{staticClass:"aiclear-img",style:{width:t.width+"px",height:t.height+"px",backgroundImage:"url("+t.oimg+")"}},[s("div",{staticClass:"clears-text"},[t._v("优化前")]),s("div",{staticClass:"flex flex-end item-center"},[s("div",{staticClass:"aiclear-img2 flex flex-start ",style:{width:t.width2+"px",height:t.height+"px",backgroundImage:"url("+t.cimg+")"}},[s("div",{staticClass:"aiclear-slide",style:{height:t.height+"px"}},[s("img",{staticClass:"aiclear-slide-img",style:{top:2*t.height/3+"px"},attrs:{src:i("17dc"),id:"aiclearSlide"}})]),s("div",{staticClass:"clears-text"},[t._v("优化后")])])])])])},n=[],a={props:["oImg","cImg"],data(){return{oimg:this.oImg,cimg:this.cImg,width:0,height:0,width2:0}},watch:{oimg(t){this.oImg=t},cimg(t){this.cImg=t}},mounted(){this.initOimg(),this.init()},methods:{init(){let t=document.getElementById("aiclearcontent"),e=document.getElementById("aiclearSlide");e.onmousedown=e=>{let i=e.clientX,s=this.width2;t.onmousemove=t=>{let e=t.clientX-i;return this.width2=s-e,!1},t.onmouseup=e=>{t.onmousemove=null,t.onmouseup=null}}},initOimg(){const t=new Image;t.src=this.oimg,t.onload=()=>{this.width=t.width,this.height=t.height,this.width2=t.width/2}}}},r=a,o=(i("c91b"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,null,null);e["default"]=l.exports},cea1:function(t,e,i){"use strict";var s=i("4a68"),n=i.n(s);n.a},cf2e:function(t,e,i){},cfb5:function(t,e,i){t.exports=i.p+"editor-assets/img/del-d2.bd3ec9ca.svg"},d026:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"foreground-background-picker-wrap"},[i("div",{staticClass:"color-fills color-fills-container flex-wrap flex flex-between items-center mt-16"},t._l(t.curDesign.fills,(function(e,s){return i("b-pallet",{key:s,staticStyle:{width:"90px"},attrs:{cmyk:"","history-colors":[],"optional-colors":t.optionalColors},on:{confirm:function(e){return t.onPickerChange(s,e.rgba,e.cmyk)}},model:{value:e.color,callback:function(i){t.$set(e,"color",i)},expression:"fill.color"}})})),1)])},n=[],a=i("5530"),r=i("5880"),o={props:{optionalColors:{required:!1,type:Array,default:()=>[]}},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["element_craft_list"])),Object(r["mapGetters"])("editor-v2",["curDesign"])),methods:{onPickerChange(t,e){this.curDesign.fills[t].color=e}}},l=o,c=(i("1cbd"),i("518c"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,"d62a273e",null);e["default"]=h.exports},d03e:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.load?i("div",{directives:[{name:"show",rawName:"v-show",value:t.renderOldVisible,expression:"renderOldVisible"}],staticClass:"rendererd"},[i("render-header",{ref:"header",attrs:{width:t.width,"open-history":t.openHistory},on:{close:function(e){return t.$store.dispatch("render/saveRenderOldVisible",!1)},"change-page":t.changePage,"update-success":t.updateSuccess,save:function(e){return t.projectRenderConfigFetch("post")},rollback:t.rollback,recovery:t.recovery,"change-current":t.changeCurrent}}),i("div",{staticClass:"flex flex-start"},[i("smenu",{directives:[{name:"show",rawName:"v-show",value:0===t.page&&"image"===t.renderType,expression:"page === 0 && renderType === 'image'"}],ref:"menu",attrs:{height:t.height-56},model:{value:t.menuCurrent,callback:function(e){t.menuCurrent=e},expression:"menuCurrent"}}),i("left",{ref:"left",attrs:{height:t.height-56,menu:t.menuCurrent,visible:t.visible},on:{"upload-img":t.uploadImg,"position-change":t.positionChange,list:t.changeList,"render-list":t.changeRenderList,preview:t.previewChange,shadowChange:t.shadowChange,"render-count":t.renderCount,"attch-history":t.attachToHistory,"tp-change":t.tpChange,"set-tp-mode":t.setTpMode}}),i("mode",{directives:[{name:"show",rawName:"v-show",value:0===t.page&&"image"===t.renderType,expression:"page === 0 && renderType === 'image'"}],ref:"mode",attrs:{height:t.height-56,width:t.width-256-56,ratio:t.ratio,bg:t.backgroundImg},on:{"camera-change":t.cameraChange,"init-success":t.projectRenderConfigFetch,"attch-history":t.attachToHistory,rollback:t.rollback,recovery:t.recovery,"ratio-change":t.ratioChange,"change-size":t.changeSize,"change-result-animate":t.changeResultAnimate,"change-task":t.changeTask}}),i("video-mode",{directives:[{name:"show",rawName:"v-show",value:"video"===t.renderType&&0===t.page&&-1===t.videoFlag,expression:"renderType === 'video' && page === 0 && videoFlag === -1"}],attrs:{height:t.height-56,width:t.width-256}}),i("video-preview",{directives:[{name:"show",rawName:"v-show",value:"video"===t.renderType&&0===t.page&&t.videoFlag>-1,expression:"renderType === 'video' && page === 0 && videoFlag > -1"}],attrs:{height:t.height-56,width:t.width-256}}),i("preview",{directives:[{name:"show",rawName:"v-show",value:1===t.page,expression:"page === 1"}],ref:"preview",attrs:{height:t.height-56,width:t.width-256-(0===t.page&&"image"===t.renderType?56:0)},on:{"page-change":t.previewPageChange,currentChange:t.currentChange,getList:t.doGetList,"update-success":t.updateSuccess,"apllicate-scene":t.apllicateScene,"attch-history":t.attachToHistory}})],1)],1):t._e()},n=[],a=(i("2ca0"),i("5530")),r=i("5880"),o=i("1781"),l=i("4582"),c=i("c5fd"),h=i("a24e"),d=i("ee02"),u=i("debd"),p=i("66be"),f=i("365c"),m={components:{renderHeader:o["default"],left:l["default"],mode:c["default"],preview:h["default"],smenu:d["default"],videoMode:u["default"],videoPreview:p["default"]},data(){return{openHistory:!0,width:window.innerWidth,height:window.innerHeight,ratio:"16:9",visible:this.renderOldVisible,backgroundImg:"",load:!1,intv:!1,originConfig:"",maskLoading:null,menuCurrent:0}},computed:Object(a["a"])({},Object(r["mapGetters"])("render",["getLastHistory","getLastRecovery","renderType","renderOldVisible","videoFlag","page"])),mounted(){this.resize(),this.$bus.$on("sunLightChange",t=>{this.lightPositionChange(t)}),this.$bus.$on("sunHeightChange",t=>{this.lightHeightChange(t.y),this.lightPositionChange(t)}),this.$bus.$on("sunLightPowerChange",t=>{this.lightPowerChange(t)}),this.$bus.$on("sunLightShadowChange",t=>{this.shadowChange(t)}),this.$bus.$on("setLightIntoMode",()=>{this.addLightTmpIntoMode()}),this.$bus.$on("chooseLightMode",t=>{this.chooseLightMode(t,!0)}),this.$bus.$on("attachToHistory",()=>{this.attachToHistory()})},beforeDestroy(){clearInterval(this.intv),this.$bus.$off("sunLightChange"),this.$bus.$off("sunHeightChange"),this.$bus.$off("sunLightPowerChange"),this.$bus.$off("sunLightShadowChange"),this.$bus.$off("setLightIntoMode"),this.$bus.$off("chooseLightMode"),this.$bus.$off("attachToHistory"),this.$store.dispatch("render/clear"),window.removeEventListener("resize",this._handeResize)},watch:{renderOldVisible(t){this.visible=t,t&&!this.load&&(this.load=!0),t?this.autoSave():clearInterval(this.intv)}},methods:Object(a["a"])(Object(a["a"])({},Object(r["mapMutations"])("render",["pushHistory","popHistory","popRecovery","pushRecovery","clearRecovery","clearHistory"])),{},{async addLightTmpIntoMode(){Object(f["addRenderTemp"])({params:await this.$refs.mode.getAllParams(!1),template_type:"shine",publish_type:"my",title:"未命名的模版"}).then(t=>{200==t.code&&(this.$message.success("设置成功"),this.$bus.$emit("finishAddTmp"))})},changeTask(t){this.$refs.left.tpLoading=!1,this.$refs.left.tmpTaskId=t,setTimeout(this.maskLoading,1)},setTpMode(){this.$refs.left.tpList2.length>=10?this.$message.warning("我的快搭模板最多为10个"):this.$confirm({title:"确定将当前场景设为你的快搭模板？",okText:"确定",okType:"danger",cancelText:"取消",centered:!0,zIndex:4005,onOk:()=>{this.$refs.left.tpLoading=!0,this.maskLoading=this.$message.loading("正在生成快搭模板...",0),this.$refs.mode.screenshot(!0,!1)}})},changeResultAnimate(){this.$refs.header.doResultAnimate()},changePage(t){this.$store.dispatch("render/savePage",t),this.$refs.preview.doRead()},tpChange(t){this.attachToHistory(),this.apllicateScene(JSON.stringify(t.d3_params)),this.$message.success("快搭模板应用成功")},rollback(){if(!this.openHistory)return;this.clearRecovery(),this.pushRecovery(this.originConfig);const t=this.getLastHistory;this.apllicateScene(t),this.originConfig=t,this.popHistory()},recovery(){if(!this.openHistory)return;this.clearHistory(),this.popHistory(this.originConfig);const t=this.getLastRecovery;this.apllicateScene(t),this.originConfig=t,this.popRecovery()},async attachToHistory(t){this.openHistory&&(this.pushHistory(this.originConfig),this.originConfig=JSON.stringify(await this.$refs.mode.getAllParams(!1)))},autoSave(){this.intv=setInterval(()=>{this.projectRenderConfigFetch("post",!0)},18e4)},async projectRenderConfigFetch(t="get",e=!1){let i={project_id:this.$root.projectData.id};this.$refs.header.updateLoading=!0,"post"===t&&(this.$refs.header.doSave(e,!0),i.config=await this.$refs.mode.getAllParams(!0));const s=await Object(f["projectRenderConfig"])(i);"post"===t&&this.$refs.header.doSave(e,!1),200==s.code&&"get"===t&&s.data&&s.data.config&&this.apllicateScene(JSON.stringify(s.data.config),this.openHistory),this.$refs.header.updateLoading=!1},chooseLightMode(t,e){e&&this.attachToHistory(),this.lightColorChange(t.light.color),this.$refs.mode.setLightHeightValue(t.light.position.y),this.lightHeightChange(t.light.position.y),this.$bus.$emit("initSunLightPowerChange",t.light.intensity),this.lightPowerChange(t.light.intensity),this.$refs.mode.setLightValue({x:t.light.position.x,z:t.light.position.z}),this.$bus.$emit("initLightPosition",t.light.position),this.$bus.$emit("initLightVisible",t.light.visible),this.$refs.mode.lightPositionChange({x:t.light.position.x,z:t.light.position.z}),t.envLight&&(this.$refs.mode.setEnvLight(t.envLight),this.$bus.$emit("initEnvLight",t.envLight)),t.lights&&this.$refs.mode.initSceneLights(t.lights),this.$refs.mode.doRender()},async apllicateScene(t,e=!1){if(t){const i=JSON.parse(t);i.scene.backgroundUrl&&(this.$refs.mode.uploadImageUrl=i.scene.backgroundUrl);let s=i.scene.background;if(this.$refs.left.bgFlag=i.scene.transparent?0:i.scene.background.startsWith("rgba")?1:2,i.scene.background.startsWith("rgba"))this.$refs.left.color=i.scene.background;else if(i.scene.backgroundUrl){const t=await this.getBase64(i.scene.backgroundUrl);this.$refs.left.background=t,s=t}this.uploadImg({transparent:i.scene.transparent,bg:s}),this.$bus.$emit("sunLightShadowInit",i.scene.shadow.radio),this.shadowChange(i.scene.shadow.radio),this.$refs.mode.setRatio(i.scene.ratio,!1),this.cameraChange(i.scene.camera),this.modeCameraChange(i.scene.camera),this.previewPageChange(0),this.$refs.mode.setGroups(i.scene.groups),this.chooseLightMode({light:i.scene.light,lights:i.scene.lights,envLight:i.scene.envLight}),e&&(this.originConfig=t)}},getBase64(t){function e(t,e,i){var s=document.createElement("canvas");s.width=e||t.width,s.height=i||t.height;var n=s.getContext("2d");n.drawImage(t,0,0,s.width,s.height);var a=s.toDataURL();return a}var i=new Image;return i.crossOrigin="",i.src=t,new Promise(t=>{i.onload=function(){t(e(i))}})},renderCount(t){this.$refs.header.renderCount=t},lightPositionChange(t){this.$refs.mode.light.position.x=t.x,this.$refs.mode.light.position.z=t.z,this.$refs.mode.light.lookAt(0,0,0),this.$refs.mode.doRender()},shadowChange(t){this.$refs.mode.changeShadow(t)},lightColorChange(t){this.$refs.mode.lightColor=t,this.$refs.mode.changeLightColor()},lightHeightChange(t){this.$refs.mode.light.position.y=t,this.$refs.mode.light.lookAt(0,0,0),this.$refs.mode.doRender()},lightPowerChange(t){this.$refs.mode.light.intensity=t,this.$refs.mode.doRender()},previewPageChange(t){this.$store.dispatch("render/savePage",t)},ratioChange(t){this.ratio=t.w+":"+t.h},changeSize(t){this.$refs.mode.size=t},resize(){window.addEventListener("resize",this._handeResize)},_handeResize(){window.innerWidth>window.innerHeight-56+256&&(this.height=window.innerHeight,this.width=window.innerWidth)},async uploadImg(t){if(t.bg.startsWith("http")){const e=await this.getBase64(t.bg);t.bg=e}this.backgroundImg=JSON.stringify(t)},cameraChange(t){this.$refs.left.setPosition(Math.round(100*t.position.x)/100,Math.round(100*t.position.y)/100,Math.round(100*t.position.z)/100)},modeCameraChange(t){this.$refs.mode.camera.position.set(t.position.x,t.position.y,t.position.z),this.$refs.mode.camera.lookAt(0,0,0)},positionChange(t){this.$refs.mode.setCameraPosition(t.x,t.y,t.z)},changeList(t){this.$refs.preview.setList(t.list),this.$refs.preview.setCount(t.count),this.$refs.header.list=t.list},changeRenderList(t){this.$refs.header.renderList=t},previewChange(t){var e,i;this.$refs.preview.clearLoad?this.$refs.left.listFlag=this.$refs.preview.current:(this.$refs.header.tempName=(null===(e=this.$refs.preview.list[t])||void 0===e?void 0:e.filename)||"",this.$refs.header.tempId=(null===(i=this.$refs.preview.list[t])||void 0===i?void 0:i.id)||"",this.$refs.preview.setCurrent(t))},changeCurrent(t){this.currentChange(t),this.$refs.preview.setCurrent(t)},currentChange(t){var e,i;this.$refs.left.listFlag=t,this.$refs.header.tempName=(null===(e=this.$refs.preview.list[t])||void 0===e?void 0:e.filename)||"",this.$refs.header.tempId=(null===(i=this.$refs.preview.list[t])||void 0===i?void 0:i.id)||""},doGetList(t){this.$refs.left.getList(1)},updateSuccess(t){t.name&&(this.$refs.left.list[this.$refs.left.listFlag].filename=t.name,this.$refs.preview.list[this.$refs.preview.current]&&(this.$refs.preview.list[this.$refs.preview.current].filename=t.name)),t.image&&(this.$refs.left.list[this.$refs.left.listFlag].image=t.image,this.$refs.preview.list[this.$refs.preview.current]&&(this.$refs.preview.list[this.$refs.preview.current].image=t.image))}})},g=m,v=(i("6428"),i("2877")),b=Object(v["a"])(g,s,n,!1,null,null,null);e["default"]=b.exports},d10b:function(t,e,i){},d151:function(t,e,i){t.exports=i.p+"editor-assets/img/image.23cde44e.svg"},d168:function(t,e,i){t.exports=i.p+"editor-assets/img/qr-none.5d5d1af1.svg"},d17d:function(t,e,i){},d1cf:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));i("b680"),i("1276"),i("ddb0");class s{constructor(t,e,i,s,n={}){this.origin_limit_L=t,this.origin_limit_W=e,this.origin_limit_H=i,this.origin_df_size=s,this.knife=n;const a=this.getLimits();this.limit_l=a.l,this.limit_w=a.w,this.limit_h=a.h,this.df_size=this.getDefaultSizes()}setDepths(t,e,i){this.d=t,this.id=e,this.ed=i}getLimits(t){let e=this.origin_limit_L.split(","),i=this.origin_limit_W.split(","),s=this.origin_limit_H.split(",");if("ed"===t){const t=this.knife.getOutSizeAdd,n=this.filterSize(t,e[0],i[0],s[0]),a=this.filterSize(t,e[1],i[1],s[1]);e=[n.l,a.l],i=[n.w,a.w],s=[n.h,a.h]}else if("dm"===t){const t=this.knife.getKnifeSizeAdd,n=this.filterSize(t,e[0],i[0],s[0]),a=this.filterSize(t,e[1],i[1],s[1]);e=[n.l,a.l],i=[n.w,a.w],s=[n.h,a.h]}return{l:e,w:i,h:s}}getDefaultSizeIndex(t){return JSON.parse(this.origin_df_size)[t]}getDefaultSizes(t){const e=this.origin_df_size?JSON.parse(this.origin_df_size):[];let i=[];if("id"===t)i=e;else if("ed"===t){const t=this.knife.getOutSizeAdd;for(const s of e){const e=this.filterSize(t,s.length,s.width,s.height);i.push({length:e.l,width:e.w,height:e.h})}}else if("dm"===t){const t=this.knife.getKnifeSizeAdd;for(const s of e){const e=this.filterSize(t,s.length,s.width,s.height);i.push({length:e.l,width:e.w,height:e.h})}}return i}getSize(t,e,i,s,n){let a,r,o=0;if("id"===s&&"ed"===n){const s=this.knife.getOutSizeAdd,n=this.filterSize(s,t,e,i);a=n.l,r=n.w,o=n.h}else if("id"===s&&"dm"===n){const s=this.knife.getKnifeSizeAdd,n=this.filterSize(s,t,e,i);a=n.l,r=n.w,o=n.h}else if("ed"===s&&"id"===n){const s=this.knife.getOutSizeAdd,n=this.filterSize(s,t,e,i,-1);a=n.l,r=n.w,o=n.h}else if("dm"===s&&"id"===n){const s=this.knife.getKnifeSizeAdd,n=this.filterSize(s,t,e,i,-1);a=n.l,r=n.w,o=n.h}else if("ed"===s&&"dm"===n){const s=this.knife.getOutSizeAdd,n=this.filterSize(s,t,e,i,-1),l=this.knife.getKnifeSizeAdd,c=this.filterSize(l,n.l,n.w,n.h);a=c.l,r=c.w,o=c.h}else if("dm"===s&&"ed"===n){const s=this.knife.getKnifeSizeAdd,n=this.filterSize(s,t,e,i,-1),l=this.knife.getOutSizeAdd,c=this.filterSize(l,n.l,n.w,n.h);a=c.l,r=c.w,o=c.h}else"id"===s&&"id"===n&&(a=parseInt(t),r=parseInt(e),o=parseInt(i));return JSON.stringify({length:a,width:r,height:o})}toNumber(t){return"number"===typeof t?t:Number(t)}float(t,e=1){return Number(this.toNumber(t).toFixed(e))}filterSize(t,e=Number,i=Number,s=Number,n=1){let a=this.float(e),r=this.float(i),o=this.float(s);return t.L.d&&(a+=this.float(this.d*t.L.d)*n),t.L.id&&(a+=this.float(this.id*t.L.id)*n),t.L.ed&&(a+=this.float(this.ed*t.L.ed)*n),a=this.float(a),t.W.d&&(r+=this.float(this.d*t.W.d)*n),t.W.id&&(r+=this.float(this.id*t.W.id)*n),t.W.ed&&(r+=this.float(this.ed*t.W.ed)*n),r=this.float(r),t.H.d&&(o+=this.float(this.d*t.H.d)*n),t.H.id&&(o+=this.float(this.id*t.H.id)*n),t.H.ed&&(o+=this.float(this.ed*t.H.ed)*n),o=this.float(o),{l:a,w:r,h:o}}}},d1df:function(t,e,i){"use strict";var s=i("5012"),n=i.n(s);n.a},d1fb:function(t,e,i){"use strict";var s=i("e0fa"),n=i.n(s);n.a},d214:function(t,e,i){"use strict";i.r(e);i("1276");var s=i("750b"),n=i("4bc5"),a=i.n(n),r=i("56b3"),o=i.n(r),l=i("22b0"),c=i.n(l);i("8932");const h="MY_DESIGNER_HOME_TIP";e["default"]=Object(s["b"])({setup(t,e){const i=Object(s["j"])("0,0"),n=Object(s["a"])(()=>i.value.split(",").map(t=>~~t)),r=e.vuex.mapState("profile",["user"]),l=e.vuex.mapGetters("profile",["isMch","isAdmin","isMchAdmin"]),d=Object(s["j"])(localStorage.getItem(h)),u=[{subtitle:"",subs:[{title:"首页",icon:a.a,url:"/",required:()=>!l.isMch.value,name:"home"},{title:"模板中心",icon:c.a,url:"/templates",name:"templates"},{title:"盒型库",icon:o.a,url:"/models",name:"models",suffix:()=>Object(s["c"])("span",{class:"free-tag ml-6 mt-2"},["免费"])}]},{subtitle:"我的",subs:[{title:"设计方案",url:"/mydesign",name:"mydesign"},{title:"账号设置",url:"/personalcenter",name:"personalcenter"},{title:"订单与发票",url:"/orders",name:"orders"},{title:"我的投稿",url:"/contribute",name:"contribute",external:!0},{title:"我的主页",url:()=>r.user.value.homepageUniqueName?"/designer/profile":"/designer/new",name:"designer-profile",external:"blank",tip:!0}]},{subtitle:"商家",subs:[{title:"首页",icon:o.a,url:"/mch/home"},{title:"模板方案管理",icon:c.a,url:"/mch/templates"},{title:"基本设置",icon:o.a,url:"/mch/settings"}],required:()=>l.isMchAdmin.value}];Object(s["k"])(()=>e.root.$route.name,()=>{let t=!1;u.forEach((s,n)=>{s.subs.forEach((s,a)=>{~e.root.$route.name.indexOf(s.name)&&(t=!0,i.value=`${n},${a}`)})}),t||(i.value="")});const p=Object(s["a"])(()=>d.value?"":"small-tip");return()=>Object(s["c"])("div",{class:"slider-menu"},[u.map((t,i)=>{var a,r;return Object(s["c"])("div",{class:"silder-item",key:i},[!t.subtitle||t.required&&!(null===(a=t.required)||void 0===a?void 0:a.call(t))?"":Object(s["c"])("div",{class:"sub-title pl-30 mt-30"},[t.subtitle]),Object(s["c"])("ul",{class:"menu-list"},[(!t.required||(null===(r=t.required)||void 0===r?void 0:r.call(t)))&&t.subs.map((t,a)=>{var r,o;return(!t.required||(null===(r=t.required)||void 0===r?void 0:r.call(t)))&&Object(s["c"])("li",{on:{click:()=>{const i="function"===typeof t.url?t.url():t.url;t.tip&&(localStorage.setItem(h,"true"),d.value="true"),"blank"===t.external?window.open(i):t.external?window.location.href=i:e.router.push({path:i})}},class:`flex item-center pl-30 ${n.value[0]===i&&n.value[1]===a?"active":""} ${t.tip?p.value:""}`,key:a},[t.icon?Object(s["c"])("img",{class:"mr-6",attrs:{src:t.icon}}):"",t.title,null===(o=t.suffix)||void 0===o?void 0:o.call(t)])})])])})])}})},d239:function(t,e,i){"use strict";i.r(e);i("ddb0");var s=i("5530"),n=i("750b"),a=i("3ccf"),r=i("bab4"),o=i("b3ba"),l=i("365c"),c=i("ed08");i("3e65");e["default"]=Object(n["b"])({setup(t,e){const{data:i,loading:h}=Object(a["c"])(l["getCates"]),d=e.vuex.mapState(["queries"]),u=e.vuex.mapState("layout",["width"]),p=Object(n["j"])({current:1,pageSize:40,cateTop:"",keywords:""}),{data:f,loading:m,refetch:g}=Object(a["c"])(l["getBlanks"],{variables:p.value},{lazy:!0}),v=Object(n["j"])([]),b=t=>v.value.find(e=>e.id===t);Object(n["k"])([()=>d.queries.value,()=>v.value],()=>{var t;if(null===(t=v.value)||void 0===t?void 0:t.length){const{k:t="",cateTop:e}=d.queries.value;let i="模板中心 - 在线包装设计模板方案_3D样机渲染效果_印刷打样 - 包小盒",n="包装模板,包装样机,设计模板,在线设计模板",a="包小盒包装盒型/模型库，为您提供海量包装样机，在线即可完成包装结构设计、3D渲染。";const[r]=Object(c["x"])(e);if(r){const t=b(r).name;i=`${t}模型库-3D${t}包装样机_${t}结构设计_包小盒`,n=`${t}模型，${t}包装样机，${t}结构设计`,a=`包小盒包装盒型/模型库，为您提供海量${t}包装样机，在线即可完成${t}包装结构设计、3D渲染。`}Object(c["C"])(i,n,a),p.value=Object(s["a"])(Object(s["a"])({},p.value),{},{keywords:"all"===t?"":t,current:1,cateTop:r})}}),Object(n["k"])(()=>i.value,()=>{var t;v.value=(null===(t=i.value)||void 0===t?void 0:t.data.map(t=>Object(s["a"])(Object(s["a"])({},t),{},{active:!1,children:t.children.map(t=>Object(s["a"])(Object(s["a"])({},t),{},{active:!1}))})))||[]},{lazy:!0});const y=Object(n["a"])(()=>{var t;return(null===(t=f.value)||void 0===t?void 0:t.data.map(t=>{var e;return Object(s["a"])(Object(s["a"])({},t),{},{title:null===(e=t.cate_info)||void 0===e?void 0:e.name,knife_image:t.knife})}))||[]}),_=Object(n["a"])(()=>{var t;return(null===(t=f.value)||void 0===t?void 0:t.total)||10});return Object(n["k"])(()=>p.value,()=>{g({variables:p.value}),setTimeout(()=>{var t,i;null===(t=e.parent)||void 0===t||null===(i=t.scrollToTop)||void 0===i||i.call(t,300)},300)},{lazy:!0}),()=>Object(n["c"])("div",{class:"modes-container p-40"},[Object(n["c"])("div",{class:"page-title"},["盒型/模型库",Object(n["c"])("div",{class:"noFindText"},[Object(n["c"])("a",{class:"noFind",attrs:{href:"https://www.wenjuan.com/s/u2Y3Arb/#",target:"_blank"}},[Object(n["c"])("i",{class:"iconfont icon-tanhao"}),Object(n["c"])("span",["找不到盒型"])])])]),Object(n["c"])(r["default"],{attrs:{list:v.value||[],loading:h.value,hideChildren:!0},on:{change:t=>{const[i]=t,s=i?"c"+Object(c["w"])(i):"";e.router.push({path:`/models/${p.value.keywords||"all"}/${s||"all"}`})}}}),Object(n["c"])(o["default"],{attrs:{actionOnLeave:!0,showFree:!0,list:y.value||[],loading:m.value,width:u.width.value}}),y.value.length?Object(n["c"])("div",{class:"bottom"},[Object(n["c"])("a-pagination",{attrs:{"show-quick-jumper":!0,pageSize:p.value.pageSize,current:p.value.current,total:_.value},on:{change:t=>{p.value=Object(s["a"])(Object(s["a"])({},p.value),{},{current:t}),g({variables:p.value})}}})]):"",Object(n["c"])("div",{class:"clearfix"})])}})},d2cf:function(t,e,i){var s=i("6d8b"),n=i("401b"),a=i("cb6d"),r=i("1fab"),o=i("607d"),l=i("0b44"),c="silent";function h(t,e,i){return{type:t,event:i,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:i.zrX,offsetY:i.zrY,gestureEvent:i.gestureEvent,pinchX:i.pinchX,pinchY:i.pinchY,pinchScale:i.pinchScale,wheelDelta:i.zrDelta,zrByTouch:i.zrByTouch,which:i.which,stop:d}}function d(){o.stop(this.event)}function u(){}u.prototype.dispose=function(){};var p=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],f=function(t,e,i,s){r.call(this),this.storage=t,this.painter=e,this.painterRoot=s,i=i||new u,this.proxy=null,this._hovered={},this._lastTouchMoment,this._lastX,this._lastY,this._gestureMgr,a.call(this),this.setHandlerProxy(i)};function m(t,e,i){if(t[t.rectHover?"rectContain":"contain"](e,i)){var s,n=t;while(n){if(n.clipPath&&!n.clipPath.contain(e,i))return!1;n.silent&&(s=!0),n=n.parent}return!s||c}return!1}function g(t,e,i){var s=t.painter;return e<0||e>s.getWidth()||i<0||i>s.getHeight()}f.prototype={constructor:f,setHandlerProxy:function(t){this.proxy&&this.proxy.dispose(),t&&(s.each(p,(function(e){t.on&&t.on(e,this[e],this)}),this),t.handler=this),this.proxy=t},mousemove:function(t){var e=t.zrX,i=t.zrY,s=g(this,e,i),n=this._hovered,a=n.target;a&&!a.__zr&&(n=this.findHover(n.x,n.y),a=n.target);var r=this._hovered=s?{x:e,y:i}:this.findHover(e,i),o=r.target,l=this.proxy;l.setCursor&&l.setCursor(o?o.cursor:"default"),a&&o!==a&&this.dispatchToElement(n,"mouseout",t),this.dispatchToElement(r,"mousemove",t),o&&o!==a&&this.dispatchToElement(r,"mouseover",t)},mouseout:function(t){var e=t.zrEventControl,i=t.zrIsToLocalDOM;"only_globalout"!==e&&this.dispatchToElement(this._hovered,"mouseout",t),"no_globalout"!==e&&!i&&this.trigger("globalout",{type:"globalout",event:t})},resize:function(t){this._hovered={}},dispatch:function(t,e){var i=this[t];i&&i.call(this,e)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,i){t=t||{};var s=t.target;if(!s||!s.silent){var n="on"+e,a=h(e,t,i);while(s)if(s[n]&&(a.cancelBubble=s[n].call(s,a)),s.trigger(e,a),s=s.parent,a.cancelBubble)break;a.cancelBubble||(this.trigger(e,a),this.painter&&this.painter.eachOtherLayer((function(t){"function"===typeof t[n]&&t[n].call(t,a),t.trigger&&t.trigger(e,a)})))}},findHover:function(t,e,i){for(var s=this.storage.getDisplayList(),n={x:t,y:e},a=s.length-1;a>=0;a--){var r;if(s[a]!==i&&!s[a].ignore&&(r=m(s[a],t,e))&&(!n.topTarget&&(n.topTarget=s[a]),r!==c)){n.target=s[a];break}}return n},processGesture:function(t,e){this._gestureMgr||(this._gestureMgr=new l);var i=this._gestureMgr;"start"===e&&i.clear();var s=i.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if("end"===e&&i.clear(),s){var n=s.type;t.gestureEvent=n,this.dispatchToElement({target:s.target},n,s.event)}}},s.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],(function(t){f.prototype[t]=function(e){var i,s,a=e.zrX,r=e.zrY,o=g(this,a,r);if("mouseup"===t&&o||(i=this.findHover(a,r),s=i.target),"mousedown"===t)this._downEl=s,this._downPoint=[e.zrX,e.zrY],this._upEl=s;else if("mouseup"===t)this._upEl=s;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||n.dist(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(i,t,e)}})),s.mixin(f,r),s.mixin(f,a);var v=f;t.exports=v},d30d:function(t,e,i){},d32c:function(t,e,i){"use strict";var s=i("9b70"),n=i.n(s);n.a},d335:function(t,e,i){},d39f:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-modal",{attrs:{centered:"",title:"预约下单",footer:null,visible:t.tvisble,maskClosable:!0,width:720,zIndex:4e3},on:{cancel:function(e){t.tvisble=!1}}},[i("div",{staticClass:"editor-appointment-proofing flex flex-between item-center"},[i("div",{staticClass:"editor-appointment-proofing__left"},[i("div",{staticClass:"fo-14 fo-gray"},[t._v("提交预约信息，方便专属客服与您联系")]),i("a-form",{staticClass:"mt-16",attrs:{form:t.formData,"label-col":{span:4},"wrapper-col":{span:20}}},[i("a-form-item",{attrs:{label:"联系手机"}},[i("a-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入手机号"},model:{value:t.formData.phone_number,callback:function(e){t.$set(t.formData,"phone_number",e)},expression:"formData.phone_number"}})],1),i("a-form-item",{attrs:{label:"预约时间"}},[i("a-radio-group",{model:{value:t.formData.appint_type,callback:function(e){t.$set(t.formData,"appint_type",e)},expression:"formData.appint_type"}},[i("a-radio",{staticStyle:{display:"block"},attrs:{value:1}},[t._v("尽快联系")]),i("a-radio",{staticClass:"mt-12",staticStyle:{display:"block"},attrs:{value:2}},[t._v("自定义时间")])],1),i("br"),i("a-date-picker",{staticClass:"w-100",attrs:{"show-time":"",placeholder:"0000/00/00 00:00",disabled:1===t.formData.appint_type},on:{ok:t.timeOnOk},model:{value:t.timePicker,callback:function(e){t.timePicker=e},expression:"timePicker"}})],1),i("a-form-item",{attrs:{label:"留言要求"}},[i("a-textarea",{attrs:{placeholder:"请留言",rows:4},model:{value:t.formData.msg,callback:function(e){t.$set(t.formData,"msg",e)},expression:"formData.msg"}})],1),i("a-form-item",{attrs:{"wrapper-col":{span:12,offset:4}}},[i("a-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.submit}},[t._v("提交预约")])],1)],1)],1),i("div",{staticClass:"editor-appointment-proofing__right flex flex-center item-center"},[i("div",{staticClass:"text-center"},[i("img",{staticClass:"wxqrcode",attrs:{src:"/static/img/wx.png"}}),i("div",{staticClass:"fo-14 mt-12"},[t._v("微信扫码咨询您的专属客服")])])])])])],1)},n=[],a={props:["visible"],model:{prop:"visible",event:"change"},data(){return{timePicker:null,tvisble:this.visible,formData:{phone_number:"",appint_type:1,appint_time:"",msg:""},loading:!1}},watch:{visible(t){this.tvisble=t},tvisble(t){this.$emit("change",t)}},methods:{timeOnOk(t){this.formData.appint_time=new Date(t._d).getTime()},submit(){return this.formData.phone_number?2!==this.formData.appint_type||this.formData.appint_time?(this.formData.project_id=this.$route.query.id,this.loading=!0,void this.$api.appointment.add(this.formData).then(t=>{this.loading=!1,t&&(this.$message.success(t.errmsg),this.tvisble=!1)})):this.$message.error="请选择预约时间":this.$message.error="请输入手机号"}}},r=a,o=(i("46e9"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,null,null);e["default"]=l.exports},d3a4:function(t,e,i){var s,n=i("22d1"),a="urn:schemas-microsoft-com:vml",r="undefined"===typeof window?null:window,o=!1,l=r&&r.document;function c(t){return s(t)}if(l&&!n.canvasSupported)try{!l.namespaces.zrvml&&l.namespaces.add("zrvml",a),s=function(t){return l.createElement("<zrvml:"+t+' class="zrvml">')}}catch(d){s=function(t){return l.createElement("<"+t+' xmlns="'+a+'" class="zrvml">')}}function h(){if(!o&&l){o=!0;var t=l.styleSheets;t.length<31?l.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):t[0].addRule(".zrvml","behavior:url(#default#VML)")}}e.doc=l,e.createNode=c,e.initVML=h},d43b:function(t,e,i){"use strict";var s=i("f4ac"),n=i.n(s);n.a},d43c:function(t,e,i){"use strict";const s="37ef9b97817c50947044ccef1be3b660decaf4c6548a4fb473d372514c8284f0bc109767d5138e1ba7c0f4aa23360c6449ab511c",n="37ef9b97802353cf2b1796eb1ce1b7677330e5aad2fec58f8285700265c2bc395b7658fbe5d6a7290feb2c5a4b99e71a9c61ffce";i("25f0"),i("ddb0"),i("2b3d");const a="chat_sdk",r=".main-chat";function o(t){const e=document.querySelector(t);e&&document.body.removeChild(e)}function l(t,e){const i=document.createElement("script");i.src=t,i.id=e,document.body.appendChild(i)}function c(){const t=document.querySelector(r);t&&t.remove()}const h={sign:"37ef9b97817c50947044ccef1be3b660decaf4c6548a4fb473d372514c8284f0bc109767d5138e1ba7c0f4aa23360c6449ab511c",uid:"",data:{c1:"",c2:"",c3:"",c4:"",c5:""},selector:".zhiCustomBtn"};function d(t=h,e){c(),o("#"+a),l("https://yzf.qq.com/xv/web/static/chat_sdk/yzf_chat.min.js",a),setTimeout(()=>{window.yzf&&window.yzf.init(t),"function"===typeof e&&e(window.yzf)},2e3)}function u(t,e){const i=new URL(t);return i.searchParams.set("sign",e),i.toString()}function p(t,e){const i=t.parentNode,s=t.cloneNode();s.src=e,i.removeChild(t),i.appendChild(s)}function f(t,e){const i=document.querySelector(r+" iframe");if(!i)return!1;let s=i.src;if(!s){if(!e)return!1;s=e}const n=u(s,t);return p(i,n),!0}e["a"]={name:"ChatButton",props:{needInit:{type:Boolean,default:!1},customStyle:{type:[Object,Object],default:()=>({})}},data(){return this.elId="livechat-btn",this.initConfig={sign:s,uid:"",data:{c1:"",c2:"",c3:"",c4:"",c5:""},selector:"#"+this.elId},this.isSdkLoaded=!1,{}},mounted(){this.needInit?this.init():this.useLiveChatPrint()},beforeDestroy(){this.needInit&&this.isSdkLoaded?this.umount():this.useLiveChatCustom()},methods:{init(){"print"!==window.__yzf.type&&d(this.initConfig,t=>{this.isSdkLoaded=!0,window.__yzf.type="print"})},umount(){d(window.__yzf.defaultConfig,t=>{window.__yzf.type="custom"})},useLiveChatPrint(){this.isSdkLoaded=!0;const t=f(s);t||(this.openChatWindow(),window.yzf.close(),setTimeout(()=>{f(s)},300))},useLiveChatCustom(){f(n)},openChatWindow(){const t=this.needInit?this.elId:".zhiCustomBtn",e=document.querySelector(t);e.click();const i=document.querySelector(".main-chat");i.style.bottom="10px",Object.keys(this.customStyle).length?(i.style.left=this.customStyle.left,i.style.right=this.customStyle.right):"/design"===window.location.pathname?(i.style.left="14px",i.style.right=""):(i.style.left="",i.style.right="15px")},handleClick(){this.isSdkLoaded&&(this.openChatWindow(),this.$emit("open"))}},render(){const t=arguments[0];return t("div",{class:"LiveChat"},[t("div",{attrs:{id:this.elId}}),t("div",{on:{click:this.handleClick}},[this.$slots.default])])}}},d43f:function(t,e,i){},d448:function(t,e,i){"use strict";var s=i("2a1e"),n=i.n(s);n.a},d498:function(t,e,i){var s=i("cbe5"),n=i("4fac"),a=s.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){n.buildPath(t,e,!1)}});t.exports=a},d4bd:function(t,e,i){},d4c2:function(t,e,i){t.exports=i.p+"editor-assets/img/help.b03eca0b.svg"},d4c6:function(t,e,i){var s=i("cbe5"),n=s.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var t=this.__dirtyPath,e=this.shape.paths,i=0;i<e.length;i++)t=t||e[i].__dirtyPath;this.__dirtyPath=t,this.__dirty=this.__dirty||t},beforeBrush:function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),i=0;i<t.length;i++)t[i].path||t[i].createPathProxy(),t[i].path.setScale(e[0],e[1],t[i].segmentIgnoreThreshold)},buildPath:function(t,e){for(var i=e.paths||[],s=0;s<i.length;s++)i[s].buildPath(t,i[s].shape,!0)},afterBrush:function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),s.prototype.getBoundingRect.call(this)}});t.exports=n},d4cc:function(t,e,i){"use strict";i.r(e);var s=i("750b");i("d8b6");const n=i("3ee8");e["default"]=Object(s["b"])({props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1}},setup(t){return()=>Object(s["c"])("a-input",{attrs:{value:t.value,disabled:t.disabled,placeholder:t.placeholder},class:"no-selected"},[Object(s["c"])("img",{slot:"suffix",attrs:{src:n},style:{width:"18px",height:"18px"}})])}})},d4dd:function(t,e,i){t.exports=i.p+"editor-assets/img/copy-dark.0dce1d49.svg"},d4f0:function(t,e,i){},d4f2:function(t,e,i){"use strict";var s=i("4eb4"),n=i.n(s);n.a},d51b:function(t,e){var i=function(){this.head=null,this.tail=null,this._len=0},s=i.prototype;s.insert=function(t){var e=new n(t);return this.insertEntry(e),e},s.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},s.remove=function(t){var e=t.prev,i=t.next;e?e.next=i:this.head=i,i?i.prev=e:this.tail=e,t.next=t.prev=null,this._len--},s.len=function(){return this._len},s.clear=function(){this.head=this.tail=null,this._len=0};var n=function(t){this.value=t,this.next,this.prev},a=function(t){this._list=new i,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null},r=a.prototype;r.put=function(t,e){var i=this._list,s=this._map,a=null;if(null==s[t]){var r=i.len(),o=this._lastRemovedEntry;if(r>=this._maxSize&&r>0){var l=i.head;i.remove(l),delete s[l.key],a=l.value,this._lastRemovedEntry=l}o?o.value=e:o=new n(e),o.key=t,i.insertEntry(o),s[t]=o}return a},r.get=function(t){var e=this._map[t],i=this._list;if(null!=e)return e!==i.tail&&(i.remove(e),i.insertEntry(e)),e.value},r.clear=function(){this._list.clear(),this._map={}};var o=a;t.exports=o},d534:function(t,e,i){"use strict";i.r(e);i("ddb0");var s=i("5530"),n=i("750b"),a=i("f160"),r=i("365c"),o=i("3ccf"),l=i("4794"),c=i("b3ba");i("9205");const h=[{type:6,title:"模型"},{type:4,title:"模板"}];e["default"]=Object(n["b"])({setup(t,e){const i=Object(n["j"])(6),d=Object(n["i"])({current:1,pageSize:0}),{data:u,refetch:p}=Object(o["c"])(r["getCollectModes"],{variables:d},{lazy:!0}),f=e.vuex.mapState("layout",["width"]),{data:m,refetch:g}=Object(o["c"])(r["getCollectBlanks"],{variables:d},{lazy:!0});Object(n["k"])(()=>i.value,()=>{d.currentPage=1},{lazy:!0}),Object(n["k"])([...Object.keys(d).map(t=>()=>d[t]),()=>i.value],()=>{let t=p;6===i.value&&(t=g),t({variables:d})},{lazy:!0});const v=Object(n["a"])(()=>6===i.value?m.value:u.value);Object(n["f"])(()=>{const t=document.body.clientWidth-320;d.pageSize=2*Math.floor(t/240)});const b=Object(n["a"])(()=>{var t;return(null===(t=v.value)||void 0===t?void 0:t.data.map(t=>{var e;return Object(s["a"])(Object(s["a"])({},t),{},{title:(null===(e=t.cate_info)||void 0===e?void 0:e.name)||t.title})}))||[]}),y=Object(n["a"])(()=>{var t;return(null===(t=v.value)||void 0===t?void 0:t.count)||10}),_=Object(n["a"])(()=>{var t,e;return 0===(null===(t=v.value)||void 0===t?void 0:t.count)||0===(null===(e=v.value)||void 0===e?void 0:e.total)});return()=>Object(n["c"])("div",{class:"mycollect"},[Object(n["c"])("a-tabs",{attrs:{animated:!1,defaultActiveKey:6},on:{change:t=>{i.value=t}}},[h.map((t,e)=>Object(n["c"])("a-tab-pane",{key:t.type,attrs:{tab:t.title}},[_.value?Object(n["c"])(l["a"]):Object(n["c"])("div",{class:"collect-container"},[Object(n["c"])(c["default"],{attrs:{list:b.value,width:f.width.value,hide3d:!0}}),Object(n["c"])("div",{class:"pagenate float-right"},[Object(n["c"])(a["a"],{on:{change:t=>d.currentPage=t},attrs:{total:y.value}})]),Object(n["c"])("div",{class:"clearfix"})])]))])])}})},d5b7:function(t,e,i){var s=i("de00"),n=i("1fab"),a=i("0cde"),r=i("bd6b"),o=i("6d8b"),l=function(t){a.call(this,t),n.call(this,t),r.call(this,t),this.id=t.id||s()};l.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=e,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){var i=this[t];i||(i=this[t]=[]),i[0]=e[0],i[1]=e[1]}}else this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"===typeof t)this.attrKV(t,e);else if(o.isObject(t))for(var i in t)t.hasOwnProperty(i)&&this.attrKV(i,t[i]);return this.dirty(!1),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),this.clipPath=t,t.__zr=e,t.__clipTarget=this,this.dirty(!1)},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var i=0;i<e.length;i++)t.animation.addAnimator(e[i]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var i=0;i<e.length;i++)t.animation.removeAnimator(e[i]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},o.mixin(l,r),o.mixin(l,a),o.mixin(l,n);var c=l;t.exports=c},d5d6:function(t,e,i){},d628:function(t,e,i){},d68e:function(t,e,i){},d70d:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h4",[t._v("标志")]),s("div",{staticClass:"icon-container"},[s("div",{staticClass:"qr-icon not-in-use",style:{backgroundImage:"url("+i("d168")+")",backgroundSize:"16px"},on:{click:function(e){return t.$emit("useIcon",null)}}}),t._l(t.predefinedIcons,(function(e,i){return s("div",{key:i,staticClass:"qr-icon",class:{"in-use":t.design.qricon===e,"not-in-use":t.design.qricon!=e},style:{backgroundImage:"url("+e+")"},on:{click:function(i){return t.$emit("useIcon",e)}}})})),t._l(t.userIcons,(function(e,i){return s("div",{key:"p"+i,staticClass:"qr-icon",class:{"in-use":t.design.qricon===e.file_path,"not-in-use":t.design.qricon!=e.file_path},style:{backgroundImage:"url("+e.file_path+")"},on:{click:function(i){return t.$emit("useIcon",e.file_path)}}},[s("a-icon",{staticClass:"remove",attrs:{type:"minus-circle",theme:"twoTone","two-tone-color":"#ff0000"},on:{click:function(i){return i.stopPropagation(),t.removeIcon(e)}}})],1)})),s("div",{staticStyle:{display:"inline-block"}},[s("a-upload",{attrs:{showUploadList:!1,name:"file",accept:".svg,.jpg,.jpeg,.png",multiple:!1,data:{type:"image"},action:t.uploadPath,headers:{Authentication:t.accessToken},customRequest:t.customRequest}},[s("div",{staticClass:"qr-icon not-in-use",style:{backgroundImage:"url("+i("ec05")+")",backgroundSize:"16px"},on:{click:t.validateMaxCount}})])],1),t.showError?s("a-alert",{attrs:{type:"error",message:"只能保留"+t.maxCount+"张图片",banner:"",closable:""}}):t._e()],2)])},n=[],a=i("5530"),r=i("054f"),o=i("5333"),l=i("365c"),c=i("c64e"),h=i.n(c),d=i("5880"),u={data(){return{predefinedIcons:["//cdn.baoxiaohe.com/user-materials/f505fd0b-9c41-4a39-8a60-51ad7e70ad70.svg","//cdn.baoxiaohe.com/user-materials/bf9a517f-a909-4800-adb8-fe1a864e5725.svg","//cdn.baoxiaohe.com/user-materials/2798bb16-4739-42cf-8bf9-8aa7cbe942a8.svg","//cdn.baoxiaohe.com/user-materials/09bf557e-722b-4f86-abd5-4354a7ff938e.svg","//cdn.baoxiaohe.com/user-materials/97192144-4ab6-412f-b36a-1c02cdfcbb63.svg","//cdn.baoxiaohe.com/user-materials/f862e137-b542-4519-a8bf-3fd858a853b2.svg","//cdn.baoxiaohe.com/user-materials/5c22e86e-e282-48f6-97fc-54c1771af077.svg","//cdn.baoxiaohe.com/user-materials/120fb8c9-014e-4f48-81dc-dd3b2cb2ce89.svg","//cdn.baoxiaohe.com/user-materials/57324824-3c7d-47b9-8918-f2dd612d5298.svg"],maxCount:5,loading:!1,uploadPath:l["UPLOAD_PATH"],showError:!1}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(d["mapState"])("profile",["accessToken"])),Object(d["mapState"])("property",["QRIcons"])),{},{userIcons(){return this.QRIcons||null}}),props:{design:{type:Object,default:null}},mounted(){this.$store.dispatch("property/fetchQRIcons",!1)},methods:{removeIcon(t){o["a"].fileDel({ids:t.id}).then(()=>{this.$store.dispatch("property/fetchQRIcons",!0)})},validateMaxCount(t){this.userIcons.length>=this.maxCount&&(this.$message.error(`只能保留${this.maxCount}个图片`),this.showError=!0,t.stopPropagation())},async customRequest(t){let e=t.file.name.substring(t.file.name.lastIndexOf(".")+1,t.file.name.length);const i="logo";let s=h()()+"."+e,n=await r["a"].putFile(t.file,{xapi:i,rename:s,type:"user-materials"});0!==n.errno?(this.$message.error(n.errmsg),r["a"].removeStorage()):setTimeout(async()=>{await this.loadData();const t=this.userIcons[0].file_path;this.$emit("useIcon",t)},1e3)}}},p=u,f=(i("b430"),i("2877")),m=Object(f["a"])(p,s,n,!1,null,null,null);e["default"]=m.exports},d782:function(t,e,i){t.exports=i.p+"editor-assets/img/rendering.ee43f6f8.svg"},d7bc:function(t,e,i){},d7c8:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"render-iframe"},[i("iframe",{ref:"iframe",attrs:{id:"modelIFrame",src:t.src,frameborder:"0",width:"100%",height:"100%"}})])},n=[],a=(i("5319"),i("5530")),r=i("5880"),o={data(){return{src:""}},computed:Object(a["a"])({},Object(r["mapState"])("render",["renderType"])),mounted(){let t=window.location.origin;"8080"!==window.location.port&&"3100"!==window.location.port||(t=t.replace(window.location.port,"8000"));const e="image"===this.renderType?"":"/record",i=`${t}/render/console${e}?id=${this.$route.query.id}&isIframe=1`;this.src=i,this.$refs.iframe.onload=()=>{this.$refs.iframe.contentWindow.postMessage("load",i)}},methods:{doClose(){this.$store.dispatch("render/saveRenderVisible",!1)}}},l=o,c=(i("0cf7"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,"51451e8c",null);e["default"]=h.exports},d7ea:function(t,e,i){t.exports=i.p+"editor-assets/img/bgl.057a479a.svg"},d7f7:function(t,e,i){},d833:function(t,e,i){var s=i("20c8"),n=i("9680"),a=i("e7d2"),r=i("68ab"),o=i("9f51"),l=i("857d"),c=l.normalizeRadian,h=i("4a3f"),d=i("8728"),u=s.CMD,p=2*Math.PI,f=1e-4;function m(t,e){return Math.abs(t-e)<f}var g=[-1,-1,-1],v=[-1,-1];function b(){var t=v[0];v[0]=v[1],v[1]=t}function y(t,e,i,s,n,a,r,o,l,c){if(c>e&&c>s&&c>a&&c>o||c<e&&c<s&&c<a&&c<o)return 0;var d=h.cubicRootAt(e,s,a,o,c,g);if(0===d)return 0;for(var u,p,f=0,m=-1,y=0;y<d;y++){var _=g[y],x=0===_||1===_?.5:1,w=h.cubicAt(t,i,n,r,_);w<l||(m<0&&(m=h.cubicExtrema(e,s,a,o,v),v[1]<v[0]&&m>1&&b(),u=h.cubicAt(e,s,a,o,v[0]),m>1&&(p=h.cubicAt(e,s,a,o,v[1]))),2===m?_<v[0]?f+=u<e?x:-x:_<v[1]?f+=p<u?x:-x:f+=o<p?x:-x:_<v[0]?f+=u<e?x:-x:f+=o<u?x:-x)}return f}function _(t,e,i,s,n,a,r,o){if(o>e&&o>s&&o>a||o<e&&o<s&&o<a)return 0;var l=h.quadraticRootAt(e,s,a,o,g);if(0===l)return 0;var c=h.quadraticExtremum(e,s,a);if(c>=0&&c<=1){for(var d=0,u=h.quadraticAt(e,s,a,c),p=0;p<l;p++){var f=0===g[p]||1===g[p]?.5:1,m=h.quadraticAt(t,i,n,g[p]);m<r||(g[p]<c?d+=u<e?f:-f:d+=a<u?f:-f)}return d}f=0===g[0]||1===g[0]?.5:1,m=h.quadraticAt(t,i,n,g[0]);return m<r?0:a<e?f:-f}function x(t,e,i,s,n,a,r,o){if(o-=e,o>i||o<-i)return 0;var l=Math.sqrt(i*i-o*o);g[0]=-l,g[1]=l;var h=Math.abs(s-n);if(h<1e-4)return 0;if(h%p<1e-4){s=0,n=p;var d=a?1:-1;return r>=g[0]+t&&r<=g[1]+t?d:0}if(a){l=s;s=c(n),n=c(l)}else s=c(s),n=c(n);s>n&&(n+=p);for(var u=0,f=0;f<2;f++){var m=g[f];if(m+t>r){var v=Math.atan2(o,m);d=a?1:-1;v<0&&(v=p+v),(v>=s&&v<=n||v+p>=s&&v+p<=n)&&(v>Math.PI/2&&v<1.5*Math.PI&&(d=-d),u+=d)}}return u}function w(t,e,i,s,l){for(var c=0,h=0,p=0,f=0,g=0,v=0;v<t.length;){var b=t[v++];switch(b===u.M&&v>1&&(i||(c+=d(h,p,f,g,s,l))),1===v&&(h=t[v],p=t[v+1],f=h,g=p),b){case u.M:f=t[v++],g=t[v++],h=f,p=g;break;case u.L:if(i){if(n.containStroke(h,p,t[v],t[v+1],e,s,l))return!0}else c+=d(h,p,t[v],t[v+1],s,l)||0;h=t[v++],p=t[v++];break;case u.C:if(i){if(a.containStroke(h,p,t[v++],t[v++],t[v++],t[v++],t[v],t[v+1],e,s,l))return!0}else c+=y(h,p,t[v++],t[v++],t[v++],t[v++],t[v],t[v+1],s,l)||0;h=t[v++],p=t[v++];break;case u.Q:if(i){if(r.containStroke(h,p,t[v++],t[v++],t[v],t[v+1],e,s,l))return!0}else c+=_(h,p,t[v++],t[v++],t[v],t[v+1],s,l)||0;h=t[v++],p=t[v++];break;case u.A:var w=t[v++],C=t[v++],k=t[v++],S=t[v++],A=t[v++],O=t[v++];v+=1;var j=1-t[v++],M=Math.cos(A)*k+w,I=Math.sin(A)*S+C;v>1?c+=d(h,p,M,I,s,l):(f=M,g=I);var T=(s-w)*S/k+w;if(i){if(o.containStroke(w,C,S,A,A+O,j,e,T,l))return!0}else c+=x(w,C,S,A,A+O,j,T,l);h=Math.cos(A+O)*k+w,p=Math.sin(A+O)*S+C;break;case u.R:f=h=t[v++],g=p=t[v++];var E=t[v++],D=t[v++];M=f+E,I=g+D;if(i){if(n.containStroke(f,g,M,g,e,s,l)||n.containStroke(M,g,M,I,e,s,l)||n.containStroke(M,I,f,I,e,s,l)||n.containStroke(f,I,f,g,e,s,l))return!0}else c+=d(M,g,M,I,s,l),c+=d(f,I,f,g,s,l);break;case u.Z:if(i){if(n.containStroke(h,p,f,g,e,s,l))return!0}else c+=d(h,p,f,g,s,l);h=f,p=g;break}}return i||m(p,g)||(c+=d(h,p,f,g,s,l)||0),0!==c}function C(t,e,i){return w(t,0,!1,e,i)}function k(t,e,i,s){return w(t,e,!0,i,s)}e.contain=C,e.containStroke=k},d849:function(t,e,i){t.exports=i.p+"editor-assets/img/translate-d.40df48e0.svg"},d887:function(t,e,i){},d8b6:function(t,e,i){},d96b:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiCAYAAAA+stv/AAAB/UlEQVRYR+2WP2gTURzHv987jbSg0MHJOpRChyoK/gGFgB3c7ZTZTZuUXBJJrosSdOmlmOuF3qmbcxbp7mAh0ELVobQditKhOgkiLbQYzf3kipHS1Os7OOhyb/7y/X7e93733iNOePGE8xEZoFis97X9X3kA9wQYDjZA4DOA+ZR2umHbpb0om4oEkCvM3IbfeS3AyFEhBDag6ffd2fKiKoQyQDY/nSaxIAINxLIG7TlTeB8ESRs3fPiPILgJsAPImNeYaqlAKAFUq6/6v33/sSKQYYL1O+mhSiaT6RwMaDab+kJrsyaQEolP5wcGrlarD3aPg1ACyOatx4A8Bbg0lh5KHw7vhgQQ71qbLUBuAXziNcxnsQDkDOuDiFyjro+7dnk+zHSyYI37vrwh+dF1zOuxAGQNaxsiZ8/oqUHbLn0NMy0W6xd+dtpfQO54jnkuHoD8tARGXmNK8ZOp62M3DECzEYATgJ4GDGPmym/4NYhc7A6QAKN/j9z144Zq/2A6Sk9unYJWcZzyykGPHoCcYa2KyCWVoKgakmuuY14OBegOUFRzVf3hP6mngQQgaSBpIGkgaSBpIGdYuyLSp3q5RNGR3HMdsz/8NjSsFxB5GMVYWUu+9BxzIhRARDhZqN0F+e9BohwQJhTZmputvCW5/8DtLqU3YSwA/zFJAP4AC5nuI64XEKcAAAAASUVORK5CYII="},d9e2:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAACKklEQVQ4T63U6+vecxzH8cdLOcaNGVmWOeSGw6KshjYa240hxZIypbS/YHeE4saU0x3/gCiFG5QcYol2aCJlNxxTmuNqJYfCnGrv9V6f69eF61r88qnvnev7vp7f9/v1eb3e8T+fTHhVdRzuxW04G9/iNTycZF/XVdV5uBvX4XR8iWfxYJI/uuYIsKrOwfNYNaPhn3Frl+E5nDyj5j3ckuSLVFVD38KV+Bhb8S4uxD24EQcH5CS8jIfwCVbjMVyEt7GmgVvwOHqsS5N0R0dOVR2DJ3HH+Okp3Jnk0FRNd/w+zsWWBr40uticpPX4y6mqE0bHPfLlSX6bUdO6P9PdN7CFXdFPkq9nXXpV9fiHknw65/1Z+KqfBv6C1ubUJD8sxkVVtQTft9YN/GiIek2SnYsErsOOvtQGPoK7WoMkty8S+DQ249EGLsNnY+yrk+z5L9CqWovdw1rnT4x9H7bhc1yW5Md/Ax3a7UUH4/4kD0yAx6I7a6O2FhsnUZoHrqrjsR2tXwdhbZI/p7PcV/8OzsSr2JTk9zk2aW++0B/GflyR5JuFLE+5/hK8idPwOm5K8us0tKpORIdhw1gg1yb5cFKz0OEU9OIBPQO7cPPEn0OzF3EVDmB9ks7/wvkHcGT4AryB5eh0XD+2TUvR73q8DbOSMxM4oK1pA1biu9HCUnzQH5ho9neN5wIH9JSxQG8Yf3ylDZzkp3m3f1TggPYK6xXX2+aJ6dU1C3oYxiLQXqc/xPMAAAAASUVORK5CYII="},d9f9:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tools-wrap"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.tableVisible,expression:"tableVisible"}]},[s("Drawer",[s("div",{staticClass:"table-box"},[s("div",{staticClass:"header flex item-center px-12"},[s("a-icon",{staticClass:"text-pointer",attrs:{size:"small",color:"#F5F5F5",type:"left"},on:{click:function(e){t.tableVisible=!1}}}),s("span",{staticClass:"text-pointer",on:{click:function(e){t.tableVisible=!1}}},[t._v("表格")])],1),s("scrollbar",{attrs:{"max-height":t.height}},[s("div",{staticClass:"table-container-wrapper item-center"},[s("div",{staticClass:"flex flex-wrap px-12"},t._l(t.previewStyle,(function(e,i){return s("div",{key:e.id,class:["table-item","mt-12","text-pointer",i%2&&"ml-8"],on:{click:function(i){return t.handleAddTable({},e)}}},[s("TableCreator",{on:{change:function(i){return t.handleAddTable(i,e)}}},[s("img",{staticClass:"text-pointer",attrs:{src:e.bigImage,alt:""}})])],1)})),0),s("div",{staticClass:"temp-title px-12 mt-24"},[t._v("表格模版")]),t._l(t.tableTemps,(function(e,i){return s("div",{key:i,staticClass:"table-temp mt-12 mx-12 text-pointer",on:{click:function(i){return t.addTableByTemp(e)}}},[s("img",{attrs:{src:e.img,alt:""}})])}))],2)])],1)])],1),s("div",{staticClass:"mt-4 px-12"},[s("div",{staticClass:"box blue",on:{click:function(e){return e.stopPropagation(),t.addBarcode(e)}}},[s("div",{staticClass:"left"},[s("img",{attrs:{src:i("4b3a")}})]),t._m(0)]),s("div",{staticClass:"box green",on:{click:function(e){return e.stopPropagation(),t.addQRcode(e)}}},[s("div",{staticClass:"left"},[s("img",{attrs:{src:i("ebed")}})]),t._m(1)]),s("div",{staticClass:"box orange",on:{click:function(e){t.tableVisible=!0}}},[s("div",{staticClass:"left"},[s("img",{attrs:{src:i("f469")}})]),t._m(2)])])])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"right"},[i("div",{staticClass:"title"},[t._v("条形码")]),i("div",{staticClass:"desc"},[t._v("快速生成一维码支持4种码制")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"right"},[i("div",{staticClass:"title"},[t._v("二维码")]),i("div",{staticClass:"desc"},[t._v("快速生成二维码")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"right"},[i("div",{staticClass:"title"},[t._v("表格")]),i("div",{staticClass:"desc"},[t._v("快速生成表格多种精美样式")])])}],a=i("5530"),r=i("da71"),o=i("750b"),l=(i("4ed7"),Object(o["b"])({setup(t,e){const i=Object(o["i"])({x:-1,y:-1}),s=(t,e)=>{i.x=t,i.y=e},n=Object(o["j"])(!1);return Object(o["k"])(()=>n.value,()=>{n.value||(i.x=-1,i.y=-1)},{lazy:!0}),()=>{var t,a;return Object(o["c"])("a-popover",{attrs:{placement:"right",visible:n.value,trigger:"hover",overlayClassName:"table-creator-container"},on:{visibleChange:t=>{n.value=t}}},[Object(o["c"])("template",{slot:"content"},[Object(o["c"])("div",{class:"table-creator"},[Object(o["c"])("div",{class:"flex item-end flex-between pr-20"},[Object(o["c"])("div",{class:"title mx-16 pt-10"},["创建表格"]),Object(o["c"])("div",[i.x+1,"行, ",i.y+1,"列"])]),Object(o["c"])("div",{class:"table-list"},[Array.from({length:10}).map((t,a)=>Object(o["c"])("ul",{class:"flex item-center flex-around mt-4",key:a},[Array.from({length:10}).map((t,r)=>Object(o["c"])("li",{class:i.x>=a&&i.y>=r?"active":"",key:r,on:{mousemove:()=>s(a,r),click:()=>{n.value=!1,e.emit("change",{columns:r+1,rows:a+1})}}}))]))])])]),null===(t=(a=e.slots).default)||void 0===t?void 0:t.call(a)])}}})),c=i("5880"),h=(i("ea37"),Object(o["b"])({setup(t,e){return()=>{var t,i;return Object(o["c"])("div",{class:"app-drawer-wrap"},[null===(t=(i=e.slots).default)||void 0===t?void 0:t.call(i)])}}})),d=i("c64e"),u=i.n(d),p=i("fe94"),f={data(){return{height:window.innerHeight-73,tableVisible:!1}},components:{TableCreator:l,Drawer:h},computed:Object(a["a"])(Object(a["a"])({},Object(c["mapState"])(["scale"])),Object(c["mapState"])("table",["previewStyle","tableTemps"])),mounted(){window.addEventListener("resize",this.resizeHeight)},beforeDestroy(){window.removeEventListener("resize",this.resizeHeight)},methods:{resizeHeight(){this.height=window.innerHeight-73},addBarcode(){const t={type:"barcode",codeMode:"EAN13",value:"0000000000000",displayValue:!0,src:r["SIYUAN_FONT"],example:r["SIYUAN_EXAMPLE"],id:r["SIYUAN_FONT_ID"],qricon:null,fills:[{index:0,class:"foreground",color:"#000000"},{index:1,class:"background",color:"#ffffff"}],style:{position:"absolute",top:50,left:100,rotate:360-this.$root.projectData.rotate,color:"#000000",opacity:100,fontFamily:r["SIYUAN_FONT_FAMILY"],fontSize:14,width:50,height:25}};this.$bus.$emit("edit-barcode",t)},handleAddTable({rows:t,columns:e},i){this.tableVisible=!1,this.addTable(t,e,i),this.visible=!1},addTable(t=4,e=4,i){const s=30/this.scale*e,n=10/this.scale*t,a={type:"table",uuid:u()(),table:{row:t,column:e,zIndex:0,lines:{},borderWidth:Object(p["a"])(1).pt2px(),previewStyle:{id:i.id,row:i.row,column:i.column},cells:Array.from({length:e}).map(e=>Array.from({length:t}).map(t=>({}))),defaultStyle:{fontSize:3/this.scale}},value:"",style:{position:"absolute",rotate:360-this.$root.projectData.rotate,opacity:100,width:s,height:n}};this.$store.dispatch("editor/setEditorTempMaterial",a)},addTableByTemp({style:t}){const e=JSON.parse(JSON.stringify(t));e.uuid=u()(),this.$store.dispatch("editor/setEditorTempMaterial",e)},refresh(){},handleReachBottom(){},addQRcode(){const t={type:"qrcode",value:"https://",codeType:"url",fills:[{index:0,class:"foreground",color:"#000000"},{index:1,class:"background",color:"#ffffff"}],style:{position:"absolute",top:50,left:100,rotate:360-this.$root.projectData.rotate,opacity:100,width:50,height:50}};this.$bus.$emit("edit-qrcode",t)}}},m=f,g=(i("21a3"),i("2877")),v=Object(g["a"])(m,s,n,!1,null,"57ea0fc6",null);e["default"]=v.exports},d9fc:function(t,e,i){var s=i("cbe5"),n=s.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,i){i&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}});t.exports=n},da16:function(t,e,i){"use strict";var s=i("96e1"),n=i.n(s);n.a},da3d:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CODE128C=e.CODE128B=e.CODE128A=e.CODE128=void 0;var s=i("6f24"),n=d(s),a=i("e8c9"),r=d(a),o=i("70b0"),l=d(o),c=i("ed3f"),h=d(c);function d(t){return t&&t.__esModule?t:{default:t}}e.CODE128=n.default,e.CODE128A=r.default,e.CODE128B=l.default,e.CODE128C=h.default},da3e:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-input",{staticStyle:{},attrs:{id:t.specialId,value:t.insert,disabled:t.disabled,placeholder:t.placeholder,suffix:t.suffix},on:{click:t.onClick,focus:t.onFocus,change:t.onChange,pressEnter:t.onPressEnter,blur:t.onblur}})},n=[],a=(i("1276"),i("ed08")),r={props:{specialId:{type:String,default:null},value:{type:Number,default:0},unit:{type:String,default:""},placeholder:{type:String,default:""},suffix:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:99999999},disabled:{type:Boolean,default:!1},customStyle:{type:[Object,Object],default:()=>({})}},data(){return{insert:""}},mounted(){this.insert=this.value+" "+this.unit},methods:{onClick(t){this.insert=this.insert.split(" ")[0],this.$nextTick(()=>{t.target.select()})},onFocus(t){this.insert=this.insert.split(" ")[0],this.$nextTick(()=>{t.target.select()})},onChange(t){this.insert=t.target.value},onPressEnter(t){this._confirmValue(t.target.value)},onblur(t){this._confirmValue(t.target.value.split(" ")[0]),this.$emit("blur")},_confirmValue(t){const{min:e,max:i}=this;t=Object(a["H"])(t).target,t=t<e?e:t>i?i:t,this.$emit("confirm",""+t),this.insert=t+" "+this.unit}},watch:{value(t){this.insert=t+" "+this.unit}}},o=r,l=(i("6218"),i("2877")),c=Object(l["a"])(o,s,n,!1,null,null,null);e["default"]=c.exports},dad2:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"flex flex-between item-center mt-12"},[s("div",{staticClass:"fo-12 pfow "},[t._v("旋转")]),s("div",{staticClass:"light-render-input"},[s("input",{staticClass:"light-render-input",domProps:{value:t.rotate+t.rotateUnit},on:{focus:function(e){t.rotateUnit="",e.target.select()},blur:t.rotateInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.rotateInput(e)}}})])]),s("div",{staticClass:"flex flex-center mt-16"},[s("div",{staticClass:"rotate-light"},[s("div",{ref:"rotateLight",staticClass:"panel flex flex-center item-center"},[s("div",{staticClass:"flag-panel ",style:{left:t.fx+"px",top:t.fy+"px"},on:{mousedown:t.mouseDown}},[t._m(0)]),s("img",{attrs:{src:i("c308")}})])])])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flag flex flex-center item-center"},[s("img",{attrs:{src:i("3230")}})])}],a=i("6116"),r={props:{value:{type:Number,require:!0},position:{type:Object}},data(){return{fx:0,fy:73,rotate:this.value,rotateUnit:"°"}},model:{prop:"value",event:"change"},watch:{value(t){this.rotate=t,this.toAxis()}},mounted(){this.toAxis()},methods:{rotateInput(t){"blur"===t.type&&(this.rotateUnit="°");let e=0;t.target.value&&(e=parseFloat(Object(a["c"])(t.target.value))),e>=360&&(e=0),e<0&&(e=0),this.rotate!=e&&(this.rotate=e,this.$emit("change",e),this.emitSunLight(),this.$emit("after-change",e),this.toAxis())},mouseDown(t){const e=this.$refs.rotateLight.getBoundingClientRect(),i=e.x+e.width/2,s=e.y+e.height/2;document.onmousemove=t=>{let e=t.clientX-i,n=t.clientY-s;const a=Math.sqrt(Math.pow(e,2)+Math.pow(n,2)),r=a/73,o=e/r,l=n/r;return this.toRotate(e,n),this.fx=o+73,this.fy=l+73,!1},document.onmouseup=()=>{this.$emit("after-change",this.rotate),document.onmousemove=null,document.onmouseup=null}},toRotate(t,e){const i=Math.atan2(-e,-t);let s=i/(2*Math.PI)*360;s<0&&(s+=360),this.rotate=parseInt(s),this.$emit("change",this.rotate),this.emitSunLight()},emitSunLight(){const t=Math.sqrt(Math.pow(this.position.x,2)+Math.pow(this.position.z,2)),e=Math.cos((this.rotate+90)*Math.PI/180)*t,i=-Math.sin((this.rotate+90)*Math.PI/180)*t;this.$emit("position-change",{x:i,y:this.position.y,z:e}),this.$bus.$emit("sunLightChange",{x:i,z:e})},toAxis(){let t=73*Math.cos((this.rotate+180)*Math.PI/180),e=73*Math.sin((this.rotate+180)*Math.PI/180);this.fx=t+73,this.fy=e+73}}},o=r,l=(i("fd31"),i("2877")),c=Object(l["a"])(o,s,n,!1,null,"03651464",null);e["default"]=c.exports},db96:function(t,e,i){t.exports=i.p+"editor-assets/img/te.8cee9daa.svg"},dba3:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-modal",{attrs:{centered:"",title:"材质与尺寸",width:580,footer:null,"z-index":3e3},on:{change:function(e){return t.$emit("change",t.visibleValue)}},model:{value:t.visibleValue,callback:function(e){t.visibleValue=e},expression:"visibleValue"}},[s("div",{staticClass:"editor-resize__model"},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"fo-14"},[t._v("材质：")]),s("a-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择材质"},on:{change:t.scienceChange},model:{value:t.project.science_id,callback:function(e){t.$set(t.project,"science_id",e)},expression:"project.science_id"}},t._l(t.science,(function(e,i){return s("a-select-option",{key:i,attrs:{label:e.science_name,value:e.id}},[s("div",{staticClass:"flex flex-start item-center",staticStyle:{width:"100%"}},[s("img",{attrs:{src:e.science_image+"?imageView2/1/w/25/h/25/q/50"}}),s("div",{staticClass:"ml-8"},[t._v(t._s(e.science_name))])])])})),1),s("a",{staticClass:"ml-12",attrs:{href:"https://help.baoxiaohe.com/d/27",target:"_blank"}},[s("img",{staticClass:"question-icon",attrs:{src:i("7347")}})]),s("div",{staticClass:"fo-14",staticStyle:{"margin-left":"36px"}},[t._v("纸厚：")]),s("a-input",{staticStyle:{width:"160px"},attrs:{disabled:t.thinkdisabled,placeholder:"请输入纸厚"},on:{change:t.depthChange},model:{value:t.project.thickness,callback:function(e){t.$set(t.project,"thickness",e)},expression:"project.thickness"}}),s("div",{staticClass:"ml-8 fo-gray"},[t._v("mm")])],1),s("div",{staticClass:"flex flex-start item-center mt-16"},[s("div",{staticClass:"fo-14"},[t._v("类型：")]),s("a-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.changeSizeDepth},model:{value:t.sizeType,callback:function(e){t.sizeType=e},expression:"sizeType"}},[s("a-select-option",{attrs:{label:"内尺寸",value:"id"}},[t._v("内尺寸")]),s("a-select-option",{attrs:{label:"外尺寸",value:"ed"}},[t._v("外尺寸")]),s("a-select-option",{attrs:{label:"制造尺寸",value:"dm"}},[t._v("制造尺寸")])],1),s("a",{staticClass:"ml-12",attrs:{href:"https://help.baoxiaohe.com/d/24",target:"_blank"}},[s("img",{staticClass:"question-icon",attrs:{src:i("7347")}})])],1),s("div",{staticClass:"mt-16 flex flex-start"},[s("div",[t._v("尺寸：")]),s("div",{staticClass:"size-panel"},[s("div",{staticClass:"size-panel__header flex flex-start item-center"},[t.lengthDisable?t._e():s("div",{staticClass:"size-panel__input flex flex-start item-center"},[s("input",{attrs:{disabled:t.lengthDisable,placeholder:"请输入长aaaa"},domProps:{value:t.formSize.length},on:{blur:t.lengthBlur}}),s("div",[t._v("mm")])]),s("div",{staticClass:"size-panel__short"}),t.widthDisable?t._e():s("div",{staticClass:"size-panel__input flex flex-start item-center"},[s("input",{attrs:{disabled:t.widthDisable,placeholder:"请输入宽"},domProps:{value:t.formSize.width},on:{blur:t.widthBlur}}),s("div",[t._v("mm")])]),s("div",{staticClass:"size-panel__short"}),t.heightDisable?t._e():s("div",{staticClass:"size-panel__input flex flex-start item-center"},[s("input",{attrs:{disabled:t.heightDisable,placeholder:"请输入高"},domProps:{value:t.formSize.height},on:{blur:t.heightBlur}}),s("div",[t._v("mm")])])]),s("div",{staticClass:"size-panel__exm"},t._l(t.default_size,(function(e,i){return s("div",{key:i,class:"size-panel__exm__item flex flex-start item-center "+(t.sizeFlag===i&&"size-panel__exm__item--active"),on:{click:function(e){return t.clickItemSize(i)}}},[s("div",{staticClass:"fo-14"},[t._v("L: "+t._s(e.length)+"mm")]),s("div",{staticClass:"fo-14 ml-12"},[t._v("W: "+t._s(e.width)+"mm")]),s("div",{staticClass:"fo-14 ml-12"},[t._v("H: "+t._s(e.height)+"mm")])])})),0)])]),s("div",{staticClass:"fo-14 fo-gray mt-16"},[t._v("生产场景下，非标准尺寸可能会导致成本增高")]),s("div",{staticClass:"w-100 model-footer flex flex-center item-center pb-24"},[s("a-button",{staticStyle:{width:"88px"},on:{click:function(e){t.visibleValue=!1}}},[t._v("取消")]),s("a-button",{staticClass:"ml-24",attrs:{type:"primary",loading:t.loading},on:{click:t.fetchSize}},[t._v("确认"+t._s(t.newprojectType?"新建":"调整"))])],1)])])],1)},n=[],a=(i("5319"),i("5530")),r=i("f2a3"),o=i("05ed"),l=i("d1cf"),c=i("365c"),h=i("5880"),d=(i("ed08"),{components:{model:r["a"],numberInput:o["a"]},model:{prop:"visible",event:"change"},props:{visible:{type:Boolean,require:!0,default:!1},nptype:{},npvalue:{}},watch:{nptype(t){this.newprojectType=t,this.load=!1},npvalue:{handler(t,e){this.newprojectValue=t,this.cate_id=t.cate_id,this.getCateInfo(),this.science.length>0&&this.setDefScience()},deep:!0},visible(t){this.visibleValue=t,t&&(this.load||(this.load=!0,this.project_data&&this.project_data.id&&this.getCateInfo(),this.getScienceCate()))},visibleValue(t){!t&&this.newprojectType&&(this.load=!1,this.newprojectType=!1),this.$emit("change",t)},rsa(t){this.shouldFormat=!!Object.keys(this.rsa).length},project(){this.dimensioning&&this.dimensioning.setDepths(this.project.thickness,this.project.inless,this.project.outless)}},computed:Object(a["a"])(Object(a["a"])({},Object(h["mapState"])("editor-v2",["project_data","knife_data","isCup","scale","is_outside","last_saved_local_history_ts"])),{},{extendSize(){var t;return(null===(t=this.npvalue)||void 0===t?void 0:t.width)?this.npvalue:this.project},width(){return this.extendSize.width},height(){return this.extendSize.height},length(){return this.extendSize.length}}),data(){return{visibleValue:this.visible,sizeType:"id",sizeTypePre:"id",locked:!1,load:!1,sizeFlag:-1,rsa:{},shouldFormat:!1,loading:!1,newprojectType:this.nptype,cate_id:"",newprojectValue:this.newprojectValue,thinkdisabled:!1,formSize:{length:"",width:"",height:""},oriSize:{},project:{length:500,width:300,height:100,science_id:"",thickness:""},scienceFlag:0,length_limit:[],width_limit:[],height_limit:[],default_size:[],lengthDisable:!1,widthDisable:!1,heightDisable:!1,science:[],cate:{},dimensioning:null}},methods:{depthChange(t){const{value:e}=t.target;this.sizeTypePre="id",this.project.inless=e/2,this.project.outless=e/2,this.changeSizeDepth(this.sizeTypePre)},clickItemSize(t){this.sizeFlag=t;const e=this.default_size[t];this.formSize={length:e.length,width:e.width,height:e.height}},scienceChange(t){let e=0;for(const i in this.science)this.science[i].id===t&&(e=i,0===this.science[i].can_set?this.thinkdisabled=!0:this.thinkdisabled=!1);this.project.science_id=t,this.project.science_image=this.science[e].science_image,this.project.science_name=this.science[e].science_name,this.sizeTypePre="id",this.project.thickness=this.science[e].thickness,this.project.inless=this.science[e].inless,this.project.outless=this.science[e].outless,this.changeSizeDepth(this.sizeType)},changeSizeDepth(t){this.dimensioning.setDepths(this.project.thickness,this.project.inless,this.project.outless);const{l:e,w:i,h:s}=this.dimensioning.getLimits(t);this.length_limit=e,this.height_limit=s,this.width_limit=i,this.sizeType=t,this.setRsa(),this.sizeTypePre=t},setRsa(){this.rsa=this.knife_data?"ed"===this.sizeType?JSON.parse(JSON.stringify(this.knife_data.getOutSizeAdd)):"dm"===this.sizeType?JSON.parse(JSON.stringify(this.knife_data.getKnifeSizeAdd)):{}:{}},fetchSize(){if(!this.project.science_id)return void this.$message.error("请选择材质");this.loading=!0;const t=Object(a["a"])({},this.formSize);let{width:e,height:i,length:s}=t;if(this.shouldFormat){const{w:t,h:n,l:a}=this.dimensioning.filterSize(this.rsa,s,e,i,-1);e=t,i=n,s=a}this.newprojectType?Object(c["createDesignByBlank"])({length:s,width:e,height:i,size_type:this.sizeType,thickness:this.project.thickness,inless:this.project.inless,outless:this.project.outless,science_id:this.project.science_id,science_name:this.project.science_name,cate_id:this.cate_id}).then(t=>{this.loading=!1,t&&(this.visibleValue=!1,window.location.href="/design?id="+t.data.id+"&type=blank")}):(this.project.size_type=this.sizeType,this.project.length=s,this.project.width=e,this.project.height=i,Object(c["updateAll"])({project_id:this.project.project_id,id:this.project.id,length:s,size_type:this.sizeType,width:e,height:i,thickness:this.project.thickness,inless:this.project.inless,outless:this.project.outless,science_id:this.project.science_id,science_name:this.project.science_name}).then(t=>{this.$api.project.knifes({id:this.project.project_id,bleed:this.project.bleedline,dpi:c["DPI"]}).then(t=>{t&&(this.loading=!1,this.visibleValue=!1)})}))},getCateInfo(){this.$api.project.cateInfo({project_id:this.cate_id||this.project_data.id,type:this.cate_id?"new":null}).then(t=>{if(t){this.dimensioning=new l["a"](t.data.lengthLimit,t.data.widthLimit,t.data.heightLimit,t.data.defaultSize,this.newprojectType?this.newprojectValue.knife:this.knife_data),this.dimensioning.setDepths(this.project.thickness,this.project.inless,this.project.outless);const e=this.dimensioning.getLimits("id");this.length_limit=e.l,this.width_limit=e.w,this.height_limit=e.h,0===this.length_limit[0]&&0===this.length_limit[1]&&(this.lengthDisable=!0),0===this.width_limit[0]&&0===this.width_limit[1]&&(this.widthDisable=!0),0===this.height_limit[0]&&0===this.height_limit[1]&&(this.heightDisable=!0),this.default_size=this.dimensioning.getDefaultSizes("id"),this.cate=t.data,this.sizeType=this.project.size_type||"id",this.setRsa();let i=this.width,s=this.height,n=this.length;this.$nextTick(()=>{if(this.shouldFormat){const{w:t,h:e,l:a}=this.dimensioning.filterSize(this.rsa,n,i,s,1);i=t,s=e,n=a}this.formSize.width=i,this.formSize.height=s,this.formSize.length=n})}})},getScienceCate(){this.$api.material.science({science_type:1,currentPage:1,pageSize:1e3}).then(t=>{t&&(this.science=t.data.data,""!==this.project.science_id&&this.project.science_id||this.science.length>0&&(this.setDefScience(),0===this.science[0].can_set&&(this.thinkdisabled=!0)))})},setDefScience(){let t=-1;if(this.newprojectValue)for(const e in this.science)this.science[e].id===this.newprojectValue.def_science_id&&(t=e);-1===t?(this.project.science_id=this.science[0].id,this.project.thickness=this.science[0].thickness,this.project.outless=this.science[0].outless,this.project.inless=this.science[0].inless):(this.project.science_id=this.science[t].id,this.project.thickness=this.science[t].thickness,this.project.outless=this.science[t].outless,this.project.inless=this.science[t].inless)},lengthBlur(t){const e=parseInt(t.target.value.replace(/[^\d]/g,""));this.formSize.length=this.ckeckLimit(e,"length","长度")},widthBlur(t){const e=parseInt(t.target.value.replace(/[^\d]/g,""));this.formSize.width=this.ckeckLimit(e,"width","宽度")},heightBlur(t){const e=parseInt(t.target.value.replace(/[^\d]/g,""));this.formSize.height=this.ckeckLimit(e,"height","高度")},ckeckLimit(t,e,i){let s=0;return t>=parseInt(this[e+"_limit"][0])&&t<=parseInt(this[e+"_limit"][1])?s=t:t<parseInt(this[e+"_limit"][0])?(s=parseInt(this[e+"_limit"][0]),this.$message.warning({content:i+"最小值为"+this[e+"_limit"][0],duration:1})):(s=parseInt(this[e+"_limit"][1]),this.$message.warning({content:i+"最大值为"+this[e+"_limit"][1],duration:1})),s}}}),u=d,p=(i("3edb"),i("2877")),f=Object(p["a"])(u,s,n,!1,null,null,null);e["default"]=f.exports},dbbc:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("div",{staticClass:"flex items-center flex-between mb-18"},[i("div",{staticClass:"title fw-500"},[t._v(" 尺寸和材质 "),i("a-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"title"},slot:"title"},[i("div",[t._v("盒型代码："+t._s(t.cate_no))]),i("div",[t._v(" 展开尺寸："+t._s(t.knife_data.totalX.toFixed(2))+" x"+t._s(" ")+" "+t._s(t.knife_data.totalY.toFixed(2))+" mm² ")])]),i("i",{staticClass:"iconfont pointer icon-bangzhu c-999"})])],1),i("a",{staticClass:"fo-active-theme f-14 c-primary pointer",on:{click:t.onEdit}},[t._v(" 修改 ")])]),i("div",{staticClass:"flex items-center flex-between mb-18"},[i("div",{staticClass:"title"},[t._v(t._s(t.sizeName))]),i("div",{staticClass:"text-content"},[t._v(" "+t._s(t.sizeText)+" ")])]),i("div",{staticClass:"flex items-center flex-between mb-18"},[i("div",{staticClass:"title"},[t._v("材质：")]),i("div",{staticClass:"text-content"},[i("img",{staticClass:"material-image",attrs:{src:t.$filters.limit(t.project_data.science_image,{width:22})}}),t._v(" "+t._s(t.project_data.science_name)+" ")])]),i("div",{staticClass:"flex items-center flex-between mb-18"},[i("div",{staticClass:"title"},[t._v("厚度：")]),i("div",{staticClass:"text-content"},[t._v(t._s(t.project_data.thickness)+"mm")])]),i("select-background-color",{attrs:{color:t.background},on:{confirm:t.onSetBackground}}),i("div",{staticClass:"line mb-24 mt-16"}),i("select-surface-craft")],1)},n=[],a=i("5530"),r=i("6116"),o=i("4212"),l=i("5880"),c=i("accc"),h=i("1da9"),d={components:{selectBackgroundColor:c["default"],selectSurfaceCraft:h["default"]},data(){return{isViewMode:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(l["mapState"])("editor-v2",["is_outside","project_data","knife_data","surface_craft_list","show_project_edit_panel"])),{},{size(){const t=this.project_data.size_type,e={id:"size",ed:"outSize",dm:"knifeSize"};return this.knife_data[e[t]]},sizeName(){const t={id:"内尺寸",ed:"外尺寸",dm:"制造尺寸"},e=this.project_data.size_type;return t[e]||""},sizeText(){const t=this.size,e=Object(o["a"])(t.L,t.W,t.H,this.knife_data.size.like).join("x");return e?e+"mm":""},background(){return this.is_outside?this.project_data.background:this.project_data.inside_background},cate_no(){var t;return null===(t=this.project_data.cate)||void 0===t?void 0:t.cate_no},science_name(){return this.project_data.science_name},science_image(){const t=this.project_data.science_image;return Object(r["C"])(t,64,64)},cur_membrane_id(){return this.project_data.membrane_id||35}}),methods:{onSetBackground(t){this.$store.commit("editor-v2/set_background",t)},async onEdit(){"preview"===this.$route.query.type&&await this.$store.dispatch("saveForceCreateV2",{router:this.$router,knife_data:this.knife_data,project_data:this.project_data}),this.$store.commit("editor-v2/set_show_project_edit_panel",!this.show_project_edit_panel),this.$store.commit("editor-v2/set_show_axis_remark",!0)}}},u=d,p=(i("a05d"),i("2877")),f=Object(p["a"])(u,s,n,!1,null,"5cda5ec6",null);e["default"]=f.exports},dc06:function(t,e,i){},dc08:function(t,e,i){},dc0a:function(t,e,i){},dc20:function(t,e,i){var s=i("8727"),n=s.createElement,a=i("6d8b"),r=i("4942"),o=i("cbe5"),l=i("0da8"),c=i("76a5"),h=i("0c12"),d=i("b16f"),u=i("9fa3"),p=i("bcaa"),f=i("3f8e"),m=f.path,g=f.image,v=f.text;function b(t){return parseInt(t,10)}function y(t){return t instanceof o?m:t instanceof l?g:t instanceof c?v:m}function _(t,e){return e&&t&&e.parentNode!==t}function x(t,e,i){if(_(t,e)&&i){var s=i.nextSibling;s?t.insertBefore(e,s):t.appendChild(e)}}function w(t,e){if(_(t,e)){var i=t.firstChild;i?t.insertBefore(e,i):t.appendChild(e)}}function C(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)}function k(t){return t.__textSvgEl}function S(t){return t.__svgEl}var A=function(t,e,i,s){this.root=t,this.storage=e,this._opts=i=a.extend({},i||{});var r=n("svg");r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("version","1.1"),r.setAttribute("baseProfile","full"),r.style.cssText="user-select:none;position:absolute;left:0;top:0;",this.gradientManager=new d(s,r),this.clipPathManager=new u(s,r),this.shadowManager=new p(s,r);var o=document.createElement("div");o.style.cssText="overflow:hidden;position:relative",this._svgRoot=r,this._viewport=o,t.appendChild(o),o.appendChild(r),this.resize(i.width,i.height),this._visibleList=[]};function O(t){return function(){r('In SVG mode painter not support method "'+t+'"')}}A.prototype={constructor:A,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0);this._paintList(t)},setBackgroundColor:function(t){this._viewport.style.background=t},_paintList:function(t){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var e,i=this._svgRoot,s=this._visibleList,n=t.length,a=[];for(e=0;e<n;e++){var r=t[e],o=y(r),l=S(r)||k(r);r.invisible||(r.__dirty&&(o&&o.brush(r),this.clipPathManager.update(r),r.style&&(this.gradientManager.update(r.style.fill),this.gradientManager.update(r.style.stroke),this.shadowManager.update(l,r)),r.__dirty=!1),a.push(r))}var c,d=h(s,a);for(e=0;e<d.length;e++){var u=d[e];if(u.removed)for(var p=0;p<u.count;p++){r=s[u.indices[p]],l=S(r);var f=k(r);C(i,l),C(i,f)}}for(e=0;e<d.length;e++){u=d[e];if(u.added)for(p=0;p<u.count;p++){r=a[u.indices[p]],l=S(r),f=k(r);c?x(i,l,c):w(i,l),l?x(i,f,l):c?x(i,f,c):w(i,f),x(i,f,l),c=f||l||c,this.gradientManager.addWithoutUpdate(l||f,r),this.shadowManager.addWithoutUpdate(l||f,r),this.clipPathManager.markUsed(r)}else if(!u.removed)for(p=0;p<u.count;p++){r=a[u.indices[p]],l=S(r),f=k(r),l=S(r),f=k(r);this.gradientManager.markUsed(r),this.gradientManager.addWithoutUpdate(l||f,r),this.shadowManager.markUsed(r),this.shadowManager.addWithoutUpdate(l||f,r),this.clipPathManager.markUsed(r),f&&x(i,f,l),c=l||f||c}}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=a},_getDefs:function(t){var e=this._svgRoot,i=this._svgRoot.getElementsByTagName("defs");if(0===i.length){if(t){i=e.insertBefore(n("defs"),e.firstChild);return i.contains||(i.contains=function(t){var e=i.children;if(!e)return!1;for(var s=e.length-1;s>=0;--s)if(e[s]===t)return!0;return!1}),i}return null}return i[0]},resize:function(t,e){var i=this._viewport;i.style.display="none";var s=this._opts;if(null!=t&&(s.width=t),null!=e&&(s.height=e),t=this._getSize(0),e=this._getSize(1),i.style.display="",this._width!==t||this._height!==e){this._width=t,this._height=e;var n=i.style;n.width=t+"px",n.height=e+"px";var a=this._svgRoot;a.setAttribute("width",t),a.setAttribute("height",e)}},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,i=["width","height"][t],s=["clientWidth","clientHeight"][t],n=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(null!=e[i]&&"auto"!==e[i])return parseFloat(e[i]);var r=this.root,o=document.defaultView.getComputedStyle(r);return(r[s]||b(o[i])||b(r.style[i]))-(b(o[n])||0)-(b(o[a])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},pathToDataUrl:function(){this.refresh();var t=this._svgRoot.outerHTML;return"data:image/svg+xml;charset=UTF-8,"+t}},a.each(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],(function(t){A.prototype[t]=O(t)}));var j=A;t.exports=j},dc2f:function(t,e){var i=function(t,e){this.image=t,this.repeat=e,this.type="pattern"};i.prototype.getCanvasPattern=function(t){return t.createPattern(this.image,this.repeat||"repeat")};var s=i;t.exports=s},dca2:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(t,i){s(this,e);var a=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.name="InvalidInputException",a.symbology=t,a.input=i,a.message='"'+a.input+'" is not a valid input for '+a.symbology,a}return a(e,t),e}(Error),o=function(t){function e(){s(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="InvalidElementException",t.message="Not supported type to render on",t}return a(e,t),e}(Error),l=function(t){function e(){s(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="NoElementException",t.message="No element to render on.",t}return a(e,t),e}(Error);e.InvalidInputException=r,e.InvalidElementException=o,e.NoElementException=l},dcaf:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.project_data_loaded?i("div",{staticClass:"zoomable-canvas-wrap",style:{width:t.knife_data.totalX+"mm",height:t.knife_data.totalY+"mm",transform:"scale("+t.scale+") rotate("+t.project_data.rotate+"deg) translate("+t.offset.x+"px,"+t.offset.y+"px)","clip-path":t.canvasClipPath},attrs:{id:"svgContainer"},on:{contextmenu:function(e){return e.stopPropagation(),e.preventDefault(),t.onContextMenu(e)}}},[i("div",{staticClass:"angle angle-left-top",style:{left:-t.project_data.bleedline+"mm",top:-t.project_data.bleedline+"mm",width:t.angleSizeMM,height:t.angleSizeMM,transform:"scale(-1) translate(100%,100%)",borderLeftWidth:t.angleBorderWidth,borderTopWidth:t.angleBorderWidth}}),i("div",{staticClass:"angle angle-right-top",style:{right:-t.project_data.bleedline+"mm",top:-t.project_data.bleedline+"mm",width:t.angleSizeMM,height:t.angleSizeMM,transform:"scale(-1) translate(-100%,100%)",borderRightWidth:t.angleBorderWidth,borderTopWidth:t.angleBorderWidth}}),i("div",{staticClass:"angle angle-left-bottom",style:{left:-t.project_data.bleedline+"mm",bottom:-t.project_data.bleedline+"mm",width:t.angleSizeMM,height:t.angleSizeMM,transform:"scale(-1) translate(100%,-100%)",borderLeftWidth:t.angleBorderWidth,borderBottomWidth:t.angleBorderWidth}}),i("div",{staticClass:"angle angle-right-bottom",style:{right:-t.project_data.bleedline+"mm",bottom:-t.project_data.bleedline+"mm",width:t.angleSizeMM,height:t.angleSizeMM,transform:"scale(-1) translate(-100%,-100%)",borderRightWidth:t.angleBorderWidth,borderBottomWidth:t.angleBorderWidth}}),i("background"),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.show_axis_remark,expression:"!show_axis_remark"}]},[t._l(t.design_data,(function(e,s){return[i("Element",{key:t.project_data.id+"-"+e.uuid,attrs:{data:e,index:s}})]}))],2),i("background-skeleton",{directives:[{name:"show",rawName:"v-show",value:t.is_bleedline_on_top,expression:"is_bleedline_on_top"}]}),i("multi-control"),t._l(t.high_lines,(function(e,s){return i("high-light-line",{key:s,attrs:{data:e,scale:t.scale}})})),i("blank-canvas-tip")],2):t._e()},n=[],a=i("5530"),r=i("5880");i("ddb0");const o=3.7795275591;class l{constructor(t={}){const e=Object.assign({scale:1,rotate:0,isMM:!0},t);if(!e.axis){const t=document.getElementById("svgContainer");t&&(e.axis=JSON.parse(JSON.stringify(t.getBoundingClientRect())))}this.axis=e.axis,this.scale=e.scale,this.rotate=e.rotate,this.isMM=e.isMM}refreshAxis(){this.axis=document.getElementById("svgContainer").getBoundingClientRect()}debug(){log("调试信息，当前axisHelper的配置：,",this.axis,this.scale,this.rotate,this.isMM)}setAxis(t){t&&(this.axis=t)}setScale(t){this.scale=t||1}setRotate(t){this.rotate=t||0}setOptions(t={}){t.scale&&(this.scale=t.scale),t.rotate&&(this.rotate=t.rotate)}_getPointPosByRotate(t,e,i){const{x:s,y:n}=t,a=i*Math.PI/180;return{x:(s-e.x)*Math.cos(a)-(n-e.y)*Math.sin(a)+e.x,y:(n-e.y)*Math.cos(a)+(s-e.x)*Math.sin(a)+e.y}}getPointLocalPos(t={}){const e=Object.assign({x:0,y:0},t),{left:i,top:s,width:n,height:a}=this.axis,{scale:r,rotate:l,isMM:c}=this;let h=e.x-i,d=e.y-s;switch(l){case 90:[h,d]=[d,n-h];break;case 180:[h,d]=[n-h,a-d];break;case 270:[h,d]=[a-d,h];break;default:break}return h/=r,d/=r,c&&([h,d]=[h/o,d/o]),{x:h,y:d}}getRectLocalPos(t={}){const e=this.getPointLocalPos({x:t.x,y:t.y});let{x:i,y:s,top:n,left:a}=e,{width:r,height:l}=t;const{rotate:c,scale:h,isMM:d}=this;switch(r/=h,l/=h,d&&([r,l]=[r/o,l/o]),c){case 90:[r,l]=[l,r],s-=l;break;case 180:s-=l,i-=r;break;case 270:[r,l]=[l,r],i-=r;break;default:break}return n=s,a=i,{x:i,y:s,top:n,left:a,width:r,height:l}}getDistanceLocalValue(t,e){t=Object.assign({x:0,y:0},t);let{x:i,y:s}=t;const{rotate:n,scale:a,isMM:r}=this;return 90===n?[i,s]=[s,-i]:180===n?[i,s]=[-i,-s]:270===n&&([i,s]=[-s,i]),i/=a,s/=a,r&&(i/=o,s/=o),{x:i,y:s}}}var c=i("f168"),h=i("31df"),d=i("b79e"),u=i("23ab"),p=i("9cc2"),f=i("866c"),m=i("1707"),g=i("8a58"),v={components:{background:u["default"],backgroundSkeleton:p["default"],Element:f["default"],multiControl:m["default"],highLightLine:d["default"],blankCanvasTip:g["default"]},mixins:[c["a"],h["a"]],props:{offset:{type:Object,default:()=>({x:0,y:0})}},data(){return{axisHelper:null}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["scale","is_outside","project_data","project_data_loaded","knife_data","show_axis_remark","high_lines","is_clip_by_bleedline","is_bleedline_on_top"])),Object(r["mapGetters"])("profile",["isVip"])),Object(r["mapGetters"])("editor-v2",["curDesigns","design_data","background","face_background"])),{},{angleSizeMM(){return 4/this.scale+"mm"},angleBorderWidth(){return.25/this.scale+"px"},canvasClipPath(){return this.is_clip_by_bleedline?"url(#zoomable-canvas-clip-path)":"none"}}),mounted(){const t=new l({scale:this.scale,rotate:this.project_data.rotate});this.axisHelper=t,this.$store.commit("editor-v2/set_axis_helper",t)},methods:{onContextMenu(t){this.$bus.$emit("show-design-menu",{event:t,design:null})}}},b=v,y=(i("b532"),i("2877")),_=Object(y["a"])(b,s,n,!1,null,"14c1dcbe",null);e["default"]=_.exports},dcb9:function(t,e,i){"use strict";var s=i("85bb"),n=i.n(s);n.a},dce5:function(t,e,i){"use strict";var s=i("be88"),n=i.n(s);n.a},dd1b:function(t,e,i){},dd98:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAmElEQVQ4T63UOw7CQAwE0Bk6LpDb0RK6XARBx/FYbVIiSJcyRhsBAvKznbifpylsE84J5eMAkVOKb8A9PU6IdQG0ZwBdXkRuZugfeRcxQWNIwtTQFKKG5hAVpEFmIS0yCVmQUciKDEIepAd5kR9oCfKBliId9Lrii2XLhw6dId4bAFvPF/jOrAMRFa+x3hHtEUDmapUQMn8CtMNapdTj7XYAAAAASUVORK5CYII="},ddcb:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-modal",{attrs:{visible:t.visible,footer:null,width:560,closable:!1,zIndex:5e3,centered:!0}},[i("div",{staticClass:"main-body"},[i("span",{staticClass:"export-title"},[t._v("正在为您排队中，请稍候...")]),i("a-spin",{staticClass:"progress-bar"},[i("a-icon",{staticStyle:{"font-size":"48px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1),i("a-button",{staticClass:"cancel-button",on:{click:t.onCancel}},[t._v("取消")])],1)])],1)},n=[],a={model:{prop:"visible",event:"change"},props:{visible:{type:Boolean,default:!1}},methods:{onCancel(){this.$emit("change",!1),this.$emit("cancel")}}},r=a,o=(i("99f6"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,null,null);e["default"]=l.exports},dded:function(t,e,i){var s=i("6d8b"),n=i("42e5"),a=function(t,e,i,s,a){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==i?.5:i,this.type="radial",this.global=a||!1,n.call(this,s)};a.prototype={constructor:a},s.inherits(a,n);var r=a;t.exports=r},de00:function(t,e){var i=2311;function s(){return i++}t.exports=s},de03:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"faces-container"},[i("div",{class:"faces-item "+("all"===t.flag?"faces-item--active":""),on:{click:function(e){return t.changeFace(null)}}},[t._v(" 全部面 ")]),t._l(t.data,(function(e,s){return i("div",{key:s,class:"faces-item "+(t.flag===e.value?"faces-item--active":""),on:{click:function(e){return t.changeFace(s)}}},[t._v(" "+t._s(s+1+"-"+e.name)+" ")])}))],2)},n=[],a={props:["data","flag"],methods:{changeFace(t){this.$store.commit("editor/toggleCurrentFace",null===t?null:this.data[t].value)}}},r=a,o=(i("3038"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,null,null);e["default"]=l.exports},de44:function(t,e,i){},de66:function(t,e,i){"use strict";i.r(e);i("3dff");const s="https://yun.baoxiaohe.com/static/bwqrcode.jpg",n="https://yun.baoxiaohe.com/static/wechatservice4.jpg";e["default"]={props:{type:{type:String,default:"print"}},data(){return this.map={print:s,normal:n},{}},render(){const t=arguments[0],e=this.map[this.type];return t("div",{class:"SalesInfo"},[t("div",{class:"row-con"},[t("div",{class:"contact-con"},[t("img",{class:"qrcode",attrs:{src:e,alt:"qrcode"}}),t("div",{class:"contact-tip"},["扫一扫，添加客服微信好友 第一时间了解最新订单信息"])])])])}}},debd:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-mode flex flex-start item-center",style:{width:t.width+"px",height:t.height+"px"}},[i("div",{style:{height:t.height+"px",width:t.width-256+"px"}},[i("mode3d",{ref:"mode3d",attrs:{height:t.height,width:t.width-256,type:"render",value:!0}})],1),i("video-prop",{attrs:{height:t.height},on:{"ratio-change":t.ratioChange}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showVideo,expression:"showVideo"}],staticClass:"preview-mask flex flex-center item-center"},[i("div",[i("video",{staticClass:"video",style:{height:t.viedoHeight+"px"},attrs:{controls:"",src:t.videoURL}}),i("div",{staticClass:"video-panel mt-16"},[i("a-button",{staticClass:"fo-14",staticStyle:{width:"120px"},attrs:{size:"large"},on:{click:function(e){t.showVideo=!1}}},[t._v("关闭")]),i("a-button",{staticClass:"ml-12 fo-14",staticStyle:{width:"120px"},attrs:{size:"large",type:"primary"},on:{click:function(e){t.showVideo=!1,t.showVideoRenderModel=!0}}},[t._v("一键替换并拍摄")])],1)])])],1)},n=[],a=i("8fb2"),r=i("3350"),o=i("3809"),l={props:{height:{type:Number},width:{type:Number}},components:{mode3d:a["default"],videoProp:r["default"],videoRenderModel:o["default"]},data(){return{videoURL:"",viedoHeight:676,showVideo:!1,showVideoRenderModel:!1,shedId:0}},mounted(){this.initVideoUrl()},beforeDestroy(){this.$bus.$off("videoUrlInit")},methods:{initVideoUrl(){this.$bus.$on("videoUrlInit",({videoURL:t,shedId:e})=>{this.videoURL=t,this.showVideo=!0,this.shedId=e})},ratioChange(t){const e=t.ratio.w/t.ratio.h;let i=this.width-256-40,s=i/e;s>this.height-40&&(s=this.height-40,i=s*e);const n=i/t.clarity.w;this.$store.dispatch("render/saveScale",n),this.$refs.mode3d.modeStyle.width=t.clarity.w,this.$refs.mode3d.modeStyle.height=t.clarity.h}}},c=l,h=(i("fc51"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,"45ee17dc",null);e["default"]=d.exports},df40:function(t,e,i){"use strict";var s=i("c376"),n=i.n(s);n.a},dfa9:function(t,e,i){},dfee:function(t,e,i){},e014:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.canshow,expression:"canshow"}]},["render"!==t.type?s("div",{directives:[{name:"show",rawName:"v-show",value:3!==t.current,expression:"current !== 3"}],staticClass:"record-border",style:{width:t.width+"px",height:("render"===t.type?t.height-2:t.height-54)+"px"}}):t._e(),s("div",{staticClass:"record flex flex-center",style:{width:t.width+"px"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.current,expression:"current === 0"}],staticClass:"record-panel flex flex-center item-center"},[s("div",{staticClass:"ww fo-14 fo-white text-center"},[t._v("点击开始拍摄")]),s("div",{staticClass:"m-auto play-btn flex flex-center item-center",on:{click:t.doStart}},[s("img",{attrs:{src:i("8bef")}})]),s("div",{staticClass:"ww"}),"render"!==t.type?s("img",{staticClass:"close",attrs:{src:i("bd00")},on:{click:function(e){return t.$emit("close")}}}):t._e()]),s("div",{directives:[{name:"show",rawName:"v-show",value:1===t.current,expression:"current === 1"}],staticClass:"record-panel flex flex-between item-center"},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"dot"}),s("div",{staticClass:"fo-14 ml-4 fo-white"},[t._v(" "+t._s(t.time/1e3/60>1?t.time/1e3/60%60<10?"0"+parseInt(t.time/1e3/60%60):parseInt(t.time/1e3/60%60):"00")+" : "+t._s(t.time/1e3%60<10?"0"+parseInt(t.time/1e3)%60:parseInt(t.time/1e3)%60)+" ")]),s("div",{staticClass:"fo-14 ml-12 fo-white"},[t._v("正在拍摄...")])]),s("div",{staticClass:"cricle mr-24"},[s("a-progress",{attrs:{id:"recordPro",type:"circle","show-info":!1,percent:100*t.time/(2*(t.endTime+2e3)),width:44,"stroke-color":"#ffffff","stroke-width":4}}),s("div",{staticClass:"cricle-panel flex flex-center item-center",on:{click:t.doStop}},[s("img",{attrs:{src:i("db96")}})])],1)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showout,expression:"showout"}],staticClass:"tip text-center",style:{top:(t.height-52)/2-140+"px",left:t.width/2-140+"px"}},[s("div",{staticClass:"flex flex-end item-center"},[s("a-icon",{staticClass:"fo-16 pointer mt-8 mr-8",attrs:{type:"close"},on:{click:t.tipClose}})],1),s("img",{staticClass:"mt-16",attrs:{src:i("1254")}}),s("div",{staticClass:"fo-16 mt-30"},[t._v("拖动可改变3D模型角度（"+t._s(t.out)+"s）")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:3===t.current||4===t.current,expression:"current === 3 || current === 4"}],staticClass:"record-end flex flex-center item-center"},[s("div",{directives:[{name:"show",rawName:"v-show",value:3===t.current,expression:"current === 3"}]},[s("video",{staticClass:"video",style:{height:t.viedoHeight+"px"},attrs:{controls:"",src:t.videoURL}}),s("div",{staticClass:"video-panel mt-16"},[s("a-button",{staticStyle:{width:"92px"},attrs:{size:"large"},on:{click:t.doClose}},[t._v("关闭")]),s("a-button",{staticClass:"ml-12",staticStyle:{width:"92px"},attrs:{size:"large",type:"primary",loading:t.loading},on:{click:t.transcode}},[t._v("下载")])],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:4===t.current,expression:"current === 4"}]},[s("div",{staticClass:"flex flex-center item-center modal"},[s("div",{staticClass:"text-center"},[s("div",{staticClass:"fo-16"},[t._v(" "+t._s(t.spinning?"正在转码中...（请耐心等待）":"正在导出视频...")+" ")]),s("div",{staticClass:"mt-30 flex flex-center"},[t.spinning?s("a-spin",{attrs:{spinning:t.spinning}},[s("a-icon",{staticStyle:{"font-size":"40px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1):s("a-progress",{attrs:{percent:parseInt(t.progress),"stroke-color":"#FF610D"}})],1),s("a-button",{staticClass:"mt-50",staticStyle:{width:"100px"},on:{click:t.cancel}},[t._v("取消")])],1)])])])])},n=[],a=(i("ddb0"),i("2b3d"),i("9110")),r=i("c64e"),o=i.n(r),l={data(){return{current:0,intv:null,videoURL:"",blob:null,loading:!1,uuid:"",isNotDo:!1,showout:!1,intv2:null,out:3,viedoHeight:676,progress:0,spinning:!1}},props:{canshow:{type:Boolean},type:{type:String},time:{type:Number},endTime:{type:Number,default:1},width:{type:Number},height:{type:Number},animationInterval:{type:Number}},watch:{canshow(t){const e=localStorage.getItem("recordTip");t&&!e&&(this.showout=!0,this.out=3,this.intv2=setInterval(()=>{this.out--,0===this.out&&(this.tipClose(),localStorage.setItem("recordTip",1))},1e3))},height(t){this.viedoHeight=t<800?t-52-100:676}},beforeDestroy(){clearInterval(this.intv),this.$bus.$off("recorderOver")},mounted(){this.$nextTick(()=>{const t=document.getElementById("recordPro").querySelectorAll(".ant-progress-circle-trail")[0];t.removeAttribute("stroke"),t.style.stroke="rgba(255,255,255,0.3)"}),this.overRecord()},methods:{async transcode(){this.$track({category:"record-download",action:"click"}),this.current=4,this.loading=!0,this.spinning=!0;const t=new File([this.blob],this.uuid+".webm",{type:"video/webm"}),e=Object(a["createFFmpeg"])({corePath:"https://oss.baoxiaohe.com/ffmpeg/ffmpeg-core.js",log:!0}),{name:i}=t;await e.load(),e.setProgress(t=>{this.spinning=!1,this.progress=100*t.ratio});const s=await Object(a["fetchFile"])(t),n=this.project_data.extend_attrs?JSON.stringify(this.project_data.extend_attrs):{},r=`${n.trademark||""}${n.trademark&&n.productName?"-":""}${n.productName||""}${n.trademark||n.productName?"-":""}${this.project_data.project_name}-包装折叠动画.mp4`;e.FS("writeFile",i,s),await e.run("-i",i,"-c:v","libx264","-row-mt","1","-r","30","-s","1280x720",this.uuid+".mp4");const o=e.FS("readFile",this.uuid+".mp4"),l=new Blob([o.buffer],{type:"video/mp4"});if(!this.isNotDo){this.isNotDo=!1;const t=document.createElement("a");t.style.display="none",t.download=r,t.href=URL.createObjectURL(l),document.body.appendChild(t),t.click(),document.body.removeChild(t),this.loading=!1,this.doOff()}this.progress=0,this.spinning=!1,this.isNotDo=!1},cancel(){this.current=3,this.isNotDo=!0,this.loading=!1},tipClose(){clearInterval(this.intv2),this.out=3,this.showout=!1},doOff(){this.current=0,this.$emit("close")},doClose(){this.$confirm({title:"您还未下载视频，确定关闭？",content:"",okText:"确定",okType:"danger",cancelText:"取消",zIndex:5e3,centered:!0,onOk:()=>{this.doOff()},onCancel(){}})},overRecord(){this.$bus.$on("recorderOver",t=>{this.current=3,this.blob=t,this.videoURL=URL.createObjectURL(t)})},doStart(){this.$track({category:"record-begin",action:"click"}),this.current=1,this.$emit("startRecord",!0),this.$bus.$emit("recorderStart"),this.uuid=o()()},doStop(){clearInterval(this.intv),this.$emit("startRecord",!1),this.$bus.$emit("recorderEnd")}}},c=l,h=(i("19b9"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,"3e9f6057",null);e["default"]=d.exports},e019:function(t,e,i){t.exports=i.p+"editor-assets/img/toplace.5e7267f3.svg"},e0c1:function(t,e){t.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBMRXhpZgAATU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAkKADAAQAAAABAAAAkAAAAAD/wAARCACQAJADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9sAQwACAgICAgIDAgIDBQMDAwUGBQUFBQYIBgYGBgYICggICAgICAoKCgoKCgoKDAwMDAwMDg4ODg4PDw8PDw8PDw8P/9sAQwECAgIEBAQHBAQHEAsJCxAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQ/90ABAAJ/9oADAMBAAIRAxEAPwD9hKKKKACiiigDvPBv/Lf/AID/AFrvK4Pwb/y3/wCA/wBa7ygAooooAZL/AKtvpXh8n+t/E17hL/q2+leHyf638TQBFRRRQAV3ng3/AJb/APAf61wdd54N/wCW/wDwH+tAHeUUUUAFFFFAH//Q/YSiiigAooooA7zwb/y3/wCA/wBa7yuD8G/8t/8AgP8AWu8oAKKKKAGS/wCrb6V4fJ/rfxNe4S/6tvpXh8n+t/E0ARUUUUAFd54N/wCW/wDwH+tcHXeeDf8Alv8A8B/rQB3lFFFABRRRQB//0f3A/wCEN/6b/wDjv/16P+EN/wCm/wD47/8AXrvKKAOD/wCEN/6b/wDjv/16P+EN/wCm/wD47/8AXrvKKAODA/4RU8fv/O/4D938/Wg+MTjH2bZj/az/AEo8Z4P2Ydcbv6VwWFG0kfez39KAO9/4TL/ph/49/wDWo/4TL/ph/wCPf/Wrg6KAO8/4S/zf3fkbM/7Wf6Uf8Ih5v7zz9n/Ac/1rhoxl1XuTXuMZyikdxQBw/wDwhv8A03/8d/8Ar0f8Ib/03/8AHf8A69d5RQBwR8HLkkXGzH+zn+tC/wDFKLgfv/O/4D0/P1ru8ngE8muE8Zjd9lPUDf8A0oAX/hMv+mH/AI9/9aj/AITL/ph/49/9auDooA7z/hMv+mH/AI9/9aj/AITL/ph/49/9auDooA//0v38ooooAKKKKAOD8Zf8sP8AgX9K4Ou88Zf8sP8AgX9K4OgAooooAlj/ANb+Ir3CL/Vr9K8Pj/1v4ivcIv8AVr9KAH0UUUAFcH4y/wCWH/Av6V3lcH4y/wCWH/Av6UAcHRRRQAUUUUAf/9P99/Oi/vijzov74rxLz5f7xo8+X+8aYHtvnRf3xR50X98V4l58v940efL/AHjSA7bxf+98jy+dm79cVwwjc/dUk13PhD975/mc7Nvv1zXcGNDwVBoA8Q8iX+6aXyJf7pr23yYv7go8mL+4KAPFIopBIg2EkmvZ4pYxGvzDGKJYoxG3yjGK8YllkEjneSSaAPa/Oi/vijzov74rxLz5f7xpPPl/vGgD28SIeQwNcP4v/e+R5fOzd79cVwxkc/eYk13PhD975/mc7Nv65oA4nyJf7po8iX+6a9t8mL+4KPJi/uCgDxLyJf7po8iX+6a9t8mL+4KPJi/uCmB//9T9hKKKKACiiigDvPBv/Lf/AID/AFrvK4Pwb/y3/wCA/wBa7ygAooooAZL/AKtvpXh8n+t/E17hL/q2+leHyf638TQBFRRRQAV3ng3/AJb/APAf61wdd54N/wCW/wDwH+tAHeUUUUAFFFFAH//V/YSiu8/4Q3/pv/47/wDXo/4Q3/pv/wCO/wD16AODorvP+EN/6b/+O/8A16P+EN/6b/8Ajv8A9egBPBh3fah1A2f1ru8HkgcmuEb/AIpRcn9/53/Aen5+tA8YrkA2+zH+1n+lAHe0Vwf/AAmX/TD/AMe/+tR/wmX/AEw/8e/+tQB3EgyjA9xXh0hy7N3Jruf+Ev8AN/d+Rs/4Fn+lH/CIeb+88/Zn/Zz/AFoA4Oiu8/4Q3/pv/wCO/wD16P8AhDf+m/8A47/9egDgsqNwB+9jt6V3vgzB+0nrjb/WgeDjjP2nZj/Zz/Wgn/hFTz+/87/gP3fz9aAO8org/wDhMv8Aph/49/8AWo/4TL/ph/49/wDWoA7yiuD/AOEy/wCmH/j3/wBaj/hMv+mH/j3/ANagD//W/fyiiigAooooA4Pxl/yw/wCBf0rg67zxl/yw/wCBf0rg6ACiiigCWP8A1v4ivcIv9Wv0rw+P/W/iK9wi/wBWv0oAfRRRQAVwfjL/AJYf8C/pXeVwfjL/AJYf8C/pQBwdFFFABRRRQB//1/38ooooAKKKKAOD8Zf8sP8AgX9K4Ou88Zf8sP8AgX9K4OgAooooAlj/ANb+Ir3CL/Vr9K8Pj/1v4ivcIv8AVr9KAH0UUUAFcH4y/wCWH/Av6V3lcH4y/wCWH/Av6UAcHRRRQAUUUUAf/9k="},e0db:function(t,e,i){"use strict";var s=i("247f"),n=i.n(s);n.a},e0fa:function(t,e,i){},e1042:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div")},n=[],a=i("2877"),r={},o=Object(a["a"])(r,s,n,!1,null,null,null);e["default"]=o.exports},e127:function(t,e,i){},e139:function(t,e,i){t.exports=i.p+"editor-assets/img/scene.814bd677.svg"},e13b:function(t,e,i){},e149:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAxklEQVQ4T2NkoBAwUqifgSgD9u/fz8LCxa9ta250Ed1Cggbs33+Vh5n1V8Q/pn9vHayM15NkwKFDZyT/MTFGMDIynrW3NjqEzbs4XXDw+FlNxr8MPv+ZGbbYWxpfxxVWWA04ePSc3f///42Z/v1fYWdn8hxfQGMYcOjYmQCGf8wif3+zrXB01P5CKJawGHA+gOEfA/kGgGykyAswJ1MUiDBDKIpGmCHghMTxK+LffzISEsKQ/SwsLPzatrZkJGWSo5GQBnR5AMPZVxHHEza2AAAAAElFTkSuQmCC"},e14f:function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("365c"),a=i("3ccf"),r=i("33ac");i("86f9");e["default"]=Object(s["b"])({setup(){const t=Object(s["i"])({currentPage:1,pageSize:100}),e=Object(s["j"])(""),{data:i}=Object(a["c"])(n["getNotice"],{variables:t});return()=>{var t;return Object(s["c"])("div",{class:"logs-wrapper py-30"},[Object(s["c"])("div",{class:"logs-container"},[Object(s["c"])("div",{class:"title"},["通知中心"]),Object(s["c"])("div",{class:"mod_default_box"},[null===(t=i.value)||void 0===t?void 0:t.data.map((t,n)=>{var a;return Object(s["c"])("div",{key:n,on:{click:()=>{e.value=n}}},[Object(s["c"])(r["default"],{attrs:{target:t,show:n===e.value,isLast:n===(null===(a=i.value)||void 0===a?void 0:a.data.length)-1}})])})])])])}}})},e175:function(t,e,i){"use strict";var s=i("3cd2"),n=i.n(s);n.a},e1d6:function(t,e,i){t.exports=i.p+"editor-assets/img/logo-white.d72dd407.svg"},e1fc:function(t,e,i){var s=i("6d8b"),n=i("d5b7"),a=i("9850"),r=function(t){for(var e in t=t||{},n.call(this,t),t)t.hasOwnProperty(e)&&(this[e]=t[e]);this._children=[],this.__storage=null,this.__dirty=!0};r.prototype={constructor:r,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,i=0;i<e.length;i++)if(e[i].name===t)return e[i]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var i=this._children,s=i.indexOf(e);s>=0&&(i.splice(s,0,t),this._doAdd(t))}return this},_doAdd:function(t){t.parent&&t.parent.remove(t),t.parent=this;var e=this.__storage,i=this.__zr;e&&e!==t.__storage&&(e.addToStorage(t),t instanceof r&&t.addChildrenToStorage(e)),i&&i.refresh()},remove:function(t){var e=this.__zr,i=this.__storage,n=this._children,a=s.indexOf(n,t);return a<0||(n.splice(a,1),t.parent=null,i&&(i.delFromStorage(t),t instanceof r&&t.delChildrenFromStorage(i)),e&&e.refresh()),this},removeAll:function(){var t,e,i=this._children,s=this.__storage;for(e=0;e<i.length;e++)t=i[e],s&&(s.delFromStorage(t),t instanceof r&&t.delChildrenFromStorage(s)),t.parent=null;return i.length=0,this},eachChild:function(t,e){for(var i=this._children,s=0;s<i.length;s++){var n=i[s];t.call(e,n,s)}return this},traverse:function(t,e){for(var i=0;i<this._children.length;i++){var s=this._children[i];t.call(e,s),"group"===s.type&&s.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var i=this._children[e];t.addToStorage(i),i instanceof r&&i.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var i=this._children[e];t.delFromStorage(i),i instanceof r&&i.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,i=new a(0,0,0,0),s=t||this._children,n=[],r=0;r<s.length;r++){var o=s[r];if(!o.ignore&&!o.invisible){var l=o.getBoundingRect(),c=o.getLocalTransform(n);c?(i.copy(l),i.applyTransform(c),e=e||i.clone(),e.union(i)):(e=e||l.clone(),e.union(l))}}return e||i}},s.inherits(r,n);var o=r;t.exports=o},e263:function(t,e,i){var s=i("401b"),n=i("4a3f"),a=Math.min,r=Math.max,o=Math.sin,l=Math.cos,c=2*Math.PI,h=s.create(),d=s.create(),u=s.create();function p(t,e,i){if(0!==t.length){var s,n=t[0],o=n[0],l=n[0],c=n[1],h=n[1];for(s=1;s<t.length;s++)n=t[s],o=a(o,n[0]),l=r(l,n[0]),c=a(c,n[1]),h=r(h,n[1]);e[0]=o,e[1]=c,i[0]=l,i[1]=h}}function f(t,e,i,s,n,o){n[0]=a(t,i),n[1]=a(e,s),o[0]=r(t,i),o[1]=r(e,s)}var m=[],g=[];function v(t,e,i,s,o,l,c,h,d,u){var p,f=n.cubicExtrema,v=n.cubicAt,b=f(t,i,o,c,m);for(d[0]=1/0,d[1]=1/0,u[0]=-1/0,u[1]=-1/0,p=0;p<b;p++){var y=v(t,i,o,c,m[p]);d[0]=a(y,d[0]),u[0]=r(y,u[0])}for(b=f(e,s,l,h,g),p=0;p<b;p++){var _=v(e,s,l,h,g[p]);d[1]=a(_,d[1]),u[1]=r(_,u[1])}d[0]=a(t,d[0]),u[0]=r(t,u[0]),d[0]=a(c,d[0]),u[0]=r(c,u[0]),d[1]=a(e,d[1]),u[1]=r(e,u[1]),d[1]=a(h,d[1]),u[1]=r(h,u[1])}function b(t,e,i,s,o,l,c,h){var d=n.quadraticExtremum,u=n.quadraticAt,p=r(a(d(t,i,o),1),0),f=r(a(d(e,s,l),1),0),m=u(t,i,o,p),g=u(e,s,l,f);c[0]=a(t,o,m),c[1]=a(e,l,g),h[0]=r(t,o,m),h[1]=r(e,l,g)}function y(t,e,i,n,a,r,p,f,m){var g=s.min,v=s.max,b=Math.abs(a-r);if(b%c<1e-4&&b>1e-4)return f[0]=t-i,f[1]=e-n,m[0]=t+i,void(m[1]=e+n);if(h[0]=l(a)*i+t,h[1]=o(a)*n+e,d[0]=l(r)*i+t,d[1]=o(r)*n+e,g(f,h,d),v(m,h,d),a%=c,a<0&&(a+=c),r%=c,r<0&&(r+=c),a>r&&!p?r+=c:a<r&&p&&(a+=c),p){var y=r;r=a,a=y}for(var _=0;_<r;_+=Math.PI/2)_>a&&(u[0]=l(_)*i+t,u[1]=o(_)*n+e,g(f,u,f),v(m,u,m))}e.fromPoints=p,e.fromLine=f,e.fromCubic=v,e.fromQuadratic=b,e.fromArc=y},e345:function(t,e,i){t.exports=i.p+"editor-assets/img/cut.a00f11d9.svg"},e34a:function(t,e,i){},e35d:function(t,e,i){},e3a1:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.curDesign&&t.cur_cutout_uuid?i("div",{staticClass:"cutout-bar-wrap",style:{left:t.bar_position.x+"px",top:t.bar_position.y+"px"},on:{mousedown:function(t){t.stopPropagation()}}},[i("div",{staticClass:"btn btn-cancel",on:{click:t.onCancel}},[t._v("取消")]),i("span",{staticClass:"v-line"}),i("div",{staticClass:"btn btn-submit",on:{click:t.onSubmit}},[t._v("完成")])]):t._e()},n=[],a=i("5530"),r=i("5880"),o=i("60bb"),l=i.n(o),c={data(){return{bar_position:{x:0,y:0}}},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["cur_cutout_uuid"])),Object(r["mapGetters"])("editor-v2",["curDesign"])),mounted(){this.calc_bar_position()},methods:{calc_bar_position(){const t=document.getElementById("element"+this.cur_cutout_uuid);if(t){let{x:e,y:i}=t.getBoundingClientRect();e-=70,i-=100,this.bar_position={x:e,y:i}}},onCancel(){this.curDesign.src=this.curDesign.originSrc,this.curDesign.isCutout=!1,delete this.curDesign.originSrc,this.$store.commit("editor-v2/set_cur_cutout_uuid","")},onSubmit(){this.$store.commit("editor-v2/set_cur_cutout_uuid","")},throttleCalcBarPosition:l.a.throttle(t=>{t.calc_bar_position()},10)},watch:{cur_cutout_uuid(){this.throttleCalcBarPosition(this)},"curDesign.style.left"(){this.throttleCalcBarPosition(this)},"curDesign.style.top"(){this.throttleCalcBarPosition(this)}}},h=c,d=(i("60b0"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,"0a632d68",null);e["default"]=u.exports},e3d0:function(t,e,i){},e40b:function(t,e,i){(function(e){var i;(function(e){t.exports=e()})((function(){return function t(e,s,n){function a(o,l){if(!s[o]){if(!e[o]){var c="function"==typeof i&&i;if(!l&&c)return i(o,!0);if(r)return r(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var d=s[o]={exports:{}};e[o][0].call(d.exports,(function(t){var i=e[o][1][t];return a(i||t)}),d,d.exports,t,e,s,n)}return s[o].exports}for(var r="function"==typeof i&&i,o=0;o<n.length;o++)a(n[o]);return a}({1:[function(t,e,i){(function(e){"use strict";let s=t("./interlace"),n=[function(){},function(t,e,i,s){if(s===e.length)throw new Error("Ran out of data");let n=e[s];t[i]=n,t[i+1]=n,t[i+2]=n,t[i+3]=255},function(t,e,i,s){if(s+1>=e.length)throw new Error("Ran out of data");let n=e[s];t[i]=n,t[i+1]=n,t[i+2]=n,t[i+3]=e[s+1]},function(t,e,i,s){if(s+2>=e.length)throw new Error("Ran out of data");t[i]=e[s],t[i+1]=e[s+1],t[i+2]=e[s+2],t[i+3]=255},function(t,e,i,s){if(s+3>=e.length)throw new Error("Ran out of data");t[i]=e[s],t[i+1]=e[s+1],t[i+2]=e[s+2],t[i+3]=e[s+3]}],a=[function(){},function(t,e,i,s){let n=e[0];t[i]=n,t[i+1]=n,t[i+2]=n,t[i+3]=s},function(t,e,i){let s=e[0];t[i]=s,t[i+1]=s,t[i+2]=s,t[i+3]=e[1]},function(t,e,i,s){t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2],t[i+3]=s},function(t,e,i){t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2],t[i+3]=e[3]}];function r(t,e){let i=[],s=0;function n(){if(s===t.length)throw new Error("Ran out of data");let n,a,r,o,l,c,h,d,u=t[s];switch(s++,e){default:throw new Error("unrecognised depth");case 16:h=t[s],s++,i.push((u<<8)+h);break;case 4:h=15&u,d=u>>4,i.push(d,h);break;case 2:l=3&u,c=u>>2&3,h=u>>4&3,d=u>>6&3,i.push(d,h,c,l);break;case 1:n=1&u,a=u>>1&1,r=u>>2&1,o=u>>3&1,l=u>>4&1,c=u>>5&1,h=u>>6&1,d=u>>7&1,i.push(d,h,c,l,o,r,a,n);break}}return{get:function(t){while(i.length<t)n();let e=i.slice(0,t);return i=i.slice(t),e},resetAfterLine:function(){i.length=0},end:function(){if(s!==t.length)throw new Error("extra data found")}}}function o(t,e,i,s,a,r){let o=t.width,l=t.height,c=t.index;for(let h=0;h<l;h++)for(let t=0;t<o;t++){let o=i(t,h,c);n[s](e,a,o,r),r+=s}return r}function l(t,e,i,s,n,r){let o=t.width,l=t.height,c=t.index;for(let h=0;h<l;h++){for(let t=0;t<o;t++){let o=n.get(s),l=i(t,h,c);a[s](e,o,l,r)}n.resetAfterLine()}}i.dataToBitMap=function(t,i){let n,a,c=i.width,h=i.height,d=i.depth,u=i.bpp,p=i.interlace;8!==d&&(n=r(t,d)),a=d<=8?e.alloc(c*h*4):new Uint16Array(c*h*4);let f,m,g=Math.pow(2,d)-1,v=0;if(p)f=s.getImagePasses(c,h),m=s.getInterlaceIterator(c,h);else{let t=0;m=function(){let e=t;return t+=4,e},f=[{width:c,height:h}]}for(let e=0;e<f.length;e++)8===d?v=o(f[e],a,m,u,t,v):l(f[e],a,m,u,n,g);if(8===d){if(v!==t.length)throw new Error("extra data found")}else n.end();return a}}).call(this,t("buffer").Buffer)},{"./interlace":11,buffer:28}],2:[function(t,e,i){(function(i){"use strict";let s=t("./constants");e.exports=function(t,e,n,a){let r=-1!==[s.COLORTYPE_COLOR_ALPHA,s.COLORTYPE_ALPHA].indexOf(a.colorType);if(a.colorType===a.inputColorType){let e=function(){let t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256!==new Int16Array(t)[0]}();if(8===a.bitDepth||16===a.bitDepth&&e)return t}let o=16!==a.bitDepth?t:new Uint16Array(t.buffer),l=255,c=s.COLORTYPE_TO_BPP_MAP[a.inputColorType];4!==c||a.inputHasAlpha||(c=3);let h=s.COLORTYPE_TO_BPP_MAP[a.colorType];16===a.bitDepth&&(l=65535,h*=2);let d=i.alloc(e*n*h),u=0,p=0,f=a.bgColor||{};function m(){let t,e,i,n=l;switch(a.inputColorType){case s.COLORTYPE_COLOR_ALPHA:n=o[u+3],t=o[u],e=o[u+1],i=o[u+2];break;case s.COLORTYPE_COLOR:t=o[u],e=o[u+1],i=o[u+2];break;case s.COLORTYPE_ALPHA:n=o[u+1],t=o[u],e=t,i=t;break;case s.COLORTYPE_GRAYSCALE:t=o[u],e=t,i=t;break;default:throw new Error("input color type:"+a.inputColorType+" is not supported at present")}return a.inputHasAlpha&&(r||(n/=l,t=Math.min(Math.max(Math.round((1-n)*f.red+n*t),0),l),e=Math.min(Math.max(Math.round((1-n)*f.green+n*e),0),l),i=Math.min(Math.max(Math.round((1-n)*f.blue+n*i),0),l))),{red:t,green:e,blue:i,alpha:n}}void 0===f.red&&(f.red=l),void 0===f.green&&(f.green=l),void 0===f.blue&&(f.blue=l);for(let i=0;i<n;i++)for(let t=0;t<e;t++){let t=m(o,u);switch(a.colorType){case s.COLORTYPE_COLOR_ALPHA:case s.COLORTYPE_COLOR:8===a.bitDepth?(d[p]=t.red,d[p+1]=t.green,d[p+2]=t.blue,r&&(d[p+3]=t.alpha)):(d.writeUInt16BE(t.red,p),d.writeUInt16BE(t.green,p+2),d.writeUInt16BE(t.blue,p+4),r&&d.writeUInt16BE(t.alpha,p+6));break;case s.COLORTYPE_ALPHA:case s.COLORTYPE_GRAYSCALE:{let e=(t.red+t.green+t.blue)/3;8===a.bitDepth?(d[p]=e,r&&(d[p+1]=t.alpha)):(d.writeUInt16BE(e,p),r&&d.writeUInt16BE(t.alpha,p+2));break}default:throw new Error("unrecognised color Type "+a.colorType)}u+=c,p+=h}return d}}).call(this,t("buffer").Buffer)},{"./constants":4,buffer:28}],3:[function(t,e,i){(function(i,s){"use strict";let n=t("util"),a=t("stream"),r=e.exports=function(){a.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};n.inherits(r,a),r.prototype.read=function(t,e){this._reads.push({length:Math.abs(t),allowLess:t<0,func:e}),i.nextTick(function(){this._process(),this._paused&&this._reads&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))},r.prototype.write=function(t,e){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;let i;return i=s.isBuffer(t)?t:s.from(t,e||this._encoding),this._buffers.push(i),this._buffered+=i.length,this._process(),this._reads&&0===this._reads.length&&(this._paused=!0),this.writable&&!this._paused},r.prototype.end=function(t,e){t&&this.write(t,e),this.writable=!1,this._buffers&&(0===this._buffers.length?this._end():(this._buffers.push(null),this._process()))},r.prototype.destroySoon=r.prototype.end,r.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()},r.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},r.prototype._processReadAllowingLess=function(t){this._reads.shift();let e=this._buffers[0];e.length>t.length?(this._buffered-=t.length,this._buffers[0]=e.slice(t.length),t.func.call(this,e.slice(0,t.length))):(this._buffered-=e.length,this._buffers.shift(),t.func.call(this,e))},r.prototype._processRead=function(t){this._reads.shift();let e=0,i=0,n=s.alloc(t.length);while(e<t.length){let s=this._buffers[i++],a=Math.min(s.length,t.length-e);s.copy(n,e,0,a),e+=a,a!==s.length&&(this._buffers[--i]=s.slice(a))}i>0&&this._buffers.splice(0,i),this._buffered-=t.length,t.func.call(this,n)},r.prototype._process=function(){try{while(this._buffered>0&&this._reads&&this._reads.length>0){let t=this._reads[0];if(t.allowLess)this._processReadAllowingLess(t);else{if(!(this._buffered>=t.length))break;this._processRead(t)}}this._buffers&&!this.writable&&this._end()}catch(t){this.emit("error",t)}}}).call(this,t("_process"),t("buffer").Buffer)},{_process:47,buffer:28,stream:63,util:67}],4:[function(t,e,i){"use strict";e.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}},{}],5:[function(t,e,i){"use strict";let s=[];(function(){for(let t=0;t<256;t++){let e=t;for(let t=0;t<8;t++)1&e?e=3988292384^e>>>1:e>>>=1;s[t]=e}})();let n=e.exports=function(){this._crc=-1};n.prototype.write=function(t){for(let e=0;e<t.length;e++)this._crc=s[255&(this._crc^t[e])]^this._crc>>>8;return!0},n.prototype.crc32=function(){return-1^this._crc},n.crc32=function(t){let e=-1;for(let i=0;i<t.length;i++)e=s[255&(e^t[i])]^e>>>8;return-1^e}},{}],6:[function(t,e,i){(function(i){"use strict";let s=t("./paeth-predictor");function n(t,e,i,s,n){for(let a=0;a<i;a++)s[n+a]=t[e+a]}function a(t,e,i){let s=0,n=e+i;for(let a=e;a<n;a++)s+=Math.abs(t[a]);return s}function r(t,e,i,s,n,a){for(let r=0;r<i;r++){let i=r>=a?t[e+r-a]:0,o=t[e+r]-i;s[n+r]=o}}function o(t,e,i,s){let n=0;for(let a=0;a<i;a++){let i=a>=s?t[e+a-s]:0,r=t[e+a]-i;n+=Math.abs(r)}return n}function l(t,e,i,s,n){for(let a=0;a<i;a++){let r=e>0?t[e+a-i]:0,o=t[e+a]-r;s[n+a]=o}}function c(t,e,i){let s=0,n=e+i;for(let a=e;a<n;a++){let n=e>0?t[a-i]:0,r=t[a]-n;s+=Math.abs(r)}return s}function h(t,e,i,s,n,a){for(let r=0;r<i;r++){let o=r>=a?t[e+r-a]:0,l=e>0?t[e+r-i]:0,c=t[e+r]-(o+l>>1);s[n+r]=c}}function d(t,e,i,s){let n=0;for(let a=0;a<i;a++){let r=a>=s?t[e+a-s]:0,o=e>0?t[e+a-i]:0,l=t[e+a]-(r+o>>1);n+=Math.abs(l)}return n}function u(t,e,i,n,a,r){for(let o=0;o<i;o++){let l=o>=r?t[e+o-r]:0,c=e>0?t[e+o-i]:0,h=e>0&&o>=r?t[e+o-(i+r)]:0,d=t[e+o]-s(l,c,h);n[a+o]=d}}function p(t,e,i,n){let a=0;for(let r=0;r<i;r++){let o=r>=n?t[e+r-n]:0,l=e>0?t[e+r-i]:0,c=e>0&&r>=n?t[e+r-(i+n)]:0,h=t[e+r]-s(o,l,c);a+=Math.abs(h)}return a}let f={0:n,1:r,2:l,3:h,4:u},m={0:a,1:o,2:c,3:d,4:p};e.exports=function(t,e,s,n,a){let r;if("filterType"in n&&-1!==n.filterType){if("number"!==typeof n.filterType)throw new Error("unrecognised filter types");r=[n.filterType]}else r=[0,1,2,3,4];16===n.bitDepth&&(a*=2);let o=e*a,l=0,c=0,h=i.alloc((o+1)*s),d=r[0];for(let i=0;i<s;i++){if(r.length>1){let e=1/0;for(let i=0;i<r.length;i++){let s=m[r[i]](t,c,o,a);s<e&&(d=r[i],e=s)}}h[l]=d,l++,f[d](t,c,o,h,l,a),l+=o,c+=o}return h}}).call(this,t("buffer").Buffer)},{"./paeth-predictor":15,buffer:28}],7:[function(t,e,i){(function(i){"use strict";let s=t("util"),n=t("./chunkstream"),a=t("./filter-parse"),r=e.exports=function(t){n.call(this);let e=[],s=this;this._filter=new a(t,{read:this.read.bind(this),write:function(t){e.push(t)},complete:function(){s.emit("complete",i.concat(e))}}),this._filter.start()};s.inherits(r,n)}).call(this,t("buffer").Buffer)},{"./chunkstream":3,"./filter-parse":9,buffer:28,util:67}],8:[function(t,e,i){(function(e){"use strict";let s=t("./sync-reader"),n=t("./filter-parse");i.process=function(t,i){let a=[],r=new s(t),o=new n(i,{read:r.read.bind(r),write:function(t){a.push(t)},complete:function(){}});return o.start(),r.process(),e.concat(a)}}).call(this,t("buffer").Buffer)},{"./filter-parse":9,"./sync-reader":22,buffer:28}],9:[function(t,e,i){(function(i){"use strict";let s=t("./interlace"),n=t("./paeth-predictor");function a(t,e,i){let s=t*e;return 8!==i&&(s=Math.ceil(s/(8/i))),s}let r=e.exports=function(t,e){let i=t.width,n=t.height,r=t.interlace,o=t.bpp,l=t.depth;if(this.read=e.read,this.write=e.write,this.complete=e.complete,this._imageIndex=0,this._images=[],r){let t=s.getImagePasses(i,n);for(let e=0;e<t.length;e++)this._images.push({byteWidth:a(t[e].width,o,l),height:t[e].height,lineIndex:0})}else this._images.push({byteWidth:a(i,o,l),height:n,lineIndex:0});this._xComparison=8===l?o:16===l?2*o:1};r.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},r.prototype._unFilterType1=function(t,e,i){let s=this._xComparison,n=s-1;for(let a=0;a<i;a++){let i=t[1+a],r=a>n?e[a-s]:0;e[a]=i+r}},r.prototype._unFilterType2=function(t,e,i){let s=this._lastLine;for(let n=0;n<i;n++){let i=t[1+n],a=s?s[n]:0;e[n]=i+a}},r.prototype._unFilterType3=function(t,e,i){let s=this._xComparison,n=s-1,a=this._lastLine;for(let r=0;r<i;r++){let i=t[1+r],o=a?a[r]:0,l=r>n?e[r-s]:0,c=Math.floor((l+o)/2);e[r]=i+c}},r.prototype._unFilterType4=function(t,e,i){let s=this._xComparison,a=s-1,r=this._lastLine;for(let o=0;o<i;o++){let i=t[1+o],l=r?r[o]:0,c=o>a?e[o-s]:0,h=o>a&&r?r[o-s]:0,d=n(c,l,h);e[o]=i+d}},r.prototype._reverseFilterLine=function(t){let e,s=t[0],n=this._images[this._imageIndex],a=n.byteWidth;if(0===s)e=t.slice(1,a+1);else switch(e=i.alloc(a),s){case 1:this._unFilterType1(t,e,a);break;case 2:this._unFilterType2(t,e,a);break;case 3:this._unFilterType3(t,e,a);break;case 4:this._unFilterType4(t,e,a);break;default:throw new Error("Unrecognised filter type - "+s)}this.write(e),n.lineIndex++,n.lineIndex>=n.height?(this._lastLine=null,this._imageIndex++,n=this._images[this._imageIndex]):this._lastLine=e,n?this.read(n.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}}).call(this,t("buffer").Buffer)},{"./interlace":11,"./paeth-predictor":15,buffer:28}],10:[function(t,e,i){(function(t){"use strict";function i(t,e,i,s,n){let a=0;for(let r=0;r<s;r++)for(let s=0;s<i;s++){let i=n[t[a]];if(!i)throw new Error("index "+t[a]+" not in palette");for(let t=0;t<4;t++)e[a+t]=i[t];a+=4}}function s(t,e,i,s,n){let a=0;for(let r=0;r<s;r++)for(let s=0;s<i;s++){let i=!1;if(1===n.length?n[0]===t[a]&&(i=!0):n[0]===t[a]&&n[1]===t[a+1]&&n[2]===t[a+2]&&(i=!0),i)for(let t=0;t<4;t++)e[a+t]=0;a+=4}}function n(t,e,i,s,n){let a=255,r=Math.pow(2,n)-1,o=0;for(let l=0;l<s;l++)for(let s=0;s<i;s++){for(let i=0;i<4;i++)e[o+i]=Math.floor(t[o+i]*a/r+.5);o+=4}}e.exports=function(e,a){let r=a.depth,o=a.width,l=a.height,c=a.colorType,h=a.transColor,d=a.palette,u=e;return 3===c?i(e,u,o,l,d):(h&&s(e,u,o,l,h),8!==r&&(16===r&&(u=t.alloc(o*l*4)),n(e,u,o,l,r))),u}}).call(this,t("buffer").Buffer)},{buffer:28}],11:[function(t,e,i){"use strict";let s=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];i.getImagePasses=function(t,e){let i=[],n=t%8,a=e%8,r=(t-n)/8,o=(e-a)/8;for(let l=0;l<s.length;l++){let t=s[l],e=r*t.x.length,c=o*t.y.length;for(let i=0;i<t.x.length;i++){if(!(t.x[i]<n))break;e++}for(let i=0;i<t.y.length;i++){if(!(t.y[i]<a))break;c++}e>0&&c>0&&i.push({width:e,height:c,index:l})}return i},i.getInterlaceIterator=function(t){return function(e,i,n){let a=e%s[n].x.length,r=(e-a)/s[n].x.length*8+s[n].x[a],o=i%s[n].y.length,l=(i-o)/s[n].y.length*8+s[n].y[o];return 4*r+l*t*4}}},{}],12:[function(t,e,i){(function(i){"use strict";let s=t("util"),n=t("stream"),a=t("./constants"),r=t("./packer"),o=e.exports=function(t){n.call(this);let e=t||{};this._packer=new r(e),this._deflate=this._packer.createDeflate(),this.readable=!0};s.inherits(o,n),o.prototype.pack=function(t,e,s,n){this.emit("data",i.from(a.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(e,s)),n&&this.emit("data",this._packer.packGAMA(n));let r=this._packer.filterData(t,e,s);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(t){this.emit("data",this._packer.packIDAT(t))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(r)}}).call(this,t("buffer").Buffer)},{"./constants":4,"./packer":14,buffer:28,stream:63,util:67}],13:[function(t,e,i){(function(i){"use strict";let s=!0,n=t("zlib");n.deflateSync||(s=!1);let a=t("./constants"),r=t("./packer");e.exports=function(t,e){if(!s)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let o=e||{},l=new r(o),c=[];c.push(i.from(a.PNG_SIGNATURE)),c.push(l.packIHDR(t.width,t.height)),t.gamma&&c.push(l.packGAMA(t.gamma));let h=l.filterData(t.data,t.width,t.height),d=n.deflateSync(h,l.getDeflateOptions());if(h=null,!d||!d.length)throw new Error("bad png - invalid compressed data response");return c.push(l.packIDAT(d)),c.push(l.packIEND()),i.concat(c)}}).call(this,t("buffer").Buffer)},{"./constants":4,"./packer":14,buffer:28,zlib:27}],14:[function(t,e,i){(function(i){"use strict";let s=t("./constants"),n=t("./crc"),a=t("./bitpacker"),r=t("./filter-pack"),o=t("zlib"),l=e.exports=function(t){if(this._options=t,t.deflateChunkSize=t.deflateChunkSize||32768,t.deflateLevel=null!=t.deflateLevel?t.deflateLevel:9,t.deflateStrategy=null!=t.deflateStrategy?t.deflateStrategy:3,t.inputHasAlpha=null==t.inputHasAlpha||t.inputHasAlpha,t.deflateFactory=t.deflateFactory||o.createDeflate,t.bitDepth=t.bitDepth||8,t.colorType="number"===typeof t.colorType?t.colorType:s.COLORTYPE_COLOR_ALPHA,t.inputColorType="number"===typeof t.inputColorType?t.inputColorType:s.COLORTYPE_COLOR_ALPHA,-1===[s.COLORTYPE_GRAYSCALE,s.COLORTYPE_COLOR,s.COLORTYPE_COLOR_ALPHA,s.COLORTYPE_ALPHA].indexOf(t.colorType))throw new Error("option color type:"+t.colorType+" is not supported at present");if(-1===[s.COLORTYPE_GRAYSCALE,s.COLORTYPE_COLOR,s.COLORTYPE_COLOR_ALPHA,s.COLORTYPE_ALPHA].indexOf(t.inputColorType))throw new Error("option input color type:"+t.inputColorType+" is not supported at present");if(8!==t.bitDepth&&16!==t.bitDepth)throw new Error("option bit depth:"+t.bitDepth+" is not supported at present")};l.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},l.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())},l.prototype.filterData=function(t,e,i){let n=a(t,e,i,this._options),o=s.COLORTYPE_TO_BPP_MAP[this._options.colorType],l=r(n,e,i,this._options,o);return l},l.prototype._packChunk=function(t,e){let s=e?e.length:0,a=i.alloc(s+12);return a.writeUInt32BE(s,0),a.writeUInt32BE(t,4),e&&e.copy(a,8),a.writeInt32BE(n.crc32(a.slice(4,a.length-4)),a.length-4),a},l.prototype.packGAMA=function(t){let e=i.alloc(4);return e.writeUInt32BE(Math.floor(t*s.GAMMA_DIVISION),0),this._packChunk(s.TYPE_gAMA,e)},l.prototype.packIHDR=function(t,e){let n=i.alloc(13);return n.writeUInt32BE(t,0),n.writeUInt32BE(e,4),n[8]=this._options.bitDepth,n[9]=this._options.colorType,n[10]=0,n[11]=0,n[12]=0,this._packChunk(s.TYPE_IHDR,n)},l.prototype.packIDAT=function(t){return this._packChunk(s.TYPE_IDAT,t)},l.prototype.packIEND=function(){return this._packChunk(s.TYPE_IEND,null)}}).call(this,t("buffer").Buffer)},{"./bitpacker":2,"./constants":4,"./crc":5,"./filter-pack":6,buffer:28,zlib:27}],15:[function(t,e,i){"use strict";e.exports=function(t,e,i){let s=t+e-i,n=Math.abs(s-t),a=Math.abs(s-e),r=Math.abs(s-i);return n<=a&&n<=r?t:a<=r?e:i}},{}],16:[function(t,e,i){"use strict";let s=t("util"),n=t("zlib"),a=t("./chunkstream"),r=t("./filter-parse-async"),o=t("./parser"),l=t("./bitmapper"),c=t("./format-normaliser"),h=e.exports=function(t){a.call(this),this._parser=new o(t,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=t,this.writable=!0,this._parser.start()};s.inherits(h,a),h.prototype._handleError=function(t){this.emit("error",t),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",(function(){}))),this.errord=!0},h.prototype._inflateData=function(t){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=n.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let t=1+(this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3),e=t*this._bitmapInfo.height,i=Math.max(e,n.Z_MIN_CHUNK);this._inflate=n.createInflate({chunkSize:i});let s=e,a=this.emit.bind(this,"error");this._inflate.on("error",(function(t){s&&a(t)})),this._filter.on("complete",this._complete.bind(this));let r=this._filter.write.bind(this._filter);this._inflate.on("data",(function(t){s&&(t.length>s&&(t=t.slice(0,s)),s-=t.length,r(t))})),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(t)},h.prototype._handleMetaData=function(t){this._metaData=t,this._bitmapInfo=Object.create(t),this._filter=new r(this._bitmapInfo)},h.prototype._handleTransColor=function(t){this._bitmapInfo.transColor=t},h.prototype._handlePalette=function(t){this._bitmapInfo.palette=t},h.prototype._simpleTransparency=function(){this._metaData.alpha=!0},h.prototype._headersFinished=function(){this.emit("metadata",this._metaData)},h.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"))},h.prototype._complete=function(t){if(this.errord)return;let e;try{let i=l.dataToBitMap(t,this._bitmapInfo);e=c(i,this._bitmapInfo),i=null}catch(i){return void this._handleError(i)}this.emit("parsed",e)}},{"./bitmapper":1,"./chunkstream":3,"./filter-parse-async":7,"./format-normaliser":10,"./parser":18,util:67,zlib:27}],17:[function(t,e,i){(function(i){"use strict";let s=!0,n=t("zlib"),a=t("./sync-inflate");n.deflateSync||(s=!1);let r=t("./sync-reader"),o=t("./filter-parse-sync"),l=t("./parser"),c=t("./bitmapper"),h=t("./format-normaliser");e.exports=function(t,e){if(!s)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let d,u,p;function f(t){d=t}function m(t){u=t}function g(t){u.transColor=t}function v(t){u.palette=t}function b(){u.alpha=!0}function y(t){p=t}let _=[];function x(t){_.push(t)}let w=new r(t),C=new l(e,{read:w.read.bind(w),error:f,metadata:m,gamma:y,palette:v,transColor:g,inflateData:x,simpleTransparency:b});if(C.start(),w.process(),d)throw d;let k,S=i.concat(_);if(_.length=0,u.interlace)k=n.inflateSync(S);else{let t=1+(u.width*u.bpp*u.depth+7>>3),e=t*u.height;k=a(S,{chunkSize:e,maxLength:e})}if(S=null,!k||!k.length)throw new Error("bad png - invalid inflate data response");let A=o.process(k,u);S=null;let O=c.dataToBitMap(A,u);A=null;let j=h(O,u);return u.data=j,u.gamma=p||0,u}}).call(this,t("buffer").Buffer)},{"./bitmapper":1,"./filter-parse-sync":8,"./format-normaliser":10,"./parser":18,"./sync-inflate":21,"./sync-reader":22,buffer:28,zlib:27}],18:[function(t,e,i){(function(i){"use strict";let s=t("./constants"),n=t("./crc"),a=e.exports=function(t,e){this._options=t,t.checkCRC=!1!==t.checkCRC,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[s.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[s.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[s.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[s.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[s.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[s.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=e.read,this.error=e.error,this.metadata=e.metadata,this.gamma=e.gamma,this.transColor=e.transColor,this.palette=e.palette,this.parsed=e.parsed,this.inflateData=e.inflateData,this.finished=e.finished,this.simpleTransparency=e.simpleTransparency,this.headersFinished=e.headersFinished||function(){}};a.prototype.start=function(){this.read(s.PNG_SIGNATURE.length,this._parseSignature.bind(this))},a.prototype._parseSignature=function(t){let e=s.PNG_SIGNATURE;for(let i=0;i<e.length;i++)if(t[i]!==e[i])return void this.error(new Error("Invalid file signature"));this.read(8,this._parseChunkBegin.bind(this))},a.prototype._parseChunkBegin=function(t){let e=t.readUInt32BE(0),a=t.readUInt32BE(4),r="";for(let i=4;i<8;i++)r+=String.fromCharCode(t[i]);let o=Boolean(32&t[4]);if(this._hasIHDR||a===s.TYPE_IHDR){if(this._crc=new n,this._crc.write(i.from(r)),this._chunks[a])return this._chunks[a](e);o?this.read(e+4,this._skipChunk.bind(this)):this.error(new Error("Unsupported critical chunk type "+r))}else this.error(new Error("Expected IHDR on beggining"))},a.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))},a.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},a.prototype._parseChunkEnd=function(t){let e=t.readInt32BE(0),i=this._crc.crc32();this._options.checkCRC&&i!==e?this.error(new Error("Crc error - "+e+" - "+i)):this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))},a.prototype._handleIHDR=function(t){this.read(t,this._parseIHDR.bind(this))},a.prototype._parseIHDR=function(t){this._crc.write(t);let e=t.readUInt32BE(0),i=t.readUInt32BE(4),n=t[8],a=t[9],r=t[10],o=t[11],l=t[12];if(8!==n&&4!==n&&2!==n&&1!==n&&16!==n)return void this.error(new Error("Unsupported bit depth "+n));if(!(a in s.COLORTYPE_TO_BPP_MAP))return void this.error(new Error("Unsupported color type"));if(0!==r)return void this.error(new Error("Unsupported compression method"));if(0!==o)return void this.error(new Error("Unsupported filter method"));if(0!==l&&1!==l)return void this.error(new Error("Unsupported interlace method"));this._colorType=a;let c=s.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:e,height:i,depth:n,interlace:Boolean(l),palette:Boolean(a&s.COLORTYPE_PALETTE),color:Boolean(a&s.COLORTYPE_COLOR),alpha:Boolean(a&s.COLORTYPE_ALPHA),bpp:c,colorType:a}),this._handleChunkEnd()},a.prototype._handlePLTE=function(t){this.read(t,this._parsePLTE.bind(this))},a.prototype._parsePLTE=function(t){this._crc.write(t);let e=Math.floor(t.length/3);for(let i=0;i<e;i++)this._palette.push([t[3*i],t[3*i+1],t[3*i+2],255]);this.palette(this._palette),this._handleChunkEnd()},a.prototype._handleTRNS=function(t){this.simpleTransparency(),this.read(t,this._parseTRNS.bind(this))},a.prototype._parseTRNS=function(t){if(this._crc.write(t),this._colorType===s.COLORTYPE_PALETTE_COLOR){if(0===this._palette.length)return void this.error(new Error("Transparency chunk must be after palette"));if(t.length>this._palette.length)return void this.error(new Error("More transparent colors than palette size"));for(let e=0;e<t.length;e++)this._palette[e][3]=t[e];this.palette(this._palette)}this._colorType===s.COLORTYPE_GRAYSCALE&&this.transColor([t.readUInt16BE(0)]),this._colorType===s.COLORTYPE_COLOR&&this.transColor([t.readUInt16BE(0),t.readUInt16BE(2),t.readUInt16BE(4)]),this._handleChunkEnd()},a.prototype._handleGAMA=function(t){this.read(t,this._parseGAMA.bind(this))},a.prototype._parseGAMA=function(t){this._crc.write(t),this.gamma(t.readUInt32BE(0)/s.GAMMA_DIVISION),this._handleChunkEnd()},a.prototype._handleIDAT=function(t){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-t,this._parseIDAT.bind(this,t))},a.prototype._parseIDAT=function(t,e){if(this._crc.write(e),this._colorType===s.COLORTYPE_PALETTE_COLOR&&0===this._palette.length)throw new Error("Expected palette not found");this.inflateData(e);let i=t-e.length;i>0?this._handleIDAT(i):this._handleChunkEnd()},a.prototype._handleIEND=function(t){this.read(t,this._parseIEND.bind(this))},a.prototype._parseIEND=function(t){this._crc.write(t),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}}).call(this,t("buffer").Buffer)},{"./constants":4,"./crc":5,buffer:28}],19:[function(t,e,i){"use strict";let s=t("./parser-sync"),n=t("./packer-sync");i.read=function(t,e){return s(t,e||{})},i.write=function(t,e){return n(t,e)}},{"./packer-sync":13,"./parser-sync":17}],20:[function(t,e,i){(function(e,s){"use strict";let n=t("util"),a=t("stream"),r=t("./parser-async"),o=t("./packer-async"),l=t("./png-sync"),c=i.PNG=function(t){a.call(this),t=t||{},this.width=0|t.width,this.height=0|t.height,this.data=this.width>0&&this.height>0?s.alloc(4*this.width*this.height):null,t.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new r(t),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(t){this.data=t,this.emit("parsed",t)}.bind(this)),this._packer=new o(t),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};n.inherits(c,a),c.sync=l,c.prototype.pack=function(){return this.data&&this.data.length?(e.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this):(this.emit("error","No data provided"),this)},c.prototype.parse=function(t,e){if(e){let t,i;t=function(t){this.removeListener("error",i),this.data=t,e(null,this)}.bind(this),i=function(i){this.removeListener("parsed",t),e(i,null)}.bind(this),this.once("parsed",t),this.once("error",i)}return this.end(t),this},c.prototype.write=function(t){return this._parser.write(t),!0},c.prototype.end=function(t){this._parser.end(t)},c.prototype._metadata=function(t){this.width=t.width,this.height=t.height,this.emit("metadata",t)},c.prototype._gamma=function(t){this.gamma=t},c.prototype._handleClose=function(){this._parser.writable||this._packer.readable||this.emit("close")},c.bitblt=function(t,e,i,s,n,a,r,o){if(i|=0,s|=0,n|=0,a|=0,r|=0,o|=0,i>t.width||s>t.height||i+n>t.width||s+a>t.height)throw new Error("bitblt reading outside image");if(r>e.width||o>e.height||r+n>e.width||o+a>e.height)throw new Error("bitblt writing outside image");for(let l=0;l<a;l++)t.data.copy(e.data,(o+l)*e.width+r<<2,(s+l)*t.width+i<<2,(s+l)*t.width+i+n<<2)},c.prototype.bitblt=function(t,e,i,s,n,a,r){return c.bitblt(this,t,e,i,s,n,a,r),this},c.adjustGamma=function(t){if(t.gamma){for(let e=0;e<t.height;e++)for(let i=0;i<t.width;i++){let s=t.width*e+i<<2;for(let e=0;e<3;e++){let i=t.data[s+e]/255;i=Math.pow(i,1/2.2/t.gamma),t.data[s+e]=Math.round(255*i)}}t.gamma=0}},c.prototype.adjustGamma=function(){c.adjustGamma(this)}}).call(this,t("_process"),t("buffer").Buffer)},{"./packer-async":12,"./parser-async":16,"./png-sync":19,_process:47,buffer:28,stream:63,util:67}],21:[function(t,e,i){(function(s,n){"use strict";let a=t("assert").ok,r=t("zlib"),o=t("util"),l=t("buffer").kMaxLength;function c(t){if(!(this instanceof c))return new c(t);t&&t.chunkSize<r.Z_MIN_CHUNK&&(t.chunkSize=r.Z_MIN_CHUNK),r.Inflate.call(this,t),this._offset=void 0===this._offset?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,t&&null!=t.maxLength&&(this._maxLength=t.maxLength)}function h(t){return new c(t)}function d(t,e){e&&s.nextTick(e),t._handle&&(t._handle.close(),t._handle=null)}function u(t,e){if("string"===typeof e&&(e=n.from(e)),!(e instanceof n))throw new TypeError("Not a string or buffer");let i=t._finishFlushFlag;return null==i&&(i=r.Z_FINISH),t._processChunk(e,i)}function p(t,e){return u(new c(e),t)}c.prototype._processChunk=function(t,e,i){if("function"===typeof i)return r.Inflate._processChunk.call(this,t,e,i);let s,o,c=this,h=t&&t.length,u=this._chunkSize-this._offset,p=this._maxLength,f=0,m=[],g=0;function v(t,e){if(c._hadError)return;let i=u-e;if(a(i>=0,"have should not go down"),i>0){let t=c._buffer.slice(c._offset,c._offset+i);if(c._offset+=i,t.length>p&&(t=t.slice(0,p)),m.push(t),g+=t.length,p-=t.length,0===p)return!1}return(0===e||c._offset>=c._chunkSize)&&(u=c._chunkSize,c._offset=0,c._buffer=n.allocUnsafe(c._chunkSize)),0===e&&(f+=h-t,h=t,!0)}this.on("error",(function(t){s=t})),a(this._handle,"zlib binding closed");do{o=this._handle.writeSync(e,t,f,h,this._buffer,this._offset,u),o=o||this._writeState}while(!this._hadError&&v(o[0],o[1]));if(this._hadError)throw s;if(g>=l)throw d(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+l.toString(16)+" bytes");let b=n.concat(m,g);return d(this),b},o.inherits(c,r.Inflate),e.exports=i=p,i.Inflate=c,i.createInflate=h,i.inflateSync=p}).call(this,t("_process"),t("buffer").Buffer)},{_process:47,assert:23,buffer:28,util:67,zlib:27}],22:[function(t,e,i){"use strict";let s=e.exports=function(t){this._buffer=t,this._reads=[]};s.prototype.read=function(t,e){this._reads.push({length:Math.abs(t),allowLess:t<0,func:e})},s.prototype.process=function(){while(this._reads.length>0&&this._buffer.length){let t=this._reads[0];if(!this._buffer.length||!(this._buffer.length>=t.length||t.allowLess))break;{this._reads.shift();let e=this._buffer;this._buffer=e.slice(t.length),t.func.call(this,e.slice(0,t.length))}}return this._reads.length>0?new Error("There are some read requests waitng on finished stream"):this._buffer.length>0?new Error("unrecognised content at end of stream"):void 0}},{}],23:[function(t,i,s){(function(e){"use strict";
      /*!
       * The buffer module from node.js, for the browser.
       *
       * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
       * @license  MIT
       */function s(t,e){if(t===e)return 0;for(var i=t.length,s=e.length,n=0,a=Math.min(i,s);n<a;++n)if(t[n]!==e[n]){i=t[n],s=e[n];break}return i<s?-1:s<i?1:0}function n(t){return e.Buffer&&"function"===typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var a=t("util/"),r=Object.prototype.hasOwnProperty,o=Array.prototype.slice,l=function(){return"foo"===function(){}.name}();function c(t){return Object.prototype.toString.call(t)}function h(t){return!n(t)&&("function"===typeof e.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var d=i.exports=b,u=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(a.isFunction(t)){if(l)return t.name;var e=t.toString(),i=e.match(u);return i&&i[1]}}function f(t,e){return"string"===typeof t?t.length<e?t:t.slice(0,e):t}function m(t){if(l||!a.isFunction(t))return a.inspect(t);var e=p(t),i=e?": "+e:"";return"[Function"+i+"]"}function g(t){return f(m(t.actual),128)+" "+t.operator+" "+f(m(t.expected),128)}function v(t,e,i,s,n){throw new d.AssertionError({message:i,actual:t,expected:e,operator:s,stackStartFunction:n})}function b(t,e){t||v(t,!0,e,"==",d.ok)}function y(t,e,i,r){if(t===e)return!0;if(n(t)&&n(e))return 0===s(t,e);if(a.isDate(t)&&a.isDate(e))return t.getTime()===e.getTime();if(a.isRegExp(t)&&a.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"===typeof t||null!==e&&"object"===typeof e){if(h(t)&&h(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===s(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(n(t)!==n(e))return!1;r=r||{actual:[],expected:[]};var o=r.actual.indexOf(t);return-1!==o&&o===r.expected.indexOf(e)||(r.actual.push(t),r.expected.push(e),x(t,e,i,r))}return i?t===e:t==e}function _(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function x(t,e,i,s){if(null===t||void 0===t||null===e||void 0===e)return!1;if(a.isPrimitive(t)||a.isPrimitive(e))return t===e;if(i&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var n=_(t),r=_(e);if(n&&!r||!n&&r)return!1;if(n)return t=o.call(t),e=o.call(e),y(t,e,i);var l,c,h=A(t),d=A(e);if(h.length!==d.length)return!1;for(h.sort(),d.sort(),c=h.length-1;c>=0;c--)if(h[c]!==d[c])return!1;for(c=h.length-1;c>=0;c--)if(l=h[c],!y(t[l],e[l],i,s))return!1;return!0}function w(t,e,i){y(t,e,!0)&&v(t,e,i,"notDeepStrictEqual",w)}function C(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(i){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function k(t){var e;try{t()}catch(i){e=i}return e}function S(t,e,i,s){var n;if("function"!==typeof e)throw new TypeError('"block" argument must be a function');"string"===typeof i&&(s=i,i=null),n=k(e),s=(i&&i.name?" ("+i.name+").":".")+(s?" "+s:"."),t&&!n&&v(n,i,"Missing expected exception"+s);var r="string"===typeof s,o=!t&&a.isError(n),l=!t&&n&&!i;if((o&&r&&C(n,i)||l)&&v(n,i,"Got unwanted exception"+s),t&&n&&i&&!C(n,i)||!t&&n)throw n}d.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=g(this),this.generatedMessage=!0);var e=t.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var i=new Error;if(i.stack){var s=i.stack,n=p(e),a=s.indexOf("\n"+n);if(a>=0){var r=s.indexOf("\n",a+1);s=s.substring(r+1)}this.stack=s}}},a.inherits(d.AssertionError,Error),d.fail=v,d.ok=b,d.equal=function(t,e,i){t!=e&&v(t,e,i,"==",d.equal)},d.notEqual=function(t,e,i){t==e&&v(t,e,i,"!=",d.notEqual)},d.deepEqual=function(t,e,i){y(t,e,!1)||v(t,e,i,"deepEqual",d.deepEqual)},d.deepStrictEqual=function(t,e,i){y(t,e,!0)||v(t,e,i,"deepStrictEqual",d.deepStrictEqual)},d.notDeepEqual=function(t,e,i){y(t,e,!1)&&v(t,e,i,"notDeepEqual",d.notDeepEqual)},d.notDeepStrictEqual=w,d.strictEqual=function(t,e,i){t!==e&&v(t,e,i,"===",d.strictEqual)},d.notStrictEqual=function(t,e,i){t===e&&v(t,e,i,"!==",d.notStrictEqual)},d.throws=function(t,e,i){S(!0,t,e,i)},d.doesNotThrow=function(t,e,i){S(!1,t,e,i)},d.ifError=function(t){if(t)throw t};var A=Object.keys||function(t){var e=[];for(var i in t)r.call(t,i)&&e.push(i);return e}}).call(this,"undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"util/":67}],24:[function(t,e,i){"use strict";i.byteLength=h,i.toByteArray=d,i.fromByteArray=f;for(var s=[],n=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=r.length;o<l;++o)s[o]=r[o],n[r.charCodeAt(o)]=o;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function h(t){return 3*t.length/4-c(t)}function d(t){var e,i,s,r,o,l=t.length;r=c(t),o=new a(3*l/4-r),i=r>0?l-4:l;var h=0;for(e=0;e<i;e+=4)s=n[t.charCodeAt(e)]<<18|n[t.charCodeAt(e+1)]<<12|n[t.charCodeAt(e+2)]<<6|n[t.charCodeAt(e+3)],o[h++]=s>>16&255,o[h++]=s>>8&255,o[h++]=255&s;return 2===r?(s=n[t.charCodeAt(e)]<<2|n[t.charCodeAt(e+1)]>>4,o[h++]=255&s):1===r&&(s=n[t.charCodeAt(e)]<<10|n[t.charCodeAt(e+1)]<<4|n[t.charCodeAt(e+2)]>>2,o[h++]=s>>8&255,o[h++]=255&s),o}function u(t){return s[t>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}function p(t,e,i){for(var s,n=[],a=e;a<i;a+=3)s=(t[a]<<16)+(t[a+1]<<8)+t[a+2],n.push(u(s));return n.join("")}function f(t){for(var e,i=t.length,n=i%3,a="",r=[],o=16383,l=0,c=i-n;l<c;l+=o)r.push(p(t,l,l+o>c?c:l+o));return 1===n?(e=t[i-1],a+=s[e>>2],a+=s[e<<4&63],a+="=="):2===n&&(e=(t[i-2]<<8)+t[i-1],a+=s[e>>10],a+=s[e>>4&63],a+=s[e<<2&63],a+="="),r.push(a),r.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},{}],25:[function(t,e,i){},{}],26:[function(t,e,i){(function(e,s){"use strict";var n=t("assert"),a=t("pako/lib/zlib/zstream"),r=t("pako/lib/zlib/deflate.js"),o=t("pako/lib/zlib/inflate.js"),l=t("pako/lib/zlib/constants");for(var c in l)i[c]=l[c];i.NONE=0,i.DEFLATE=1,i.INFLATE=2,i.GZIP=3,i.GUNZIP=4,i.DEFLATERAW=5,i.INFLATERAW=6,i.UNZIP=7;var h=31,d=139;function u(t){if("number"!==typeof t||t<i.DEFLATE||t>i.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=t,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}u.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,n(this.init_done,"close before init"),n(this.mode<=i.UNZIP),this.mode===i.DEFLATE||this.mode===i.GZIP||this.mode===i.DEFLATERAW?r.deflateEnd(this.strm):this.mode!==i.INFLATE&&this.mode!==i.GUNZIP&&this.mode!==i.INFLATERAW&&this.mode!==i.UNZIP||o.inflateEnd(this.strm),this.mode=i.NONE,this.dictionary=null)},u.prototype.write=function(t,e,i,s,n,a,r){return this._write(!0,t,e,i,s,n,a,r)},u.prototype.writeSync=function(t,e,i,s,n,a,r){return this._write(!1,t,e,i,s,n,a,r)},u.prototype._write=function(t,a,r,o,l,c,h,d){if(n.equal(arguments.length,8),n(this.init_done,"write before init"),n(this.mode!==i.NONE,"already finalized"),n.equal(!1,this.write_in_progress,"write already in progress"),n.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,n.equal(!1,void 0===a,"must provide flush value"),this.write_in_progress=!0,a!==i.Z_NO_FLUSH&&a!==i.Z_PARTIAL_FLUSH&&a!==i.Z_SYNC_FLUSH&&a!==i.Z_FULL_FLUSH&&a!==i.Z_FINISH&&a!==i.Z_BLOCK)throw new Error("Invalid flush value");if(null==r&&(r=s.alloc(0),l=0,o=0),this.strm.avail_in=l,this.strm.input=r,this.strm.next_in=o,this.strm.avail_out=d,this.strm.output=c,this.strm.next_out=h,this.flush=a,!t)return this._process(),this._checkError()?this._afterSync():void 0;var u=this;return e.nextTick((function(){u._process(),u._after()})),this},u.prototype._afterSync=function(){var t=this.strm.avail_out,e=this.strm.avail_in;return this.write_in_progress=!1,[e,t]},u.prototype._process=function(){var t=null;switch(this.mode){case i.DEFLATE:case i.GZIP:case i.DEFLATERAW:this.err=r.deflate(this.strm,this.flush);break;case i.UNZIP:switch(this.strm.avail_in>0&&(t=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===t)break;if(this.strm.input[t]!==h){this.mode=i.INFLATE;break}if(this.gzip_id_bytes_read=1,t++,1===this.strm.avail_in)break;case 1:if(null===t)break;this.strm.input[t]===d?(this.gzip_id_bytes_read=2,this.mode=i.GUNZIP):this.mode=i.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case i.INFLATE:case i.GUNZIP:case i.INFLATERAW:this.err=o.inflate(this.strm,this.flush),this.err===i.Z_NEED_DICT&&this.dictionary&&(this.err=o.inflateSetDictionary(this.strm,this.dictionary),this.err===i.Z_OK?this.err=o.inflate(this.strm,this.flush):this.err===i.Z_DATA_ERROR&&(this.err=i.Z_NEED_DICT));while(this.strm.avail_in>0&&this.mode===i.GUNZIP&&this.err===i.Z_STREAM_END&&0!==this.strm.next_in[0])this.reset(),this.err=o.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},u.prototype._checkError=function(){switch(this.err){case i.Z_OK:case i.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===i.Z_FINISH)return this._error("unexpected end of file"),!1;break;case i.Z_STREAM_END:break;case i.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},u.prototype._after=function(){if(this._checkError()){var t=this.strm.avail_out,e=this.strm.avail_in;this.write_in_progress=!1,this.callback(e,t),this.pending_close&&this.close()}},u.prototype._error=function(t){this.strm.msg&&(t=this.strm.msg),this.onerror(t,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},u.prototype.init=function(t,e,s,a,r){n(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),n(t>=8&&t<=15,"invalid windowBits"),n(e>=-1&&e<=9,"invalid compression level"),n(s>=1&&s<=9,"invalid memlevel"),n(a===i.Z_FILTERED||a===i.Z_HUFFMAN_ONLY||a===i.Z_RLE||a===i.Z_FIXED||a===i.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(e,t,s,a,r),this._setDictionary()},u.prototype.params=function(){throw new Error("deflateParams Not supported")},u.prototype.reset=function(){this._reset(),this._setDictionary()},u.prototype._init=function(t,e,s,n,l){switch(this.level=t,this.windowBits=e,this.memLevel=s,this.strategy=n,this.flush=i.Z_NO_FLUSH,this.err=i.Z_OK,this.mode!==i.GZIP&&this.mode!==i.GUNZIP||(this.windowBits+=16),this.mode===i.UNZIP&&(this.windowBits+=32),this.mode!==i.DEFLATERAW&&this.mode!==i.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new a,this.mode){case i.DEFLATE:case i.GZIP:case i.DEFLATERAW:this.err=r.deflateInit2(this.strm,this.level,i.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case i.INFLATE:case i.GUNZIP:case i.INFLATERAW:case i.UNZIP:this.err=o.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==i.Z_OK&&this._error("Init error"),this.dictionary=l,this.write_in_progress=!1,this.init_done=!0},u.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=i.Z_OK,this.mode){case i.DEFLATE:case i.DEFLATERAW:this.err=r.deflateSetDictionary(this.strm,this.dictionary);break;default:break}this.err!==i.Z_OK&&this._error("Failed to set dictionary")}},u.prototype._reset=function(){switch(this.err=i.Z_OK,this.mode){case i.DEFLATE:case i.DEFLATERAW:case i.GZIP:this.err=r.deflateReset(this.strm);break;case i.INFLATE:case i.INFLATERAW:case i.GUNZIP:this.err=o.inflateReset(this.strm);break;default:break}this.err!==i.Z_OK&&this._error("Failed to reset stream")},i.Zlib=u}).call(this,t("_process"),t("buffer").Buffer)},{_process:47,assert:23,buffer:28,"pako/lib/zlib/constants":37,"pako/lib/zlib/deflate.js":39,"pako/lib/zlib/inflate.js":41,"pako/lib/zlib/zstream":45}],27:[function(t,e,i){(function(e){"use strict";var s=t("buffer").Buffer,n=t("stream").Transform,a=t("./binding"),r=t("util"),o=t("assert").ok,l=t("buffer").kMaxLength,c="Cannot create final Buffer. It would be larger than 0x"+l.toString(16)+" bytes";a.Z_MIN_WINDOWBITS=8,a.Z_MAX_WINDOWBITS=15,a.Z_DEFAULT_WINDOWBITS=15,a.Z_MIN_CHUNK=64,a.Z_MAX_CHUNK=1/0,a.Z_DEFAULT_CHUNK=16384,a.Z_MIN_MEMLEVEL=1,a.Z_MAX_MEMLEVEL=9,a.Z_DEFAULT_MEMLEVEL=8,a.Z_MIN_LEVEL=-1,a.Z_MAX_LEVEL=9,a.Z_DEFAULT_LEVEL=a.Z_DEFAULT_COMPRESSION;for(var h=Object.keys(a),d=0;d<h.length;d++){var u=h[d];u.match(/^Z/)&&Object.defineProperty(i,u,{enumerable:!0,value:a[u],writable:!1})}for(var p={Z_OK:a.Z_OK,Z_STREAM_END:a.Z_STREAM_END,Z_NEED_DICT:a.Z_NEED_DICT,Z_ERRNO:a.Z_ERRNO,Z_STREAM_ERROR:a.Z_STREAM_ERROR,Z_DATA_ERROR:a.Z_DATA_ERROR,Z_MEM_ERROR:a.Z_MEM_ERROR,Z_BUF_ERROR:a.Z_BUF_ERROR,Z_VERSION_ERROR:a.Z_VERSION_ERROR},f=Object.keys(p),m=0;m<f.length;m++){var g=f[m];p[p[g]]=g}function v(t,e,i){var n=[],a=0;function r(){var e;while(null!==(e=t.read()))n.push(e),a+=e.length;t.once("readable",r)}function o(e){t.removeListener("end",h),t.removeListener("readable",r),i(e)}function h(){var e,r=null;a>=l?r=new RangeError(c):e=s.concat(n,a),n=[],t.close(),i(r,e)}t.on("error",o),t.on("end",h),t.end(e),r()}function b(t,e){if("string"===typeof e&&(e=s.from(e)),!s.isBuffer(e))throw new TypeError("Not a string or buffer");var i=t._finishFlushFlag;return t._processChunk(e,i)}function y(t){if(!(this instanceof y))return new y(t);O.call(this,t,a.DEFLATE)}function _(t){if(!(this instanceof _))return new _(t);O.call(this,t,a.INFLATE)}function x(t){if(!(this instanceof x))return new x(t);O.call(this,t,a.GZIP)}function w(t){if(!(this instanceof w))return new w(t);O.call(this,t,a.GUNZIP)}function C(t){if(!(this instanceof C))return new C(t);O.call(this,t,a.DEFLATERAW)}function k(t){if(!(this instanceof k))return new k(t);O.call(this,t,a.INFLATERAW)}function S(t){if(!(this instanceof S))return new S(t);O.call(this,t,a.UNZIP)}function A(t){return t===a.Z_NO_FLUSH||t===a.Z_PARTIAL_FLUSH||t===a.Z_SYNC_FLUSH||t===a.Z_FULL_FLUSH||t===a.Z_FINISH||t===a.Z_BLOCK}function O(t,e){var r=this;if(this._opts=t=t||{},this._chunkSize=t.chunkSize||i.Z_DEFAULT_CHUNK,n.call(this,t),t.flush&&!A(t.flush))throw new Error("Invalid flush flag: "+t.flush);if(t.finishFlush&&!A(t.finishFlush))throw new Error("Invalid flush flag: "+t.finishFlush);if(this._flushFlag=t.flush||a.Z_NO_FLUSH,this._finishFlushFlag="undefined"!==typeof t.finishFlush?t.finishFlush:a.Z_FINISH,t.chunkSize&&(t.chunkSize<i.Z_MIN_CHUNK||t.chunkSize>i.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+t.chunkSize);if(t.windowBits&&(t.windowBits<i.Z_MIN_WINDOWBITS||t.windowBits>i.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+t.windowBits);if(t.level&&(t.level<i.Z_MIN_LEVEL||t.level>i.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+t.level);if(t.memLevel&&(t.memLevel<i.Z_MIN_MEMLEVEL||t.memLevel>i.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+t.memLevel);if(t.strategy&&t.strategy!=i.Z_FILTERED&&t.strategy!=i.Z_HUFFMAN_ONLY&&t.strategy!=i.Z_RLE&&t.strategy!=i.Z_FIXED&&t.strategy!=i.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+t.strategy);if(t.dictionary&&!s.isBuffer(t.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new a.Zlib(e);var o=this;this._hadError=!1,this._handle.onerror=function(t,e){j(o),o._hadError=!0;var s=new Error(t);s.errno=e,s.code=i.codes[e],o.emit("error",s)};var l=i.Z_DEFAULT_COMPRESSION;"number"===typeof t.level&&(l=t.level);var c=i.Z_DEFAULT_STRATEGY;"number"===typeof t.strategy&&(c=t.strategy),this._handle.init(t.windowBits||i.Z_DEFAULT_WINDOWBITS,l,t.memLevel||i.Z_DEFAULT_MEMLEVEL,c,t.dictionary),this._buffer=s.allocUnsafe(this._chunkSize),this._offset=0,this._level=l,this._strategy=c,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!r._handle},configurable:!0,enumerable:!0})}function j(t,i){i&&e.nextTick(i),t._handle&&(t._handle.close(),t._handle=null)}function M(t){t.emit("close")}Object.defineProperty(i,"codes",{enumerable:!0,value:Object.freeze(p),writable:!1}),i.Deflate=y,i.Inflate=_,i.Gzip=x,i.Gunzip=w,i.DeflateRaw=C,i.InflateRaw=k,i.Unzip=S,i.createDeflate=function(t){return new y(t)},i.createInflate=function(t){return new _(t)},i.createDeflateRaw=function(t){return new C(t)},i.createInflateRaw=function(t){return new k(t)},i.createGzip=function(t){return new x(t)},i.createGunzip=function(t){return new w(t)},i.createUnzip=function(t){return new S(t)},i.deflate=function(t,e,i){return"function"===typeof e&&(i=e,e={}),v(new y(e),t,i)},i.deflateSync=function(t,e){return b(new y(e),t)},i.gzip=function(t,e,i){return"function"===typeof e&&(i=e,e={}),v(new x(e),t,i)},i.gzipSync=function(t,e){return b(new x(e),t)},i.deflateRaw=function(t,e,i){return"function"===typeof e&&(i=e,e={}),v(new C(e),t,i)},i.deflateRawSync=function(t,e){return b(new C(e),t)},i.unzip=function(t,e,i){return"function"===typeof e&&(i=e,e={}),v(new S(e),t,i)},i.unzipSync=function(t,e){return b(new S(e),t)},i.inflate=function(t,e,i){return"function"===typeof e&&(i=e,e={}),v(new _(e),t,i)},i.inflateSync=function(t,e){return b(new _(e),t)},i.gunzip=function(t,e,i){return"function"===typeof e&&(i=e,e={}),v(new w(e),t,i)},i.gunzipSync=function(t,e){return b(new w(e),t)},i.inflateRaw=function(t,e,i){return"function"===typeof e&&(i=e,e={}),v(new k(e),t,i)},i.inflateRawSync=function(t,e){return b(new k(e),t)},r.inherits(O,n),O.prototype.params=function(t,s,n){if(t<i.Z_MIN_LEVEL||t>i.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+t);if(s!=i.Z_FILTERED&&s!=i.Z_HUFFMAN_ONLY&&s!=i.Z_RLE&&s!=i.Z_FIXED&&s!=i.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+s);if(this._level!==t||this._strategy!==s){var r=this;this.flush(a.Z_SYNC_FLUSH,(function(){o(r._handle,"zlib binding closed"),r._handle.params(t,s),r._hadError||(r._level=t,r._strategy=s,n&&n())}))}else e.nextTick(n)},O.prototype.reset=function(){return o(this._handle,"zlib binding closed"),this._handle.reset()},O.prototype._flush=function(t){this._transform(s.alloc(0),"",t)},O.prototype.flush=function(t,i){var n=this,r=this._writableState;("function"===typeof t||void 0===t&&!i)&&(i=t,t=a.Z_FULL_FLUSH),r.ended?i&&e.nextTick(i):r.ending?i&&this.once("end",i):r.needDrain?i&&this.once("drain",(function(){return n.flush(t,i)})):(this._flushFlag=t,this.write(s.alloc(0),"",i))},O.prototype.close=function(t){j(this,t),e.nextTick(M,this)},O.prototype._transform=function(t,e,i){var n,r=this._writableState,o=r.ending||r.ended,l=o&&(!t||r.length===t.length);return null===t||s.isBuffer(t)?this._handle?(l?n=this._finishFlushFlag:(n=this._flushFlag,t.length>=r.length&&(this._flushFlag=this._opts.flush||a.Z_NO_FLUSH)),void this._processChunk(t,n,i)):i(new Error("zlib binding closed")):i(new Error("invalid input"))},O.prototype._processChunk=function(t,e,i){var n=t&&t.length,a=this._chunkSize-this._offset,r=0,h=this,d="function"===typeof i;if(!d){var u,p=[],f=0;this.on("error",(function(t){u=t})),o(this._handle,"zlib binding closed");do{var m=this._handle.writeSync(e,t,r,n,this._buffer,this._offset,a)}while(!this._hadError&&b(m[0],m[1]));if(this._hadError)throw u;if(f>=l)throw j(this),new RangeError(c);var g=s.concat(p,f);return j(this),g}o(this._handle,"zlib binding closed");var v=this._handle.write(e,t,r,n,this._buffer,this._offset,a);function b(l,c){if(this&&(this.buffer=null,this.callback=null),!h._hadError){var u=a-c;if(o(u>=0,"have should not go down"),u>0){var m=h._buffer.slice(h._offset,h._offset+u);h._offset+=u,d?h.push(m):(p.push(m),f+=m.length)}if((0===c||h._offset>=h._chunkSize)&&(a=h._chunkSize,h._offset=0,h._buffer=s.allocUnsafe(h._chunkSize)),0===c){if(r+=n-l,n=l,!d)return!0;var g=h._handle.write(e,t,r,n,h._buffer,h._offset,h._chunkSize);return g.callback=b,void(g.buffer=t)}if(!d)return!1;i()}}v.buffer=t,v.callback=b},r.inherits(y,O),r.inherits(_,O),r.inherits(x,O),r.inherits(w,O),r.inherits(C,O),r.inherits(k,O),r.inherits(S,O)}).call(this,t("_process"))},{"./binding":26,_process:47,assert:23,buffer:28,stream:63,util:67}],28:[function(t,e,i){
      /*!
       * The buffer module from node.js, for the browser.
       *
       * @author   Feross Aboukhadijeh <https://feross.org>
       * @license  MIT
       */
      "use strict";var s=t("base64-js"),n=t("ieee754");i.Buffer=l,i.SlowBuffer=b,i.INSPECT_MAX_BYTES=50;var a=2147483647;function r(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(e){return!1}}function o(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=l.prototype,e}function l(t,e,i){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return u(t)}return c(t,e,i)}function c(t,e,i){if("string"===typeof t)return p(t,e);if(ArrayBuffer.isView(t))return f(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Z(t,ArrayBuffer)||t&&Z(t.buffer,ArrayBuffer))return m(t,e,i);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var s=t.valueOf&&t.valueOf();if(null!=s&&s!==t)return l.from(s,e,i);var n=g(t);if(n)return n;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return l.from(t[Symbol.toPrimitive]("string"),e,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function h(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t,e,i){return h(t),t<=0?o(t):void 0!==e?"string"===typeof i?o(t).fill(e,i):o(t).fill(e):o(t)}function u(t){return h(t),o(t<0?0:0|v(t))}function p(t,e){if("string"===typeof e&&""!==e||(e="utf8"),!l.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var i=0|y(t,e),s=o(i),n=s.write(t,e);return n!==i&&(s=s.slice(0,n)),s}function f(t){for(var e=t.length<0?0:0|v(t.length),i=o(e),s=0;s<e;s+=1)i[s]=255&t[s];return i}function m(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');var s;return s=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i),s.__proto__=l.prototype,s}function g(t){if(l.isBuffer(t)){var e=0|v(t.length),i=o(e);return 0===i.length||t.copy(i,0,0,e),i}return void 0!==t.length?"number"!==typeof t.length||K(t.length)?o(0):f(t):"Buffer"===t.type&&Array.isArray(t.data)?f(t.data):void 0}function v(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function b(t){return+t!=t&&(t=0),l.alloc(+t)}function y(t,e){if(l.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Z(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var i=t.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return X(t).length;default:if(n)return s?-1:W(t).length;e=(""+e).toLowerCase(),n=!0}}function _(t,e,i){var s=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if(i>>>=0,e>>>=0,i<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return R(this,e,i);case"utf8":case"utf-8":return T(this,e,i);case"ascii":return L(this,e,i);case"latin1":case"binary":return P(this,e,i);case"base64":return I(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,e,i);default:if(s)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function x(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function w(t,e,i,s,n){if(0===t.length)return-1;if("string"===typeof i?(s=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,K(i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"===typeof e&&(e=l.from(e,s)),l.isBuffer(e))return 0===e.length?-1:C(t,e,i,s,n);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):C(t,[e],i,s,n);throw new TypeError("val must be string, number or Buffer")}function C(t,e,i,s,n){var a,r=1,o=t.length,l=e.length;if(void 0!==s&&(s=String(s).toLowerCase(),"ucs2"===s||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(t.length<2||e.length<2)return-1;r=2,o/=2,l/=2,i/=2}function c(t,e){return 1===r?t[e]:t.readUInt16BE(e*r)}if(n){var h=-1;for(a=i;a<o;a++)if(c(t,a)===c(e,-1===h?0:a-h)){if(-1===h&&(h=a),a-h+1===l)return h*r}else-1!==h&&(a-=a-h),h=-1}else for(i+l>o&&(i=o-l),a=i;a>=0;a--){for(var d=!0,u=0;u<l;u++)if(c(t,a+u)!==c(e,u)){d=!1;break}if(d)return a}return-1}function k(t,e,i,s){i=Number(i)||0;var n=t.length-i;s?(s=Number(s),s>n&&(s=n)):s=n;var a=e.length;s>a/2&&(s=a/2);for(var r=0;r<s;++r){var o=parseInt(e.substr(2*r,2),16);if(K(o))return r;t[i+r]=o}return r}function S(t,e,i,s){return Q(W(e,t.length-i),t,i,s)}function A(t,e,i,s){return Q(Y(e),t,i,s)}function O(t,e,i,s){return A(t,e,i,s)}function j(t,e,i,s){return Q(X(e),t,i,s)}function M(t,e,i,s){return Q(q(e,t.length-i),t,i,s)}function I(t,e,i){return 0===e&&i===t.length?s.fromByteArray(t):s.fromByteArray(t.slice(e,i))}function T(t,e,i){i=Math.min(t.length,i);var s=[],n=e;while(n<i){var a,r,o,l,c=t[n],h=null,d=c>239?4:c>223?3:c>191?2:1;if(n+d<=i)switch(d){case 1:c<128&&(h=c);break;case 2:a=t[n+1],128===(192&a)&&(l=(31&c)<<6|63&a,l>127&&(h=l));break;case 3:a=t[n+1],r=t[n+2],128===(192&a)&&128===(192&r)&&(l=(15&c)<<12|(63&a)<<6|63&r,l>2047&&(l<55296||l>57343)&&(h=l));break;case 4:a=t[n+1],r=t[n+2],o=t[n+3],128===(192&a)&&128===(192&r)&&128===(192&o)&&(l=(15&c)<<18|(63&a)<<12|(63&r)<<6|63&o,l>65535&&l<1114112&&(h=l))}null===h?(h=65533,d=1):h>65535&&(h-=65536,s.push(h>>>10&1023|55296),h=56320|1023&h),s.push(h),n+=d}return D(s)}i.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=r(),!l.TYPED_ARRAY_SUPPORT&&"undefined"!==typeof console&&console.error,Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),"undefined"!==typeof Symbol&&null!=Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),l.poolSize=8192,l.from=function(t,e,i){return c(t,e,i)},l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,l.alloc=function(t,e,i){return d(t,e,i)},l.allocUnsafe=function(t){return u(t)},l.allocUnsafeSlow=function(t){return u(t)},l.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==l.prototype},l.compare=function(t,e){if(Z(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),Z(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var i=t.length,s=e.length,n=0,a=Math.min(i,s);n<a;++n)if(t[n]!==e[n]){i=t[n],s=e[n];break}return i<s?-1:s<i?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var s=l.allocUnsafe(e),n=0;for(i=0;i<t.length;++i){var a=t[i];if(Z(a,Uint8Array)&&(a=l.from(a)),!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(s,n),n+=a.length}return s},l.byteLength=y,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)x(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)x(this,e,e+3),x(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)x(this,e,e+7),x(this,e+1,e+6),x(this,e+2,e+5),x(this,e+3,e+4);return this},l.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?T(this,0,t):_.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",e=i.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},l.prototype.compare=function(t,e,i,s,n){if(Z(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),e<0||i>t.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&e>=i)return 0;if(s>=n)return-1;if(e>=i)return 1;if(e>>>=0,i>>>=0,s>>>=0,n>>>=0,this===t)return 0;for(var a=n-s,r=i-e,o=Math.min(a,r),c=this.slice(s,n),h=t.slice(e,i),d=0;d<o;++d)if(c[d]!==h[d]){a=c[d],r=h[d];break}return a<r?-1:r<a?1:0},l.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},l.prototype.indexOf=function(t,e,i){return w(this,t,e,i,!0)},l.prototype.lastIndexOf=function(t,e,i){return w(this,t,e,i,!1)},l.prototype.write=function(t,e,i,s){if(void 0===e)s="utf8",i=this.length,e=0;else if(void 0===i&&"string"===typeof e)s=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===s&&(s="utf8")):(s=i,i=void 0)}var n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var a=!1;;)switch(s){case"hex":return k(this,t,e,i);case"utf8":case"utf-8":return S(this,t,e,i);case"ascii":return A(this,t,e,i);case"latin1":case"binary":return O(this,t,e,i);case"base64":return j(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,e,i);default:if(a)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function D(t){var e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);var i="",s=0;while(s<e)i+=String.fromCharCode.apply(String,t.slice(s,s+=E));return i}function L(t,e,i){var s="";i=Math.min(t.length,i);for(var n=e;n<i;++n)s+=String.fromCharCode(127&t[n]);return s}function P(t,e,i){var s="";i=Math.min(t.length,i);for(var n=e;n<i;++n)s+=String.fromCharCode(t[n]);return s}function R(t,e,i){var s=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>s)&&(i=s);for(var n="",a=e;a<i;++a)n+=G(t[a]);return n}function z(t,e,i){for(var s=t.slice(e,i),n="",a=0;a<s.length;a+=2)n+=String.fromCharCode(s[a]+256*s[a+1]);return n}function N(t,e,i){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function B(t,e,i,s,n,a){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<a)throw new RangeError('"value" argument is out of bounds');if(i+s>t.length)throw new RangeError("Index out of range")}function F(t,e,i,s,n,a){if(i+s>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function $(t,e,i,s,a){return e=+e,i>>>=0,a||F(t,e,i,4,34028234663852886e22,-34028234663852886e22),n.write(t,e,i,s,23,4),i+4}function U(t,e,i,s,a){return e=+e,i>>>=0,a||F(t,e,i,8,17976931348623157e292,-17976931348623157e292),n.write(t,e,i,s,52,8),i+8}l.prototype.slice=function(t,e){var i=this.length;t=~~t,e=void 0===e?i:~~e,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),e<t&&(e=t);var s=this.subarray(t,e);return s.__proto__=l.prototype,s},l.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||N(t,e,this.length);var s=this[t],n=1,a=0;while(++a<e&&(n*=256))s+=this[t+a]*n;return s},l.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||N(t,e,this.length);var s=this[t+--e],n=1;while(e>0&&(n*=256))s+=this[t+--e]*n;return s},l.prototype.readUInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||N(t,e,this.length);var s=this[t],n=1,a=0;while(++a<e&&(n*=256))s+=this[t+a]*n;return n*=128,s>=n&&(s-=Math.pow(2,8*e)),s},l.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||N(t,e,this.length);var s=e,n=1,a=this[t+--s];while(s>0&&(n*=256))a+=this[t+--s]*n;return n*=128,a>=n&&(a-=Math.pow(2,8*e)),a},l.prototype.readInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){t>>>=0,e||N(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(t,e){t>>>=0,e||N(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return t>>>=0,e||N(t,4,this.length),n.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return t>>>=0,e||N(t,4,this.length),n.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return t>>>=0,e||N(t,8,this.length),n.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return t>>>=0,e||N(t,8,this.length),n.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,i,s){if(t=+t,e>>>=0,i>>>=0,!s){var n=Math.pow(2,8*i)-1;B(this,t,e,i,n,0)}var a=1,r=0;this[e]=255&t;while(++r<i&&(a*=256))this[e+r]=t/a&255;return e+i},l.prototype.writeUIntBE=function(t,e,i,s){if(t=+t,e>>>=0,i>>>=0,!s){var n=Math.pow(2,8*i)-1;B(this,t,e,i,n,0)}var a=i-1,r=1;this[e+a]=255&t;while(--a>=0&&(r*=256))this[e+a]=t/r&255;return e+i},l.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||B(this,t,e,1,255,0),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||B(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||B(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||B(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},l.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||B(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeIntLE=function(t,e,i,s){if(t=+t,e>>>=0,!s){var n=Math.pow(2,8*i-1);B(this,t,e,i,n-1,-n)}var a=0,r=1,o=0;this[e]=255&t;while(++a<i&&(r*=256))t<0&&0===o&&0!==this[e+a-1]&&(o=1),this[e+a]=(t/r>>0)-o&255;return e+i},l.prototype.writeIntBE=function(t,e,i,s){if(t=+t,e>>>=0,!s){var n=Math.pow(2,8*i-1);B(this,t,e,i,n-1,-n)}var a=i-1,r=1,o=0;this[e+a]=255&t;while(--a>=0&&(r*=256))t<0&&0===o&&0!==this[e+a+1]&&(o=1),this[e+a]=(t/r>>0)-o&255;return e+i},l.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||B(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||B(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||B(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||B(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},l.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||B(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeFloatLE=function(t,e,i){return $(this,t,e,!0,i)},l.prototype.writeFloatBE=function(t,e,i){return $(this,t,e,!1,i)},l.prototype.writeDoubleLE=function(t,e,i){return U(this,t,e,!0,i)},l.prototype.writeDoubleBE=function(t,e,i){return U(this,t,e,!1,i)},l.prototype.copy=function(t,e,i,s){if(!l.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),s||0===s||(s=this.length),e>=t.length&&(e=t.length),e||(e=0),s>0&&s<i&&(s=i),s===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-e<s-i&&(s=t.length-e+i);var n=s-i;if(this===t&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,i,s);else if(this===t&&i<e&&e<s)for(var a=n-1;a>=0;--a)t[a+e]=this[a+i];else Uint8Array.prototype.set.call(t,this.subarray(i,s),e);return n},l.prototype.fill=function(t,e,i,s){if("string"===typeof t){if("string"===typeof e?(s=e,e=0,i=this.length):"string"===typeof i&&(s=i,i=this.length),void 0!==s&&"string"!==typeof s)throw new TypeError("encoding must be a string");if("string"===typeof s&&!l.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(1===t.length){var n=t.charCodeAt(0);("utf8"===s&&n<128||"latin1"===s)&&(t=n)}}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var a;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"===typeof t)for(a=e;a<i;++a)this[a]=t;else{var r=l.isBuffer(t)?t:l.from(t,s),o=r.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<i-e;++a)this[a+e]=r[a%o]}return this};var H=/[^+/0-9A-Za-z-_]/g;function V(t){if(t=t.split("=")[0],t=t.trim().replace(H,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function G(t){return t<16?"0"+t.toString(16):t.toString(16)}function W(t,e){var i;e=e||1/0;for(var s=t.length,n=null,a=[],r=0;r<s;++r){if(i=t.charCodeAt(r),i>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(r+1===s){(e-=3)>-1&&a.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&a.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&a.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;a.push(i)}else if(i<2048){if((e-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function Y(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}function q(t,e){for(var i,s,n,a=[],r=0;r<t.length;++r){if((e-=2)<0)break;i=t.charCodeAt(r),s=i>>8,n=i%256,a.push(n),a.push(s)}return a}function X(t){return s.toByteArray(V(t))}function Q(t,e,i,s){for(var n=0;n<s;++n){if(n+i>=e.length||n>=t.length)break;e[n+i]=t[n]}return n}function Z(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function K(t){return t!==t}},{"base64-js":24,ieee754:31}],29:[function(t,e,i){(function(t){function e(t){return Array.isArray?Array.isArray(t):"[object Array]"===g(t)}function s(t){return"boolean"===typeof t}function n(t){return null===t}function a(t){return null==t}function r(t){return"number"===typeof t}function o(t){return"string"===typeof t}function l(t){return"symbol"===typeof t}function c(t){return void 0===t}function h(t){return"[object RegExp]"===g(t)}function d(t){return"object"===typeof t&&null!==t}function u(t){return"[object Date]"===g(t)}function p(t){return"[object Error]"===g(t)||t instanceof Error}function f(t){return"function"===typeof t}function m(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t}function g(t){return Object.prototype.toString.call(t)}i.isArray=e,i.isBoolean=s,i.isNull=n,i.isNullOrUndefined=a,i.isNumber=r,i.isString=o,i.isSymbol=l,i.isUndefined=c,i.isRegExp=h,i.isObject=d,i.isDate=u,i.isError=p,i.isFunction=f,i.isPrimitive=m,i.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":33}],30:[function(t,e,i){var s=Object.create||k,n=Object.keys||S,a=Function.prototype.bind||A;function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=s(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0;var o,l=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),o=0===c.x}catch(O){o=!1}function h(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function d(t,e,i){if(e)t.call(i);else for(var s=t.length,n=w(t,s),a=0;a<s;++a)n[a].call(i)}function u(t,e,i,s){if(e)t.call(i,s);else for(var n=t.length,a=w(t,n),r=0;r<n;++r)a[r].call(i,s)}function p(t,e,i,s,n){if(e)t.call(i,s,n);else for(var a=t.length,r=w(t,a),o=0;o<a;++o)r[o].call(i,s,n)}function f(t,e,i,s,n,a){if(e)t.call(i,s,n,a);else for(var r=t.length,o=w(t,r),l=0;l<r;++l)o[l].call(i,s,n,a)}function m(t,e,i,s){if(e)t.apply(i,s);else for(var n=t.length,a=w(t,n),r=0;r<n;++r)a[r].apply(i,s)}function g(t,e,i,n){var a,r,o;if("function"!==typeof i)throw new TypeError('"listener" argument must be a function');if(r=t._events,r?(r.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),r=t._events),o=r[e]):(r=t._events=s(null),t._eventsCount=0),o){if("function"===typeof o?o=r[e]=n?[i,o]:[o,i]:n?o.unshift(i):o.push(i),!o.warned&&(a=h(t),a&&a>0&&o.length>a)){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,"object"===typeof console&&console.warn}}else o=r[e]=i,++t._eventsCount;return t}function v(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function b(t,e,i){var s={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=a.call(v,s);return n.listener=i,s.wrapFn=n,n}function y(t,e,i){var s=t._events;if(!s)return[];var n=s[e];return n?"function"===typeof n?i?[n.listener||n]:[n]:i?C(n):w(n,n.length):[]}function _(t){var e=this._events;if(e){var i=e[t];if("function"===typeof i)return 1;if(i)return i.length}return 0}function x(t,e){for(var i=e,s=i+1,n=t.length;s<n;i+=1,s+=1)t[i]=t[s];t.pop()}function w(t,e){for(var i=new Array(e),s=0;s<e;++s)i[s]=t[s];return i}function C(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}function k(t){var e=function(){};return e.prototype=t,new e}function S(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return i}function A(t){var e=this;return function(){return e.apply(t,arguments)}}o?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!==typeof t||t<0||t!==t)throw new TypeError('"defaultMaxListeners" must be a positive number');l=t}}):r.defaultMaxListeners=l,r.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return h(this)},r.prototype.emit=function(t){var e,i,s,n,a,r,o="error"===t;if(r=this._events,r)o=o&&null==r.error;else if(!o)return!1;if(o){if(arguments.length>1&&(e=arguments[1]),e instanceof Error)throw e;var l=new Error('Unhandled "error" event. ('+e+")");throw l.context=e,l}if(i=r[t],!i)return!1;var c="function"===typeof i;switch(s=arguments.length,s){case 1:d(i,c,this);break;case 2:u(i,c,this,arguments[1]);break;case 3:p(i,c,this,arguments[1],arguments[2]);break;case 4:f(i,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(n=new Array(s-1),a=1;a<s;a++)n[a-1]=arguments[a];m(i,c,this,n)}return!0},r.prototype.addListener=function(t,e){return g(this,t,e,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,e){return g(this,t,e,!0)},r.prototype.once=function(t,e){if("function"!==typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,b(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){if("function"!==typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,b(this,t,e)),this},r.prototype.removeListener=function(t,e){var i,n,a,r,o;if("function"!==typeof e)throw new TypeError('"listener" argument must be a function');if(n=this._events,!n)return this;if(i=n[t],!i)return this;if(i===e||i.listener===e)0===--this._eventsCount?this._events=s(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!==typeof i){for(a=-1,r=i.length-1;r>=0;r--)if(i[r]===e||i[r].listener===e){o=i[r].listener,a=r;break}if(a<0)return this;0===a?i.shift():x(i,a),1===i.length&&(n[t]=i[0]),n.removeListener&&this.emit("removeListener",t,o||e)}return this},r.prototype.removeAllListeners=function(t){var e,i,a;if(i=this._events,!i)return this;if(!i.removeListener)return 0===arguments.length?(this._events=s(null),this._eventsCount=0):i[t]&&(0===--this._eventsCount?this._events=s(null):delete i[t]),this;if(0===arguments.length){var r,o=n(i);for(a=0;a<o.length;++a)r=o[a],"removeListener"!==r&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=s(null),this._eventsCount=0,this}if(e=i[t],"function"===typeof e)this.removeListener(t,e);else if(e)for(a=e.length-1;a>=0;a--)this.removeListener(t,e[a]);return this},r.prototype.listeners=function(t){return y(this,t,!0)},r.prototype.rawListeners=function(t){return y(this,t,!1)},r.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):_.call(t,e)},r.prototype.listenerCount=_,r.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],31:[function(t,e,i){i.read=function(t,e,i,s,n){var a,r,o=8*n-s-1,l=(1<<o)-1,c=l>>1,h=-7,d=i?n-1:0,u=i?-1:1,p=t[e+d];for(d+=u,a=p&(1<<-h)-1,p>>=-h,h+=o;h>0;a=256*a+t[e+d],d+=u,h-=8);for(r=a&(1<<-h)-1,a>>=-h,h+=s;h>0;r=256*r+t[e+d],d+=u,h-=8);if(0===a)a=1-c;else{if(a===l)return r?NaN:1/0*(p?-1:1);r+=Math.pow(2,s),a-=c}return(p?-1:1)*r*Math.pow(2,a-s)},i.write=function(t,e,i,s,n,a){var r,o,l,c=8*a-n-1,h=(1<<c)-1,d=h>>1,u=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=s?0:a-1,f=s?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,r=h):(r=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-r))<1&&(r--,l*=2),e+=r+d>=1?u/l:u*Math.pow(2,1-d),e*l>=2&&(r++,l/=2),r+d>=h?(o=0,r=h):r+d>=1?(o=(e*l-1)*Math.pow(2,n),r+=d):(o=e*Math.pow(2,d-1)*Math.pow(2,n),r=0));n>=8;t[i+p]=255&o,p+=f,o/=256,n-=8);for(r=r<<n|o,c+=n;c>0;t[i+p]=255&r,p+=f,r/=256,c-=8);t[i+p-f]|=128*m}},{}],32:[function(t,e,i){"function"===typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},{}],33:[function(t,e,i){function s(t){return!!t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function n(t){return"function"===typeof t.readFloatLE&&"function"===typeof t.slice&&s(t.slice(0,0))}
      /*!
       * Determine if an object is a Buffer
       *
       * @author   Feross Aboukhadijeh <https://feross.org>
       * @license  MIT
       */
      e.exports=function(t){return null!=t&&(s(t)||n(t)||!!t._isBuffer)}},{}],34:[function(t,e,i){var s={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==s.call(t)}},{}],35:[function(t,e,i){"use strict";var s="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}i.assign=function(t){var e=Array.prototype.slice.call(arguments,1);while(e.length){var i=e.shift();if(i){if("object"!==typeof i)throw new TypeError(i+"must be non-object");for(var s in i)n(i,s)&&(t[s]=i[s])}}return t},i.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var a={arraySet:function(t,e,i,s,n){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+s),n);else for(var a=0;a<s;a++)t[n+a]=e[i+a]},flattenChunks:function(t){var e,i,s,n,a,r;for(s=0,e=0,i=t.length;e<i;e++)s+=t[e].length;for(r=new Uint8Array(s),n=0,e=0,i=t.length;e<i;e++)a=t[e],r.set(a,n),n+=a.length;return r}},r={arraySet:function(t,e,i,s,n){for(var a=0;a<s;a++)t[n+a]=e[i+a]},flattenChunks:function(t){return[].concat.apply([],t)}};i.setTyped=function(t){t?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,r))},i.setTyped(s)},{}],36:[function(t,e,i){"use strict";function s(t,e,i,s){var n=65535&t|0,a=t>>>16&65535|0,r=0;while(0!==i){r=i>2e3?2e3:i,i-=r;do{n=n+e[s++]|0,a=a+n|0}while(--r);n%=65521,a%=65521}return n|a<<16|0}e.exports=s},{}],37:[function(t,e,i){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],38:[function(t,e,i){"use strict";function s(){for(var t,e=[],i=0;i<256;i++){t=i;for(var s=0;s<8;s++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}var n=s();function a(t,e,i,s){var a=n,r=s+i;t^=-1;for(var o=s;o<r;o++)t=t>>>8^a[255&(t^e[o])];return-1^t}e.exports=a},{}],39:[function(t,e,i){"use strict";var s,n=t("../utils/common"),a=t("./trees"),r=t("./adler32"),o=t("./crc32"),l=t("./messages"),c=0,h=1,d=3,u=4,p=5,f=0,m=1,g=-2,v=-3,b=-5,y=-1,_=1,x=2,w=3,C=4,k=0,S=2,A=8,O=9,j=15,M=8,I=29,T=256,E=T+1+I,D=30,L=19,P=2*E+1,R=15,z=3,N=258,B=N+z+1,F=32,$=42,U=69,H=73,V=91,G=103,W=113,Y=666,q=1,X=2,Q=3,Z=4,K=3;function J(t,e){return t.msg=l[e],e}function tt(t){return(t<<1)-(t>4?9:0)}function et(t){var e=t.length;while(--e>=0)t[e]=0}function it(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(n.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function st(t,e){a._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,it(t.strm)}function nt(t,e){t.pending_buf[t.pending++]=e}function at(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function rt(t,e,i,s){var a=t.avail_in;return a>s&&(a=s),0===a?0:(t.avail_in-=a,n.arraySet(e,t.input,t.next_in,a,i),1===t.state.wrap?t.adler=r(t.adler,e,a,i):2===t.state.wrap&&(t.adler=o(t.adler,e,a,i)),t.next_in+=a,t.total_in+=a,a)}function ot(t,e){var i,s,n=t.max_chain_length,a=t.strstart,r=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-B?t.strstart-(t.w_size-B):0,c=t.window,h=t.w_mask,d=t.prev,u=t.strstart+N,p=c[a+r-1],f=c[a+r];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(i=e,c[i+r]===f&&c[i+r-1]===p&&c[i]===c[a]&&c[++i]===c[a+1]){a+=2,i++;do{}while(c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&a<u);if(s=N-(u-a),a=u-N,s>r){if(t.match_start=e,r=s,s>=o)break;p=c[a+r-1],f=c[a+r]}}}while((e=d[e&h])>l&&0!==--n);return r<=t.lookahead?r:t.lookahead}function lt(t){var e,i,s,a,r,o=t.w_size;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=o+(o-B)){n.arraySet(t.window,t.window,o,o,0),t.match_start-=o,t.strstart-=o,t.block_start-=o,i=t.hash_size,e=i;do{s=t.head[--e],t.head[e]=s>=o?s-o:0}while(--i);i=o,e=i;do{s=t.prev[--e],t.prev[e]=s>=o?s-o:0}while(--i);a+=o}if(0===t.strm.avail_in)break;if(i=rt(t.strm,t.window,t.strstart+t.lookahead,a),t.lookahead+=i,t.lookahead+t.insert>=z){r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+1])&t.hash_mask;while(t.insert)if(t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+z-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,t.lookahead+t.insert<z)break}}while(t.lookahead<B&&0!==t.strm.avail_in)}function ct(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(lt(t),0===t.lookahead&&e===c)return q;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var s=t.block_start+i;if((0===t.strstart||t.strstart>=s)&&(t.lookahead=t.strstart-s,t.strstart=s,st(t,!1),0===t.strm.avail_out))return q;if(t.strstart-t.block_start>=t.w_size-B&&(st(t,!1),0===t.strm.avail_out))return q}return t.insert=0,e===u?(st(t,!0),0===t.strm.avail_out?Q:Z):(t.strstart>t.block_start&&(st(t,!1),t.strm.avail_out),q)}function ht(t,e){for(var i,s;;){if(t.lookahead<B){if(lt(t),t.lookahead<B&&e===c)return q;if(0===t.lookahead)break}if(i=0,t.lookahead>=z&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-B&&(t.match_length=ot(t,i)),t.match_length>=z)if(s=a._tr_tally(t,t.strstart-t.match_start,t.match_length-z),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=z){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else s=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(s&&(st(t,!1),0===t.strm.avail_out))return q}return t.insert=t.strstart<z-1?t.strstart:z-1,e===u?(st(t,!0),0===t.strm.avail_out?Q:Z):t.last_lit&&(st(t,!1),0===t.strm.avail_out)?q:X}function dt(t,e){for(var i,s,n;;){if(t.lookahead<B){if(lt(t),t.lookahead<B&&e===c)return q;if(0===t.lookahead)break}if(i=0,t.lookahead>=z&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=z-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-B&&(t.match_length=ot(t,i),t.match_length<=5&&(t.strategy===_||t.match_length===z&&t.strstart-t.match_start>4096)&&(t.match_length=z-1)),t.prev_length>=z&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-z,s=a._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-z),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=z-1,t.strstart++,s&&(st(t,!1),0===t.strm.avail_out))return q}else if(t.match_available){if(s=a._tr_tally(t,0,t.window[t.strstart-1]),s&&st(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return q}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(s=a._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<z-1?t.strstart:z-1,e===u?(st(t,!0),0===t.strm.avail_out?Q:Z):t.last_lit&&(st(t,!1),0===t.strm.avail_out)?q:X}function ut(t,e){for(var i,s,n,r,o=t.window;;){if(t.lookahead<=N){if(lt(t),t.lookahead<=N&&e===c)return q;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=z&&t.strstart>0&&(n=t.strstart-1,s=o[n],s===o[++n]&&s===o[++n]&&s===o[++n])){r=t.strstart+N;do{}while(s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&n<r);t.match_length=N-(r-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=z?(i=a._tr_tally(t,1,t.match_length-z),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(st(t,!1),0===t.strm.avail_out))return q}return t.insert=0,e===u?(st(t,!0),0===t.strm.avail_out?Q:Z):t.last_lit&&(st(t,!1),0===t.strm.avail_out)?q:X}function pt(t,e){for(var i;;){if(0===t.lookahead&&(lt(t),0===t.lookahead)){if(e===c)return q;break}if(t.match_length=0,i=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(st(t,!1),0===t.strm.avail_out))return q}return t.insert=0,e===u?(st(t,!0),0===t.strm.avail_out?Q:Z):t.last_lit&&(st(t,!1),0===t.strm.avail_out)?q:X}function ft(t,e,i,s,n){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=s,this.func=n}function mt(t){t.window_size=2*t.w_size,et(t.head),t.max_lazy_match=s[t.level].max_lazy,t.good_match=s[t.level].good_length,t.nice_match=s[t.level].nice_length,t.max_chain_length=s[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=z-1,t.match_available=0,t.ins_h=0}function gt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=A,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(2*P),this.dyn_dtree=new n.Buf16(2*(2*D+1)),this.bl_tree=new n.Buf16(2*(2*L+1)),et(this.dyn_ltree),et(this.dyn_dtree),et(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(R+1),this.heap=new n.Buf16(2*E+1),et(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(2*E+1),et(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function vt(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=S,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?$:W,t.adler=2===e.wrap?0:1,e.last_flush=c,a._tr_init(e),f):J(t,g)}function bt(t){var e=vt(t);return e===f&&mt(t.state),e}function yt(t,e){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=e,f):g}function _t(t,e,i,s,a,r){if(!t)return g;var o=1;if(e===y&&(e=6),s<0?(o=0,s=-s):s>15&&(o=2,s-=16),a<1||a>O||i!==A||s<8||s>15||e<0||e>9||r<0||r>C)return J(t,g);8===s&&(s=9);var l=new gt;return t.state=l,l.strm=t,l.wrap=o,l.gzhead=null,l.w_bits=s,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+z-1)/z),l.window=new n.Buf8(2*l.w_size),l.head=new n.Buf16(l.hash_size),l.prev=new n.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new n.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=r,l.method=i,bt(t)}function xt(t,e){return _t(t,e,A,j,M,k)}function wt(t,e){var i,n,r,l;if(!t||!t.state||e>p||e<0)return t?J(t,g):g;if(n=t.state,!t.output||!t.input&&0!==t.avail_in||n.status===Y&&e!==u)return J(t,0===t.avail_out?b:g);if(n.strm=t,i=n.last_flush,n.last_flush=e,n.status===$)if(2===n.wrap)t.adler=0,nt(n,31),nt(n,139),nt(n,8),n.gzhead?(nt(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),nt(n,255&n.gzhead.time),nt(n,n.gzhead.time>>8&255),nt(n,n.gzhead.time>>16&255),nt(n,n.gzhead.time>>24&255),nt(n,9===n.level?2:n.strategy>=x||n.level<2?4:0),nt(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(nt(n,255&n.gzhead.extra.length),nt(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=o(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=U):(nt(n,0),nt(n,0),nt(n,0),nt(n,0),nt(n,0),nt(n,9===n.level?2:n.strategy>=x||n.level<2?4:0),nt(n,K),n.status=W);else{var v=A+(n.w_bits-8<<4)<<8,y=-1;y=n.strategy>=x||n.level<2?0:n.level<6?1:6===n.level?2:3,v|=y<<6,0!==n.strstart&&(v|=F),v+=31-v%31,n.status=W,at(n,v),0!==n.strstart&&(at(n,t.adler>>>16),at(n,65535&t.adler)),t.adler=1}if(n.status===U)if(n.gzhead.extra){r=n.pending;while(n.gzindex<(65535&n.gzhead.extra.length)){if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(t.adler=o(t.adler,n.pending_buf,n.pending-r,r)),it(t),r=n.pending,n.pending===n.pending_buf_size))break;nt(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++}n.gzhead.hcrc&&n.pending>r&&(t.adler=o(t.adler,n.pending_buf,n.pending-r,r)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=H)}else n.status=H;if(n.status===H)if(n.gzhead.name){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(t.adler=o(t.adler,n.pending_buf,n.pending-r,r)),it(t),r=n.pending,n.pending===n.pending_buf_size)){l=1;break}l=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,nt(n,l)}while(0!==l);n.gzhead.hcrc&&n.pending>r&&(t.adler=o(t.adler,n.pending_buf,n.pending-r,r)),0===l&&(n.gzindex=0,n.status=V)}else n.status=V;if(n.status===V)if(n.gzhead.comment){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(t.adler=o(t.adler,n.pending_buf,n.pending-r,r)),it(t),r=n.pending,n.pending===n.pending_buf_size)){l=1;break}l=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,nt(n,l)}while(0!==l);n.gzhead.hcrc&&n.pending>r&&(t.adler=o(t.adler,n.pending_buf,n.pending-r,r)),0===l&&(n.status=G)}else n.status=G;if(n.status===G&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&it(t),n.pending+2<=n.pending_buf_size&&(nt(n,255&t.adler),nt(n,t.adler>>8&255),t.adler=0,n.status=W)):n.status=W),0!==n.pending){if(it(t),0===t.avail_out)return n.last_flush=-1,f}else if(0===t.avail_in&&tt(e)<=tt(i)&&e!==u)return J(t,b);if(n.status===Y&&0!==t.avail_in)return J(t,b);if(0!==t.avail_in||0!==n.lookahead||e!==c&&n.status!==Y){var _=n.strategy===x?pt(n,e):n.strategy===w?ut(n,e):s[n.level].func(n,e);if(_!==Q&&_!==Z||(n.status=Y),_===q||_===Q)return 0===t.avail_out&&(n.last_flush=-1),f;if(_===X&&(e===h?a._tr_align(n):e!==p&&(a._tr_stored_block(n,0,0,!1),e===d&&(et(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),it(t),0===t.avail_out))return n.last_flush=-1,f}return e!==u?f:n.wrap<=0?m:(2===n.wrap?(nt(n,255&t.adler),nt(n,t.adler>>8&255),nt(n,t.adler>>16&255),nt(n,t.adler>>24&255),nt(n,255&t.total_in),nt(n,t.total_in>>8&255),nt(n,t.total_in>>16&255),nt(n,t.total_in>>24&255)):(at(n,t.adler>>>16),at(n,65535&t.adler)),it(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?f:m)}function Ct(t){var e;return t&&t.state?(e=t.state.status,e!==$&&e!==U&&e!==H&&e!==V&&e!==G&&e!==W&&e!==Y?J(t,g):(t.state=null,e===W?J(t,v):f)):g}function kt(t,e){var i,s,a,o,l,c,h,d,u=e.length;if(!t||!t.state)return g;if(i=t.state,o=i.wrap,2===o||1===o&&i.status!==$||i.lookahead)return g;1===o&&(t.adler=r(t.adler,e,u,0)),i.wrap=0,u>=i.w_size&&(0===o&&(et(i.head),i.strstart=0,i.block_start=0,i.insert=0),d=new n.Buf8(i.w_size),n.arraySet(d,e,u-i.w_size,i.w_size,0),e=d,u=i.w_size),l=t.avail_in,c=t.next_in,h=t.input,t.avail_in=u,t.next_in=0,t.input=e,lt(i);while(i.lookahead>=z){s=i.strstart,a=i.lookahead-(z-1);do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[s+z-1])&i.hash_mask,i.prev[s&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=s,s++}while(--a);i.strstart=s,i.lookahead=z-1,lt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=z-1,i.match_available=0,t.next_in=c,t.input=h,t.avail_in=l,i.wrap=o,f}s=[new ft(0,0,0,0,ct),new ft(4,4,8,4,ht),new ft(4,5,16,8,ht),new ft(4,6,32,32,ht),new ft(4,4,16,16,dt),new ft(8,16,32,32,dt),new ft(8,16,128,128,dt),new ft(8,32,128,256,dt),new ft(32,128,258,1024,dt),new ft(32,258,258,4096,dt)],i.deflateInit=xt,i.deflateInit2=_t,i.deflateReset=bt,i.deflateResetKeep=vt,i.deflateSetHeader=yt,i.deflate=wt,i.deflateEnd=Ct,i.deflateSetDictionary=kt,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":35,"./adler32":36,"./crc32":38,"./messages":43,"./trees":44}],40:[function(t,e,i){"use strict";var s=30,n=12;e.exports=function(t,e){var i,a,r,o,l,c,h,d,u,p,f,m,g,v,b,y,_,x,w,C,k,S,A,O,j;i=t.state,a=t.next_in,O=t.input,r=a+(t.avail_in-5),o=t.next_out,j=t.output,l=o-(e-t.avail_out),c=o+(t.avail_out-257),h=i.dmax,d=i.wsize,u=i.whave,p=i.wnext,f=i.window,m=i.hold,g=i.bits,v=i.lencode,b=i.distcode,y=(1<<i.lenbits)-1,_=(1<<i.distbits)-1;t:do{g<15&&(m+=O[a++]<<g,g+=8,m+=O[a++]<<g,g+=8),x=v[m&y];e:for(;;){if(w=x>>>24,m>>>=w,g-=w,w=x>>>16&255,0===w)j[o++]=65535&x;else{if(!(16&w)){if(0===(64&w)){x=v[(65535&x)+(m&(1<<w)-1)];continue e}if(32&w){i.mode=n;break t}t.msg="invalid literal/length code",i.mode=s;break t}C=65535&x,w&=15,w&&(g<w&&(m+=O[a++]<<g,g+=8),C+=m&(1<<w)-1,m>>>=w,g-=w),g<15&&(m+=O[a++]<<g,g+=8,m+=O[a++]<<g,g+=8),x=b[m&_];i:for(;;){if(w=x>>>24,m>>>=w,g-=w,w=x>>>16&255,!(16&w)){if(0===(64&w)){x=b[(65535&x)+(m&(1<<w)-1)];continue i}t.msg="invalid distance code",i.mode=s;break t}if(k=65535&x,w&=15,g<w&&(m+=O[a++]<<g,g+=8,g<w&&(m+=O[a++]<<g,g+=8)),k+=m&(1<<w)-1,k>h){t.msg="invalid distance too far back",i.mode=s;break t}if(m>>>=w,g-=w,w=o-l,k>w){if(w=k-w,w>u&&i.sane){t.msg="invalid distance too far back",i.mode=s;break t}if(S=0,A=f,0===p){if(S+=d-w,w<C){C-=w;do{j[o++]=f[S++]}while(--w);S=o-k,A=j}}else if(p<w){if(S+=d+p-w,w-=p,w<C){C-=w;do{j[o++]=f[S++]}while(--w);if(S=0,p<C){w=p,C-=w;do{j[o++]=f[S++]}while(--w);S=o-k,A=j}}}else if(S+=p-w,w<C){C-=w;do{j[o++]=f[S++]}while(--w);S=o-k,A=j}while(C>2)j[o++]=A[S++],j[o++]=A[S++],j[o++]=A[S++],C-=3;C&&(j[o++]=A[S++],C>1&&(j[o++]=A[S++]))}else{S=o-k;do{j[o++]=j[S++],j[o++]=j[S++],j[o++]=j[S++],C-=3}while(C>2);C&&(j[o++]=j[S++],C>1&&(j[o++]=j[S++]))}break}}break}}while(a<r&&o<c);C=g>>3,a-=C,g-=C<<3,m&=(1<<g)-1,t.next_in=a,t.next_out=o,t.avail_in=a<r?r-a+5:5-(a-r),t.avail_out=o<c?c-o+257:257-(o-c),i.hold=m,i.bits=g}},{}],41:[function(t,e,i){"use strict";var s=t("../utils/common"),n=t("./adler32"),a=t("./crc32"),r=t("./inffast"),o=t("./inftrees"),l=0,c=1,h=2,d=4,u=5,p=6,f=0,m=1,g=2,v=-2,b=-3,y=-4,_=-5,x=8,w=1,C=2,k=3,S=4,A=5,O=6,j=7,M=8,I=9,T=10,E=11,D=12,L=13,P=14,R=15,z=16,N=17,B=18,F=19,$=20,U=21,H=22,V=23,G=24,W=25,Y=26,q=27,X=28,Q=29,Z=30,K=31,J=32,tt=852,et=592,it=15,st=it;function nt(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function at(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function rt(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=w,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new s.Buf32(tt),e.distcode=e.distdyn=new s.Buf32(et),e.sane=1,e.back=-1,f):v}function ot(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,rt(t)):v}function lt(t,e){var i,s;return t&&t.state?(s=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?v:(null!==s.window&&s.wbits!==e&&(s.window=null),s.wrap=i,s.wbits=e,ot(t))):v}function ct(t,e){var i,s;return t?(s=new at,t.state=s,s.window=null,i=lt(t,e),i!==f&&(t.state=null),i):v}function ht(t){return ct(t,st)}var dt,ut,pt=!0;function ft(t){if(pt){var e;dt=new s.Buf32(512),ut=new s.Buf32(32),e=0;while(e<144)t.lens[e++]=8;while(e<256)t.lens[e++]=9;while(e<280)t.lens[e++]=7;while(e<288)t.lens[e++]=8;o(c,t.lens,0,288,dt,0,t.work,{bits:9}),e=0;while(e<32)t.lens[e++]=5;o(h,t.lens,0,32,ut,0,t.work,{bits:5}),pt=!1}t.lencode=dt,t.lenbits=9,t.distcode=ut,t.distbits=5}function mt(t,e,i,n){var a,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new s.Buf8(r.wsize)),n>=r.wsize?(s.arraySet(r.window,e,i-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(a=r.wsize-r.wnext,a>n&&(a=n),s.arraySet(r.window,e,i-n,a,r.wnext),n-=a,n?(s.arraySet(r.window,e,i-n,n,0),r.wnext=n,r.whave=r.wsize):(r.wnext+=a,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=a))),0}function gt(t,e){var i,tt,et,it,st,at,rt,ot,lt,ct,ht,dt,ut,pt,gt,vt,bt,yt,_t,xt,wt,Ct,kt,St,At=0,Ot=new s.Buf8(4),jt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return v;i=t.state,i.mode===D&&(i.mode=L),st=t.next_out,et=t.output,rt=t.avail_out,it=t.next_in,tt=t.input,at=t.avail_in,ot=i.hold,lt=i.bits,ct=at,ht=rt,Ct=f;t:for(;;)switch(i.mode){case w:if(0===i.wrap){i.mode=L;break}while(lt<16){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if(2&i.wrap&&35615===ot){i.check=0,Ot[0]=255&ot,Ot[1]=ot>>>8&255,i.check=a(i.check,Ot,2,0),ot=0,lt=0,i.mode=C;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&ot)<<8)+(ot>>8))%31){t.msg="incorrect header check",i.mode=Z;break}if((15&ot)!==x){t.msg="unknown compression method",i.mode=Z;break}if(ot>>>=4,lt-=4,wt=8+(15&ot),0===i.wbits)i.wbits=wt;else if(wt>i.wbits){t.msg="invalid window size",i.mode=Z;break}i.dmax=1<<wt,t.adler=i.check=1,i.mode=512&ot?T:D,ot=0,lt=0;break;case C:while(lt<16){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if(i.flags=ot,(255&i.flags)!==x){t.msg="unknown compression method",i.mode=Z;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=Z;break}i.head&&(i.head.text=ot>>8&1),512&i.flags&&(Ot[0]=255&ot,Ot[1]=ot>>>8&255,i.check=a(i.check,Ot,2,0)),ot=0,lt=0,i.mode=k;case k:while(lt<32){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}i.head&&(i.head.time=ot),512&i.flags&&(Ot[0]=255&ot,Ot[1]=ot>>>8&255,Ot[2]=ot>>>16&255,Ot[3]=ot>>>24&255,i.check=a(i.check,Ot,4,0)),ot=0,lt=0,i.mode=S;case S:while(lt<16){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}i.head&&(i.head.xflags=255&ot,i.head.os=ot>>8),512&i.flags&&(Ot[0]=255&ot,Ot[1]=ot>>>8&255,i.check=a(i.check,Ot,2,0)),ot=0,lt=0,i.mode=A;case A:if(1024&i.flags){while(lt<16){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}i.length=ot,i.head&&(i.head.extra_len=ot),512&i.flags&&(Ot[0]=255&ot,Ot[1]=ot>>>8&255,i.check=a(i.check,Ot,2,0)),ot=0,lt=0}else i.head&&(i.head.extra=null);i.mode=O;case O:if(1024&i.flags&&(dt=i.length,dt>at&&(dt=at),dt&&(i.head&&(wt=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),s.arraySet(i.head.extra,tt,it,dt,wt)),512&i.flags&&(i.check=a(i.check,tt,dt,it)),at-=dt,it+=dt,i.length-=dt),i.length))break t;i.length=0,i.mode=j;case j:if(2048&i.flags){if(0===at)break t;dt=0;do{wt=tt[it+dt++],i.head&&wt&&i.length<65536&&(i.head.name+=String.fromCharCode(wt))}while(wt&&dt<at);if(512&i.flags&&(i.check=a(i.check,tt,dt,it)),at-=dt,it+=dt,wt)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=M;case M:if(4096&i.flags){if(0===at)break t;dt=0;do{wt=tt[it+dt++],i.head&&wt&&i.length<65536&&(i.head.comment+=String.fromCharCode(wt))}while(wt&&dt<at);if(512&i.flags&&(i.check=a(i.check,tt,dt,it)),at-=dt,it+=dt,wt)break t}else i.head&&(i.head.comment=null);i.mode=I;case I:if(512&i.flags){while(lt<16){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if(ot!==(65535&i.check)){t.msg="header crc mismatch",i.mode=Z;break}ot=0,lt=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=D;break;case T:while(lt<32){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}t.adler=i.check=nt(ot),ot=0,lt=0,i.mode=E;case E:if(0===i.havedict)return t.next_out=st,t.avail_out=rt,t.next_in=it,t.avail_in=at,i.hold=ot,i.bits=lt,g;t.adler=i.check=1,i.mode=D;case D:if(e===u||e===p)break t;case L:if(i.last){ot>>>=7&lt,lt-=7&lt,i.mode=q;break}while(lt<3){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}switch(i.last=1&ot,ot>>>=1,lt-=1,3&ot){case 0:i.mode=P;break;case 1:if(ft(i),i.mode=$,e===p){ot>>>=2,lt-=2;break t}break;case 2:i.mode=N;break;case 3:t.msg="invalid block type",i.mode=Z}ot>>>=2,lt-=2;break;case P:ot>>>=7&lt,lt-=7&lt;while(lt<32){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if((65535&ot)!==(ot>>>16^65535)){t.msg="invalid stored block lengths",i.mode=Z;break}if(i.length=65535&ot,ot=0,lt=0,i.mode=R,e===p)break t;case R:i.mode=z;case z:if(dt=i.length,dt){if(dt>at&&(dt=at),dt>rt&&(dt=rt),0===dt)break t;s.arraySet(et,tt,it,dt,st),at-=dt,it+=dt,rt-=dt,st+=dt,i.length-=dt;break}i.mode=D;break;case N:while(lt<14){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if(i.nlen=257+(31&ot),ot>>>=5,lt-=5,i.ndist=1+(31&ot),ot>>>=5,lt-=5,i.ncode=4+(15&ot),ot>>>=4,lt-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=Z;break}i.have=0,i.mode=B;case B:while(i.have<i.ncode){while(lt<3){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}i.lens[jt[i.have++]]=7&ot,ot>>>=3,lt-=3}while(i.have<19)i.lens[jt[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,kt={bits:i.lenbits},Ct=o(l,i.lens,0,19,i.lencode,0,i.work,kt),i.lenbits=kt.bits,Ct){t.msg="invalid code lengths set",i.mode=Z;break}i.have=0,i.mode=F;case F:while(i.have<i.nlen+i.ndist){for(;;){if(At=i.lencode[ot&(1<<i.lenbits)-1],gt=At>>>24,vt=At>>>16&255,bt=65535&At,gt<=lt)break;if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if(bt<16)ot>>>=gt,lt-=gt,i.lens[i.have++]=bt;else{if(16===bt){St=gt+2;while(lt<St){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if(ot>>>=gt,lt-=gt,0===i.have){t.msg="invalid bit length repeat",i.mode=Z;break}wt=i.lens[i.have-1],dt=3+(3&ot),ot>>>=2,lt-=2}else if(17===bt){St=gt+3;while(lt<St){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}ot>>>=gt,lt-=gt,wt=0,dt=3+(7&ot),ot>>>=3,lt-=3}else{St=gt+7;while(lt<St){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}ot>>>=gt,lt-=gt,wt=0,dt=11+(127&ot),ot>>>=7,lt-=7}if(i.have+dt>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=Z;break}while(dt--)i.lens[i.have++]=wt}}if(i.mode===Z)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=Z;break}if(i.lenbits=9,kt={bits:i.lenbits},Ct=o(c,i.lens,0,i.nlen,i.lencode,0,i.work,kt),i.lenbits=kt.bits,Ct){t.msg="invalid literal/lengths set",i.mode=Z;break}if(i.distbits=6,i.distcode=i.distdyn,kt={bits:i.distbits},Ct=o(h,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,kt),i.distbits=kt.bits,Ct){t.msg="invalid distances set",i.mode=Z;break}if(i.mode=$,e===p)break t;case $:i.mode=U;case U:if(at>=6&&rt>=258){t.next_out=st,t.avail_out=rt,t.next_in=it,t.avail_in=at,i.hold=ot,i.bits=lt,r(t,ht),st=t.next_out,et=t.output,rt=t.avail_out,it=t.next_in,tt=t.input,at=t.avail_in,ot=i.hold,lt=i.bits,i.mode===D&&(i.back=-1);break}for(i.back=0;;){if(At=i.lencode[ot&(1<<i.lenbits)-1],gt=At>>>24,vt=At>>>16&255,bt=65535&At,gt<=lt)break;if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if(vt&&0===(240&vt)){for(yt=gt,_t=vt,xt=bt;;){if(At=i.lencode[xt+((ot&(1<<yt+_t)-1)>>yt)],gt=At>>>24,vt=At>>>16&255,bt=65535&At,yt+gt<=lt)break;if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}ot>>>=yt,lt-=yt,i.back+=yt}if(ot>>>=gt,lt-=gt,i.back+=gt,i.length=bt,0===vt){i.mode=Y;break}if(32&vt){i.back=-1,i.mode=D;break}if(64&vt){t.msg="invalid literal/length code",i.mode=Z;break}i.extra=15&vt,i.mode=H;case H:if(i.extra){St=i.extra;while(lt<St){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}i.length+=ot&(1<<i.extra)-1,ot>>>=i.extra,lt-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=V;case V:for(;;){if(At=i.distcode[ot&(1<<i.distbits)-1],gt=At>>>24,vt=At>>>16&255,bt=65535&At,gt<=lt)break;if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if(0===(240&vt)){for(yt=gt,_t=vt,xt=bt;;){if(At=i.distcode[xt+((ot&(1<<yt+_t)-1)>>yt)],gt=At>>>24,vt=At>>>16&255,bt=65535&At,yt+gt<=lt)break;if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}ot>>>=yt,lt-=yt,i.back+=yt}if(ot>>>=gt,lt-=gt,i.back+=gt,64&vt){t.msg="invalid distance code",i.mode=Z;break}i.offset=bt,i.extra=15&vt,i.mode=G;case G:if(i.extra){St=i.extra;while(lt<St){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}i.offset+=ot&(1<<i.extra)-1,ot>>>=i.extra,lt-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=Z;break}i.mode=W;case W:if(0===rt)break t;if(dt=ht-rt,i.offset>dt){if(dt=i.offset-dt,dt>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=Z;break}dt>i.wnext?(dt-=i.wnext,ut=i.wsize-dt):ut=i.wnext-dt,dt>i.length&&(dt=i.length),pt=i.window}else pt=et,ut=st-i.offset,dt=i.length;dt>rt&&(dt=rt),rt-=dt,i.length-=dt;do{et[st++]=pt[ut++]}while(--dt);0===i.length&&(i.mode=U);break;case Y:if(0===rt)break t;et[st++]=i.length,rt--,i.mode=U;break;case q:if(i.wrap){while(lt<32){if(0===at)break t;at--,ot|=tt[it++]<<lt,lt+=8}if(ht-=rt,t.total_out+=ht,i.total+=ht,ht&&(t.adler=i.check=i.flags?a(i.check,et,ht,st-ht):n(i.check,et,ht,st-ht)),ht=rt,(i.flags?ot:nt(ot))!==i.check){t.msg="incorrect data check",i.mode=Z;break}ot=0,lt=0}i.mode=X;case X:if(i.wrap&&i.flags){while(lt<32){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if(ot!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=Z;break}ot=0,lt=0}i.mode=Q;case Q:Ct=m;break t;case Z:Ct=b;break t;case K:return y;case J:default:return v}return t.next_out=st,t.avail_out=rt,t.next_in=it,t.avail_in=at,i.hold=ot,i.bits=lt,(i.wsize||ht!==t.avail_out&&i.mode<Z&&(i.mode<q||e!==d))&&mt(t,t.output,t.next_out,ht-t.avail_out)?(i.mode=K,y):(ct-=t.avail_in,ht-=t.avail_out,t.total_in+=ct,t.total_out+=ht,i.total+=ht,i.wrap&&ht&&(t.adler=i.check=i.flags?a(i.check,et,ht,t.next_out-ht):n(i.check,et,ht,t.next_out-ht)),t.data_type=i.bits+(i.last?64:0)+(i.mode===D?128:0)+(i.mode===$||i.mode===R?256:0),(0===ct&&0===ht||e===d)&&Ct===f&&(Ct=_),Ct)}function vt(t){if(!t||!t.state)return v;var e=t.state;return e.window&&(e.window=null),t.state=null,f}function bt(t,e){var i;return t&&t.state?(i=t.state,0===(2&i.wrap)?v:(i.head=e,e.done=!1,f)):v}function yt(t,e){var i,s,a,r=e.length;return t&&t.state?(i=t.state,0!==i.wrap&&i.mode!==E?v:i.mode===E&&(s=1,s=n(s,e,r,0),s!==i.check)?b:(a=mt(t,e,r,r),a?(i.mode=K,y):(i.havedict=1,f))):v}i.inflateReset=ot,i.inflateReset2=lt,i.inflateResetKeep=rt,i.inflateInit=ht,i.inflateInit2=ct,i.inflate=gt,i.inflateEnd=vt,i.inflateGetHeader=bt,i.inflateSetDictionary=yt,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":35,"./adler32":36,"./crc32":38,"./inffast":40,"./inftrees":42}],42:[function(t,e,i){"use strict";var s=t("../utils/common"),n=15,a=852,r=592,o=0,l=1,c=2,h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,i,f,m,g,v,b){var y,_,x,w,C,k,S,A,O,j=b.bits,M=0,I=0,T=0,E=0,D=0,L=0,P=0,R=0,z=0,N=0,B=null,F=0,$=new s.Buf16(n+1),U=new s.Buf16(n+1),H=null,V=0;for(M=0;M<=n;M++)$[M]=0;for(I=0;I<f;I++)$[e[i+I]]++;for(D=j,E=n;E>=1;E--)if(0!==$[E])break;if(D>E&&(D=E),0===E)return m[g++]=20971520,m[g++]=20971520,b.bits=1,0;for(T=1;T<E;T++)if(0!==$[T])break;for(D<T&&(D=T),R=1,M=1;M<=n;M++)if(R<<=1,R-=$[M],R<0)return-1;if(R>0&&(t===o||1!==E))return-1;for(U[1]=0,M=1;M<n;M++)U[M+1]=U[M]+$[M];for(I=0;I<f;I++)0!==e[i+I]&&(v[U[e[i+I]]++]=I);if(t===o?(B=H=v,k=19):t===l?(B=h,F-=257,H=d,V-=257,k=256):(B=u,H=p,k=-1),N=0,I=0,M=T,C=g,L=D,P=0,x=-1,z=1<<D,w=z-1,t===l&&z>a||t===c&&z>r)return 1;for(;;){S=M-P,v[I]<k?(A=0,O=v[I]):v[I]>k?(A=H[V+v[I]],O=B[F+v[I]]):(A=96,O=0),y=1<<M-P,_=1<<L,T=_;do{_-=y,m[C+(N>>P)+_]=S<<24|A<<16|O|0}while(0!==_);y=1<<M-1;while(N&y)y>>=1;if(0!==y?(N&=y-1,N+=y):N=0,I++,0===--$[M]){if(M===E)break;M=e[i+v[I]]}if(M>D&&(N&w)!==x){0===P&&(P=D),C+=T,L=M-P,R=1<<L;while(L+P<E){if(R-=$[L+P],R<=0)break;L++,R<<=1}if(z+=1<<L,t===l&&z>a||t===c&&z>r)return 1;x=N&w,m[x]=D<<24|L<<16|C-g|0}}return 0!==N&&(m[C+N]=M-P<<24|64<<16|0),b.bits=D,0}},{"../utils/common":35}],43:[function(t,e,i){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],44:[function(t,e,i){"use strict";var s=t("../utils/common"),n=4,a=0,r=1,o=2;function l(t){var e=t.length;while(--e>=0)t[e]=0}var c=0,h=1,d=2,u=3,p=258,f=29,m=256,g=m+1+f,v=30,b=19,y=2*g+1,_=15,x=16,w=7,C=256,k=16,S=17,A=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],T=512,E=new Array(2*(g+2));l(E);var D=new Array(2*v);l(D);var L=new Array(T);l(L);var P=new Array(p-u+1);l(P);var R=new Array(f);l(R);var z,N,B,F=new Array(v);function $(t,e,i,s,n){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=s,this.max_length=n,this.has_stree=t&&t.length}function U(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function H(t){return t<256?L[t]:L[256+(t>>>7)]}function V(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function G(t,e,i){t.bi_valid>x-i?(t.bi_buf|=e<<t.bi_valid&65535,V(t,t.bi_buf),t.bi_buf=e>>x-t.bi_valid,t.bi_valid+=i-x):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function W(t,e,i){G(t,i[2*e],i[2*e+1])}function Y(t,e){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}function q(t){16===t.bi_valid?(V(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function X(t,e){var i,s,n,a,r,o,l=e.dyn_tree,c=e.max_code,h=e.stat_desc.static_tree,d=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,f=e.stat_desc.max_length,m=0;for(a=0;a<=_;a++)t.bl_count[a]=0;for(l[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<y;i++)s=t.heap[i],a=l[2*l[2*s+1]+1]+1,a>f&&(a=f,m++),l[2*s+1]=a,s>c||(t.bl_count[a]++,r=0,s>=p&&(r=u[s-p]),o=l[2*s],t.opt_len+=o*(a+r),d&&(t.static_len+=o*(h[2*s+1]+r)));if(0!==m){do{a=f-1;while(0===t.bl_count[a])a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[f]--,m-=2}while(m>0);for(a=f;0!==a;a--){s=t.bl_count[a];while(0!==s)n=t.heap[--i],n>c||(l[2*n+1]!==a&&(t.opt_len+=(a-l[2*n+1])*l[2*n],l[2*n+1]=a),s--)}}}function Q(t,e,i){var s,n,a=new Array(_+1),r=0;for(s=1;s<=_;s++)a[s]=r=r+i[s-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=Y(a[o]++,o))}}function Z(){var t,e,i,s,n,a=new Array(_+1);for(i=0,s=0;s<f-1;s++)for(R[s]=i,t=0;t<1<<O[s];t++)P[i++]=s;for(P[i-1]=s,n=0,s=0;s<16;s++)for(F[s]=n,t=0;t<1<<j[s];t++)L[n++]=s;for(n>>=7;s<v;s++)for(F[s]=n<<7,t=0;t<1<<j[s]-7;t++)L[256+n++]=s;for(e=0;e<=_;e++)a[e]=0;t=0;while(t<=143)E[2*t+1]=8,t++,a[8]++;while(t<=255)E[2*t+1]=9,t++,a[9]++;while(t<=279)E[2*t+1]=7,t++,a[7]++;while(t<=287)E[2*t+1]=8,t++,a[8]++;for(Q(E,g+1,a),t=0;t<v;t++)D[2*t+1]=5,D[2*t]=Y(t,5);z=new $(E,O,m+1,g,_),N=new $(D,j,0,v,_),B=new $(new Array(0),M,0,b,w)}function K(t){var e;for(e=0;e<g;e++)t.dyn_ltree[2*e]=0;for(e=0;e<v;e++)t.dyn_dtree[2*e]=0;for(e=0;e<b;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*C]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function J(t){t.bi_valid>8?V(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function tt(t,e,i,n){J(t),n&&(V(t,i),V(t,~i)),s.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}function et(t,e,i,s){var n=2*e,a=2*i;return t[n]<t[a]||t[n]===t[a]&&s[e]<=s[i]}function it(t,e,i){var s=t.heap[i],n=i<<1;while(n<=t.heap_len){if(n<t.heap_len&&et(e,t.heap[n+1],t.heap[n],t.depth)&&n++,et(e,s,t.heap[n],t.depth))break;t.heap[i]=t.heap[n],i=n,n<<=1}t.heap[i]=s}function st(t,e,i){var s,n,a,r,o=0;if(0!==t.last_lit)do{s=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],n=t.pending_buf[t.l_buf+o],o++,0===s?W(t,n,e):(a=P[n],W(t,a+m+1,e),r=O[a],0!==r&&(n-=R[a],G(t,n,r)),s--,a=H(s),W(t,a,i),r=j[a],0!==r&&(s-=F[a],G(t,s,r)))}while(o<t.last_lit);W(t,C,e)}function nt(t,e){var i,s,n,a=e.dyn_tree,r=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=y,i=0;i<l;i++)0!==a[2*i]?(t.heap[++t.heap_len]=c=i,t.depth[i]=0):a[2*i+1]=0;while(t.heap_len<2)n=t.heap[++t.heap_len]=c<2?++c:0,a[2*n]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=r[2*n+1]);for(e.max_code=c,i=t.heap_len>>1;i>=1;i--)it(t,a,i);n=l;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],it(t,a,1),s=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=s,a[2*n]=a[2*i]+a[2*s],t.depth[n]=(t.depth[i]>=t.depth[s]?t.depth[i]:t.depth[s])+1,a[2*i+1]=a[2*s+1]=n,t.heap[1]=n++,it(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],X(t,e),Q(a,c,t.bl_count)}function at(t,e,i){var s,n,a=-1,r=e[1],o=0,l=7,c=4;for(0===r&&(l=138,c=3),e[2*(i+1)+1]=65535,s=0;s<=i;s++)n=r,r=e[2*(s+1)+1],++o<l&&n===r||(o<c?t.bl_tree[2*n]+=o:0!==n?(n!==a&&t.bl_tree[2*n]++,t.bl_tree[2*k]++):o<=10?t.bl_tree[2*S]++:t.bl_tree[2*A]++,o=0,a=n,0===r?(l=138,c=3):n===r?(l=6,c=3):(l=7,c=4))}function rt(t,e,i){var s,n,a=-1,r=e[1],o=0,l=7,c=4;for(0===r&&(l=138,c=3),s=0;s<=i;s++)if(n=r,r=e[2*(s+1)+1],!(++o<l&&n===r)){if(o<c)do{W(t,n,t.bl_tree)}while(0!==--o);else 0!==n?(n!==a&&(W(t,n,t.bl_tree),o--),W(t,k,t.bl_tree),G(t,o-3,2)):o<=10?(W(t,S,t.bl_tree),G(t,o-3,3)):(W(t,A,t.bl_tree),G(t,o-11,7));o=0,a=n,0===r?(l=138,c=3):n===r?(l=6,c=3):(l=7,c=4)}}function ot(t){var e;for(at(t,t.dyn_ltree,t.l_desc.max_code),at(t,t.dyn_dtree,t.d_desc.max_code),nt(t,t.bl_desc),e=b-1;e>=3;e--)if(0!==t.bl_tree[2*I[e]+1])break;return t.opt_len+=3*(e+1)+5+5+4,e}function lt(t,e,i,s){var n;for(G(t,e-257,5),G(t,i-1,5),G(t,s-4,4),n=0;n<s;n++)G(t,t.bl_tree[2*I[n]+1],3);rt(t,t.dyn_ltree,e-1),rt(t,t.dyn_dtree,i-1)}function ct(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return a;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return r;for(e=32;e<m;e++)if(0!==t.dyn_ltree[2*e])return r;return a}l(F);var ht=!1;function dt(t){ht||(Z(),ht=!0),t.l_desc=new U(t.dyn_ltree,z),t.d_desc=new U(t.dyn_dtree,N),t.bl_desc=new U(t.bl_tree,B),t.bi_buf=0,t.bi_valid=0,K(t)}function ut(t,e,i,s){G(t,(c<<1)+(s?1:0),3),tt(t,e,i,!0)}function pt(t){G(t,h<<1,3),W(t,C,E),q(t)}function ft(t,e,i,s){var a,r,l=0;t.level>0?(t.strm.data_type===o&&(t.strm.data_type=ct(t)),nt(t,t.l_desc),nt(t,t.d_desc),l=ot(t),a=t.opt_len+3+7>>>3,r=t.static_len+3+7>>>3,r<=a&&(a=r)):a=r=i+5,i+4<=a&&-1!==e?ut(t,e,i,s):t.strategy===n||r===a?(G(t,(h<<1)+(s?1:0),3),st(t,E,D)):(G(t,(d<<1)+(s?1:0),3),lt(t,t.l_desc.max_code+1,t.d_desc.max_code+1,l+1),st(t,t.dyn_ltree,t.dyn_dtree)),K(t),s&&J(t)}function mt(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(P[i]+m+1)]++,t.dyn_dtree[2*H(e)]++),t.last_lit===t.lit_bufsize-1}i._tr_init=dt,i._tr_stored_block=ut,i._tr_flush_block=ft,i._tr_tally=mt,i._tr_align=pt},{"../utils/common":35}],45:[function(t,e,i){"use strict";function s(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=s},{}],46:[function(t,e,i){(function(t){"use strict";function i(e,i,s,n){if("function"!==typeof e)throw new TypeError('"callback" argument must be a function');var a,r,o=arguments.length;switch(o){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,i)}));case 3:return t.nextTick((function(){e.call(null,i,s)}));case 4:return t.nextTick((function(){e.call(null,i,s,n)}));default:a=new Array(o-1),r=0;while(r<a.length)a[r++]=arguments[r];return t.nextTick((function(){e.apply(null,a)}))}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=i:e.exports=t.nextTick}).call(this,t("_process"))},{_process:47}],47:[function(t,e,i){var s,n,a=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function l(t){if(s===setTimeout)return setTimeout(t,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(e){try{return s.call(null,t,0)}catch(e){return s.call(this,t,0)}}}function c(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(function(){try{s="function"===typeof setTimeout?setTimeout:r}catch(t){s=r}try{n="function"===typeof clearTimeout?clearTimeout:o}catch(t){n=o}})();var h,d=[],u=!1,p=-1;function f(){u&&h&&(u=!1,h.length?d=h.concat(d):p=-1,d.length&&m())}function m(){if(!u){var t=l(f);u=!0;var e=d.length;while(e){h=d,d=[];while(++p<e)h&&h[p].run();p=-1,e=d.length}h=null,u=!1,c(t)}}function g(t,e){this.fun=t,this.array=e}function v(){}a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];d.push(new g(t,e)),1!==d.length||u||l(m)},g.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],48:[function(t,e,i){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":49}],49:[function(t,e,i){"use strict";var s=t("process-nextick-args"),n=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};e.exports=d;var a=t("core-util-is");a.inherits=t("inherits");var r=t("./_stream_readable"),o=t("./_stream_writable");a.inherits(d,r);for(var l=n(o.prototype),c=0;c<l.length;c++){var h=l[c];d.prototype[h]||(d.prototype[h]=o.prototype[h])}function d(t){if(!(this instanceof d))return new d(t);r.call(this,t),o.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",u)}function u(){this.allowHalfOpen||this._writableState.ended||s(p,this)}function p(t){t.end()}Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),d.prototype._destroy=function(t,e){this.push(null),this.end(),s(e,t)}},{"./_stream_readable":51,"./_stream_writable":53,"core-util-is":29,inherits:32,"process-nextick-args":46}],50:[function(t,e,i){"use strict";e.exports=a;var s=t("./_stream_transform"),n=t("core-util-is");function a(t){if(!(this instanceof a))return new a(t);s.call(this,t)}n.inherits=t("inherits"),n.inherits(a,s),a.prototype._transform=function(t,e,i){i(null,t)}},{"./_stream_transform":52,"core-util-is":29,inherits:32}],51:[function(t,i,s){(function(e,s){"use strict";var n=t("process-nextick-args");i.exports=w;var a,r=t("isarray");w.ReadableState=x;t("events").EventEmitter;var o=function(t,e){return t.listeners(e).length},l=t("./internal/streams/stream"),c=t("safe-buffer").Buffer,h=s.Uint8Array||function(){};function d(t){return c.from(t)}function u(t){return c.isBuffer(t)||t instanceof h}var p=t("core-util-is");p.inherits=t("inherits");var f=t("util"),m=void 0;m=f&&f.debuglog?f.debuglog("stream"):function(){};var g,v=t("./internal/streams/BufferList"),b=t("./internal/streams/destroy");p.inherits(w,l);var y=["error","close","destroy","pause","resume"];function _(t,e,i){if("function"===typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?r(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}function x(e,i){a=a||t("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,i instanceof a&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var s=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:n,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(g||(g=t("string_decoder/").StringDecoder),this.decoder=new g(e.encoding),this.encoding=e.encoding)}function w(e){if(a=a||t("./_stream_duplex"),!(this instanceof w))return new w(e);this._readableState=new x(e,this),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),l.call(this)}function C(t,e,i,s,n){var a,r=t._readableState;null===e?(r.reading=!1,I(t,r)):(n||(a=S(r,e)),a?t.emit("error",a):r.objectMode||e&&e.length>0?("string"===typeof e||r.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=d(e)),s?r.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):k(t,r,e,!0):r.ended?t.emit("error",new Error("stream.push() after EOF")):(r.reading=!1,r.decoder&&!i?(e=r.decoder.write(e),r.objectMode||0!==e.length?k(t,r,e,!1):D(t,r)):k(t,r,e,!1))):s||(r.reading=!1));return A(r)}function k(t,e,i,s){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,s?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&T(t)),D(t,e)}function S(t,e){var i;return u(e)||"string"===typeof e||void 0===e||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i}function A(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}Object.defineProperty(w.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),w.prototype.destroy=b.destroy,w.prototype._undestroy=b.undestroy,w.prototype._destroy=function(t,e){this.push(null),e(t)},w.prototype.push=function(t,e){var i,s=this._readableState;return s.objectMode?i=!0:"string"===typeof t&&(e=e||s.defaultEncoding,e!==s.encoding&&(t=c.from(t,e),e=""),i=!0),C(this,t,e,!1,i)},w.prototype.unshift=function(t){return C(this,t,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(e){return g||(g=t("string_decoder/").StringDecoder),this._readableState.decoder=new g(e),this._readableState.encoding=e,this};var O=8388608;function j(t){return t>=O?t=O:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function M(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=j(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function I(t,e){if(!e.ended){if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,T(t)}}function T(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(m("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?n(E,t):E(t))}function E(t){m("emit readable"),t.emit("readable"),B(t)}function D(t,e){e.readingMore||(e.readingMore=!0,n(L,t,e))}function L(t,e){var i=e.length;while(!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark){if(m("maybeReadMore read 0"),t.read(0),i===e.length)break;i=e.length}e.readingMore=!1}function P(t){return function(){var e=t._readableState;m("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,B(t))}}function R(t){m("readable nexttick read 0"),t.read(0)}function z(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n(N,t,e))}function N(t,e){e.reading||(m("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),B(t),e.flowing&&!e.reading&&t.read(0)}function B(t){var e=t._readableState;m("flow",e.flowing);while(e.flowing&&null!==t.read());}function F(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=$(t,e.buffer,e.decoder),i);var i}function $(t,e,i){var s;return t<e.head.data.length?(s=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):s=t===e.head.data.length?e.shift():i?U(t,e):H(t,e),s}function U(t,e){var i=e.head,s=1,n=i.data;t-=n.length;while(i=i.next){var a=i.data,r=t>a.length?a.length:t;if(r===a.length?n+=a:n+=a.slice(0,t),t-=r,0===t){r===a.length?(++s,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=a.slice(r));break}++s}return e.length-=s,n}function H(t,e){var i=c.allocUnsafe(t),s=e.head,n=1;s.data.copy(i),t-=s.data.length;while(s=s.next){var a=s.data,r=t>a.length?a.length:t;if(a.copy(i,i.length-t,0,r),t-=r,0===t){r===a.length?(++n,s.next?e.head=s.next:e.head=e.tail=null):(e.head=s,s.data=a.slice(r));break}++n}return e.length-=n,i}function V(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,n(G,e,t))}function G(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function W(t,e){for(var i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1}w.prototype.read=function(t){m("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return m("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?V(this):T(this),null;if(t=M(t,e),0===t&&e.ended)return 0===e.length&&V(this),null;var s,n=e.needReadable;return m("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&(n=!0,m("length less than watermark",n)),e.ended||e.reading?(n=!1,m("reading or ended",n)):n&&(m("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=M(i,e))),s=t>0?F(t,e):null,null===s?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&V(this)),null!==s&&this.emit("data",s),s},w.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},w.prototype.pipe=function(t,i){var s=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t);break}a.pipesCount+=1,m("pipe count=%d opts=%j",a.pipesCount,i);var r=(!i||!1!==i.end)&&t!==e.stdout&&t!==e.stderr,l=r?h:x;function c(t,e){m("onunpipe"),t===s&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,p())}function h(){m("onend"),t.end()}a.endEmitted?n(l):s.once("end",l),t.on("unpipe",c);var d=P(s);t.on("drain",d);var u=!1;function p(){m("cleanup"),t.removeListener("close",b),t.removeListener("finish",y),t.removeListener("drain",d),t.removeListener("error",v),t.removeListener("unpipe",c),s.removeListener("end",h),s.removeListener("end",x),s.removeListener("data",g),u=!0,!a.awaitDrain||t._writableState&&!t._writableState.needDrain||d()}var f=!1;function g(e){m("ondata"),f=!1;var i=t.write(e);!1!==i||f||((1===a.pipesCount&&a.pipes===t||a.pipesCount>1&&-1!==W(a.pipes,t))&&!u&&(m("false write response, pause",s._readableState.awaitDrain),s._readableState.awaitDrain++,f=!0),s.pause())}function v(e){m("onerror",e),x(),t.removeListener("error",v),0===o(t,"error")&&t.emit("error",e)}function b(){t.removeListener("finish",y),x()}function y(){m("onfinish"),t.removeListener("close",b),x()}function x(){m("unpipe"),s.unpipe(t)}return s.on("data",g),_(t,"error",v),t.once("close",b),t.once("finish",y),t.emit("pipe",s),a.flowing||(m("pipe resume"),s.resume()),t},w.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var s=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<n;a++)s[a].emit("unpipe",this,i);return this}var r=W(e.pipes,t);return-1===r||(e.pipes.splice(r,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},w.prototype.on=function(t,e){var i=l.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var s=this._readableState;s.endEmitted||s.readableListening||(s.readableListening=s.needReadable=!0,s.emittedReadable=!1,s.reading?s.length&&T(this):n(R,this))}return i},w.prototype.addListener=w.prototype.on,w.prototype.resume=function(){var t=this._readableState;return t.flowing||(m("resume"),t.flowing=!0,z(this,t)),this},w.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this},w.prototype.wrap=function(t){var e=this._readableState,i=!1,s=this;for(var n in t.on("end",(function(){if(m("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&s.push(t)}s.push(null)})),t.on("data",(function(n){if(m("wrapped data"),e.decoder&&(n=e.decoder.write(n)),(!e.objectMode||null!==n&&void 0!==n)&&(e.objectMode||n&&n.length)){var a=s.push(n);a||(i=!0,t.pause())}})),t)void 0===this[n]&&"function"===typeof t[n]&&(this[n]=function(e){return function(){return t[e].apply(t,arguments)}}(n));for(var a=0;a<y.length;a++)t.on(y[a],s.emit.bind(s,y[a]));return s._read=function(e){m("wrapped _read",e),i&&(i=!1,t.resume())},s},w._fromList=F}).call(this,t("_process"),"undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./_stream_duplex":49,"./internal/streams/BufferList":54,"./internal/streams/destroy":55,"./internal/streams/stream":56,_process:47,"core-util-is":29,events:30,inherits:32,isarray:34,"process-nextick-args":46,"safe-buffer":62,"string_decoder/":57,util:25}],52:[function(t,e,i){"use strict";e.exports=o;var s=t("./_stream_duplex"),n=t("core-util-is");function a(t){this.afterTransform=function(e,i){return r(t,e,i)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function r(t,e,i){var s=t._transformState;s.transforming=!1;var n=s.writecb;if(!n)return t.emit("error",new Error("write callback called multiple times"));s.writechunk=null,s.writecb=null,null!==i&&void 0!==i&&t.push(i),n(e);var a=t._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&t._read(a.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);s.call(this,t),this._transformState=new a(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"===typeof t.transform&&(this._transform=t.transform),"function"===typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",(function(){"function"===typeof this._flush?this._flush((function(t,i){l(e,t,i)})):l(e)}))}function l(t,e,i){if(e)return t.emit("error",e);null!==i&&void 0!==i&&t.push(i);var s=t._writableState,n=t._transformState;if(s.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}n.inherits=t("inherits"),n.inherits(o,s),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,i){var s=this._transformState;if(s.writecb=i,s.writechunk=t,s.writeencoding=e,!s.transforming){var n=this._readableState;(s.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var i=this;s.prototype._destroy.call(this,t,(function(t){e(t),i.emit("close")}))}},{"./_stream_duplex":49,"core-util-is":29,inherits:32}],53:[function(t,i,s){(function(e,s){"use strict";var n=t("process-nextick-args");function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){z(e,t)}}i.exports=y;var r,o=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?setImmediate:n;y.WritableState=b;var l=t("core-util-is");l.inherits=t("inherits");var c={deprecate:t("util-deprecate")},h=t("./internal/streams/stream"),d=t("safe-buffer").Buffer,u=s.Uint8Array||function(){};function p(t){return d.from(t)}function f(t){return d.isBuffer(t)||t instanceof u}var m,g=t("./internal/streams/destroy");function v(){}function b(e,i){r=r||t("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,i instanceof r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var s=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:n,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){j(i,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function y(e){if(r=r||t("./_stream_duplex"),!m.call(y,this)&&!(this instanceof r))return new y(e);this._writableState=new b(e,this),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),h.call(this)}function x(t,e){var i=new Error("write after end");t.emit("error",i),n(e,i)}function w(t,e,i,s){var a=!0,r=!1;return null===i?r=new TypeError("May not write null values to stream"):"string"===typeof i||void 0===i||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r&&(t.emit("error",r),n(s,r),a=!1),a}function C(t,e,i){return t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=d.from(e,i)),e}function k(t,e,i,s,n,a){if(!i){var r=C(e,s,n);s!==r&&(i=!0,n="buffer",s=r)}var o=e.objectMode?1:s.length;e.length+=o;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:s,encoding:n,isBuf:i,callback:a,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else S(t,e,!1,o,s,n,a);return l}function S(t,e,i,s,n,a,r){e.writelen=s,e.writecb=r,e.writing=!0,e.sync=!0,i?t._writev(n,e.onwrite):t._write(n,a,e.onwrite),e.sync=!1}function A(t,e,i,s,a){--e.pendingcb,i?(n(a,s),n(P,t,e),t._writableState.errorEmitted=!0,t.emit("error",s)):(a(s),t._writableState.errorEmitted=!0,t.emit("error",s),P(t,e))}function O(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function j(t,e){var i=t._writableState,s=i.sync,n=i.writecb;if(O(i),e)A(t,i,s,e,n);else{var a=E(i);a||i.corked||i.bufferProcessing||!i.bufferedRequest||T(t,i),s?o(M,t,i,a,n):M(t,i,a,n)}}function M(t,e,i,s){i||I(t,e),e.pendingcb--,s(),P(t,e)}function I(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function T(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var s=e.bufferedRequestCount,n=new Array(s),r=e.corkedRequestsFree;r.entry=i;var o=0,l=!0;while(i)n[o]=i,i.isBuf||(l=!1),i=i.next,o+=1;n.allBuffers=l,S(t,e,!0,e.length,n,"",r.finish),e.pendingcb++,e.lastBufferedRequest=null,r.next?(e.corkedRequestsFree=r.next,r.next=null):e.corkedRequestsFree=new a(e)}else{while(i){var c=i.chunk,h=i.encoding,d=i.callback,u=e.objectMode?1:c.length;if(S(t,e,!1,u,c,h,d),i=i.next,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=i,e.bufferProcessing=!1}function E(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function D(t,e){t._final((function(i){e.pendingcb--,i&&t.emit("error",i),e.prefinished=!0,t.emit("prefinish"),P(t,e)}))}function L(t,e){e.prefinished||e.finalCalled||("function"===typeof t._final?(e.pendingcb++,e.finalCalled=!0,n(D,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function P(t,e){var i=E(e);return i&&(L(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),i}function R(t,e,i){e.ending=!0,P(t,e),i&&(e.finished?n(i):t.once("finish",i)),e.ended=!0,t.writable=!1}function z(t,e,i){var s=t.entry;t.entry=null;while(s){var n=s.callback;e.pendingcb--,n(i),s=s.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}l.inherits(y,h),b.prototype.getBuffer=function(){var t=this.bufferedRequest,e=[];while(t)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(b.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(m=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!m.call(this,t)||t&&t._writableState instanceof b}})):m=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,i){var s=this._writableState,n=!1,a=f(t)&&!s.objectMode;return a&&!d.isBuffer(t)&&(t=p(t)),"function"===typeof e&&(i=e,e=null),a?e="buffer":e||(e=s.defaultEncoding),"function"!==typeof i&&(i=v),s.ended?x(this,i):(a||w(this,s,t,i))&&(s.pendingcb++,n=k(this,s,a,t,e,i)),n},y.prototype.cork=function(){var t=this._writableState;t.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||T(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"===typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},y.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,i){var s=this._writableState;"function"===typeof t?(i=t,t=null,e=null):"function"===typeof e&&(i=e,e=null),null!==t&&void 0!==t&&this.write(t,e),s.corked&&(s.corked=1,this.uncork()),s.ending||s.finished||R(this,s,i)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,t("_process"),"undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./_stream_duplex":49,"./internal/streams/destroy":55,"./internal/streams/stream":56,_process:47,"core-util-is":29,inherits:32,"process-nextick-args":46,"safe-buffer":62,"util-deprecate":64}],54:[function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=t("safe-buffer").Buffer;function a(t,e,i){t.copy(e,i)}e.exports=function(){function t(){s(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";var e=this.head,i=""+e.data;while(e=e.next)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;var e=n.allocUnsafe(t>>>0),i=this.head,s=0;while(i)a(i.data,e,s),s+=i.data.length,i=i.next;return e},t}()},{"safe-buffer":62}],55:[function(t,e,i){"use strict";var s=t("process-nextick-args");function n(t,e){var i=this,n=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;n||a?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||s(r,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(s(r,i,t),i._writableState&&(i._writableState.errorEmitted=!0)):e&&e(t)})))}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function r(t,e){t.emit("error",e)}e.exports={destroy:n,undestroy:a}},{"process-nextick-args":46}],56:[function(t,e,i){e.exports=t("events").EventEmitter},{events:30}],57:[function(t,e,i){"use strict";var s=t("safe-buffer").Buffer,n=s.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(t){if(!t)return"utf8";var e;while(1)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function r(t){var e=a(t);if("string"!==typeof e&&(s.isEncoding===n||!n(t)))throw new Error("Unknown encoding: "+t);return e||t}function o(t){var e;switch(this.encoding=r(t),this.encoding){case"utf16le":this.text=f,this.end=m,e=4;break;case"utf8":this.fillLast=d,e=4;break;case"base64":this.text=g,this.end=v,e=3;break;default:return this.write=b,void(this.end=y)}this.lastNeed=0,this.lastTotal=0,this.lastChar=s.allocUnsafe(e)}function l(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:-1}function c(t,e,i){var s=e.length-1;if(s<i)return 0;var n=l(e[s]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--s<i?0:(n=l(e[s]),n>=0?(n>0&&(t.lastNeed=n-2),n):--s<i?0:(n=l(e[s]),n>=0?(n>0&&(2===n?n=0:t.lastNeed=n-3),n):0))}function h(t,e,i){if(128!==(192&e[0]))return t.lastNeed=0,"�".repeat(i);if(t.lastNeed>1&&e.length>1){if(128!==(192&e[1]))return t.lastNeed=1,"�".repeat(i+1);if(t.lastNeed>2&&e.length>2&&128!==(192&e[2]))return t.lastNeed=2,"�".repeat(i+2)}}function d(t){var e=this.lastTotal-this.lastNeed,i=h(this,t,e);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){var i=c(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var s=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,s),t.toString("utf8",e,s)}function p(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�".repeat(this.lastTotal-this.lastNeed):e}function f(t,e){if((t.length-e)%2===0){var i=t.toString("utf16le",e);if(i){var s=i.charCodeAt(i.length-1);if(s>=55296&&s<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function m(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function g(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function v(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function b(t){return t.toString(this.encoding)}function y(t){return t&&t.length?this.write(t):""}i.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(e=this.fillLast(t),void 0===e)return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},o.prototype.end=p,o.prototype.text=u,o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":62}],58:[function(t,e,i){e.exports=t("./readable").PassThrough},{"./readable":59}],59:[function(t,e,i){i=e.exports=t("./lib/_stream_readable.js"),i.Stream=i,i.Readable=i,i.Writable=t("./lib/_stream_writable.js"),i.Duplex=t("./lib/_stream_duplex.js"),i.Transform=t("./lib/_stream_transform.js"),i.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":49,"./lib/_stream_passthrough.js":50,"./lib/_stream_readable.js":51,"./lib/_stream_transform.js":52,"./lib/_stream_writable.js":53}],60:[function(t,e,i){e.exports=t("./readable").Transform},{"./readable":59}],61:[function(t,e,i){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":53}],62:[function(t,e,i){var s=t("buffer"),n=s.Buffer;function a(t,e){for(var i in t)e[i]=t[i]}function r(t,e,i){return n(t,e,i)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=s:(a(s,i),i.Buffer=r),a(n,r),r.from=function(t,e,i){if("number"===typeof t)throw new TypeError("Argument must not be a number");return n(t,e,i)},r.alloc=function(t,e,i){if("number"!==typeof t)throw new TypeError("Argument must be a number");var s=n(t);return void 0!==e?"string"===typeof i?s.fill(e,i):s.fill(e):s.fill(0),s},r.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return n(t)},r.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return s.SlowBuffer(t)}},{buffer:28}],63:[function(t,e,i){e.exports=a;var s=t("events").EventEmitter,n=t("inherits");function a(){s.call(this)}n(a,s),a.Readable=t("readable-stream/readable.js"),a.Writable=t("readable-stream/writable.js"),a.Duplex=t("readable-stream/duplex.js"),a.Transform=t("readable-stream/transform.js"),a.PassThrough=t("readable-stream/passthrough.js"),a.Stream=a,a.prototype.pipe=function(t,e){var i=this;function n(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function a(){i.readable&&i.resume&&i.resume()}i.on("data",n),t.on("drain",a),t._isStdio||e&&!1===e.end||(i.on("end",o),i.on("close",l));var r=!1;function o(){r||(r=!0,t.end())}function l(){r||(r=!0,"function"===typeof t.destroy&&t.destroy())}function c(t){if(h(),0===s.listenerCount(this,"error"))throw t}function h(){i.removeListener("data",n),t.removeListener("drain",a),i.removeListener("end",o),i.removeListener("close",l),i.removeListener("error",c),t.removeListener("error",c),i.removeListener("end",h),i.removeListener("close",h),t.removeListener("close",h)}return i.on("error",c),t.on("error",c),i.on("end",h),i.on("close",h),t.on("close",h),t.emit("pipe",i),t}},{events:30,inherits:32,"readable-stream/duplex.js":48,"readable-stream/passthrough.js":58,"readable-stream/readable.js":59,"readable-stream/transform.js":60,"readable-stream/writable.js":61}],64:[function(t,i,s){(function(t){function e(t,e){if(s("noDeprecation"))return t;var i=!1;function n(){if(!i){if(s("throwDeprecation"))throw new Error(e);s("traceDeprecation"),i=!0}return t.apply(this,arguments)}return n}function s(e){try{if(!t.localStorage)return!1}catch(_){return!1}var i=t.localStorage[e];return null!=i&&"true"===String(i).toLowerCase()}i.exports=e}).call(this,"undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],65:[function(t,e,i){arguments[4][32][0].apply(i,arguments)},{dup:32}],66:[function(t,e,i){e.exports=function(t){return t&&"object"===typeof t&&"function"===typeof t.copy&&"function"===typeof t.fill&&"function"===typeof t.readUInt8}},{}],67:[function(t,i,s){(function(e,i){var n=/%[sdj%]/g;s.format=function(t){if(!C(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(o(arguments[i]));return e.join(" ")}i=1;for(var s=arguments,a=s.length,r=String(t).replace(n,(function(t){if("%%"===t)return"%";if(i>=a)return t;switch(t){case"%s":return String(s[i++]);case"%d":return Number(s[i++]);case"%j":try{return JSON.stringify(s[i++])}catch(_){return"[Circular]"}default:return t}})),l=s[i];i<a;l=s[++i])y(l)||!O(l)?r+=" "+l:r+=" "+o(l);return r},s.deprecate=function(t,n){if(S(i.process))return function(){return s.deprecate(t,n).apply(this,arguments)};if(!0===e.noDeprecation)return t;var a=!1;function r(){if(!a){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation,a=!0}return t.apply(this,arguments)}return r};var a,r={};function o(t,e){var i={seen:[],stylize:c};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),b(e)?i.showHidden=e:e&&s._extend(i,e),S(i.showHidden)&&(i.showHidden=!1),S(i.depth)&&(i.depth=2),S(i.colors)&&(i.colors=!1),S(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=l),d(i,t,i.depth)}function l(t,e){var i=o.styles[e];return i?"["+o.colors[i][0]+"m"+t+"["+o.colors[i][1]+"m":t}function c(t,e){return t}function h(t){var e={};return t.forEach((function(t,i){e[t]=!0})),e}function d(t,e,i){if(t.customInspect&&e&&I(e.inspect)&&e.inspect!==s.inspect&&(!e.constructor||e.constructor.prototype!==e)){var n=e.inspect(i,t);return C(n)||(n=d(t,n,i)),n}var a=u(t,e);if(a)return a;var r=Object.keys(e),o=h(r);if(t.showHidden&&(r=Object.getOwnPropertyNames(e)),M(e)&&(r.indexOf("message")>=0||r.indexOf("description")>=0))return p(e);if(0===r.length){if(I(e)){var l=e.name?": "+e.name:"";return t.stylize("[Function"+l+"]","special")}if(A(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(j(e))return t.stylize(Date.prototype.toString.call(e),"date");if(M(e))return p(e)}var c,b="",y=!1,_=["{","}"];if(v(e)&&(y=!0,_=["[","]"]),I(e)){var x=e.name?": "+e.name:"";b=" [Function"+x+"]"}return A(e)&&(b=" "+RegExp.prototype.toString.call(e)),j(e)&&(b=" "+Date.prototype.toUTCString.call(e)),M(e)&&(b=" "+p(e)),0!==r.length||y&&0!=e.length?i<0?A(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=y?f(t,e,i,o,r):r.map((function(s){return m(t,e,i,o,s,y)})),t.seen.pop(),g(c,b,_)):_[0]+b+_[1]}function u(t,e){if(S(e))return t.stylize("undefined","undefined");if(C(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}return w(e)?t.stylize(""+e,"number"):b(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,i,s,n){for(var a=[],r=0,o=e.length;r<o;++r)D(e,String(r))?a.push(m(t,e,i,s,String(r),!0)):a.push("");return n.forEach((function(n){n.match(/^\d+$/)||a.push(m(t,e,i,s,n,!0))})),a}function m(t,e,i,s,n,a){var r,o,l;if(l=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]},l.get?o=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(o=t.stylize("[Setter]","special")),D(s,n)||(r="["+n+"]"),o||(t.seen.indexOf(l.value)<0?(o=y(i)?d(t,l.value,null):d(t,l.value,i-1),o.indexOf("\n")>-1&&(o=a?o.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+o.split("\n").map((function(t){return"   "+t})).join("\n"))):o=t.stylize("[Circular]","special")),S(r)){if(a&&n.match(/^\d+$/))return o;r=JSON.stringify(""+n),r.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(r=r.substr(1,r.length-2),r=t.stylize(r,"name")):(r=r.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),r=t.stylize(r,"string"))}return r+": "+o}function g(t,e,i){var s=t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return s>60?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}function v(t){return Array.isArray(t)}function b(t){return"boolean"===typeof t}function y(t){return null===t}function x(t){return null==t}function w(t){return"number"===typeof t}function C(t){return"string"===typeof t}function k(t){return"symbol"===typeof t}function S(t){return void 0===t}function A(t){return O(t)&&"[object RegExp]"===E(t)}function O(t){return"object"===typeof t&&null!==t}function j(t){return O(t)&&"[object Date]"===E(t)}function M(t){return O(t)&&("[object Error]"===E(t)||t instanceof Error)}function I(t){return"function"===typeof t}function T(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t}function E(t){return Object.prototype.toString.call(t)}s.debuglog=function(t){if(S(a)&&(a=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!r[t])if(new RegExp("\\b"+t+"\\b","i").test(a)){e.pid;r[t]=function(){s.format.apply(s,arguments)}}else r[t]=function(){};return r[t]},s.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},s.isArray=v,s.isBoolean=b,s.isNull=y,s.isNullOrUndefined=x,s.isNumber=w,s.isString=C,s.isSymbol=k,s.isUndefined=S,s.isRegExp=A,s.isObject=O,s.isDate=j,s.isError=M,s.isFunction=I,s.isPrimitive=T,s.isBuffer=t("./support/isBuffer");function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s.log=function(){},s.inherits=t("inherits"),s._extend=function(t,e){if(!e||!O(e))return t;var i=Object.keys(e),s=i.length;while(s--)t[i[s]]=e[i[s]];return t}}).call(this,t("_process"),"undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":66,_process:47,inherits:65}]},{},[20])(20)}))}).call(this,i("c8ba"))},e43b:function(t,e,i){"use strict";var s=i("238e"),n=i.n(s);n.a},e46a:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-modal",{attrs:{visible:t.visible,footer:null,title:"棚拍视频设置",width:640,"z-index":6001,centered:""},on:{cancel:function(e){t.doCancel(),t.$emit("change",!1)}}},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"vistext fo-14"},[t._v("视频标题:")]),s("div",{staticClass:"ml-12 vis-content"},[s("a-input",{attrs:{placeholder:"请输入视频标题","max-length":30},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)]),s("div",{staticClass:"flex flex-start item-center mt-12"},[s("div",{staticClass:"vistext fo-14"},[t._v("清晰度:")]),s("div",{staticClass:"ml-12 vis-content flex flex-start"},t._l(t.clears,(function(e,n){return s("div",{key:n,class:["clear-item px-12 flex flex-center item-center",t.clearIndex===n?"clear-item--active":""],on:{click:function(e){return t.changeClear(n)}}},[s("div",{class:["fo-14",t.clearIndex===n?"fo-white":""]},[t._v(t._s(e.label))]),e.needsVip?s("img",{staticClass:"ml-8",attrs:{src:i("0be3"),height:"14px",alt:""}}):t._e()])})),0)]),s("div",{staticClass:"mt-20 p-12 bg-gray"},[s("div",{staticClass:"flex flex-start item-center"},[s("a-icon",{staticClass:"fo-14 fo-theme",attrs:{type:"exclamation-circle"}}),s("div",{staticClass:"ml-8 fo-gray"},[t._v(" 您今天还剩余 "),s("span",{staticClass:"fo-theme bold"},[t._v(t._s(t.oneDayLimitCount-t.videoRenderCount<0?0:t.oneDayLimitCount-t.videoRenderCount))]),t._v(" 次免费渲染券，"),t.oneDayLimitCount-t.videoRenderCount>0?s("span",[t._v("本次将消耗 "),s("span",{staticClass:"fo-theme bold"},[t._v("1")]),t._v(" 张。")]):t._e(),t.isVip?t._e():s("a",{staticStyle:{color:"#cd9745"},on:{click:function(e){return t.showPersonalVip()}}},[t._v("开通VIP享有更多渲染次数")])])],1),s("div",{staticClass:"ml-22 fo-gray"},[t._v(" 棚拍时间较久，需隔日查看；拍摄完成后，将为您保存30天，请及时下载 ")])]),s("a-divider"),s("div",{staticClass:"mt-20 flex flex-between item-center"},[s("div",{staticClass:"flex flex-start item-center"},[s("div",{staticClass:"flex flex-start item-center"},[s("a-popover",{attrs:{"overlay-class-name":"photo-notice",placement:"top"}},[s("template",{slot:"content"},[s("div",{staticClass:"text-center"},[s("div",{staticClass:"fo-14"},[t._v("未绑定微信将无法收到通知")]),s("div",{staticClass:"fo-14 mt-12"},[t._v("（账号设置-账号与安全-微信）")]),s("img",{staticClass:"mt-12",attrs:{src:"https://yun.baoxiaohe.com/qrcode/qrcode_for_gh_6524d8ae8445_344.jpg",width:"180px"}}),s("div",{staticClass:"fo-gray fo-14"},[t._v("扫码关注，接收提醒")])])]),s("a-checkbox",{attrs:{checked:t.needsNotice},on:{change:t.needsNoticeChange}},[t._v(" 拍摄完成提醒 "),s("a-icon",{staticClass:"fo-gray",attrs:{type:"question-circle"}})],1)],2)],1),s("div",{staticClass:"flex flex-start item-center ml-34"},[s("a-checkbox",{attrs:{checked:t.isVip,disabled:t.isVip},on:{change:t.watermarkChange}},[t._v(" 去水印logo ")]),t.isVip?t._e():s("img",{attrs:{src:i("0be3"),height:"14px"}})],1)]),s("div",{staticClass:"flex flex-end item-center"},[s("a-button",{attrs:{size:"large"},on:{click:function(e){t.doCancel(),t.$emit("change",!1)}}},[t._v("取消")]),s("a-button",{staticClass:"ml-16",attrs:{type:"primary",size:"large",loading:t.loading,disabled:t.oneDayLimitCount-t.videoRenderCount<=0},on:{click:function(e){return t.submit()}}},[t._v(t._s(t.submitText))])],1)])],1)},n=[],a=i("5530"),r=i("5880"),o=i("9393"),l=i("365c"),c={model:{prop:"visible",event:"change"},mixins:[o["a"]],props:{visible:{type:Boolean}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapGetters"])("profile",["isVip"])),Object(r["mapGetters"])("render",["videos","videoFlag"])),Object(r["mapState"])("editor-v2",["project_data","knife_data","isCup","scale","is_outside","last_saved_local_history_ts","element_craft_list"])),{},{crafts(){return this.element_craft_list},isInside(){return!this.is_outside}}),data(){return{submitText:"确定",clears:[{label:"720P标清"},{label:"1080P高清",needsVip:!0}],clearIndex:0,ratios:[{w:4,h:3},{w:3,h:4},{w:16,h:9},{w:1,h:1},{w:9,h:16}],ratioIndex:2,clearWatermark:this.isVip,needsNotice:!0,videoRenderCount:0,oneDayLimitCount:0,title:"",loading:!1}},beforeDestroy(){this.$bus.$off("emitRenderGlb")},mounted(){this.title=this.project_data.project_name+"-棚拍视频",this.renderLimit(),this.doSubmit()},methods:{doCancel(){this.loading=!1,this.submitText="确定"},changeClear(t){!this.clears[t].needsVip||this.isVip?this.clearIndex=t:this.showPersonalVip()},doSubmit(){this.$bus.$on("emitRenderGlb",t=>{Object(l["renderVideo"])({title:this.title,project_id:this.project_data.id,glb_path:t,shed_id:this.videos[this.videoFlag].id,watermark:this.isVip?2:1,resolution:0===this.clearIndex?1:2,finish_notify:this.needsNotice?1:0,aspect_ratio:this.ratioIndex}).then(t=>{this.loading=!1,this.submitText="确定",200===t.code&&(this.$message.success("已进入拍摄，隔日上午8点可下载"),this.$emit("change",!1),this.$store.dispatch("render/savePage",1),this.$store.dispatch("render/fetchVideoList",{type:!1,project_id:this.project_data.id}),this.renderLimit())})})},submit(){this.title?(this.$track({category:"render-kjl-video",action:"click"}),this.loading=!0,this.submitText="正在排队中",this.$bus.$emit("getRenderGlb")):this.$message.error("请输入视频标题")},renderLimit(){Object(l["renderLimit"])().then(t=>{200===t.code&&(this.videoRenderCount=t.data.videoRenderCount,this.oneDayLimitCount=t.data.oneDayLimitCount)})},watermarkChange(t){this.isVip?this.clearWatermark=t.target.checked:this.showPersonalVip()},needsNoticeChange(t){this.needsNotice=t.target.checked}}},h=c,d=(i("c729"),i("7041"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,"59738393",null);e["default"]=u.exports},e513:function(t,e,i){"use strict";var s=i("5f99"),n=i.n(s);n.a},e53d:function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("365c"),a=i("e65d"),r=i.n(a),o=i("eae5"),l=i.n(o),c=i("3ccf"),h=i("5a0c"),d=i.n(h);i("4cf2");e["default"]=Object(s["b"])({setup(t,e){const{data:i}=Object(c["c"])(n["getLogs"],{variables:{currentPage:1,pageSize:8}}),{data:a}=Object(c["c"])(n["getAnlyzis"]),{data:o}=Object(c["c"])(n["getNotice"],{pageSize:1});return()=>{var t,n,c,h,u;return Object(s["c"])("div",{class:"merchant-home p-30"},[Object(s["c"])("div",{class:"flex item-center p-20 top-header bg-white"},[Object(s["c"])("a-icon",{attrs:{type:"sound"},style:"margin-top:-2px"}),Object(s["c"])("div",{class:"title ml-12"},[null===(t=o.value)||void 0===t||null===(n=t.data[0])||void 0===n?void 0:n.title]),Object(s["c"])("div",{class:"more ml-auto text-pointer",on:{click:()=>{e.router.push("/mch/notice")}}},["更多"])]),Object(s["c"])("div",{class:"mt-30 dashboard"},[Object(s["c"])("a-row",{attrs:{gutter:2}},[Object(s["c"])("a-col",{class:"gutter-row",attrs:{span:15}},[Object(s["c"])("div",{class:"card-wrapper left"},[Object(s["c"])("div",{class:"title"},["运营情况"]),Object(s["c"])("div",{class:"card-container mt-20 bg-white"},[Object(s["c"])("div",{class:"flex"},[Object(s["c"])("div",{class:"data-container flex item-center flex-center"},[Object(s["c"])("div",{class:"contain"},[Object(s["c"])("div",{class:"img-wrapper",style:"background:#00CC7C"},[Object(s["c"])("img",{attrs:{src:r.a,alt:""}})]),Object(s["c"])("div",{class:"number"},[null===(c=a.value)||void 0===c?void 0:c.designTotal]),Object(s["c"])("div",{class:"desc"},["设计方案"])])]),Object(s["c"])("div",{class:"data-container flex item-center flex-center"},[Object(s["c"])("div",{class:"contain"},[Object(s["c"])("div",{class:"img-wrapper",style:"background:#3F91FF"},[Object(s["c"])("img",{attrs:{src:l.a,alt:""}})]),Object(s["c"])("div",{class:"number"},[null===(h=a.value)||void 0===h?void 0:h.userTotal]),Object(s["c"])("div",{class:"desc"},["总客户数"])])])])]),Object(s["c"])("div",{class:"bg-white"})])]),Object(s["c"])("a-col",{class:"gutter-row",attrs:{span:9}},[Object(s["c"])("div",{class:"card-wrapper ml-20 right"},[Object(s["c"])("div",{class:"flex item-center flex-between"},[Object(s["c"])("div",{class:"title"},["更新日志"]),Object(s["c"])("div",{class:"version"},["版本号: v1.0"])]),Object(s["c"])("div",{class:"card-container mch-log mt-20 bg-white px-20 py-18"},[null===(u=i.value)||void 0===u?void 0:u.data.map((t,e)=>Object(s["c"])("div",{class:"card-item flex item-center flex-between",key:e},[Object(s["c"])("div",{class:"title"},[t.update_content]),Object(s["c"])("div",{class:"date"},[d()(parseInt(t.create_time)).format("YYYY-MM-DD")])])),Object(s["c"])("div",{class:"more bottom-more float-right text-pointer",on:{click:()=>{e.router.push("/mch/logs")}}},["更多"]),Object(s["c"])("div",{class:"clearfix"})])])])])])])}}})},e5e5:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAASUlEQVQoU+2SIRKAMBDEEgO/5QNoPtDfUrMMAtFOTQWuZ7Mxu2eSCziAop5013OT3MAGVHUfCA1/hXwh1YHQ8CX81tL0cFOv8QCXEWgNPHi5TQAAAABJRU5ErkJggg=="},e5fb2:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video",style:{width:t.width+"px",height:t.height+"px"}},[i("div",{staticClass:"video-panel flex flex-center item-center",style:{width:t.width+"px",height:t.height-80+"px"}},[t.videoFlag>-1?i("video",{staticClass:"video-control",style:{width:t.size.width+"px",height:t.size.height+"px"},attrs:{controls:"",src:t.videos[t.videoFlag].videoPath}}):t._e()]),i("div",{staticClass:"video-opt flex flex-center "},[i("a-button",{staticClass:"ml-12 fo-14",staticStyle:{width:"200px"},attrs:{size:"large",type:"primary"},on:{click:function(e){t.showVideoRenderModel=!0}}},[t._v("一键替换并拍摄")])],1),i("video-render-model",{model:{value:t.showVideoRenderModel,callback:function(e){t.showVideoRenderModel=e},expression:"showVideoRenderModel"}})],1)},n=[],a=i("5530"),r=i("e46a"),o=i("5880"),l={components:{videoRenderModel:r["default"]},props:{width:{type:Number,default:0},height:{type:Number,default:0}},data(){return{showVideoRenderModel:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(o["mapGetters"])("render",["videos","videoFlag"])),{},{size(){const t=16/9;let e=this.width-100,i=e/t;return i>this.height-180&&(i=this.height-180,e=i*t),{width:e,height:i}}})},c=l,h=(i("7fa4"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,"87183ad6",null);e["default"]=d.exports},e60e:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.visible?i("div",{staticClass:"history-version flex flex-start"},[i("div",{staticClass:"left"},[i("div",{staticClass:"fo-white mb-16"},[t._v("恢复历史版本记录")]),i("div",{staticClass:"version-panel",style:{height:t.height-69+"px"}},[i("div",{staticClass:"version-content",style:{height:t.height-69+"px"}},t._l(t.list,(function(e,s){return i("div",{key:s,staticClass:"version-item flex flex-between item-center",on:{click:function(e){return t.changeFlag(s)}}},[i("div",{staticClass:"flex flex-start item-center"},[i("svg",{style:{fill:t.flag===s?"#ff6634":"#fff"},attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32"}},[i("path",{attrs:{d:"M512 64c-247.41888 0-448 200.580096-448 448 0 247.433216 200.58112 448 448 448 247.43424 0 448-200.56576 448-448C960 264.580096 759.43424 64 512 64zM512 904.875008c-216.152064 0-392.000512-176.722944-392.000512-392.875008s175.848448-392.000512 392.000512-392.000512c216.153088 0 392.000512 175.847424 392.000512 392.000512S728.153088 904.875008 512 904.875008z","p-id":"2379"}}),i("path",{attrs:{d:"M540.000256 500.637696 540.000256 231.999488c0-15.463424-12.536832-28.000256-28.000256-28.000256s-28.000256 12.536832-28.000256 28.000256l0 280.000512c0 7.56736 3.008512 14.42816 7.885824 19.467264 0.644096 0.805888 1.335296 1.586176 2.080768 2.331648l138.592256 138.592256c10.938368 10.9312 28.669952 10.9312 39.60832 0 10.937344-10.930176 10.937344-28.662784 0-39.600128L540.000256 500.637696z","p-id":"2380"}})]),i("div",{staticClass:"ml-12"},[i("div",{class:" "+(t.flag===s?"fo-theme bold":"fo-white")+" fo-14"},[t._v(" "+t._s(0===s?"当前版本":1===e.save_type?"自动保存":"手动保存")+" ")]),i("div",{staticClass:"fo-white fo-14"},[t._v(t._s(e.createTime))])])]),i("svg",{directives:[{name:"show",rawName:"v-show",value:t.flag===s,expression:"flag === index"}],staticClass:"icon",attrs:{t:"1593401593171",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3368",width:"20",height:"20"}},[i("path",{attrs:{d:"M512 0C228.430769 0 0 228.430769 0 512s228.430769 512 512 512 512-228.430769 512-512S795.569231 0 512 0z m256 413.538462l-271.753846 271.753846c-7.876923 7.876923-19.692308 11.815385-31.507692 11.815384-11.815385 0-23.630769-3.938462-31.507693-11.815384l-169.353846-169.353846c-15.753846-15.753846-15.753846-47.261538 0-63.015385 15.753846-15.753846 47.261538-15.753846 63.015385 0l137.846154 137.846154 240.246153-240.246154c15.753846-15.753846 47.261538-15.753846 63.015385 0 19.692308 15.753846 19.692308 47.261538 0 63.015385z","p-id":"3369",fill:"#ffffff"}})])])})),0)])]),i("div",{staticClass:"right ml-16",style:{width:t.width-364+"px",height:t.height-32+"px"}},[i("div",{staticClass:"flex flex-end item-center"},[t.flag>0?i("a-dropdown-button",{staticClass:"mr-16",attrs:{loading:!0},on:{click:t.recoveryVersion}},[i("a-icon",{attrs:{type:"redo"}}),t._v("恢复到此版本 "),i("a-menu",{attrs:{slot:"overlay"},on:{click:t.gotoSave},slot:"overlay"},[i("a-menu-item",{key:"1"},[t._v("创建副本")])],1),i("a-icon",{attrs:{slot:"icon",type:"down"},slot:"icon"})],1):t._e(),i("a-button",{attrs:{type:"primary"},on:{click:function(e){t.visible=!1}}},[t._v("关闭")])],1),i("div",{staticClass:"img-panel mt-16",style:{width:t.width-364+"px",height:t.height-32-56+"px"}},[i("div",{staticClass:"img-bg flex flex-center item-center",style:{width:t.width-364+"px",height:t.height-32-56-76+"px"}},[t.tempImg?t._e():i("div",{staticClass:"img-blank",style:{width:t.width-364+"px",height:"500px"}}),t.tempImg?i("img",{attrs:{src:t.tempImg+""+(t.tempImg.indexOf("data:")>-1?"":"?imageView2/2/w/"+(t.width-364)+"/h/"+(t.height-32-56-76)+"/q/100")}}):t._e()])])]),i("a-modal",{attrs:{centered:"",title:"创建副本",visible:t.saveVisible,footer:null,zIndex:4001},on:{cancel:function(e){t.saveVisible=!1}}},[i("a-form",{attrs:{form:t.formData}},[i("a-form-item",{attrs:{"label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol,label:"文件名"}},[i("a-input",{model:{value:t.formData.project_name,callback:function(e){t.$set(t.formData,"project_name",e)},expression:"formData.project_name"}})],1)],1),i("div",{staticClass:"save-footer flex flex-center items-center"},[i("a-button",{staticStyle:{width:"120px"},attrs:{size:"large"},on:{click:function(e){t.saveVisible=!1}}},[t._v("取消")]),i("a-button",{staticClass:"ml-24",staticStyle:{width:"120px"},attrs:{type:"primary",size:"large",loading:t.saveload},on:{click:t.handleSubmit}},[t._v("确认")])],1)],1)],1):t._e()},n=[],a=(i("ddb0"),i("5aa7")),r=i("5a0c"),o=i.n(r);const l={labelCol:{span:6},wrapperCol:{span:14}},c={labelCol:{span:6},wrapperCol:{span:14}};var h={props:["value"],model:{prop:"value",event:"change"},data(){return{formItemLayout:l,formTailLayout:c,formData:{project_name:"未命名的文件"},height:window.innerHeight,width:window.innerWidth,visible:this.value,list:[],flag:0,tempImg:"",rebackLoading:null,rebackLoadingvalue:!1,saveVisible:!1,saveload:!1}},watch:{value(t){this.visible=t,t&&this.draw()},visible(t){t||(this.flag=0,this.tempImg=""),this.$emit("change",t)}},mounted(){this.resize()},methods:{async draw(){this.list=[];let t=document.createElement("canvas"),e=1,i=[0,0];if(this.$root.knifeData.totalX>this.$root.knifeData.totalY){if(e=(this.width-364)/this.$root.knifeData.totalX,i=[this.width-364,this.$root.knifeData.totalY*e],i[1]>this.height-32-56-76){let t=this.$root.knifeData.totalX/this.$root.knifeData.totalY*(this.height-32-56-76);i=[t,this.height-32-56-76],e=t/this.$root.knifeData.totalX}}else e=(this.height-32-56-76)/this.$root.knifeData.totalY,i=[this.$root.knifeData.totalX*e,this.height-32-56-76];let s=new a["a"](this.$root.projectData,this.$root.knifeData);s.setHasShadow(!0),await s.draw(i[0],i[1],e,"out",t),this.list.push({save_type:-1,screenshot:t.toDataURL()}),this.getList()},handleSubmit(){this.formData.project_name||this.$message.error("请输入文件名"),this.saveload=!0,this.$api.project.historySave({project_type:6,history_id:this.list[this.flag].id,project_name:this.formData.project_name}).then(t=>{this.saveload=!1,t&&(this.saveVisible=!1,this.$message.success("已保存至方案中心"))})},getList(){this.$api.project.historyList({project_id:this.$root.projectData.id}).then(t=>{if(t){for(const e of t.data)e.createTime=o()(e.createTime).format("YYYY/MM/DD HH:mm");var e;if(this.list=this.list.concat(t.data),this.list.length>0)this.tempImg=(null===(e=this.list[0])||void 0===e?void 0:e.screenshot)||""}})},changeFlag(t){this.flag=t,this.tempImg=this.list[t].screenshot},recoveryVersion(){if(this.rebackLoadingvalue)return;this.$track({category:"recovery-history-version",action:"click"});let t=this;this.$confirm({title:"恢复到此版本后，当前版本将被覆盖，是否继续？",zIndex:4001,okText:"继续",onOk(){t.rebackLoadingvalue=!0,t.rebackLoading=t.$message.loading("恢复中请稍等",0),t.$api.project.historyRecover({history_id:t.list[t.flag].id,project_id:t.$root.projectData.id}).then(e=>{setTimeout(t.rebackLoading,1),t.rebackLoadingvalue=!1,e&&window.location.reload()})},onCancel(){},class:"test"})},gotoSave(t){1==t.key&&(this.saveVisible=!0)},resize(){window.addEventListener("resize",this._handeResize)},_handeResize(){this.height=window.innerHeight,this.window=window.innerWidth}},beforeDestroy(){window.removeEventListener("resize",this._handeResize)}},d=h,u=(i("2539"),i("2877")),p=Object(u["a"])(d,s,n,!1,null,null,null);e["default"]=p.exports},e65d:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAACTklEQVRYR+2YzYuOURjGf9dCysLGSuR7ilBKZMdYIJpSylIprO2nUL6W9kjZaorEJBZmluNjI6LISMlfQMni1j09z/TM8Xyc52uaqeds3rfOue/ze6/zcV/nFUu8aYnzsTwBzWw9sBWifsAv4J2kP1WrYWYbgLWAx8xK8s/S9p+CZnYFuBQJlyafBQ5L+hbOZmargIvAOWBzpt9/0AvgqqRXRZQLABPlvteES3PflXQ+O5GZbQceAyMlMhlwDbgsyb8vaCHgQWCqSvaC/ilJo2mfma0DXidLGpPSlfSVKwU8BLyMyZYzZlqSx881M3sKHK+Ry9U7EC53qGAngGa2F3hTAy4d+kTSWDauL0DfU+MNAP3grMme7r4AJ4BTDQA9ZLek92lsX4DPgKMNAX0fzvQNeA842xBwoyS/6uZaXwqeAe43APTqsmUxDslq4Ktv+JqQ45Ju9A6Y3INeVW7XAPwM7JH0uwxwH1BYFysmm5R0IjvGzG4ldbiK82dSyz+FA8M9uBL4GBT1quRp/wVJd8LBZuZK3ixZ7knAY3/kTZTnZjYll+y2SNPglulRHlw6oZn5njwJeKVK7Zar9VDS2zIFlqdhjV3TxRjXxRJ3welO5gtwPTS9XR6SLkDdme/IPh9CwDbXTBeAnmO/JDe6nZe6rgBHJc27+i5r8QDo74g2ln9QcFAwcg8MpzhSqMJhg4K9KrgTmH80t52pYfwuSR+KarGXPn90H2mYvG3Yc+BY9m+4PD+4AjgNxFr+tlAen/rBB5L+ZhMOlr+tvP8AC9gKOJnGcDIAAAAASUVORK5CYII="},e666:function(t,e,i){"use strict";(function(e){var s=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=c;var n=i("4250"),a=i("19ea");i("3fb5")(c,n);for(var r=s(a.prototype),o=0;o<r.length;o++){var l=r[o];c.prototype[l]||(c.prototype[l]=a.prototype[l])}function c(t){if(!(this instanceof c))return new c(t);n.call(this,t),a.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||e.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this,i("4362"))},e6c7:function(t,e,i){"use strict";var s=i("dd1b"),n=i.n(s);n.a},e6c72:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADxUlEQVRYR92XTWgcdRjGf89sNvaQpkpQMHpQxCY0Ciag1IP4AanYmp3dpkug9dKoB2sFvVebaL0XtHowNAetqNt0Z2ZJxVb8wIOhQiPYFlMRPdRcpKJJEJtk55WdJJjsJtnZrUFwjrvvPO/v/7wf+1/xHz+6nvyWcs8C1xT4T9arc30APa6VEqvg161T94ulxPa/BrB0+hFChnAYlOe9u1qNqzlgPRkXha/j6KA874vVNFYtgfXs3o7Cs5g1gV5SwTtaF4DrHiDkGNIM5nSrcGqsXKcCwHp772aueA6zG4FhAu9pSVGzlT9VHTATbmYIs36k30kmHtDIyA/LdSoBUukzmHUjTtLV2aeBgXCtEasGEDXqwIDD+fEPMfYgPlXgd68JYK7bR8gHoF/ZlGxXLvfbevMdByCC2Lv3Jqb/nAC7GdSngvfRku4KByzlXsDowHH65eeHqy2XuAARhJvZTxgeR1xS4HdUAFgmcw/z4XeLp79VuVzxXwXIZhNcm5vE7BYanHuVz1+IlthSEkulX8PsENLbCrwD1ZLXs4gslX4Ls+eQjijwXl4J0JP+BGwHDrvk+6c3BMB1dxIyCjqjgvd4mQPuRYxtOI0d8nOX4gGkRxFJBd6OWPFudhvh7MXlffBPCXrcP4Bmmpu26MSJqTiCtcbYvn3NTM2U8kyp4G8p74HpaPNtatysXG6mVvE48ZbNNvHX7DRiWoHfXA4wgdlWGpw25fOX4wjWGmOZzFbmwwmkywq8tvIe+AzjURLaKc/7uFbxOPGWTj9B0U4jPlfgP1Y2Be4g8ArimAL/YBzBWmMs5b6J8Tzwqgr+4TIHejux+fNIV7gheUecRVQLgC0sop8xux01dCkYGV8BEC2WlPs9RhsOz8r3h2pJUC3WXPcZQt5BTCjw2ytWcQTg7t5DWMwhJqGlXcHx6WrCcb63VP9muFo6XCtOIiv/1MlVARZd+BpjOyKgqzOz3s9xrOQLP8d5jBRiTIH/4PL3Ku8DPdk70dw3mLXg6A0673uxXojoLjD+7VFCewHpKpa8X4XcT+sCRC5kMg9TtNKVLBk5QctTtZZj0fb3Fk6uORLqVj7/Zblra17LFyFGIidKPSEO09g4XG06om6fnd2PMRjVvHTyhHpXS14xBeV0FpVj9v2oJ6JoXQHzcTSK9CMNDZPR5/PzrZjdRWi7QG40agvqY1jj3nLbq5agAqQ0HVY8Eo1onEdMoMSh5d2+1ms1/TOyVLSs0oiHQLcBrYvCk2C/YHyFGrylJROPNU7UBsbU5MBGcPwNTK6vMM9KskcAAAAASUVORK5CYII="},e6f9:function(t,e,i){"use strict";i.r(e);var s=i("750b");i("501c");e["default"]=Object(s["b"])({props:{title:{type:String,default:"内尺寸"},value:{type:String,default:""}},setup(t,e){return()=>Object(s["c"])("div",{class:"flex flex-between content-between size-content py-8"},[Object(s["c"])("div",{class:"content-title"},[t.title]),Object(s["c"])("div",{class:"content ml-auto"},[Object.keys(e.slots).map(t=>e.slots[t]()),t.value])])}})},e73e:function(t,e,i){},e762:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function t(e,i){s(this,t),this.data=e,this.text=i.text||e,this.options=i};e.default=n},e7a5:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"editor-commit"},[s("a-modal",{attrs:{centered:"",title:t.title,footer:null,visible:t.tvisble,"mask-closable":!0,width:700,"z-index":4e3},on:{cancel:function(e){t.tvisble=!1}}},[t.is_contribute||t.isMch?s("a-steps",{staticStyle:{width:"488px",margin:"auto","margin-bottom":"16px"},attrs:{current:t.stepsFlag}},t._l(t.steps,(function(t){return s("a-step",{key:t,attrs:{title:t}})})),1):t._e(),t.commitInfo&&2===t.commitInfo.status?s("a-alert",{staticClass:"mb-12",staticStyle:{width:"488px","margin-left":"110px"},attrs:{message:"投稿失败，原因如下",description:t.commitInfo.refuse_reson,type:"error","show-icon":""}}):t._e(),!t.is_contribute&&0===t.stepsFlag&&(!t.is_update||t.isMch&&0===t.stepsFlag)||t.is_contribute&&0===t.stepsFlag?s("a-form",{attrs:{form:t.form}},[s("a-form-item",{attrs:{"label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol,label:"标题",required:""}},[s("a-input",{attrs:{placeholder:"请输入标题"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}}),s("p",{staticClass:"fo-12 fo-gray lh-20"},[s("img",{staticStyle:{width:"15px",height:"15px"},attrs:{src:i("fd52")}}),t._v(" 不少于5个字，建议包含模板的热点、行业、用途、风格，如“极简书籍包装盒”。参考：修饰语+风格+行业属性/作品主题+用途 ")])],1),s("a-form-item",{attrs:{"label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol,required:"",label:"分类"}},[s("div",{staticClass:"editor-commit-panel"},[s("div",{staticClass:"editor-commit-panel-flow"},t._l(t.tags,(function(e,i){return s("div",{key:i,staticClass:"lh-25 mb-8"},[s("div",{staticClass:"fo-14"},[s("span",{staticClass:"bold"},[t._v(t._s(e.name))])]),t._l(e.children,(function(e,n){return s("a-checkbox",{key:i+"-"+n,attrs:{checked:e.checked},on:{change:function(e){return t.checkedChange(e,i,n)}}},[t._v(t._s(e.name))])}))],2)})),0)])]),s("a-form-item",{attrs:{"label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol,label:"关键词",required:""}},[s("a-select",{staticStyle:{width:"100%"},attrs:{mode:"tags",placeholder:"关键字"},on:{change:t.selectChange},model:{value:t.formData.keywords,callback:function(e){t.$set(t.formData,"keywords",e)},expression:"formData.keywords"}},t._l(t.selectTags,(function(e,i){return s("a-select-option",{key:i,attrs:{value:e.name}},[t._v(t._s(e.name))])})),1)],1),s("a-form-item",{attrs:{"label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol,label:"备注"}},[s("a-input",{attrs:{placeholder:"请输入备注信息"},model:{value:t.formData.remarks,callback:function(e){t.$set(t.formData,"remarks",e)},expression:"formData.remarks"}})],1),s("a-form-item",{directives:[{name:"show",rawName:"v-show",value:t.is_contribute,expression:"is_contribute"}],attrs:{label:"版权声明","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[s("a",{staticClass:"download fo-gray text-pointer",attrs:{href:t.formData.copyright,target:"_blank"}},[t._v("下载版权声明")])]),s("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.is_contribute&&!t.isMch,expression:"!is_contribute && !isMch"}],attrs:{"label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol,label:"版权声明",required:""}},[s("a",{staticClass:"download fo-gray text-pointer",attrs:{href:t.download,target:"_blank"}},[t._v("下载版权声明模板")]),s("br"),s("a-upload",{attrs:{"show-upload-list":!1,name:"file",multiple:!1,data:{type:"doc"},action:t.action,headers:{Authentication:t.Authentication},"custom-request":t.customRequest},on:{change:t.handleUpload}},[s("div",{staticClass:"flex flex-center item-center"},[s("a-button",{attrs:{icon:t.uploadLoading?"loading":"upload"}},[t._v("上传文件")])],1)])],1),s("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.is_contribute&&!t.isMch,expression:"!is_contribute && !isMch"}],attrs:{"label-col":t.formTailLayout.labelCol,"wrapper-col":t.formTailLayout.wrapperCol}},[s("p",{staticClass:"lh-25"},[s("a-checkbox",{attrs:{checked:t.checkedAticle},on:{change:function(e){t.checkedAticle=e.target.checked}}},[t._v("我已阅读并接受")]),s("a",{attrs:{href:"https://support.baoxiaohe.com/Digitalworks.html",target:"_blank"}},[t._v("《数字作品上传发布服务使用协议》")]),t._v("，并保证作品原创性，愿意承担因侵权带来的一切法律责任。 ")],1)]),s("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.is_contribute&&!t.isMch,expression:"!is_contribute && !isMch"}],attrs:{"label-col":t.formTailLayout.labelCol,"wrapper-col":t.formTailLayout.wrapperCol}},[s("a-button",{attrs:{type:"primary",disabled:t.isdisabled},on:{click:t.commitProject}},[t._v(t._s(t.hasCommitId?"更新投稿":"提交投稿"))])],1),s("a-form-item",{directives:[{name:"show",rawName:"v-show",value:t.is_contribute,expression:"is_contribute"}],attrs:{label:"拒绝理由","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[s("div",{staticClass:"editor-commit-panel"},[s("div",{staticClass:"editor-commit-panel-flow"},[s("a-radio-group",t._l(t.refuseReason,(function(e,i){return s("a-radio",{key:i,staticStyle:{display:"block","white-space":"nowrap"},attrs:{value:i},on:{change:function(i){return t.reasonChange(i,e)}}},[t._v(t._s(e))])})),1)],1)])]),s("a-form-item",{directives:[{name:"show",rawName:"v-show",value:t.is_contribute||t.isMch,expression:"is_contribute || isMch"}],attrs:{"label-col":t.formTailLayout.labelCol,"wrapper-col":t.formTailLayout.wrapperCol}},[s("a-button",{attrs:{type:"primary",disabled:t.isdisabled},on:{click:function(e){return t.infoNext()}}},[t._v("下一步")]),s("a-button",{directives:[{name:"show",rawName:"v-show",value:t.is_contribute,expression:"is_contribute"}],staticClass:"ml-8",attrs:{type:"danger",loading:t.refuseload},on:{click:function(e){return t.refuseArt()}}},[t._v("拒绝通过")])],1)],1):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:1!==t.commitInfo.status&&t.is_contribute&&1===t.stepsFlag||t.is_update||t.isMch&&1===t.stepsFlag,expression:"\n        (commitInfo.status !== 1 && is_contribute && stepsFlag === 1) ||\n        is_update ||\n        (isMch && stepsFlag === 1)\n      "}],staticClass:"editor-preview-panel"},[s("div",{staticClass:"editor-preview-panel-title"},[t._v("选择模型图片")]),s("a-spin",{attrs:{spinning:t.imageLoad}},[s("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"}),s("div",{staticClass:"editor-preview-panel-gallery mt-4"},[s("div",{staticClass:"gallery-overflow flex flex-start flex-wrap"},[t._l(t.images,(function(e,n){return s("div",{key:n,staticClass:"gallery-item pointer",on:{click:function(e){return t.chooseImage(n)}}},[s("div",{staticClass:"img flex flex-center item-center wrap"},[s("img",{attrs:{src:e.image+"?imageView2/0/w/113/h/113/q/100"}})]),e.active?s("div",{staticClass:"checked flex flex-center item-center"},[s("img",{attrs:{src:i("9825")}})]):t._e()])})),s("div",{staticClass:"text-center fo-gray w-100 mt-24"},[t._v(" 暂无渲染图,请点击右上角“渲染”按钮进行选择 ")]),t.imagesQuery.count>t.images.length?s("div",{staticClass:"text-center lh-30 fo-theme pointer w-100 mb-24",on:{click:function(e){t.imagesQuery.currentPage++,t.getImages()}}},[t._v(" 加载更多 ")]):t._e()],2)])],1),s("div",{staticClass:"editor-preview-panel-title mt-12"},[t._v(" 模型设计图片 "),s("a-button",{staticClass:"ml-16",on:{click:t.drawCanvas}},[t._v("重新生成设计图")])],1),s("div",{staticClass:"editor-preview-panel-title mt-4 flex flex-start item-center flex-wrap"},[s("a-spin",{attrs:{spinning:t.canvasLoad}},[s("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"}),s("div",{staticClass:"canvas"},[s("canvas",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) scale(0.125)"},attrs:{id:"pubCanvas"}})])],1),s("a-spin",{attrs:{spinning:t.canvasLoad}},[s("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"}),s("div",{staticClass:"canvas"},[s("canvas",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) scale(0.125)"},attrs:{id:"pubCanvas2"}})])],1),s("a-spin",{attrs:{spinning:t.canvasLoad}},[s("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"}),s("div",{staticClass:"canvas"},[s("canvas",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) scale(0.125)"},attrs:{id:"pubCanvas3"}})])],1),s("a-spin",{attrs:{spinning:t.canvasLoad}},[s("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"}),s("div",{staticClass:"canvas"},[s("canvas",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) scale(0.125)"},attrs:{id:"pubCanvas4"}})])],1),s("a-spin",{attrs:{spinning:t.canvasLoad}},[s("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"}),s("div",{staticClass:"canvas"},[s("canvas",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) scale(0.125)"},attrs:{id:"pubCanvas5"}})])],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.is_update,expression:"!is_update"}],staticClass:"editor-preview-panel-title mt-16"},[t.is_contribute||t.isMch?s("a-button",{on:{click:function(e){t.stepsFlag=0}}},[t._v("上一步")]):t._e(),s("a-button",{staticClass:"ml-8",attrs:{type:"primary",loading:t.pubLoad},on:{click:t.publish}},[t._v("确认发布")])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.is_update,expression:"is_update"}],staticClass:"editor-preview-panel-title mt-16"},[s("a-button",{staticClass:"ml-8",attrs:{type:"primary",loading:t.pubLoad},on:{click:t.modeUpdate}},[t._v("确认修改")])],1)],1),t.is_contribute&&2===t.stepsFlag?s("div"):t._e(),t.commitInfo&&1===t.commitInfo.status||t.is_contribute&&2===t.stepsFlag||!t.is_contribute&&t.isMch&&2===t.stepsFlag?s("a-alert",{staticClass:"mb-12",staticStyle:{width:"488px","margin-left":"110px"},attrs:{message:"发布成功",description:"您可以在模板中心找到您的作品啦！",type:"success","show-icon":""}}):t._e()],1)],1)},n=[],a=(i("25f0"),i("1276"),i("5cc6"),i("b39a"),i("ddb0"),i("5530")),r=(i("c890"),i("5880")),o=i("365c"),l=i("71c7"),c=i("054f"),h=i("c64e"),d=i.n(h),u=(i("5fda"),{props:["visible","title"],data(){return{download:"https://cdn.baoxiaohe.com/c4d34b53-86c1-4607-b6c0-f2e84b7e94e7.docx",action:o["UPLOAD_PATH"],uploadLoading:!1,Authentication:this.accessToken,tvisble:this.visible,checkedAticle:!1,formItemLayout:{labelCol:{span:4},wrapperCol:{span:18}},formTailLayout:{labelCol:{span:2},wrapperCol:{span:18,offset:4}},form:this.$form.createForm(this,{title:"dynamic_rule"}),formData:{title:"",keywords:[],remarks:"",copyright:"",refuse_reson:""},refuseload:!1,checkNick:!1,tags:[],selectTags:[],commitInfo:{status:0},isdisabled:!1,loading:!1,is_contribute:!1,is_update:!1,steps:["作品信息","作品预览图","正式发布"],stepsFlag:0,imageLoad:!1,images:[],imagesQuery:{currentPage:1,pageSize:8,project_id:"",count:0},canvasLoad:!1,knife:{},pubLoad:!1,onload:!1,refuseReason:["缺少美感/设计感","素材像素不够清晰,修改好后重新提交","素材不符合投稿规范,https://help.baoxiaohe.com/archives/428 独立对象要分图层，文字需要在我们平台完成排版","素材来源审核不过"],checkedReason:[]}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("property",["crafts"])),Object(r["mapGetters"])("profile",["isMch"])),Object(r["mapState"])("profile",["accessToken"])),Object(r["mapState"])("editor-v2",["project_data","knife_data","isCup","scale","is_outside","last_saved_local_history_ts","element_craft_list"])),{},{crafts(){return this.element_craft_list},hasCommitId(){return"commit_id"in this.$route.query}}),model:{prop:"visible",event:"change"},mounted(){this.is_contribute="contribute"===this.$route.query.type,this.is_update="update"===this.$route.query.type,this.is_contribute&&(this.checkedAticle=!0),this.is_update&&this.infoNext()},watch:{visible(t){this.tvisble=t,t&&!this.onload&&(this.onload=!0,this.getMudata(()=>{this.getCommitInfo()})),1===this.stepsFlag&&this.isMch&&this.infoNext()},tvisble(t){this.$emit("change",t)},"formData.keywords"(t){const e=t.toString();if(e.length>=100)return this.isdisabled=!0,this.$message.error("关键词数目过多，请重新选择"),!1;this.isdisabled=!1}},methods:{handleUpload(t){this.uploadLoading=!0,"done"==t.file.status&&0===t.file.response.errno&&(this.formData.copyright=t.file.response.data.url,this.$message.success("上传成功"),this.uploadLoading=!1)},async customRequest(t){this.uploadLoading=!0;const e=t.file.name.substring(t.file.name.lastIndexOf(".")+1,t.file.name.length),i="contribution",s=i+"/"+d()()+"."+e,n=await c["a"].putFile(t.file,{xapi:i,rename:s,type:"doc"});0!==n.errno&&this.$message.error(n.errmsg),this.$message.success("上传成功"),this.formData.copyright=n.data.url,this.uploadLoading=!1},async setFormData(t,e,i){const s=new FormData;let n=null,a="";1!=i?(n=t.toDataURL("image/jpeg",i),a=d()()+".jpg"):(n=t.toDataURL("image/png"),a=d()()+".png"),s.append("file",this.convertBase64UrlToBlob(n));const r=await c["a"].putFile(s.get("file"),{xapi:"template",rename:a,type:JSON.stringify({type:3,project_id:this.pro_id})});return r},async modeUpdate(){const t={};for(const c in this.images)this.images[c].active&&(t.image=this.images[c].image);this.pubLoad=!0;const e=document.getElementById("pubCanvas"),i=document.getElementById("pubCanvas2"),s=document.getElementById("pubCanvas3"),n=document.getElementById("pubCanvas4"),a=document.getElementById("pubCanvas5"),[r,o,l,h,d]=await Promise.all([this.setFormData(e,"outside_img",.95),this.setFormData(i,"inside_img",.7),this.setFormData(s,"specular_img",.7),this.setFormData(n,"bump_img",.7),this.setFormData(a,"roughness_img",.7)]);if(1e3!=r.errno&&1e3!=o.errno){if(r&&o){t.knife_image=r.data.url,t.inside_image=o.data.url,t.mode_id=this.$route.query.mid,t.specular_img=l.data.url,t.bump_img=h.data.url,t.roughness_img=d.data.url;const e=await this.$api.templates.update(t);e&&this.$message.success(e.errmsg)}this.pubLoad=!1}else c["a"].removeStorage()},async publish(){if(!this.checkSubmit(!1))return;let t="";const e={tc1:[],tc2:[],tc3:[]};for(const o in this.images)this.images[o].active&&(t=this.images[o].image);if(!t)return void this.$message.error("请选择一张图片");for(const o in this.tags)for(const t in this.tags[o].children)this.tags[o].children[t].checked&&(e.tc1.push(this.tags[o].id),e.tc2.push(this.tags[o].children[t].id));e.tc1=[...new Set(e.tc1)],this.pubLoad=!0;const i=document.getElementById("pubCanvas"),s=document.getElementById("pubCanvas2"),n=document.getElementById("pubCanvas3"),a=document.getElementById("pubCanvas4"),r=document.getElementById("pubCanvas5"),[l,c,h,d,u]=await Promise.all([this.setFormData(i,"outside_img",.95),this.setFormData(s,"inside_img",.7),this.setFormData(n,"specular_img",.7),this.setFormData(a,"bump_img",.7),this.setFormData(r,"roughness_img",.7)]);if(l&&c)try{const i=await Object(o["patchProject"])({title:this.formData.title,keywords:this.formData.keywords.toString(),project_id:this.project_data.id,knife_image:l.data.url,inside_image:c.data.url,specular_img:h.data.url,bump_img:d.data.url,roughness_img:u.data.url,image:t,tc1:e.tc1.toString(),tc2:e.tc2.toString(),tc3:e.tc3.toString(),status:1,commit_id:this.$route.query.commit_id?Number(this.$route.query.commit_id):void 0});i&&(this.stepsFlag=2)}catch(p){}this.pubLoad=!1},convertBase64UrlToBlob(t){const e=window.atob(t.split(",")[1]),i=new ArrayBuffer(e.length),s=new Uint8Array(i);for(let n=0;n<e.length;n++)s[n]=e.charCodeAt(n);return new Blob([i],{type:"image/png"})},refuseArt(){this.formData.refuse_reson?(this.refuseload=!0,Object(o["patchProject"])({project_id:this.project_data.id,refuse_reson:this.formData.refuse_reson,status:2,commit_id:this.$route.query.commit_id?Number(this.$route.query.commit_id):void 0}).then(t=>{this.$message.success("丑拒🖐️")}).catch(()=>{}).finally(()=>{this.refuseload=!1})):this.$message.error("请选择拒绝理由")},chooseImage(t){for(const e in this.images)this.images[e].active=!1;this.images[t].active=!0},infoNext(){this.stepsFlag=1,this.getImages(),this.drawCanvas()},async drawCanvas(){this.canvasLoad=!0;const t=document.getElementById("pubCanvas"),e=document.getElementById("pubCanvas2"),i=document.getElementById("pubCanvas3"),s=document.getElementById("pubCanvas4"),n=document.getElementById("pubCanvas5");let a=1,r=[0,0];this.knife_data.totalX>this.knife_data.totalY?(a=2e3/this.knife_data.totalX,r=[2e3,this.knife_data.totalY*a]):(a=2e3/this.knife_data.totalY,r=[this.knife_data.totalX*a,2e3]);const o=new l["a"](this.project_data,this.knife_data,!0);o.setHasShadow(!0),await o.draw(r[0],r[1],a,"out",t),await o.draw(r[0],r[1],a,"in",e),await o.draw(r[0],r[1],a,"out",i,"gilding",this.crafts),await o.draw(r[0],r[1],a,"out",s,"bump",this.crafts),await o.draw(r[0],r[1],a,"out",n,"roughness",this.crafts),this.canvasLoad=!1},getImages(){this.imageLoad=!0,this.imagesQuery.project_id=this.project_data.id,this.$api.project.renderImages(this.imagesQuery).then(t=>{if(this.imageLoad=!1,t){for(const e in t.data.data)t.data.data[e].active=!1;if(1===this.imagesQuery.currentPage)this.images=t.data.data;else for(const e in t.data.data)t.data.data[e].active=!1,this.images.push(t.data.data[e]);this.imagesQuery.count=t.data.count}})},getCommitInfo(){Object(o["getProjectContributes"])({project_id:this.project_data.id,status:0}).then(t=>{Array.isArray(t.data)&&t.data.length&&(t={data:t.data[0]},this.commitInfo=t.data,this.commitInfo={status:0},t.data.keywords&&(this.formData={title:t.data.title,keywords:t.data.keywords.split(","),copyright:t.data.copyright,remarks:t.data.remarks},1!==t.data.status||this.is_contribute||(this.stepsFlag=1),this.selectChange(this.formData.keywords)))})},checkSubmit(t=!0){if(""===this.formData.title)return this.$message.error("请填写标题"),!1;if(0===this.formData.keywords.length)return this.$message.error("请选择关键词"),!1;const e=this.formData.keywords.toString();return e.length>=100?(this.$message.error("关键词数目过多，请重新选择"),!1):!this.checkedAticle&&t?(this.$message.error("请阅读并接受协议"),!1):!(!this.formData.copyright&&t)||(this.$message.error("请上传版权声明"),!1)},commitProject(){if(!this.checkSubmit())return;const t={tc1:[],tc2:[],tc3:[]};for(const s in this.tags)for(const e in this.tags[s].children)this.tags[s].children[e].checked&&(t.tc1.push(this.tags[s].id),t.tc2.push(this.tags[s].children[e].id));t.tc1=[...new Set(t.tc1)],this.loading=!0;const e={title:this.formData.title,keywords:this.formData.keywords.toString(),project_id:this.project_data.id,tc1:t.tc1.toString(),tc2:t.tc2.toString(),tc3:t.tc3.toString(),remarks:this.formData.remarks,copyright:this.formData.copyright};this.hasCommitId&&(e.commit_id=this.$route.query.commit_id?Number(this.$route.query.commit_id):void 0,e.status=0);const i=this.hasCommitId?o["patchProject"]:o["commitProject"];i(e).then(t=>{this.loading=!1,t&&(this.$message.success("提交成功"),this.hasCommitId||window.open("/contribute"),this.tvisble=!1)})},getMudata(t){this.$http.get("/api/v2/templates/ctree").then(e=>{if(200===e.code){const t=[];for(const i in e.data)for(const s in e.data[i].children)e.data[i].children[s].checked=!1,t.push(e.data[i].children[s]);this.tags=e.data,this.selectTags=t}else this.$message.error(e.msg);"function"===typeof t&&t()})},initTags(){for(const t in this.tags)for(const e in this.tags[t].children)this.tags[t].children[e].checked=!1},checkedChange(t,e,i){this.tags[e].children[i].checked=t.target.checked,this.checkKeywords(this.formData.keywords,this.tags[e].children[i].name,t.target.checked)},checkKeywords(t,e,i){let s=-1;for(const n in t)t[n]===e&&(s=n);-1===s&&i?t.push(e):i||t.splice(s,1)},selectChange(t){const e=[];for(const i in t)for(const s in this.tags)for(const n in this.tags[s].children)this.tags[s].children[n].name===t[i]&&e.push([s,n]);this.initTags();for(const i in e)this.tags[e[i][0]].children[e[i][1]].checked=!0},reasonChange(t,e){this.formData.refuse_reson=e}}}),p=u,f=(i("1e0b"),i("2877")),m=Object(f["a"])(p,s,n,!1,null,null,null);e["default"]=m.exports},e7d2:function(t,e,i){var s=i("4a3f");function n(t,e,i,n,a,r,o,l,c,h,d){if(0===c)return!1;var u=c;if(d>e+u&&d>n+u&&d>r+u&&d>l+u||d<e-u&&d<n-u&&d<r-u&&d<l-u||h>t+u&&h>i+u&&h>a+u&&h>o+u||h<t-u&&h<i-u&&h<a-u&&h<o-u)return!1;var p=s.cubicProjectPoint(t,e,i,n,a,r,o,l,h,d,null);return p<=u/2}e.containStroke=n},e856:function(t,e,i){"use strict";i.r(e);var s=i("750b");i("5d49");const n="//cdn.baoxiaohe.com/user-materials/b5dc84b1-5761-481a-8e85-bf989974b5be.png";e["default"]=Object(s["b"])({props:{src:{type:String,default:""},alt:{type:String,default:""},active:{type:Boolean,default:!1},play:{type:Boolean,default:!1}},setup(t){return()=>Object(s["c"])("div",{class:`block-item ${t.active?"block-item__active":""} flex flex-center item-center`},[t.play&&Object(s["c"])("div",{class:"play"},[Object(s["c"])("img",{attrs:{src:n,alt:""}})]),Object(s["c"])("img",{attrs:{src:t.src,alt:t.alt,draggable:"false"}})])}})},e86a:function(t,e,i){var s=i("9850"),n=i("5e76"),a=i("6d8b"),r=a.getContext,o=a.extend,l=a.retrieve2,c=a.retrieve3,h=a.trim,d={},u=0,p=5e3,f=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,m="12px sans-serif",g={};function v(t,e){g[t]=e}function b(t,e){e=e||m;var i=t+":"+e;if(d[i])return d[i];for(var s=(t+"").split("\n"),n=0,a=0,r=s.length;a<r;a++)n=Math.max(T(s[a],e).width,n);return u>p&&(u=0,d={}),u++,d[i]=n,n}function y(t,e,i,s,n,a,r,o){return r?x(t,e,i,s,n,a,r,o):_(t,e,i,s,n,a,o)}function _(t,e,i,n,a,r,o){var l=E(t,e,a,r,o),c=b(t,e);a&&(c+=a[1]+a[3]);var h=l.outerHeight,d=w(0,c,i),u=C(0,h,n),p=new s(d,u,c,h);return p.lineHeight=l.lineHeight,p}function x(t,e,i,n,a,r,o,l){var c=D(t,{rich:o,truncate:l,font:e,textAlign:i,textPadding:a,textLineHeight:r}),h=c.outerWidth,d=c.outerHeight,u=w(0,h,i),p=C(0,d,n);return new s(u,p,h,d)}function w(t,e,i){return"right"===i?t-=e:"center"===i&&(t-=e/2),t}function C(t,e,i){return"middle"===i?t-=e/2:"bottom"===i&&(t-=e),t}function k(t,e,i){var s=e.textPosition,n=e.textDistance,a=i.x,r=i.y;n=n||0;var o=i.height,l=i.width,c=o/2,h="left",d="top";switch(s){case"left":a-=n,r+=c,h="right",d="middle";break;case"right":a+=n+l,r+=c,d="middle";break;case"top":a+=l/2,r-=n,h="center",d="bottom";break;case"bottom":a+=l/2,r+=o+n,h="center";break;case"inside":a+=l/2,r+=c,h="center",d="middle";break;case"insideLeft":a+=n,r+=c,d="middle";break;case"insideRight":a+=l-n,r+=c,h="right",d="middle";break;case"insideTop":a+=l/2,r+=n,h="center";break;case"insideBottom":a+=l/2,r+=o-n,h="center",d="bottom";break;case"insideTopLeft":a+=n,r+=n;break;case"insideTopRight":a+=l-n,r+=n,h="right";break;case"insideBottomLeft":a+=n,r+=o-n,d="bottom";break;case"insideBottomRight":a+=l-n,r+=o-n,h="right",d="bottom";break}return t=t||{},t.x=a,t.y=r,t.textAlign=h,t.textVerticalAlign=d,t}function S(t,e,i){var s={textPosition:t,textDistance:i};return k({},s,e)}function A(t,e,i,s,n){if(!e)return"";var a=(t+"").split("\n");n=O(e,i,s,n);for(var r=0,o=a.length;r<o;r++)a[r]=j(a[r],n);return a.join("\n")}function O(t,e,i,s){s=o({},s),s.font=e;i=l(i,"...");s.maxIterations=l(s.maxIterations,2);var n=s.minChar=l(s.minChar,0);s.cnCharWidth=b("国",e);var a=s.ascCharWidth=b("a",e);s.placeholder=l(s.placeholder,"");for(var r=t=Math.max(0,t-1),c=0;c<n&&r>=a;c++)r-=a;var h=b(i,e);return h>r&&(i="",h=0),r=t-h,s.ellipsis=i,s.ellipsisWidth=h,s.contentWidth=r,s.containerWidth=t,s}function j(t,e){var i=e.containerWidth,s=e.font,n=e.contentWidth;if(!i)return"";var a=b(t,s);if(a<=i)return t;for(var r=0;;r++){if(a<=n||r>=e.maxIterations){t+=e.ellipsis;break}var o=0===r?M(t,n,e.ascCharWidth,e.cnCharWidth):a>0?Math.floor(t.length*n/a):0;t=t.substr(0,o),a=b(t,s)}return""===t&&(t=e.placeholder),t}function M(t,e,i,s){for(var n=0,a=0,r=t.length;a<r&&n<e;a++){var o=t.charCodeAt(a);n+=0<=o&&o<=127?i:s}return a}function I(t){return b("国",t)}function T(t,e){return g.measureText(t,e)}function E(t,e,i,s,n){null!=t&&(t+="");var a=l(s,I(e)),r=t?t.split("\n"):[],o=r.length*a,c=o,h=!0;if(i&&(c+=i[0]+i[2]),t&&n){h=!1;var d=n.outerHeight,u=n.outerWidth;if(null!=d&&c>d)t="",r=[];else if(null!=u)for(var p=O(u-(i?i[1]+i[3]:0),e,n.ellipsis,{minChar:n.minChar,placeholder:n.placeholder}),f=0,m=r.length;f<m;f++)r[f]=j(r[f],p)}return{lines:r,height:o,outerHeight:c,lineHeight:a,canCacheByTextString:h}}function D(t,e){var i={lines:[],width:0,height:0};if(null!=t&&(t+=""),!t)return i;var s,a=f.lastIndex=0;while(null!=(s=f.exec(t))){var r=s.index;r>a&&L(i,t.substring(a,r)),L(i,s[2],s[1]),a=f.lastIndex}a<t.length&&L(i,t.substring(a,t.length));var o=i.lines,h=0,d=0,u=[],p=e.textPadding,m=e.truncate,g=m&&m.outerWidth,v=m&&m.outerHeight;p&&(null!=g&&(g-=p[1]+p[3]),null!=v&&(v-=p[0]+p[2]));for(var y=0;y<o.length;y++){for(var _=o[y],x=0,w=0,C=0;C<_.tokens.length;C++){var k=_.tokens[C],S=k.styleName&&e.rich[k.styleName]||{},O=k.textPadding=S.textPadding,j=k.font=S.font||e.font,M=k.textHeight=l(S.textHeight,I(j));if(O&&(M+=O[0]+O[2]),k.height=M,k.lineHeight=c(S.textLineHeight,e.textLineHeight,M),k.textAlign=S&&S.textAlign||e.textAlign,k.textVerticalAlign=S&&S.textVerticalAlign||"middle",null!=v&&h+k.lineHeight>v)return{lines:[],width:0,height:0};k.textWidth=b(k.text,j);var T=S.textWidth,E=null==T||"auto"===T;if("string"===typeof T&&"%"===T.charAt(T.length-1))k.percentWidth=T,u.push(k),T=0;else{if(E){T=k.textWidth;var D=S.textBackgroundColor,P=D&&D.image;P&&(P=n.findExistImage(P),n.isImageReady(P)&&(T=Math.max(T,P.width*M/P.height)))}var R=O?O[1]+O[3]:0;T+=R;var z=null!=g?g-w:null;null!=z&&z<T&&(!E||z<R?(k.text="",k.textWidth=T=0):(k.text=A(k.text,z-R,j,m.ellipsis,{minChar:m.minChar}),k.textWidth=b(k.text,j),T=k.textWidth+R))}w+=k.width=T,S&&(x=Math.max(x,k.lineHeight))}_.width=w,_.lineHeight=x,h+=x,d=Math.max(d,w)}i.outerWidth=i.width=l(e.textWidth,d),i.outerHeight=i.height=l(e.textHeight,h),p&&(i.outerWidth+=p[1]+p[3],i.outerHeight+=p[0]+p[2]);for(y=0;y<u.length;y++){k=u[y];var N=k.percentWidth;k.width=parseInt(N,10)/100*d}return i}function L(t,e,i){for(var s=""===e,n=e.split("\n"),a=t.lines,r=0;r<n.length;r++){var o=n[r],l={styleName:i,text:o,isLineHolder:!o&&!s};if(r)a.push({tokens:[l]});else{var c=(a[a.length-1]||(a[0]={tokens:[]})).tokens,h=c.length;1===h&&c[0].isLineHolder?c[0]=l:(o||!h||s)&&c.push(l)}}}function P(t){var e=(t.fontSize||t.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize||12)+"px",t.fontFamily||"sans-serif"].join(" ");return e&&h(e)||t.textFont||t.font}g.measureText=function(t,e){var i=r();return i.font=e||m,i.measureText(t)},e.DEFAULT_FONT=m,e.$override=v,e.getWidth=b,e.getBoundingRect=y,e.adjustTextX=w,e.adjustTextY=C,e.calculateTextPosition=k,e.adjustTextPositionOnRect=S,e.truncateText=A,e.getLineHeight=I,e.measureText=T,e.parsePlainText=E,e.parseRichText=D,e.makeFont=P},e8b2:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();e.checksum=p;var n=i("5726"),a=l(n),r=i("e762"),o=l(r);function l(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function d(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(t){function e(t,i){c(this,e),-1!==t.search(/^[0-9]{11}$/)&&(t+=p(t));var s=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return s.displayValue=i.displayValue,i.fontSize>10*i.width?s.fontSize=10*i.width:s.fontSize=i.fontSize,s.guardHeight=i.height+s.fontSize/2+i.textMargin,s}return d(e,t),s(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==p(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var t="";return t+="101",t+=(0,a.default)(this.data.substr(0,6),"LLLLLL"),t+="01010",t+=(0,a.default)(this.data.substr(6,6),"RRRRRR"),t+="101",{data:t,text:this.text}}},{key:"guardedEncoding",value:function(){var t=[];return this.displayValue&&t.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),t.push({data:"101"+(0,a.default)(this.data[0],"L"),options:{height:this.guardHeight}}),t.push({data:(0,a.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),t.push({data:"01010",options:{height:this.guardHeight}}),t.push({data:(0,a.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),t.push({data:(0,a.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&t.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),t}}]),e}(o.default);function p(t){var e,i=0;for(e=1;e<11;e+=2)i+=parseInt(t[e]);for(e=0;e<11;e+=2)i+=3*parseInt(t[e]);return(10-i%10)%10}e.default=u},e8c9:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=i("4b23"),a=o(n),r=i("f08e");function o(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function h(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var d=function(t){function e(t,i){return l(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r.A_START_CHAR+t,i))}return h(e,t),s(e,[{key:"valid",value:function(){return new RegExp("^"+r.A_CHARS+"+$").test(this.data)}}]),e}(a.default);e.default=d},e936:function(t,e,i){},e966:function(t,e,i){},e97d:function(t,e,i){"use strict";var s=i("e13b"),n=i.n(s);n.a},e9a4:function(t,e,i){t.exports=i.p+"editor-assets/img/copy.c74353a3.svg"},e9bc:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAC5UlEQVRYR8WWS2gTURSG/zNNN1IR9xah+EimWos10wdaXBSkFRSlihs3LlREpbkp6iJFBEWU5qZRUOlK3IgKioJaFCkqpc0kqdiSSbux1i7EjYgPxGpyJCENaZpJmjaP2c3Mvf/3zZlz7wyhzAeVmY+yCTQZ3W1MXFMWAc0QVwCcARAsqYB90mmnCF8D0BR/9QxZMoHGsOhmxmUAlhibgHs+VR4quoB9zFFDlhiYDiYbnvBCt8ldCZHirQO74WwlQj+YN6ZQXuuq3Dl3XrQKaCFxAIT7aY83oquyOfVaUQS0sOMkmK6nghgYVSKRDt9m75eiCmiG4w5Ah9OePBT5R53BOvdE+gsvaAU0Q3wEsDYN8ocUtPuscjBTtxVEoCFwdFXFiqpvmQAMnPCr8qZZq88T0MLivG6TF/JZF/ZxUU0V+JQZzl6/6unKlhcX2D59bvXsr9leAEcA3GULu/wbPB9yiWwzTm9SYBnPOI4woNtke64M0ibFFkToNsD1KYODUY72BGr7npsF2MOihRhDJvCpKEXaA1bvZG6BkOMBiDoXDuSfDMXlV93e9HtNRtfWKJSgWbiiYO+IVT7JBU/uhJohHgLYl7lL6YbC0Z7hWs/X2P3G96fWcGXljHk4ndVV99XFwJMC8eCweMyMPSYTXxHg+sEzo1VUHQKwzmTcM12VuxcLnycQO9EM8RRAh0nADMBjAJkBoooSbR2x9mXuC5PQBfuAFhYDYMS/VPkcBLroU909+cxZUIG5yY2G8yWD2/IIC1Ss5Nbhas/vPObEh5ruhHbDMUig5GczezDv11XPo3zhWQUSPfEGwI5swczc76/1HFsKPKdAXCIshsBoMQF8/gtqfqe6p4smEF+ihvAxoGWAXNJV6VoqfFEVmAvXDBEA0JAC+w5FqdetvVMlEUj0xHDyl5ogdZt0LgeeVwVSKvEWhGayUJ1vvdsouUCiMW/pNnl8ufAlVaAQ0NSMgvySLUfqP9zx5FwY6HLfAAAAAElFTkSuQmCC"},e9f9:function(t,e,i){var s=i("4942"),n=i("d3a4"),a=i("6d8b"),r=a.each;function o(t){return parseInt(t,10)}function l(t,e){n.initVML(),this.root=t,this.storage=e;var i=document.createElement("div"),s=document.createElement("div");i.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",s.style.cssText="position:absolute;left:0;top:0;",t.appendChild(i),this._vmlRoot=s,this._vmlViewport=i,this.resize();var a=e.delFromStorage,r=e.addToStorage;e.delFromStorage=function(t){a.call(e,t),t&&t.onRemove&&t.onRemove(s)},e.addToStorage=function(t){t.onAdd&&t.onAdd(s),r.call(e,t)},this._firstPaint=!0}function c(t){return function(){s('In IE8.0 VML mode painter not support method "'+t+'"')}}l.prototype={constructor:l,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0,!0);this._paintList(t)},_paintList:function(t){for(var e=this._vmlRoot,i=0;i<t.length;i++){var s=t[i];s.invisible||s.ignore?(s.__alreadyNotVisible||s.onRemove(e),s.__alreadyNotVisible=!0):(s.__alreadyNotVisible&&s.onAdd(e),s.__alreadyNotVisible=!1,s.__dirty&&(s.beforeBrush&&s.beforeBrush(),(s.brushVML||s.brush).call(s,e),s.afterBrush&&s.afterBrush())),s.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(e),this._firstPaint=!1)},resize:function(t,e){t=null==t?this._getWidth():t,e=null==e?this._getHeight():e;if(this._width!==t||this._height!==e){this._width=t,this._height=e;var i=this._vmlViewport.style;i.width=t+"px",i.height=e+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var t=this.root,e=t.currentStyle;return(t.clientWidth||o(e.width))-o(e.paddingLeft)-o(e.paddingRight)|0},_getHeight:function(){var t=this.root,e=t.currentStyle;return(t.clientHeight||o(e.height))-o(e.paddingTop)-o(e.paddingBottom)|0}},r(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],(function(t){l.prototype[t]=c(t)}));var h=l;t.exports=h},e9ff:function(t,e,i){"use strict";var s=i("9453"),n=i.n(s);n.a},ea37:function(t,e,i){},ea4b:function(t,e,i){"use strict";var s=i("9459"),n=i.n(s);n.a},ea51:function(t,e,i){"use strict";var s=i("8767"),n=i.n(s);n.a},ea97:function(t,e,i){},eae5:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAC5UlEQVRYR82YS6hNYRTHf3/k/Ri4SkxcyUCK5BnuVTcDkYESkkiIkRF1ZaCkrjKQYsDA9UhuKYmBFOWRlBQRRjLwGtwMEPJaWrd9r3O3c87+vn22tjU5k7X+63fWXt/61t7iPzcVyWdmw4HRQLekH0VoNwxoZq3AZmAZMC6B+gU8Ay4BRyW9yQubG9DMmoCTwIqM5F+A/UCHJIsFzQVoZpOB68CkiITngfWSvLrBFg1oZqOAe8C04Cx/HA9J2hUTlwfwILA7JkmFrz/iOZIehMZHAZrZWOAVMDQ0QRW/y5JWhsbHAm4EOkPFa/h989Mu6UOITizgcWBriHCGT5ukGyE6sYBXgOUhwhk+GySdDdGJBfTBG9w/dQB83Jz7F4DHgB0hwhk+SyTdDNGJreAawAduI+Y3S5OkzyEisYC+CPiY8WGd17okrQ0NjgJ0UTPbm9ytoTkq/X4C0yU9Dw3OAzgE8P6ZF5qkwq9dUkdMXDRgUsXxwFVgRkSyI5J2Rvj3uOYCTCBHAIeTXXBAncTdfndL8tUs2nID9mYyM99q/Ar0hbUZcHCHepwsrJ2h11o1+oYB06JmNiB256tX1sIBo59hRkBuQDMbBEwBpgJjktk4EhgMfAI+Jr+vgaeS3ueBDwb0RwcsAlYBbQmYw4TaO8AX1Yvem5K8TzMtE9DMHGI70A74eCnCfGBfAPZIepG7B81sIXAmOZ1FgKU1fHn1wb2v1htfzQqa2WrgdIPrfeifOgVsqfayXxXQzOYDd4CBoRkK8Dsgye/5fvYXoJkNAx4mh6CAvMES34FZkp5URlQD3JR8MQhWLtDxhKRtWYDXgKUFJo2RegtMrDww/SpoZt5zXwEfwmVZs6SXvcnTgBMAn/xl2kxJj2oBzgbul0kHLJbkE6TH0hX0q+x2yYCtkm7VAmxJ1vkyGVsk9RUpXcEFwN0y6YC5kvrarNop7gIctAzz3ltXufBmbjNlUNYd1GUDpfP/BkxL0CmLeI/2AAAAAElFTkSuQmCC"},eb1e:function(t,e,i){"use strict";i.r(e);i("ddb0");var s=i("5530"),n=i("8bbf"),a=i.n(n),r=i("750b"),o=i("0c6d"),l=i("57e0");e["default"]=Object(r["b"])({props:{visible:{type:Boolean,default:!1},id:{default:!1},isFirst:{type:Boolean,default:!1}},setup(t,e){Object(r["f"])(()=>{n.value=e.refs.formRef||null,a.a.nextTick(()=>{n.value=e.refs.formRef||null})}),Object(r["h"])(()=>{n.value=e.refs.formRef||null,a.a.nextTick(()=>{n.value=e.refs.formRef||null})});const i=Object(r["i"])({contacts:"",telNumber:"",province:"",city:"",district:"",detail:"",postalCode:"",email:"",isDefault:!1,address:["","",""]}),n=Object(r["j"])(null),c=Object(r["a"])(()=>t.id?"修改收货地址":"新增收货地址"),h=Object(r["a"])(()=>t.id?o["pc"]:o["Yb"]),d=()=>{e.emit("cancel")},u=()=>{const s=!!t.isFirst||i.isDefault,a={contacts:i.contacts,telNumber:i.telNumber,province:i.province,city:i.city,district:i.district,detail:i.detail,postalCode:i.postalCode,email:i.email,isDefault:s,addressId:t.id};n.value.validate(async t=>{if(t)try{const{data:t}=await h.value(a);d(),e.emit("success",t,a)}catch(i){}})},p=t=>{if(Array.isArray(t)&&t.length>=3){i.address=t;const[e,s,n]=t;i.province=e,i.city=s,i.district=n}};Object(r["k"])(()=>t.visible,async e=>{if(e)if(t.id){const{data:e}=await Object(o["S"])(t.id);i.contacts=e.contacts,i.telNumber=e.telNumber,i.province=e.province,i.city=e.city,i.district=e.district,i.detail=e.detail,i.postalCode=e.postalCode,i.email=e.email,i.isDefault=Boolean(e.isDefault),i.address=[i.province,i.city,i.district]}else{for(const t in i)i[t]="";i.isDefault=!1,i.address=["","",""]}},{lazy:!0});const f={contacts:[{required:!0,message:"此项必填",trigger:"blur"}],telNumber:[{required:!0,message:"此项必填",trigger:"blur"},{pattern:/^[1]([3-9])[0-9]{9}$/,message:"手机号格式不正确",trigger:["change","blur"]}],address:[{required:!0,trigger:"change",validator:(t,e,i)=>{const s=new Error("此项必填");return Array.isArray(e)?e.length<3||e.some(t=>""===t)?i(s):void i():i(s)}}],detail:[{required:!0,message:"此项必填",trigger:"blur"}],postalCode:[{required:!0,message:"此项必填",trigger:"blur"},{pattern:/^\d{6}$/,message:"邮政编码不是6位",trigger:["change","blur"]}]};return()=>Object(r["c"])("a-modal",{attrs:{centered:!0,title:c.value,wrapClassName:"login-wrapper",visible:t.visible,destroyOnClose:!0,closable:!0,maskClosable:!1,footer:null,width:640,height:562},on:{cancel:d}},[Object(r["c"])("a-form-model",{class:"pt-16 pb-16",style:"padding-left:24px; padding-right:24px;",props:Object(s["a"])({},{model:i}),attrs:{layout:"horizontal",labelCol:{span:4},wrapperCol:{span:19},colon:!1,rules:f},on:{input:()=>{}},ref:"formRef"},[Object(r["c"])("a-form-model-item",{attrs:{prop:"contacts",label:"收货人"}},[Object(r["c"])("a-input",{model:{value:i.contacts,callback:t=>{a.a.set(i,"contacts",t)}}})]),Object(r["c"])("a-form-model-item",{attrs:{prop:"address",label:"地址信息"}},[Object(r["c"])(l["a"],{on:{change:p},model:{value:i.address,callback:t=>{a.a.set(i,"address",t)}}})]),Object(r["c"])("a-form-model-item",{attrs:{prop:"detail",label:"地址信息"}},[Object(r["c"])("a-input",{model:{value:i.detail,callback:t=>{a.a.set(i,"detail",t)}}})]),Object(r["c"])("a-form-model-item",{attrs:{prop:"postalCode",label:"邮政编码"}},[Object(r["c"])("a-input",{model:{value:i.postalCode,callback:t=>{a.a.set(i,"postalCode",t)}}})]),Object(r["c"])("a-form-model-item",{attrs:{prop:"telNumber",label:"手机号码"}},[Object(r["c"])("a-input",{model:{value:i.telNumber,callback:t=>{a.a.set(i,"telNumber",t)}}})]),Object(r["c"])("a-form-model-item",{attrs:{prop:"email",label:"邮箱"}},[Object(r["c"])("a-input",{model:{value:i.email,callback:t=>{a.a.set(i,"email",t)}}})]),!t.isFirst&&Object(r["c"])("a-form-model-item",{attrs:{prop:"isDefault",label:" "}},[Object(r["c"])("a-checkbox",{model:{value:i.isDefault,callback:t=>{a.a.set(i,"isDefault",t)}}},["设置为默认收货地址"])]),Object(r["c"])("a-divider"),Object(r["c"])("div",{class:"flex flex-center"},[Object(r["c"])("a-button",{attrs:{type:"primary"},on:{click:u}},["保存"])])])])}})},eb6b:function(t,e,i){t.exports=i.p+"editor-assets/img/next-active.cc100c3b.svg"},ebed:function(t,e,i){t.exports=i.p+"editor-assets/img/qrcode.fbb38a6c.svg"},ebff:function(t,e,i){"use strict";var s=i("dc0a"),n=i.n(s);n.a},ec03:function(t,e,i){t.exports=i.p+"editor-assets/img/design.9acdfc0b.svg"},ec05:function(t,e,i){t.exports=i.p+"editor-assets/img/qr-add.a902cd45.svg"},ec22:function(t,e,i){},ec44:function(t,e,i){},ec51:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0===t.project_data.cate.complex_type?s("div",{staticClass:"top-btn flex flex-start item-center fo-default fo-14 px-15 mr-32",staticStyle:{color:"#ff610d"},on:{click:t.handleCreatePrintOrder}},[s("i",{staticClass:"iconfont icon-head-yinshua mr-8",staticStyle:{color:"#ff610d"}}),t._v("印刷 "),s("img",{staticStyle:{position:"absolute",top:"-3px",right:"-25px"},attrs:{src:i("3472")}})]):t._e()},n=[],a=i("5530"),r=i("5880"),o=(i("da71"),{data(){return{is_up:!1,riskVisible:!1}},computed:Object(a["a"])({},Object(r["mapState"])("editor-v2",["project_data","knife_data","isCup","scale","is_outside","localHistory","last_saved_local_history_ts","project_last_saved_ts","project_is_saving"])),methods:Object(a["a"])(Object(a["a"])({},Object(r["mapActions"])(["rollbackHistory","reRollbackHistory","saveFullTemplateV2","saveForceCreateV2","saveIsInside"])),{},{handleCreatePrintOrder(){this.$emit("click")}})}),l=o,c=i("2877"),h=Object(c["a"])(l,s,n,!1,null,null,null);e["default"]=h.exports},ec5b:function(t,e){t.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAA0JCgsKCA0LCgsODg0PEyAVExISEyccHhcgLikxMC4pLSwzOko+MzZGNywtQFdBRkxOUlNSMj5aYVpQYEpRUk//2wBDAQ4ODhMREyYVFSZPNS01T09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0//wAARCABAAEADAREAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABwQAQADAQEBAQEAAAAAAAAAAAABETFBIVFhcf/EABUBAQEAAAAAAAAAAAAAAAAAAAAE/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A7lRaBWeWBIFAUAB4BMQBmAgEgR7INUCdAAkAEwFAirAmQAATugsgcAAjAN0ACQQFA4C6CAdAkCgKABQASfQMAA/gE4ACWC2AABYE/gHoE3fwDmAUBUgAV9AAB//Z"},ec9f:function(t,e,i){"use strict";var s=i("a7fc"),n=i.n(s);n.a},ed21:function(t,e,i){var s=i("2cf4c"),n=s.devicePixelRatio,a=i("6d8b"),r=i("4942"),o=i("9850"),l=i("04f6"),c=i("5e68"),h=i("98b7"),d=i("0da8"),u=i("22d1"),p=1e5,f=314159,m=.01,g=.001;function v(t){return parseInt(t,10)}function b(t){return!!t&&(!!t.__builtin__||"function"===typeof t.resize&&"function"===typeof t.refresh)}var y=new o(0,0,0,0),_=new o(0,0,0,0);function x(t,e,i){return y.copy(t.getBoundingRect()),t.transform&&y.applyTransform(t.transform),_.width=e,_.height=i,!y.intersect(_)}function w(t,e){if(t===e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!0;return!1}function C(t,e){for(var i=0;i<t.length;i++){var s=t[i];s.setTransform(e),e.beginPath(),s.buildPath(e,s.shape),e.clip(),s.restoreTransform(e)}}function k(t,e){var i=document.createElement("div");return i.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",i}var S=function(t,e,i){this.type="canvas";var s=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=i=a.extend({},i||{}),this.dpr=i.devicePixelRatio||n,this._singleCanvas=s,this.root=t;var r=t.style;r&&(r["-webkit-tap-highlight-color"]="transparent",r["-webkit-user-select"]=r["user-select"]=r["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var o=this._zlevelList=[],l=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,s){var h=t.width,d=t.height;null!=i.width&&(h=i.width),null!=i.height&&(d=i.height),this.dpr=i.devicePixelRatio||1,t.width=h*this.dpr,t.height=d*this.dpr,this._width=h,this._height=d;var u=new c(t,this,this.dpr);u.__builtin__=!0,u.initContext(),l[f]=u,u.zlevel=f,o.push(f),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var p=this._domRoot=k(this._width,this._height);t.appendChild(p)}this._hoverlayer=null,this._hoverElements=[]};S.prototype={constructor:S,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(t){var e=this.storage.getDisplayList(!0),i=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,t,this._redrawId);for(var s=0;s<i.length;s++){var n=i[s],a=this._layers[n];if(!a.__builtin__&&a.refresh){var r=0===s?this._backgroundColor:null;a.refresh(r)}}return this.refreshHover(),this},addHover:function(t,e){if(!t.__hoverMir){var i=new t.constructor({style:t.style,shape:t.shape,z:t.z,z2:t.z2,silent:t.silent});return i.__from=t,t.__hoverMir=i,e&&i.setStyle(e),this._hoverElements.push(i),i}},removeHover:function(t){var e=t.__hoverMir,i=this._hoverElements,s=a.indexOf(i,e);s>=0&&i.splice(s,1),t.__hoverMir=null},clearHover:function(t){for(var e=this._hoverElements,i=0;i<e.length;i++){var s=e[i].__from;s&&(s.__hoverMir=null)}e.length=0},refreshHover:function(){var t=this._hoverElements,e=t.length,i=this._hoverlayer;if(i&&i.clear(),e){l(t,this.storage.displayableSortFunc),i||(i=this._hoverlayer=this.getLayer(p));var s={};i.ctx.save();for(var n=0;n<e;){var a=t[n],r=a.__from;r&&r.__zr?(n++,r.invisible||(a.transform=r.transform,a.invTransform=r.invTransform,a.__clipPaths=r.__clipPaths,this._doPaintEl(a,i,!0,s))):(t.splice(n,1),r.__hoverMir=null,e--)}i.ctx.restore()}},getHoverLayer:function(){return this.getLayer(p)},_paintList:function(t,e,i){if(this._redrawId===i){e=e||!1,this._updateLayerStatus(t);var s=this._doPaintList(t,e);if(this._needsManuallyCompositing&&this._compositeManually(),!s){var n=this;h((function(){n._paintList(t,e,i)}))}}},_compositeManually:function(){var t=this.getLayer(f).ctx,e=this._domRoot.width,i=this._domRoot.height;t.clearRect(0,0,e,i),this.eachBuiltinLayer((function(s){s.virtual&&t.drawImage(s.dom,0,0,e,i)}))},_doPaintList:function(t,e){for(var i=[],s=0;s<this._zlevelList.length;s++){var n=this._zlevelList[s],r=this._layers[n];r.__builtin__&&r!==this._hoverlayer&&(r.__dirty||e)&&i.push(r)}for(var o=!0,l=0;l<i.length;l++){r=i[l];var c=r.ctx,h={};c.save();var d=e?r.__startIndex:r.__drawIndex,p=!e&&r.incremental&&Date.now,f=p&&Date.now(),m=r.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(r.__startIndex===r.__endIndex)r.clear(!1,m);else if(d===r.__startIndex){var g=t[d];g.incremental&&g.notClear&&!e||r.clear(!1,m)}-1===d&&(d=r.__startIndex);for(var v=d;v<r.__endIndex;v++){var b=t[v];if(this._doPaintEl(b,r,e,h),b.__dirty=b.__dirtyText=!1,p){var y=Date.now()-f;if(y>15)break}}r.__drawIndex=v,r.__drawIndex<r.__endIndex&&(o=!1),h.prevElClipPaths&&c.restore(),c.restore()}return u.wxa&&a.each(this._layers,(function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()})),o},_doPaintEl:function(t,e,i,s){var n=e.ctx,a=t.transform;if((e.__dirty||i)&&!t.invisible&&0!==t.style.opacity&&(!a||a[0]||a[3])&&(!t.culling||!x(t,this._width,this._height))){var r=t.__clipPaths,o=s.prevElClipPaths;o&&!w(r,o)||(o&&(n.restore(),s.prevElClipPaths=null,s.prevEl=null),r&&(n.save(),C(r,n),s.prevElClipPaths=r)),t.beforeBrush&&t.beforeBrush(n),t.brush(n,s.prevEl||null),s.prevEl=t,t.afterBrush&&t.afterBrush(n)}},getLayer:function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=f);var i=this._layers[t];return i||(i=new c("zr_"+t,this,this.dpr),i.zlevel=t,i.__builtin__=!0,this._layerConfig[t]&&a.merge(i,this._layerConfig[t],!0),e&&(i.virtual=e),this.insertLayer(t,i),i.initContext()),i},insertLayer:function(t,e){var i=this._layers,s=this._zlevelList,n=s.length,a=null,o=-1,l=this._domRoot;if(i[t])r("ZLevel "+t+" has been used already");else if(b(e)){if(n>0&&t>s[0]){for(o=0;o<n-1;o++)if(s[o]<t&&s[o+1]>t)break;a=i[s[o]]}if(s.splice(o+1,0,t),i[t]=e,!e.virtual)if(a){var c=a.dom;c.nextSibling?l.insertBefore(e.dom,c.nextSibling):l.appendChild(e.dom)}else l.firstChild?l.insertBefore(e.dom,l.firstChild):l.appendChild(e.dom)}else r("Layer of zlevel "+t+" is not valid")},eachLayer:function(t,e){var i,s,n=this._zlevelList;for(s=0;s<n.length;s++)i=n[s],t.call(e,this._layers[i],i)},eachBuiltinLayer:function(t,e){var i,s,n,a=this._zlevelList;for(n=0;n<a.length;n++)s=a[n],i=this._layers[s],i.__builtin__&&t.call(e,i,s)},eachOtherLayer:function(t,e){var i,s,n,a=this._zlevelList;for(n=0;n<a.length;n++)s=a[n],i=this._layers[s],i.__builtin__||t.call(e,i,s)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){function e(t){n&&(n.__endIndex!==t&&(n.__dirty=!0),n.__endIndex=t)}if(this.eachBuiltinLayer((function(t,e){t.__dirty=t.__used=!1})),this._singleCanvas)for(var i=1;i<t.length;i++){var s=t[i];if(s.zlevel!==t[i-1].zlevel||s.incremental){this._needsManuallyCompositing=!0;break}}var n=null,a=0;for(i=0;i<t.length;i++){s=t[i];var o,l=s.zlevel;s.incremental?(o=this.getLayer(l+g,this._needsManuallyCompositing),o.incremental=!0,a=1):o=this.getLayer(l+(a>0?m:0),this._needsManuallyCompositing),o.__builtin__||r("ZLevel "+l+" has been used by unkown layer "+o.id),o!==n&&(o.__used=!0,o.__startIndex!==i&&(o.__dirty=!0),o.__startIndex=i,o.incremental?o.__drawIndex=-1:o.__drawIndex=i,e(i),n=o),s.__dirty&&(o.__dirty=!0,o.incremental&&o.__drawIndex<0&&(o.__drawIndex=i))}e(i),this.eachBuiltinLayer((function(t,e){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)}))},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},setBackgroundColor:function(t){this._backgroundColor=t},configLayer:function(t,e){if(e){var i=this._layerConfig;i[t]?a.merge(i[t],e,!0):i[t]=e;for(var s=0;s<this._zlevelList.length;s++){var n=this._zlevelList[s];if(n===t||n===t+m){var r=this._layers[n];a.merge(r,i[t],!0)}}}},delLayer:function(t){var e=this._layers,i=this._zlevelList,s=e[t];s&&(s.dom.parentNode.removeChild(s.dom),delete e[t],i.splice(a.indexOf(i,t),1))},resize:function(t,e){if(this._domRoot.style){var i=this._domRoot;i.style.display="none";var s=this._opts;if(null!=t&&(s.width=t),null!=e&&(s.height=e),t=this._getSize(0),e=this._getSize(1),i.style.display="",this._width!==t||e!==this._height){for(var n in i.style.width=t+"px",i.style.height=e+"px",this._layers)this._layers.hasOwnProperty(n)&&this._layers[n].resize(t,e);a.each(this._progressiveLayers,(function(i){i.resize(t,e)})),this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(f).resize(t,e)}return this},clearLayer:function(t){var e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[f].dom;var e=new c("image",this,t.pixelRatio||this.dpr);if(e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor),t.pixelRatio<=this.dpr){this.refresh();var i=e.dom.width,s=e.dom.height,n=e.ctx;this.eachLayer((function(t){t.__builtin__?n.drawImage(t.dom,0,0,i,s):t.renderToCanvas&&(e.ctx.save(),t.renderToCanvas(e.ctx),e.ctx.restore())}))}else for(var a={},r=this.storage.getDisplayList(!0),o=0;o<r.length;o++){var l=r[o];this._doPaintEl(l,e,!0,a)}return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,i=["width","height"][t],s=["clientWidth","clientHeight"][t],n=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(null!=e[i]&&"auto"!==e[i])return parseFloat(e[i]);var r=this.root,o=document.defaultView.getComputedStyle(r);return(r[s]||v(o[i])||v(r.style[i]))-(v(o[n])||0)-(v(o[a])||0)|0},pathToImage:function(t,e){e=e||this.dpr;var i=document.createElement("canvas"),s=i.getContext("2d"),n=t.getBoundingRect(),a=t.style,r=a.shadowBlur*e,o=a.shadowOffsetX*e,l=a.shadowOffsetY*e,c=a.hasStroke()?a.lineWidth:0,h=Math.max(c/2,-o+r),u=Math.max(c/2,o+r),p=Math.max(c/2,-l+r),f=Math.max(c/2,l+r),m=n.width+h+u,g=n.height+p+f;i.width=m*e,i.height=g*e,s.scale(e,e),s.clearRect(0,0,m,g),s.dpr=e;var v={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[h-n.x,p-n.y],t.rotation=0,t.scale=[1,1],t.updateTransform(),t&&t.brush(s);var b=d,y=new b({style:{x:0,y:0,image:i}});return null!=v.position&&(y.position=t.position=v.position),null!=v.rotation&&(y.rotation=t.rotation=v.rotation),null!=v.scale&&(y.scale=t.scale=v.scale),y}};var A=S;t.exports=A},ed3f:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=i("4b23"),a=o(n),r=i("f08e");function o(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function h(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var d=function(t){function e(t,i){return l(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r.C_START_CHAR+t,i))}return h(e,t),s(e,[{key:"valid",value:function(){return new RegExp("^"+r.C_CHARS+"+$").test(this.data)}}]),e}(a.default);e.default=d},ed71:function(t,e,i){"use strict";var s=i("27dd"),n=i.n(s);n.a},ed81:function(t,e,i){"use strict";var s=i("efef"),n=i.n(s);n.a},eda1:function(t,e,i){"use strict";i.r(e);i("bfb3");e["default"]={name:"MainBlock",render(){const t=arguments[0];return t("div",{class:"MainBlock"},[t("div",{class:"order-detail-wrapper pt-34"},[t("div",{class:"detail-wrapper"},[t("div",{class:"detail-container"},[t("a-breadcrumb",{attrs:{separator:">"}},[t("a-breadcrumb-item",[t("a",{attrs:{href:"/"}},["首页"])]),t("a-breadcrumb-item",[t("a",{attrs:{href:"/orders"}},["我的订单"])]),t("a-breadcrumb-item",[t("a",{attrs:{href:"javascript:;"}},["当前位置"])])])]),t("div",{class:"mt-34 mb-54 bg-white"},[this.$slots.default])])])])}}},edf3:function(t,e,i){},ee02:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"render-menu",style:{height:t.height+"px"}},[i("div",{staticClass:"slide",style:{top:28+64*t.current+"px"}}),i("div",{class:" flex flex-center item-center "+(0===t.current?"menu-item--active":"menu-item"),on:{click:function(e){return t.$emit("change",0)}}},[t._m(0)]),1===t.user.is_admin?i("div",{class:" flex flex-center item-center "+(1===t.current?"menu-item--active":"menu-item"),on:{click:function(e){return t.$emit("change",1)}}},[t._m(1)]):t._e()])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("img",{staticClass:"img1",attrs:{src:i("e139")}}),s("img",{staticClass:"img2",attrs:{src:i("1f1e6")}}),s("div",{staticClass:"text fo-12 mt-8"},[t._v("场景")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("img",{staticClass:"img1",attrs:{src:i("ff05")}}),s("img",{staticClass:"img2",attrs:{src:i("8536")}}),s("div",{staticClass:"text fo-12 mt-8"},[t._v("光照")])])}],a=i("5530"),r=i("5880"),o={props:{height:{type:Number},current:{type:Number,require:!0}},computed:Object(a["a"])({},Object(r["mapState"])("profile",["user"])),model:{prop:"current",event:"change"}},l=o,c=(i("ad0d"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,null,null);e["default"]=h.exports},ee45:function(t,e,i){"use strict";var s=i("39c8"),n=i.n(s);n.a},ee49:function(t,e,i){},ee4f:function(t,e,i){t.exports=i.p+"editor-assets/img/ang2-w.e98f0c3d.svg"},ee50:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-dropdown",[i("div",{staticClass:"ant-select ant-select-enabled science-input mt-16",attrs:{tabindex:"0"}},[i("div",{staticClass:"ant-select-selection ant-select-selection--single"},[i("div",{staticClass:"ant-select-selection__rendered"},[i("div",{staticClass:"ant-select-selection-selected-value",staticStyle:{display:"block",opacity:"1"}},[t.currentMaterial?i("span",[i("img",{staticClass:"box",attrs:{src:t.currentMaterial.image}}),t._v(" "+t._s(t.currentMaterial.value)+" ")]):t.customizeMaterial?i("span",[i("img",{staticClass:"box",attrs:{src:t.customizeMaterial.image}}),t._v(" "+t._s(t.customizeMaterial.value)+" ")]):t._e()])])])]),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t._l(t.groups,(function(e){return i("a-sub-menu",{key:e.name,attrs:{title:e.name}},t._l(t.menuData[e.name],(function(e){return i("a-menu-item",{key:e.key,staticStyle:{width:"165px"},attrs:{disabled:e.disabled},on:{click:function(i){return t.chooseMaterial(e)}}},[e.image?i("img",{staticClass:"box",attrs:{src:e.image,alt:""}}):t._e(),t._v(" "+t._s(e.value)+" ")])})),1)})),t.customizeMaterial?i("a-menu-item",{on:{click:function(e){return t.chooseMaterial(t.customizeMaterial)}}},[t._v(" "+t._s(t.customizeMaterial.value)+" ")]):t._e()],2)],1)],1)},n=[],a=(i("ddb0"),{props:{materials:{type:Array,default:[]},currentMaterialId:{type:Number,default:null}},watch:{materials(){const t={};for(const e of this.materials)t[e.group_name]?t[e.group_name].push(e):t[e.group_name]=[e];this.menuData=t,this.currentMaterial=this.materials.find(t=>t.key===this.currentMaterialId),this.customizeMaterial=this.materials.find(t=>"自定义"===t.group_name)},currentMaterialId(){this.currentMaterial=this.materials.find(t=>t.key===this.currentMaterialId),this.currentMaterialId||this.chooseMaterial(this.customizeMaterial)}},data(){return{menuData:{},currentMaterial:null,customizeMaterial:null,groups:[{name:"卡纸",color:"#d2d4d9"},{name:"铜版纸",color:"#d2d4d9"},{name:"瓦楞纸",image:i("ec5b")}]}},methods:{chooseMaterial(t){this.$emit("chooseMaterial",t)}}}),r=a,o=(i("fff4"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"8fc72aee",null);e["default"]=l.exports},ee5b:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"wrap"},[s("div",{staticClass:"content"},[s("img",{staticClass:"header",attrs:{src:i("adaed")}}),s("img",{staticClass:"pointer btn-close",attrs:{src:i("c844")},on:{click:t.onClose}}),s("div",{staticClass:"title"},[t._v(" 当前浏览器兼容性较差 ")]),s("div",{staticClass:"desc"},[t._v(" 当前浏览器可能导致某些功能无法使用，建议使用基于 Chromium 内核的浏览器 或 包小盒客户端。 ")]),t._m(0),s("div",{staticClass:"pointer bottom-tip",on:{click:t.onCloseForever}},[t._v(" 不再提醒 ")])])])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bottom-btn-wrap"},[i("a",{staticClass:"pointer bottom-btn btn-chrome",attrs:{target:"_blank",href:"https://support.baoxiaohe.com/archives/81/"}},[t._v(" 下载谷歌浏览器 ")]),i("a",{staticClass:"pointer bottom-btn btn-client",attrs:{target:"_blank",href:"https://support.baoxiaohe.com/client.html"}},[t._v(" 下载包小盒客户端 ")])])}],a={props:["show","close"],data(){return{}},methods:{onCloseForever(){this.$emit("close",!0)},onClose(){this.$emit("close")}}},r=a,o=(i("fc24"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"1ac86a7a",null);e["default"]=l.exports},ee60:function(t,e,i){"use strict";i.r(e);i("ddb0");var s=i("750b"),n=i("0953"),a=i("3ccf"),r=i("365c"),o=i("ed08");i("54f0");e["default"]=Object(s["b"])({props:{phone:{type:String,default:""}},setup(t,e){const i=Object(s["j"])(""),l=Object(s["j"])(""),c=Object(s["j"])(!1),[h]=Object(a["b"])(r["bindPhone"]),d=t=>t&&Object(o["u"])(t);return Object(s["k"])(()=>t.phone,()=>{i.value=t.phone}),()=>Object(s["c"])("div",{class:"account"},[Object(s["c"])("div",{class:"account-container"},[Object(s["c"])("div",{class:"account-title"},["登录账号"]),Object(s["c"])("div",{class:"help mt-8"},["所有登录账号都可用于登录，账号可收取通知消息"]),Object(s["c"])("div",{class:"content flex item-center mt-24"},[Object(s["c"])("div",{class:"field"},["手机号："]),Object(s["c"])("a-input",{style:{width:"300px"},attrs:{value:i.value},on:{change:t=>i.value=t.target.value}}),c.value?"":Object(s["c"])("a-button",{class:"ml-20",attrs:{type:"primary"},on:{click:()=>{if(!d(i.value))return e.root.$message.error("手机号格式不正确");c.value=!0}}},[t.phone?"更改":"确认","绑定"])]),c.value?Object(s["c"])("div",{class:"bottom-container"},[Object(s["c"])("div",{class:"flex item-center mt-12",style:{width:"500px"}},[Object(s["c"])("div",{class:"field"},[" "]),Object(s["c"])(n["default"],{on:{change:t=>{l.value=t}},ref:"code",attrs:{immediate:!0,mobile:i.value},style:{flex:"none",width:"200px"}})]),Object(s["c"])("div",{class:"flex item-center mt-12"},[Object(s["c"])("div",{class:"field"},[" "]),Object(s["c"])("a-button",{attrs:{type:"primary"},on:{click:()=>{let t="";if(d(i.value)||(t="手机号格式不正确"),l.value||(t="请输入验证码"),t)return e.root.$message.error(t);h({variables:{mobileNumber:i.value,verifyCode:l.value},update(){c.value=!1,e.root.$message.success("绑定成功"),e.emit("refresh")}})}}},["确认绑定"])])]):""])])}})},ee84:function(t,e,i){var s=i("20c8"),n=i("401b"),a=n.applyTransform,r=s.CMD,o=[[],[],[]],l=Math.sqrt,c=Math.atan2;function h(t,e){var i,s,n,h,d,u=t.data,p=r.M,f=r.C,m=r.L,g=r.R,v=r.A,b=r.Q;for(n=0,h=0;n<u.length;){switch(i=u[n++],h=n,s=0,i){case p:s=1;break;case m:s=1;break;case f:s=3;break;case b:s=2;break;case v:var y=e[4],_=e[5],x=l(e[0]*e[0]+e[1]*e[1]),w=l(e[2]*e[2]+e[3]*e[3]),C=c(-e[1]/w,e[0]/x);u[n]*=x,u[n++]+=y,u[n]*=w,u[n++]+=_,u[n++]*=x,u[n++]*=w,u[n++]+=C,u[n++]+=C,n+=2,h=n;break;case g:k[0]=u[n++],k[1]=u[n++],a(k,k,e),u[h++]=k[0],u[h++]=k[1],k[0]+=u[n++],k[1]+=u[n++],a(k,k,e),u[h++]=k[0],u[h++]=k[1]}for(d=0;d<s;d++){var k=o[d];k[0]=u[n++],k[1]=u[n++],a(k,k,e),u[h++]=k[0],u[h++]=k[1]}}}t.exports=h},ee93:function(t,e,i){"use strict";var s=i("9d8a").codes.ERR_STREAM_PREMATURE_CLOSE;function n(t){var e=!1;return function(){if(!e){e=!0;for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];t.apply(this,s)}}}function a(){}function r(t){return t.setHeader&&"function"===typeof t.abort}function o(t,e,i){if("function"===typeof e)return o(t,null,e);e||(e={}),i=n(i||a);var l=e.readable||!1!==e.readable&&t.readable,c=e.writable||!1!==e.writable&&t.writable,h=function(){t.writable||u()},d=t._writableState&&t._writableState.finished,u=function(){c=!1,d=!0,l||i.call(t)},p=t._readableState&&t._readableState.endEmitted,f=function(){l=!1,p=!0,c||i.call(t)},m=function(e){i.call(t,e)},g=function(){var e;return l&&!p?(t._readableState&&t._readableState.ended||(e=new s),i.call(t,e)):c&&!d?(t._writableState&&t._writableState.ended||(e=new s),i.call(t,e)):void 0},v=function(){t.req.on("finish",u)};return r(t)?(t.on("complete",u),t.on("abort",g),t.req?v():t.on("request",v)):c&&!t._writableState&&(t.on("end",h),t.on("close",h)),t.on("end",f),t.on("finish",u),!1!==e.error&&t.on("error",m),t.on("close",g),function(){t.removeListener("complete",u),t.removeListener("abort",g),t.removeListener("request",v),t.req&&t.req.removeListener("finish",u),t.removeListener("end",h),t.removeListener("close",h),t.removeListener("finish",u),t.removeListener("end",f),t.removeListener("error",m),t.removeListener("close",g)}}t.exports=o},eeac:function(t,e,i){},eef7:function(t,e,i){"use strict";var s=i("0716"),n=i.n(s);n.a},ef7f:function(t,e,i){"use strict";var s=i("7844"),n=i.n(s);n.a},efef:function(t,e,i){},effe:function(t,e,i){"use strict";var s=i("a6ee"),n=i.n(s);n.a},f03f:function(t,e,i){"use strict";var s=i("0a90"),n=i.n(s);n.a},f08e:function(t,e,i){"use strict";var s;function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Object.defineProperty(e,"__esModule",{value:!0});var a=e.SET_A=0,r=e.SET_B=1,o=e.SET_C=2,l=(e.SHIFT=98,e.START_A=103),c=e.START_B=104,h=e.START_C=105;e.MODULO=103,e.STOP=106,e.FNC1=207,e.SET_BY_CODE=(s={},n(s,l,a),n(s,c,r),n(s,h,o),s),e.SWAP={101:a,100:r,99:o},e.A_START_CHAR=String.fromCharCode(208),e.B_START_CHAR=String.fromCharCode(209),e.C_START_CHAR=String.fromCharCode(210),e.A_CHARS="[\0-_È-Ï]",e.B_CHARS="[ -È-Ï]",e.C_CHARS="(Ï*[0-9]{2}Ï*)",e.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011]},f0ca:function(t,e,i){},f160:function(t,e,i){"use strict";var s=i("750b");i("88d7");e["a"]=Object(s["b"])({props:{total:{type:Number,default:10},pageSize:{type:Number,default:12}},setup(t,e){return()=>Object(s["c"])("div",{class:"pagination-container"},[Object(s["c"])("div",{class:"float-right"},[Object(s["c"])("a-pagination",{attrs:{pageSize:t.pageSize,showQuickJumper:!0,total:t.total},on:{change:t=>e.emit("change",t)}})]),Object(s["c"])("div",{class:"clearfix"})])}})},f168:function(t,e,i){"use strict";var s=i("5530"),n=i("5880");e["a"]={computed:Object(s["a"])({},Object(n["mapState"])("editor",["clipboardUUID"])),methods:{saveToClipboard({designs:t,minX:e,minY:i}){localStorage.setItem("clipboard",JSON.stringify({uuid:this.clipboardUUID,designs:t,minX:e,minY:i}))},getFromClipboard(){const t=localStorage.getItem("clipboard");if(!t)return{designs:null,crossTab:!1};const e=JSON.parse(t);return{designs:e.designs,minX:e.minX,minY:e.minY,crossTab:e.uuid!==this.clipboardUUID}},clearClipboard(){localStorage.removeItem("clipboard")},clearCurrentClipboard(){const t=localStorage.getItem("clipboard");if(t){const e=JSON.parse(t);e.uuid===this.clipboardUUID&&localStorage.removeItem("clipboard")}}}}},f170:function(t,e,i){i("a87d");var s=i("697e"),n=s.registerPainter,a=i("e9f9");n("vml",a)},f1b6:function(t,e,i){},f1b8:function(t,e,i){"use strict";var s=i("8a65"),n=i.n(s);n.a},f1c3:function(t,e){let i=0;const s=t=>{const[e,i,s]=t.split(":");return 60*parseFloat(e)*60+60*parseFloat(i)+parseFloat(s)};t.exports=(t,e)=>{if("string"===typeof t)if(t.startsWith("  Duration")){const e=t.split(", ")[0].split(": ")[1],n=s(e);(0===i||i>n)&&(i=n)}else if(t.startsWith("frame")||t.startsWith("size")){const n=t.split("time=")[1].split(" ")[0],a=s(n);e({ratio:a/i})}else t.startsWith("video:")&&(e({ratio:1}),i=0)}},f212:function(t,e,i){"use strict";var s=i("058d"),n=i.n(s);n.a},f26a:function(t,e,i){},f293:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"horizontal-rule flex flex-center item-center",style:{width:t.width+"px"}},[i("div",{staticClass:"horizontal-rule__panel",style:{width:t.width+"px",transform:"scale("+t.scale+",1)"}},[i("div",{staticClass:"move flex flex-start",style:{width:t.totalY+"px",top:"0px",height:"1px"},attrs:{id:"lineGuidesX"}},t._l(t.lineY,(function(e,s){return i("div",{key:s,staticClass:"vertical-line",style:{left:e.x+"px",top:"0px",height:t.windowHeight-42+"px",width:"1px",transform:"scale("+1/t.scale+",1)"},on:{mousedown:function(e){return t.mouseDownX(e,s)}}},[i("div",{staticClass:"show-tip",style:{top:(t.windowHeight-42)/2+"px"}},[t._v(" "+t._s(t.getTipX(e))+" ")])])})),0)])]),i("div",{staticClass:"vertical-rule flex flex-center item-center",style:{height:t.height+"px"}},[i("div",{staticClass:"vertical-rule__panel",style:{height:t.height+"px",transform:"scale(1,"+t.scale+")"}},[i("div",{staticClass:"move flex flex-start",style:{height:t.totalY+"px",left:"0px",width:"1px"},attrs:{id:"lineGuidesY"}},t._l(t.lineX,(function(e,s){return i("div",{key:s,staticClass:"horizontal-line",style:{top:e.y+"px",left:"0px",width:t.windowWidth-56+"px",height:"1px",transform:"scale(1,"+1/t.scale+")"},on:{mousedown:function(e){return t.mouseDownY(e,s)}}},[i("div",{staticClass:"show-tip",style:{left:t.windowWidth/2+"px"}},[t._v(" "+t._s(t.getTipY(e))+" ")])])})),0)])])])},n=[],a=i("5530"),r=i("365c"),o={props:["width","height","scale","x","y","lines","drawer"],data(){return{nx:this.x,ny:this.y,top:10,left:10,windowHeight:window.innerHeight,windowWidth:window.innerWidth}},computed:{totalX(){return this.$root.knifeData?[270,90].includes(this.$root.projectData.rotate)?this.$root.knifeData.totalY*r["DPI"]:this.$root.knifeData.totalX*r["DPI"]:100},totalY(){if(this.$root.knifeData)return[270,90].includes(this.$root.projectData.rotate)?this.$root.knifeData.totalX*r["DPI"]:this.$root.knifeData.totalY*r["DPI"]},line(){return this.parseLinesToPx(this.lines)},lineX(){return this.line.filter(t=>"x"===t.type)},lineY(){return this.line.filter(t=>"y"===t.type)}},methods:{parseLinesToPx(t){return t.map(t=>this.parseLineToPx(t))},parseLineToPx(t){return Object.keys(t).reduce((e,i)=>Object(a["a"])(Object(a["a"])({},e),{},{[i]:"number"===typeof t[i]?t[i]*r["DPI"]:t[i]}),{})},currentDistanceX(t){return[90,270].includes(this.$root.projectData.rotate)?parseInt(t.x-(this.totalY-this.totalX)/2):parseInt(t.x)},currentDistanceY(t){return[90,270].includes(this.$root.projectData.rotate)?parseInt(t.y-(this.totalX-this.totalY)/2):parseInt(t.y)},isXOverflow(t){const e=this.currentDistanceX(t);return[90,270].includes(this.$root.projectData.rotate),{distance:e,overflow:e<=0||e>=this.totalX}},getTipX(t){const e=this.isXOverflow(t);return e.overflow?"释放删除":"X: "+e.distance},isYOverflow(t){const e=this.currentDistanceY(t);return[90,270].includes(this.$root.projectData.rotate),{distance:e,overflow:e<=0||e>=this.totalY}},getTipY(t){const e=this.isYOverflow(t);return e.overflow?"释放删除":"Y: "+e.distance},mouseDownX(t,e){if(0===t.button){let i=t.clientX,s=this.lineY[e].x;const n=this.lineY[e],a=this.line.findIndex(t=>t.type===n.type&&t.x===n.x&&t.y===n.y);document.onmousemove=t=>{let e=(t.clientX-i)/this.scale;return this.$root.projectData.lineGuides[a].x=(s+e)/r["DPI"],!1},document.onmouseup=t=>{const n=this.isXOverflow(this.lineY[e]);let o=(t.clientX-i)/this.scale;this.$root.projectData.lineGuides[a].x=(s+o)/r["DPI"],n.overflow&&this.$root.projectData.lineGuides.splice(a,1),this.saveLine(),document.onmousemove=null,document.onmouseup=null}}},mouseDownY(t,e){if(0===t.button){let i=t.clientY,s=this.lineX[e].y;const n=this.lineX[e],a=this.line.findIndex(t=>t.type===n.type&&t.x===n.x&&t.y===n.y);document.onmousemove=t=>{let e=(t.clientY-i)/this.scale;return this.$root.projectData.lineGuides[a].y=(s+e)/r["DPI"],!1},document.onmouseup=()=>{const t=this.isYOverflow(this.lineX[e]);t.overflow&&this.$root.projectData.lineGuides.splice(a,1),this.saveLine(),document.onmousemove=null,document.onmouseup=null}}},saveLine(){this.$store.commit("increaseProjectVersion")}}},l=o,c=(i("05bf"),i("2877")),h=Object(c["a"])(l,s,n,!1,null,null,null);e["default"]=h.exports},f295:function(t,e,i){"use strict";var s=i("5d2b"),n=i.n(s);n.a},f298:function(t,e,i){t.exports=i.p+"editor-assets/img/add-white.696ff33b.svg"},f2a2:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rename-panel"},[i("a-row",{attrs:{type:"flex"}},[i("a-col",{staticClass:"label pr-20",attrs:{span:6}},[t._v("类型：")]),i("a-col",{attrs:{span:18}},[i("div",{staticClass:"input-group"},[i("a-input",{staticClass:"short-input",attrs:{placeholder:"品牌名"},on:{blur:function(e){return t.emitChanges()}},model:{value:t.form.trademark,callback:function(e){t.$set(t.form,"trademark",e)},expression:"form.trademark"}}),t._v(" - "),i("a-input",{staticClass:"short-input",attrs:{placeholder:"产品名"},on:{blur:function(e){return t.emitChanges()}},model:{value:t.form.productName,callback:function(e){t.$set(t.form,"productName",e)},expression:"form.productName"}})],1)])],1),i("a-row",{staticClass:"mt-12",attrs:{type:"flex"}},[i("a-col",{staticClass:"label pr-20",attrs:{span:6}},[i("span",{staticClass:"fo-theme required-left"},[t._v("*")]),t._v("名称：")]),i("a-col",{attrs:{span:18}},[i("a-input",{staticClass:"long-input",attrs:{placeholder:"项目名"},on:{blur:function(e){return t.emitChanges()}},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1)],1),t.showSubmit?i("a-row",{staticClass:"mt-34 flex flex-center items-center"},[i("a-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("下一步")])],1):t._e()],1)},n=[],a={props:{projectName:{type:String,default:""},trademark:{type:String,default:""},productName:{type:String,default:""},showSubmit:{type:Boolean,default:!1}},data(){return{formItemLayout:{labelCol:{span:4},wrapperCol:{span:14}},form:{projectName:"",productName:"",trademark:""}}},mounted(){this.form.projectName=this.projectName,this.form.productName=this.productName,this.form.trademark=this.trademark},methods:{emitChanges(){this.showSubmit||this.handleSubmit()},submitNames(){const t=this.$root.projectData,e={projectName:t.project_name,productName:t.extend_attrs?t.extend_attrs.productName:"",trademark:t.extend_attrs?t.extend_attrs.trademark:"",nameModified:!!t.extend_attrs&&t.extend_attrs.nameModified},i=this.form;this.$store.dispatch("editor/updateProjectNames",{originData:e,newData:i,projectId:t.id}).then(()=>{t.project_name=i.projectName,t.extend_attrs={},t.extend_attrs.productName=i.productName,t.extend_attrs.trademark=i.trademark,t.extend_attrs.nameModified=!0,this.$emit("nameChanged")})},handleSubmit(){this.$route.query.mid?this.$store.dispatch("saveForceCreate",this).then(()=>{this.submitNames()}):this.submitNames()}}},r=a,o=(i("51b7"),i("2877")),l=Object(o["a"])(r,s,n,!1,null,"ec03b9be",null);e["default"]=l.exports},f2eb:function(t,e,i){},f2f7:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"editor-size-container"},[i("div",{staticClass:"back-content text-pointer",on:{click:t.goBack}},[i("a-icon",{attrs:{type:"left",color:"rgba(0,0,0,.15)"}}),i("span",{staticClass:"fo-gray"},[t._v("返回")])],1),i("div",{staticClass:"title mtb-16"},[t._v(" 选择尺寸 "),i("a-tooltip",[i("a",{staticStyle:{display:"'inline-block'"},attrs:{target:"_blank",href:t.instruction_page_url}},[i("a-icon",{staticClass:"icon",attrs:{type:"question-circle"}})],1),i("template",{slot:"title"},[t._v("尺寸说明")])],2)],1),t._l(t.size_options,(function(e,s){return i("a-tooltip",{key:s,staticClass:"item flex flex-between",class:{cur:e.sizeName==t.cur_size_option},attrs:{placement:"left"},on:{click:function(i){return t.onChooseSize(e)}}},[i("div",[t._v(" "+t._s(e.shortDesc)+" ")]),i("div",[t._v(" "+t._s(e.unit)+" ")]),e.fullDesc?i("template",{slot:"title"},[t._v(t._s(e.fullDesc))]):t._e()],2)})),i("div",{staticClass:"line mb-24 mt-16"}),i("div",{staticClass:"title"},[t._v(" 材质 "),i("a-tooltip",[i("a",{staticStyle:{display:"'inline-block'"},attrs:{target:"_blank",href:t.instruction_page_url}},[i("a-icon",{staticClass:"icon",attrs:{type:"question-circle"}})],1),i("template",{slot:"title"},[t._v("材质说明")])],2)],1),i("a-select",{staticClass:"mtb-16",staticStyle:{width:"100%"},attrs:{disabled:"",value:t.cur_material_id},on:{change:t.onChooseMaterial}},t._l(t.materialList,(function(e,s){return i("a-select-option",{key:s,attrs:{value:e.id}},[i("img",{staticClass:"material-thumbnail",attrs:{src:e.image,alt:""}}),t._v(" "+t._s(e.name)+" ")])})),1),i("div",{staticClass:"line mb-24 mt-16"}),i("div",{class:["bottom-wrapper-container","mt-12","text-center","active"]},[i("div",{staticClass:"flex flex-center item-center",on:{click:t.onSubmit}},[i("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"mr-4",attrs:{type:"loading",color:"#fff"}}),i("span",[t._v("确认调整")])],1)])],2)},n=[],a=i("5530"),r=i("365c"),o=i("ed08"),l=i("5880"),c={data(){return{loading:!1,instruction_page_url:"https://help.baoxiaohe.com/support/archives/683/",cur_size_option:"",size_options:[],cur_material_id:0,materialList:[{id:8,name:"白卡纸",image:"//cdn.baoxiaohe.com/94e8078a-9931-42cd-97ed-57883bd88085.jpg",thickness:.5,outless:.2,inless:.3,can_set:1,def_line_color:"#999999",group_name:"卡纸",min_thickness:.2,max_thickness:.5},{id:36,name:"牛皮纸",image:"//yun.baoxiaohe.com/admin-materials/e59ed5fb-6e73-4708-90e2-b6e49926ed8f.jpg",thickness:.5,outless:.2,inless:.3,can_set:1,def_line_color:"#FFFFFF",group_name:"default",min_thickness:.2,max_thickness:.6}]}},computed:{},mounted(){this.cur_size_option=this.$root.projectData.size_option,this.size_options=this.$root.projectData.cate.size_options,this.cur_material_id=this.$root.projectData.science_id||8},methods:Object(a["a"])(Object(a["a"])({},Object(l["mapActions"])(["increaseKnifeVersion"])),{},{goBack(){this.$emit("close")},onChooseSize(t){this.cur_size_option=t.sizeName},onChooseMaterial(t){this.cur_material_id=t},async onSubmit(){this.loading=!0;const{cur_size_option:t,cur_material_id:e}=this,i=this.$root.projectData.id||this.$root.projectData.project_id;try{await Object(r["updateAll"])({id:i,type:"knife",size_option:t,science_id:e})}catch(n){return void(this.loading=!1)}this.$root.projectData.size_option=t,this.$root.projectData.science_id=e;const s=this.materialList.find(t=>t.id===e);this.$root.projectData.science_image=s.image,this.$root.projectData.science_name=s.name;try{const t=this.$root.projectData.bleedline;let e=await Object(r["updateKnife"])({id:i,bleed:t,export_type:"project"});this.$root.knifeData=Object(o["f"])(e.data),this.increaseKnifeVersion()}catch(n){return void(this.loading=!1)}this.loading=!1,await Object(o["D"])(500),this.goBack()}})},h=c,d=(i("c527"),i("2877")),u=Object(d["a"])(h,s,n,!1,null,"9e8ac98c",null);e["default"]=u.exports},f30a:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.load?i("div",{directives:[{name:"show",rawName:"v-show",value:t.renderOldVisible,expression:"renderOldVisible"}],staticClass:"rendererd"},[i("render-header",{ref:"header",attrs:{width:t.width,"open-history":t.openHistory},on:{close:function(e){return t.$store.dispatch("render/saveRenderOldVisible",!1)},"change-page":t.changePage,"update-success":t.updateSuccess,save:function(e){return t.projectRenderConfigFetch("post")},rollback:t.rollback,recovery:t.recovery,"change-current":t.changeCurrent}}),i("div",{staticClass:"flex flex-start"},[i("smenu",{directives:[{name:"show",rawName:"v-show",value:0===t.page&&"image"===t.renderType,expression:"page === 0 && renderType === 'image'"}],ref:"menu",attrs:{height:t.height-56},model:{value:t.menuCurrent,callback:function(e){t.menuCurrent=e},expression:"menuCurrent"}}),i("left",{ref:"left",attrs:{height:t.height-56,menu:t.menuCurrent,visible:t.visible},on:{"upload-img":t.uploadImg,"position-change":t.positionChange,list:t.changeList,"render-list":t.changeRenderList,preview:t.previewChange,shadowChange:t.shadowChange,"render-count":t.renderCount,"attch-history":t.attachToHistory,"tp-change":t.tpChange,"set-tp-mode":t.setTpMode}}),i("mode",{directives:[{name:"show",rawName:"v-show",value:0===t.page&&"image"===t.renderType,expression:"page === 0 && renderType === 'image'"}],ref:"mode",attrs:{height:t.height-56,width:t.width-256-56,ratio:t.ratio,bg:t.backgroundImg},on:{"camera-change":t.cameraChange,"init-success":t.projectRenderConfigFetch,"attch-history":t.attachToHistory,rollback:t.rollback,recovery:t.recovery,"ratio-change":t.ratioChange,"change-size":t.changeSize,"change-result-animate":t.changeResultAnimate,"change-task":t.changeTask}}),i("video-mode",{directives:[{name:"show",rawName:"v-show",value:"video"===t.renderType&&0===t.page&&-1===t.videoFlag,expression:"renderType === 'video' && page === 0 && videoFlag === -1"}],attrs:{height:t.height-56,width:t.width-256}}),i("video-preview",{directives:[{name:"show",rawName:"v-show",value:"video"===t.renderType&&0===t.page&&t.videoFlag>-1,expression:"renderType === 'video' && page === 0 && videoFlag > -1"}],attrs:{height:t.height-56,width:t.width-256}}),i("preview",{directives:[{name:"show",rawName:"v-show",value:1===t.page,expression:"page === 1"}],ref:"preview",attrs:{height:t.height-56,width:t.width-256-(0===t.page&&"image"===t.renderType?56:0)},on:{"page-change":t.previewPageChange,currentChange:t.currentChange,getList:t.doGetList,"update-success":t.updateSuccess,"apllicate-scene":t.apllicateScene,"attch-history":t.attachToHistory}})],1)],1):t._e()},n=[],a=(i("2ca0"),i("5530")),r=i("5880"),o=i("3091"),l=i("2ea4"),c=i("bf03"),h=i("3529"),d=i("062e"),u=i("9048"),p=i("e5fb2"),f=i("365c"),m={components:{renderHeader:o["default"],left:l["default"],mode:c["default"],preview:h["default"],smenu:d["default"],videoMode:u["default"],videoPreview:p["default"]},data(){return{openHistory:!0,width:window.innerWidth,height:window.innerHeight,ratio:"16:9",visible:this.renderOldVisible,backgroundImg:"",load:!1,intv:!1,originConfig:"",maskLoading:null,menuCurrent:0}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapGetters"])("render",["getLastHistory","getLastRecovery","renderType","renderOldVisible","videoFlag","page"])),Object(r["mapState"])("editor-v2",["project_data","knife_data","isCup","scale","is_outside","last_saved_local_history_ts","element_craft_list"])),{},{crafts(){return this.element_craft_list},isInside(){return!this.is_outside}}),mounted(){this.resize(),this.$bus.$on("sunLightChange",t=>{this.lightPositionChange(t)}),this.$bus.$on("sunHeightChange",t=>{this.lightHeightChange(t.y),this.lightPositionChange(t)}),this.$bus.$on("sunLightPowerChange",t=>{this.lightPowerChange(t)}),this.$bus.$on("sunLightShadowChange",t=>{this.shadowChange(t)}),this.$bus.$on("setLightIntoMode",()=>{this.addLightTmpIntoMode()}),this.$bus.$on("chooseLightMode",t=>{this.chooseLightMode(t,!0)}),this.$bus.$on("attachToHistory",()=>{this.attachToHistory()})},beforeDestroy(){clearInterval(this.intv),this.$bus.$off("sunLightChange"),this.$bus.$off("sunHeightChange"),this.$bus.$off("sunLightPowerChange"),this.$bus.$off("sunLightShadowChange"),this.$bus.$off("setLightIntoMode"),this.$bus.$off("chooseLightMode"),this.$bus.$off("attachToHistory"),this.$store.dispatch("render/clear"),window.removeEventListener("resize",this._handeResize)},watch:{renderOldVisible(t){this.visible=t,t&&!this.load&&(this.load=!0),t?this.autoSave():clearInterval(this.intv)}},methods:Object(a["a"])(Object(a["a"])({},Object(r["mapMutations"])("render",["pushHistory","popHistory","popRecovery","pushRecovery","clearRecovery","clearHistory"])),{},{async addLightTmpIntoMode(){Object(f["addRenderTemp"])({params:await this.$refs.mode.getAllParams(!1),template_type:"shine",publish_type:"my",title:"未命名的模版"}).then(t=>{200==t.code&&(this.$message.success("设置成功"),this.$bus.$emit("finishAddTmp"))})},changeTask(t){this.$refs.left.tpLoading=!1,this.$refs.left.tmpTaskId=t,setTimeout(this.maskLoading,1)},setTpMode(){this.$refs.left.tpList2.length>=10?this.$message.warning("我的快搭模板最多为10个"):this.$confirm({title:"确定将当前场景设为你的快搭模板？",okText:"确定",okType:"danger",cancelText:"取消",centered:!0,zIndex:4005,onOk:()=>{this.$refs.left.tpLoading=!0,this.maskLoading=this.$message.loading("正在生成快搭模板...",0),this.$refs.mode.screenshot(!0,!1)}})},changeResultAnimate(){this.$refs.header.doResultAnimate()},changePage(t){this.$store.dispatch("render/savePage",t),this.$refs.preview.doRead()},tpChange(t){this.attachToHistory(),this.apllicateScene(JSON.stringify(t.d3_params)),this.$message.success("快搭模板应用成功")},rollback(){if(!this.openHistory)return;this.clearRecovery(),this.pushRecovery(this.originConfig);const t=this.getLastHistory;this.apllicateScene(t),this.originConfig=t,this.popHistory()},recovery(){if(!this.openHistory)return;this.clearHistory(),this.popHistory(this.originConfig);const t=this.getLastRecovery;this.apllicateScene(t),this.originConfig=t,this.popRecovery()},async attachToHistory(t){this.openHistory&&(this.pushHistory(this.originConfig),this.originConfig=JSON.stringify(await this.$refs.mode.getAllParams(!1)))},autoSave(){this.intv=setInterval(()=>{this.projectRenderConfigFetch("post",!0)},18e4)},async projectRenderConfigFetch(t="get",e=!1){const i={project_id:this.project_data.id};this.$refs.header.updateLoading=!0,"post"===t&&(this.$refs.header.doSave(e,!0),i.config=await this.$refs.mode.getAllParams(!0));const s=await Object(f["projectRenderConfig"])(i);"post"===t&&this.$refs.header.doSave(e,!1),200==s.code&&"get"===t&&s.data&&s.data.config&&this.apllicateScene(JSON.stringify(s.data.config),this.openHistory),this.$refs.header.updateLoading=!1},chooseLightMode(t,e){e&&this.attachToHistory(),this.lightColorChange(t.light.color),this.$refs.mode.setLightHeightValue(t.light.position.y),this.lightHeightChange(t.light.position.y),this.$bus.$emit("initSunLightPowerChange",t.light.intensity),this.lightPowerChange(t.light.intensity),this.$refs.mode.setLightValue({x:t.light.position.x,z:t.light.position.z}),this.$bus.$emit("initLightPosition",t.light.position),this.$bus.$emit("initLightVisible",t.light.visible),this.$refs.mode.lightPositionChange({x:t.light.position.x,z:t.light.position.z}),t.envLight&&(this.$refs.mode.setEnvLight(t.envLight),this.$bus.$emit("initEnvLight",t.envLight)),t.lights&&this.$refs.mode.initSceneLights(t.lights),this.$refs.mode.doRender()},async apllicateScene(t,e=!1){if(t){const i=JSON.parse(t);i.scene.backgroundUrl&&(this.$refs.mode.uploadImageUrl=i.scene.backgroundUrl);let s=i.scene.background;if(this.$refs.left.bgFlag=i.scene.transparent?0:i.scene.background.startsWith("rgba")?1:2,i.scene.background.startsWith("rgba"))this.$refs.left.color=i.scene.background;else if(i.scene.backgroundUrl){const t=await this.getBase64(i.scene.backgroundUrl);this.$refs.left.background=t,s=t}this.uploadImg({transparent:i.scene.transparent,bg:s}),this.$bus.$emit("sunLightShadowInit",i.scene.shadow.radio),this.shadowChange(i.scene.shadow.radio),this.$refs.mode.setRatio(i.scene.ratio,!1),this.cameraChange(i.scene.camera),this.modeCameraChange(i.scene.camera),this.previewPageChange(0),this.$refs.mode.setGroups(i.scene.groups),this.chooseLightMode({light:i.scene.light,lights:i.scene.lights,envLight:i.scene.envLight}),e&&(this.originConfig=t)}},getBase64(t){function e(t,e,i){const s=document.createElement("canvas");s.width=e||t.width,s.height=i||t.height;const n=s.getContext("2d");n.drawImage(t,0,0,s.width,s.height);const a=s.toDataURL();return a}const i=new Image;return i.crossOrigin="",i.src=t,new Promise(t=>{i.onload=function(){t(e(i))}})},renderCount(t){this.$refs.header.renderCount=t},lightPositionChange(t){this.$refs.mode.light.position.x=t.x,this.$refs.mode.light.position.z=t.z,this.$refs.mode.light.lookAt(0,0,0),this.$refs.mode.doRender()},shadowChange(t){this.$refs.mode.changeShadow(t)},lightColorChange(t){this.$refs.mode.lightColor=t,this.$refs.mode.changeLightColor()},lightHeightChange(t){this.$refs.mode.light.position.y=t,this.$refs.mode.light.lookAt(0,0,0),this.$refs.mode.doRender()},lightPowerChange(t){this.$refs.mode.light.intensity=t,this.$refs.mode.doRender()},previewPageChange(t){this.$store.dispatch("render/savePage",t)},ratioChange(t){this.ratio=t.w+":"+t.h},changeSize(t){this.$refs.mode.size=t},resize(){window.addEventListener("resize",this._handeResize)},_handeResize(){window.innerWidth>window.innerHeight-56+256&&(this.height=window.innerHeight,this.width=window.innerWidth)},async uploadImg(t){if(t.bg.startsWith("http")){const e=await this.getBase64(t.bg);t.bg=e}this.backgroundImg=JSON.stringify(t)},cameraChange(t){this.$refs.left.setPosition(Math.round(100*t.position.x)/100,Math.round(100*t.position.y)/100,Math.round(100*t.position.z)/100)},modeCameraChange(t){this.$refs.mode.camera.position.set(t.position.x,t.position.y,t.position.z),this.$refs.mode.camera.lookAt(0,0,0)},positionChange(t){this.$refs.mode.setCameraPosition(t.x,t.y,t.z)},changeList(t){this.$refs.preview.setList(t.list),this.$refs.preview.setCount(t.count),this.$refs.header.list=t.list},changeRenderList(t){this.$refs.header.renderList=t},previewChange(t){var e,i;this.$refs.preview.clearLoad?this.$refs.left.listFlag=this.$refs.preview.current:(this.$refs.header.tempName=(null===(e=this.$refs.preview.list[t])||void 0===e?void 0:e.filename)||"",this.$refs.header.tempId=(null===(i=this.$refs.preview.list[t])||void 0===i?void 0:i.id)||"",this.$refs.preview.setCurrent(t))},changeCurrent(t){this.currentChange(t),this.$refs.preview.setCurrent(t)},currentChange(t){var e,i;this.$refs.left.listFlag=t,this.$refs.header.tempName=(null===(e=this.$refs.preview.list[t])||void 0===e?void 0:e.filename)||"",this.$refs.header.tempId=(null===(i=this.$refs.preview.list[t])||void 0===i?void 0:i.id)||""},doGetList(t){this.$refs.left.getList(1)},updateSuccess(t){t.name&&(this.$refs.left.list[this.$refs.left.listFlag].filename=t.name,this.$refs.preview.list[this.$refs.preview.current]&&(this.$refs.preview.list[this.$refs.preview.current].filename=t.name)),t.image&&(this.$refs.left.list[this.$refs.left.listFlag].image=t.image,this.$refs.preview.list[this.$refs.preview.current]&&(this.$refs.preview.list[this.$refs.preview.current].image=t.image))}})},g=m,v=(i("498e"),i("2877")),b=Object(v["a"])(g,s,n,!1,null,null,null);e["default"]=b.exports},f326:function(t,e,i){},f356:function(t,e,i){"use strict";i.r(e);i("b680");var s=i("750b"),n=i("2ebb"),a=i("fc75"),r=i("7018"),o=i("6d9e");i("4e63");const l=i("e0c1"),c=["rgba(255,24,24,1)","rgba(255,97,13,1)","rgba(255,180,32,1)","rgba(109,212,0,1)","rgba(25,204,129,1)","rgba(253,25,94,1)","rgba(38,107,255,1)","rgba(50,197,255,1)","rgba(0,0,0,1)","rgba(255,255,255,1)"];e["default"]=Object(s["b"])({props:{bg:{type:[Object,Object],default:()=>({rgba:"rgba(0,0,0,1)",cmyk:""})},isWorld:{type:Boolean,default:!1}},setup(t,e){const i=e.vuex.mapState(["isInside"]),h=e.vuex.mapActions(["increaseMaterialVersion","saveForceCreate"]),d=e.vuex.mapMutations(["increaseCanvasVersion","increaseProjectVersion"]),u=e.vuex.mapActions("property",["fetchSurfaceSciences"]),p=Object(s["j"])([]);u.fetchSurfaceSciences().then(t=>{p.value=t});const f=async()=>{"preview"===e.route.query.type&&await h.saveForceCreate({$router:e.router,$root:e.root}),e.refs.sizeTipRef.tmpHide(),e.emit("open")};return()=>{var u,m;return Object(s["c"])("div",{class:"property-settings"},[Object(s["c"])(o["default"],{ref:"sizeTipRef"}),Object(s["c"])("div",{directives:[{name:"show",value:t.isWorld}]},[Object(s["c"])("div",{class:"flex items-center flex-between"},[Object(s["c"])("div",{class:"title"},["尺寸和材质 ",Object(s["c"])("a-tooltip",[Object(s["c"])("a-icon",{class:"icon",attrs:{type:"info-circle"},style:{color:"rgba(0,0,0, 0.45)"}}),Object(s["c"])("template",{slot:"title"},[Object(s["c"])("div",["盒型代码：",e.root.projectData.cate.cate_no]),Object(s["c"])("div",["展开尺寸：",e.root.knifeData.totalX.toFixed(2)," X"," ",e.root.knifeData.totalY.toFixed(2),"mm²"])])])]),Object(s["c"])("a",{class:"fo-active-theme",on:{click:f}},["修改"])]),Object(s["c"])("div",{class:"mt-12"},[Object(s["c"])(a["default"])]),Object(s["c"])("div",{class:"line my-20"})]),Object(s["c"])("div",{class:"mb-16",directives:[{name:"show",value:!t.isWorld}]},[Object(s["c"])("a-button",{attrs:{block:!0},on:{click:()=>{e.store.commit("editor/toggleCurrentFace",null)}}},["返回全部面"])]),Object(s["c"])("div",{class:"title"},["背景颜色"]),Object(s["c"])("div",{class:"mt-16"},[Object(s["c"])("div",{class:"flex"},[Object(s["c"])(r["a"],{attrs:{size:"mini",cmyk:null===(u=t.bg)||void 0===u?void 0:u.cmyk,value:(null===(m=t.bg)||void 0===m?void 0:m.rgba)||""},on:{confirm:t=>{e.emit("confirm",t)}}}),Object(s["c"])("img",{class:"opacity ml-12 text-pointer",attrs:{src:l,alt:""},on:{click:()=>{e.emit("confirm",{cmyk:"",rgba:""})}}})]),Object(s["c"])("div",{class:"my-16 line"}),Object(s["c"])("div",{class:"flex flex-start flex-wrap"},[c.map((t,i)=>Object(s["c"])("div",{class:"color-content text-pointer mb-8",on:{click:()=>{e.emit("confirm",{rgba:t,cmyk:""})}},style:{background:t},key:i}))])]),Object(s["c"])("div",{class:"line mb-24 mt-16"}),Object(s["c"])("div",{class:"surface",directives:[{name:"show",value:t.isWorld}]},[Object(s["c"])("div",{class:"title"},["表面处理"]),Object(s["c"])("div",{class:"mt-16"},[Object(s["c"])(n["default"],{attrs:{title:"工艺"}},[Object(s["c"])("a-select",{attrs:{value:e.root.projectData.membrane_id||35},style:"width: 120px",on:{change:async t=>{const s=p.value.find(e=>e.id===t);e.root.projectData.membrane_name=s.science_name,e.root.projectData.membrane_id=s.id,h.increaseMaterialVersion(i.isInside.value),d.increaseCanvasVersion(i.isInside.value),d.increaseProjectVersion()}}},[p.value.map((t,e)=>Object(s["c"])("a-select-option",{key:e,attrs:{value:t.id}},[t.name]))])])])])])}}})},f398:function(t,e,i){},f3a4:function(t,e,i){t.exports=i.p+"editor-assets/img/layer.453a6c4a.svg"},f44d:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABj0lEQVQ4T7WTv0tVcRjGP885Q4hkBIIODg4RzXnTQWkSb2gODfUP5L1uQQRBgdDgpOLgIh5/0CgI0R3TtSm8OQhFTZU0FbWF6b3niXO8V++9HkIHv+P7fd/P++t5RcbzfUKu9hVBTzDdSCWqleda3fna6q5Wgydv3cbxAtJlzBbyL6x+IIc1z+GPGb38sl+POwZ4YqCHoDqLnAdtYj42wUUHMIJpRzzW0nYp+U8BfpgbJKSE2SXQW+xKVmupTe4lZgxRUlQuHAGKuffAZ2jIKgdYPeAQBXtNUPsS0gQB9+qAJON0wqpl7gQ/AH0H9pFuEPsVYq+hsrvAch2QBL6ofSa2SfCUovJKWmGhP4/idexFpL81vzHktQyAuiAeVlS+3jgHF3KbBPzEfLpoQLqZc7dw/iHa4+Cl+gx2IO3tRDz/XaPaUFxE4UgN0DcEen0mIcE1YBRYVbT99LSUcR5lSBmuAHeAEAePtPzuzbGUm9aVdUwwgHUTmOX3nzltfDg4dUxNkKxzJn6mqPyt9Ub+AYtLzrVqjN2FAAAAAElFTkSuQmCC"},f45c:function(t,e,i){},f469:function(t,e,i){t.exports=i.p+"editor-assets/img/table.3f338292.svg"},f46f:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACcUlEQVRYR82WMWgTYRTHfy9RujlJBxW0KFZcxUFREKfS6qC5o5NDKo0114IuOlrBpR0UbC5KitqhOjQXKUoqbiJOgtilg7SViquT4CC29ySpaXNJ2nzJJdRvC9/7/9/vXh7ve8IOH9nh/PzfAGpf74ZoN+ofQyPLrMm8zE4sb1c17XeOsqonkMh+YAHxFyWbXtpKU7MCajunUO4B52sIvwKvxHNvlt+plRwD6QcO1tB8QuS+ZFMvKu+qANRyZgDboDfmidKPv/YLjU4D5+prJC9e6kJ5XABALecG8KC+UYgIlR7Jpd6WHDYA9NJQJ7uin1H2hbA3kS7QETktzyd+FoI3AazhOOhTE4fQMcI1ybqZCoDkI5Ch0OZGBjotXvpKEMB2llAOG+nDB30Tzz1UUQFnETgS3tvAQVmRnNtVCfAQGDGQhw9RpiTnxiub0AYtzID2H1/j8jI9FQS4PHKAiP+9/dmB1bUumX28EgAo/FBreAz0VnshZFy81O2qQVQEuJjYS8fuD0B3myC+8PvPGXmd+VEToAgRcwYQnrQFQLkqOTcw7Gq/hpaTBawWQ8yI5xZey8DZciFRy3kD9LQI4pl47kAtr203IrWS70HOhoPYHLsNA/zriY8IJ5uDqH7/jf+C8kC1nTxKb0MQwpxk3b56GuOlVK3hDOhgPcP1e5kUL5UwiTUGWB9UyTsgo9sb66h46bsmyasmoYlIY8lBRIrLRNVRTUguPWniU4ppqAIlkcacXoR8IJHSJzl3rpHkTVVgA8IeOY7v5xH2gMTES71rNHkogGJPFCBUO5tNHhqgmS9uag60ItFWHk01YSuB/gLwzbshCHC0SgAAAABJRU5ErkJggg=="},f4ac:function(t,e,i){},f4b1:function(t,e,i){"use strict";i.r(e);var s=i("750b"),n=i("5a0c"),a=i.n(n),r=i("0d67");i("7a98");const o=[{subtitle:"产品",children:[{title:"模板中心",url:"/templates"},{title:"盒型 / 模型库",url:"/models",slot:()=>Object(s["c"])("span",{class:"title",on:{click:()=>{window.open("https://support.baoxiaohe.com/archives/103/")}}},["建模"])},{title:"商家开放平台",url:"/business"},{title:"包小盒头条",url:"/toutiao"}]},{subtitle:"服务",children:[{title:"帮助中心",url:"https://help.baoxiaohe.com/"},{title:"公益及教育机构优惠",url:"https://support.baoxiaohe.com/archives/84/"},{title:"反馈与建议",url:"https://www.wenjuan.com/s/7fuAF3/"},{title:"会员卡兑换",url:"https://www.baoxiaohe.com/vip/convert"}]},{subtitle:"关于",children:[{title:"关于我们",url:"https://support.baoxiaohe.com/about.html"},{title:"加入我们",url:"https://support.baoxiaohe.com/contact.html"},{title:"使用条款",url:"https://support.baoxiaohe.com/terms.html"},{title:"隐私协议",url:"https://support.baoxiaohe.com/Privacy.html"}]},{subtitle:"合作",children:[{title:"设计工作箱",url:"http://www.baoxiaohe.com/links"}]}],l=[{logo:"&#xe780;",url:"https://cdn.baoxiaohe.com/user-materials/949c3744-6b1e-4d9f-a6df-cdc46a97c43b.jpg"},{logo:"&#xe7a4;",url:"https://cdn.baoxiaohe.com/user-materials/2c8de22b-0914-46cc-98ff-a094337d406e.jpg"}],c=a()(Date.now()).format("YYYY");e["default"]=Object(s["b"])({props:{theme:{type:String,default:""}},setup(t,e){const{theme:n="light"}=t,a=e.vuex.mapGetters("profile",["mchConf"]);return()=>{var t;return Object(s["c"])("div",{class:"bottom-layout "+("dark"===n?"darkness-theme":"light-theme")},[Object(s["c"])("div",{class:"bottom-wrapper"},[Object(s["c"])("div",{class:"menus-list mt-60 flex item-start flex-between"},[o.map((t,e)=>Object(s["c"])("div",{class:"sub-title",key:e},[t.subtitle,Object(s["c"])("ul",{class:"title-list"},[t.children.map((t,e)=>{var i;return Object(s["c"])("li",{key:e,class:"mt-14"},[Object(s["c"])("a",{class:"fo-gray",attrs:{href:t.url,rel:t.nofollow,target:"_blank"}},[t.title]),Object(s["c"])("span",{style:"color:rgba(0,0,0,.2)"},[t.slot?" / ":""]),null===(i=t.slot)||void 0===i?void 0:i.call(t)])})])])),Object(s["c"])("div",{class:"sub-title"},["联系我们",Object(s["c"])("ul",{class:"logo-list flex mt-18"},[Object(s["c"])(r["a"],[Object(s["c"])("li",{class:"mr-16"},[Object(s["c"])("i",{class:"iconfont icon-kefu1"})])]),l.map((t,e)=>Object(s["c"])("a-popover",{key:e},[Object(s["c"])("template",{slot:"content"},[Object(s["c"])("img",{attrs:{src:t.url,alt:""},style:{width:"120px",height:"120px"}})]),Object(s["c"])("li",{class:"mr-16"},[Object(s["c"])("i",{class:"iconfont",domProps:{innerHTML:t.logo}})])]))]),Object(s["c"])("div",{class:"phone mt-20"},[(null===(t=a.mchConf.value)||void 0===t?void 0:t.tel_number)||"400 886 9050"]),Object(s["c"])("div",{class:"time mt-4"},["服务时间：9:00-18:00"])])]),Object(s["c"])("div",{class:"copy-right text-center"},["Copyright © ",c," 包小盒 All right reserved."," ",Object(s["c"])("a",{class:"fo-gray",attrs:{href:"https://beian.miit.gov.cn/",target:"_blank"}},["浙ICP备19025175号-4","  "]),Object(s["c"])("a",{class:"fo-gray",attrs:{href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=%20%20%20%20%20%20%20%2033010602011191",target:"_blank"}},[Object(s["c"])("img",{attrs:{src:i("7d6a"),alt:"aaa"}}),"浙公网安备 33010602011191号"])])])])}}})},f4b9:function(t,e,i){"use strict";var s=i("330c"),n=i.n(s);n.a},f50a:function(t,e,i){},f522:function(t,e,i){t.exports=i.p+"editor-assets/img/copy-d.e207bb62.svg"},f576:function(t,e,i){"use strict";(function(e){var s=i("3fb5"),n=i("93e6"),a=new Array(16);function r(){n.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function o(t,e){return t<<e|t>>>32-e}function l(t,e,i,s,n,a,r){return o(t+(e&i|~e&s)+n+a|0,r)+e|0}function c(t,e,i,s,n,a,r){return o(t+(e&s|i&~s)+n+a|0,r)+e|0}function h(t,e,i,s,n,a,r){return o(t+(e^i^s)+n+a|0,r)+e|0}function d(t,e,i,s,n,a,r){return o(t+(i^(e|~s))+n+a|0,r)+e|0}s(r,n),r.prototype._update=function(){for(var t=a,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var i=this._a,s=this._b,n=this._c,r=this._d;i=l(i,s,n,r,t[0],3614090360,7),r=l(r,i,s,n,t[1],3905402710,12),n=l(n,r,i,s,t[2],606105819,17),s=l(s,n,r,i,t[3],3250441966,22),i=l(i,s,n,r,t[4],4118548399,7),r=l(r,i,s,n,t[5],1200080426,12),n=l(n,r,i,s,t[6],2821735955,17),s=l(s,n,r,i,t[7],4249261313,22),i=l(i,s,n,r,t[8],1770035416,7),r=l(r,i,s,n,t[9],2336552879,12),n=l(n,r,i,s,t[10],4294925233,17),s=l(s,n,r,i,t[11],2304563134,22),i=l(i,s,n,r,t[12],1804603682,7),r=l(r,i,s,n,t[13],4254626195,12),n=l(n,r,i,s,t[14],2792965006,17),s=l(s,n,r,i,t[15],1236535329,22),i=c(i,s,n,r,t[1],4129170786,5),r=c(r,i,s,n,t[6],3225465664,9),n=c(n,r,i,s,t[11],643717713,14),s=c(s,n,r,i,t[0],3921069994,20),i=c(i,s,n,r,t[5],3593408605,5),r=c(r,i,s,n,t[10],38016083,9),n=c(n,r,i,s,t[15],3634488961,14),s=c(s,n,r,i,t[4],3889429448,20),i=c(i,s,n,r,t[9],568446438,5),r=c(r,i,s,n,t[14],3275163606,9),n=c(n,r,i,s,t[3],4107603335,14),s=c(s,n,r,i,t[8],1163531501,20),i=c(i,s,n,r,t[13],2850285829,5),r=c(r,i,s,n,t[2],4243563512,9),n=c(n,r,i,s,t[7],1735328473,14),s=c(s,n,r,i,t[12],2368359562,20),i=h(i,s,n,r,t[5],4294588738,4),r=h(r,i,s,n,t[8],2272392833,11),n=h(n,r,i,s,t[11],1839030562,16),s=h(s,n,r,i,t[14],4259657740,23),i=h(i,s,n,r,t[1],2763975236,4),r=h(r,i,s,n,t[4],1272893353,11),n=h(n,r,i,s,t[7],4139469664,16),s=h(s,n,r,i,t[10],3200236656,23),i=h(i,s,n,r,t[13],681279174,4),r=h(r,i,s,n,t[0],3936430074,11),n=h(n,r,i,s,t[3],3572445317,16),s=h(s,n,r,i,t[6],76029189,23),i=h(i,s,n,r,t[9],3654602809,4),r=h(r,i,s,n,t[12],3873151461,11),n=h(n,r,i,s,t[15],530742520,16),s=h(s,n,r,i,t[2],3299628645,23),i=d(i,s,n,r,t[0],4096336452,6),r=d(r,i,s,n,t[7],1126891415,10),n=d(n,r,i,s,t[14],2878612391,15),s=d(s,n,r,i,t[5],4237533241,21),i=d(i,s,n,r,t[12],1700485571,6),r=d(r,i,s,n,t[3],2399980690,10),n=d(n,r,i,s,t[10],4293915773,15),s=d(s,n,r,i,t[1],2240044497,21),i=d(i,s,n,r,t[8],1873313359,6),r=d(r,i,s,n,t[15],4264355552,10),n=d(n,r,i,s,t[6],2734768916,15),s=d(s,n,r,i,t[13],1309151649,21),i=d(i,s,n,r,t[4],4149444226,6),r=d(r,i,s,n,t[11],3174756917,10),n=d(n,r,i,s,t[2],718787259,15),s=d(s,n,r,i,t[9],3951481745,21),this._a=this._a+i|0,this._b=this._b+s|0,this._c=this._c+n|0,this._d=this._d+r|0},r.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=new e(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=r}).call(this,i("1c35").Buffer)},f597:function(t,e,i){"use strict";var s=i("2a0e"),n=i.n(s);n.a},f7a3:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABF0lEQVRYR+2XTQ6CMBCFp9Vj6IEMnsOFYGUlbHQr7BDFhefw50B6CyM1mJSQAkJLoZrAejrz8WamL0Wg+UOa60MKYNnehMboRIGO6kAhQA+E6ewQuLc68WUxKYBJ/Hvd4ixZAhGFzlgJwJx4VCbRMXQbtTE9/DMACLARhavrNzUWtme8YjgnMcoVGGCY7gP3og1AdA6UK9ADaFegaAuyU88DKp+Boi3oFEB7C/4OQBSYd9HGXiAKkMRnXTQH0LYXMNNj25MDaNsLKgFEJS27B8yl/zG0aOcY2ZydAfCFGEQPUKmArBfwPZdugawX8AWlAWS34P8BTOI/KdChqAIy8YVXsUW2awp40zZEqRnJ/ImKM42eVSoA3vVWFzCTEc1PAAAAAElFTkSuQmCC"},f7a4:function(t,e,i){"use strict";var s=i("71b0"),n=i.n(s);n.a},f7e9:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABCklEQVRYR2NkGGDAOMD2M4w6ACMEcvK7gv///zf1PwODOC2ih5GB4SUjI1P2lIlla0HmYzggK6/jBQONLEfy0MtpkyokcDngBgMDgzotfI9k5s1pkyo0sDogN7fd8C8jUwsDw3+aRAEDA+NL5v//aiZPrjyP1QE09jmG8aPZcDQEBl8IUKkkfPufgbF0+qTy+YRyFS1Lwm9iQj/4Gxoa/uBzBDYHUKskBBW3kgwMDP9JcgCVSsK3TP/+NU2ZUnWU5CggpIHa8oMvF1Dbh4TMGw2BwRcCxJaE6G07QnGNS57SkhDetqOmA0gpCeFtO6o5gPiSELVtRzUHkGsQufoGXy4g1yfk6hvwEAAAl7JeISa/mCAAAAAASUVORK5CYII="},f7f64:function(t,e,i){"use strict";var s=i("fc82"),n=i.n(s);n.a},f856:function(t,e,i){"use strict";const s={www:{d3:!0,leftSide:["template","material","font","bg","tool","upload"],leftSide__avatar:["my-designs","mycollect","orders","personalcenter","logout"],header:["logo","file","check-before-printing-button","d3-render-button","share-button","printing-button","export-button"],header__file:["create","my-designs","import","save","copy","history","send-template-center","help"]},enterprise:{d3:!0,leftSide:["material","font","bg","tool","upload"],leftSide__avatar:["my-designs","personalcenter"],header:["logo","file","customer-service-button","check-before-printing-button","d3-render-button","export-button"],header__file:["create","my-designs","import","save","copy","history","help"]}};e["a"]=s},f8fc:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADxUlEQVRYR92XTWgcdRjGf89sNvaQpkpQMHpQxCY0Ciag1IP4AanYmp3dpkug9dKoB2sFvVebaL0XtHowNAetqNt0Z2ZJxVb8wIOhQiPYFlMRPdRcpKJJEJtk55WdJJjsJtnZrUFwjrvvPO/v/7wf+1/xHz+6nvyWcs8C1xT4T9arc30APa6VEqvg161T94ulxPa/BrB0+hFChnAYlOe9u1qNqzlgPRkXha/j6KA874vVNFYtgfXs3o7Cs5g1gV5SwTtaF4DrHiDkGNIM5nSrcGqsXKcCwHp772aueA6zG4FhAu9pSVGzlT9VHTATbmYIs36k30kmHtDIyA/LdSoBUukzmHUjTtLV2aeBgXCtEasGEDXqwIDD+fEPMfYgPlXgd68JYK7bR8gHoF/ZlGxXLvfbevMdByCC2Lv3Jqb/nAC7GdSngvfRku4KByzlXsDowHH65eeHqy2XuAARhJvZTxgeR1xS4HdUAFgmcw/z4XeLp79VuVzxXwXIZhNcm5vE7BYanHuVz1+IlthSEkulX8PsENLbCrwD1ZLXs4gslX4Ls+eQjijwXl4J0JP+BGwHDrvk+6c3BMB1dxIyCjqjgvd4mQPuRYxtOI0d8nOX4gGkRxFJBd6OWPFudhvh7MXlffBPCXrcP4Bmmpu26MSJqTiCtcbYvn3NTM2U8kyp4G8p74HpaPNtatysXG6mVvE48ZbNNvHX7DRiWoHfXA4wgdlWGpw25fOX4wjWGmOZzFbmwwmkywq8tvIe+AzjURLaKc/7uFbxOPGWTj9B0U4jPlfgP1Y2Be4g8ArimAL/YBzBWmMs5b6J8Tzwqgr+4TIHejux+fNIV7gheUecRVQLgC0sop8xux01dCkYGV8BEC2WlPs9RhsOz8r3h2pJUC3WXPcZQt5BTCjw2ytWcQTg7t5DWMwhJqGlXcHx6WrCcb63VP9muFo6XCtOIiv/1MlVARZd+BpjOyKgqzOz3s9xrOQLP8d5jBRiTIH/4PL3Ku8DPdk70dw3mLXg6A0673uxXojoLjD+7VFCewHpKpa8X4XcT+sCRC5kMg9TtNKVLBk5QctTtZZj0fb3Fk6uORLqVj7/Zblra17LFyFGIidKPSEO09g4XG06om6fnd2PMRjVvHTyhHpXS14xBeV0FpVj9v2oJ6JoXQHzcTSK9CMNDZPR5/PzrZjdRWi7QG40agvqY1jj3nLbq5agAqQ0HVY8Eo1onEdMoMSh5d2+1ms1/TOyVLSs0oiHQLcBrYvCk2C/YHyFGrylJROPNU7UBsbU5MBGcPwNTK6vMM9KskcAAAAASUVORK5CYII="},f8fd:function(t,e,i){},fa26:function(t,e,i){},fa5f:function(t,e,i){"use strict";i.r(e);i("ddb0");var s=i("5530"),n=i("750b"),a=i("365c"),r=i("3ccf"),o=i("ed08"),l=i("b6c6"),c=i("4e72"),h=i("398a"),d=i("5a0c"),u=i.n(d);i("b62f");const p=i("131e"),f=/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-7|9])|(?:5[0-3|5-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[1|8|9]))\d{8}$/,m=(Object(o["s"])(f),{BASE:0,ACCOUNT:1}),g=[{headBackground:"//yun.baoxiaohe.com/user-materials/a09d3f6c-7109-4237-9c04-540c91f58092.png",message:"",tag:"//yun.baoxiaohe.com/user-materials/16a9722f-613c-44ff-88f4-7fca84b6b3c0.png"},{headBackground:"//yun.baoxiaohe.com/user-materials/6e8b7620-823a-413c-8bca-2e53fcb7f85e.png",message:"个人专业版会员有效期至",tag:"//yun.baoxiaohe.com/user-materials/f246d7de-b874-4ccc-b307-4630f2a56d5a.png"},{headBackground:"//yun.baoxiaohe.com/user-materials/19ac412e-757c-42ab-b4c4-0770ce723d0f.png",message:"企业专业版会员有效期至",tag:"//yun.baoxiaohe.com/user-materials/690245d0-821f-435d-8bf4-5fa2285e1d51.png"}],v="//yun.baoxiaohe.com/user-materials/a95db3e2-ed02-4fb2-a902-4e53d2f148e7.png",b=["基本信息","账号与安全"],y={labelCol:{span:6},wrapperCol:{span:18}},_=Object(n["b"])({setup(t,e){const{form:{getFieldDecorator:i,getFieldsValue:c,setFieldsValue:d}}=t,f=Object(n["j"])(m.BASE),[_,{setTrue:x,setFalse:w}]=Object(o["I"])(!1),C=e.vuex.mapGetters("profile",["isPersonalVip","isProdVip","getVipDeadline"]),k=e.vuex.mapActions("profile",[l["b"],l["f"],l["g"]]),S=e.vuex.mapState("profile",["accessToken"]),A=Object(n["a"])(()=>C.isProdVip.value?2:C.isPersonalVip.value?1:0),O=Object(n["i"])({avatar_url:"",nick_name:""}),j=Object(n["j"])(!1),[M]=Object(r["b"])(a["updateUserInfo"]),{data:I,loading:T}=Object(r["c"])(a["getUserInfo"],{update(t){O.avatar_url=t.data.userInfo.avatarUrl,O.nick_name=t.data.userInfo.nickName,d({company:t.data.userInfo.company,position:t.data.userInfo.position,contact:t.data.userInfo.contact})}}),E=Object(n["a"])(()=>I.value?g[A.value]:{}),D=a["UPLOAD_PATH"],L={functional:!0,render:t=>t("div",{class:"renew-btn",on:{click:()=>{2===A?k[l["f"]]():k[l["g"]]()}}},[0===A.value?"立即开通":"续费"])};return()=>Object(n["c"])("div",{class:"personalcenter"},[Object(n["c"])("div",{class:"page-title"},["账号设置"]),Object(n["c"])("div",{class:"personalcenter__content mt-16"},[Object(n["c"])("a-tabs",{attrs:{animated:!1,defaultActiveKey:m.BASE},on:{change:t=>{f.value=t}}},[b.map((t,a)=>{var r,l;return Object(n["c"])("a-tab-pane",{key:a,attrs:{tab:t}},[a===m.BASE?Object(n["c"])("a-spin",{attrs:{spinning:T.value}},[Object(n["c"])("div",{class:"py-30"},[Object(n["c"])("div",{class:"user-info-wrapper"},[Object(n["c"])("div",{class:"header-wrapper flex item-center",style:{backgroundImage:`url(${E.value.headBackground})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}},[A.value?Object(n["c"])("img",{class:"tag-image ml-60",attrs:{src:v}}):Object(n["c"])("div"),Object(n["c"])("div",{class:"ml-auto flex item-center"},[Object(n["c"])("span",{class:"mr-20",style:{width:"300px",textAlign:"right",color:1===A.value?"#6F4911":2===A.value?"#ffe6c4":"#19436F"}},[A.value?`${E.value.message}${u()(C.getVipDeadline.value).format("YYYY年MM月DD日")}`:"您还不是VIP哦～"]),Object(n["c"])(L)])]),Object(n["c"])("div",{class:"center-wrapper"},[Object(n["c"])("a-upload",{attrs:{showUploadList:!1,name:"file",multiple:!1,data:{type:"image"},action:D,headers:{Authentication:S.accessToken.value}},on:{change:({fileList:t})=>{var e;j.value||(j.value=!0);const[i]=t.reverse(),{url:s}=(null===(e=i.response)||void 0===e?void 0:e.data)||"";s&&(j.value=!1,O.avatar_url=s)}}},[Object(n["c"])("div",{class:"preview-wrapper text-pointer",on:{mouseenter:()=>x(),mouseleave:()=>w()}},[Object(n["c"])("div",{class:"preview-image",directives:[{name:"show",value:_.value}]},[Object(n["c"])("i",{class:"iconfont"},[""])]),Object(n["c"])("img",{attrs:{src:O.avatar_url?Object(o["F"])(O.avatar_url,88,88):p,alt:""},class:"headimg"})])]),Object(n["c"])("br"),Object(n["c"])("img",{class:"user-tag",attrs:{src:E.value.tag,alt:""}}),Object(n["c"])("div",{class:"author-name"},[Object(n["c"])("a-input",{class:"no-border",attrs:{placeholder:"请输入姓名",value:O.nick_name},on:{change:t=>O.nick_name=t.target.value}}),(null===(r=I.value)||void 0===r?void 0:r.user_id)&&Object(n["c"])("div",{class:"id"},["ID:",null===(l=I.value)||void 0===l?void 0:l.user_id])]),Object(n["c"])("a-form",{class:"mt-50",attrs:{labelCol:y.labelCol,wrapperCol:y.wrapperCol}},[Object(n["c"])("a-form-item",{attrs:{label:"单位/学校"}},[i("company")(Object(n["c"])("a-input",{attrs:{placeholder:"请输入单位/学校"}}))]),Object(n["c"])("a-form-item",{attrs:{label:"职务"}},[i("position")(Object(n["c"])("a-input",{attrs:{placeholder:"请输入职务"}}))]),Object(n["c"])("a-form-item",{attrs:{label:"联系方式"}},[i("contact")(Object(n["c"])("a-input",{attrs:{placeholder:"请输入联系方式"}}))])]),Object(n["c"])("a-button",{attrs:{type:"primary"},class:"submit",on:{click:()=>{const t=Object(s["a"])(Object(s["a"])({},O),c());let i="";O.avatar_url||(i="请上传头像"),O.nick_name||(i="请输入用户名"),i?e.root.$message.error(i):M({variables:t,update(){e.root.$message.success("保存成功")}})}}},["保存"])])])])]):Object(n["c"])("div",{class:"p-30"},[Object(n["c"])(h["default"])])])})])])])}});e["default"]=c["Form"].create()(_)},faa1:function(t,e,i){"use strict";var s,n="object"===typeof Reflect?Reflect:null,a=n&&"function"===typeof n.apply?n.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};function r(t){console&&console.warn}s=n&&"function"===typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!==t};function l(){l.init.call(this)}t.exports=l,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var c=10;function h(t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function d(t){return void 0===t._maxListeners?l.defaultMaxListeners:t._maxListeners}function u(t,e,i,s){var n,a,o;if(h(i),a=t._events,void 0===a?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),a=t._events),o=a[e]),void 0===o)o=a[e]=i,++t._eventsCount;else if("function"===typeof o?o=a[e]=s?[i,o]:[o,i]:s?o.unshift(i):o.push(i),n=d(t),n>0&&o.length>n&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,r(l)}return t}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(t,e,i){var s={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=p.bind(s);return n.listener=i,s.wrapFn=n,n}function m(t,e,i){var s=t._events;if(void 0===s)return[];var n=s[e];return void 0===n?[]:"function"===typeof n?i?[n.listener||n]:[n]:i?y(n):v(n,n.length)}function g(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"===typeof i)return 1;if(void 0!==i)return i.length}return 0}function v(t,e){for(var i=new Array(e),s=0;s<e;++s)i[s]=t[s];return i}function b(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function y(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(t){if("number"!==typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");c=t}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},l.prototype.getMaxListeners=function(){return d(this)},l.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var s="error"===t,n=this._events;if(void 0!==n)s=s&&void 0===n.error;else if(!s)return!1;if(s){var r;if(e.length>0&&(r=e[0]),r instanceof Error)throw r;var o=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw o.context=r,o}var l=n[t];if(void 0===l)return!1;if("function"===typeof l)a(l,this,e);else{var c=l.length,h=v(l,c);for(i=0;i<c;++i)a(h[i],this,e)}return!0},l.prototype.addListener=function(t,e){return u(this,t,e,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(t,e){return u(this,t,e,!0)},l.prototype.once=function(t,e){return h(e),this.on(t,f(this,t,e)),this},l.prototype.prependOnceListener=function(t,e){return h(e),this.prependListener(t,f(this,t,e)),this},l.prototype.removeListener=function(t,e){var i,s,n,a,r;if(h(e),s=this._events,void 0===s)return this;if(i=s[t],void 0===i)return this;if(i===e||i.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!==typeof i){for(n=-1,a=i.length-1;a>=0;a--)if(i[a]===e||i[a].listener===e){r=i[a].listener,n=a;break}if(n<0)return this;0===n?i.shift():b(i,n),1===i.length&&(s[t]=i[0]),void 0!==s.removeListener&&this.emit("removeListener",t,r||e)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(t){var e,i,s;if(i=this._events,void 0===i)return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var n,a=Object.keys(i);for(s=0;s<a.length;++s)n=a[s],"removeListener"!==n&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=i[t],"function"===typeof e)this.removeListener(t,e);else if(void 0!==e)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this},l.prototype.listeners=function(t){return m(this,t,!0)},l.prototype.rawListeners=function(t){return m(this,t,!1)},l.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},l.prototype.listenerCount=g,l.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]}},fb01:function(t,e,i){"use strict";var s=i("c7f0"),n=i.n(s);n.a},fb09:function(t,e,i){t.exports=i.p+"editor-assets/img/paste.4f110f95.svg"},fb0d:function(t,e,i){"use strict";i.r(e),i.d(e,"tableTemplates",(function(){return s}));const s=[{img:"//yun.baoxiaohe.com/user-materials/cd3c4d64-971d-402d-962b-093c98b3bb61.png",style:{type:"table",table:{row:7,column:3,zIndex:35,lines:{"0,0,1,0":{color:"rgba(0, 0, 0, 1)",zIndex:34},"1,0,2,0":{color:"rgba(0, 0, 0, 1)",zIndex:34},"2,0,3,0":{color:"rgba(0, 0, 0, 1)",zIndex:34},"0,1,1,1":{color:"rgba(0, 0, 0, 1)",zIndex:34},"1,1,2,1":{color:"rgba(0, 0, 0, 1)",zIndex:34},"2,1,3,1":{color:"rgba(0, 0, 0, 1)",zIndex:34},"0,2,1,2":{color:"transparent",zIndex:2},"1,2,2,2":{color:"transparent",zIndex:2},"2,2,3,2":{color:"transparent",zIndex:2},"0,3,1,3":{color:"transparent",zIndex:3},"1,3,2,3":{color:"transparent",zIndex:3},"2,3,3,3":{color:"transparent",zIndex:3},"0,4,1,4":{color:"transparent",zIndex:4},"1,4,2,4":{color:"transparent",zIndex:4},"2,4,3,4":{color:"transparent",zIndex:4},"0,0,0,1":{color:"rgba(0, 0, 0, 1)",zIndex:34},"0,1,0,2":{color:"#000",zIndex:32},"0,2,0,3":{color:"#000",zIndex:32},"0,3,0,4":{color:"#000",zIndex:32},"0,4,0,5":{color:"#000",zIndex:32},"1,0,1,1":{color:"transparent",zIndex:28},"1,1,1,2":{color:"transparent",zIndex:28},"1,2,1,3":{color:"transparent",zIndex:28},"1,3,1,4":{color:"transparent",zIndex:28},"1,4,1,5":{color:"transparent",zIndex:28},"2,0,2,1":{color:"transparent",zIndex:29},"2,1,2,2":{color:"transparent",zIndex:29},"2,2,2,3":{color:"transparent",zIndex:29},"2,3,2,4":{color:"transparent",zIndex:29},"2,4,2,5":{color:"transparent",zIndex:29},"0,5,1,5":{color:"transparent",zIndex:15},"1,5,2,5":{color:"transparent",zIndex:15},"2,5,3,5":{color:"transparent",zIndex:15},"3,0,3,1":{color:"rgba(0, 0, 0, 1)",zIndex:34},"3,1,3,2":{color:"#000",zIndex:32},"3,2,3,3":{color:"#000",zIndex:32},"3,3,3,4":{color:"#000",zIndex:32},"3,4,3,5":{color:"#000",zIndex:32},"0,5,0,6":{color:"#000",zIndex:32},"1,5,1,6":{color:"transparent",zIndex:28},"2,5,2,6":{color:"transparent",zIndex:29},"0,6,1,6":{color:"transparent",zIndex:20},"1,6,2,6":{color:"transparent",zIndex:20},"2,6,3,6":{color:"transparent",zIndex:20},"3,5,3,6":{color:"#000",zIndex:32},"0,6,0,7":{color:"#000",zIndex:32},"1,6,1,7":{color:"transparent",zIndex:28},"2,6,2,7":{color:"transparent",zIndex:29},"3,6,3,7":{color:"#000",zIndex:32},"0,7,1,7":{color:"#000",zIndex:32},"1,7,2,7":{color:"#000",zIndex:32},"2,7,3,7":{color:"#000",zIndex:32}},borderWidth:1.33333333,previewStyle:{id:5,row:"first",column:"none"},cells:[[{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"    项目",background:"rgba(255, 255, 255, 0)",color:"rgba(0, 0, 0, 1)",fontSize:3.52777778,textAlign:"left"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"    能量",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)",textAlign:"left"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"    蛋白质",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)",textAlign:"left"},{cellHeight:30.989024931093386,cellWidth:124.20753441189706,value:"    脂肪",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)",textAlign:"left"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"    碳水化合物",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)",textAlign:"left"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"    反式脂肪(酸)",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)",textAlign:"left"},{cellHeight:30.989024931093386,cellWidth:124.20753441189706,value:"    钠",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)",textAlign:"left"}],[{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"每100g",background:"rgba(255, 255, 255, 0)",color:"rgba(0, 0, 0, 1)",fontSize:3.52777778},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"0.0 KJ",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"0.0g",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)"},{cellHeight:30.989024931093386,cellWidth:124.20753441189706,value:"0.0g",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"0.0g ",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"0.0g",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)"},{cellHeight:30.989024931093386,cellWidth:124.20753441189706,value:"0.0mg",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)"}],[{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"营养参考价值%",background:"rgba(255, 255, 255, 0)",color:"rgba(0, 0, 0, 1)",fontSize:3.52777778},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"0%",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"0%",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)"},{cellHeight:30.989024931093386,cellWidth:124.20753441189706,value:"0%",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"0%",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:" ",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)"},{cellHeight:30.989024931093386,cellWidth:124.20753441189706,value:"0%",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)"}]],defaultStyle:{fontSize:2.4934064553788686},borders:[]},value:"",style:{position:"absolute",rotate:360,opacity:100,width:99.73625821515473,height:59.59911770065062,borderRadius:10},locked:!1}},{img:"//yun.baoxiaohe.com/user-materials/d40c1db4-3c0b-4e20-8cff-8896995a320e.png",style:{type:"table",table:{row:7,column:3,zIndex:35,lines:{"0,0,1,0":{color:"rgba(0, 0, 0, 1)",zIndex:34},"1,0,2,0":{color:"rgba(0, 0, 0, 1)",zIndex:34},"2,0,3,0":{color:"rgba(0, 0, 0, 1)",zIndex:34},"0,1,1,1":{color:"rgba(0, 0, 0, 1)",zIndex:34},"1,1,2,1":{color:"rgba(0, 0, 0, 1)",zIndex:34},"2,1,3,1":{color:"rgba(0, 0, 0, 1)",zIndex:34},"0,2,1,2":{color:"transparent",zIndex:2},"1,2,2,2":{color:"transparent",zIndex:2},"2,2,3,2":{color:"transparent",zIndex:2},"0,3,1,3":{color:"transparent",zIndex:3},"1,3,2,3":{color:"transparent",zIndex:3},"2,3,3,3":{color:"transparent",zIndex:3},"0,4,1,4":{color:"transparent",zIndex:4},"1,4,2,4":{color:"transparent",zIndex:4},"2,4,3,4":{color:"transparent",zIndex:4},"0,0,0,1":{color:"rgba(0, 0, 0, 1)",zIndex:34},"0,1,0,2":{color:"#000",zIndex:32},"0,2,0,3":{color:"#000",zIndex:32},"0,3,0,4":{color:"#000",zIndex:32},"0,4,0,5":{color:"#000",zIndex:32},"1,0,1,1":{color:"transparent",zIndex:28},"1,1,1,2":{color:"transparent",zIndex:28},"1,2,1,3":{color:"transparent",zIndex:28},"1,3,1,4":{color:"transparent",zIndex:28},"1,4,1,5":{color:"transparent",zIndex:28},"2,0,2,1":{color:"transparent",zIndex:29},"2,1,2,2":{color:"transparent",zIndex:29},"2,2,2,3":{color:"transparent",zIndex:29},"2,3,2,4":{color:"transparent",zIndex:29},"2,4,2,5":{color:"transparent",zIndex:29},"0,5,1,5":{color:"transparent",zIndex:15},"1,5,2,5":{color:"transparent",zIndex:15},"2,5,3,5":{color:"transparent",zIndex:15},"3,0,3,1":{color:"rgba(0, 0, 0, 1)",zIndex:34},"3,1,3,2":{color:"#000",zIndex:32},"3,2,3,3":{color:"#000",zIndex:32},"3,3,3,4":{color:"#000",zIndex:32},"3,4,3,5":{color:"#000",zIndex:32},"0,5,0,6":{color:"#000",zIndex:32},"1,5,1,6":{color:"transparent",zIndex:28},"2,5,2,6":{color:"transparent",zIndex:29},"0,6,1,6":{color:"transparent",zIndex:20},"1,6,2,6":{color:"transparent",zIndex:20},"2,6,3,6":{color:"transparent",zIndex:20},"3,5,3,6":{color:"#000",zIndex:32},"0,6,0,7":{color:"#000",zIndex:32},"1,6,1,7":{color:"transparent",zIndex:28},"2,6,2,7":{color:"transparent",zIndex:29},"3,6,3,7":{color:"#000",zIndex:32},"0,7,1,7":{color:"#000",zIndex:32},"1,7,2,7":{color:"#000",zIndex:32},"2,7,3,7":{color:"#000",zIndex:32}},borderWidth:1.33333333,previewStyle:{id:5,row:"first",column:"none"},cells:[[{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"    项目",background:"rgba(0, 0, 0, 1)",color:"rgba(255, 255, 255, 1)",fontSize:3.52777778,textAlign:"left"},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"    能量",fontSize:3.52777778,textAlign:"left"},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"    蛋白质",fontSize:3.52777778,textAlign:"left"},{cellHeight:30.990183986490898,cellWidth:124.5943130478858,value:"    脂肪",fontSize:3.52777778,textAlign:"left"},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"    碳水化合物",fontSize:3.52777778,textAlign:"left"},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"    反式脂肪(酸)",fontSize:3.52777778,textAlign:"left"},{cellHeight:30.990183986490898,cellWidth:124.5943130478858,value:"    钠",fontSize:3.52777778,textAlign:"left"}],[{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"每100g",background:"rgba(0, 0, 0, 1)",color:"rgba(255, 255, 255, 1)",fontSize:3.52777778},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"0.0 KJ",fontSize:3.52777778},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"0.0g",fontSize:3.52777778},{cellHeight:30.990183986490898,cellWidth:124.5943130478858,value:"0.0g",fontSize:3.52777778},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"0.0g ",fontSize:3.52777778},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"0.0g",fontSize:3.52777778},{cellHeight:30.990183986490898,cellWidth:124.5943130478858,value:"0.0mg",fontSize:3.52777778}],[{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"营养参考价值%",background:"rgba(0, 0, 0, 1)",color:"rgba(255, 255, 255, 1)",fontSize:3.52777778},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"0%",fontSize:3.52777778},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"0%",fontSize:3.52777778},{cellHeight:30.990183986490898,cellWidth:124.5943130478858,value:"0%",fontSize:3.52777778},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"0%",fontSize:3.52777778},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:" ",fontSize:3.52777778},{cellHeight:30.990183986490898,cellWidth:124.5943130478858,value:"0%",fontSize:3.52777778}]],defaultStyle:{fontSize:2.501081593936679},borders:[]},value:"",style:{position:"absolute",rotate:360,opacity:100,width:100.04326375746717,height:59.60126436783477,borderRadius:10},locked:!1,sort:1}},{img:"//yun.baoxiaohe.com/user-materials/5bdd25ff-58ed-452f-951c-3ebe472ce795.png",style:{type:"table",table:{row:7,column:3,zIndex:54,lines:{"0,0,1,0":{color:"rgba(0, 0, 0, 0)",zIndex:44},"1,0,2,0":{color:"rgba(0, 0, 0, 0)",zIndex:44},"2,0,3,0":{color:"rgba(0, 0, 0, 0)",zIndex:44},"0,1,1,1":{color:"rgba(0, 0, 0, 0)",zIndex:44},"1,1,2,1":{color:"rgba(0, 0, 0, 0)",zIndex:44},"2,1,3,1":{color:"rgba(0, 0, 0, 0)",zIndex:44},"0,2,1,2":{color:"rgba(0, 0, 0, 0)",zIndex:45},"1,2,2,2":{color:"rgba(0, 0, 0, 0)",zIndex:45},"2,2,3,2":{color:"rgba(0, 0, 0, 0)",zIndex:45},"0,3,1,3":{color:"rgba(0, 0, 0, 0)",zIndex:45},"1,3,2,3":{color:"rgba(0, 0, 0, 0)",zIndex:45},"2,3,3,3":{color:"rgba(0, 0, 0, 0)",zIndex:45},"0,4,1,4":{color:"rgba(0, 0, 0, 0)",zIndex:46},"1,4,2,4":{color:"rgba(0, 0, 0, 0)",zIndex:46},"2,4,3,4":{color:"rgba(0, 0, 0, 0)",zIndex:46},"0,0,0,1":{color:"rgba(0, 0, 0, 0)",zIndex:44},"0,1,0,2":{color:"rgba(0, 0, 0, 0)",zIndex:43},"0,2,0,3":{color:"rgba(0, 0, 0, 0)",zIndex:45},"0,3,0,4":{color:"rgba(0, 0, 0, 0)",zIndex:43},"0,4,0,5":{color:"rgba(0, 0, 0, 0)",zIndex:46},"1,0,1,1":{color:"transparent",zIndex:28},"1,1,1,2":{color:"transparent",zIndex:28},"1,2,1,3":{color:"transparent",zIndex:28},"1,3,1,4":{color:"transparent",zIndex:28},"1,4,1,5":{color:"transparent",zIndex:28},"2,0,2,1":{color:"transparent",zIndex:29},"2,1,2,2":{color:"transparent",zIndex:29},"2,2,2,3":{color:"transparent",zIndex:29},"2,3,2,4":{color:"transparent",zIndex:29},"2,4,2,5":{color:"transparent",zIndex:29},"0,5,1,5":{color:"rgba(255, 255, 255, 0)",zIndex:53},"1,5,2,5":{color:"rgba(255, 255, 255, 0)",zIndex:53},"2,5,3,5":{color:"rgba(255, 255, 255, 0)",zIndex:53},"3,0,3,1":{color:"rgba(0, 0, 0, 0)",zIndex:44},"3,1,3,2":{color:"rgba(0, 0, 0, 0)",zIndex:43},"3,2,3,3":{color:"rgba(0, 0, 0, 0)",zIndex:45},"3,3,3,4":{color:"rgba(0, 0, 0, 0)",zIndex:43},"3,4,3,5":{color:"rgba(0, 0, 0, 0)",zIndex:46},"0,5,0,6":{color:"rgba(255, 255, 255, 0)",zIndex:53},"1,5,1,6":{color:"transparent",zIndex:28},"2,5,2,6":{color:"transparent",zIndex:29},"0,6,1,6":{color:"rgba(255, 255, 255, 0)",zIndex:53},"1,6,2,6":{color:"rgba(255, 255, 255, 0)",zIndex:53},"2,6,3,6":{color:"rgba(255, 255, 255, 0)",zIndex:53},"3,5,3,6":{color:"rgba(255, 255, 255, 0)",zIndex:53},"0,6,0,7":{color:"rgba(0, 0, 0, 0)",zIndex:47},"1,6,1,7":{color:"transparent",zIndex:28},"2,6,2,7":{color:"transparent",zIndex:29},"3,6,3,7":{color:"rgba(0, 0, 0, 0)",zIndex:47},"0,7,1,7":{color:"rgba(0, 0, 0, 0)",zIndex:47},"1,7,2,7":{color:"rgba(0, 0, 0, 0)",zIndex:47},"2,7,3,7":{color:"rgba(0, 0, 0, 0)",zIndex:47}},borderWidth:1.33333333,previewStyle:{id:4,row:"all",column:"none"},cells:[[{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"    项目",background:"rgba(240, 240, 240, 1)",color:"rgba(0, 0, 0, 1)",fontSize:3.52777778,textAlign:"left"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"    能量",fontSize:3.52777778,background:"rgba(240, 240, 240, 0)",textAlign:"left"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"    蛋白质",fontSize:3.52777778,background:"rgba(240, 240, 240, 1)",textAlign:"left"},{cellHeight:30.989024931093386,cellWidth:124.20753441189706,value:"    脂肪",fontSize:3.52777778,background:"rgba(240, 240, 240, 0)",textAlign:"left"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"    碳水化合物",fontSize:3.52777778,background:"rgba(240, 240, 240, 1)",textAlign:"left"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"    反式脂肪(酸)",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)",textAlign:"left"},{cellHeight:30.989024931093386,cellWidth:124.20753441189706,value:"    钠",fontSize:3.52777778,background:"rgba(240, 240, 240, 1)",textAlign:"left"}],[{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"每100g",background:"rgba(240, 240, 240, 1)",color:"rgba(0, 0, 0, 1)",fontSize:3.52777778},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"0.0 KJ",fontSize:3.52777778,background:"rgba(240, 240, 240, 0)"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"0.0g",fontSize:3.52777778,background:"rgba(240, 240, 240, 1)"},{cellHeight:30.989024931093386,cellWidth:124.20753441189706,value:"0.0g",fontSize:3.52777778,background:"rgba(240, 240, 240, 0)"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"0.0g ",fontSize:3.52777778,background:"rgba(240, 240, 240, 1)"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"0.0g",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)"},{cellHeight:30.989024931093386,cellWidth:124.20753441189706,value:"0.0mg",fontSize:3.52777778,background:"rgba(240, 240, 240, 1)"}],[{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"营养参考价值%",background:"rgba(240, 240, 240, 1)",color:"rgba(0, 0, 0, 1)",fontSize:3.52777778},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"0%",fontSize:3.52777778,background:"rgba(240, 240, 240, 0)"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"0%",fontSize:3.52777778,background:"rgba(240, 240, 240, 1)"},{cellHeight:30.989024931093386,cellWidth:124.20753441189706,value:"0%",fontSize:3.52777778,background:"rgba(240, 240, 240, 0)"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:"0%",fontSize:3.52777778,background:"rgba(240, 240, 240, 1)"},{cellWidth:124.20753441189706,cellHeight:30.989024931093386,value:" ",fontSize:3.52777778,background:"rgba(255, 255, 255, 0)"},{cellHeight:30.989024931093386,cellWidth:124.20753441189706,value:"0%",fontSize:3.52777778,background:"rgba(240, 240, 240, 1)"}]],defaultStyle:{fontSize:2.4934064553788686},borders:[]},value:"",style:{position:"absolute",rotate:360,opacity:100,width:99.73625821515473,height:59.59911770065062,borderRadius:0},locked:!1,sort:1}},{img:"//yun.baoxiaohe.com/user-materials/5a986c02-1cd5-494c-9f79-ce4f4fa64905.png",style:{type:"table",table:{row:7,column:3,zIndex:45,lines:{"0,0,1,0":{color:"rgba(243, 243, 243, 0)",zIndex:44},"1,0,2,0":{color:"rgba(243, 243, 243, 0)",zIndex:44},"2,0,3,0":{color:"rgba(243, 243, 243, 0)",zIndex:44},"0,1,1,1":{color:"rgba(243, 243, 243, 0)",zIndex:44},"1,1,2,1":{color:"rgba(243, 243, 243, 0)",zIndex:44},"2,1,3,1":{color:"rgba(243, 243, 243, 0)",zIndex:44},"0,2,1,2":{color:"#000",zIndex:37},"1,2,2,2":{color:"#000",zIndex:37},"2,2,3,2":{color:"#000",zIndex:37},"0,3,1,3":{color:"#000",zIndex:38},"1,3,2,3":{color:"#000",zIndex:38},"2,3,3,3":{color:"#000",zIndex:38},"0,4,1,4":{color:"#000",zIndex:39},"1,4,2,4":{color:"#000",zIndex:39},"2,4,3,4":{color:"#000",zIndex:39},"0,0,0,1":{color:"rgba(243, 243, 243, 0)",zIndex:44},"0,1,0,2":{color:"rgba(0, 0, 0, 0)",zIndex:43},"0,2,0,3":{color:"rgba(0, 0, 0, 0)",zIndex:43},"0,3,0,4":{color:"rgba(0, 0, 0, 0)",zIndex:43},"0,4,0,5":{color:"rgba(0, 0, 0, 0)",zIndex:43},"1,0,1,1":{color:"transparent",zIndex:28},"1,1,1,2":{color:"transparent",zIndex:28},"1,2,1,3":{color:"transparent",zIndex:28},"1,3,1,4":{color:"transparent",zIndex:28},"1,4,1,5":{color:"transparent",zIndex:28},"2,0,2,1":{color:"transparent",zIndex:29},"2,1,2,2":{color:"transparent",zIndex:29},"2,2,2,3":{color:"transparent",zIndex:29},"2,3,2,4":{color:"transparent",zIndex:29},"2,4,2,5":{color:"transparent",zIndex:29},"0,5,1,5":{color:"#000",zIndex:40},"1,5,2,5":{color:"#000",zIndex:40},"2,5,3,5":{color:"#000",zIndex:40},"3,0,3,1":{color:"rgba(243, 243, 243, 0)",zIndex:44},"3,1,3,2":{color:"rgba(0, 0, 0, 0)",zIndex:43},"3,2,3,3":{color:"rgba(0, 0, 0, 0)",zIndex:43},"3,3,3,4":{color:"rgba(0, 0, 0, 0)",zIndex:43},"3,4,3,5":{color:"rgba(0, 0, 0, 0)",zIndex:43},"0,5,0,6":{color:"rgba(0, 0, 0, 0)",zIndex:43},"1,5,1,6":{color:"transparent",zIndex:28},"2,5,2,6":{color:"transparent",zIndex:29},"0,6,1,6":{color:"#000",zIndex:41},"1,6,2,6":{color:"#000",zIndex:41},"2,6,3,6":{color:"#000",zIndex:41},"3,5,3,6":{color:"rgba(0, 0, 0, 0)",zIndex:43},"0,6,0,7":{color:"rgba(0, 0, 0, 0)",zIndex:43},"1,6,1,7":{color:"transparent",zIndex:28},"2,6,2,7":{color:"transparent",zIndex:29},"3,6,3,7":{color:"rgba(0, 0, 0, 0)",zIndex:43},"0,7,1,7":{color:"rgba(0, 0, 0, 0)",zIndex:43},"1,7,2,7":{color:"rgba(0, 0, 0, 0)",zIndex:43},"2,7,3,7":{color:"rgba(0, 0, 0, 0)",zIndex:43}},borderWidth:1.33333333,previewStyle:{id:4,row:"all",column:"none"},cells:[[{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"    项目",background:"rgba(243, 243, 243, 1)",color:"rgba(0, 0, 0, 1)",fontSize:3.52777778,textAlign:"left"},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"    能量",fontSize:3.52777778,textAlign:"left"},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"    蛋白质",fontSize:3.52777778,textAlign:"left"},{cellHeight:30.990183986490898,cellWidth:124.5943130478858,value:"    脂肪",fontSize:3.52777778,textAlign:"left"},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"    碳水化合物",fontSize:3.52777778,textAlign:"left"},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"    反式脂肪(酸)",fontSize:3.52777778,textAlign:"left"},{cellHeight:30.990183986490898,cellWidth:124.5943130478858,value:"    钠",fontSize:3.52777778,textAlign:"left"}],[{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"每100g",background:"rgba(243, 243, 243, 1)",color:"rgba(0, 0, 0, 1)",fontSize:3.52777778},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"0.0 KJ",fontSize:3.52777778},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"0.0g",fontSize:3.52777778},{cellHeight:30.990183986490898,cellWidth:124.5943130478858,value:"0.0g",fontSize:3.52777778},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"0.0g ",fontSize:3.52777778},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"0.0g",fontSize:3.52777778},{cellHeight:30.990183986490898,cellWidth:124.5943130478858,value:"0.0mg",fontSize:3.52777778}],[{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"营养参考价值%",background:"rgba(243, 243, 243, 1)",color:"rgba(0, 0, 0, 1)",fontSize:3.52777778},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"0%",fontSize:3.52777778},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"0%",fontSize:3.52777778},{cellHeight:30.990183986490898,cellWidth:124.5943130478858,value:"0%",fontSize:3.52777778},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:"0%",fontSize:3.52777778},{cellWidth:124.5943130478858,cellHeight:30.990183986490898,value:" ",fontSize:3.52777778},{cellHeight:30.990183986490898,cellWidth:124.5943130478858,value:"0%",fontSize:3.52777778}]],defaultStyle:{fontSize:2.501081593936679},borders:[]},value:"",style:{position:"absolute",rotate:360,opacity:100,width:100.04326375746717,height:59.60126436783477,borderRadius:10},locked:!1,sort:1}},{img:"//yun.baoxiaohe.com/user-materials/6a12a1bb-b197-4e07-a5bc-5d8cd5729814.png",style:{type:"table",table:{row:7,column:2,zIndex:10,lines:{"0,0,1,0":{color:"#000",zIndex:9},"1,0,2,0":{color:"#000",zIndex:9},"0,1,1,1":{color:"#000",zIndex:1},"1,1,2,1":{color:"#000",zIndex:1},"0,2,1,2":{color:"#000",zIndex:2},"1,2,2,2":{color:"#000",zIndex:2},"0,3,1,3":{color:"#000",zIndex:3},"1,3,2,3":{color:"#000",zIndex:3},"0,4,1,4":{color:"#000",zIndex:4},"1,4,2,4":{color:"#000",zIndex:4},"0,5,1,5":{color:"#000",zIndex:5},"1,5,2,5":{color:"#000",zIndex:5},"0,6,1,6":{color:"#000",zIndex:6},"1,6,2,6":{color:"#000",zIndex:6},"0,0,0,1":{color:"#000",zIndex:9},"0,1,0,2":{color:"#000",zIndex:9},"0,2,0,3":{color:"#000",zIndex:9},"0,3,0,4":{color:"#000",zIndex:9},"0,4,0,5":{color:"#000",zIndex:9},"0,5,0,6":{color:"#000",zIndex:9},"0,6,0,7":{color:"#000",zIndex:9},"1,0,1,1":{color:"#000",zIndex:8},"1,1,1,2":{color:"#000",zIndex:8},"1,2,1,3":{color:"#000",zIndex:8},"1,3,1,4":{color:"#000",zIndex:8},"1,4,1,5":{color:"#000",zIndex:8},"1,5,1,6":{color:"#000",zIndex:8},"1,6,1,7":{color:"#000",zIndex:8},"0,7,1,7":{color:"#000",zIndex:9},"1,7,2,7":{color:"#000",zIndex:9},"2,0,2,1":{color:"#000",zIndex:9},"2,1,2,2":{color:"#000",zIndex:9},"2,2,2,3":{color:"#000",zIndex:9},"2,3,2,4":{color:"#000",zIndex:9},"2,4,2,5":{color:"#000",zIndex:9},"2,5,2,6":{color:"#000",zIndex:9},"2,6,2,7":{color:"#000",zIndex:9}},borderWidth:2.66666667,previewStyle:{id:1,row:"all",column:"all"},cells:[[{cellWidth:110.96108170110381,cellHeight:41.65668357423825,value:"品名",fontSize:3.52777778},{cellWidth:110.96108170110381,cellHeight:41.65668357423825,value:"货号",fontSize:3.52777778},{cellWidth:110.96108170110381,cellHeight:41.65668357423825,value:"产品标准号",fontSize:3.52777778},{cellWidth:110.96108170110381,cellHeight:41.65668357423825,value:"材质",fontSize:3.52777778},{cellWidth:110.96108170110381,cellHeight:41.65668357423825,value:"规格",fontSize:3.52777778},{cellWidth:110.96108170110381,cellHeight:41.65668357423825,value:"保质期",fontSize:3.52777778},{cellWidth:110.96108170110381,cellHeight:41.65668357423825,value:"生产日期",fontSize:3.52777778}],[{cellWidth:110.96108170110381,cellHeight:41.65668357423825,fontSize:3.52777778},{cellWidth:110.96108170110381,cellHeight:41.65668357423825,fontSize:3.52777778},{cellWidth:110.96108170110381,cellHeight:41.65668357423825,fontSize:3.52777778},{cellWidth:110.96108170110381,cellHeight:41.65668357423825,fontSize:3.52777778},{cellWidth:110.96108170110381,cellHeight:41.65668357423825,fontSize:3.52777778},{cellWidth:110.96108170110381,cellHeight:41.65668357423825,fontSize:3.52777778},{cellWidth:110.96108170110381,cellHeight:41.65668357423825,fontSize:3.52777778}]],defaultStyle:{fontSize:2.979002918136835},cancelUpdate:!1},value:"",style:{position:"absolute",rotate:360,opacity:100,width:59.95162795638072,height:79.70928825917079},locked:!1}},{img:"//yun.baoxiaohe.com/user-materials/68dba4b9-6eda-4882-9931-3ac47d4e182d.png",style:{type:"table",table:{row:5,column:3,zIndex:21,lines:{"0,0,1,0":{color:"#000",zIndex:20},"1,0,2,0":{color:"#000",zIndex:20},"0,1,1,1":{color:"#000",zIndex:11},"1,1,2,1":{color:"#000",zIndex:11},"0,2,1,2":{color:"#000",zIndex:12},"1,2,2,2":{color:"#000",zIndex:12},"0,3,1,3":{color:"#000",zIndex:13},"1,3,2,3":{color:"#000",zIndex:13},"0,4,1,4":{color:"#000",zIndex:14},"1,4,2,4":{color:"#000",zIndex:14},"0,0,0,1":{color:"#000",zIndex:20},"0,1,0,2":{color:"#000",zIndex:20},"0,2,0,3":{color:"#000",zIndex:20},"0,3,0,4":{color:"#000",zIndex:20},"0,4,0,5":{color:"#000",zIndex:20},"1,0,1,1":{color:"#000",zIndex:18},"1,1,1,2":{color:"#000",zIndex:18},"1,2,1,3":{color:"#000",zIndex:18},"1,3,1,4":{color:"#000",zIndex:18},"1,4,1,5":{color:"#000",zIndex:18},"0,5,1,5":{color:"#000",zIndex:20},"1,5,2,5":{color:"#000",zIndex:20},"2,0,2,1":{color:"#000",zIndex:19},"2,1,2,2":{color:"#000",zIndex:19},"2,2,2,3":{color:"#000",zIndex:19},"2,3,2,4":{color:"#000",zIndex:19},"2,4,2,5":{color:"#000",zIndex:19},"2,0,3,0":{color:"#000",zIndex:20},"2,1,3,1":{color:"#000",zIndex:11},"2,2,3,2":{color:"#000",zIndex:12},"2,3,3,3":{color:"#000",zIndex:13},"2,4,3,4":{color:"#000",zIndex:14},"2,5,3,5":{color:"#000",zIndex:20},"3,0,3,1":{color:"#000",zIndex:20},"3,1,3,2":{color:"#000",zIndex:20},"3,2,3,3":{color:"#000",zIndex:20},"3,3,3,4":{color:"#000",zIndex:20},"3,4,3,5":{color:"#000",zIndex:20}},borderWidth:2.66666667,previewStyle:{id:1,row:"all",column:"all"},cells:[[{cellWidth:111.67552462105176,cellHeight:36.36980596664732,value:"尺码",fontSize:3.52777778},{cellWidth:111.67552462105176,cellHeight:36.36980596664732,value:"S",fontSize:3.52777778},{cellWidth:111.67552462105176,cellHeight:36.36980596664732,value:"M",fontSize:3.52777778},{cellWidth:111.67552462105176,cellHeight:36.36980596664732,value:"L",fontSize:3.52777778},{cellWidth:111.67552462105176,cellHeight:36.36980596664732,value:"XL",fontSize:3.52777778}],[{cellWidth:111.67552462105176,cellHeight:36.36980596664732,fontSize:3.52777778,value:"衣长"},{cellWidth:111.67552462105176,cellHeight:36.36980596664732,fontSize:3.52777778},{cellWidth:111.67552462105176,cellHeight:36.36980596664732,fontSize:3.52777778},{cellWidth:111.67552462105176,cellHeight:36.36980596664732,fontSize:3.52777778},{cellWidth:111.67552462105176,cellHeight:36.36980596664732,fontSize:3.52777778}],[{cellWidth:111.67552462105176,cellHeight:36.36980596664732,value:"胸围"},{cellWidth:111.67552462105176,cellHeight:36.36980596664732},{cellWidth:111.67552462105176,cellHeight:36.36980596664732},{cellWidth:111.67552462105176,cellHeight:36.36980596664732},{cellWidth:111.67552462105176,cellHeight:36.36980596664732}]],defaultStyle:{fontSize:4.479153528493023},cancelUpdate:!1},value:"",style:{position:"absolute",rotate:360,opacity:100,width:90.14175322381777,height:50.14269469970765},locked:!1,sort:1}},{img:"//yun.baoxiaohe.com/user-materials/ed1f8bb6-06bd-445f-8b47-159fdc3f0a70.png?imageView2/0/w/232/h/232/q/70|imageslim",style:{type:"table",table:{row:6,column:5,zIndex:58,lines:{"0,0,1,0":{color:"#000",zIndex:57},"1,0,2,0":{color:"#000",zIndex:57},"0,1,1,1":{color:"#000",zIndex:47},"1,1,2,1":{color:"#000",zIndex:47},"0,2,1,2":{color:"#000",zIndex:48},"1,2,2,2":{color:"#000",zIndex:48},"0,3,1,3":{color:"#000",zIndex:49},"1,3,2,3":{color:"#000",zIndex:49},"0,4,1,4":{color:"#000",zIndex:50},"1,4,2,4":{color:"#000",zIndex:50},"0,0,0,1":{color:"#000",zIndex:57},"0,1,0,2":{color:"#000",zIndex:57},"0,2,0,3":{color:"#000",zIndex:57},"0,3,0,4":{color:"#000",zIndex:57},"0,4,0,5":{color:"#000",zIndex:57},"1,0,1,1":{color:"#000",zIndex:53},"1,1,1,2":{color:"#000",zIndex:53},"1,2,1,3":{color:"#000",zIndex:53},"1,3,1,4":{color:"#000",zIndex:53},"1,4,1,5":{color:"#000",zIndex:53},"0,5,1,5":{color:"#000",zIndex:51},"1,5,2,5":{color:"#000",zIndex:51},"2,0,2,1":{color:"#000",zIndex:54},"2,1,2,2":{color:"#000",zIndex:54},"2,2,2,3":{color:"#000",zIndex:54},"2,3,2,4":{color:"#000",zIndex:54},"2,4,2,5":{color:"#000",zIndex:54},"2,0,3,0":{color:"#000",zIndex:57},"2,1,3,1":{color:"#000",zIndex:47},"2,2,3,2":{color:"#000",zIndex:48},"2,3,3,3":{color:"#000",zIndex:49},"2,4,3,4":{color:"#000",zIndex:50},"2,5,3,5":{color:"#000",zIndex:51},"3,0,3,1":{color:"#000",zIndex:55},"3,1,3,2":{color:"#000",zIndex:55},"3,2,3,3":{color:"#000",zIndex:55},"3,3,3,4":{color:"#000",zIndex:55},"3,4,3,5":{color:"#000",zIndex:55},"3,0,4,0":{color:"#000",zIndex:57},"3,1,4,1":{color:"#000",zIndex:47},"3,2,4,2":{color:"#000",zIndex:48},"3,3,4,3":{color:"#000",zIndex:49},"3,4,4,4":{color:"#000",zIndex:50},"3,5,4,5":{color:"#000",zIndex:51},"4,0,4,1":{color:"#000",zIndex:56},"4,1,4,2":{color:"#000",zIndex:56},"4,2,4,3":{color:"#000",zIndex:56},"4,3,4,4":{color:"#000",zIndex:56},"4,4,4,5":{color:"#000",zIndex:56},"4,0,5,0":{color:"#000",zIndex:57},"4,1,5,1":{color:"#000",zIndex:47},"4,2,5,2":{color:"#000",zIndex:48},"4,3,5,3":{color:"#000",zIndex:49},"4,4,5,4":{color:"#000",zIndex:50},"4,5,5,5":{color:"#000",zIndex:51},"5,0,5,1":{color:"#000",zIndex:57},"5,1,5,2":{color:"#000",zIndex:57},"5,2,5,3":{color:"#000",zIndex:57},"5,3,5,4":{color:"#000",zIndex:57},"5,4,5,5":{color:"#000",zIndex:57},"0,5,0,6":{color:"#000",zIndex:57},"1,5,1,6":{color:"#000",zIndex:53},"2,5,2,6":{color:"#000",zIndex:54},"3,5,3,6":{color:"#000",zIndex:55},"4,5,4,6":{color:"#000",zIndex:56},"0,6,1,6":{color:"#000",zIndex:57},"1,6,2,6":{color:"#000",zIndex:57},"2,6,3,6":{color:"#000",zIndex:57},"3,6,4,6":{color:"#000",zIndex:57},"4,6,5,6":{color:"#000",zIndex:57},"5,5,5,6":{color:"#000",zIndex:57}},borderWidth:1.33333333,previewStyle:{id:1,row:"all",column:"all"},cells:[[{cellWidth:89.58613282222204,cellHeight:36.36980596664732,value:"尺码",fontSize:3.52777778,color:"rgba(255, 255, 255, 1)",background:"rgba(0, 0, 0, 1)"},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,value:"S",fontSize:3.52777778},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,value:"M",fontSize:3.52777778,background:"rgba(240, 240, 240, 1)"},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,value:"L",fontSize:3.52777778},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,value:"XL",fontSize:3.52777778,background:"rgba(240, 240, 240, 1)"},{cellHeight:36.36980596664732,cellWidth:89.58613282222204}],[{cellWidth:89.58613282222204,cellHeight:36.36980596664732,fontSize:3.52777778,value:"腰围",color:"rgba(255, 255, 255, 1)",background:"rgba(0, 0, 0, 1)"},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,fontSize:3.52777778},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,fontSize:3.52777778,background:"rgba(240, 240, 240, 1)"},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,fontSize:3.52777778},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,fontSize:3.52777778,background:"rgba(240, 240, 240, 1)"},{cellHeight:36.36980596664732,cellWidth:89.58613282222204}],[{cellWidth:89.58613282222204,cellHeight:36.36980596664732,value:"裤长",fontSize:3.52777778,color:"rgba(255, 255, 255, 1)",background:"rgba(0, 0, 0, 1)"},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,fontSize:3.52777778},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,fontSize:3.52777778,background:"rgba(240, 240, 240, 1)"},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,fontSize:3.52777778},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,fontSize:3.52777778,background:"rgba(240, 240, 240, 1)"},{cellHeight:36.36980596664732,cellWidth:89.58613282222204}],[{cellWidth:89.58613282222204,cellHeight:36.36980596664732,fontSize:3.52777778,value:"臀围",color:"rgba(255, 255, 255, 1)",background:"rgba(0, 0, 0, 1)"},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,fontSize:3.52777778},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,fontSize:3.52777778,background:"rgba(240, 240, 240, 1)"},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,fontSize:3.52777778},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,fontSize:3.52777778,background:"rgba(240, 240, 240, 1)"},{cellHeight:36.36980596664732,cellWidth:89.58613282222204}],[{cellWidth:89.58613282222204,cellHeight:36.36980596664732,value:"裤脚口",fontSize:3.52777778,color:"rgba(255, 255, 255, 1)",background:"rgba(0, 0, 0, 1)"},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,fontSize:3.52777778},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,fontSize:3.52777778,background:"rgba(240, 240, 240, 1)"},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,fontSize:3.52777778},{cellWidth:89.58613282222204,cellHeight:36.36980596664732,fontSize:3.52777778,background:"rgba(240, 240, 240, 1)"},{cellHeight:36.36980596664732,cellWidth:89.58613282222204}]],defaultStyle:{fontSize:5.986389211555607},cancelUpdate:!1},value:"",style:{position:"absolute",rotate:360,opacity:100,width:120.19068265488926,height:59.677344748265675},locked:!1,sort:1}}].map(Object.freeze);e["default"]=s},fb29:function(t,e,i){t.exports=i.p+"editor-assets/img/risk-ignore.6297d456.svg"},fb6b:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"edit",staticClass:"editable",style:{width:t.data.style.vertical?"auto":t.dwidth,minHeight:t.data.style.vertical?"auto":t.minHeight,height:t.data.style.vertical?t.dheight:"auto",minWidth:t.data.style.vertical?t.minWidth:"auto",lineHeight:t.minHeight,display:t.data.style.display||"block",fontSize:t.fontSize+"px",fontFamily:t.data.style.fontFamily,textAlign:t.data.style.textAlign,color:t.fontColor,cursor:t.editable?"text":"",fontWeight:t.data.style.fontWeight,fontStyle:t.data.style.fontStyle||"normal",opacity:t.data.style.opacity/100,outline:"none",lineBreak:"anywhere",overflowWrap:"anywhere",wordBreak:"break-all",whiteSpace:"break-spaces",transform:"scale("+t.fontScale+")",transformOrigin:"0 0",writingMode:t.data.style.vertical?"vertical-rl":"horizontal-tb",userSelect:t.editable?"":"none"},attrs:{xmlns:"http://www.w3.org/1999/xhtml",autofocus:"autofocus",contenteditable:t.editable},domProps:{innerHTML:t._s(t.data.value)},on:{input:t.inputChange,blur:t.inputBlur,focus:t.focus,keydown:t.onKeydown,mousedown:t.onMousedown,click:t.onClick,dblclick:t.dblclick}})},n=[],a=(i("ddb0"),i("5530")),r=i("27d6"),o=i.n(r),l=i("1645"),c=i("ed08"),h=i("5880"),d=i("6796"),u=i("fe94"),p=i("365c"),f={mixins:[d["a"]],props:{data:{type:Object,default:()=>({})},textEditable:{type:Boolean,default:!1}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(h["mapState"])(["scale","isInside"])),Object(h["mapState"])("editor-v2",["element_craft_list"])),{},{fontColor(){let t=this.data.style.color||"#000000";if(this.data.style.craft)for(const e of this.element_craft_list)this.data.style.craft===e.id&&"specular"===e.type&&(t=e.color);return t},fontSize(){const t=Object(u["a"])(this.data.style.fontSize).mm2px();return t<12?12:t},fontScale(){const t=Object(u["a"])(this.data.style.fontSize).mm2px();return t>12?1:t/12},dwidth(){return this.data.style.width/this.fontScale+"mm"},dheight(){return this.data.style.height/this.fontScale+"mm"},minWidth(){return this.data.style.lineHeight/this.fontScale+"mm"},minHeight(){return this.data.style.lineHeight/this.fontScale+"mm"},canSelect(){return this.editable?{}:{userSelect:"none"}}}),watch:{textEditable(t){this.editable=t},editable(t){this.$emit("editable-change",t)}},data(){return{editable:this.textEditable,fontTrue:0}},mounted(){this.initFont()},methods:{refresh(){this.inputChange()},onKeydown(t){this.editable&&t.stopPropagation()},focus(t){const e=document.createRange();e.selectNodeContents(this.$refs.edit);const i=window.getSelection();i.removeAllRanges(),i.addRange(e)},onMousedown(t){this.editable?t.stopPropagation():this.$emit("mousedown",t)},onClick(t){this.editable&&t.stopPropagation()},createRange(t,e,i){if(i||(i=document.createRange(),i.selectNode(t),i.setStart(t,0)),0===e.count)i.setEnd(t,e.count);else if(t&&e.count>0)if(t.nodeType===Node.TEXT_NODE)t.textContent.length<e.count?e.count-=t.textContent.length:(i.setEnd(t,e.count),e.count=0);else for(let s=0;s<t.childNodes.length;s++)if(i=this.createRange(t.childNodes[s],e,i),0===e.count)break;return i},setCurrentCursorPosition(t){if(t>=0){const e=window.getSelection(),i=this.createRange(document.getElementById("element"+this.data.uuid).parentNode,{count:t});i&&(i.collapse(!1),e.removeAllRanges(),e.addRange(i))}},async dblclick(t){if(this.data.locked)return void this.$message.error("该对象已锁定");const e=!!window.chrome;this.editable=!e||"plaintext-only",this.$store.dispatch("saveShowMaterialTip",!1),await Object(c["D"])(0),this.$refs.edit.focus()},inputChange(t){const e=document.getElementById("element"+this.data.uuid);if(!e)return;const i=e.offsetWidth/p["DPI"],s=e.offsetHeight/p["DPI"],n=this.data.width/i,a=this.data.style.width/i;if(this.data.style.height=s*a,this.data.height=s*n,t)try{for(const e of t.target.children)e.removeAttribute("style")}catch(r){}},inputBlur(t){const e=t.target.innerText;this.data.value=e,this.editable=!1,this.$emit("change",this.data),this.$store.commit("increaseCanvasVersion",this.isInside)},initFont(){const t={fontFamily:this.data.style.fontFamily,src:this.data.src};l["a"].injectFontFamilies([t],"ownFontStyle"),this.data.style.fontFamily?o.a.load({custom:{families:[this.data.style.fontFamily],timeout:1e4},active:async()=>{this.$emit("loaded")},inactive:async()=>{this.$emit("loaded")}}):this.$emit("loaded")}}},m=f,g=(i("650c"),i("2877")),v=Object(g["a"])(m,s,n,!1,null,"4fcb6d38",null);e["default"]=v.exports},fba3:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAblJREFUWAntljtKBEEURdtRBFOVSQdMBTF2Cc46xNAFuAExcA2di0sQNyBG6gL8BYIm4hdE75F6RX+qm5rWYgz6wZ2qep97q19VD51lvfUd+CcdmNc+9oQ74Ssx0EALTW84UgtX+dH0Zk++6T3pJmNRsxk0vdnuvCPxxOsNOgitqeZW2HG1sxoPhTOhdK4uHjX4HUVkryvn04EjOxCovxHYTIzV9MyxGFOtnF2Bmmc3vmvcEGIMDdPz+R8FJ+0c+Uh4MiP3kWBE2+G0khdOuK0GTW9bmp0ITwIJtHMohGxfznPhUoDkxa3xEQsZXHDCjQZaaNZsWZ5jgcRcCBnCxEMgFrJcTvLhRqPVVhQl+aoha0H+VQeeGtiaWMjgghPuks2VVnGLV6VduNQ3N9o6jqElK+YI7A7w5Jw/sE403YFcOa1HUL2E1yoYCiHjnCELgVjI4Gq9hJO8hl3uAJsaCY2voT1N7B8RhNipw88i8mdJeaaXDSpFj5V1iuVDkbTLW1Csvy8ufjP3LZmQhPvQ9O63UdX07INk3Fb1RzE02EDpg2Tqn2R8SLAJ64S1KMWIBlpo9tZ3YPod+AZg5fH80yQjcAAAAABJRU5ErkJggg=="},fbb2:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GenericBarcode=void 0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=i("e762"),a=r(n);function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=function(t){function e(t,i){return o(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return c(e,t),s(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(a.default);e.GenericBarcode=h},fbd5:function(t,e,i){"use strict";var s;function n(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var a=i("9d8a").codes,r=a.ERR_MISSING_ARGS,o=a.ERR_STREAM_DESTROYED;function l(t){if(t)throw t}function c(t){return t.setHeader&&"function"===typeof t.abort}function h(t,e,a,r){r=n(r);var l=!1;t.on("close",(function(){l=!0})),void 0===s&&(s=i("ee93")),s(t,{readable:e,writable:a},(function(t){if(t)return r(t);l=!0,r()}));var h=!1;return function(e){if(!l&&!h)return h=!0,c(t)?t.abort():"function"===typeof t.destroy?t.destroy():void r(e||new o("pipe"))}}function d(t){t()}function u(t,e){return t.pipe(e)}function p(t){return t.length?"function"!==typeof t[t.length-1]?l:t.pop():l}function f(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var s,n=p(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new r("streams");var a=e.map((function(t,i){var r=i<e.length-1,o=i>0;return h(t,r,o,(function(t){s||(s=t),t&&a.forEach(d),r||(a.forEach(d),n(s))}))}));return e.reduce(u)}t.exports=f},fc17:function(t,e,i){"use strict";var s=i("de44"),n=i.n(s);n.a},fc24:function(t,e,i){"use strict";var s=i("75aa"),n=i.n(s);n.a},fc2d:function(t,e,i){"use strict";var s=i("6799"),n=i.n(s);n.a},fc51:function(t,e,i){"use strict";var s=i("3bba"),n=i.n(s);n.a},fc75:function(t,e,i){"use strict";i.r(e);i("ddb0");var s=i("750b"),n=i("e6f9"),a=i("3ccf"),r=i("d1cf"),o=i("365c"),l=i("6116"),c=i("4212");i("5894");e["default"]=Object(s["b"])({setup(t,e){const i=Object(s["i"])({width:0,height:0,length:0}),h=t=>t.map(t=>()=>e.root.projectData[t]),d=Object(s["j"])(null),u=Object(s["a"])(()=>{const t=Object(c["a"])(i.length,i.width,i.height,e.root.knifeData.size.like).join("x");return t?t+"mm":""});Object(a["c"])(o["getCateInfo"],{variables:{project_id:e.route.query.id?e.route.query.id:e.route.query.workOuterId,type:e.route.query.id?"project":"work"},update(t){const{lengthLimit:i,widthLimit:s,heightLimit:n,defaultSize:a}=t;d.value=new r["a"](i,s,n,a,e.root.knifeData)}}),Object(s["k"])([...h(["width","height","length","thickness","inless","outless"]),()=>d.value,()=>e.root.knifeData],()=>{if(!Object.keys(e.root.projectData).length||"{}"===JSON.stringify(e.root.knifeData))return;const t=e.root.projectData;d.value&&d.value.setDepths(t.thickness,t.inless,t.outless);let s=e.root.knifeData.size;"ed"===t.size_type?s=e.root.knifeData.outSize:"dm"===t.size_type&&(s=e.root.knifeData.knifeSize),e.root.$nextTick(()=>{i.width=s.W,i.height=s.H,i.length=s.L})},{lazy:!0});const p=Object(s["a"])(()=>{var t;return(null===(t=o["SIZE_TYPES"].find(t=>t.key===e.root.projectData.size_type))||void 0===t?void 0:t.value)||""});return()=>Object(s["c"])("div",{on:{click:()=>{e.emit("toEdit")}}},[Object(s["c"])(n["default"],{attrs:{title:p.value+"：",value:u.value}}),Object(s["c"])(n["default"],{attrs:{title:"材质：",value:e.root.projectData.science_name||""}},[Object(s["c"])("img",{class:"mx-8",attrs:{src:Object(l["C"])(e.root.projectData.science_image,64,64),alt:""},style:{width:"22px",height:"22px",borderRadius:"4px",border:"1px solid #eee"}})]),Object(s["c"])(n["default"],{attrs:{title:"厚度：",value:e.root.projectData.thickness?e.root.projectData.thickness+"mm":""}})])}})},fc7b:function(t,e,i){var s=i("cbe5"),n=s.extend({type:"heart",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var i=e.cx,s=e.cy,n=e.width,a=e.height;t.moveTo(i,s),t.bezierCurveTo(i+n/2,s-2*a/3,i+2*n,s+a/3,i,s+a),t.bezierCurveTo(i-2*n,s+a/3,i-n/2,s-2*a/3,i,s)}});t.exports=n},fc82:function(t,e,i){},fca0:function(t,e,i){"use strict";var s=i("e127"),n=i.n(s);n.a},fcba:function(t,e,i){"use strict";var s=i("f8fd"),n=i.n(s);n.a},fcde:function(t,e,i){t.exports=i.p+"editor-assets/img/feedback.2ca3059c.svg"},fce4:function(t,e,i){t.exports=i.p+"editor-assets/img/del.7ed9a582.svg"},fcff:function(t,e,i){},fd17:function(t,e,i){},fd31:function(t,e,i){"use strict";var s=i("f50a"),n=i.n(s);n.a},fd32:function(t,e,i){},fd43:function(t,e,i){t.exports=i.p+"editor-assets/img/collection.bd900870.svg"},fd50:function(t,e,i){},fd52:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAAEEfUpiAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAGBUlEQVRYCZ1XW2yURRSemf//tyVgEbu7QOHBC4JKvICQ6IMKPqjBREorxqgPvmJ8QaIYxYqoidEI8UF88FljorsLRAxGQjGSQILIA5dQJGJACvQiaRFo978czze7M/l39m9BN2lnzmXOOXNuc34h6r+wVLiMrTIIEjRNIwzFEOxaLeXJAlGl8Hm4rfgkELJamvmQVLJVULKEKPnEctlNtVT4wwBWDm0v3oejhoDVMkKBIVTL+WM1YsoCo90wheXi62bfsFp9dayBpeGiYwtzYd/AESmoP+gaWm7wejXcaWRYzp/VMPvqH0MAY5qZdhZmKSHpY8OQ6x6SUqonDByO0Xnle+1bDAIru+/lNAyH/GYQ1LvMN3usUKfY8d8bZPT30T/Nnspz2qFSw2G5sJ+2dywwRIa/hYGArR8A0A/zWqJrI8OcDlOlFO+yvm/EDNkfjXpLKYo/ZY5FUqn3g1UDPeC3PxyEPfTrg4FF1jdUys92cWzBXlil8YhA2neGGbiwlH8HcLVSXOPy4EocjBFRLRf6qJyfbw66K/10+3QtrFJc59KA9xH7yPPnMPGky6C1jI6esN50GRhWSByKoj0ZNBFG8QwhpY1jmgeR4CL8wuKQXHCORdQ3RNQYKY4vTM8MI86AEI1TH5Foc4VBo9899Eoa3yDdEHSVJcmbguQS1t+vpNjtzS+ulQuPVQ2PWRsEhJXiJkoSDp08LH1vnd8WHxSXqCMS4nm26D0p5BV/yvR2ueLUuBFgV/jAdgKLbdygc+j7b5t5bwMFWZXlQDC52QlYC+HsBV3CaShMN9Zc6Ve5JqaACb80Xbc/kewOugenKXg88HN31dhq/7mXPYfDOGQORqXiKsOT6754AAWHMlAIl1zZ32eIWJNEnVFKbm3AqaSQhlGt8cmBLborpAnunmvlMO7s4lE/qCP7JLgMgLkVr+Um9UDQ9arXRPfaz3MdzZ5UgCCxmdvgBik3Jq6ASIwsYdyhSQVwlvX4M6ZyJ2r+6Q6l1EcK+Y3KambhHJCyMxy5dn8WDe0t6Bz4UaE4uOKeRRdtYiRaLOO45OKRseiNFo9k0tnlCCHa2HRFZKx9V6wE3hghE16HeyCUML3WTOuHG6oRuKiU38ouX1On24UTZ9RvkQvk04MXLJI3TQLSROxhWTxGPdwXXsxqMi4/YCiTJL7yWuUmV6HLn2kAlEbjosLB0YMD59J3vhdscEvGFWZgNPMoDj9AcIHj8wf8FrEqy5gGA2qK6SDfdC4f+tnnHiC7zg0bwf9nRXZFXLBszGPsmb84DEvThlgDUt30dCBzSydTTJXiHRHRZxygR9nYm1hIzMV+gieFHr9roJxlKAwJqXqQz9yWft61ASZx4Oqga3B1lgDg8MhGl0ePwkOAmb/M5X6I82OeJHqJjQi47V/z/dZ5cuXZfvC4P2Q5QoMCRg1KPEAUJ7tY3OFc9+Bi90AaNl5iV5JPYo7sHjpv6PoRj6onAPMN1/MAYyczw2PW2szFg46nnpJclL18o2XS9x8PVl7oNUz/ZaVdc28Jr47tY2/czV4Z54S7NR1nV1a4fZYeJvgiexWeXjDoF9TlvA5MtNrDBcIrY8NQzlf/kkPYOpnyBl2s28e7z4fn4/lmYtN8NJENUB5Ves+w9zq4mxwPWm9enPncZwmo6eK788yBoQM8mB2yeCfChTv2LdLKmUEJ760bVp7SBd0SD3PUd3GQhbXhcb/RZjORYdfDm2RFt/QXzCzoMtQNaEycwqQghPcwpobrCcJ7zs91bS6Woi/XNdQwmWSdr32Sxfv1hNbKpcvvgn6usNEjG7dM7il6yHIHKlegEuoNvsUl/HEI1rv0NAxZeAYhm6vkgNZVf5RsJzQH8PEYxclODgk3G3maI/zCjXjEnE+vtRsnX+vuhzasvBWy8+KRNE+TAYaov5jGR98WCb1WCw0oPPRK2iY8/xc/js7hC0rzYwDGV0YcPcLjfCcrXKS5eRgWSm72W9o+nChJJzRAC07908n6++BybrnPcCu9h4Ts4CcXpavLCZ867N7jPAft8O8s9GaN8ilxdvsvJIwOFqf9fOsAAAAASUVORK5CYII="},fd60:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEJ0lEQVRYR+1WTWgcZRh+3m+SbtQeGimplOoh9SAaL1brXzSIirUgkYA5qYhtqe7fbEwys3jak+5MNu7O7s5qtRVRT0HFgLQWKhJtUEPjxSgebA+2SBuCyaFqlux8r8xsNm3Smdk9VHvp3Ib3+d73+Z737yNc44+ucXxcJ3BdgZYVUNXCNgcrTzLLRxi8C0RdBGx1i5iBBTDPE2iWSHwrN/GJyph2vpUCb0og+ZrxmONwDEA/M9packqoAZhUFLKLb+lfh50JJJAYNXc6VZkH8EwrQYMwRPSF2ESp0ph22g/jSyCujj0v2XkPQIe/Y2IQfgJwZtXeDcbdAAddaFmQcqBsjX680d8VB2KqYTLzqC9bV1rG26KDzJKpn7sck9CMHXKZNRBeDU6VyFWK2jrf6wjE1eybkpH2D05LioKBZjmt1ww+Y+YtAX4M29LXYqwRiKpGHMylAMkdRRF7SvnREw370FC+e0VWH3D/20Xk+3x+qJEOJIbGnpDSOc4M4euPKFGx9LJr8wgkhnN3yhXnRwZHAgrlfbuY3udhi8WIPP2PyYzEpZwTE6Ekdt6glZLJqouLJbNHGHjZ3x9VRbtyT2l85BdiZoqnzBlmvjewkhX02Pn0z57j0BqhMdvSNQ83lL2LHcyFdMepckHbTYmUMeBI/jQQCDpnF/VbXfvwcG7rcq12IUhaIsiOtrZt4+MjC3UVjLMM3hHsWxmgaDJ7CsCuEKbTtqX3uva4mn1KMr4MmwuCsKdspY+7mGjSmAb4oRD8LEVV4yiYnw5RYMYu6vfX5c89ylybCiNA1NZnWyPfrCrwA4N3B+KJjrn5f1hKeTIEtGAXtC4i4mjG3kyLF88z800BLfYXd26+pZKJXXRrK5Yy58Hs7Qu/TwjR63VBLJn9nIH+MGC5oE3X02BEJbPt65AoVrb0iodrcjECJu1i+lmPgLvpVlCdC2RLdKxi6XsbQeOqsY+BXGPYENESASNlSz/SwISmlmihHZEey0pdWBtEsaS5FyQnA8co4ZWKlT7UCDAxMaFMfXfmDve/78HuXwcHB51LwbMHwXjHP03uOBf9dlE76trXjeKEar7oMH/gt1TI3QMkUnZB85W/ESyWMmNgWfC/CLFC9FLJ0j5s4K9cRinjBZb8bsgmnCKQKW7v+Kox9bzp+Nvy4wzWAO7zvTmoCoEDdkH/6HK77/pU1dx9NdQ+YcZtIe3pjtw/Vu3bg8a4JzPhdyHouVJen9noL/BBkskcunH+z6XX3eIKcx46E0BVt1i7bt7yRiZz8G9/ZcI8uO2kGdu5SvsZvB/M3khu+hGdJdBhivDhsqk3VPI91vRN2DiVybBYXMz1OJC9zPVHKXP9UUq0+iglmlUgTnZ2jsxlMiSbEt3YBa0cuNqYlhW42oED2/C/ChTcTf93xA3x/gXIELrIY/BjuAAAAABJRU5ErkJggg=="},fd75:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("a-button",{attrs:{block:""},on:{click:t.onEdit}},[t._v(" 编辑条形码内容 ")]),i("a-divider"),i("width-height-input"),i("foreground-background-picker",{attrs:{"optional-colors":["#FFAA00","#FF4D4F","#025FFF","#52C41A"]}}),i("font-select"),i("select-element-craft"),i("a-divider"),i("design-common-operation",{staticClass:"mt-16"}),i("edit-barcode",{ref:"editBarcodeRef",attrs:{visible:t.showBarCodeDialog,data:t.curDesign},on:{close:function(e){t.showBarCodeDialog=!1},callback:t.handleBarcodeChange}})],1)},n=[],a=i("5530"),r=i("5880"),o=i("13f9"),l=i("1b2a"),c=i("d026"),h=i("1e9d"),d=i("1c0d"),u=i("7d88"),p={components:{widthHeightInput:o["default"],foregroundBackgroundPicker:c["default"],designCommonOperation:h["default"],selectElementCraft:d["default"],editBarcode:u["default"],fontSelect:l["default"]},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapState"])("editor-v2",["element_craft_list"])),Object(r["mapGetters"])("editor-v2",["curDesign"])),data(){return{showBarCodeDialog:!1}},mounted(){this.$bus.$on("setting-barcode/showEdit",t=>{this.onEdit()})},beforeDestroy(){this.$bus.$off("setting-barcode/showEdit")},methods:{onEdit(){this.showBarCodeDialog=!0},handleBarcodeChange(t){this.showBarCodeDialog=!1,Object.assign(this.curDesign,t)}}},f=p,m=i("2877"),g=Object(m["a"])(f,s,n,!1,null,null,null);e["default"]=g.exports},fd7c:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.default=function(t,e){return s({},t,e)}},fda5:function(t,e,i){},fee0:function(t,e,i){},fee1:function(t,e,i){"use strict";var s=i("410d"),n=i.n(s);n.a},ff05:function(t,e,i){t.exports=i.p+"editor-assets/img/lig.556b41e9.svg"},ff84:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("349c"),n=i("da3d"),a=i("241e"),r=i("9ffa"),o=i("8e51"),l=i("7cb9"),c=i("c17b"),h=i("fbb2");e.default={CODE39:s.CODE39,CODE128:n.CODE128,CODE128A:n.CODE128A,CODE128B:n.CODE128B,CODE128C:n.CODE128C,EAN13:a.EAN13,EAN8:a.EAN8,EAN5:a.EAN5,EAN2:a.EAN2,UPC:a.UPC,UPCE:a.UPCE,ITF14:r.ITF14,ITF:r.ITF,MSI:o.MSI,MSI10:o.MSI10,MSI11:o.MSI11,MSI1010:o.MSI1010,MSI1110:o.MSI1110,pharmacode:l.pharmacode,codabar:c.codabar,GenericBarcode:h.GenericBarcode}},fff4:function(t,e,i){"use strict";var s=i("dc08"),n=i.n(s);n.a}}]);